(()=>{var e,t,a,r,n,s,o,i,l,d,c,u,p,g,h,f,w,m,y,x,_,v,A,b,E,T,C,I,k,D,S,M,R,B,W,P,N,F,O,L,H,V,U,G,j,Z,z,K,Y,q,$,J,X,Q,ee,te,ae,re,ne,se,oe,ie,le,de,ce,ue,pe,ge={6951:(e,t,a)=>{"use strict";a.d(t,{ampli:()=>Ye});var r=a(63978),n=a.n(r),s=a(93476),o=a.n(s),i=a(51942),l=a.n(i),d=a(36374),c=a(95656),u=function(){return u=l()||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},u.apply(this,arguments)},p={production:"d44950b777177c2ebee5f21f194c1231",development:"52a980fd5fb8da5fc680687d7e991e18"},g=u({plan:{version:"8",branch:"main",source:"extension",versionId:"cffa4fa2-03a3-4eda-9943-1feccac54d56"}},{ingestionMetadata:{sourceName:"browser-typescript-ampli",sourceVersion:"2.0.0"}}),h=function(){this.event_type="All Wallets Page Viewed"},f=function(){this.event_type="Assets Page Viewed"},w=function(){this.event_type="Buy Ada Success Redirect"},m=function(){this.event_type="Claim ADA Page Viewed"},y=function(e){this.event_properties=e,this.event_type="Claim Ada Transaction Settled",this.event_properties=e},x=function(e){this.event_properties=e,this.event_type="Claim Ada Transaction Submitted",this.event_properties=e},_=function(){this.event_type="Connect Wallet Check Page Viewed"},v=function(){this.event_type="Connect Wallet Connect Page Viewed"},A=function(){this.event_type="Connect Wallet Details Page Viewed"},b=function(e){this.event_properties=e,this.event_type="Connect Wallet Details Submitted",this.event_properties=e},E=function(){this.event_type="Connector Page Viewed"},T=function(){this.event_type="Create Wallet Details Settled"},C=function(){this.event_type="Create Wallet Details Step Viewed"},I=function(){this.event_type="Create Wallet Details Submitted"},k=function(){this.event_type="Create Wallet Language Page Viewed"},D=function(){this.event_type="Create Wallet Learn Phrase Step Viewed"},S=function(){this.event_type="Create Wallet Save Phrase Step Viewed"},M=function(){this.event_type="Create Wallet Select Method Page Viewed"},R=function(){this.event_type="Create Wallet Terms Page Viewed"},B=function(){this.event_type="Create Wallet Verify Phrase Step Viewed"},W=function(e){this.event_properties=e,this.event_type="Create Wallet Verify Phrase Word Selected",this.event_properties=e},P=function(){this.event_type="Dapp Popup Add Collateral Page Viewed"},N=function(e){this.event_properties=e,this.event_type="Dapp Popup Connect Wallet Page Viewed",this.event_properties=e},F=function(){this.event_type="Dapp Popup Connect Wallet Password Page Viewed"},O=function(){this.event_type="Dapp Popup Sign Transaction Page Viewed"},L=function(e){this.event_properties=e,this.event_type="Dapp Popup Sign Transaction Submitted",this.event_properties=e},H=function(){this.event_type="Exchange Page Viewed"},V=function(e){this.event_properties=e,this.event_type="Exchange Submitted",this.event_properties=e},U=function(){this.event_type="Governance Choose Drep Page Viewed"},G=function(e){this.event_properties=e,this.event_type="Governance Confirm Transaction Page Viewed",this.event_properties=e},j=function(){this.event_type="Governance Dashboard Page Viewed"},Z=function(e){this.event_properties=e,this.event_type="Governance Transaction Success Page Viewed",this.event_properties=e},z=function(e){this.event_properties=e,this.event_type="In App Notification Closed",this.event_properties=e},K=function(e){this.event_properties=e,this.event_type="In App Notification Opened",this.event_properties=e},Y=function(){this.event_type="In App Notification Viewed"},q=function(e){this.event_properties=e,this.event_type="Network Selected",this.event_properties=e},$=function(){this.event_type="NFT Gallery Details Image Viewed"},J=function(e){this.event_properties=e,this.event_type="NFT Gallery Details Navigation",this.event_properties=e},X=function(){this.event_type="NFT Gallery Details Page Viewed"},Q=function(e){this.event_properties=e,this.event_type="NFT Gallery Details Tab",this.event_properties=e},ee=function(e){this.event_properties=e,this.event_type="NFT Gallery Grid View Selected",this.event_properties=e},te=function(e){this.event_properties=e,this.event_type="NFT Gallery Page Viewed",this.event_properties=e},ae=function(e){this.event_properties=e,this.event_type="NFT Gallery Search Activated",this.event_properties=e},re=function(){this.event_type="Onboarding Analytics Page Viewed"},ne=function(e){this.event_properties=e,this.event_type="Portfolio Token Details",this.event_properties=e},se=function(e){this.event_properties=e,this.event_type="Portfolio Tokens List Page Viewed",this.event_properties=e},oe=function(e){this.event_properties=e,this.event_type="Portfolio Tokens List Search Activated",this.event_properties=e},ie=function(e){this.event_properties=e,this.event_type="Receive Amount Generated Page Viewed",this.event_properties=e},le=function(){this.event_type="Receive Amount Page Viewed"},de=function(e){this.event_properties=e,this.event_type="Receive Copy Address Clicked",this.event_properties=e},ce=function(){this.event_type="Receive Generate New Address Clicked"},ue=function(){this.event_type="Receive Page List Viewed"},pe=function(){this.event_type="Receive Page Viewed"},ge=function(){this.event_type="Receive Share Address Clicked"},he=function(){this.event_type="Restore Wallet Details Settled"},fe=function(){this.event_type="Restore Wallet Details Step Viewed"},we=function(e){this.event_properties=e,this.event_type="Restore Wallet Enter Phrase Step Status",this.event_properties=e},me=function(e){this.event_properties=e,this.event_type="Restore Wallet Enter Phrase Step Viewed",this.event_properties=e},ye=function(){this.event_type="Restore Wallet Type Step Viewed"},xe=function(){this.event_type="Sell Ada Input Amount"},_e=function(){this.event_type="Sell Ada Success Redirect"},ve=function(){this.event_type="Send Initiated"},Ae=function(){this.event_type="Send Select Asset Page Viewed"},be=function(e){this.event_properties=e,this.event_type="Send Select Asset Selected",this.event_properties=e},Ee=function(e){this.event_properties=e,this.event_type="Send Select Asset Updated",this.event_properties=e},Te=function(e){this.event_properties=e,this.event_type="Send Summary Page Viewed",this.event_properties=e},Ce=function(e){this.event_properties=e,this.event_type="Send Summary Submitted",this.event_properties=e},Ie=function(e){this.event_properties=e,this.event_type="Settings In App Notifications Status Updated",this.event_properties=e},ke=function(){this.event_type="Settings Page Viewed"},De=function(){this.event_type="Staking Center Delegation Initiated"},Se=function(e){this.event_properties=e,this.event_type="Staking Center Delegation Submitted",this.event_properties=e},Me=function(){this.event_type="Staking Center Page Viewed"},Re=function(e){this.event_properties=e,this.event_type="Swap Asset From Changed",this.event_properties=e},Be=function(e){this.event_properties=e,this.event_type="Swap Asset To Changed",this.event_properties=e},We=function(e){this.event_properties=e,this.event_type="Swap Cancelation Submitted",this.event_properties=e},Pe=function(e){this.event_properties=e,this.event_type="Swap Confirmed  Page Viewed",this.event_properties=e},Ne=function(e){this.event_properties=e,this.event_type="Swap Initiated",this.event_properties=e},Fe=function(e){this.event_properties=e,this.event_type="Swap Order Selected",this.event_properties=e},Oe=function(e){this.event_properties=e,this.event_type="Swap Order Submitted",this.event_properties=e},Le=function(){this.event_type="Swap Pool Changed"},He=function(e){this.event_properties=e,this.event_type="Swap Slippage Changed",this.event_properties=e},Ve=function(e){this.event_properties=e,this.event_type="Theme Selected",this.event_properties=e},Ue=function(){this.event_type="Transactions Page Viewed"},Ge=function(){this.event_type="Voting Page Viewed"},je=function(){this.event_type="Wallet Page Buy Banner Clicked"},Ze=function(){this.event_type="Wallet Page Exchange Clicked"},ze=function(){this.event_type="Wallet Page Viewed"},Ke=function(){return{promise:o().resolve()}},Ye=new(function(){function e(){this.disabled=!1}return n()(e.prototype,"client",{get:function(){return this.isInitializedAndEnabled(),this.amplitude},enumerable:!1,configurable:!0}),n()(e.prototype,"isLoaded",{get:function(){return null!=this.amplitude},enumerable:!1,configurable:!0}),e.prototype.isInitializedAndEnabled=function(){return this.amplitude?!this.disabled:(console.error("ERROR: Ampli is not yet initialized. Have you called ampli.load() on app start?"),!1)},e.prototype.load=function(e){var t;if(this.disabled=null!==(t=e.disabled)&&void 0!==t&&t,this.amplitude)return console.warn("WARNING: Ampli is already intialized. Ampli.load() should be called once at application startup."),Ke();var a=null;if(e.client&&"apiKey"in e.client?a=e.client.apiKey:"environment"in e&&(a=p[e.environment]),e.client&&"instance"in e.client)this.amplitude=e.client.instance;else{if(a){this.amplitude=d.F();var r=e.client&&"configuration"in e.client?e.client.configuration:{};return this.amplitude.init(a,void 0,u(u({},g),r))}console.error("ERROR: ampli.load() requires 'environment', 'client.apiKey', or 'client.instance'")}return Ke()},e.prototype.identify=function(e,t){if(!this.isInitializedAndEnabled())return Ke();e&&(t=u(u({},t),{user_id:e}));var a=new c.h;return this.amplitude.identify(a,t)},e.prototype.flush=function(){return this.isInitializedAndEnabled()?this.amplitude.flush():Ke()},e.prototype.track=function(e,t){return this.isInitializedAndEnabled()?this.amplitude.track(e,void 0,t):Ke()},e.prototype.allWalletsPageViewed=function(e){return this.track(new h,e)},e.prototype.assetsPageViewed=function(e){return this.track(new f,e)},e.prototype.buyAdaSuccessRedirect=function(e){return this.track(new w,e)},e.prototype.claimAdaPageViewed=function(e){return this.track(new m,e)},e.prototype.claimAdaTransactionSettled=function(e,t){return this.track(new y(e),t)},e.prototype.claimAdaTransactionSubmitted=function(e,t){return this.track(new x(e),t)},e.prototype.connectWalletCheckPageViewed=function(e){return this.track(new _,e)},e.prototype.connectWalletConnectPageViewed=function(e){return this.track(new v,e)},e.prototype.connectWalletDetailsPageViewed=function(e){return this.track(new A,e)},e.prototype.connectWalletDetailsSubmitted=function(e,t){return this.track(new b(e),t)},e.prototype.connectorPageViewed=function(e){return this.track(new E,e)},e.prototype.createWalletDetailsSettled=function(e){return this.track(new T,e)},e.prototype.createWalletDetailsStepViewed=function(e){return this.track(new C,e)},e.prototype.createWalletDetailsSubmitted=function(e){return this.track(new I,e)},e.prototype.createWalletLanguagePageViewed=function(e){return this.track(new k,e)},e.prototype.createWalletLearnPhraseStepViewed=function(e){return this.track(new D,e)},e.prototype.createWalletSavePhraseStepViewed=function(e){return this.track(new S,e)},e.prototype.createWalletSelectMethodPageViewed=function(e){return this.track(new M,e)},e.prototype.createWalletTermsPageViewed=function(e){return this.track(new R,e)},e.prototype.createWalletVerifyPhraseStepViewed=function(e){return this.track(new B,e)},e.prototype.createWalletVerifyPhraseWordSelected=function(e,t){return this.track(new W(e),t)},e.prototype.dappPopupAddCollateralPageViewed=function(e){return this.track(new P,e)},e.prototype.dappPopupConnectWalletPageViewed=function(e,t){return this.track(new N(e),t)},e.prototype.dappPopupConnectWalletPasswordPageViewed=function(e){return this.track(new F,e)},e.prototype.dappPopupSignTransactionPageViewed=function(e){return this.track(new O,e)},e.prototype.dappPopupSignTransactionSubmitted=function(e,t){return this.track(new L(e),t)},e.prototype.exchangePageViewed=function(e){return this.track(new H,e)},e.prototype.exchangeSubmitted=function(e,t){return this.track(new V(e),t)},e.prototype.governanceChooseDrepPageViewed=function(e){return this.track(new U,e)},e.prototype.governanceConfirmTransactionPageViewed=function(e,t){return this.track(new G(e),t)},e.prototype.governanceDashboardPageViewed=function(e){return this.track(new j,e)},e.prototype.governanceTransactionSuccessPageViewed=function(e,t){return this.track(new Z(e),t)},e.prototype.inAppNotificationClosed=function(e,t){return this.track(new z(e),t)},e.prototype.inAppNotificationOpened=function(e,t){return this.track(new K(e),t)},e.prototype.inAppNotificationViewed=function(e){return this.track(new Y,e)},e.prototype.networkSelected=function(e,t){return this.track(new q(e),t)},e.prototype.nftGalleryDetailsImageViewed=function(e){return this.track(new $,e)},e.prototype.nftGalleryDetailsNavigation=function(e,t){return this.track(new J(e),t)},e.prototype.nftGalleryDetailsPageViewed=function(e){return this.track(new X,e)},e.prototype.nftGalleryDetailsTab=function(e,t){return this.track(new Q(e),t)},e.prototype.nftGalleryGridViewSelected=function(e,t){return this.track(new ee(e),t)},e.prototype.nftGalleryPageViewed=function(e,t){return this.track(new te(e),t)},e.prototype.nftGallerySearchActivated=function(e,t){return this.track(new ae(e),t)},e.prototype.onboardingAnalyticsPageViewed=function(e){return this.track(new re,e)},e.prototype.portfolioTokenDetails=function(e,t){return this.track(new ne(e),t)},e.prototype.portfolioTokensListPageViewed=function(e,t){return this.track(new se(e),t)},e.prototype.portfolioTokensListSearchActivated=function(e,t){return this.track(new oe(e),t)},e.prototype.receiveAmountGeneratedPageViewed=function(e,t){return this.track(new ie(e),t)},e.prototype.receiveAmountPageViewed=function(e){return this.track(new le,e)},e.prototype.receiveCopyAddressClicked=function(e,t){return this.track(new de(e),t)},e.prototype.receiveGenerateNewAddressClicked=function(e){return this.track(new ce,e)},e.prototype.receivePageListViewed=function(e){return this.track(new ue,e)},e.prototype.receivePageViewed=function(e){return this.track(new pe,e)},e.prototype.receiveShareAddressClicked=function(e){return this.track(new ge,e)},e.prototype.restoreWalletDetailsSettled=function(e){return this.track(new he,e)},e.prototype.restoreWalletDetailsStepViewed=function(e){return this.track(new fe,e)},e.prototype.restoreWalletEnterPhraseStepStatus=function(e,t){return this.track(new we(e),t)},e.prototype.restoreWalletEnterPhraseStepViewed=function(e,t){return this.track(new me(e),t)},e.prototype.restoreWalletTypeStepViewed=function(e){return this.track(new ye,e)},e.prototype.sellAdaInputAmount=function(e){return this.track(new xe,e)},e.prototype.sellAdaSuccessRedirect=function(e){return this.track(new _e,e)},e.prototype.sendInitiated=function(e){return this.track(new ve,e)},e.prototype.sendSelectAssetPageViewed=function(e){return this.track(new Ae,e)},e.prototype.sendSelectAssetSelected=function(e,t){return this.track(new be(e),t)},e.prototype.sendSelectAssetUpdated=function(e,t){return this.track(new Ee(e),t)},e.prototype.sendSummaryPageViewed=function(e,t){return this.track(new Te(e),t)},e.prototype.sendSummarySubmitted=function(e,t){return this.track(new Ce(e),t)},e.prototype.settingsInAppNotificationsStatusUpdated=function(e,t){return this.track(new Ie(e),t)},e.prototype.settingsPageViewed=function(e){return this.track(new ke,e)},e.prototype.stakingCenterDelegationInitiated=function(e){return this.track(new De,e)},e.prototype.stakingCenterDelegationSubmitted=function(e,t){return this.track(new Se(e),t)},e.prototype.stakingCenterPageViewed=function(e){return this.track(new Me,e)},e.prototype.swapAssetFromChanged=function(e,t){return this.track(new Re(e),t)},e.prototype.swapAssetToChanged=function(e,t){return this.track(new Be(e),t)},e.prototype.swapCancelationSubmitted=function(e,t){return this.track(new We(e),t)},e.prototype.swapConfirmedPageViewed=function(e,t){return this.track(new Pe(e),t)},e.prototype.swapInitiated=function(e,t){return this.track(new Ne(e),t)},e.prototype.swapOrderSelected=function(e,t){return this.track(new Fe(e),t)},e.prototype.swapOrderSubmitted=function(e,t){return this.track(new Oe(e),t)},e.prototype.swapPoolChanged=function(e){return this.track(new Le,e)},e.prototype.swapSlippageChanged=function(e,t){return this.track(new He(e),t)},e.prototype.themeSelected=function(e,t){return this.track(new Ve(e),t)},e.prototype.transactionsPageViewed=function(e){return this.track(new Ue,e)},e.prototype.votingPageViewed=function(e){return this.track(new Ge,e)},e.prototype.walletPageBuyBannerClicked=function(e){return this.track(new je,e)},e.prototype.walletPageExchangeClicked=function(e){return this.track(new Ze,e)},e.prototype.walletPageViewed=function(e){return this.track(new ze,e)},e}())},60274:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>We,iZ:()=>ce.cip8Sign,jK:()=>Pe,ZE:()=>Ne,mO:()=>Fe,vX:()=>Oe,Cj:()=>Le});var r=a(94198),n=a.n(r),s=a(89400),o=a.n(s),i=a(94473),l=a.n(i),d=a(80426),c=a.n(d),u=a(77766),p=a.n(u),g=a(39392),h=a.n(g),f=a(78580),w=a.n(f),m=a(93476),y=a.n(m),x=a(39291),_=a.n(x),v=a(72119),A=a.n(v),b=a(25843),E=a.n(b),T=a(86902),C=a.n(T),I=a(78914),k=a.n(I),D=a(36384),S=a.n(D),M=a(59340),R=a.n(M),B=a(41511),W=a.n(B),P=a(20116),N=a.n(P),F=a(51938),O=a.n(F),L=a(51942),H=a.n(L),V=a(32366),U=a.n(V),G=a(2991),j=a.n(G),Z=a(905),z=a(13469),K=a(37790),Y=a(36231),q=a(66905),$=a(34654),J=a(4922),X=a(24283),Q=a(54901),ee=a(11015),te=a(52367),ae=a(38079),re=a(90691),ne=a(38441),se=a(3577),oe=(a(27189),a(63675)),ie=a(4158),le=a(84184),de=a(76900),ce=a(75723),ue=a(15476),pe=a(62021),ge=a(70184),he=a(21131),fe=a(63139),we=a(73744),me=a(40026),ye=a(34786),xe=a(33913),_e=a(1499),ve=a(37495),Ae=a(27649),be=a(86335),Ee=a(84174),Te=a(67362),Ce=a(55343),Ie=a(45918),ke=a(15687),De=a(90649),Se=a(87315),Me=a(51965),Re=a(27697),Be=a(13069);class We{async getAllAddressesForDisplay(e){z.Yd.debug("AdaApi::getAllAddressesForDisplay called");try{return await(0,ve.XN)(e)}catch(e){if(z.Yd.error("AdaApi::getAllAddressesForDisplay error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async getChainAddressesForDisplay(e){z.Yd.debug("AdaApi::getChainAddressesForDisplay called");try{return await(0,_e.cP)(e)}catch(e){if(z.Yd.error("AdaApi::getChainAddressesForDisplay error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async refreshTransactions(e){try{var t;let a;if(e.isLocalRequest)a=await(0,J._v)({publicDeriver:e.publicDeriver,skip:e.skip||0,limit:e.limit||20});else{e.beforeTx||await(0,J.tu)(e.publicDeriver.getDb(),e.publicDeriver,e.checkAddressesInUse,e.getTokenInfo,e.getMultiAssetMetadata,e.getMultiAssetSupply);const t=e=>null!=e&&e.block?{blockHash:e.block.Hash,txHash:e.txid}:void 0;a=await(0,J.Ci)(e.publicDeriver.getDb(),e.publicDeriver,e.checkAddressesInUse,e.getTransactionHistory,e.getRecentTransactionHashes,e.getTransactionsByHashes,e.getBestBlock,e.getTokenInfo,e.getMultiAssetMetadata,e.getMultiAssetSupply,t(e.afterTx),t(e.beforeTx))}return j()(t=a.txs).call(t,(t=>{if(t.txType===re.iU.CardanoByron)return K.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});if(t.txType===re.iU.CardanoShelley)return Y.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});throw new Error(`refreshTransactions unknown tx type ${t.type}`)}))}catch(e){if(z.Yd.error("AdaApi::refreshTransactions error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async refreshPendingTransactions(e){z.Yd.debug("AdaApi::refreshPendingTransactions called");try{var t;const a=await(0,J.ON)({publicDeriver:e.publicDeriver});return z.Yd.debug("AdaApi::refreshPendingTransactions success: "+(0,z.WO)(a)),j()(t=a.txs).call(t,(t=>{if(t.txType===re.iU.CardanoByron)return K.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});if(t.txType===re.iU.CardanoShelley)return Y.Z.fromAnnotatedTx({tx:t,addressLookupMap:a.addressLookupMap,network:e.publicDeriver.getParent().getNetworkInfo(),defaultToken:e.publicDeriver.getParent().getDefaultToken()});throw new Error(`refreshPendingTransactions unknown tx type ${t.type}`)}))}catch(e){if(z.Yd.error("AdaApi::refreshPendingTransactions error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async getForeignAddresses(e){try{return await(0,J.Jr)({publicDeriver:e.publicDeriver})}catch(e){if(z.Yd.error("AdaApi::getForeignAddresses error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createWallet(e){return await this.restoreWallet(e)}async signAndBroadcast(e){z.Yd.debug("AdaApi::signAndBroadcast called");const{password:t}=e;try{const{txHash:a,encodedTx:r}=await be.RustModule.WasmScope((async a=>{const r=await(0,le.Ff)(e.signRequest.senderUtxos,e.signRequest.unsignedTx,e.publicDeriver,t,e.signRequest.metadata);return{txHash:a.WalletV4.FixedTransaction.from_hex(r.to_hex()).transaction_hash().to_hex(),encodedTx:r.to_bytes()}})),{txId:n}=await e.sendTx({network:e.publicDeriver.getParent().getNetworkInfo(),id:a,encodedTx:r});return z.Yd.debug("AdaApi::signAndBroadcast success: "+(0,z.WO)({txId:n})),{txId:n,signedTxHex:(0,De.bytesToHex)(r)}}catch(e){if(e instanceof xe.UZ)throw new he.IncorrectWalletPasswordError;if(console.error("AdaApi::signAndBroadcast",e),z.Yd.error(`AdaApi::signAndBroadcast error: ${(0,z.uh)(e)}`),e instanceof he.InvalidWitnessError)throw new he.InvalidWitnessError;if(e instanceof fe.default)throw e;throw new he.GenericApiError}}createTrezorSignTxData(e){try{var t;z.Yd.debug("AdaApi::createTrezorSignTxData called");const a=U()(t=(0,Ee.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),r=(0,pe.Gi)(e.signRequest,a.ByronNetworkId,O()(a.ChainNetworkId,10));return z.Yd.debug("AdaApi::createTrezorSignTxData success: "+(0,z.WO)(r)),{trezorSignTxPayload:r}}catch(e){if(z.Yd.error("AdaApi::createTrezorSignTxData error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}createLedgerSignTxData(e){try{var t;z.Yd.debug("AdaApi::createLedgerSignTxData called");const a=U()(t=(0,Ee.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),r=(0,ge.Fb)({signRequest:e.signRequest,byronNetworkMagic:a.ByronNetworkId,networkId:O()(a.ChainNetworkId,10),addressingMap:e.addressingMap,cip36:e.cip36});return z.Yd.debug("AdaApi::createLedgerSignTxData success: "+(0,z.WO)(r)),{ledgerSignTxPayload:r}}catch(e){if(z.Yd.error("AdaApi::createLedgerSignTxData error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}createHwSignTxDataFromRawTx(e,t){try{var a;z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx called");const n=(0,Ee.getCardanoHaskellBaseConfigCombined)(t.network),s=null!==(a=n.ByronNetworkId)&&void 0!==a?a:(0,De.fail)("Missing ByronNetworkId in network config!"),o=e=>{var a;return null===(a=t.addressingMap(e))||void 0===a?void 0:a.path};if("ledger"===e){var r;const a=(0,ge.od)(t.txBodyHex,Number(n.ChainNetworkId),s,o,t.senderUtxos,null!==(r=t.additionalRequiredSigners)&&void 0!==r?r:[]);return z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx success: "+(0,z.WO)(a)),{hw:e,result:{ledgerSignTxPayload:a}}}if("trezor"===e){const a=(0,pe.fu)(t.txBodyHex,Number(n.ChainNetworkId),s,o,t.senderUtxos);return z.Yd.debug("AdaApi::createHwSignTxDataFromRawTx success: "+(0,z.WO)(a)),{hw:e,result:{trezorSignTxPayload:a}}}throw new Error("Now supported HW type: "+e)}catch(e){if(z.Yd.error("AdaApi::createHwSignTxDataFromRawTx error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createUnsignedTxForUtxos(e){z.Yd.debug("AdaApi::createUnsignedTxForUtxos called");try{let n;const s=void 0!==e.metadata?(0,Q.bp)(e.metadata):void 0,{protocolParameters:o}=e;let i;if((0,ie.qP)(e.tokens)){if(1!==e.receivers.length)throw new Error("createUnsignedTxForUtxos wrong output size for sendAll");const t=e.receivers[0];i={address:t.address,handle:t.addressHandle},n=(0,le.T$)(t,e.utxos,e.absSlotNumber,{keyDeposit:be.RustModule.WalletV4.BigNum.from_str(o.keyDeposit),linearFee:be.RustModule.WalletV4.LinearFee.new(be.RustModule.WalletV4.BigNum.from_str(o.linearFee.coefficient),be.RustModule.WalletV4.BigNum.from_str(o.linearFee.constant)),coinsPerUtxoByte:be.RustModule.WalletV4.BigNum.from_str(o.coinsPerUtxoByte),poolDeposit:be.RustModule.WalletV4.BigNum.from_str(o.poolDeposit),networkId:Number(e.network.BaseConfig[0].ChainNetworkId)},s,e.network.NetworkId)}else{var t,a,r;const l=U()(t=e.receivers).call(t,((e,t)=>null!=t.addressing?(e.push({address:t.address,addressing:t.addressing}),e):e),[]);if(1!==l.length)throw new Error("createUnsignedTxForUtxos needs exactly one change address");const d=l[0],c=U()(a=e.receivers).call(a,((e,t)=>null==t.addressing?(e.push({address:t.address,addressHandle:t.addressHandle}),e):e),[]);if(c.length>1)throw new Error("createUnsignedTxForUtxos can't send to more than one address");const u=c[0];i={address:u.address,handle:u.addressHandle},n=await(0,le.fi)(1===c.length?[{address:u.address,amount:(0,ie._Y)(e.defaultToken,e.tokens,j()(r=e.utxos).call(r,(t=>(0,Ae.Bi)(t,e.network.NetworkId))))}]:[],{address:d.address,addressing:d.addressing},e.utxos,e.absSlotNumber,{keyDeposit:o.keyDeposit,linearFeeCoefficient:o.linearFee.coefficient,linearFeeConstant:o.linearFee.constant,coinsPerUtxoByte:o.coinsPerUtxoByte,poolDeposit:o.poolDeposit,networkId:Number(e.network.BaseConfig[0].ChainNetworkId)},[],[],!1,s,e.network.NetworkId)}return z.Yd.debug("AdaApi::createUnsignedTxForUtxos success: "+(0,z.WO)(n)),new ye.Y({senderUtxos:n.senderUtxos,unsignedTx:n.txBuilder,changeAddr:n.changeAddr,metadata:s,networkSettingSnapshot:{ChainNetworkId:Number((0,Ee.getCardanoHaskellBaseConfig)(e.network)[0].ChainNetworkId),KeyDeposit:new Z.Z(o.keyDeposit),PoolDeposit:new Z.Z(o.poolDeposit),NetworkId:e.network.NetworkId},receiver:i})}catch(e){if(z.Yd.error("AdaApi::createUnsignedTxForUtxos error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createUnsignedTx(e){var t;const a=N()(t=e.publicDeriver.utxos).call(t,(t=>N()(e).call(e,t))),r=(0,Ae.ue)(a),n=[{address:e.receiver,addressHandle:e.receiverHandle}];if(!(0,ie.qP)(e.tokens)){const t=e.publicDeriver.receiveAddress;n.push({address:t.addr.Hash,addressing:t.addressing})}return this.createUnsignedTxForUtxos({absSlotNumber:e.absSlotNumber,receivers:n,network:(0,Ee.getNetworkById)(e.publicDeriver.networkId),defaultToken:{defaultNetworkId:e.publicDeriver.networkId,defaultIdentifier:e.publicDeriver.defaultTokenId},utxos:r,tokens:e.tokens,metadata:e.metadata,protocolParameters:e.protocolParameters})}async createUnsignedTxForConnector(e,t){const a=(0,se.se)(e.publicDeriver);if(!a)throw new Error("unable to get UTxO addresses from public deriver");const r=await a.getAllUtxoAddresses(),n=await(0,Ie.WH)(e.publicDeriver);if(null==n)throw new Error("no internal addresses left. Should never happen");return this._createUnsignedTxForConnector(e.cardanoTxRequest,e.publicDeriver.getParent().getDefaultToken(),e.publicDeriver.publicDeriverId,r,n,e.publicDeriver.getParent().getNetworkInfo(),e.absSlotNumber,e.submittedTxs,e.utxos,e.protocolParameters,t)}async _createUnsignedTxForConnector(e,t,a,r,n,s,o,i,l,d,c){var u;const{includeInputs:p,includeOutputs:g,includeTargets:h,mintRequest:f,onlyInputsIntended:w,validityIntervalStart:m,ttl:y,requiredSigners:x}=e,_=e=>{if(null!=e&&!W()(e))throw new Error(`Array is expected, got: ${R()(e)}`);return null==e||0===e.length},v=_(p);if(_(g)&&_(h)){if(v)throw new Error("Invalid tx-build request, must specify inputs, outputs, or targets");if(!1===Boolean(w))throw new Error("No outputs is specified and `onlyInputsIntended` flag is false")}const A=await this._addressedUtxosWithSubmittedTxs(l,a,r,i),b=new(S())(j()(A).call(A,(e=>e.utxo_id))),T=[],I=U()(u=p||[]).call(u,((e,t)=>{const a="string"==typeof t?t:"string"==typeof t.id?t.id:null;if(null==a)throw new Error(`Unrecognised input request format: ${R()(t)}`);return b.has(a)||T.push(a),e[a]=t,e}),{}),D=[];if(T.length>0){if(null==c)throw new Error("Foreign utxos are present, but foreign utxo fetcher is missing!");D.push(...await c(T)),k()(D).call(D,((e,t)=>{if(null==e)throw new Error(`No UTxO found for input id: ${R()(T[t])}`)}))}const M=[],B=[];for(const e of[...D,...A]){const t=I[e.utxo_id];null!=t?M.push([e,t.witness]):B.push(e)}const P={address:n.addr.Hash,addressing:n.addressing},N=[],F=[],O={},L=[];function H(e,t,a){if(e){const r=new Z.Z(e.tag).toString(),n=O[r]=O[r]||{version:"1.0"};(n[t]=n[t]||{})[(0,De.hexToUtf)(a)]=JSON.parse(e.json)}}function V(e){const{script:t,assetName:a}=e,r=be.RustModule.WasmScope((e=>(0,De.bytesToHex)(e.WalletV4.NativeScript.from_bytes((0,De.hexToBytes)(t)).hash().to_bytes())));return{policyId:r,assetId:`${r}.${a}`}}be.RustModule.WasmScope((e=>{for(const a of null!=g?g:[]){const r=e.WalletV4.TransactionOutput.from_bytes((0,De.hexToBytes)(a)),n={address:(0,De.bytesToHex)(r.address().to_bytes()),amount:(0,Ae.$Z)(r.amount(),t)},s=r.data_hash();null!=s&&(n.dataHash=(0,De.bytesToHex)(s.to_bytes())),N.push(n)}}));for(const e of null!=h?h:[]){var G;const a={...e.assets||{}},r=e=>{const r=[{identifier:t.defaultIdentifier,networkId:s.NetworkId,amount:new Z.Z(e)}];for(const e of C()(a)){const t=a[e];null!=t&&r.push({identifier:e,networkId:s.NetworkId,amount:new Z.Z(t)})}return new Ce.a(r,{defaultNetworkId:s.NetworkId,defaultIdentifier:t.defaultIdentifier})},n=e.mintRequest;if(null!=n&&n.length>0){var z;if(0===E()(z=e.address||"").call(z).length)throw new Error("A transaction target must include a valid non-empty address `address`!");for(const e of n){var K;const{script:t,assetName:r,amount:n,metadata:s,storeScriptOnChain:o}=e,{policyId:i,assetId:l}=V(e),d=new Z.Z(null!==(K=a[l])&&void 0!==K?K:"0").plus(new Z.Z(null!=n?n:"1"));if(!d.isPositive())throw new Error("Target mint cannot sum to a non-positive amount! Use root mint-request for burning!");const c=d.toString();F.push({policyScript:t,assetName:r,amount:c}),a[l]=c,H(s,i,r),!0===Boolean(o)&&L.push(t)}}let o=r(null!==(G=e.value)&&void 0!==G?G:"1000000");const i=e.dataHash,l=e.ensureRequiredMinimalValue;if(null==l||!1===l){if(null==e.value)throw new Error(`Value is required for a valid tx output, got: ${R()(e)}`)}else{var Y;const t=(0,Ae.RY)(o,new Z.Z(d.coinsPerUtxoByte));t.gt(null!==(Y=e.value)&&void 0!==Y?Y:"0")&&(o=r(t.toString()))}N.push({address:e.address,amount:o,dataHash:i})}for(const e of f||[]){const{script:t,assetName:a,amount:r,metadata:n}=e,{policyId:s}=V(e);F.push({policyScript:t,assetName:a,amount:null!=r?r:"1"}),H(n,s,a)}const q={};for(const e of C()(O))q[String(e)]=R()(O[e]);const $={metadata:q,nativeScripts:L},J=await(0,le.u2)(N,F,$,P,M,B,o,m,y,x,{linearFeeCoefficient:d.linearFee.coefficient,linearFeeConstant:d.linearFee.constant,coinsPerUtxoByte:d.coinsPerUtxoByte,poolDeposit:d.poolDeposit,keyDeposit:d.keyDeposit,networkId:s.NetworkId},s.NetworkId);return new ye.Y({senderUtxos:J.senderUtxos,unsignedTx:J.txBuilder,changeAddr:J.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:Number((0,Ee.getCardanoHaskellBaseConfig)(s)[0].ChainNetworkId),KeyDeposit:new Z.Z(d.keyDeposit),PoolDeposit:new Z.Z(d.poolDeposit),NetworkId:s.NetworkId}})}async createDelegationTx(e){z.Yd.debug("AdaApi::createDelegationTx called");try{const{wallet:t}=e,a=(0,Ee.getNetworkById)(t.networkId),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:a.NetworkId},n=be.RustModule.WalletV4.Bip32PublicKey.from_hex(t.publicKey),s=(0,Se.c)({addressing:t.stakingAddressing.addressing,startingFrom:{level:t.publicDeriverLevel,key:n}}).to_raw_key(),o=(0,X.createCertificate)(s.hash().to_hex(),e.registrationStatus,e.poolRequest,e.drepCredential),i=t.utxos,d=(0,Ae.ue)(i),c=await t.receiveAddress,u=await(0,le.fi)([],{address:c.addr.Hash,addressing:c.addressing},d,e.absSlotNumber,r,o,[],!1,void 0,e.wallet.networkId),p=(0,X.filterAddressesByStakingKey)(be.RustModule.WalletV4.Credential.from_keyhash(s.hash()),i,!1),g={defaultNetworkId:t.networkId,defaultIdentifier:t.defaultTokenId},h=U()(p).call(p,((e,t)=>{var a;return e.joinAddMutable(new Ce.a(j()(a=t.output.tokens).call(a,(e=>({identifier:e.Token.Identifier,amount:new Z.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),g))}),new Ce.a([],g)),f=function(e,t,a,r){const n=be.RustModule.WasmScope((e=>e.WalletV4.Credential.from_keyhash(a.hash()).to_hex())),s=new Ce.a([],r);for(const a of e.senderUtxos){const e=l()(t).call(t,(e=>e.output.Transaction.Hash===a.tx_hash&&e.output.UtxoTransactionOutput.OutputIndex===a.tx_index));if(null==e)throw new Error("getDifferenceAfterTx utxo not found. Should not happen");const i=e.address;var o;(0,X.addrContainsAccountKey)(i,n,!0)&&s.joinAddMutable(new Ce.a(j()(o=e.output.tokens).call(o,(e=>({identifier:e.Token.Identifier,amount:new Z.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),r))}const i=new Ce.a([],r);{const t=e.txBuilder.build();for(const e of(0,De.iterateLenGet)(t.outputs()))(0,X.addrContainsAccountKey)(e.address().to_hex(),n,!0)&&i.joinAddMutable((0,Ae.$Z)(e.amount(),r))}return i.joinSubtractCopy(s)}(u,i,s,g),w=h.joinAddCopy(f).joinAddCopy(e.valueInAccount);return{signTxRequest:new ye.Y({senderUtxos:u.senderUtxos,unsignedTx:u.txBuilder,changeAddr:u.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:Number((0,Ee.getCardanoHaskellBaseConfig)(a)[0].ChainNetworkId),KeyDeposit:new Z.Z(e.protocolParameters.keyDeposit),PoolDeposit:new Z.Z(e.protocolParameters.poolDeposit),NetworkId:a.NetworkId}}),totalAmountToDelegate:w}}catch(e){if(z.Yd.error("AdaApi::createDelegationTx error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createWithdrawalTx(e){z.Yd.debug("AdaApi::createUnsignedTx called");try{var t,a,r;const n=(0,Ee.getNetworkById)(e.wallet.networkId),s=U()(t=(0,Ee.getCardanoHaskellBaseConfig)(n)).call(t,((e,t)=>H()(e,t)),{}),o={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.wallet.networkId},i=e.wallet.utxos,l=(0,Ae.ue)(i),d=e.wallet.receiveAddress,c=[],u=[];for(const t of e.withdrawals){const e=be.RustModule.WalletV4.RewardAddress.from_address(be.RustModule.WalletV4.Address.from_hex(t.rewardAddress));if(null==e)throw new Error("AdaApi::createUnsignedTx withdrawal not a reward address");const a=e.payment_cred(),r=a.to_keyhash();if(null==r)throw new Error("Unexpected: withdrawal from a script hash");u.push(r),t.shouldDeregister&&c.push(be.RustModule.WalletV4.Certificate.new_stake_deregistration(be.RustModule.WalletV4.StakeDeregistration.new(a)))}const p=await e.getAccountState({network:n,addresses:j()(a=e.withdrawals).call(a,(e=>e.rewardAddress))}),g=U()(r=C()(p)).call(r,((e,t)=>{const a=p[t];if(null==a)return e;if(new Z.Z(a.remainingAmount).eq(0))return e;const r=be.RustModule.WalletV4.RewardAddress.from_address(be.RustModule.WalletV4.Address.from_hex(t));if(null==r)throw new Error("AdaApi::createUnsignedTx withdrawal not a reward address");return e.push({address:r,amount:be.RustModule.WalletV4.BigNum.from_str(a.remainingAmount)}),e}),[]);if(0===g.length&&0===c.length)throw new he.RewardAddressEmptyError;const h=await(0,le.fi)([],{address:d.addr.Hash,addressing:d.addressing},l,e.absSlotNumber,o,c,g,!1,void 0,e.wallet.networkId);if(0===h.changeAddr.length)throw new he.NotEnoughMoneyToSendError;return z.Yd.debug("AdaApi::createWithdrawalTx success: "+(0,z.WO)(h)),new ye.Y({senderUtxos:h.senderUtxos,unsignedTx:h.txBuilder,changeAddr:h.changeAddr,metadata:void 0,networkSettingSnapshot:{ChainNetworkId:O()(s.ChainNetworkId,10),KeyDeposit:new Z.Z(e.protocolParameters.keyDeposit),PoolDeposit:new Z.Z(e.protocolParameters.poolDeposit),NetworkId:e.wallet.networkId}})}catch(e){if(z.Yd.error("AdaApi::createWithdrawalTx error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createSimpleTx(e){z.Yd.debug("AdaApi::createSimpleTx called");try{const t=(0,Ee.getCardanoHaskellBaseConfig)((0,Ee.getNetworkById)(e.publicDeriver.networkId)),a=U()(t).call(t,((e,t)=>H()(e,t)),{}),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.publicDeriver.networkId},n=(0,Ae.ue)(e.publicDeriver.utxos),s=e.publicDeriver.receiveAddress,o=new Z.Z(Me.default.timeToAbsoluteSlot(t,new Date)),i=await(0,le.fi)(A()(e),{address:s.addr.Hash,addressing:s.addressing},n,o,r,[],[],!1,e.metadata,e.publicDeriver.networkId);return new ye.Y({senderUtxos:i.senderUtxos,unsignedTx:i.txBuilder,changeAddr:i.changeAddr,metadata:e.metadata,networkSettingSnapshot:{ChainNetworkId:O()(a.ChainNetworkId,10),KeyDeposit:new Z.Z(e.protocolParameters.keyDeposit),PoolDeposit:new Z.Z(e.protocolParameters.poolDeposit),NetworkId:e.publicDeriver.networkId}})}catch(e){if(z.Yd.error("AdaApi::createSimpleTx error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createVotingRegTx(e){z.Yd.debug("AdaApi::createVotingRegTx called");try{var t;const a=U()(t=(0,Ee.getCardanoHaskellBaseConfig)((0,Ee.getNetworkById)(e.wallet.networkId))).call(t,((e,t)=>H()(e,t)),{}),r={keyDeposit:e.protocolParameters.keyDeposit,linearFeeCoefficient:e.protocolParameters.linearFee.coefficient,linearFeeConstant:e.protocolParameters.linearFee.constant,coinsPerUtxoByte:e.protocolParameters.coinsPerUtxoByte,poolDeposit:e.protocolParameters.poolDeposit,networkId:e.wallet.networkId},n=await e.wallet.utxos,s=(0,Ae.ue)(n),o=e.wallet.receiveAddress;if(null==o)throw new Error("createVotingRegTx no internal addresses left. Should never happen");let i;if(e.trezorTWallet||e.ledgerNanoWallet){const t=e.trezorTWallet||e.ledgerNanoWallet;i=(0,ke.L4)(t.votingPublicKey,t.stakingKey,t.paymentAddress,t.nonce,(e=>_()("0").call("0",128)))}else i=e.normalWallet.metadata;const l=await(0,le.fi)([],{address:o.addr.Hash,addressing:o.addressing},s,e.absSlotNumber,r,[],[],!1,i,e.wallet.networkId);return new ye.Y({senderUtxos:l.senderUtxos,unsignedTx:l.txBuilder,changeAddr:l.changeAddr,metadata:i,networkSettingSnapshot:{ChainNetworkId:O()(a.ChainNetworkId,10),KeyDeposit:new Z.Z(e.protocolParameters.keyDeposit),PoolDeposit:new Z.Z(e.protocolParameters.poolDeposit),NetworkId:e.wallet.networkId},trezorTCatalystRegistrationTxSignData:e.trezorTWallet?e.trezorTWallet:void 0,ledgerNanoCatalystRegistrationTxSignData:e.ledgerNanoWallet?e.ledgerNanoWallet:void 0})}catch(e){if(z.Yd.error("AdaApi::createVotingRegTx error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async saveLastReceiveAddressIndex(e){z.Yd.debug("AdaApi::saveLastReceiveAddressIndex called");try{const t=(0,se.Bq)(e.publicDeriver);if(null==t)return;await t.setCutoff({newIndex:e.index})}catch(e){if(z.Yd.error("AdaApi::saveLastReceiveAddressIndex error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}static isValidMnemonic(e){return(0,ue.n)(e.mnemonic,e.numberOfWords)}generateWalletRecoveryPhrase(){z.Yd.debug("AdaApi::generateWalletRecoveryPhrase called");try{const e=new(y())((e=>e((0,de.sn)())));return z.Yd.debug("AdaApi::generateWalletRecoveryPhrase success"),e}catch(e){if(z.Yd.error("AdaApi::generateWalletRecoveryPhrase error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async cloneWallet(e,t,a){const r=(0,se.O8)(t);if(!r)throw new Error("unable to get public key");const n=await r.getPublicKey(),s=be.RustModule.WalletV4.Bip32PublicKey.from_hex(n.Hash),o=t.getParent(),i=(await o.getFullConceptualWalletInfo()).Name;let l;if(o.getWalletType()===oe.j.HARDWARE_WALLET){const r=(0,se.Sy)(t);if(!r)throw new Error("unable to get staking key");const n=await r.getStakingKey(),d=o.getHwWalletMeta();if(!d)throw new Error("unexpectedly missing hardware metadata");l=await(0,$.B8)({db:e,accountPublicKey:s,accountIndex:n.addressing.path[2],walletName:i,accountName:"",hwWalletMetaInsert:{Vendor:d.Vendor,Model:d.Model,DeviceId:d.DeviceId},network:a})}else{const r=(0,se.y9)(t);if(!r)throw new Error("unable to get signing key");const n=await r.getSigningKey(),o=n.row.Hash,d=n.path[3].Index;if(null===d)throw new Error("missing account index");l=await(0,$.fd)({db:e,encryptedRoot:o,accountPublicKey:s,accountIndex:d,walletName:i,accountName:"",network:a})}const d=await ee.H.createCip1852Wallet(e,l.cip1852WrapperRow);if(1!==l.publicDeriver.length)throw new Error("AdaApi::cloneWallet should only do 1 HW derivation at a time");const c=l.publicDeriver[0].publicDeriverResult;return await ne.n.createPublicDeriver(c,d)}async restoreWallet(e){z.Yd.debug("AdaApi::restoreWallet called");const{recoveryPhrase:t,walletName:a,walletPassword:r}=e;if(e.accountIndex<q.yK)throw new Error("restoreWallet needs hardened index");try{const n=(0,de.BT)(t),s=(0,Be.x)(r,n.as_bytes()),o=n.derive(q.r7.CIP1852).derive(q.M8.CARDANO).derive(e.accountIndex).to_public(),i=[],l=await(0,$.fd)({db:e.db,encryptedRoot:s,accountPublicKey:o,accountIndex:e.accountIndex,walletName:a,accountName:"",network:e.network}),d=await ee.H.createCip1852Wallet(e.db,l.cip1852WrapperRow);for(const e of l.publicDeriver)i.push(await ne.n.createPublicDeriver(e.publicDeriverResult,d));return z.Yd.debug("AdaApi::restoreWallet success"),{publicDerivers:i}}catch(e){var n;if(z.Yd.error("AdaApi::restoreWallet error: "+(0,z.n)(e)),null!=e.message&&w()(n=e.message).call(n,"Wallet with that mnemonics already exists"))throw new he.WalletAlreadyRestoredError;if(e instanceof fe.default)throw e;throw new he.GenericApiError}}async restoreWalletForTransfer(e){var t;z.Yd.debug("AdaApi::restoreWalletForTransfer called");const{checkAddressesInUse:a}=e,r=U()(t=(0,Ee.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{});try{const t=new(h()),n=new(S()),s=e=>{if(!n.has(e.address.data)){let a=t.get(e.keyDerivationId);null==a&&(a=[],t.set(e.keyDerivationId,a)),a.push(e.address.data),n.add(e.address.data)}return y().resolve()},o=be.RustModule.WalletV2.Bip44AccountPublic.new((0,ce.v4PublicToV2)(e.accountPubKey),be.RustModule.WalletV2.DerivationScheme.v2()),i=await(0,we.Mo)({network:e.network,generateInternalAddresses:(0,me.H)(o.bip44_chain(!1),r.ByronNetworkId),generateExternalAddresses:(0,me.H)(o.bip44_chain(!0),r.ByronNetworkId),lastUsedInternal:-1,lastUsedExternal:-1,checkAddressesInUse:a,addByHash:s,type:ae.dq.CARDANO_LEGACY}),l=(0,te.I_)(i),d=[];for(let a=0;a<l.length;a++){const r=l[a];await r.insert({db:null,tx:null,lockedTables:[],keyDerivationId:a});const n=t.get(a);if(null==n)throw new Error("restoreWalletForTransfer should never happen");const s=j()(n).call(n,(t=>{var a;return{address:t,addressing:{startLevel:Re.Bip44DerivationLevels.ACCOUNT.level,path:p()(a=[e.accountIndex]).call(a,r.path)}}}));d.push(...s)}return z.Yd.debug("restoreWalletForTransfer success"),{addresses:d}}catch(e){var n;if(z.Yd.error("restoreWalletForTransfer error: "+(0,z.n)(e)),null!=e.message&&w()(n=e.message).call(n,"Wallet with that mnemonics already exists"))throw new he.WalletAlreadyRestoredError;if(e instanceof fe.default)throw e;throw new he.GenericApiError}}async transferToCip1852(e){try{var t,a;const r=await this.restoreWalletForTransfer({accountPubKey:e.bip44AccountPubKey,accountIndex:e.accountIndex,checkAddressesInUse:e.checkAddressesInUse,network:e.network}),n=e.cip1852AccountPubKey.derive(q.OC.INTERNAL).derive(0).to_raw_key().hash(),s=e.cip1852AccountPubKey.derive(q.OC.CHIMERIC_ACCOUNT).derive(0).to_raw_key().hash(),o=U()(t=(0,Ee.getCardanoHaskellBaseConfig)(e.network)).call(t,((e,t)=>H()(e,t)),{}),i=O()(o.ChainNetworkId,10),l=be.RustModule.WalletV4.BaseAddress.new(i,be.RustModule.WalletV4.Credential.from_keyhash(n),be.RustModule.WalletV4.Credential.from_keyhash(s)),d=j()(a=[...r.addresses]).call(a,(e=>({address:e.address,addressing:{path:[q.r7.BIP44,q.M8.CARDANO,...e.addressing.path],startLevel:Re.Bip44DerivationLevels.PURPOSE.level}}))),c=await(0,Te.i)({network:e.network,addresses:d,getUTXOsForAddresses:e.getUTXOsForAddresses});return{publicKey:{key:e.bip44AccountPubKey,addressing:{startLevel:1,path:[q.r7.CIP1852,q.M8.CARDANO,e.accountIndex]}},signRequest:await this.createUnsignedTxForUtxos({absSlotNumber:e.absSlotNumber,receivers:[{address:l.to_address().to_hex(),addressing:{path:[q.r7.CIP1852,q.M8.CARDANO,e.accountIndex,q.OC.INTERNAL,0],startLevel:1}}],network:e.network,defaultToken:{defaultIdentifier:e.defaultToken.Identifier,defaultNetworkId:e.defaultToken.NetworkId},tokens:[{shouldSendAll:!0,token:e.defaultToken}],utxos:c,metadata:void 0,protocolParameters:e.protocolParameters})}}catch(e){if(z.Yd.error("transferToCip1852 error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async createHardwareWallet(e){try{if(z.Yd.debug("AdaApi::createHardwareWallet called"),e.addressing.startLevel!==Re.Bip44DerivationLevels.PURPOSE.level)throw new Error("AdaApi::createHardwareWallet bad addressing start level");if(e.addressing.path[0]!==q.r7.CIP1852)throw new Error("createHardwareWallet unknown restoration mode");const t=await(0,$.B8)({db:e.db,accountPublicKey:be.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),accountIndex:e.addressing.path[Re.Bip44DerivationLevels.ACCOUNT.level-e.addressing.startLevel],walletName:e.walletName,accountName:"",hwWalletMetaInsert:e.hwFeatures,network:e.network}),a=await ee.H.createCip1852Wallet(e.db,t.cip1852WrapperRow);if(1!==t.publicDeriver.length)throw new Error("AdaApi::createHardwareWallet should only do 1 HW derivation at a time");const r=t.publicDeriver[0].publicDeriverResult,n=await ne.n.createPublicDeriver(r,a);return z.Yd.debug("AdaApi::restoreWallet success"),{publicDeriver:n}}catch(e){if(z.Yd.error("AdaApi::createHardwareWallet error: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}async getTransactionRowsToExport(e){try{const t=await(0,J._v)({publicDeriver:e.publicDeriver});return z.Yd.debug("AdaApi::getTransactionRowsToExport: success"),(0,Ae.Nf)(t.txs,e.getDefaultToken(e.publicDeriver.getParent().getNetworkInfo().NetworkId))}catch(e){if(z.Yd.error("AdaApi::getTransactionRowsToExport: "+(0,z.n)(e)),e instanceof fe.default)throw e;throw new he.GenericApiError}}utxosWithSubmittedTxs(e,t,a){const r=N()(a).call(a,(e=>e.publicDeriverId===t)),n=new(S())(c()(r).call(r,(({usedUtxos:e})=>{var t;return j()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))}))),s=N()(e).call(e,(e=>!n.has(e.utxo_id)));for(const{transaction:e}of r)for(const[t,{address:a,value:r}]of A()(i=e.addresses.to).call(i)){var i,d,u,p,g;if(l()(s).call(s,(a=>a.utxo_id===`${e.txid}${t}`)))continue;const n=(null===(d=l()(u=o()(r)).call(u,(({identifier:e})=>e===r.defaults.defaultIdentifier)))||void 0===d?void 0:d.amount.toString())||"0",c=j()(p=N()(g=o()(r)).call(g,(({identifier:e})=>e!==r.defaults.defaultIdentifier))).call(p,(e=>{const[t,a=""]=e.identifier.split(".");return{policyId:t,name:a,amount:e.amount.toString(),assetId:e.identifier}}));s.push({utxo_id:`${e.txid}${t}`,tx_hash:e.txid,tx_index:t,receiver:a,amount:n,assets:c})}return s}async addressedUtxosWithSubmittedTxs(e,t,a){const r=(0,se.se)(t);if(!r)throw new Error("unable to get UTxO addresses from public deriver");const n=await r.getAllUtxoAddresses();return this._addressedUtxosWithSubmittedTxs(e,t.publicDeriverId,n,a)}async _addressedUtxosWithSubmittedTxs(e,t,a,r){const n=N()(r).call(r,(e=>e.publicDeriverId===t)),s=new(S())(c()(n).call(n,(({usedUtxos:e})=>{var t;return j()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))}))),i=N()(e).call(e,(e=>!s.has(e.utxo_id)));for(const{transaction:e}of n)for(const[t,{address:r,value:n}]of A()(d=e.addresses.to).call(d)){var d,u,p,g,h;if(l()(i).call(i,(a=>a.utxo_id===`${e.txid}${t}`)))continue;const s=(null===(u=l()(p=o()(n)).call(p,(({identifier:e})=>e===n.defaults.defaultIdentifier)))||void 0===u?void 0:u.amount.toString())||"0",c=j()(g=N()(h=o()(n)).call(h,(({identifier:e})=>e!==n.defaults.defaultIdentifier))).call(g,(e=>{const[t,a=""]=e.identifier.split(".");return{policyId:t,name:a,amount:e.amount.toString(),assetId:e.identifier}})),f=()=>{for(const{addrs:e,addressing:t}of a)for(const{Hash:a}of e)if(a===r)return t},w=f();w&&i.push({utxo_id:`${e.txid}${t}`,tx_hash:e.txid,tx_index:t,receiver:r,amount:s,assets:c,addressing:w})}return i}async getAllUsedAddresses(e,t){const a=await(0,ve.Hk)(e);return this._getAllUsedAddresses({allAddresses:a,submittedTransactions:t,publicDeriverId:e.getPublicDeriverId()})}async _getAllUsedAddresses(e){var t,a,r,n,s,o;const i=j()(t=N()(a=e.allAddresses.utxoAddresses).call(a,(e=>e.address.IsUsed))).call(t,(e=>e.address.Hash)),l=j()(r=N()(n=e.allAddresses.utxoAddresses).call(n,(e=>!e.address.IsUsed))).call(r,(e=>e.address.Hash)),d=new(S())(c()(s=N()(o=e.submittedTransactions).call(o,(t=>t.publicDeriverId===e.publicDeriverId))).call(s,(({transaction:e})=>{var t;return j()(t=e.addresses.to).call(t,(({address:e})=>e))})));return[...i,...N()(l).call(l,(e=>d.has(e)))]}async createReorgTx(e,t,a,r,n,s,o){const i=e.getParent().getNetworkInfo(),l=(0,se.se)(e);if(null==l)throw new Error("missing utxo functionality");if(null==(0,se.sX)(l))throw new Error("missing chains functionality");const d=await(0,Ie.WH)(e);if(null==d)throw new Error("no receive addresses. Should never happen");const c=await this.getAllUsedAddresses(e,n),u=o||c[0];if(!u)throw new Error("unexpected: no target address or used addresses available");return this._createReorgTx(i,e.getParent().getDefaultToken(),e.getPublicDeriverId(),await l.getAllUtxoAddresses(),d,t,a,r,n,u,s)}async _createReorgTx(e,t,a,r,n,s,o,i,l,d,c){var u;const p=(0,Ee.getCardanoHaskellBaseConfig)(e),g=new Z.Z(Me.default.timeToAbsoluteSlot(p,new Date)),h=new(S())(s),f=[{address:d,isForeign:!1,value:Z.Z.max(o,"1000000").toString()}];return{unsignedTx:await this._createUnsignedTxForConnector({includeTargets:f},t,a,r,n,e,g,l,N()(u=await this._addressedUtxosWithSubmittedTxs(i,a,r,l)).call(u,(e=>!h.has(e.utxo_id))),c,null),collateralOutputAddressSet:new(S())([d])}}createForeignUtxoFetcher(e,t){return async a=>{const r=j()(a).call(a,(e=>{var t;if((null!==(t=e.length)&&void 0!==t?t:0)<65)throw new Error(`Invalid utxo ID "${e}", expected \`{hash}{index}\` with no separator`);try{return{txHash:e.substring(0,64),txIndex:n()(e.substring(64),10)}}catch(t){throw new Error(`Failed to parse utxo ID "${e}": ${String(t)}`)}})),s=await e.getUtxoData({network:t,utxos:r});return j()(s).call(s,((e,t)=>{if(null==e)return null;const{txHash:n,txIndex:s}=r[t];return{utxo_id:a[t],tx_hash:n,tx_index:s,receiver:e.output.address,amount:e.output.amount,assets:e.output.assets}}))}}}function Pe(e,t,a){const r=be.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),n={addressing:{path:[q.r7.CIP1852,Re.CoinType.CARDANO,q.yK,t,a],startLevel:Re.Bip44DerivationLevels.PURPOSE.level}};return[(0,Se.c)({...n,startingFrom:{level:e.publicDeriverLevel,key:r}}).to_raw_key(),n]}async function Ne(e){const t=(0,se.O8)(e);if(null==t)throw new Error("Unable to get public key from the wallet");const a=(0,se.JM)(e);if(null==a)throw new Error("Unable to get derivation levels from the wallet");return Pe({publicKey:(await t.getPublicKey()).Hash,publicDeriverLevel:a.getParent().getPublicDeriverLevel()},q.OC.GOVERNANCE_DREP_KEYS,q.x_)}async function Fe(e,t,a,r){const n=(0,se.y9)(e);if(!n)throw new Error("unable to get signing key");const s=await n.normalizeKey({...await n.getSigningKey(),password:t}),o=(0,se.JM)(e);if(!o)throw new Error("unable to get levels");const i=await async function(e,t){const a=e=>{for(const{addrs:a,addressing:r}of e)for(const{Hash:e}of a)if(e===t)return{addressing:r}},r=(0,se.Oq)(e);if(!r)throw new Error("unable to get accounting addresses from public deriver");const n=a(await r.getAllAccountingAddresses());if(n)return n;const[s,o]=await Ne(e);if(s.hash().to_hex()===t)return o;const i=(0,se.se)(e);if(!i)throw new Error("unable to get UTxO addresses from public deriver");return a(await i.getAllUtxoAddresses())}(e,a);if(!i)throw new Error("key derivation path does not exist");const l=(0,Se.r)({addressing:i.addressing,startingFrom:{key:be.RustModule.WalletV4.Bip32PrivateKey.from_hex(s.prvKeyHex),level:o.getParent().getPublicDeriverLevel()}}).to_raw_key(),d=await(0,ce.cip8Sign)((0,De.hexToBytes)(a),l,(0,De.hexToBytes)(r)),c=(0,ce.makeCip8Key)(l.to_public().as_bytes());return{signature:(0,De.bytesToHex)(d.to_bytes()),key:(0,De.bytesToHex)(c.to_bytes())}}async function Oe(e,t,a,r,n=!1){const s=await(0,ce.buildCoseSign1FromSignature)((0,De.hexToBytes)(e),(0,De.hexToBytes)(t),(0,De.hexToBytes)(a),n),o=(0,ce.makeCip8Key)((0,De.hexToBytes)(r));return{signature:(0,De.bytesToHex)(s.to_bytes()),key:(0,De.bytesToHex)(o.to_bytes())}}function Le(e,t){if(t===e.stakingAddress)return e.stakingAddressing.addressing.path;for(const{address:a,path:r}of e.allAddresses.utxoAddresses)if(a.Hash===t)return r;return null}},15687:(e,t,a)=>{"use strict";a.d(t,{UJ:()=>p,L4:()=>h});var r=a(59340),n=a.n(r),s=a(29828),o=a.n(s),i=a(56474),l=a.n(i),d=a(86335),c=a(17462),u=a.n(c);a(90649);const p=l()({DATA:61284,SIG:61285});function g(e){return o()(e).call(e,"0x")?e:"0x"+e}function h(e,t,a,r,s){const o=d.RustModule.WalletV4.encode_json_str_to_metadatum(n()({1:[[g(e),1]],2:g(t),3:g(a),4:r,5:0}),d.RustModule.WalletV4.MetadataJsonSchema.BasicConversions),i=d.RustModule.WalletV4.GeneralTransactionMetadata.new();i.insert(d.RustModule.WalletV4.BigNum.from_str(p.DATA.toString()),o);const l=u()(32).update(i.to_bytes()).digest("binary");i.insert(d.RustModule.WalletV4.BigNum.from_str(p.SIG.toString()),d.RustModule.WalletV4.encode_json_str_to_metadatum(n()({1:g(s(l))}),d.RustModule.WalletV4.MetadataJsonSchema.BasicConversions));const c=d.RustModule.WalletV4.MetadataList.new();return c.add(d.RustModule.WalletV4.TransactionMetadatum.from_bytes(i.to_bytes())),c.add(d.RustModule.WalletV4.TransactionMetadatum.new_list(d.RustModule.WalletV4.MetadataList.new())),d.RustModule.WalletV4.AuxiliaryData.from_bytes(c.to_bytes())}},76900:(e,t,a)=>{"use strict";a.d(t,{sn:()=>i,BT:()=>l}),a(77766),a(3649);var r=a(2153),n=(a(55835),a(86335)),s=a(90649),o=a(48764).Buffer;const i=()=>(0,r.OF)(160).split(" ");function l(e){const t=(0,r.oy)(e),a=o.from("");return n.RustModule.WalletV4.Bip32PrivateKey.from_bip39_entropy((0,s.hexToBytes)(t),a)}},86335:(e,t,a)=>{"use strict";a.d(t,{RustModule:()=>v});var r=a(93476),n=a.n(r),s=a(87672),o=a.n(s),i=a(10062),l=a.n(i),d=a(78914),c=a.n(d),u=a(54103),p=a.n(u),g=a(62734),h=a.n(g),f=a(77149),w=a.n(f),m=a(56474);function y(e){return null!=e&&"number"==typeof e.__wbg_ptr&&"function"==typeof e.free}const x=a.n(m)()([Uint8Array]),_="____is_wasm_proxy";const v=new class{constructor(){o()(this,"_wasmv2",void 0),o()(this,"_wasmv4",void 0),o()(this,"_messageSigning",void 0),o()(this,"_crossCsl",void 0)}async load(){null==this._wasmv2&&null==this._wasmv4&&null==this._messageSigning&&null==this._crossCsl&&(this._wasmv2=await a.e(4388).then(a.bind(a,82123)),this._wasmv4=await Promise.all([a.e(4351),a.e(8066)]).then(a.bind(a,4351)),this._messageSigning=await a.e(5573).then(a.bind(a,85573)),this._crossCsl=await Promise.all([a.e(4351),a.e(5560),a.e(5262)]).then(a.bind(a,75560)))}__WasmScopeInternal(e){const t=function(){const e=[];return{RustModule:function t(a){return null!=(r=a)&&function(e){return"object"==typeof e||"function"==typeof e}(r)&&!function(e){return w()(x).call(x,(t=>e instanceof t))}(r)&&function(e){return!0!==e[_]}(r)?new Proxy(a,{get(a,r,n){if(r===_)return!0;const s=h()(a,r,n);return"prototype"===r?s:"function"==typeof s&&null==s.prototype?function(...r){const n=p()(s).call(s,a)(...r);return y(n)&&e.push(n),t(n)}:t(s)}}):a;var r}(v),free:()=>{c()(e).call(e,(e=>{0!==e.__wbg_ptr&&e.free()}))},size:()=>e.length,isFree:()=>l()(e).call(e,(e=>0===e.__wbg_ptr))}}();function a(e){if(t.free(),y(e))throw new Error("A wasm object cannot be returned from wasm scope, all pointers are destroyed.");return{result:e,scopeSize:t.size(),scopeIsFree:t.isFree()}}function r(e){throw t.free(),e}let s;try{s=e(t.RustModule)}catch(e){throw r(e),e}return s instanceof n()?s.then(a,r):a(s)}WasmScope(e){const t=this.__WasmScopeInternal(e);return t instanceof n()?t.then((e=>e.result)):t.result}ScopeMonad(e){var t;const a=p()(t=this.WasmScope).call(t,this);return function e(t){return{wasmMap:a=>e((e=>a(t(e),e))),unwrap:e=>a((a=>e(t(a),a)))}}(e)}get WalletV2(){return this._wasmv2}get WalletV4(){return this._wasmv4}get CrossCsl(){return this._crossCsl}WalletV4TxBuilderFromConfig(e){return this.WalletV4TxBuilder({linearFee:v.WalletV4.LinearFee.new(v.WalletV4.BigNum.from_str(e.LinearFee.coefficient),v.WalletV4.BigNum.from_str(e.LinearFee.constant)),coinsPerUtxoByte:v.WalletV4.BigNum.from_str(e.CoinsPerUtxoByte),poolDeposit:v.WalletV4.BigNum.from_str(e.PoolDeposit),keyDeposit:v.WalletV4.BigNum.from_str(e.KeyDeposit)})}WalletV4TxBuilder(e){const{linearFee:t,coinsPerUtxoByte:a,poolDeposit:r,keyDeposit:n,maxValueBytes:s,maxTxBytes:o}=e,i=this.WalletV4;return i.TransactionBuilder.new(i.TransactionBuilderConfigBuilder.new().fee_algo(t).pool_deposit(r).key_deposit(n).coins_per_utxo_byte(a).max_value_size(null!=s?s:5e3).max_tx_size(null!=o?o:16384).ex_unit_prices(i.ExUnitPrices.new(i.UnitInterval.new(i.BigNum.from_str("577"),i.BigNum.from_str("10000")),i.UnitInterval.new(i.BigNum.from_str("721"),i.BigNum.from_str("10000000")))).prefer_pure_change(!0).build())}get MessageSigning(){return this._messageSigning}}},75723:(e,t,a)=>{"use strict";a.d(t,{v4PublicToV2:()=>d,addressBech32ToHex:()=>c,transactionHexToWitnessSet:()=>u,transactionBodyHexToTransaction:()=>p,transactionHexToBodyHex:()=>g,transactionHexToHash:()=>h,transactionHexAddSignaturesFromWitnessSetHex:()=>f,pubKeyHashToRewardAddress:()=>w,cip8Sign:()=>m,buildCoseSign1FromSignature:()=>y,makeCip8Key:()=>x,getStakingKeyHashesInTransactionBody:()=>A});var r=a(69301),n=a.n(r),s=a(36384),o=a.n(s),i=(a(29828),a(86335)),l=a(90649);function d(e){return i.RustModule.WalletV2.PublicKey.from_hex((0,l.bytesToHex)(e.as_bytes()))}function c(e){return i.RustModule.WasmScope((t=>t.WalletV4.Address.from_bech32(e).to_hex()))}function u(e){return i.RustModule.WasmScope((t=>(0,l.bytesToHex)(t.WalletV4.FixedTransaction.from_hex(e).raw_witness_set())))}function p(e){return i.RustModule.WasmScope((t=>t.WalletV4.FixedTransaction.new((0,l.hexToBytes)(e),t.WalletV4.TransactionWitnessSet.new().to_bytes(),!0).to_hex()))}function g(e){return i.RustModule.WasmScope((t=>(0,l.bytesToHex)(t.WalletV4.FixedTransaction.from_hex(e).raw_body())))}function h(e){return i.RustModule.WasmScope((t=>t.WalletV4.FixedTransaction.from_hex(e).transaction_hash().to_hex()))}function f(e,t){return i.RustModule.WasmScope((a=>{const r=a.WalletV4.FixedTransaction.from_hex(e),n=a.WalletV4.TransactionWitnessSet.from_hex(t);for(const e of(0,l.iterateLenGet)(n.vkeys()))r.add_vkey_witness(e);for(const e of(0,l.iterateLenGet)(n.bootstraps()))r.add_bootstrap_witness(e);return r.to_hex()}))}function w(e,t){return i.RustModule.WasmScope((a=>a.WalletV4.RewardAddress.new(t,a.WalletV4.Credential.from_keyhash(a.WalletV4.Ed25519KeyHash.from_hex(e))).to_address().to_hex()))}a(95667);const m=async(e,t,a)=>{const r=i.RustModule.MessageSigning.HeaderMap.new();r.set_algorithm_id(i.RustModule.MessageSigning.Label.from_algorithm_id(i.RustModule.MessageSigning.AlgorithmId.EdDSA)),r.set_header(i.RustModule.MessageSigning.Label.new_text("address"),i.RustModule.MessageSigning.CBORValue.new_bytes(e));const n=i.RustModule.MessageSigning.ProtectedHeaderMap.new(r),s=i.RustModule.MessageSigning.HeaderMap.new(),o=i.RustModule.MessageSigning.Headers.new(n,s),l=i.RustModule.MessageSigning.COSESign1Builder.new(o,a,!1),d=l.make_data_to_sign().to_bytes(),c=t.sign(d).to_bytes();return l.build(c)},y=async(e,t,a,r=!1)=>{const n=i.RustModule.MessageSigning.HeaderMap.new();n.set_algorithm_id(i.RustModule.MessageSigning.Label.from_algorithm_id(i.RustModule.MessageSigning.AlgorithmId.EdDSA)),n.set_header(i.RustModule.MessageSigning.Label.new_text("address"),i.RustModule.MessageSigning.CBORValue.new_bytes(e));const s=i.RustModule.MessageSigning.ProtectedHeaderMap.new(n),o=i.RustModule.MessageSigning.HeaderMap.new();r&&o.set_header(i.RustModule.MessageSigning.Label.new_text("hashed"),i.RustModule.MessageSigning.CBORValue.new_special(i.RustModule.MessageSigning.CBORSpecial.new_bool(!0)));const l=i.RustModule.MessageSigning.Headers.new(s,o),d=i.RustModule.MessageSigning.COSESign1Builder.new(l,a,!1);return r&&d.hash_payload(),d.build(t)},x=e=>{const t=i.RustModule.MessageSigning.COSEKey.new(i.RustModule.MessageSigning.Label.from_key_type(i.RustModule.MessageSigning.KeyType.OKP));return t.set_algorithm_id(i.RustModule.MessageSigning.Label.from_algorithm_id(i.RustModule.MessageSigning.AlgorithmId.EdDSA)),t.set_header(i.RustModule.MessageSigning.Label.new_int(i.RustModule.MessageSigning.Int.new_negative(i.RustModule.MessageSigning.BigNum.from_str("1"))),i.RustModule.MessageSigning.CBORValue.new_int(i.RustModule.MessageSigning.Int.new_i32(6))),t.set_header(i.RustModule.MessageSigning.Label.new_int(i.RustModule.MessageSigning.Int.new_negative(i.RustModule.MessageSigning.BigNum.from_str("2"))),i.RustModule.MessageSigning.CBORValue.new_bytes(e)),t};function _(e){var t,a;return{keyHash:null===(t=e.to_keyhash())||void 0===t?void 0:t.to_hex(),scriptHash:null===(a=e.to_scripthash())||void 0===a?void 0:a.to_hex()}}function v(e){switch(e.kind()){case i.RustModule.WalletV4.CertificateKind.StakeRegistration:return _((0,l.forceNonNull)(e.as_stake_registration()).stake_credential());case i.RustModule.WalletV4.CertificateKind.StakeDeregistration:return _((0,l.forceNonNull)(e.as_stake_deregistration()).stake_credential());case i.RustModule.WalletV4.CertificateKind.StakeDelegation:return _((0,l.forceNonNull)(e.as_stake_delegation()).stake_credential());case i.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation:return _((0,l.forceNonNull)(e.as_stake_and_vote_delegation()).stake_credential());case i.RustModule.WalletV4.CertificateKind.StakeRegistrationAndDelegation:return _((0,l.forceNonNull)(e.as_stake_registration_and_delegation()).stake_credential());case i.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation:return _((0,l.forceNonNull)(e.as_stake_vote_registration_and_delegation()).stake_credential());case i.RustModule.WalletV4.CertificateKind.VoteDelegation:return _((0,l.forceNonNull)(e.as_vote_delegation()).stake_credential());case i.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation:return _((0,l.forceNonNull)(e.as_vote_registration_and_delegation()).stake_credential());default:return null}}function A(e){return i.RustModule.WasmScope((t=>{const a=t.WalletV4.TransactionBody.from_hex(e),r=function(e){var t;const a=new(o()),r=null===(t=e.withdrawals)||void 0===t?void 0:t.call(e);if(null!=r)for(const e of(0,l.iterateLenGet)(n()(r).call(r))){var s;(0,l.maybe)(null===(s=e.payment_cred().to_keyhash())||void 0===s?void 0:s.to_hex(),(e=>a.add(e)))}return a}(a),s=function(e){var t;const a=new(o()),r=null===(t=e.certs)||void 0===t?void 0:t.call(e);if(null!=r)for(const e of(0,l.iterateLenGet)(r)){var n;(0,l.maybe)(null===(n=v(e))||void 0===n?void 0:n.keyHash,(e=>a.add(e)))}return a}(a);return new(o())([...r,...s])}))}},15476:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});var r=a(2153);const n=(e,t)=>e.split(" ").length===t&&(0,r._I)(e)},24283:(e,t,a)=>{"use strict";a.d(t,{addrContainsAccountKey:()=>o,filterAddressesByStakingKey:()=>i,createCertificate:()=>c}),a(2991),a(32366),a(905);var r=a(86335),n=a(95667),s=(a(55343),a(90649));function o(e,t,a){const s=(0,n.normalizeToAddress)(e);if(null==s)throw new Error(`addrContainsAccountKey invalid address ${e}`);const o="string"==typeof t?t:t.to_hex(),i=r.RustModule.WalletV4.BaseAddress.from_address(s);if(null!=i){const e=i.stake_cred().to_hex()===o;if(i.free(),e)return!0}const l=r.RustModule.WalletV4.PointerAddress.from_address(s);return null!=l&&l.free(),s.free(),a}function i(e,t,a){const r=[];for(const n of t)o(n.address,e,a)&&r.push(n);return r}const l="ALWAYS_ABSTAIN",d="ALWAYS_NO_CONFIDENCE";function c(e,t,a,n){const o=r.RustModule.WalletV4.Credential.from_keyhash(r.RustModule.WalletV4.Ed25519KeyHash.from_hex(e));if(null==a&&null==n)return t?[r.RustModule.WalletV4.Certificate.new_stake_deregistration(r.RustModule.WalletV4.StakeDeregistration.new(o))]:[];const i=[];if(t||i.push(r.RustModule.WalletV4.Certificate.new_stake_registration(r.RustModule.WalletV4.StakeRegistration.new(o))),null!=a){const e=r.RustModule.WalletV4.Ed25519KeyHash.from_hex(a);i.push(r.RustModule.WalletV4.Certificate.new_stake_delegation(r.RustModule.WalletV4.StakeDelegation.new(o,e)))}return null!=n&&i.push(r.RustModule.WalletV4.Certificate.new_vote_delegation(r.RustModule.WalletV4.VoteDelegation.new(o,function(e){try{var t,a;const n=r.RustModule.WalletV4.DRep;if(e===l)return n.new_always_abstain();if(e===d)return n.new_always_no_confidence();const o=r.RustModule.WalletV4.Credential.from_hex(e);return null!==(t=null!==(a=(0,s.maybe)(o.to_keyhash(),(e=>n.new_key_hash(e))))&&void 0!==a?a:(0,s.maybe)(o.to_scripthash(),(e=>n.new_script_hash(e))))&&void 0!==t?t:(0,s.fail)("weird credential cannot be converted into a drep: "+o.to_hex())}catch(t){throw console.log("Fail to parse a drep credential: "+e,t),t}}(n)))),i}},54901:(e,t,a)=>{"use strict";a.d(t,{bp:()=>d,BB:()=>c});var r=a(59340),n=a.n(r),s=a(78914),o=a.n(s),i=a(86335),l=a(69875);function d(e){const t=i.RustModule.WalletV4.GeneralTransactionMetadata.new();o()(e).call(e,(e=>{const a=i.RustModule.WalletV4.encode_json_str_to_metadatum(n()(e.data),i.RustModule.WalletV4.MetadataJsonSchema.BasicConversions);t.insert(i.RustModule.WalletV4.BigNum.from_str(e.label),a)}));const a=i.RustModule.WalletV4.AuxiliaryData.new();return a.set_metadata(t),a}function c(e){return(0,l.isHex)(e)?i.RustModule.WasmScope((t=>{const a=t.WalletV4.TransactionMetadatum.from_hex(e);return t.WalletV4.decode_metadatum_to_json_str(a,t.WalletV4.MetadataJsonSchema.BasicConversions)})):n()(e)}},51965:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(51938),n=a.n(r),s=a(90649),o=a(84174);function i(e){const t=[];for(let n=0;n<e.length-2;n++){var a,r;t.push([null!==(a=e[n].StartAt)&&void 0!==a?a:(0,s.fail)("createEraBoundaries missing start"),null!==(r=e[n+1].StartAt)&&void 0!==r?r:(0,s.fail)("createEraBoundaries missing end"),e[n+1]])}return t}class l{static toAbsoluteSlotNumber(e,t){var a;let r=null!==(a=e[0].SlotsPerEpoch)&&void 0!==a?a:(0,s.fail)("toAbsoluteSlotNumber missing slots per epoch"),n=0,o=t.epoch;for(const[a,s,d]of i(e)){var l;if(s>t.epoch)break;const e=s-a;n+=r*e,o-=e,r=null!==(l=d.SlotsPerEpoch)&&void 0!==l?l:r}return n+r*o+t.slot}static toRelativeSlotNumber(e,t){var a;let r=null!==(a=e[0].SlotsPerEpoch)&&void 0!==a?a:(0,s.fail)("toRelativeSlotNumber missing slots per epoch"),n=0,o=t;for(const[t,a,s]of i(e)){var l;const e=a-t;if(o<r*e)break;o-=r*e,n+=e,r=null!==(l=s.SlotsPerEpoch)&&void 0!==l?l:r}return{epoch:n+Math.floor(o/r),slot:o%r}}static timeToAbsoluteSlot(e,t){var a,r,o;const l=null!==(a=e[0].GenesisDate)&&void 0!==a?a:(0,s.fail)("timeToAbsoluteSlot missing genesis date");let d=null!==(r=e[0].SlotDuration)&&void 0!==r?r:(0,s.fail)("timeToAbsoluteSlot missing slot duration"),c=null!==(o=e[0].SlotsPerEpoch)&&void 0!==o?o:(0,s.fail)("timeToAbsoluteSlot missing slots per epoch"),u=t.getTime()-new Date(n()(l,10)).getTime(),p=0;for(const[t,a,r]of i(e)){var g,h;const e=a-t;if(u<c*d*1e3*e)break;p+=c*e,u-=c*d*1e3*e,d=null!==(g=r.SlotDuration)&&void 0!==g?g:d,c=null!==(h=r.SlotsPerEpoch)&&void 0!==h?h:c}const f=u/1e3;return p+Math.floor(f/d)}static secondsSinceGenesis(e,t){var a,r;let n=null!==(a=e[0].SlotDuration)&&void 0!==a?a:(0,s.fail)("secondsSinceGenesis missing slot duration"),o=null!==(r=e[0].SlotsPerEpoch)&&void 0!==r?r:(0,s.fail)("secondsSinceGenesis missing slots per epoch"),l=0,d=t;for(const[t,a,r]of i(e)){var c,u;const e=a-t;if(d<o*e)break;l+=o*n*e,d-=o*e,n=null!==(c=r.SlotDuration)&&void 0!==c?c:n,o=null!==(u=r.SlotsPerEpoch)&&void 0!==u?u:o}return l+d*n}static absoluteSlotToTime(e,t){const{GenesisDate:a}=e[0];if(null==a)throw new Error("absoluteSlotToTime missing genesis start date");const r=l.secondsSinceGenesis(e,t),s=new Date(n()(a,10)).getTime()+1e3*r;return new Date(s)}static currentEpochSlots(e){var t;return null!==(t=(0,o.cardanoHaskellConfigCombine)(e).SlotsPerEpoch)&&void 0!==t?t:(0,s.fail)("currentEpochSlots missing slots per epoch")}static currentSlotSeconds(e){var t;return null!==(t=(0,o.cardanoHaskellConfigCombine)(e).SlotDuration)&&void 0!==t?t:(0,s.fail)("currentSlotSeconds missing slot duration")}}},37495:(e,t,a)=>{"use strict";a.d(t,{XN:()=>v,Hk:()=>A,g_:()=>b});var r=a(86902),n=a.n(r),s=a(2991),o=a.n(s),i=a(80426),l=a.n(i),d=a(56474),c=a.n(d),u=a(39392),p=a.n(u),g=a(20116),h=a.n(g),f=a(3577),w=(a(38441),a(27189),a(57421)),m=a(39845),y=(a(38079),a(91811)),x=a(82982),_=a(1499);async function v(e){var t,a;const r=(0,f.JM)(e.publicDeriver),s=null==r?new(p()):r.getParent().getDerivationTables(),i=c()({GetUtxoTxOutputsWithTx:x.NW,GetAddress:m.t9,GetPathWithSpecific:m.LY,GetDerivationSpecific:y.n}),d=l()(t=o()(a=n()(i)).call(a,(e=>i[e]))).call(t,(t=>(0,w.Hz)(e.publicDeriver.getDb(),t)));return await(0,w.zm)(e.publicDeriver.getDb(),[...d,...(0,w.pS)(e.publicDeriver.getDb(),s)],(async t=>await async function(e,t,a,r){const n=(0,f.se)(a.publicDeriver);let s=null!=n?await n.rawGetAllUtxoAddresses(e,{GetAddress:t.GetAddress,GetPathWithSpecific:t.GetPathWithSpecific,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r):[];const o=(0,f.Oq)(a.publicDeriver),i=null!=o?await o.rawGetAllAccountingAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r):[],l=(0,f.Bq)(a.publicDeriver);if(null!=l&&!a.ignoreCutoff){const a=await l.rawGetCutoff(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);s=h()(s).call(s,(e=>e.addressing.path[e.addressing.path.length-1]<=a))}const d=[...s,...i];return await(0,_.oI)(a.publicDeriver.getDb(),e,{GetUtxoTxOutputsWithTx:t.GetUtxoTxOutputsWithTx},{addresses:d,type:a.type,networkId:a.publicDeriver.getParent().getNetworkInfo().NetworkId,defaultToken:a.publicDeriver.getParent().getDefaultToken()})}(t,i,{publicDeriver:e.publicDeriver,type:e.type,ignoreCutoff:!0===e.ignoreCutoff},s)))}async function A(e){var t,a;const r=(0,f.JM)(e);if(!r)throw new Error("getAllAddressesForWallet publicDerviver traits missing");const s=r.getParent().getDerivationTables(),i=c()({GetPathWithSpecific:m.LY,GetAddress:m.t9,GetDerivationSpecific:y.n}),d=l()(t=o()(a=n()(i)).call(a,(e=>i[e]))).call(t,(t=>(0,w.Hz)(e.getDb(),t)));return await(0,w.zm)(e.getDb(),[...d,...(0,w.pS)(e.getDb(),s)],(t=>b(t,i,{publicDeriver:e},s)))}async function b(e,t,a,r){const n=[],s=[],o=(0,f.se)(a.publicDeriver);if(null!=o){const a=await o.rawGetAllUtxoAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);for(const e of a)for(const t of e.addrs)n.push({address:t,path:e.addressing.path})}const i=(0,f.Oq)(a.publicDeriver);if(null!=i){const a=await i.rawGetAllAccountingAddresses(e,{GetPathWithSpecific:t.GetPathWithSpecific,GetAddress:t.GetAddress,GetDerivationSpecific:t.GetDerivationSpecific},void 0,r);for(const e of a)for(const t of e.addrs)s.push({address:t,path:e.addressing.path})}return{utxoAddresses:n,accountingAddresses:s}}},4922:(e,t,a)=>{"use strict";a.d(t,{_v:()=>Ce,ON:()=>Ie,Jr:()=>De,$1:()=>Se,ew:()=>Me,tu:()=>Re,Ci:()=>Be,pV:()=>Fe});var r=a(51938),n=a.n(r),s=a(51942),o=a.n(s),i=a(32366),l=a.n(i),d=a(78914),c=a.n(d),u=a(93476),p=a.n(u),g=a(81643),h=a.n(g),f=a(89400),w=a.n(f),m=a(3649),y=a.n(m),x=a(47302),_=a.n(x),v=a(46423),A=a.n(v),b=a(11128),E=a.n(b),T=a(2084),C=a.n(T),I=a(56474),k=a.n(I),D=a(86902),S=a.n(D),M=a(80426),R=a.n(M),B=a(20116),W=a.n(B),P=a(39392),N=a.n(P),F=a(36384),O=a.n(F),L=a(66419),H=a.n(L),V=a(2991),U=a.n(V),G=a(905),j=a(96486),Z=a(40705),z=a.n(Z),K=a(57421),Y=a(90691),q=a(39845),$=a(97143),J=a(11479),X=a(17625),Q=a(44946),ee=a(82982),te=a(85339),ae=a(75697),re=a(38079),ne=a(3577),se=(a(27189),a(47908)),oe=a(81369),ie=a(7559),le=a(91811),de=a(84174),ce=a(72741),ue=a(37495),pe=a(51965),ge=a(24651),he=a(66905),fe=a(21131),we=a(27649),me=a(21636),ye=a(95667),xe=a(86335),_e=a(36018),ve=a(1499),Ae=a(90649),be=a(74119);async function Ee(e,t,a,r,n){const{utxoAddresses:s,accountingAddresses:o}=await(0,ue.g_)(t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific},r,n),i=U()(s).call(s,(e=>e.address.AddressId)),l=U()(o).call(o,(e=>e.address.AddressId)),d=await a.GetCertificates.forAddress(e,t,{addressIds:[...l,...i]});return{txIds:H()(new(O())([...await a.AssociateTxWithAccountingIOs.getTxIdsForAddresses(e,t,{addressIds:l}),...await a.AssociateTxWithUtxoIOs.getTxIdsForAddresses(e,t,{addressIds:i}),...U()(d).call(d,(e=>e.transaction.TransactionId))])),addresses:{utxoAddresses:U()(s).call(s,(e=>e.address)),accountingAddresses:U()(o).call(o,(e=>e.address))}}}async function Te(e,t,a,r,n){var s,o;const{publicDeriver:i}=r,{addresses:l,txIds:d}=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:i},n),c=new(N()),u=await r.getTxAndBlock(d);for(const e of u)c.set(e.Transaction.TransactionId,e.Block);const p=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(s=U()(u).call(u,(e=>e.Transaction))).call(s,(e=>e.Type===Y.iU.CardanoByron)),networkId:i.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(o=U()(u).call(u,(e=>e.Transaction))).call(o,(e=>e.Type===Y.iU.CardanoShelley)),networkId:i.getParent().getNetworkInfo().NetworkId})],g=new(N());{const a=R()(p).call(p,(e=>{var t,a,r,n;return[...U()(t=e.utxoInputs).call(t,(e=>e.AddressId)),...U()(a=e.utxoOutputs).call(a,(e=>e.AddressId)),...null==e.accountingInputs?[]:U()(r=e.accountingInputs).call(r,(e=>e.AddressId)),...null==e.certificates?[]:R()(n=e.certificates).call(n,(e=>{var t;return U()(t=e.relatedAddresses).call(t,(e=>e.AddressId))}))]})),r=await q.t9.getById(e,t,H()(new(O())(a)));for(const e of r)g.set(e.AddressId,e.Hash)}const h=i.getParent().getDefaultToken();return{addressLookupMap:g,txs:U()(p).call(p,(e=>{var t,a;return{...e,block:c.get(e.transaction.TransactionId)||null,...(0,we.lG)({tokens:e.tokens,utxoInputs:e.utxoInputs,utxoOutputs:e.utxoOutputs,accountingInputs:null==e.accountingInputs?void 0:e.accountingInputs,allOwnedAddressIds:new(O())(U()(t=R()(a=S()(l)).call(a,(e=>l[e]))).call(t,(e=>e.AddressId))),ownImplicitInput:i.getParent().getDefaultMultiToken(),ownImplicitOutput:(()=>{if(e.txType===Y.iU.CardanoShelley){const t=i.getParent().getDefaultMultiToken();for(const a of e.certificates)a.certificate.Kind===xe.RustModule.WalletV4.CertificateKind.MoveInstantaneousRewardsCert&&xe.RustModule.WasmScope((e=>{const r=e.WalletV4.MoveInstantaneousRewardsCert.from_hex(a.certificate.Payload).move_instantaneous_reward().as_to_stake_creds();for(const n of a.relatedAddresses)for(const a of l.accountingAddresses)if(n.AddressId===a.AddressId){const n=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_hex(a.Hash));if(null==n)continue;const s=null==r?void 0:r.get(n.payment_cred());if(null==s)continue;const o=s.is_positive(),i=o?s.as_positive():s.as_negative();if(null==i)continue;const l=(o?"":"-")+i.to_str();t.add({identifier:h.defaultIdentifier,networkId:h.defaultNetworkId,amount:new G.Z(l)})}}));return t}return i.getParent().getDefaultMultiToken()})(),defaultToken:h})}}))}}async function Ce(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),n=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,GetCertificates:q.CT}),s=R()(t=U()(a=S()(n)).call(a,(e=>n[e]))).call(t,(t=>(0,K.Hz)(e.publicDeriver.getDb(),t)));return await(0,K.zm)(e.publicDeriver.getDb(),[...s,...(0,K.pS)(e.publicDeriver.getDb(),r)],(async t=>await Te(e.publicDeriver.getDb(),t,{GetPathWithSpecific:n.GetPathWithSpecific,GetAddress:n.GetAddress,CardanoByronAssociateTxWithIOs:n.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:n.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:n.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:n.AssociateTxWithAccountingIOs,GetTxAndBlock:n.GetTxAndBlock,GetDerivationSpecific:n.GetDerivationSpecific,GetCertificates:n.GetCertificates},{...e,getTxAndBlock:async a=>await n.GetTxAndBlock.byTime(e.publicDeriver.getDb(),t,{txIds:a,skip:e.skip,limit:e.limit})},r)))}async function Ie(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),n=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,GetCertificates:q.CT}),s=R()(t=U()(a=S()(n)).call(a,(e=>n[e]))).call(t,(t=>(0,K.Hz)(e.publicDeriver.getDb(),t)));return await(0,K.zm)(e.publicDeriver.getDb(),[...s,...(0,K.pS)(e.publicDeriver.getDb(),r)],(async t=>await Te(e.publicDeriver.getDb(),t,{GetPathWithSpecific:n.GetPathWithSpecific,GetAddress:n.GetAddress,CardanoByronAssociateTxWithIOs:n.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:n.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:n.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:n.AssociateTxWithAccountingIOs,GetTxAndBlock:n.GetTxAndBlock,GetDerivationSpecific:n.GetDerivationSpecific,GetCertificates:n.GetCertificates},{...e,getTxAndBlock:async a=>await n.GetTxAndBlock.withStatus(e.publicDeriver.getDb(),t,{txIds:a,status:[re.YM.PENDING]})},r)))}async function ke(e,t,a,r,n){var s,o;const i=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:n.publicDeriver},r),l=await a.GetTransaction.fromIds(e,t,{ids:i.txIds}),d=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(l).call(l,(e=>e.Type===Y.iU.CardanoByron)),networkId:n.publicDeriver.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(l).call(l,(e=>e.Type===Y.iU.CardanoShelley)),networkId:n.publicDeriver.getParent().getNetworkInfo().NetworkId})],c=R()(d).call(d,(e=>{var t,a,r;return[...U()(t=e.utxoInputs).call(t,(e=>e.AddressId)),...U()(a=e.utxoOutputs).call(a,(e=>e.AddressId)),...null==e.accountingInputs?[]:U()(r=e.accountingInputs).call(r,(e=>e.AddressId))]})),u=new(O())(U()(s=R()(o=S()(i.addresses)).call(o,(e=>i.addresses[e]))).call(s,(e=>e.AddressId))),p=W()(c).call(c,(e=>!u.has(e)));return H()(new(O())(p))}async function De(e){var t,a;const r=e.publicDeriver.getParent().getDerivationTables(),n=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetDerivationSpecific:le.n,GetTransaction:q.Ey,GetCertificates:q.CT}),s=e.publicDeriver.getDb(),o=R()(t=U()(a=S()(n)).call(a,(e=>n[e]))).call(t,(e=>(0,K.Hz)(s,e)));return await(0,K.zm)(s,[...s.getSchema().tables(),...o,...(0,K.pS)(s,r)],(async t=>{const a=await ke(s,t,n,e.publicDeriver.getParent().getDerivationTables(),{publicDeriver:e.publicDeriver}),r=await q.t9.getById(s,t,a),o=[],i=new(O());for(const e of r)i.has(e.Hash)||(i.add(e.Hash),o.push({address:e.Hash,type:e.Type}));return o}))}async function Se(e,t,a,r,n){const s=await ke(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetTransaction:a.GetTransaction,GetCertificates:a.GetCertificates},r,n),o=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:n.publicDeriver},r),i=await async function(e,t,a,r,n){var s;const o=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:n.publicDeriver},r),i=await a.GetTransaction.fromIds(e,t,{ids:o.txIds}),l=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(i).call(i,(e=>e.Type===Y.iU.CardanoByron)),networkId:n.publicDeriver.getParent().getNetworkInfo().NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(i).call(i,(e=>e.Type===Y.iU.CardanoShelley)),networkId:n.publicDeriver.getParent().getNetworkInfo().NetworkId})];return H()(new(O())(U()(s=R()(l).call(l,(e=>e.tokens))).call(s,(e=>e.TokenList.ListId))))}(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetDerivationSpecific:a.GetDerivationSpecific,GetTransaction:a.GetTransaction,GetCertificates:a.GetCertificates},r,n);return await a.DeleteAllTransactions.delete(e,t,{publicDeriverId:n.publicDeriver.getPublicDeriverId(),txIds:o.txIds}),await a.ModifyAddress.remove(e,t,s),await a.FreeBlocks.free(e,t),await a.ModifyTokenList.remove(e,t,i),o}async function Me(e){var t,a,r,n;const s=e.publicDeriver.getParent().getDerivationTables(),o=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetDerivationSpecific:le.n,DeleteAllTransactions:ce.OQ,ModifyAddress:$.ad,GetTransaction:q.Ey,FreeBlocks:$.h,GetCertificates:q.CT,ModifyTokenList:$.xx}),i=e.publicDeriver.getDb(),l=R()(t=U()(a=S()(o)).call(a,(e=>o[e]))).call(t,(e=>(0,K.Hz)(i,e))),d=R()(r=U()(n=S()(ve.p.depsTables)).call(n,(e=>ve.p.depsTables[e]))).call(r,(e=>(0,K.Hz)(i,e)));return await(0,K.zm)(i,[...i.getSchema().tables(),...l,...(0,K.pS)(i,s),...d],(async t=>(await ve.p.depsTables.ModifyUtxoAtSafePoint.remove(i,t,e.publicDeriver.getPublicDeriverId()),await ve.p.depsTables.ModifyUtxoDiffToBestBlock.removeAll(i,t,e.publicDeriver.getPublicDeriverId()),Se(i,t,o,e.publicDeriver.getParent().getDerivationTables(),{publicDeriver:e.publicDeriver}))))}async function Re(e,t,a,r,n,s){var o,i,l,d,c,u,p,g;const h=(0,ne.JM)(t),f=null==h?new(N()):h.getParent().getDerivationTables(),w=k()({GetKeyForPublicDeriver:se.NX,GetAddress:q.t9,GetPathWithSpecific:q.LY,GetUtxoTxOutputsWithTx:ee.NW,ModifyAddress:$.ad,GetPublicDeriver:se.oR,AddDerivationTree:ie.if,ModifyDisplayCutoff:oe.J,GetDerivationsByPath:q.q8,GetDerivationSpecific:le.n,GetKeyDerivation:q.qV});await(0,K.zm)(e,[...R()(o=U()(i=S()(w)).call(i,(e=>w[e]))).call(o,(t=>(0,K.Hz)(e,t))),...(0,K.pS)(e,f)],(async e=>{const r=(0,ne.hy)(t);null!=r&&await r.rawScanAddresses(e,{GetKeyForPublicDeriver:w.GetKeyForPublicDeriver,GetAddress:w.GetAddress,GetPathWithSpecific:w.GetPathWithSpecific,GetUtxoTxOutputsWithTx:w.GetUtxoTxOutputsWithTx,ModifyAddress:w.ModifyAddress,GetPublicDeriver:w.GetPublicDeriver,AddDerivationTree:w.AddDerivationTree,ModifyDisplayCutoff:w.ModifyDisplayCutoff,GetDerivationsByPath:w.GetDerivationsByPath,GetDerivationSpecific:w.GetDerivationSpecific,GetKeyDerivation:w.GetKeyDerivation},{checkAddressesInUse:a},f)}));const m=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,GetDerivationSpecific:le.n});await(0,K.zm)(e,[...R()(l=U()(d=S()(ve.p.depsTables)).call(d,(e=>ve.p.depsTables[e]))).call(l,(t=>(0,K.Hz)(e,t))),...R()(c=U()(u=S()(m)).call(u,(e=>m[e]))).call(c,(t=>(0,K.Hz)(e,t)))],(async a=>{await async function(e,t,a,r,n){var s,o;const i=await(0,ue.g_)(t,{GetPathWithSpecific:r.GetPathWithSpecific,GetAddress:r.GetAddress,GetDerivationSpecific:r.GetDerivationSpecific},{publicDeriver:a},n),l=a.getUtxoStorageApi(),d=a.getUtxoService();l.setDb(e),l.setDbTx(t);const c=Ue({utxoAddresses:U()(s=i.utxoAddresses).call(s,(e=>e.address)),accountingAddresses:U()(o=i.accountingAddresses).call(o,(e=>e.address))});await async function(e,t){const a=new(O())(t),r=z().sha1(a),n=`TMP/UTXO_REQUEST_ADDRESSES_HASH/${e}`,s=await(0,be.Jt)(n),o=null==s||s!==r;return o&&(console.debug("/// utxo state must be cleared:",e,r,s),await(0,be.mM)(n,r)),o}(a.getPublicDeriverId(),c)&&await l.clearUtxoState(),await d.syncUtxoState(c)}(e,a,t,m,f)}));const y=(0,ne.se)(t);if(null==y)throw new Error("wallet doesn't support IGetAllUtxos");const x=await y.getAllUtxos(),_=R()(x).call(x,(e=>{var t;return U()(t=e.output.tokens).call(t,(e=>e.Token.Identifier))})),v=k()({ModifyToken:$.$G,GetToken:q.YT});await(0,K.zm)(e,R()(p=U()(g=S()(v)).call(g,(e=>v[e]))).call(p,(t=>(0,K.Hz)(e,t))),(a=>Fe(e,a,v,_,r,n,s,t.getParent().getNetworkInfo())))}async function Be(e,t,a,r,s,i,d,c,u,p,g,h){const f=(0,ne.JM)(t),m=null==f?new(N()):f.getParent().getDerivationTables();let x;try{var v,b;const a=k()({GetLastSyncForPublicDeriver:se.tV,ModifyLastSyncInfo:ce.Ms,GetKeyForPublicDeriver:se.NX,GetAddress:q.t9,GetPathWithSpecific:q.LY,GetUtxoTxOutputsWithTx:ee.NW,ModifyAddress:$.ad,GetPublicDeriver:se.oR,AddDerivationTree:ie.if,MarkUtxo:Q.t,ModifyDisplayCutoff:oe.J,GetDerivationsByPath:q.q8,GetEncryptionMeta:q.t$,GetTransaction:q.Ey,GetUtxoInputs:ee.uR,GetTxAndBlock:q.Lq,GetDerivationSpecific:le.n,ModifyTransaction:$.BP,ModifyCardanoByronTx:J.o,ModifyCardanoShelleyTx:J.C,CardanoByronAssociateTxWithIOs:ae.X,CardanoShelleyAssociateTxWithIOs:ae.K,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN,GetCertificates:q.CT,GetKeyDerivation:q.qV,ModifyToken:$.$G,GetToken:q.YT,AssociateToken:q.qr,DeleteAllTransactions:ce.OQ}),f=R()(v=U()(b=S()(a)).call(b,(e=>a[e]))).call(v,(t=>(0,K.Hz)(e,t)));return await(0,K.zm)(e,[...f,...(0,K.pS)(e,m)],(async f=>{x=await a.GetLastSyncForPublicDeriver.forId(e,f,t.getPublicDeriverId());const{GetLastSyncForPublicDeriver:v,...b}=a;return await async function(e,t,a,r,s,i,d,c,u,p,g,h,f,m,x){var v,b,T;const C=r.getParent().getNetworkInfo(),I=e=>pe.default.toAbsoluteSlotNumber((0,de.getCardanoHaskellBaseConfig)(C),e);if(null!=x&&null!=m)throw new Error("Only one of `before` or `after` should be used for a resync");const k=await u({network:C}),D=null==x?k.hash:x.blockHash;if(null==x){const r=null==k.epoch||null==k.slot?null:I({epoch:k.epoch,slot:k.slot});await a.ModifyLastSyncInfo.overrideLastSyncInfo(e,t,{LastSyncInfoId:s.LastSyncInfoId,Time:new Date(E()()),SlotNum:r,BlockHash:k.hash,Height:k.height})}let M;if(null!=D){var B,P;const{txIds:s,addresses:u}=await Ee(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetCertificates:a.GetCertificates},{publicDeriver:r},p);let v;if(null!=m)v=await i({network:C,addresses:Ue(u),after:{block:m.blockHash,tx:m.txHash||void 0},untilBlock:D}),M=U()(v).call(v,(e=>e.hash));else{var F,L,V;const e=await d({network:C,addresses:Ue(u),before:{blockHash:D,txHash:null==x?void 0:x.txHash}}),t=W()(F=A()(L=(0,Ae.listValues)(e)).call(L)).call(F,(0,Ae.createFilterUniqueBy)((e=>e.txHash)));_()(t).call(t,((e,t)=>t.epoch-e.epoch||t.slot-e.slot||t.txBlockIndex-e.txBlockIndex)),M=U()(V=y()(t).call(t,0,20)).call(V,(e=>e.txHash)),v=await c({network:C,txHashes:M})}const b=new(O())(U()(B=R()(P=S()(u)).call(P,(e=>u[e]))).call(B,(e=>e.AddressId)));await async function(e,t,a,r){const{TransactionSeed:s,BlockSeed:i}=await a.GetEncryptionMeta.get(e,t),d=new(N());{var c;const n=U()(c=r.txsFromNetwork).call(c,(e=>(0,X.a)(e.hash,s))),o=await a.GetTransaction.byDigest(e,t,{digests:n,txIds:r.txIds}),i=H()(w()(o).call(o)),l=[...await a.CardanoByronAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(i).call(i,(e=>e.Type===Y.iU.CardanoByron)),networkId:r.network.NetworkId}),...await a.CardanoShelleyAssociateTxWithIOs.getIOsForTx(e,t,{txs:W()(i).call(i,(e=>e.Type===Y.iU.CardanoShelley)),networkId:r.network.NetworkId})];for(const e of l)d.set(e.transaction.Hash,e)}const u=[],p=[],g=new(O());for(const n of r.txsFromNetwork){const o=d.get(n.hash);if(null==o){u.push(n);continue}const l=He(n,r.toAbsoluteSlotNumber,s,i);g.add(o.transaction.TransactionId);const c=await a.ModifyTransaction.updateExisting(e,t,{block:l.block,transaction:e=>({...l.transaction(e),TransactionId:o.transaction.TransactionId})});o.transaction.Status!==re.YM.IN_BLOCK&&null!==c.block&&p.push({...o,transaction:c.transaction,block:c.block})}const h=H()(new(O())(R()(u).call(u,(e=>{var t,a,n,s;return[...U()(t=R()(a=e.inputs).call(a,(e=>e.assets))).call(t,(e=>e.assetId)),...U()(n=R()(s=e.outputs).call(s,(e=>e.assets))).call(n,(e=>e.assetId)),r.defaultToken.defaultIdentifier]})))),f=await Fe(e,t,{ModifyToken:a.ModifyToken,GetToken:a.GetToken},h,r.getTokenInfo,r.getMultiAssetMetadata,r.getMultiAssetSupply,r.network),m=await(0,ee.i9)(e,t,{AssociateToken:a.AssociateToken}),{byronTxs:y,shelleyTxs:x}=await async function(e,t,a,r,s,i,d,c,u,p,g,h){const f=H()(new(O())(R()(s).call(s,(e=>{var t,a,r;return[...U()(t=e.inputs).call(t,(e=>e.address)),...U()(a=e.outputs).call(a,(e=>e.address)),...e.withdrawals?U()(r=e.withdrawals).call(r,(e=>e.address)):[]]})))),m=await i({db:e,tx:t,lockedTables:H()(w()(r).call(r)),hashes:f}),y=e=>{const t=m.get(e);if(void 0===t)throw new Error("networkTxToDbTx should never happen id === undefined");return t},x=e=>{const t=g.get(e);if(void 0===t)throw new Error("networkTxToDbTx should never happen -- asset missing");return t},_=[],v=[];for(const g of s){const{block:s,transaction:f}=He(g,c,u,p);if(null==g.type||g.type===me.p.byron)_.push({block:s,transaction:f,ioGen:We(g,y,a,x,h)});else{var A;if(g.type!==me.p.shelley)throw new Error(`networkTxToDbTx Unhandled tx type ${null!==(A=g.type)&&void 0!==A?A:""}`);{var b;const c=l()(b=(0,de.getCardanoHaskellBaseConfig)(a)).call(b,((e,t)=>o()(e,t)),{}),u=null==g.certificates?[e=>{}]:await Ve(e,t,{certificates:g.certificates,hashToIds:i,findOwnAddress:d,derivationTables:r,network:n()(c.ChainNetworkId,10)});v.push({block:s,transaction:f,certificates:u,ioGen:Pe(g,y,a,x,h)})}}}return{byronTxs:_,shelleyTxs:v}}(e,t,r.network,r.derivationTables,u,r.hashToIds,r.findOwnAddress,r.toAbsoluteSlotNumber,s,i,f,m),_=new(O());for(const r of y){const n=await a.ModifyCardanoByronTx.addTxWithIOs(e,t,r);_.add(n.transaction.TransactionId),null!==n.block&&p.push({txType:n.txType,block:n.block,transaction:n.transaction,utxoInputs:n.utxoInputs,utxoOutputs:n.utxoOutputs,tokens:n.tokens})}for(const r of x){const n=await a.ModifyCardanoShelleyTx.addTxWithIOs(e,t,r);_.add(n.transaction.TransactionId),null!==n.block&&p.push({txType:n.txType,block:n.block,transaction:n.transaction,certificates:n.certificates,utxoInputs:n.utxoInputs,utxoOutputs:n.utxoOutputs,accountingInputs:n.accountingInputs,tokens:n.tokens})}const v=U()(p).call(p,(e=>e.transaction.TransactionId));await Oe(e,t,{MarkUtxo:a.MarkUtxo,GetUtxoInputs:a.GetUtxoInputs,GetTransaction:a.GetTransaction},{inputTxIds:v,allTxIds:[...r.txIds,...v],isUnspent:!1,TransactionSeed:s,networkId:r.network.NetworkId});const A=await a.GetTransaction.withStatus(e,t,{txIds:r.txIds,status:[re.YM.PENDING]});for(const r of A)g.has(r.TransactionId)||_.has(r.TransactionId)||await a.ModifyTransaction.updateStatus(e,t,{transaction:r,status:re.YM.NOT_IN_REMOTE});return p}(e,t,{MarkUtxo:a.MarkUtxo,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,GetEncryptionMeta:a.GetEncryptionMeta,GetTransaction:a.GetTransaction,GetUtxoInputs:a.GetUtxoInputs,ModifyTransaction:a.ModifyTransaction,ModifyCardanoByronTx:a.ModifyCardanoByronTx,ModifyCardanoShelleyTx:a.ModifyCardanoShelleyTx,ModifyToken:a.ModifyToken,GetToken:a.GetToken,AssociateToken:a.AssociateToken},{network:r.getParent().getNetworkInfo(),txIds:s,txsFromNetwork:v,hashToIds:(0,ge.SL)(b,r.getParent().getNetworkInfo()),defaultToken:r.getParent().getDefaultToken(),findOwnAddress:(0,ge.K0)(b),toAbsoluteSlotNumber:I,derivationTables:p,getTokenInfo:g,getMultiAssetMetadata:h,getMultiAssetSupply:f})}else M=[];const G=await Te(e,t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,CardanoByronAssociateTxWithIOs:a.CardanoByronAssociateTxWithIOs,CardanoShelleyAssociateTxWithIOs:a.CardanoShelleyAssociateTxWithIOs,AssociateTxWithUtxoIOs:a.AssociateTxWithUtxoIOs,AssociateTxWithAccountingIOs:a.AssociateTxWithAccountingIOs,GetTxAndBlock:a.GetTxAndBlock,GetDerivationSpecific:a.GetDerivationSpecific,GetCertificates:a.GetCertificates},{publicDeriver:r,getTxAndBlock:async r=>await a.GetTxAndBlock.byTime(e,t,{txIds:r})},p),j=U()(v=y()(b=G.txs).call(b,100)).call(v,(e=>e.transaction.TransactionId));await a.DeleteAllTransactions.delete(e,t,{publicDeriverId:r.getPublicDeriverId(),txIds:j},!1);const Z=new(O())(M);return{txs:W()(T=G.txs).call(T,(e=>Z.has(e.transaction.Hash))),addressLookupMap:G.addressLookupMap}}(e,f,b,t,x,r,s,i,d,m,c,u,p,g,h)}))}catch(a){var T,I;if(!(a instanceof fe.RollbackApiError))throw a;if(void 0===x)throw a;const r=k()({GetPathWithSpecific:q.LY,GetAddress:q.t9,GetTxAndBlock:q.Lq,GetLastSyncForPublicDeriver:se.tV,ModifyLastSyncInfo:ce.Ms,GetBlock:q.Ff,ModifyTransaction:$.BP,MarkUtxo:Q.t,GetTransaction:q.Ey,GetUtxoInputs:ee.uR,GetEncryptionMeta:q.t$,GetDerivationSpecific:le.n,CardanoByronAssociateTxWithIOs:ae.X,AssociateTxWithUtxoIOs:ee.zb,AssociateTxWithAccountingIOs:te.KN}),n=R()(T=U()(I=S()(r)).call(I,(e=>r[e]))).call(T,(t=>(0,K.Hz)(e,t)));return await(0,K.zm)(e,[...n,...(0,K.pS)(e,m)],(async a=>{const n=await r.GetLastSyncForPublicDeriver.forId(e,a,t.getPublicDeriverId());(0,j.isEqual)(n,x)&&await async function(e,t,a,r,n){const{TransactionSeed:s}=await a.GetEncryptionMeta.get(e,t);if(null===r.lastSyncInfo.SlotNum)return;const{utxoAddresses:o,accountingAddresses:i}=await(0,ue.g_)(t,{GetPathWithSpecific:a.GetPathWithSpecific,GetAddress:a.GetAddress,GetDerivationSpecific:a.GetDerivationSpecific},{publicDeriver:r.publicDeriver},n),l=U()(o).call(o,(e=>e.address.AddressId)),d=U()(i).call(i,(e=>e.address.AddressId)),c=H()(new(O())([...await a.AssociateTxWithAccountingIOs.getTxIdsForAddresses(e,t,{addressIds:d}),...await a.AssociateTxWithUtxoIOs.getTxIdsForAddresses(e,t,{addressIds:l})])),u=await a.GetTxAndBlock.firstSuccessTxBefore(e,t,{txIds:c,height:C()});if(null==u)return;const p=await a.GetTxAndBlock.gteHeight(e,t,{txIds:c,height:u.Block.Height-he.Q});for(const r of p)await a.ModifyTransaction.updateStatus(e,t,{status:re.YM.ROLLBACK_FAIL,transaction:r.Transaction});await Oe(e,t,{MarkUtxo:a.MarkUtxo,GetUtxoInputs:a.GetUtxoInputs,GetTransaction:a.GetTransaction},{inputTxIds:U()(p).call(p,(e=>e.Transaction.TransactionId)),allTxIds:c,isUnspent:!0,TransactionSeed:s,networkId:r.publicDeriver.getParent().getNetworkInfo().NetworkId});const g=await a.GetTransaction.withStatus(e,t,{txIds:c,status:[re.YM.PENDING]});for(const r of g)await a.ModifyTransaction.updateStatus(e,t,{transaction:r,status:re.YM.ROLLBACK_FAIL});const h=await a.GetTxAndBlock.firstSuccessTxBefore(e,t,{txIds:c,height:u.Block.Height-he.Q});await a.ModifyLastSyncInfo.overrideLastSyncInfo(e,t,{LastSyncInfoId:r.lastSyncInfo.LastSyncInfoId,Time:new Date(E()()),SlotNum:void 0===h?null:h.Block.SlotNum,Height:void 0===h?0:h.Block.Height,BlockHash:void 0===h?null:h.Block.Hash})}(e,a,r,{publicDeriver:t,lastSyncInfo:n},m)})),{addressLookupMap:new(N()),txs:[]}}}function We(e,t,a,r,n){if(null!=e.type&&e.type!==me.p.byron)throw new Error("genByronIOGen not a byron transaction");return s=>{const o=[],i=[],l=[];for(let i=0;i<e.inputs.length;i++){const d=e.inputs[i],c=n();l.push({TokenList:{Amount:d.amount,ListId:c,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<d.assets.length;e++){const t=r(d.assets[e].assetId);l.push({TokenList:{Amount:d.assets[e].amount.toString(),ListId:c,TokenId:t.TokenId},identifier:d.assets[e].assetId,networkId:a.NetworkId})}o.push({TransactionId:s,AddressId:t(d.address),ParentTxHash:d.txHash,IndexInParentTx:d.index,IndexInOwnTx:i,TokenListId:c})}for(let o=0;o<e.outputs.length;o++){const d=e.outputs[o],c=n();l.push({TokenList:{Amount:d.amount,ListId:c,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<d.assets.length;e++){const t=r(d.assets[e].assetId);l.push({TokenList:{Amount:d.assets[e].amount.toString(),ListId:c,TokenId:t.TokenId},identifier:d.assets[e].assetId,networkId:a.NetworkId})}i.push({TransactionId:s,AddressId:t(d.address),OutputIndex:o,IsUnspent:!0,ErgoBoxId:null,ErgoCreationHeight:null,ErgoRegisters:null,ErgoTree:null,TokenListId:c})}return{utxoInputs:o,utxoOutputs:i,tokenList:l}}}function Pe(e,t,a,r,n){if(e.type!==me.p.shelley)throw new Error("genShelleyIOGen not a shelley transaction");return s=>{const o=[],i=[],l=[],d=[];for(let i=0;i<e.inputs.length;i++){const l=e.inputs[i],c=n();d.push({TokenList:{Amount:l.amount,ListId:c,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<l.assets.length;e++){const t=r(l.assets[e].assetId);d.push({TokenList:{Amount:l.assets[e].amount.toString(),ListId:c,TokenId:t.TokenId},identifier:l.assets[e].assetId,networkId:a.NetworkId})}o.push({TransactionId:s,AddressId:t(l.address),ParentTxHash:l.txHash,IndexInParentTx:l.index,IndexInOwnTx:i,TokenListId:c})}for(let o=0;o<e.withdrawals.length;o++){const i=n();d.push({TokenList:{Amount:e.withdrawals[o].amount,ListId:i,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId}),l.push({TransactionId:s,AddressId:t(e.withdrawals[o].address),SpendingCounter:0,IndexInOwnTx:o,TokenListId:i})}for(let o=0;o<e.outputs.length;o++){const l=e.outputs[o],c=n();d.push({TokenList:{Amount:l.amount,ListId:c,TokenId:r(re.hd.Cardano).TokenId},identifier:re.hd.Cardano,networkId:a.NetworkId});for(let e=0;e<l.assets.length;e++){const t=r(l.assets[e].assetId);d.push({TokenList:{Amount:l.assets[e].amount.toString(),ListId:c,TokenId:t.TokenId},identifier:l.assets[e].assetId,networkId:a.NetworkId})}const u=(0,ye.addressToKind)(l.address,"bytes",a);if(u!==re.dq.CARDANO_LEGACY&&u!==re.dq.CARDANO_ENTERPRISE&&u!==re.dq.CARDANO_BASE&&u!==re.dq.CARDANO_PTR)throw u===re.dq.CARDANO_REWARD?new Error("networkTxToDbTx cannot send to a reward address"):new Error("networkTxToDbTx Unhandled output type");i.push({TransactionId:s,AddressId:t(l.address),OutputIndex:o,TokenListId:c,IsUnspent:!0,ErgoBoxId:null,ErgoCreationHeight:null,ErgoRegisters:null,ErgoTree:null})}return{utxoInputs:o,utxoOutputs:i,accountingInputs:l,tokenList:d}}}const Ne=36e5;async function Fe(e,t,a,r,n,s,o,i){var l,d,u;const g=W()(l=await a.GetToken.fromIdentifier(e,t,r)).call(l,(e=>e.NetworkId===i.NetworkId)),f=new(N())(U()(g).call(g,(e=>[e.Identifier,e]))),w=new(O())(U()(d=W()(g).call(g,(e=>{if(e.IsDefault)return!0;const{lastUpdatedAt:t}=e.Metadata;return null!=t&&E()()-Date.parse(t)<Ne}))).call(d,(e=>e.Identifier))),m=W()(r).call(r,(e=>!w.has(e))),y=n({network:i,tokenIds:U()(m).call(m,(e=>e.split(".").join("")))}),x=async function(e,t,a,r){var n,s;const o=U()(n=W()(s=e||[]).call(s,(e=>-1!==h()(e).call(e,".")))).call(n,(e=>{const t=e.split("."),a=t[0];return{nameHex:t[1],policy:a}}));if(0===o.length)return[{},{}];const[i,l]=await p().all([t({network:r,assets:o}),a({network:r,assets:o})]);return[i,l]}(r,s,o,i);let _={},v={},A={};try{[_,[v,A]]=await p().all([y,x])}catch(e){console.error("Failed to query token info, metadata, or supply",e)}const b=W()(u=U()(m).call(m,(e=>{var t;const a=e.split(".").join("");let r=0,n=null,s=null,o=null,l=null;const d=_[a];var c,u,p,g;if(d)r=null!==(c=d.decimals)&&void 0!==c?c:0,s=null!==(u=d.ticker)&&void 0!==u?u:null,n=(new Date).toISOString(),o=null!==(p=d.name)&&void 0!==p?p:null,l=null!==(g=d.logo)&&void 0!==g?g:null;else if(null===d)n=(new Date).toISOString();else if(f.has(e))return null;const h=(0,we.PF)(e),w=(0,Ae.bytesToHex)(h.name.name()),m=h.policyId.to_hex(),y=v[e],x=A[e];let b=!1,E=[];return y&&(b=W()(y).call(y,(e=>"721"===e.key)).length>0&&"1"===x,E=U()(y).call(y,(e=>{const t={};return t[e.key]=e.metadata,t}))),{NetworkId:i.NetworkId,Identifier:e,IsDefault:!1,TokenId:null===(t=f.get(e))||void 0===t?void 0:t.TokenId,IsNFT:b,Metadata:{type:"Cardano",ticker:s,logo:l,longName:o,numberOfDecimals:r,assetName:w,policyId:m,lastUpdatedAt:n,assetMintMetadata:E}}}))).call(u,Boolean),T=await a.ModifyToken.upsert(e,t,b),C=new(N());return c()(g).call(g,(e=>C.set(e.Identifier,e))),c()(T).call(T,(e=>C.set(e.Identifier,e))),C}async function Oe(e,t,a,r){const n=await a.GetUtxoInputs.fromTxIds(e,t,{ids:r.inputTxIds}),s=U()(n).call(n,(e=>(0,X.a)(e.ParentTxHash,r.TransactionSeed))),o=await a.GetTransaction.byDigest(e,t,{digests:s,txIds:r.allTxIds});for(const s of n){const n=o.get(s.ParentTxHash);void 0!==n&&await a.MarkUtxo.markAs(e,t,{txId:n.TransactionId,outputIndex:s.IndexInParentTx,isUnspent:r.isUnspent,networkId:r.networkId})}}function Le(e){if("Successful"===e)return re.YM.IN_BLOCK;if("Pending"===e)return re.YM.PENDING;if("Failed"===e)return re.YM.FAIL_RESPONSE;throw new Error("statusStringToCode unexpected status "+e)}function He(e,t,a,r){var n;const s=null!=e.epoch&&null!=e.slot&&null!=e.block_hash&&null!=e.time&&null!=e.height?{Hash:e.block_hash,BlockTime:new Date(e.time),Height:e.height,SlotNum:t({epoch:e.epoch,slot:e.slot}),Digest:(0,X.a)(e.hash,r)}:null,o=(0,X.a)(e.hash,a),i={Hash:e.hash,Digest:o,Ordinal:e.tx_ordinal,LastUpdateTime:null==s||null==e.time?new Date(e.last_update).getTime():new Date(e.time).getTime(),Status:Le(e.tx_state),ErrorMessage:null};if(null==e.type||e.type===me.p.byron)return{block:s,transaction:e=>({Type:Y.iU.CardanoByron,Extra:null,BlockId:e,...i})};if(e.type===me.p.shelley)return{block:s,transaction:t=>{var a;return{Type:Y.iU.CardanoShelley,Extra:{Fee:e.fee,Metadata:e.metadata,IsValid:null===(a=e.valid_transaction)||void 0===a||a},BlockId:t,...i}}};throw new Error(`networkTxHeaderToDb Unhandled tx type ${null!==(n=e.type)&&void 0!==n?n:""}`)}async function Ve(e,t,a){const r=async r=>{var n;return await a.findOwnAddress({db:e,tx:t,lockedTables:H()(w()(n=a.derivationTables).call(n)),hash:r})},n=async r=>{var n;const s=(await a.hashToIds({db:e,tx:t,lockedTables:H()(w()(n=a.derivationTables).call(n)),hashes:[r]})).get(r);if(void 0===s)throw new Error("certificateToDb should never happen id === undefined");return s},s=async e=>{{const t=xe.RustModule.WasmScope((t=>{const r=t.WalletV4.Credential.from_bytes((0,Ae.hexToBytes)(e));return(0,Ae.bytesToHex)(t.WalletV4.RewardAddress.new(a.network,r).to_address().to_bytes())})),n=await r(t);if(null!=n)return n}{const t=xe.RustModule.WasmScope((t=>{const r=t.WalletV4.Credential.from_bytes((0,Ae.hexToBytes)(e));return t.WalletV4.EnterpriseAddress.new(a.network,r).to_address().to_hex()})),n=await r(t);if(null!=n)return n}},o=[];for(let e=0;e<a.certificates.length;e++){const t=a.certificates[e];switch(t.kind){case me.U.StakeRegistration:try{const[e,r]=xe.RustModule.WasmScope((e=>{var r;const n=null===(r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,Ae.hexToBytes)(t.rewardAddress))))||void 0===r?void 0:r.payment_cred();if(null==n)throw new Error("certificateToDb not a valid reward account");return[(0,Ae.bytesToHex)(e.WalletV4.RewardAddress.new(a.network,n).to_address().to_bytes()),(0,Ae.bytesToHex)(e.WalletV4.StakeRegistration.new(n).to_bytes())]})),s=await n(e);o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeRegistration,Payload:r,TransactionId:e},relatedAddresses:e=>[{CertificateId:e,AddressId:s,Relation:re.cS.SIGNER}]})))}catch(e){console.warn("Failed to process certificate:",t,e)}break;case me.U.StakeDeregistration:{const[e,r]=xe.RustModule.WasmScope((e=>{var r;const n=null===(r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,Ae.hexToBytes)(t.rewardAddress))))||void 0===r?void 0:r.payment_cred();if(null==n)throw new Error("certificateToDb not a valid reward account");return[(0,Ae.bytesToHex)(e.WalletV4.RewardAddress.new(a.network,n).to_address().to_bytes()),(0,Ae.bytesToHex)(e.WalletV4.StakeRegistration.new(n).to_bytes())]})),s=await n(e);o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeDeregistration,Payload:r,TransactionId:e},relatedAddresses:e=>[{CertificateId:e,AddressId:s,Relation:re.cS.SIGNER}]})));break}case me.U.StakeDelegation:{const e=[],[a,r,i]=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,Ae.hexToBytes)(t.rewardAddress)));if(null==a)throw new Error("certificateToDb not a valid reward account");const r=a.payment_cred(),n=e.WalletV4.Ed25519KeyHash.from_bytes((0,Ae.hexToBytes)(t.poolKeyHash));return[(0,Ae.bytesToHex)(a.to_address().to_bytes()),(0,Ae.bytesToHex)(e.WalletV4.StakeDelegation.new(r,n).to_bytes()),(0,Ae.bytesToHex)(e.WalletV4.Credential.from_keyhash(n).to_bytes())]}));{const t=await s(i);null!=t&&e.push({AddressId:t,Relation:re.cS.POOL_KEY})}{const t=await n(a);e.push({AddressId:t,Relation:re.cS.SIGNER})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeDelegation,Payload:r,TransactionId:a},relatedAddresses:t=>U()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case me.U.PoolRegistration:{const e=[],a=[],[r,i]=xe.RustModule.WasmScope((e=>{const r=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,Ae.hexToBytes)(t.poolParams.rewardAccount)));if(null==r)throw new Error("certificateToDb registration address not a reward address");const n=e.WalletV4.Ed25519KeyHash.from_bytes((0,Ae.hexToBytes)(t.poolParams.operator)),s=e.WalletV4.Ed25519KeyHashes.new();for(let r=0;r<t.poolParams.poolOwners.length;r++){const n=t.poolParams.poolOwners[r],o=e.WalletV4.Ed25519KeyHash.from_hex(n);s.add(o);const i=(0,Ae.bytesToHex)(e.WalletV4.Credential.from_keyhash(o).to_bytes());a.push(i)}let o;if(null!=t.poolParams.poolMetadata){const a=t.poolParams.poolMetadata;o=e.WalletV4.PoolMetadata.new(e.WalletV4.URL.new(a.url),e.WalletV4.PoolMetadataHash.from_hex(a.metadataHash))}const i=e.WalletV4.PoolRegistration.new(e.WalletV4.PoolParams.new(n,e.WalletV4.VRFKeyHash.from_hex(t.poolParams.vrfKeyHash),e.WalletV4.BigNum.from_str(t.poolParams.pledge),e.WalletV4.BigNum.from_str(t.poolParams.cost),e.WalletV4.UnitInterval.new(e.WalletV4.BigNum.from_str("1"),e.WalletV4.BigNum.from_str("1")),r,s,e.WalletV4.Relays.new(),o));return[(0,Ae.bytesToHex)(e.WalletV4.Credential.from_keyhash(n).to_bytes()),(0,Ae.bytesToHex)(i.to_bytes())]}));for(const t of a){const a=await s(t);null!=a&&e.push({AddressId:a,Relation:re.cS.OWNER})}{const t=await s(r);null!=t&&e.push({AddressId:t,Relation:re.cS.OPERATOR})}{const a=await n(t.poolParams.rewardAccount);e.push({AddressId:a,Relation:re.cS.REWARD_ADDRESS})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.PoolRegistration,Payload:i,TransactionId:a},relatedAddresses:t=>U()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case me.U.PoolRetirement:{const e=[],[a,r]=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.Ed25519KeyHash.from_bytes((0,Ae.hexToBytes)(t.poolKeyHash));return[(0,Ae.bytesToHex)(e.WalletV4.Credential.from_keyhash(a).to_bytes()),(0,Ae.bytesToHex)(e.WalletV4.PoolRetirement.new(a,t.epoch).to_bytes())]}));{const t=await s(a);null!=t&&e.push({AddressId:t,Relation:re.cS.POOL_KEY})}o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.PoolRetirement,Payload:r,TransactionId:a},relatedAddresses:t=>U()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case me.U.GenesisKeyDelegation:{const e=xe.RustModule.WasmScope((e=>(0,Ae.bytesToHex)(e.WalletV4.GenesisKeyDelegation.new(e.WalletV4.GenesisHash.from_bytes((0,Ae.hexToBytes)(t.genesishash)),e.WalletV4.GenesisDelegateHash.from_bytes((0,Ae.hexToBytes)(t.genesisDelegateHash)),e.WalletV4.VRFKeyHash.from_bytes((0,Ae.hexToBytes)(t.vrfKeyHash))).to_bytes())));o.push((a=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.GenesisKeyDelegation,Payload:e,TransactionId:a},relatedAddresses:e=>[]})));break}case me.U.MoveInstantaneousRewardsCert:{const e=[],a=xe.RustModule.WasmScope((e=>{const a=e.WalletV4.MIRToStakeCredentials.new();for(const r of S()(t.rewards)){const n=e.WalletV4.RewardAddress.from_address(e.WalletV4.Address.from_bytes((0,Ae.hexToBytes)(r)));if(null==n)throw new Error("certificateToDb not a valid reward account");const s=n.payment_cred();if(null==s)throw new Error("certificateToDb not a valid reward account");a.insert(s,e.WalletV4.Int.new(e.WalletV4.BigNum.from_str(t.rewards[r])))}const r=e.WalletV4.MoveInstantaneousRewardsCert.new(e.WalletV4.MoveInstantaneousReward.new_to_stake_creds(t.pot,a));return(0,Ae.bytesToHex)(r.to_bytes())}));for(const a of S()(t.rewards)){const t=await r(a);null!=t&&e.push({AddressId:t,Relation:re.cS.REWARD_ADDRESS})}o.push((r=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.MoveInstantaneousRewardsCert,Payload:a,TransactionId:r},relatedAddresses:t=>U()(e).call(e,(e=>({...e,CertificateId:t})))})));break}case me.U.VoteDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.VoteDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.StakeVoteDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.StakeRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.VoteRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.StakeVoteRegistrationDelegation:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.AuthCommitteeHot:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.CommitteeHotAuth,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.ResignCommitteeCold:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.CommitteeColdResign,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.RegisterDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepRegistration,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.UnregisterDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepDeregistration,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;case me.U.UpdateDrep:o.push((e=>({certificate:{Ordinal:t.certIndex,Kind:xe.RustModule.WalletV4.CertificateKind.DRepUpdate,Payload:"",TransactionId:e},relatedAddresses:e=>[]})));break;default:throw new Error("certificateToDb unknown cert kind "+t.kind)}}return o}function Ue(e){var t,a,r,n,s;return[...U()(t=W()(a=e.utxoAddresses).call(a,(e=>e.Type===re.dq.CARDANO_LEGACY))).call(t,(e=>e.Hash)),...l()(r=W()(n=e.utxoAddresses).call(n,(e=>e.Type===re.dq.CARDANO_ENTERPRISE))).call(r,((e,t)=>xe.RustModule.WasmScope((a=>{const r=a.WalletV4.Address.from_hex(t.Hash),n=a.WalletV4.EnterpriseAddress.from_address(r);if(null==n)return e;const s=n.payment_cred().to_keyhash();return null==s||e.push(s.to_bech32(_e.a.PAYMENT_KEY_HASH)),e}))),[]),...U()(s=e.accountingAddresses).call(s,(e=>e.Hash))]}},95667:(e,t,a)=>{"use strict";a.d(t,{addressToKind:()=>p,normalizeToAddress:()=>w,getCardanoSpendingKeyHash:()=>m,addressToDisplayString:()=>y,toHexOrBase58:()=>x,unwrapStakingKey:()=>_,isCertificateKindDrepDelegation:()=>v});var r=a(94473),n=a.n(r),s=a(97093),o=a.n(s),i=(a(59340),a(51938),a(38079)),l=a(86335),d=a(84174),c=(a(99095),a(27715)),u=a(90649);function p(e,t,a){try{return l.RustModule.WasmScope((r=>{if((0,d.isCardanoHaskell)(a)){if(r.WalletV4.ByronAddress.is_valid(e))return i.dq.CARDANO_LEGACY;const a="bytes"===t?r.WalletV4.Address.from_hex(e):r.WalletV4.Address.from_bech32(e);if(r.WalletV4.ByronAddress.from_address(a))return i.dq.CARDANO_LEGACY;if(r.WalletV4.BaseAddress.from_address(a))return i.dq.CARDANO_BASE;if(r.WalletV4.PointerAddress.from_address(a))return i.dq.CARDANO_PTR;if(r.WalletV4.EnterpriseAddress.from_address(a))return i.dq.CARDANO_ENTERPRISE;if(r.WalletV4.RewardAddress.from_address(a))return i.dq.CARDANO_REWARD;throw new Error("addressToKind unknown address type")}throw new Error(`addressToKind not implemented for network ${a.NetworkId}`)}))}catch(t){throw new Error(`addressToKind failed to parse address type ${t} ${e}`)}}const g=e=>(0,u.bytesToHex)(c.bech32.fromWords(e)),h=e=>{const t=c.bech32.decodeUnsafe(e,e.length);return(0,u.maybe)(null==t?void 0:t.words,g)},f=[{validate:e=>57===(0,u.hexToBytes)(e).length,header:/^[0-3]/},{validate:e=>(0,u.hexToBytes)(e).length>=32,header:/^[4-5]/},{validate:e=>29===(0,u.hexToBytes)(e).length,header:/^[6-7]/},{parse:e=>{const t=(e=>{const t=[];let a=e;for(;a>0;){const e=a/BigInt(58),r=a%BigInt(58);a=e,t.push("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"[r])}return o()(t).call(t).join("")})(BigInt(`0x${e}`));if(l.RustModule.WalletV4.ByronAddress.is_valid(t))return l.RustModule.WalletV4.ByronAddress.from_base58(t).to_address()},header:/^[8]/},{validate:e=>29===(0,u.hexToBytes)(e).length,header:/^[e-f]|[E-F]/}];function w(e){var t;if(l.RustModule.WalletV4.ByronAddress.is_valid(e))return l.RustModule.WalletV4.ByronAddress.from_base58(e).to_address();const a=e=>{const t=n()(f).call(f,(t=>t.header.test(e)));if(t){if(t.parse)return t.parse(e);if(t.validate(e))try{return l.RustModule.WalletV4.Address.from_hex(e)}catch{}}};return/^[a-fA-F0-9]+$/.test(e)?a(e):null!==(t=(0,u.maybe)(h(e),a))&&void 0!==t?t:void 0}function m(e){if(l.RustModule.WalletV4.ByronAddress.from_address(e))return null;{const t=l.RustModule.WalletV4.BaseAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.PointerAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.EnterpriseAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}{const t=l.RustModule.WalletV4.RewardAddress.from_address(e);if(t)return t.payment_cred().to_keyhash()}throw new Error("getCardanoSpendingKeyHash unknown address type")}function y(e,t){try{if((0,d.isCardanoHaskell)(t)){if(l.RustModule.WalletV4.ByronAddress.is_valid(e))return e;const t=l.RustModule.WalletV4.Address.from_hex(e),a=l.RustModule.WalletV4.ByronAddress.from_address(t);return null==a?t.to_bech32():a.to_base58()}throw new Error(`addressToDisplayString not implemented for network ${t.NetworkId}`)}catch(t){throw new Error("addressToDisplayString failed to parse address type "+e)}}function x(e){var t,a;return null!==(t=null===(a=l.RustModule.WalletV4.ByronAddress.from_address(e))||void 0===a?void 0:a.to_base58())&&void 0!==t?t:e.to_hex()}function _(e){var t,a;return null!==(t=null===(a=l.RustModule.WalletV4.RewardAddress.from_address(l.RustModule.WalletV4.Address.from_hex(e)))||void 0===a?void 0:a.payment_cred())&&void 0!==t?t:(0,u.fail)("unwrapStakingKey staking key invalid")}function v(e){return e===l.RustModule.WalletV4.CertificateKind.VoteDelegation||e===l.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation||e===l.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation||e===l.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation}},84174:(e,t,a)=>{"use strict";a.d(t,{networks:()=>T,listRelevantNetworksForEnvironment:()=>C,isTestnet:()=>I,isCardanoHaskell:()=>k,getCardanoHaskellBaseConfig:()=>D,cardanoHaskellConfigCombine:()=>S,getCardanoHaskellBaseConfigCombined:()=>M,defaultAssets:()=>R,getNetworkById:()=>B});var r,n,s=a(94473),o=a.n(s),i=a(86902),l=a.n(i),d=a(80426),c=a.n(d),u=a(51942),p=a.n(u),g=a(32366),h=a.n(g),f=a(59340),w=a.n(f),m=a(2991),y=a.n(m),x=a(56474),_=a.n(x),v=a(66905),A=a(75941),b=a(38079);a(90649);const E=_()({Haskell:0}),T=_()({CardanoMainnet:{NetworkId:0,NetworkName:"Cardano Mainnet",NetworkFeatureName:"mainnet",Backend:{BackendService:"https://api.yoroiwallet.com",TokenInfoService:"https://cdn.yoroiwallet.com",BackendServiceZero:"https://zero.yoroiwallet.com"},BaseConfig:[_()({StartAt:0,ChainNetworkId:"1",ByronNetworkId:764824073,GenesisDate:"1506203091000",SlotsPerEpoch:21600,SlotDuration:20}),_()({StartAt:208,SlotsPerEpoch:432e3,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},MinimumUtxoVal:"1000000",CoinsPerUtxoWord:"34482",PoolDeposit:"500000000",KeyDeposit:"2000000"}),_()({CoinsPerUtxoByte:"4310"})],CoinType:v.M8.CARDANO,Fork:E.Haskell},CardanoPreprodTestnet:{NetworkId:250,NetworkName:"Cardano Preprod Testnet",NetworkFeatureName:"preprod",Backend:{BackendService:"https://preprod-backend.yoroiwallet.com",TokenInfoService:"https://stage-cdn.yoroiwallet.com",BackendServiceZero:"https://yoroi-backend-zero-preprod-prod.emurgornd.com"},BaseConfig:[_()({StartAt:0,ChainNetworkId:"0",ByronNetworkId:1,GenesisDate:"1654041600000",SlotsPerEpoch:21600,SlotDuration:20}),_()({StartAt:0,SlotsPerEpoch:432e3,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},CoinsPerUtxoWord:"34482",MinimumUtxoVal:"1000000",PoolDeposit:"500000000",KeyDeposit:"2000000"}),_()({CoinsPerUtxoByte:"4310"})],CoinType:v.M8.CARDANO,Fork:E.Haskell},CardanoPreviewTestnet:{NetworkId:350,NetworkName:"Cardano Preview Testnet",NetworkFeatureName:"preview",Backend:{BackendService:"https://preview-backend.emurgornd.com",TokenInfoService:"https://stage-cdn.yoroiwallet.com",BackendServiceZero:"https://yoroi-backend-zero-preview.emurgornd.com"},BaseConfig:[_()({StartAt:0,ChainNetworkId:"0",ByronNetworkId:2,GenesisDate:"1666656000000",SlotsPerEpoch:21600,SlotDuration:20}),_()({StartAt:0,SlotsPerEpoch:86400,SlotDuration:1,PerEpochPercentageReward:69344,LinearFee:{coefficient:"44",constant:"155381"},CoinsPerUtxoWord:"34482",MinimumUtxoVal:"1000000",PoolDeposit:"500000000",KeyDeposit:"2000000"}),_()({CoinsPerUtxoByte:"4310"})],CoinType:v.M8.CARDANO,Fork:E.Haskell}});function C(){const e=A.Z.isProduction()&&!A.Z.isNightly()?["CardanoMainnet","CardanoPreprodTestnet"]:["CardanoMainnet","CardanoPreprodTestnet","CardanoPreviewTestnet"];return y()(e).call(e,(e=>({key:e,networkId:T[e].NetworkId})))}function I(e){return e.NetworkId!==T.CardanoMainnet.NetworkId}function k(e){return e.CoinType===v.M8.CARDANO&&e.Fork===E.Haskell}function D(e){if(!k(e))throw new Error(`Incorrect network type ${w()(e)}`);return e.BaseConfig}function S(e){return h()(e).call(e,((e,t)=>p()(e,t)),{})}function M(e){return S(D(e))}const R=c()(r=y()(n=l()(T)).call(n,(e=>T[e]))).call(r,(e=>{if(k(e))return[{NetworkId:e.NetworkId,Identifier:b.hd.Cardano,IsDefault:!0,IsNFT:!1,Metadata:{type:"Cardano",policyId:b.hd.Cardano,assetName:b.hd.Cardano,ticker:e===T.CardanoPreprodTestnet||e===T.CardanoPreviewTestnet?"TADA":"ADA",logo:null,longName:null,numberOfDecimals:6}}];throw new Error(`Missing default asset for network type ${w()(e)}`)}));function B(e){var t;const a=o()(t=l()(T)).call(t,(t=>T[t].NetworkId===e));if(!a)throw new Error("network not found by id: "+e);return T[a]}},70184:(e,t,a)=>{"use strict";a.d(t,{Fb:()=>_,od:()=>M,Qo:()=>R});var r=a(86902),n=a.n(r),s=a(78914),o=a.n(s),i=(a(36384),a(59340),a(10062),a(94473)),l=a.n(i),d=a(2991),c=a.n(d),u=a(47302),p=a.n(u),g=a(1499),h=a(68469),f=(a(34786),a(86335)),w=a(95667),m=(a(52367),a(66905)),y=a(87315),x=a(90649);function _(e){var t,a,r,n,s,o;const i=e.signRequest.unsignedTx.build_tx(),d=i.body(),u=f.RustModule.WasmScope((e=>e.WalletV4.has_transaction_set_tag(i.to_bytes())));if(u===f.RustModule.WalletV4.TransactionSetsState.MixedSets)throw new Error("Transaction with mixed sets cannot be signed by Ledger");const m=u===f.RustModule.WalletV4.TransactionSetsState.AllSetsHaveTag,y=function(e){var t;for(const t of e)(0,g.sV)(t.addressing);return p()(t=c()(e).call(e,(e=>({txHashHex:e.tx_hash,outputIndex:e.tx_index,path:e.addressing.path})))).call(t,v)}(e.signRequest.senderUtxos),_=function(e){const t=[];for(const s of(0,x.iterateLenGet)(e.txOutputs)){var a,r,n;const o=s.address(),i=(0,w.toHexOrBase58)(o),d=null!==(a=null===(r=s.data_hash())||void 0===r?void 0:r.to_hex())&&void 0!==a?a:null,c=l()(n=e.changeAddrs).call(n,(e=>i===e.address));if(null!=c){(0,g.sV)(c.addressing);const a=S({networkId:e.networkId,address:o,path:c.addressing.path,addressingMap:e.addressingMap});t.push({amount:s.amount().coin().to_str(),tokenBundle:A(s.amount().multiasset()),destination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:a},datumHashHex:d})}else t.push({amount:s.amount().coin().to_str(),tokenBundle:A(s.amount().multiasset()),destination:{type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:o.to_hex()}},datumHashHex:d})}return t}({networkId:e.networkId,txOutputs:d.outputs(),changeAddrs:e.signRequest.changeAddr,addressingMap:e.addressingMap}),b=d.withdrawals(),T=d.certs(),C=[];null!=b&&b.len()>0&&C.push(...E(b,e.addressingMap));const I=[];let k;if(null!=T&&T.len()>0&&I.push(...D(e.networkId,T,e.addressingMap)),e.signRequest.ledgerNanoCatalystRegistrationTxSignData){const{votingPublicKey:t,stakingKeyPath:a,nonce:r,paymentKeyPath:n}=e.signRequest.ledgerNanoCatalystRegistrationTxSignData;k=e.cip36?{type:h.TxAuxiliaryDataType.CIP36_REGISTRATION,params:{format:h.CIP36VoteRegistrationFormat.CIP_36,delegations:[{type:h.CIP36VoteDelegationType.KEY,voteKeyHex:t.replace(/^0x/,""),weight:1}],stakingPath:a,paymentDestination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:n,stakingPath:a}}},nonce:r,votingPurpose:0}}:{type:h.TxAuxiliaryDataType.CIP36_REGISTRATION,params:{format:h.CIP36VoteRegistrationFormat.CIP_15,voteKeyHex:t.replace(/^0x/,""),stakingPath:a,paymentDestination:{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:n,stakingPath:a}}},nonce:r}}}else null!=e.signRequest.metadata&&(k={type:h.TxAuxiliaryDataType.ARBITRARY_HASH,params:{hashHex:f.RustModule.WalletV4.hash_auxiliary_data(e.signRequest.metadata).to_hex()}});return{signingMode:h.TransactionSigningMode.ORDINARY_TRANSACTION,tx:{inputs:y,outputs:_,ttl:null!==(t=null===(a=d.ttl_bignum())||void 0===a?void 0:a.to_str())&&void 0!==t?t:null,validityIntervalStart:null!==(r=null===(n=d.validity_start_interval_bignum())||void 0===n?void 0:n.to_str())&&void 0!==r?r:null,fee:d.fee().to_str(),network:{networkId:e.networkId,protocolMagic:e.byronNetworkMagic},withdrawals:0===C.length?null:C,certificates:0===I.length?null:I,auxiliaryData:k,scriptDataHashHex:null!==(s=null===(o=d.script_data_hash())||void 0===o?void 0:o.to_hex())&&void 0!==s?s:null},additionalWitnessPaths:[],options:{tagCborSets:m}}}function v(e,t){return e.txHashHex!==t.txHashHex?e.txHashHex<t.txHashHex?-1:1:e.outputIndex-t.outputIndex}function A(e){var t;if(null==e)return null;const a=c()(t=(0,x.iterateLenGetMap)(e)).call(t,(([e,t])=>{var a;const r=c()(a=(0,x.iterateLenGetMap)(t).nonNullValue()).call(a,(([e,t])=>({assetNameHex:(0,x.bytesToHex)(e.name()),amount:t.to_str()}))).toArray();return p()(r).call(r,((e,t)=>b(e.assetNameHex,t.assetNameHex))),{policyIdHex:e.to_hex(),tokens:r}})).toArray();return p()(a).call(a,((e,t)=>b(e.policyIdHex,t.policyIdHex))),a}function b(e,t){return e.length<t.length?-1:e.length>t.length?1:e<t?-1:e>t?1:0}function E(e,t){const a=[];for(const[r,n]of(0,x.iterateLenGetMap)(e).nonNullValue()){const e=r.to_address().to_hex(),s=t(e);let o;if(null!=s)o={type:h.CredentialParamsType.KEY_PATH,keyPath:s.path};else{const e=r.payment_cred(),t=e.to_keyhash(),a=e.to_scripthash();t?o={type:h.CredentialParamsType.KEY_HASH,keyHashHex:t.to_hex()}:a&&(o={type:h.CredentialParamsType.SCRIPT_HASH,scriptHashHex:a.to_hex()})}if(null==o)throw new Error("Failed to resolve credential type for reward address: "+e);a.push({amount:n.to_str(),stakeCredential:o})}return a}function T(e){const t=e.anchor();return null==t?void 0:{url:t.url().url(),hashHex:t.anchor_data_hash().to_hex()}}function C(e,t){return{type:h.CredentialParamsType.KEY_PATH,keyPath:t(e.stake_credential())}}function I(e,t){return{type:h.CredentialParamsType.KEY_PATH,keyPath:t(e.voting_credential())}}function k(e){const t=e.drep();switch(t.kind()){case f.RustModule.WalletV4.DRepKind.KeyHash:return{type:h.DRepParamsType.KEY_HASH,keyHashHex:(0,x.forceNonNull)(t.to_key_hash()).to_hex()};case f.RustModule.WalletV4.DRepKind.ScriptHash:return{type:h.DRepParamsType.SCRIPT_HASH,scriptHashHex:(0,x.forceNonNull)(t.to_script_hash()).to_hex()};case f.RustModule.WalletV4.DRepKind.AlwaysAbstain:return{type:h.DRepParamsType.ABSTAIN};case f.RustModule.WalletV4.DRepKind.AlwaysNoConfidence:return{type:h.DRepParamsType.NO_CONFIDENCE};default:throw new Error("Ledger: Unsupported dRep kind: "+t.to_hex())}}function D(e,t,a){var r;const n=t=>{const r=f.RustModule.WalletV4.RewardAddress.new(e,t).to_address().to_hex(),n=a(r);if(null==n)throw new Error(`getPath Ledger only supports certificates from own address ${r}`);return n.path};return c()(r=(0,x.iterateLenGet)(t)).call(r,(e=>function(e,t){const a=e.kind();switch(a){case f.RustModule.WalletV4.CertificateKind.StakeRegistration:return function(e,t){const a=C(e,t),r=e.coin();return null==r?{type:h.CertificateType.STAKE_REGISTRATION,params:{stakeCredential:a}}:{type:h.CertificateType.STAKE_REGISTRATION_CONWAY,params:{stakeCredential:a,deposit:r.to_str()}}}((0,x.forceNonNull)(e.as_stake_registration()),t);case f.RustModule.WalletV4.CertificateKind.StakeDeregistration:return function(e,t){const a=C(e,t),r=e.coin();return null==r?{type:h.CertificateType.STAKE_DEREGISTRATION,params:{stakeCredential:a}}:{type:h.CertificateType.STAKE_DEREGISTRATION_CONWAY,params:{stakeCredential:a,deposit:r.to_str()}}}((0,x.forceNonNull)(e.as_stake_deregistration()),t);case f.RustModule.WalletV4.CertificateKind.StakeDelegation:return function(e,t){return{type:h.CertificateType.STAKE_DELEGATION,params:{stakeCredential:C(e,t),poolKeyHashHex:e.pool_keyhash().to_hex()}}}((0,x.forceNonNull)(e.as_stake_delegation()),t);case f.RustModule.WalletV4.CertificateKind.VoteDelegation:return function(e,t){return{type:h.CertificateType.VOTE_DELEGATION,params:{stakeCredential:C(e,t),dRep:k(e)}}}((0,x.forceNonNull)(e.as_vote_delegation()),t);case f.RustModule.WalletV4.CertificateKind.DRepRegistration:{const a=(0,x.forceNonNull)(e.as_drep_registration());return{type:h.CertificateType.DREP_REGISTRATION,params:{dRepCredential:I(a,t),anchor:T(a),deposit:a.coin().to_str()}}}case f.RustModule.WalletV4.CertificateKind.DRepUpdate:{const a=(0,x.forceNonNull)(e.as_drep_update());return{type:h.CertificateType.DREP_UPDATE,params:{dRepCredential:I(a,t),anchor:T(a)}}}case f.RustModule.WalletV4.CertificateKind.DRepDeregistration:{const a=(0,x.forceNonNull)(e.as_drep_deregistration());return{type:h.CertificateType.DREP_DEREGISTRATION,params:{dRepCredential:I(a,t),deposit:a.coin().to_str()}}}case f.RustModule.WalletV4.CertificateKind.StakeAndVoteDelegation:case f.RustModule.WalletV4.CertificateKind.StakeRegistrationAndDelegation:case f.RustModule.WalletV4.CertificateKind.VoteRegistrationAndDelegation:case f.RustModule.WalletV4.CertificateKind.StakeVoteRegistrationAndDelegation:throw new Error(`formatLedgerCertificates Ledger doesn't support combinatory certificate types (${a}), use multiple simple certificates instead! `+e.to_hex());default:throw new Error("formatLedgerCertificates Ledger doesn't support this certificate type! "+e.to_hex())}}(e,n))).toArray()}function S(e){if(f.RustModule.WalletV4.ByronAddress.from_address(e.address))return{type:h.AddressType.BYRON,params:{spendingPath:e.path}};{const r=f.RustModule.WalletV4.BaseAddress.from_address(e.address);if(r){const n=f.RustModule.WalletV4.RewardAddress.new(e.networkId,r.stake_cred()).to_address().to_hex(),s=e.addressingMap(n);if(null==s){var t,a;const n=r.stake_cred(),s=null!==(t=n.to_keyhash())&&void 0!==t?t:n.to_scripthash(),o=null!==(a=null==s?void 0:s.to_hex())&&void 0!==a?a:(0,x.fail)("toLedgerAddressParameters unknown hash type");return{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:e.path,stakingKeyHashHex:o}}}return{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:e.path,stakingPath:s.path}}}}{const t=f.RustModule.WalletV4.PointerAddress.from_address(e.address);if(t){const a=t.stake_pointer();return{type:h.AddressType.POINTER_KEY,params:{spendingPath:e.path,stakingBlockchainPointer:{blockIndex:a.slot(),txIndex:a.tx_index(),certificateIndex:a.cert_index()}}}}}if(f.RustModule.WalletV4.EnterpriseAddress.from_address(e.address))return{type:h.AddressType.ENTERPRISE_KEY,params:{spendingPath:e.path}};if(f.RustModule.WalletV4.RewardAddress.from_address(e.address))return{type:h.AddressType.REWARD_KEY,params:{stakingPath:e.path}};throw new Error("toLedgerAddressParameters unknown address type")}function M(e,t,a,r,s,i=[]){var d,u,p,g,w,y,_,v,b,T,C,I,k;const S=f.RustModule.WasmScope((t=>t.WalletV4.has_transaction_set_tag(t.WalletV4.FixedTransaction.new_from_body_bytes((0,x.hexToBytes)(e)).to_bytes())));if(S===f.RustModule.WalletV4.TransactionSetsState.MixedSets)throw new Error("Transaction with mixed sets cannot be signed by Ledger");const M=S===f.RustModule.WalletV4.TransactionSetsState.AllSetsHaveTag,R=f.RustModule.WalletV4.TransactionBody.from_hex(e);function B(e){var t;return c()(t=(0,x.iterateLenGet)(e)).call(t,(e=>{var t;const a=e.transaction_id().to_hex(),r=e.index(),n=l()(s).call(s,(e=>e.tx_hash===a&&e.tx_index===r)),o=null!==(t=null==n?void 0:n.addressing.path)&&void 0!==t?t:null;return{txHashHex:a,outputIndex:r,path:o}})).toArray()}function W(e){const a=e.serialization_format()===f.RustModule.WalletV4.CborContainerType.Map,n=e.address();let s;const o=f.RustModule.WalletV4.ByronAddress.from_address(n),i=f.RustModule.WalletV4.PointerAddress.from_address(n);if((o||i)&&(s={type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:n.to_hex()}}),f.RustModule.WalletV4.EnterpriseAddress.from_address(n)){const e=r(n.to_hex());s=e?{type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.ENTERPRISE_KEY,params:{spendingPath:e}}}:{type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:n.to_hex()}}}const l=f.RustModule.WalletV4.BaseAddress.from_address(n);if(l){const e=f.RustModule.WalletV4.EnterpriseAddress.new(t,l.payment_cred()).to_address().to_hex(),a=r(e);if(a){const e=l.stake_cred(),n=f.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),o=r(n);if(o)s={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:a,stakingPath:o}}};else{const t=e.to_keyhash(),r=e.to_scripthash();if(t)s={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:a,stakingKeyHashHex:t.to_hex()}}};else{if(!r)throw new Error("unexpected stake credential type in base address");s={type:h.TxOutputDestinationType.DEVICE_OWNED,params:{type:h.AddressType.BASE_PAYMENT_KEY_STAKE_SCRIPT,params:{spendingPath:a,stakingScriptHashHex:r.to_hex()}}}}}}else s={type:h.TxOutputDestinationType.THIRD_PARTY,params:{addressHex:n.to_hex()}}}if(!s)throw new Error("not expecting to pay to reward address");const d=e.amount().coin().to_str(),c=A(e.amount().multiasset()),u=e.data_hash(),p=e.plutus_data(),g=e.script_ref();if(a||g||p){let e=null;return p?e={type:h.DatumType.INLINE,datumHex:p.to_hex()}:u&&(e={type:h.DatumType.HASH,datumHashHex:u.to_hex()}),{format:h.TxOutputFormat.MAP_BABBAGE,amount:d,destination:s,tokenBundle:c,datum:e,referenceScriptHex:g?g.to_hex():null}}return{format:h.TxOutputFormat.ARRAY_LEGACY,amount:d,destination:s,tokenBundle:c,datumHashHex:u?u.to_hex():null}}const P=c()(d=(0,x.iterateLenGet)(R.outputs())).call(d,W).toArray(),N=[],F=[];function O(e){const t=r(e);if(t)return{path:t}}f.RustModule.WasmScope((e=>{var a,n;function s(a){const n=e.WalletV4.Ed25519KeyHash.from_hex(a),s=e.WalletV4.EnterpriseAddress.new(t,e.WalletV4.Credential.from_keyhash(n)).to_address().to_hex(),o=e.WalletV4.RewardAddress.new(t,e.WalletV4.Credential.from_keyhash(n)).to_address().to_hex();return r(s)||r(o)}o()(a=c()(n=(0,x.iterateLenGet)(R.required_signers())).call(n,(e=>e.to_hex())).unique()).call(a,(e=>{const t=s(e);null!=t?(F.push({type:h.TxRequiredSignerType.PATH,path:t}),N.push(t)):F.push({type:h.TxRequiredSignerType.HASH,hashHex:e})}));for(const e of i||[]){const t=s(e);null!=t&&N.push(t)}}));let L=null;const H=R.certs();H&&(L=D(t,H,O));let V=null;const U=R.withdrawals();U&&(V=E(U,O));let G=null;const j=R.auxiliary_data_hash();j&&(G={type:h.TxAuxiliaryDataType.ARBITRARY_HASH,params:{hashHex:j.to_hex()}});let Z=null;const z=R.collateral();z&&(Z=B(z));const K=(0,x.maybe)(R.collateral_return(),W);let Y=null;const q=R.reference_inputs();q&&(Y=B(q));let $=null;const J=R.voting_procedures();if(J){$=[];const e=J.get_voters();for(let t=0;t<e.len();t++){const a=e.get(t);if(!a)throw new Error("unexpectedly missing voter");let r;const n=a.to_drep_credential();if(n){n.to_keyhash()&&(r={type:h.VoterType.DREP_KEY_PATH,keyPath:[1852+m.yK,1815+m.yK,0+m.yK,3,0]});const e=n.to_scripthash();e&&(r={type:h.VoterType.DREP_SCRIPT_HASH,scriptHashHex:e.to_hex()})}const s=a.to_stake_pool_key_hash();if(s&&(r={type:h.VoterType.STAKE_POOL_KEY_HASH,keyHashHex:s.to_hex()}),!r)throw new Error("unexpected voter");$.push({voter:r,votes:[]});const o=J.get_governance_action_ids_by_voter(a);for(let e=0;e<o.len();e++){const t=o.get(e);if(!t)throw new Error("unexpectedly missing gov action id");const r=J.get(a,t);if(!r)throw new Error("unexpectedly missing voting procedure");const n=r.vote_kind();let s;if(0===n)s=h.VoteOption.NO;else if(1===n)s=h.VoteOption.YES;else{if(2!==n)throw new Error(`unexpected vote kind ${n}`);s=h.VoteOption.ABSTAIN}const i=r.anchor();$[$.length-1].votes.push({govActionId:{txHashHex:t.transaction_id().to_hex(),govActionIndex:t.index()},votingProcedure:{vote:s,anchor:i?{url:i.url().url(),hashHex:i.anchor_data_hash().to_hex()}:null}})}}}let X=h.TransactionSigningMode.ORDINARY_TRANSACTION;return Z&&(X=h.TransactionSigningMode.PLUTUS_TRANSACTION),{signingMode:X,tx:{network:{networkId:t,protocolMagic:a},inputs:B(R.inputs()),outputs:P,fee:R.fee().to_str(),ttl:null!==(u=null===(p=R.ttl_bignum())||void 0===p?void 0:p.to_str())&&void 0!==u?u:null,validityIntervalStart:null!==(g=null===(w=R.validity_start_interval_bignum())||void 0===w?void 0:w.to_str())&&void 0!==g?g:null,certificates:L,withdrawals:V,auxiliaryData:G,mint:null!==(y=null===(_=JSON.parse(null!==(v=null===(b=R.mint())||void 0===b?void 0:b.to_json())&&void 0!==v?v:"null"))||void 0===_?void 0:c()(_).call(_,(([e,t])=>{var a;return{policyIdHex:e,tokens:c()(a=n()(t)).call(a,(e=>({assetNameHex:e,amount:t[e]})))}})))&&void 0!==y?y:null,scriptDataHashHex:null!==(T=null===(C=R.script_data_hash())||void 0===C?void 0:C.to_hex())&&void 0!==T?T:null,collateralInputs:Z,requiredSigners:F.length>0?F:null,includeNetworkId:null!=R.network_id(),collateralOutput:K,totalCollateral:null!==(I=null===(k=R.total_collateral())||void 0===k?void 0:k.to_str())&&void 0!==I?I:null,referenceInputs:Y,votingProcedures:$},additionalWitnessPaths:N,options:{tagCborSets:M}}}function R(e,t,a){const r=f.RustModule.WalletV4.FixedTransaction.from_hex(e),n=a.addressing.startLevel+a.addressing.path.length-1;for(const e of t){const t={path:e.path,startLevel:1};(0,g.sV)(t);const s=(0,y.c)({addressing:t,startingFrom:{level:n,key:a.key}}),o=f.RustModule.WalletV4.Vkeywitness.new(f.RustModule.WalletV4.Vkey.new(s.to_raw_key()),f.RustModule.WalletV4.Ed25519Signature.from_hex(e.witnessSignatureHex));r.add_vkey_witness(o)}return r.to_hex()}a(27649)},84184:(e,t,a)=>{"use strict";a.d(t,{T$:()=>te,fi:()=>ne,u2:()=>se,Ff:()=>oe});var r=a(94198),n=a.n(r),s=a(86902),o=a.n(s),i=(a(51942),a(89400)),l=a.n(i),d=a(77149),c=a.n(d),u=a(93476),p=a.n(u),g=a(78580),h=a.n(g),f=a(32366),w=a.n(f),m=a(59340),y=a.n(m),x=a(20116),_=a.n(x),v=a(36384),A=a.n(v),b=a(56474),E=a.n(b),T=a(2991),C=a.n(T),I=a(69301),k=a.n(I),D=a(66419),S=a.n(D),M=a(39392),R=a.n(M),B=a(905),W=a(21131),P=a(86335),N=a(52367),F=a(95667),O=a(55343),L=a(38079),H=a(27649),V=a(90649),U=(a(84174),a(4158),a(94346)),G=a(34704),j=a(71265),Z=a(27423),z=a(17462),K=a.n(z),Y=a(87315),q=(a(62310),a(38441),a(3577)),$=a(44415),J=a(75723),X=a(48764).Buffer;const Q="a30098a61a000189b41901a401011903e818ad00011903e819ea350401192baf18201a000312591920a404193e801864193e801864193e801864193e801864193e801864193e80186418641864193e8018641a000170a718201a00020782182019f016041a0001194a18b2000119568718201a0001643519030104021a00014f581a00037c71187a0001011903e819a7a90402195fe419733a1826011a000db464196a8f0119ca3f19022e011999101903e819ecb2011a00022a4718201a000144ce1820193bc318201a0001291101193371041956540a197147184a01197147184a0119a9151902280119aecd19021d0119843c18201a00010a9618201a00011aaa1820191c4b1820191cdf1820192d1a18201a00014f581a00037c71187a0001011a0001614219020700011a000122c118201a00014f581a00037c71187a0001011a00014f581a00037c71187a0001011a0004213c19583c041a00163cad19fc3604194ff30104001a00022aa818201a000189b41901a401011a00013eff182019e86a1820194eae182019600c1820195108182019654d182019602f18201a032e93af1937fd0a0198af1a000189b41901a401011903e818ad00011903e819ea350401192baf18201a000312591920a404193e801864193e801864193e801864193e801864193e801864193e80186418641864193e8018641a000170a718201a00020782182019f016041a0001194a18b2000119568718201a0001643519030104021a00014f581a00037c71187a0001011903e819a7a90402195fe419733a1826011a000db464196a8f0119ca3f19022e011999101903e819ecb2011a00022a4718201a000144ce1820193bc318201a0001291101193371041956540a197147184a01197147184a0119a9151902280119aecd19021d0119843c18201a00010a9618201a00011aaa1820191c4b1820191cdf1820192d1a18201a00014f581a00037c71187a0001011a0001614219020700011a000122c118201a00014f581a00037c71187a0001011a00014f581a00037c71187a0001011a000e94721a0003414000021a0004213c19583c041a00163cad19fc3604194ff30104001a00022aa818201a000189b41901a401011a00013eff182019e86a1820194eae182019600c1820195108182019654d182019602f18201a0290f1e70a1a032e93af1937fd0a1a0298e40b1966c40a029901291a000189b41901a401011903e818ad00011903e819ea350401192baf18201a000312591920a404193e801864193e801864193e801864193e801864193e801864193e80186418641864193e8018641a000170a718201a00020782182019f016041a0001194a18b2000119568718201a0001643519030104021a00014f581a0001e143191c893903831906b419022518391a00014f580001011903e819a7a90402195fe419733a1826011a000db464196a8f0119ca3f19022e011999101903e819ecb2011a00022a4718201a000144ce1820193bc318201a0001291101193371041956540a197147184a01197147184a0119a9151902280119aecd19021d0119843c18201a00010a9618201a00011aaa1820191c4b1820191cdf1820192d1a18201a00014f581a0001e143191c893903831906b419022518391a00014f5800011a0001614219020700011a000122c118201a00014f581a0001e143191c893903831906b419022518391a00014f580001011a00014f581a0001e143191c893903831906b419022518391a00014f5800011a000e94721a0003414000021a0004213c19583c041a00163cad19fc3604194ff30104001a00022aa818201a000189b41901a401011a00013eff182019e86a1820194eae182019600c1820195108182019654d182019602f18201a0290f1e70a1a032e93af1937fd0a1a0298e40b1966c40a193e801864193e8018641a000eaf1f121a002a6e06061a0006be98011a0321aac7190eac121a00041699121a048e466e1922a4121a0327ec9a121a001e743c18241a0031410f0c1a000dbf9e011a09f2f6d31910d318241a0004578218241a096e44021967b518241a0473cee818241a13e62472011a0f23d40118481a00212c5618481a0022814619fc3b041a00032b00192076041a0013be0419702c183f00011a000f59d919aa6718fb00011a000187551902d61902cf00011a000187551902d61902cf00011a000187551902d61902cf00011a0001a5661902a800011a00017468011a00044a391949a000011a0002bfe2189f01011a00026b371922ee00011a00026e9219226d00011a0001a3e2190ce2011a00019e4919028f011a001df8bb195fc803",ee=7200;function te(e,t,a,r,n,s){var o;const i=new(R());for(const e of t)i.set({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets},e);const l=function(e,t,a,r,n,s){var o;const i=w()(o=C()(t).call(t,(e=>new B.Z(e.amount)))).call(o,((e,t)=>e.plus(t)),new B.Z(0));if(i.isZero())throw new W.NotEnoughMoneyToSendError;const l=P.RustModule.WalletV4TxBuilder(r);l.set_ttl(a.plus(ee).toNumber());for(const e of t)if(re(l,void 0,e,!1,s)===ae.OVERFLOW)throw new W.AssetOverflowError;let d;void 0!==n&&l.set_auxiliary_data(n);try{d=l.min_fee().to_str()}catch(e){if(/Maximum transaction size of \d+ exceeded\./.test(e))throw new W.OversizedTransactionError;throw e}if(i.lt(d))throw new W.NotEnoughMoneyToSendError;{const t=(0,F.normalizeToAddress)(e.address);if(null==t)throw new Error("sendAllUnsignedTxFromUtxo receiver not a valid Shelley address");let a=!1;try{a=l.add_change_if_needed(t)}catch(e){var c;if(!h()(c=String(e)).call(c,"Not enough ADA"))throw console.error("Failed to construct send-all output!",e),e}if(!a)throw new W.NotEnoughMoneyToSendError}const u=(()=>{if(null==e.addressing)return[];const{addressing:t}=e;return[{addressing:t,address:e.address,values:(0,H.$Z)(l.get_explicit_output(),{defaultNetworkId:r.networkId,defaultIdentifier:L.hd.Cardano})}]})();return{senderUtxos:t,txBuilder:l,changeAddr:u}}(e,S()(k()(i).call(i)),a,r,n,s);return{senderUtxos:C()(o=l.senderUtxos).call(o,(e=>{const t=i.get(e);if(null==t)throw new Error("sendAllUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:l.txBuilder,changeAddr:l.changeAddr,certificates:[]}}const ae=E()({VALID:0,TOO_SMALL:1,OVERFLOW:2,NO_NEED:3});function re(e,t,a,r,n,s){const o=(0,F.normalizeToAddress)(a.receiver);if(null==o)throw new Error("addUtxoInput input not a valid Shelley address");const i=(u=a,P.RustModule.WalletV4.TransactionInput.new(P.RustModule.WalletV4.TransactionHash.from_hex(u.tx_hash),u.tx_index)),l=(0,H.Dw)(a),d=()=>{const t=e.get_explicit_input().checked_add(e.get_implicit_input());try{t.checked_add(l)}catch(e){return ae.OVERFLOW}return ae.VALID},c=(()=>{var s,c;if(null==t)return d();const u={defaultNetworkId:n,defaultIdentifier:L.hd.Cardano},p=new(A())(C()(s=a.assets).call(s,(e=>e.assetId))),g=(0,H.$Z)(t.value,u),h=_()(c=g.nonDefaultEntries()).call(c,(e=>p.has(e.identifier)));return g.getDefaultEntry().amount.gt(0)&&new B.Z(a.amount).gt(0)&&h.push(g.getDefaultEntry()),1===h.length&&h[0].identifier===u.defaultIdentifier&&r&&new B.Z(e.fee_for_input(o,i,l).to_str()).gt(a.amount)?ae.TOO_SMALL:d()})();var u;if(c!==ae.VALID)return c;if(null==s)(0,V.logErr)((()=>{e.add_regular_input(o,i,l)}),"Failed to add a regular input");else if(null!=s.nativeScript){const t=(0,V.logErr)((()=>P.RustModule.WalletV4.NativeScript.from_bytes((0,V.hexToBytes)(s.nativeScript))),`Failed to parse witness.nativeScript: ${y()(s)}`);(0,V.logErr)((()=>{e.add_native_script_input(t,i,l)}),"Failed to add a native script input")}else if(null!=s.plutusScript){const t=(0,V.logErr)((()=>P.RustModule.WalletV4.PlutusScript.from_bytes((0,V.hexToBytes)(s.plutusScript))),`Failed to parse witness.plutusScript: ${y()(s)}`),a=(0,V.logErr)((()=>P.RustModule.WalletV4.PlutusData.from_bytes((0,V.hexToBytes)(s.datum))),`Failed to parse witness.datum: ${y()(s)}`),r=(0,V.logErr)((()=>P.RustModule.WalletV4.Redeemer.from_bytes((0,V.hexToBytes)(s.redeemer))),`Failed to parse witness.redeemer: ${y()(s)}`);(0,V.logErr)((()=>{e.add_plutus_script_input(P.RustModule.WalletV4.PlutusWitness.new(t,a,r),i,l)}),"Failed to add a plutus script input")}return ae.VALID}async function ne(e,t,a,r,n,s,o,i,d,u){var g;const f=new(R());for(const e of a)f.set({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets},e);const m=await async function(e,t,a,r,n,s,o,i,d,u){var g,f;await P.RustModule.load(),(0,U.setRuntime)(P.RustModule.CrossCsl.init);const m={networkId:n.networkId,linearFee:{coefficient:n.linearFeeCoefficient,constant:n.linearFeeConstant},coinsPerUtxoByte:n.coinsPerUtxoByte,poolDeposit:n.poolDeposit,keyDeposit:n.keyDeposit,maxValueSize:5e3,maxTxSize:16384,memPriceFrom:577,memPriceTo:1e3,stepPriceFrom:721,stepPriceTo:1e7},x=new G.UTxOSet(await p().all(C()(a).call(a,le))),v=await Z.TxBuilder.new(m),A=c()(e).call(e,(e=>null!=e.data&&null!=e.dataHash)),b=await Z.SendRequest.from(C()(e).call(e,(t=>{var a;const r=t.amount.getDefaultEntry().amount.toString(),n=_()(a=l()(t.amount)).call(a,(({identifier:t})=>t!==e[0].amount.defaults.defaultIdentifier));return{data:t.data,dataHash:t.dataHash,receiver:t.address,value:new G.Value(new G.Amount(r),G.NativeAssets.from(C()(n).call(n,(e=>{const[t,a]=e.identifier.split(".");return{asset:{policy:(0,V.hexToBytes)(t),name:(0,V.hexToBytes)(a)},amount:new G.Amount(e.amount.toString())}}))))}})));try{await v.withSendRequest(b)}catch(e){var E;if(e instanceof j.NotEnoughMoneyToSendError)throw new W.NotEnoughMoneyToSendError;if(e instanceof j.OverflowError)throw new W.AssetOverflowError;if(h()(E=String(e)).call(E,"less than the minimum UTXO value"))throw new W.CannotSendBelowMinimumValueError;throw e}if(d&&await v.setAuxiliaryData(d.to_bytes()),s.length>0){const e=w()(s).call(s,((e,t)=>(e.add(t),e)),P.RustModule.WalletV4.Certificates.new());await v.setCertificates(e.to_bytes())}if(o.length>0){const e=w()(o).call(o,((e,t)=>(e.insert(t.address,t.amount),e)),P.RustModule.WalletV4.Withdrawals.new());await v.setWithdrawals(e.to_bytes())}let T,I;if(await v.setTtl(r.plus(ee).toNumber()),null!=t){const e=t.addressing.startLevel;if(e<1||e>5)throw new Error("Invalid derivation level in change: "+e);T=await G.WalletAddress.from(t.address,U.WalletType.Shelley,{path:t.addressing.path,start:e})}A&&await v.calcScriptDataHash(Q);try{await v.selectInputsFrom(x)}catch(e){var k;if(e instanceof j.NotEnoughMoneyToSendError)throw new W.NotEnoughMoneyToSendError;if(e instanceof j.OverflowError)throw new W.AssetOverflowError;if(h()(k=String(e)).call(k,"less than the minimum UTXO value"))throw new W.CannotSendBelowMinimumValueError;throw e}await v.addChangeAndFee(T);try{I=await v.build()}catch(e){if(e instanceof j.NoOutputError)throw new W.NoOutputsError;throw e}const D=[],S=I.change;if(null!=S){const e=S.address.spendingKeyInfo;if(null==e)throw new Error("Missing spending key info in change: "+y()(S));D.push({address:S.address.hex,addressing:{path:e.path,startLevel:e.start},values:ie(S.value,u,L.hd.Cardano)})}const M=new(R())(C()(a).call(a,(e=>[e.utxo_id,e])));return{senderUtxos:_()(g=C()(f=I.inputs.asArray()).call(f,(e=>M.get(e.tx+e.index)))).call(g,Boolean),txBuilder:I.builder.wasm,changeAddr:D}}(e,t,S()(k()(f).call(f)),r,n,s,o,0,d,u);return{senderUtxos:C()(g=m.senderUtxos).call(g,(e=>{const t=f.get(e);if(null==t)throw new Error("newAdaUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:m.txBuilder,changeAddr:m.changeAddr,certificates:s}}async function se(e,t,a,r,s,i,d,c,u,g,f,w){var m;const x=e=>({amount:e.amount,receiver:e.receiver,tx_hash:e.tx_hash,tx_index:e.tx_index,utxo_id:e.utxo_id,assets:e.assets}),v=[],A=new(R()),b=new(R());for(const[e,t]of s){const a=x(e);v.push([a,t]),A.set(a,e)}for(const e of i)b.set(x(e),e);const E=await async function(e,t,a,r,s,i,d,c,u,g,f,w){var m,x,v,A;await P.RustModule.load(),(0,U.setRuntime)(P.RustModule.CrossCsl.init);const b={networkId:w,linearFee:{coefficient:f.linearFeeCoefficient,constant:f.linearFeeConstant},coinsPerUtxoByte:f.coinsPerUtxoByte,poolDeposit:f.poolDeposit,keyDeposit:f.keyDeposit,maxValueSize:5e3,maxTxSize:16384,memPriceFrom:577,memPriceTo:1e3,stepPriceFrom:721,stepPriceTo:1e7},E=new G.UTxOSet(await p().all(C()(i).call(i,le))),T=await Z.TxBuilder.new(b);await T.addRequiredInputs(await p().all(C()(s).call(s,(async([e,t])=>{let a;if(null==t)a=[void 0];else if(t.nativeScript)a=[{type:"native",nativeScript:t.nativeScript}];else{if(!t.plutusScript)throw new Error("unxpected witness value");a=[{type:"plutus",plutusScript:t.plutusScript,datum:t.datum,redeemer:t.redeemer}]}return[await le(e),...a]})))),null!=u?await T.setTtl(u):await T.setTtl(d.plus(ee).toNumber()),null!=c&&await T.setValidityStartInterval(c),null!=g&&await T.addRequiredSigners(g);const I=null!==(m=a.metadata)&&void 0!==m?m:{};if(o()(I).length>0){const e={};for(const t of o()(I))e[n()(t,10)]=I[t];await T.withMetadata(e)}a.nativeScripts&&await T.addNativeScripts(a.nativeScripts),await T.addMint(t);const k=await Z.SendRequest.from(C()(e).call(e,(t=>{var a;const r=t.amount.getDefaultEntry().amount.toString(),n=_()(a=l()(t.amount)).call(a,(({identifier:t})=>t!==e[0].amount.defaults.defaultIdentifier));return{receiver:t.address,value:new G.Value(new G.Amount(r),G.NativeAssets.from(C()(n).call(n,(e=>{const[t,a]=e.identifier.split(".");return{asset:{policy:(0,V.hexToBytes)(t),name:(0,V.hexToBytes)(a)},amount:new G.Amount(e.amount.toString())}}))))}})));try{await T.withSendRequest(k)}catch(e){var D;if(e instanceof j.NotEnoughMoneyToSendError)throw new W.NotEnoughMoneyToSendError;if(h()(D=String(e)).call(D,"less than the minimum UTXO value"))throw new W.CannotSendBelowMinimumValueError;throw e}let S;if(null!=r){const e=r.addressing.startLevel;if(e<1||e>5)throw new Error("Invalid derivation level in change: "+e);const t={path:r.addressing.path,start:e};S=await G.WalletAddress.from(r.address,U.WalletType.Shelley,t)}try{await T.selectInputsFrom(E)}catch(e){var M;if(e instanceof j.NotEnoughMoneyToSendError)throw new W.NotEnoughMoneyToSendError;if(e instanceof j.OverflowError)throw new W.AssetOverflowError;if(h()(M=String(e)).call(M,"less than the minimum UTXO value"))throw new W.CannotSendBelowMinimumValueError;throw e}await T.addChangeAndFee(S);const B=await T.build(),N=[],F=B.change;if(null!=F){const e=F.address.spendingKeyInfo;if(null==e)throw new Error("Missing spending key info in change: "+y()(F));N.push({address:F.address.hex,addressing:{path:e.path,startLevel:e.start},values:ie(null==F?void 0:F.value,w,L.hd.Cardano)})}const O=new(R())(C()(x=[...C()(s).call(s,(([e,t])=>e)),...i]).call(x,(e=>[e.utxo_id,e])));return{senderUtxos:_()(v=C()(A=B.inputs.asArray()).call(A,(e=>O.get(e.tx+e.index)))).call(v,Boolean),txBuilder:B.builder.wasm,changeAddr:N}}(e,t,a,r,v,S()(k()(b).call(b)),d,c,u,g,f,w);return{senderUtxos:C()(m=E.senderUtxos).call(m,(e=>{const t=A.get(e)||b.get(e);if(null==t)throw new Error("newAdaUnsignedTx utxo reference was changed. Should not happen");return t})),txBuilder:E.txBuilder,changeAddr:E.changeAddr,certificates:[]}}async function oe(e,t,a,r,n,s=[]){const o=(0,q.y9)(a);if(null==o)throw new Error("unexpected missing asGetSigningKey result");const i=await o.getSigningKey(),l=await o.normalizeKey({...i,password:r}),d=(0,q.Oq)(o);if(null==d)throw new Error("unexpected missing asGetAllAcccounting result");const c=await(0,$.o)({publicDeriver:d,password:r});return function(e,t,a,r,n,s,o=[]){var i,l,d;const c=new(A()),u=new(A()),p=[];function g(e,t){const a=(0,F.normalizeToAddress)(e);if(null==a)throw new Error("signTransaction utxo not a valid Shelley address");const r=(0,F.getCardanoSpendingKeyHash)(a),n=a.to_hex();if(null!==r){if(void 0===r)throw new Error("signTransaction cannot sign script inputs");{const e=r.to_hex();u.has(e)||(u.add(e),p.push(t))}}else c.has(n)||(c.add(n),p.push(t))}for(const t of e)g(t.receiver,t);for(const e of o)g(e.address,e);let h,f,w;if(t instanceof P.RustModule.WalletV4.Transaction)h=t.body(),w=t.witness_set(),f=P.RustModule.WalletV4.FixedTransaction.from_hex(t.to_hex()).transaction_hash();else if(t instanceof P.RustModule.WalletV4.TransactionBuilder){const e=t.build_tx();h=e.body(),w=e.witness_set(),f=P.RustModule.WalletV4.FixedTransaction.from_hex(e.to_hex()).transaction_hash()}else if(t instanceof P.RustModule.WalletV4.TransactionBody)h=t,f=P.RustModule.WalletV4.FixedTransaction.new_from_body_bytes(h.to_bytes()).transaction_hash();else{if(!(t instanceof X||t instanceof Uint8Array))throw new Error("unexpected tx body type");h=P.RustModule.WalletV4.TransactionBody.from_bytes(t),f=P.RustModule.WalletV4.TransactionHash.from_bytes(K()(32).update(t).digest("binary"))}const m=null!==(i=w)&&void 0!==i?i:P.RustModule.WalletV4.TransactionWitnessSet.new(),x=null!==(l=m.vkeys())&&void 0!==l?l:P.RustModule.WalletV4.Vkeywitnesses.new(),v=null!==(d=m.bootstraps())&&void 0!==d?d:P.RustModule.WalletV4.BootstrapWitnesses.new();!function(e,t,a,r,n,s){const o=C()(t).call(t,(e=>{if(e.addressing.startLevel+e.addressing.path.length-1!==N.CZ.ADDRESS.level)throw new Error("addWitnesses incorrect addressing size");return(0,Y.r)({addressing:e.addressing,startingFrom:{level:a,key:r}})}));for(let a=0;a<t.length;a++){const r=t[a],i=()=>{if(null!=r.receiver)return r.receiver;if(null!=r.address)return r.address;throw new Error(`[addWitnesses] Unexpected addressing for signing: ${y()(r)}`)},l=(0,F.normalizeToAddress)(i());if(null==l)throw new Error("addWitnesses utxo not a valid Shelley address");const d=P.RustModule.WalletV4.ByronAddress.from_address(l);if(null==d){const t=P.RustModule.WalletV4.make_vkey_witness(e,o[a].to_raw_key());n.add(t)}else{const t=P.RustModule.WalletV4.make_icarus_bootstrap_witness(e,d,o[a]);s.add(t)}}}(f,p,a,r,x,v);const b=(0,J.getStakingKeyHashesInTransactionBody)(h.to_hex());if(b.size>0)if(null==n)console.warn("Transaction in signing contains staking credentials but no staking key is provided. Cannot fully sign.");else{const e=n.to_public().hash().to_hex();if(b.has(e)&&x.add(P.RustModule.WalletV4.make_vkey_witness(f,n)),b.size>1){var E;const t=_()(E=[...b]).call(E,(t=>t!==e));console.warn(`Transaction in signing contains foreign staking credentials hashes '${y()(t)}' which do not match own staking key '${String(e)}'. Cannot fully sign.`)}}v.len()>0&&m.set_bootstraps(v),x.len()>0&&m.set_vkeys(x);const T=null==s?null:P.RustModule.WalletV4.AuxiliaryData.from_bytes(X.from(s.to_bytes()));return P.RustModule.WalletV4.Transaction.new(h,m,T)}(e,t,a.getParent().getPublicDeriverLevel(),P.RustModule.WalletV4.Bip32PrivateKey.from_hex(l.prvKeyHex),c,n,s)}function ie(e,t,a){var r;return new O.a([{amount:new B.Z(e.amount.toString()),identifier:a,networkId:t},...C()(r=e.assets.asArray()).call(r,(([e,a])=>({amount:new B.Z(a.toString()),identifier:e.getHash(),networkId:t})))],{defaultIdentifier:a,defaultNetworkId:t})}async function le(e){var t;return{address:await G.Address.from(e.receiver),tx:e.tx_hash,index:e.tx_index,value:new G.Value(new G.Amount(e.amount),G.NativeAssets.from(C()(t=e.assets).call(t,(e=>({asset:{policy:(0,V.hexToBytes)(e.policyId),name:(0,V.hexToBytes)(e.name)},amount:new G.Amount(e.amount)})))))}}},62021:(e,t,a)=>{"use strict";a.d(t,{Gi:()=>T,fu:()=>S,Qo:()=>M});var r=a(86902),n=a.n(r),s=(a(36384),a(94473)),o=a.n(s),i=a(56474),l=a.n(i),d=a(47302),c=a.n(d),u=a(89400),p=a.n(u),g=a(2991),h=a.n(g),f=a(1499),w=a(5557),m=a(74057),y=(a(34786),a(52367)),x=a(66905),_=a(86335),v=a(95667),A=a(17462),b=a.n(A),E=(a(87315),a(90649));function T(e,t,a){var r,n,s;const i=(()=>{const t=e.senderUtxos[0];if(t.addressing.startLevel!==y.CZ.PURPOSE.level)throw new Error("createTrezorSignTxPayload unexpected addressing start level");const a=[...t.addressing.path];return a[y.CZ.CHAIN.level-1]=x.OC.CHIMERIC_ACCOUNT,a[y.CZ.ADDRESS.level-1]=0,a})(),l=e.unsignedTx.build_tx(),d=l.body(),u=_.RustModule.WasmScope((e=>e.WalletV4.has_transaction_set_tag(l.to_bytes())));if(u===_.RustModule.WalletV4.TransactionSetsState.MixedSets)throw new Error("Transaction with mixed sets cannot be signed by Ledger");const p=u===_.RustModule.WalletV4.TransactionSetsState.AllSetsHaveTag,g=function(e){var t;for(const t of e)(0,f.sV)(t.addressing);return c()(t=h()(e).call(e,(e=>({prev_hash:e.tx_hash,prev_index:e.tx_index,path:(0,w.FB)(e.addressing.path)})))).call(t,k)}(e.senderUtxos),A=function(e,t,a){const r=[];for(const i of(0,E.iterateLenGet)(e)){var n,s;const e=i.address(),l=(0,v.toHexOrBase58)(i.address()),d=D(i.amount().multiasset()),c=null!==(n=(0,E.maybe)(null===(s=i.data_hash())||void 0===s?void 0:s.to_hex(),(e=>({datumHash:e}))))&&void 0!==n?n:{},u=o()(t).call(t,(e=>l===e.address));if(null!=u)if((0,f.sV)(u.addressing),_.RustModule.WalletV4.BaseAddress.from_address(e))r.push({addressParameters:{addressType:m.CardanoAddressType.BASE,path:u.addressing.path,stakingPath:a},amount:i.amount().coin().to_str(),...d,...c});else{if(!_.RustModule.WalletV4.ByronAddress.from_address(e))throw new Error("unexpected change address type");r.push({addressParameters:{addressType:m.CardanoAddressType.BYRON,path:u.addressing.path},amount:i.amount().coin().to_str(),...c})}else{const t=_.RustModule.WalletV4.ByronAddress.from_address(e);r.push({address:null==t?e.to_bech32():t.to_base58(),amount:i.amount().coin().to_str(),...d,...c})}}return r}(d.outputs(),e.changeAddr,i);let T={signingMode:m.CardanoTxSigningMode.ORDINARY_TRANSACTION,inputs:g,outputs:A,fee:d.fee().to_str(),ttl:null===(r=d.ttl_bignum())||void 0===r?void 0:r.to_str(),validityIntervalStart:null===(n=d.validity_start_interval_bignum())||void 0===n?void 0:n.to_str(),scriptDataHash:null===(s=d.script_data_hash())||void 0===s?void 0:s.to_hex(),protocolMagic:t,networkId:a};const S=d.withdrawals();T=null==S?T:{...T,withdrawals:C(S,[i])};const M=d.certs();if(T=null==M?T:{...T,certificates:I(M,(e=>i))},e.trezorTCatalystRegistrationTxSignData){const{votingPublicKey:t,nonce:a,paymentKeyPath:r}=e.trezorTCatalystRegistrationTxSignData;T={...T,auxiliaryData:{cVoteRegistrationParameters:{delegations:[{votePublicKey:t.replace(/^0x/,""),weight:1}],stakingPath:i,paymentAddressParameters:{addressType:m.CardanoAddressType.BASE,path:r,stakingPath:i},nonce:String(a),format:m.CardanoGovernanceRegistrationFormat.CIP36,votingPurpose:0}}}}else{const t=e.metadata;T=void 0===t?T:{...T,auxiliaryData:{hash:b()(32).update(t.to_bytes()).digest("hex")}}}return p&&(T={...T,tagCborSets:!0}),T}function C(e,t){var a,r;return h()(a=p()(r=(0,E.iterateLenGetMap)(e)).call(r).nonNull().zip(t)).call(a,(([e,t])=>({amount:e.to_str(),path:t}))).toArray()}function I(e,t){const a=[];for(const r of(0,E.iterateLenGet)(e)){const e=r.as_stake_registration();if(null!=e){a.push({type:m.CardanoCertificateType.STAKE_REGISTRATION,path:t(e.stake_credential())});continue}const n=r.as_stake_deregistration();if(null!=n){a.push({type:m.CardanoCertificateType.STAKE_DEREGISTRATION,path:t(n.stake_credential())});continue}const s=r.as_stake_delegation();if(null!=s){a.push({type:m.CardanoCertificateType.STAKE_DELEGATION,path:t(s.stake_credential()),pool:s.pool_keyhash().to_hex()});continue}const o=r.as_vote_delegation();if(null==o)throw new Error("formatTrezorCertificates Trezor doesn't support this certificate type");{const e=o.drep();let r;switch(e.kind()){case _.RustModule.WalletV4.DRepKind.KeyHash:r={type:m.CardanoDRepType.KEY_HASH,keyHash:(0,E.forceNonNull)(o.drep().to_key_hash()).to_hex()};break;case _.RustModule.WalletV4.DRepKind.ScriptHash:r={type:m.CardanoDRepType.SCRIPT_HASH,scriptHash:(0,E.forceNonNull)(o.drep().to_script_hash()).to_hex()};break;case _.RustModule.WalletV4.DRepKind.AlwaysAbstain:r={type:m.CardanoDRepType.ABSTAIN};break;case _.RustModule.WalletV4.DRepKind.AlwaysNoConfidence:r={type:m.CardanoDRepType.NO_CONFIDENCE};break;default:throw new Error("Trezor: Unsupported dRep kind: "+e.kind())}a.push({type:m.CardanoCertificateType.VOTE_DELEGATION,dRep:r,path:t(o.stake_credential())})}}return a}function k(e,t){return e.prev_hash!==t.prev_hash?e.prev_hash<t.prev_hash?-1:1:e.prev_index-t.prev_index}function D(e){var t;return null==e?l()({}):{tokenBundle:h()(t=(0,E.iterateLenGetMap)(e).nonNullValue()).call(t,(([e,t])=>{var a;const r=h()(a=(0,E.iterateLenGetMap)(t).nonNullValue()).call(a,(([e,t])=>({assetNameBytes:(0,E.bytesToHex)(e.name()),amount:t.to_str()}))).toArray();return{policyId:e.to_hex(),tokenAmounts:r}})).toArray()}}function S(e,t,a,r,s){var i,l,d,c,u,p,g;const f=_.RustModule.WasmScope((t=>t.WalletV4.has_transaction_set_tag(t.WalletV4.FixedTransaction.new_from_body_bytes((0,E.hexToBytes)(e)).to_bytes())));if(f===_.RustModule.WalletV4.TransactionSetsState.MixedSets)throw new Error("Transaction with mixed sets cannot be signed by Ledger");const w=f===_.RustModule.WalletV4.TransactionSetsState.AllSetsHaveTag,y=_.RustModule.WalletV4.TransactionBody.from_hex(e);function x(e){const t=[];for(const a of(0,E.iterateLenGet)(e)){const e=a.transaction_id().to_hex(),r=a.index(),n=o()(s).call(s,(t=>t.tx_hash===e&&t.tx_index===r)),i={prev_hash:e,prev_index:r};n&&(i.path=n.addressing.path),t.push(i)}return t}function v(e){const a=e.serialization_format()===_.RustModule.WalletV4.CborContainerType.Map,n=e.amount().coin().to_str(),{tokenBundle:s}=D(e.amount().multiasset()),o=e.data_hash(),i=e.address();let l;const d=_.RustModule.WalletV4.ByronAddress.from_address(i),c=_.RustModule.WalletV4.PointerAddress.from_address(i);if((d||c)&&(l={address:i.to_bech32(),amount:n}),_.RustModule.WalletV4.EnterpriseAddress.from_address(i)){const e=r(i.to_bech32());l=e?{addressParameters:{addressType:m.CardanoAddressType.ENTERPRISE,path:e},amount:n}:{address:i.to_bech32(),amount:n}}const u=_.RustModule.WalletV4.BaseAddress.from_address(i);if(u){const e=_.RustModule.WalletV4.EnterpriseAddress.new(t,u.payment_cred()).to_address().to_hex(),a=r(e);if(a){const e=u.stake_cred(),s=_.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),o=r(s);if(o)l={addressParameters:{addressType:m.CardanoAddressType.BASE,path:a,stakingPath:o},amount:n};else{const t=e.to_keyhash(),r=e.to_scripthash();if(t)l={addressParameters:{addressType:m.CardanoAddressType.BASE,path:a,stakingKeyHash:t.to_hex()},amount:n};else{if(!r)throw new Error("unexpected stake credential type in base address");l={addressParameters:{addressType:m.CardanoAddressType.BASE,path:a,stakingScriptHash:r.to_hex()},amount:n}}}}else l={address:i.to_bech32(),amount:n}}if(!l)throw new Error("not expecting to pay to reward address");s&&(l.tokenBundle=s),o&&(l.datumHash=o.to_hex()),a&&(l.format=m.CardanoTxOutputSerializationFormat.MAP_BABBAGE);const p=e.plutus_data();p&&(l.inlineDatum=p.to_hex(),l.format=m.CardanoTxOutputSerializationFormat.MAP_BABBAGE);const g=e.script_ref();return g&&(l.referenceScript=g.to_hex(),l.format=m.CardanoTxOutputSerializationFormat.MAP_BABBAGE),l}const A=h()(i=(0,E.iterateLenGet)(y.outputs())).call(i,v).toArray(),b=[],T=[],C=y.required_signers();if(C)for(const e of(0,E.iterateLenGet)(C)){const a=_.RustModule.WalletV4.EnterpriseAddress.new(t,_.RustModule.WalletV4.Credential.from_keyhash(e)).to_address().to_hex(),n=_.RustModule.WalletV4.RewardAddress.new(t,_.RustModule.WalletV4.Credential.from_keyhash(e)).to_address().to_hex(),s=r(a)||r(n);s?(b.push({keyPath:s}),T.push(s)):b.push({keyHash:e.to_hex()})}let k=null;const S=y.certs();S&&(k=I(S,(e=>{const a=_.RustModule.WalletV4.RewardAddress.new(t,e).to_address().to_hex(),n=r(a);if(null==n)throw new Error("not own address in certificate");return n})));let M=null;const R=y.withdrawals();if(R){const e=[];for(const[t,a]of(0,E.iterateLenGetMap)(R).nonNullValue()){const n=t.to_address().to_hex(),s=r(n);if(null==s)throw new Error("foreign withdrawal reward address");e.push({amount:a.to_str(),path:s})}M=e}let B=null;const W=y.auxiliary_data_hash();W&&(B={hash:W.to_hex()});let P=null;const N=y.collateral();N&&(P=x(N));const F=null===(l=JSON.parse(null!==(d=null===(c=y.mint())||void 0===c?void 0:c.to_json())&&void 0!==d?d:"null"))||void 0===l?void 0:h()(l).call(l,(([e,t])=>{var a;return{policyId:e,tokenAmounts:h()(a=n()(t)).call(a,(e=>({assetNameBytes:e,mintAmount:t[e]})))}})),O=null===(u=y.script_data_hash())||void 0===u?void 0:u.to_hex(),L={signingMode:m.CardanoTxSigningMode.ORDINARY_TRANSACTION,inputs:x(y.inputs()),outputs:A,fee:y.fee().to_str(),protocolMagic:a,networkId:t,includeNetworkId:null!=y.network_id()},H=null===(p=y.ttl_bignum())||void 0===p?void 0:p.to_str(),V=null===(g=y.validity_start_interval_bignum())||void 0===g?void 0:g.to_str();H&&(L.ttl=H),V&&(L.validityIntervalStart=V),k&&(L.certificates=k),M&&(L.withdrawals=M),B&&(L.auxiliaryData=B),F&&(L.mint=F),O&&(L.scriptDataHash=O),P&&(L.collateralInputs=P,L.signingMode=m.CardanoTxSigningMode.PLUTUS_TRANSACTION),C&&(L.requiredSigners=b);const U=y.collateral_return();U&&(L.collateralReturn=v(U));const G=y.total_collateral();G&&(L.totalCollateral=G.to_str());const j=y.reference_inputs();if(j){const e=[];for(const t of(0,E.iterateLenGet)(j))e.push({prev_hash:t.transaction_id().to_hex(),prev_index:t.index()});L.referenceInputs=e}return T.length>0&&(L.additionalWitnessRequests=T),w&&(L.tagCborSets=!0),L}function M(e,t){const a=_.RustModule.WalletV4.FixedTransaction.from_hex(e);for(const e of t){if(e.type===m.CardanoTxWitnessType.BYRON_WITNESS)throw new Error("Byron wallet does not support connector API");if(e.type!==m.CardanoTxWitnessType.SHELLEY_WITNESS)throw new Error("unexpected witness type");{const t=_.RustModule.WalletV4.Vkeywitness.new(_.RustModule.WalletV4.Vkey.new(_.RustModule.WalletV4.PublicKey.from_hex(e.pubKey)),_.RustModule.WalletV4.Ed25519Signature.from_hex(e.signature));a.add_vkey_witness(t)}}return a.to_hex()}a(27649)},27649:(e,t,a)=>{"use strict";a.d(t,{PF:()=>_,$Z:()=>v,Dw:()=>A,Bi:()=>b,lG:()=>E,Nf:()=>T,ue:()=>I,RY:()=>k}),a(86902);var r=a(32366),n=a.n(r),s=a(20116),o=a.n(s),i=a(2991),l=a.n(i),d=a(80426),c=a.n(d),u=(a(96486),a(905)),p=a(9243),g=a(28336),h=a(55343),f=a(86335),w=a(38079),m=a(90649);const y="addr_test1qzz6hulv54gzf2suy2u5gkvmt6ysasfdlvvegy3fmf969y7r3y3kdut55a40jff00qmg74686vz44v6k363md06qkq0qy0adz0";function x(e,t){return`${e.to_hex()}.${(0,m.bytesToHex)(t.name())}`}function _(e){const t=e.split(".");return{policyId:f.RustModule.WalletV4.ScriptHash.from_hex(t[0]),name:f.RustModule.WalletV4.AssetName.new((0,m.hexToBytes)(t[1]))}}function v(e,t){const a=new h.a([],t);a.add({amount:new u.Z(e.coin().to_str()),identifier:t.defaultIdentifier,networkId:t.defaultNetworkId});for(const s of(r=e.multiasset(),void 0,c()(n=(0,m.iterateLenGetMap)(r)).call(n,(([e,t])=>{var a;return l()(a=(0,m.iterateLenGetMap)(t).nonNullValue()).call(a,(([t,a])=>({amount:a.to_str(),assetId:x(e,t),policyId:e.to_hex(),name:(0,m.bytesToHex)(t.name())})))})).toArray()))a.add({amount:new u.Z(s.amount),identifier:s.assetId,networkId:t.defaultNetworkId});var r,n;return a}function A(e){const t=f.RustModule.WalletV4.Value.new(f.RustModule.WalletV4.BigNum.from_str(e.amount));if(0===e.assets.length)return t;const a=f.RustModule.WalletV4.MultiAsset.new();for(const t of e.assets){var r;const{policyId:e,name:n}=_(t.assetId),s=null!==(r=a.get(e))&&void 0!==r?r:f.RustModule.WalletV4.Assets.new();s.insert(n,f.RustModule.WalletV4.BigNum.from_str(t.amount.toString())),a.insert(e,s)}return a.len()>0&&t.set_multiasset(a),t}function b(e,t){return function(e,t,a){const r=new h.a([],{defaultNetworkId:a,defaultIdentifier:w.hd.Cardano});r.add({identifier:w.hd.Cardano,amount:new u.Z(e),networkId:a});for(const e of t)r.add({identifier:e.assetId,amount:new u.Z(e.amount),networkId:a});return r}(e.amount,e.assets,t)}function E(e){var t,a,r,n;const s=[...e.utxoInputs,...null!==(t=e.accountingInputs)&&void 0!==t?t:[]],i=[...e.utxoOutputs,...null!==(a=e.accountingOutputs)&&void 0!==a?a:[]],l=o()(s).call(s,(t=>e.allOwnedAddressIds.has(t.AddressId))),d=o()(i).call(i,(t=>e.allOwnedAddressIds.has(t.AddressId))),c=C(s,e.tokens,e.defaultToken),u=C(i,e.tokens,e.defaultToken),g=C(l,e.tokens,e.defaultToken).joinAddCopy(null!==(r=e.ownImplicitInput)&&void 0!==r?r:new h.a([],e.defaultToken)),f=C(d,e.tokens,e.defaultToken).joinAddCopy(null!==(n=e.ownImplicitOutput)&&void 0!==n?n:new h.a([],e.defaultToken)),w=l.length===s.length,m=d.length===i.length,y=w&&m,x=l.length>0&&l.length!==s.length,_=f.joinSubtractCopy(g),v=u.joinSubtractCopy(c);return y?{type:p.s.SELF,amount:new h.a([],e.defaultToken),fee:v}:x?{type:p.s.MULTI,amount:_,fee:new h.a([],e.defaultToken)}:w?{type:p.s.EXPEND,amount:_.joinSubtractCopy(v),fee:v}:{type:p.s.INCOME,amount:_,fee:new h.a([],e.defaultToken)}}function T(e,t){const a=[];for(const i of e){var r,n,s,o;null!=i.block&&a.push({date:i.block.BlockTime,type:i.type===p.s.INCOME?"in":"out",amount:(0,g.formatBigNumberToFloatString)(null!==(r=null===(n=i.amount.get(t.Identifier))||void 0===n?void 0:n.abs().shiftedBy(-t.Metadata.numberOfDecimals))&&void 0!==r?r:new u.Z(0)),fee:(0,g.formatBigNumberToFloatString)(null!==(s=null===(o=i.fee.get(t.Identifier))||void 0===o?void 0:o.abs().shiftedBy(-t.Metadata.numberOfDecimals))&&void 0!==s?s:new u.Z(0)),id:i.transaction.Hash})}return a}function C(e,t,a){const r=n()(e).call(e,((e,a)=>{for(const r of o()(t).call(t,(e=>e.TokenList.ListId===a.TokenListId)))e.push(r);return e}),[]);return new h.a(l()(r).call(r,(e=>({identifier:e.Token.Identifier,amount:new u.Z(e.TokenList.Amount),networkId:e.Token.NetworkId}))),a)}function I(e){return l()(e).call(e,(e=>{var t,a;const r=n()(t=e.output.tokens).call(t,((e,t)=>(t.Token.Identifier===w.hd.Cardano?e.amount=e.amount.plus(t.TokenList.Amount):e.tokens.push({amount:t.TokenList.Amount,tokenId:t.Token.Identifier}),e)),{amount:new u.Z(0),tokens:[]}),s=l()(a=r.tokens).call(a,(e=>{const t=_(e.tokenId);return{amount:e.amount,assetId:e.tokenId,policyId:t.policyId.to_hex(),name:(0,m.bytesToHex)(t.name.name())}}));return{amount:r.amount.toString(),receiver:e.address,tx_hash:e.output.Transaction.Hash,tx_index:e.output.UtxoTransactionOutput.OutputIndex,utxo_id:e.output.Transaction.Hash+e.output.UtxoTransactionOutput.OutputIndex,addressing:e.addressing,assets:s}}))}function k(e,t){return f.RustModule.WasmScope((a=>{const r=a.WalletV4.TransactionOutput.new(a.WalletV4.Address.from_bech32(y),function(e,t=f.RustModule){const a=t.WalletV4.Value.new(t.WalletV4.BigNum.from_str(e.getDefaultEntry().amount.toString()));if(1===e.size())return a;const r=t.WalletV4.MultiAsset.new();for(const a of e.nonDefaultEntries()){var n;const{policyId:e,name:s}=_(a.identifier),o=null!==(n=r.get(e))&&void 0!==n?n:t.WalletV4.Assets.new();o.insert(s,t.WalletV4.BigNum.from_str(a.amount.toString())),r.insert(e,o)}return r.len()>0&&a.set_multiasset(r),a}(e,a));return function(e,t,a){const r=a.WalletV4.BigNum.from_str(t.toString()),n=a.WalletV4.DataCost.new_coins_per_byte(r),s=a.WalletV4.min_ada_for_output(e,n).to_str();return new u.Z(s)}(r,t,a)}))}},21131:(e,t,a)=>{"use strict";a.d(t,{ServerStatusError:()=>i,CurrentCoinPriceError:()=>l,HistoricalCoinPriceError:()=>d,GenericApiError:()=>c,IncorrectWalletPasswordError:()=>u,WalletAlreadyRestoredError:()=>p,UnusedAddressesError:()=>g,NotEnoughMoneyToSendError:()=>h,CannotSendBelowMinimumValueError:()=>f,AssetOverflowError:()=>w,NoInputsError:()=>m,RewardAddressEmptyError:()=>y,NoOutputsError:()=>x,GetAllUTXOsForAddressesError:()=>_,GetUtxosForAddressesApiError:()=>v,GetTxHistoryForAddressesApiError:()=>A,GetRewardHistoryApiError:()=>b,RollbackApiError:()=>E,GetBestBlockError:()=>T,SendTransactionApiError:()=>C,CheckAddressesInUseApiError:()=>I,GetAccountStateApiError:()=>k,GetPoolInfoApiError:()=>D,GetCatalystRoundInfoApiError:()=>S,GetTokenInfoApiError:()=>M,InvalidWitnessError:()=>R,GetUtxoDataError:()=>B,OversizedTransactionError:()=>W});var r=a(99095),n=a(63139),s=a(38043);const o=(0,r.defineMessages)({serverStatusError:{id:"api.errors.serverStatusError",defaultMessage:'!!!Server connection failed. Please check your internet connection or reach out to our support team <a target="_blank" href="https://emurgohelpdesk.zendesk.com/hc/en-us/requests/new?ticket_form_id=360013330335">here</a>.'},currentCoinPriceError:{id:"api.errors.currentCoinPriceError",defaultMessage:"!!!There is no current coin price data available."},historicalCoinPriceError:{id:"api.errors.histoicalCoinPriceError",defaultMessage:"!!!There is no historical coin price data available."},genericApiError:{id:"api.errors.GenericApiError",defaultMessage:"!!!An error occurred. Please retry."},incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect password. Please retype."},walletAlreadyRestoredError:{id:"api.errors.WalletAlreadyRestoredError",defaultMessage:"!!!The wallet you are trying to restore already exists."},reportRequestError:{id:"api.errors.ReportRequestError",defaultMessage:"!!!There was a problem sending the support request."},unusedAddressesError:{id:"api.errors.unusedAddressesError",defaultMessage:"!!!You cannot generate more than 20 consecutive unused addresses."},walletAlreadyImportedError:{id:"api.errors.WalletAlreadyImportedError",defaultMessage:"!!!Wallet you are trying to import already exists."},cannotSendBelowMinimumValueError:{id:"api.errors.CannotSendBelowMinimumValueError",defaultMessage:"!!!A minimum of 1 ADA is required"},assetOverflowError:{id:"api.errors.assetOverflowError",defaultMessage:"!!!Maximum value of a token inside a UTXO exceeded (overflow)."},getAddressesKeysError:{id:"api.errors.getAddressesWithFundsError",defaultMessage:"!!!An error occurred while getting addresses with funds. Please retry."},noInputsError:{id:"api.errors.noInputsError",defaultMessage:"!!!Your recovered wallet is empty. Please check your recovery phrase and restore again."},rewardAddressEmptyError:{id:"api.errors.rewardAddressEmpty",defaultMessage:"!!!Reward address is not visible until users get any reward."},noOutputsError:{id:"api.errors.noOutputsError",defaultMessage:"!!!The transaction requires at least 1 output, but none was provided."},generateTransferTxError:{id:"api.errors.generateTransferTxError",defaultMessage:"!!!An error occurred while generating the transfer transaction. Please retry."},sendTransactionError:{id:"api.errors.sendTransactionError",defaultMessage:"!!!Error received from api method call while sending tx."},getAllUTXOsForAddressesError:{id:"api.errors.getAllUTXOsForAddressesError",defaultMessage:"!!!Error received from api method call while getting utxos."},discoverAddressesError:{id:"api.errors.discoverAddressesError",defaultMessage:"!!!Error received from api method call while discovering addresses."},getUtxosForAddressesApiError:{id:"api.errors.getUtxosForAddressesApiError",defaultMessage:"!!!Error received from server while getting UTXOs."},getTxHistoryForAddressesApiError:{id:"api.errors.getTxHistoryForAddressesApiError",defaultMessage:"!!!Error received from server while getting txs."},getRewardHistoryApiError:{id:"api.errors.getRewardHistoryApiError",defaultMessage:"!!!Error received from server while getting reward history."},rollbackApiError:{id:"api.errors.rollbackApiError",defaultMessage:"!!!Rollback was detected."},getBestBlockApiError:{id:"api.errors.getBestBlockApiError",defaultMessage:"!!!Error received from server while getting best block."},sendTransactionApiError:{id:"api.errors.sendTransactionApiError",defaultMessage:"!!!Error received from server while sending tx."},checkAdressesInUseApiError:{id:"api.errors.checkAdressesInUseApiError",defaultMessage:"!!!Error received from server while checking used addresses."},getMultiAssetMintMetadataApiError:{id:"api.errors.getMultiAssetMintMetadataApiError",defaultMessage:"!!!Error received from server while querying minting metadata."},assetInfoApiError:{id:"api.errors.assetInfoApiError",defaultMessage:"!!!Error received from server while getting asset info."},getAccountStateApiError:{id:"api.errors.getAccountStateApiError",defaultMessage:"!!!Error received from server while getting account state."},getPoolInfoApiError:{id:"api.errors.getPoolInfoApiError",defaultMessage:"!!!Error received from server while getting pool info."},getCatalystRoundApiError:{id:"api.errors.getCatalystRoundApiError",defaultMessage:"!!!Error received from server while getting catalyst round info."},getTokenInfoApiError:{id:"api.errors.getTokenInfoApiError",defaultMessage:"!!!Error received from server while getting token info."},poolMissingApiError:{id:"api.errors.poolMissingApiError",defaultMessage:"!!!Pool could not be found. Please check the pool ID and ensure the pool was not deregistered."},invalidWitnessError:{id:"api.errors.invalidWitnessError",defaultMessage:"!!!The signature is invalid."},invalidMnemonicError:{id:"api.errors.invalidMnemonicError",defaultMessage:"!!!Invalid phrase entered, please check."},hardwareUnsupportedError:{id:"api.errors.hardwareUnsupportedError",defaultMessage:"!!!This action is incompatible with the hardware."},getUtxoDataError:{id:"api.errors.getUtxoDataError",defaultMessage:"!!!Error received from server while getting UTXO data"},oversizedTransactionError:{id:"api.errors.oversizedTransaction",defaultMessage:"!!!Maximum transaction size exceeded."}});class i extends n.default{constructor(){super({id:o.serverStatusError.id,defaultMessage:o.serverStatusError.defaultMessage||""})}}class l extends n.default{constructor(){super({id:o.currentCoinPriceError.id,defaultMessage:o.currentCoinPriceError.defaultMessage||""})}}class d extends n.default{constructor(){super({id:o.historicalCoinPriceError.id,defaultMessage:o.historicalCoinPriceError.defaultMessage||""})}}class c extends n.default{constructor(){super({id:o.genericApiError.id,defaultMessage:o.genericApiError.defaultMessage||""})}}class u extends n.default{static get errorId(){return o.incorrectWalletPasswordError.id}constructor(){super({id:u.errorId,defaultMessage:o.incorrectWalletPasswordError.defaultMessage||""})}}class p extends n.default{constructor(){super({id:o.walletAlreadyRestoredError.id,defaultMessage:o.walletAlreadyRestoredError.defaultMessage||""})}}class g extends n.default{constructor(){super({id:o.unusedAddressesError.id,defaultMessage:o.unusedAddressesError.defaultMessage||""})}}class h extends n.default{constructor(){super({id:s.default.notEnoughMoneyToSendError.id,defaultMessage:s.default.notEnoughMoneyToSendError.defaultMessage||""})}}class f extends n.default{constructor(){super({id:o.cannotSendBelowMinimumValueError.id,defaultMessage:o.cannotSendBelowMinimumValueError.defaultMessage||""})}}class w extends n.default{constructor(){super({id:o.assetOverflowError.id,defaultMessage:o.assetOverflowError.defaultMessage||""})}}class m extends n.default{constructor(){super({id:o.noInputsError.id,defaultMessage:o.noInputsError.defaultMessage||""})}}class y extends n.default{constructor(){super({id:o.rewardAddressEmptyError.id,defaultMessage:o.rewardAddressEmptyError.defaultMessage||""})}}class x extends n.default{constructor(){super({id:o.noOutputsError.id,defaultMessage:o.noOutputsError.defaultMessage||""})}}class _ extends n.default{constructor(){super({id:o.getAllUTXOsForAddressesError.id,defaultMessage:o.getAllUTXOsForAddressesError.defaultMessage||""})}}class v extends n.default{constructor(){super({id:o.getUtxosForAddressesApiError.id,defaultMessage:o.getUtxosForAddressesApiError.defaultMessage||""})}}class A extends n.default{constructor(){super({id:o.getTxHistoryForAddressesApiError.id,defaultMessage:o.getTxHistoryForAddressesApiError.defaultMessage||""})}}class b extends n.default{constructor(){super({id:o.getRewardHistoryApiError.id,defaultMessage:o.getRewardHistoryApiError.defaultMessage||""})}}class E extends n.default{constructor(){super({id:o.rollbackApiError.id,defaultMessage:o.rollbackApiError.defaultMessage||""})}}class T extends n.default{constructor(){super({id:o.getBestBlockApiError.id,defaultMessage:o.getBestBlockApiError.defaultMessage||""})}}class C extends n.default{constructor(){super({id:o.sendTransactionApiError.id,defaultMessage:o.sendTransactionApiError.defaultMessage||""})}}class I extends n.default{constructor(){super({id:o.checkAdressesInUseApiError.id,defaultMessage:o.checkAdressesInUseApiError.defaultMessage||""})}}class k extends n.default{constructor(){super({id:o.getAccountStateApiError.id,defaultMessage:o.getAccountStateApiError.defaultMessage||""})}}class D extends n.default{constructor(){super({id:o.getPoolInfoApiError.id,defaultMessage:o.getPoolInfoApiError.defaultMessage||""})}}class S extends n.default{constructor(){super({id:o.getCatalystRoundApiError.id,defaultMessage:o.getCatalystRoundApiError.defaultMessage||""})}}class M extends n.default{constructor(){super({id:o.getTokenInfoApiError.id,defaultMessage:o.getTokenInfoApiError.defaultMessage||""})}}class R extends n.default{constructor(){super({id:o.invalidWitnessError.id,defaultMessage:o.invalidWitnessError.defaultMessage||""})}}class B extends n.default{constructor(){super({id:o.getUtxoDataError.id,defaultMessage:o.getUtxoDataError.defaultMessage||""})}}class W extends n.default{constructor(){super({id:o.oversizedTransactionError.id,defaultMessage:o.oversizedTransactionError.defaultMessage})}}},4158:(e,t,a)=>{"use strict";a.d(t,{MX:()=>m,ZP:()=>y,qP:()=>x,_Y:()=>_});var r=a(32366),n=a.n(r),s=a(94473),o=a.n(s),i=a(59340),l=a.n(i),d=a(905),c=a(13469),u=a(19008),p=(a(38441),a(21131)),g=a(63139),h=(a(27189),a(14986),a(33913)),f=a(26333),w=a(55343);async function m(e){try{return await(0,u.M)(e.db)}catch(e){if(c.Yd.error("getWallets error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}class y{async getTokenInfo(e){c.Yd.debug("getTokenInfo called");try{const t=await(0,f.r)(e);return c.Yd.debug("getTokenInfo success: "+(0,c.WO)(t)),t}catch(e){if(c.Yd.error("getTokenInfo error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async getTxLastUpdatedDate(e){try{return await e.getLastSyncInfo()}catch(e){if(c.Yd.error("CommonApi::getTxLastUpdatedDate error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async createAddress(e){c.Yd.debug("CommonApi::createAddress called");try{const t=await e.popFunc();return c.Yd.debug("CommonApi::createAddress success: "+(0,c.WO)(t)),t}catch(e){if(c.Yd.error("CommonApi::createAddress error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async getBalance(e){try{return await e.getBalance()}catch(e){if(c.Yd.error("CommonApi::getBalance error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async getAssetDeposit(e){try{return await e.getBalance()}catch(e){if(c.Yd.error("CommonApi::getAssetDeposit error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async exportLocalDatabase(e){const t=await e.export();return l()(t)}async renameModel(e){c.Yd.debug("CommonApi::renameModel called: "+(0,c.WO)(e));try{const t=await e.func(e.request);return c.Yd.debug("CommonApi::renameModel success: "+(0,c.WO)(t)),t}catch(e){if(c.Yd.error("CommonApi::renameModel error: "+(0,c.n)(e)),e instanceof g.default)throw e;throw new p.GenericApiError}}async changeModelPassword(e){c.Yd.debug("CommonApi::changeModelPassword called");try{const t=await e.func(e.request);return c.Yd.debug("CommonApi::changeModelPassword success"),t}catch(e){if(c.Yd.error("CommonApi::changeModelPassword error: "+(0,c.n)(e)),e instanceof h.UZ)throw new p.IncorrectWalletPasswordError;if(e instanceof g.default)throw e;throw new p.GenericApiError}}}function x(e){return null!=o()(e).call(e,(e=>!(!0!==e.shouldSendAll||!e.token.IsDefault)))}function _(e,t,a){const r=new w.a([],e);for(const e of t)if(null!=e.amount)r.add({amount:new d.Z(e.amount),identifier:e.token.Identifier,networkId:e.token.NetworkId});else if(e.token.IsDefault){const t=n()(a).call(a,((e,t)=>e.plus(t.getDefaultEntry().amount)),new d.Z(0));r.add({amount:t,identifier:e.token.Identifier,networkId:e.token.NetworkId})}else{const t=n()(a).call(a,((t,a)=>{var r;const n=o()(r=a.nonDefaultEntries()).call(r,(t=>t.identifier===e.token.Identifier));return null!=n?t.plus(n.amount):t}),new d.Z(0));r.add({amount:t,identifier:e.token.Identifier,networkId:e.token.NetworkId})}return r}},79562:(e,t,a)=>{"use strict";a.d(t,{default:()=>N,persistSubmittedTransactions:()=>O,loadSubmittedTransactions:()=>L,createStorageField:()=>H});var r,n,s=a(56474),o=a.n(s),i=a(98926),l=a.n(i),d=a(31238),c=a.n(d),u=a(41511),p=a.n(u),g=a(86902),h=a.n(g),f=a(2991),w=a.n(f),m=a(20455),y=a.n(m),x=a(36384),_=a.n(x),v=a(93476),A=a.n(v),b=a(59340),E=a.n(b),T=a(87672),C=a.n(T),I=a(75941),k=a(6697),D=a(74119),S=a(61346),M=a(36231),R=a(90649),B=a(84174);const W=String(I.Z.getNetworkName()),P={USER_LOCALE:W+"-USER-LOCALE",URI_SCHEME_ACCEPTANCE:W+"-URI-SCHEME-ACCEPTANCE",COMPLEXITY_LEVEL:W+"-COMPLEXITY-LEVEL",IS_USER_MIGRATED_TO_REVAMP:"IS_USER_MIGRATED_TO_REVAMP",LAST_ANNOUNCED_FEATURE_VERSION:"LAST_ANNOUNCED_FEATURE_VERSION",TESTNET_MODAL_DISPLAYED:"TESTNET_MODAL_DISPLAYED",VERSION:W+"-LAST-LAUNCH-VER",HIDE_BALANCE:W+"-HIDE-BALANCE",UNIT_OF_ACCOUNT:W+"-UNIT-OF-ACCOUNT",COIN_PRICE_PUB_KEY_DATA:W+"-COIN-PRICE-PUB-KEY-DATA",EXTERNAL_STORAGE:W+"-EXTERNAL-STORAGE",TOGGLE_SIDEBAR:W+"-TOGGLE-SIDEBAR",SUBMITTED_TRANSACTIONS:"submittedTransactions",CATALYST_ROUND_INFO:W+"-CATALYST_ROUND_INFO",FLAGS:W+"-FLAGS",USER_THEME:W+"-USER-THEME",PORTFOLIO_FIAT_PAIR:"-PORTFOLIO_FIAT_PAIR",NOTIFICATIONS_ENABLED:W+"-NOTIFICATIONS_ENABLED_PER_WALLET",BUY_SELL_DISCLAIMER:W+"-BUY_SELL_DISCLAIMER",BRING_SANDBOX:W+"-BRING_SANDBOX",BRING_BANNER_CLOSED:W+"-BRING_BANNER_CLOSED",DREP_YOROI_BANNER:W+"-DREP_YOROI_BANNER",CURRENT_NETWORK_ID:W+"-CURRENT_NETWORK_ID",WALLET_LIST_ORDER:W+"-WALLET_LIST_ORDER",SELECTED_WALLET_PUBLIC_KEY:W+"_SELECTED_WALLET_PUBLIC_KEY",DAPP_CONNECTOR_WHITELIST:"connector_whitelist",IS_ANALYTICS_ALLOWED:W+"-IS_ANALYTICS_ALLOWED",ACCEPTED_TOS_VERSION:W+"-ACCEPTED_TOS_VERSION",CUSTOM_THEME:W+"-CUSTOM-THEME",THEME:W+"-THEME",CASHBACK_WALLET_ID:"CASHBACK_WALLET_ID",SHOWN_DISCLAIMERS:"SHOWN_DISCLAIMERS",WALLETS_NAVIGATION:W+"-WALLETS-NAVIGATION",SELECTED_WALLET:"SELECTED_WALLET"};class N{constructor(){C()(this,"getUserLocale",(()=>(0,D.Jt)(P.USER_LOCALE))),C()(this,"setUserLocale",(e=>(0,D.mM)(P.USER_LOCALE,e))),C()(this,"unsetUserLocale",(()=>(0,D.Hx)(P.USER_LOCALE))),C()(this,"getUriSchemeAcceptance",(()=>(0,D.Jt)(P.URI_SCHEME_ACCEPTANCE).then((e=>"true"===e&&JSON.parse(e))))),C()(this,"setUriSchemeAcceptance",(()=>(0,D.mM)(P.URI_SCHEME_ACCEPTANCE,E()(!0)))),C()(this,"unsetUriSchemeAcceptance",(()=>(0,D.Hx)(P.URI_SCHEME_ACCEPTANCE))),C()(this,"getComplexityLevel",(()=>(0,D.Jt)(P.COMPLEXITY_LEVEL).then((e=>null==e?null:JSON.parse(e))))),C()(this,"setComplexityLevel",(e=>(0,D.mM)(P.COMPLEXITY_LEVEL,E()(e)))),C()(this,"unsetComplexityLevel",(()=>(0,D.Hx)(P.COMPLEXITY_LEVEL))),C()(this,"getUserThemeMode",(()=>(0,D.Jt)(P.USER_THEME))),C()(this,"setUserThemeMode",(e=>(0,D.mM)(P.USER_THEME,e))),C()(this,"getDrepYoroiBanerTimestamp",(()=>(0,D.Jt)(P.DREP_YOROI_BANNER))),C()(this,"setDrepYoroiBanerTimestamp",(e=>(0,D.mM)(P.DREP_YOROI_BANNER,e))),C()(this,"unsetDrepYoroiBanerTimestamp",(()=>(0,D.Hx)(P.DREP_YOROI_BANNER))),C()(this,"getPortfolioFiatPair",(e=>(0,D.Jt)(String(e)+P.PORTFOLIO_FIAT_PAIR))),C()(this,"setSetPortfolioFiatPair",((e,t)=>(0,D.mM)(String(e)+P.PORTFOLIO_FIAT_PAIR,t))),C()(this,"unsetPortfolioFiatPair",(e=>(0,D.Hx)(String(e)+P.PORTFOLIO_FIAT_PAIR))),C()(this,"getNotificationsSetting",(()=>(0,D.Jt)(P.NOTIFICATIONS_ENABLED))),C()(this,"setNotificationsSetting",(e=>(0,D.mM)(P.NOTIFICATIONS_ENABLED,e))),C()(this,"unsetNotificationsSetting",(()=>(0,D.Hx)(P.NOTIFICATIONS_ENABLED))),C()(this,"getBringBannerClosed",(()=>(0,D.Jt)(P.BRING_BANNER_CLOSED))),C()(this,"setBringBannerClosed",(e=>(0,D.mM)(P.BRING_BANNER_CLOSED,e))),C()(this,"unsetBringBannerClosed",(()=>(0,D.Hx)(P.BRING_BANNER_CLOSED))),C()(this,"getBuySellDisclaimer",(()=>(0,D.Jt)(P.BUY_SELL_DISCLAIMER))),C()(this,"setBuySellDisclaimer",(e=>(0,D.mM)(P.BUY_SELL_DISCLAIMER,e))),C()(this,"unsetBuySellDisclaimer",(()=>(0,D.Hx)(P.BUY_SELL_DISCLAIMER))),C()(this,"getTestnetModalDisplayed",(async()=>"true"===await(0,D.Jt)(P.TESTNET_MODAL_DISPLAYED))),C()(this,"setTestnetModalDisplayed",(e=>(0,D.mM)(P.TESTNET_MODAL_DISPLAYED,String(e)))),C()(this,"unsetTestnetModalDisplayed",(()=>(0,D.Hx)(P.TESTNET_MODAL_DISPLAYED))),C()(this,"getUserRevampMigrationStatus",(async()=>"true"===await(0,D.Jt)(P.IS_USER_MIGRATED_TO_REVAMP))),C()(this,"setUserRevampMigrationStatus",(e=>(0,D.mM)(P.IS_USER_MIGRATED_TO_REVAMP,e.toString()))),C()(this,"getLastAnnouncedFeatureVersion",(async()=>{var e;return null!==(e=await(0,D.Jt)(P.LAST_ANNOUNCED_FEATURE_VERSION))&&void 0!==e?e:""})),C()(this,"setLastAnnouncedFeatureVersion",(e=>(0,D.mM)(P.LAST_ANNOUNCED_FEATURE_VERSION,String(e)))),C()(this,"getSelectedWalletId",(async()=>{let e=await(0,D.Jt)(P.SELECTED_WALLET);var t;if(e||(e=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(P.SELECTED_WALLET),/^\d+$/.test(e)||(e=null)),!e)return null;if(isNaN(Number(e)))throw new Error(`Invalid wallet Id: ${e}`);return Number(e)})),C()(this,"getSelectedWalletPublicKey",(async()=>await(0,D.Jt)(P.SELECTED_WALLET_PUBLIC_KEY))),C()(this,"setSelectedWalletPublicKey",(async e=>{await(0,D.mM)(P.SELECTED_WALLET_PUBLIC_KEY,e)})),C()(this,"hasAnyLegacyThemeFlags",(async()=>{const[e,t]=await A().all([(0,D.Jt)(P.THEME),(0,D.Jt)(P.CUSTOM_THEME)]);return null!=e||null!=t})),C()(this,"unsetLegacyThemeFlags",(async()=>{await A().all([(0,D.Hx)(P.THEME),(0,D.Hx)(P.CUSTOM_THEME)])})),C()(this,"getLastLaunchVersion",(()=>(0,D.Jt)(P.VERSION).then((e=>null==e?"0.0.0":e)))),C()(this,"setLastLaunchVersion",(e=>(0,D.mM)(P.VERSION,e))),C()(this,"unsetLastLaunchVersion",(()=>(0,D.Hx)(P.VERSION))),C()(this,"isEmpty",(()=>(0,D.cJ)())),C()(this,"clear",(async()=>{var e;const t=JSON.parse(await this.getStorage()),a=new(_())(y()(S.sz));await A().all(w()(e=h()(t)).call(e,(async e=>{a.has(e)||await(0,D.Hx)(e)})))})),C()(this,"getHideBalance",(()=>(0,D.Jt)(P.HIDE_BALANCE).then((e=>"true"===e&&JSON.parse(e))))),C()(this,"setHideBalance",(e=>(0,D.mM)(P.HIDE_BALANCE,E()(!e)))),C()(this,"unsetHideBalance",(()=>(0,D.Hx)(P.HIDE_BALANCE))),C()(this,"getToggleSidebar",(()=>(0,D.Jt)(P.TOGGLE_SIDEBAR).then((e=>"true"===e&&JSON.parse(e))))),C()(this,"setToggleSidebar",(e=>(0,D.mM)(P.TOGGLE_SIDEBAR,E()(!e)))),C()(this,"unsetToggleSidebar",(()=>(0,D.Hx)(P.TOGGLE_SIDEBAR))),C()(this,"getBringSandbox",(()=>(0,D.Jt)(P.BRING_SANDBOX).then((e=>"true"===e)))),C()(this,"setBringSandbox",(e=>e?(0,D.mM)(P.BRING_SANDBOX,"true"):this.unsetBringSandbox())),C()(this,"unsetBringSandbox",(()=>(0,D.Hx)(P.BRING_SANDBOX))),C()(this,"getExternalStorage",(()=>(0,D.Jt)(P.EXTERNAL_STORAGE).then((e=>null==e?null:JSON.parse(e))))),C()(this,"setExternalStorage",(e=>(0,D.mM)(P.EXTERNAL_STORAGE,E()(e)))),C()(this,"unsetExternalStorage",(()=>(0,D.Hx)(P.EXTERNAL_STORAGE))),C()(this,"getWhitelist",(async()=>{const e=await(0,D.Jt)(P.DAPP_CONNECTOR_WHITELIST);if(null==e)return;const t=JSON.parse(e);return await this.setWhitelist(t),t})),C()(this,"setWhitelist",(e=>(0,D.mM)(P.DAPP_CONNECTOR_WHITELIST,E()(null!=e?e:[])))),C()(this,"getUnitOfAccount",(async()=>{const e=await(0,D.Jt)(P.UNIT_OF_ACCOUNT);return null==e?k.j:JSON.parse(e)})),C()(this,"setUnitOfAccount",(async e=>{await(0,D.mM)(P.UNIT_OF_ACCOUNT,E()(e))})),C()(this,"unsetUnitOfAccount",(async()=>{await(0,D.Hx)(P.UNIT_OF_ACCOUNT)})),C()(this,"getCoinPricePubKeyData",(async()=>await(0,D.Jt)(P.COIN_PRICE_PUB_KEY_DATA))),C()(this,"setCoinPricePubKeyData",(async e=>{await(0,D.mM)(P.COIN_PRICE_PUB_KEY_DATA,e)})),C()(this,"unsetCoinPricePubKeyData",(async()=>{try{await(0,D.Hx)(P.COIN_PRICE_PUB_KEY_DATA)}catch(e){}})),C()(this,"getFlag",(e=>"true"===localStorage.getItem(`${P.FLAGS}/${e}`))),C()(this,"setFlag",((e,t)=>{localStorage.setItem(`${P.FLAGS}/${e}`,String(t))})),C()(this,"getWalletsNavigation",(async()=>{let e=await(0,D.Jt)(P.WALLETS_NAVIGATION);if(null!=e)return e=JSON.parse(e),p()(e)?{cardano:[]}:e})),C()(this,"setWalletsNavigation",(e=>(0,D.mM)(P.WALLETS_NAVIGATION,E()(e)))),C()(this,"loadAcceptedTosVersion",(async()=>{const e=await(0,D.Jt)(P.ACCEPTED_TOS_VERSION);if(!e)return;const t=c()(e);return l()(t)?void 0:t})),C()(this,"saveAcceptedTosVersion",(async e=>{await(0,D.mM)(P.ACCEPTED_TOS_VERSION,String(e))})),C()(this,"unsetAcceptedTosVersion",(()=>(0,D.Hx)(P.ACCEPTED_TOS_VERSION))),C()(this,"_getIsAnalyticsAllowedKey",(()=>{let e=P.IS_ANALYTICS_ALLOWED;return I.Z.isFirefox()&&(e+="-firefox"),e})),C()(this,"loadIsAnalyticsAllowed",(async()=>{const e=await(0,D.Jt)(this._getIsAnalyticsAllowedKey());if(e)return JSON.parse(e)})),C()(this,"saveIsAnalysticsAllowed",(async e=>{await(0,D.mM)(this._getIsAnalyticsAllowedKey(),E()(e))})),C()(this,"unsetIsAnalyticsAllowed",(()=>(0,D.Hx)(P.IS_ANALYTICS_ALLOWED))),C()(this,"saveCashbackWalletId",(e=>(0,D.mM)(P.CASHBACK_WALLET_ID,String(e)))),C()(this,"getCashbackWalletId",(async()=>{const e=await(0,D.Jt)(P.CASHBACK_WALLET_ID);return e?Number(e):null})),C()(this,"_getShownDisclaimerObject",(async()=>{const e=await(0,D.Jt)(P.SHOWN_DISCLAIMERS);return e?JSON.parse(e):{}})),C()(this,"setShownDisclaimer",(async e=>{const t=await this._getShownDisclaimerObject();t[e]=!0,await(0,D.mM)(P.SHOWN_DISCLAIMERS,E()(t))})),C()(this,"isDisclaimerShown",(async e=>!0===(await this._getShownDisclaimerObject())[e])),C()(this,"loadCurrentNetworkId",(async()=>{const e=await(0,D.Jt)(P.CURRENT_NETWORK_ID);if(null!=e)return Number(e)})),C()(this,"saveCurrentNetworkId",(async e=>{await(0,D.mM)(P.CURRENT_NETWORK_ID,String(e))})),C()(this,"loadWalletListOrder",(async()=>{const e=await(0,D.Jt)(P.WALLET_LIST_ORDER);return null==e?[]:JSON.parse(e)})),C()(this,"saveWalletListOrder",(async e=>{await(0,D.mM)(P.WALLET_LIST_ORDER,E()(e))})),C()(this,"getItem",(e=>(0,D.Jt)(e))),C()(this,"setItem",((e,t)=>(0,D.mM)(e,t))),C()(this,"getOldStorage",(()=>new(A())((e=>{e(localStorage)})))),C()(this,"setStorage",(async e=>{var t;const a=new(_())(y()(S.sz));await A().all(w()(t=h()(e)).call(t,(async t=>{a.has(t)||await(0,D.mM)(t,e[t])})))})),C()(this,"getStorage",(()=>(0,D.Jt)(void 0).then((e=>null==e?"{}":e))))}async reset(){await this.unsetUserLocale(),await this.unsetComplexityLevel(),await this.unsetLastLaunchVersion(),await this.unsetHideBalance(),await this.unsetUnitOfAccount(),await this.unsetCoinPricePubKeyData(),await this.unsetExternalStorage(),await this.unsetToggleSidebar(),await this.unsetAcceptedTosVersion(),await this.unsetIsAnalyticsAllowed(),await this.unsetBringSandbox();for(const e of y()(B.networks))await this.unsetPortfolioFiatPair(e.NetworkId)}}const F=(null===(r=window.browser)||void 0===r?void 0:r.storage.local)||(null===(n=window.chrome)||void 0===n?void 0:n.storage.local);async function O(e){await F.set({[P.SUBMITTED_TRANSACTIONS]:E()(e)})}async function L(){var e;const t=await new(A())((e=>F.get(P.SUBMITTED_TRANSACTIONS,e)));return null==t||null==t[P.SUBMITTED_TRANSACTIONS]?[]:w()(e=JSON.parse(t[P.SUBMITTED_TRANSACTIONS])).call(e,(({networkId:e,publicDeriverId:t,transaction:a,usedUtxos:r,isDrepDelegation:n})=>({networkId:e,publicDeriverId:t,transaction:(0,M.T)(a),usedUtxos:r,isDrepDelegation:n})))}function H(e,t,a,r){return o()({get:async()=>{var t;return null!==(t=(0,R.maybe)(await(0,D.Jt)(e),a))&&void 0!==t?t:r},set:a=>(0,D.mM)(e,t(a)),remove:()=>(0,D.Hx)(e),defaultValue:()=>r})}},54973:(e,t,a)=>{"use strict";a.d(t,{broadcastTransaction:()=>Ne,connectWindowRetrieveData:()=>$e,connectorCreateAuthEntry:()=>Le,getAllExplorers:()=>Ve,getCardanoAssets:()=>Oe,getHistoricalCoinPrices:()=>Ge,getPrivateStakingKey:()=>Fe,getProtocolParameters:()=>Xe,getSelectedExplorer:()=>He,getWallets:()=>We,listenForCoinPriceUpdate:()=>rt,notifyDAppConnectionRemoved:()=>Je,refreshCurrentCoinPrice:()=>je,saveSelectedExplorer:()=>Ue,setCashbackWallet:()=>Qe,signAndBroadcastTransaction:()=>Pe,signFail:()=>Ye,signWindowRetrieveData:()=>qe,userConnectResponse:()=>Ze,userSignConfirm:()=>ze,userSignReject:()=>Ke});var r=a(78580),n=a.n(r),s=a(78914),o=a.n(s),i=a(56474),l=a.n(i),d=a(39392),c=a.n(d),u=a(20116),p=a.n(u),g=a(41511),h=a.n(g),f=a(89400),w=a.n(f),m=a(2991),y=a.n(m),x=a(59340),_=a.n(x),v=a(93476),A=a.n(v),b=(a(34786),a(14986),a(36231)),E=a(37790),T=a(55343),C=a(21131),I=a(78877),k=a(23307),D=a(37872);function S(e){return e.LastUpdated=new Date(e.LastUpdated),e}l()({typeTag:"upsert-tx-memo",handle:async e=>{const t=await(0,D.zA)();return await(0,k.dj)({db:t,memo:S(e.memo)})}}),l()({typeTag:"delete-tx-memo",handle:async e=>{const t=await(0,D.zA)();await(0,k.Oy)({db:t,key:e.key})}}),l()({typeTag:"get-all-tx-memos",handle:async()=>{const e=await(0,D.zA)();return await(0,k.jM)({db:e})},fixMemoDate:S});var M=a(3649),R=a.n(M),B=a(11128),W=a.n(B),P=a(86335),N=a(84174),F=a(60274),O=a(34147),L=a(10108),H=a(41058),V=a(79562),U=a(12565),G=a(21233),j=a(19008),Z=a(3577),z=a(4922),K=a(72499),Y=a(27189),q=a(44415);function $(e){(async()=>{const t=await(0,D.zA)();1!==(await(0,j.M)(t)).length||(0,Y.OZ)(e.getParent())||(0,U.p)()})().catch(console.error)}l()({typeTag:"create-wallet",handle:async e=>{await P.RustModule.load();const t=await(0,D.zA)(),a=(0,N.getNetworkById)(e.networkId),r=new F.ZP,{publicDerivers:n}=await r.createWallet({db:t,network:a,recoveryPhrase:e.recoveryPhrase,walletName:e.walletName,walletPassword:e.walletPassword,accountIndex:e.accountIndex}),s=n[0].getPublicDeriverId();return(0,O.aR)({type:"wallet-state-update",params:{eventType:"new",publicDeriverId:s}}),(0,D.UA)(n[0],"new wallet",1),$(n[0]),await(0,L._)(n[0])}}),l()({typeTag:"create-hardware-wallet",handle:async e=>{await P.RustModule.load();const t=await(0,D.zA)(),a=new F.ZP,{publicDeriver:r}=await a.createHardwareWallet({db:t,network:e.network,walletName:e.walletName,publicKey:e.publicKey,hwFeatures:e.hwFeatures,addressing:e.addressing}),n=r.getPublicDeriverId();return(0,O.aR)({type:"wallet-state-update",params:{eventType:"new",publicDeriverId:n}}),await(0,D.UA)(r,"new wallet",1),$(r),await(0,L._)(r)}}),l()({typeTag:"remove-wallet",handle:async e=>{const t=await(async()=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.O8)(t);if(null==a)throw new Error("unexpected missing public key");return(await a.getPublicKey()).Hash})();for(const e of await(0,j.M)(await(0,D.zA)())){const a=(0,Z.O8)(e);if(null==a)throw new Error("unexpected missing public key");(await a.getPublicKey()).Hash===t&&await(0,G.q)({publicDeriver:e,conceptualWallet:e.getParent()})}(0,O.aR)({type:"wallet-state-update",params:{eventType:"remove",publicDeriverId:e.publicDeriverId}});const a=new V.default;await a.getCashbackWalletId()===e.publicDeriverId&&(0,U.p)()}}),l()({typeTag:"rename-public-deriver",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId);await t.rename({newName:e.newName})}}),l()({typeTag:"rename-conceptual-wallet",handle:async e=>{const t=await(0,D.zA)();for(const a of await(0,j.M)(t))a.getParent().getConceptualWalletId()===e.conceptualWalletId&&await a.getParent().rename({newName:e.newName})}});const J=l()({typeTag:"get-wallets",handle:async e=>await(0,L.k)(void 0,e.networkId)}),X=(l()({typeTag:"resync-wallet",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId);await(0,D.UA)(t,"UI resync"),await(0,K.sI)(t.getParent().getNetworkInfo().NetworkId)}}),l()({typeTag:"change-signing-password",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.y9)(t);if(null==a)throw new Error("unexpected missing asGetSigningKey result");const r=new Date(W()());await a.changeSigningKeyPassword({currentTime:r,oldPassword:e.oldPassword,newPassword:e.newPassword})}}),l()({typeTag:"get-private-staking-key",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.y9)(t);if(null==a)throw new Error("unexpected missing asGetSigningKey result");const r=(0,Z.Oq)(a);if(null==r)throw new Error("unexpected missing asGetAllAcccounting result");try{return(await(0,q.o)({publicDeriver:r,password:e.password})).to_hex()}catch(e){return{error:e.message}}}}));l()({typeTag:"remove-all-transactions",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.JM)(t);if(!a)throw new Error("unexpected missing asHasLevels result");await(0,z.ew)({publicDeriver:a});const r=await(0,V.loadSubmittedTransactions)();if(!r)return;const n=p()(r).call(r,(({publicDeriverId:t})=>t!==e.publicDeriverId));await(0,V.persistSubmittedTransactions)(n)}}),l()({typeTag:"pop-address",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.Bq)(t);if(null==a)throw new Error("unexpected missing asDisplayCutoff result");await a.popAddress()}}),l()({typeTag:"refresh-transactions",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.JM)(t);if(!a)throw new Error("unexpected missing asHasLevels result");const r=await(0,H.s)(new V.default),n=new F.ZP,s={publicDeriver:a,isLocalRequest:!0,getRecentTransactionHashes:r.getRecentTransactionHashes,getTransactionsByHashes:r.getTransactionsByHashes,checkAddressesInUse:r.checkAddressesInUse,getBestBlock:r.getBestBlock,getTokenInfo:r.getTokenInfo,getMultiAssetMetadata:r.getMultiAssetMintMetadata,getMultiAssetSupply:r.getMultiAssetSupply,getTransactionHistory:r.getTransactionsHistoryForAddresses};let o;if("number"==typeof e.skip&&e.limit&&e.beforeTx){const{skip:t,limit:a,beforeTx:r}=e;s.skip=t,s.limit=a;const i=await n.refreshTransactions(s);if(i.length===a)o=i;else{s.beforeTx=i.length?i[i.length-1]:r,s.isLocalRequest=!1;const e=await n.refreshTransactions(s);o=[...i,...R()(e).call(e,0,a-i.length)]}}else o=await n.refreshTransactions(s);return _()(o)}});var Q=a(72119),ee=a.n(Q),te=a(59927);const ae=l()({typeTag:"get-all-explorers",handle:async()=>{const e=await(0,D.zA)(),t=await(0,te.o2)({db:e});return[...ee()(t).call(t)]}}),re=l()({typeTag:"get-selected-explorer",handle:async()=>{const e=await(0,D.zA)(),t=await(0,te.Gb)({db:e});return[...ee()(t).call(t)]}}),ne=l()({typeTag:"save-selected-explorer",handle:async e=>{const t=await(0,D.zA)();return await(0,te.Qy)({db:t,explorer:e.explorer})}});var se=a(57096),oe=a(43577),ie=a(75723),le=a(90649);l()({typeTag:"sign-transaction",handle:async e=>{const{publicDeriverId:t,password:a,transactionHex:r}=e,n=await(0,U.A)(t);try{const e=await(0,oe.nH)(n,a,{tx:r,tabId:-1,partialSign:!1});return(0,ie.transactionHexAddSignaturesFromWitnessSetHex)(r,e)}catch(e){return{error:e.message}}}});const de=l()({typeTag:"sign-and-broadcast-transaction",handle:async e=>P.RustModule.WasmScope((async t=>{const a=await(0,U.A)(e.publicDeriverId),{senderUtxos:r,unsignedTx:n,metadata:s,password:o}=e;try{const i=P.RustModule.WalletV4.Transaction.from_hex(n),l={senderUtxos:r,unsignedTx:i,metadata:s?t.WalletV4.AuxiliaryData.from_hex(s):void 0},d=await(0,H.s)(new V.default),c=new F.ZP,{txId:u,signedTxHex:p}=await c.signAndBroadcast({publicDeriver:a,password:o,signRequest:l,sendTx:d.sendTx});i.free();try{await(0,oe.xC)(a,p)}catch(e){}return ue(e.publicDeriverId),{txId:u}}catch(e){return{error:e.message}}}))}),ce=l()({typeTag:"broadcast-transaction",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId);let a,r;if(e.signedTxHexArray){var n;a=y()(n=e.signedTxHexArray).call(n,(e=>({id:(0,ie.transactionHexToHash)(e),encodedTx:(0,le.hexToBytes)(e)}))),r=[]}else{const{signedTxHex:t,addressedUtxos:n}=e;if("string"!=typeof t)throw new Error("unexpected missing `signedTxHex` in request");a=[{id:(0,ie.transactionHexToHash)(t),encodedTx:(0,le.hexToBytes)(t)}],r=[n]}const s=t.getParent().getNetworkInfo(),o=await(0,H.s)(new V.default);try{if(await o.sendTx({network:"number"==typeof e.networkId?(0,N.getNetworkById)(e.networkId):s,txs:a}),"number"==typeof e.networkId&&s.NetworkId!==e.networkId)return null;try{for(let e=0;e<a.length;e++)await(0,oe.xC)(t,(0,le.bytesToHex)(a[e].encodedTx),r[e])}catch(e){}return ue(e.publicDeriverId),null}catch(e){return{error:e.message}}}});function ue(e){(async()=>{(0,O.aR)({type:"wallet-state-update",params:{eventType:"update",publicDeriverId:e,isRefreshing:!1,walletState:(await(0,L.k)(e))[0],newTxs:[]}})})().catch(console.error)}var pe=a(86902),ge=a.n(pe),he=a(33032),fe=a.n(he),we=a(58905),me=a(18689),ye=a(24558),xe=a(49871),_e=a(63371),ve=a(13469);function Ae(e,t,a){(0,me.B9)(e,{type:"connector_rpc_response",uid:t,return:a,protocol:"cardano"})}const be=l()({typeTag:"connect-response",handle:async e=>{var t;const{tabId:a}=e;if(null==a)return;const r=await(0,we.AO)(a);var n,s;null!=(null==r||null===(t=r.status)||void 0===t?void 0:t.requestType)&&(!0===e.accepted?((0,we.dl)(null==r||null===(n=r.status)||void 0===n?void 0:n.requestType,e.publicDeriverId,e.auth,a),r.status={publicDeriverId:e.publicDeriverId,auth:e.auth},await(0,we.h3)(a,r)):((0,we.dl)(null==r||null===(s=r.status)||void 0===s?void 0:s.requestType,null,null,a),await(0,we.jF)(a)))}}),Ee=l()({typeTag:"connect-auth-entry",handle:async e=>{const t=await(0,U.A)(e.publicDeriverId),a=(0,Z.O8)(t);if(null==a)throw new Error("unexpected missing asGetPublicKey result");const r=await(0,xe.T)(a);try{return await(0,ye.Zj)({appAuthID:e.appAuthID,deriver:t,checksum:r,password:e.password})}catch(e){return{error:e.message}}}}),Te=l()({typeTag:"user-sign-confirm",handle:async e=>{const t=await(0,we.AO)(e.tabId);if(null==t)return void console.error("Handling user sign confirmation but lost connection to dApp site.");const a=t.pendingSigns[String(e.uid)];if(!a)return void console.error("Handling user sign confirmation but signing request is unexpectedly missing..");const r=await(0,we._T)(e.tabId,!1);switch(a.request.type){case"tx/cardano":{var n;let t;try{let a;if(e.password)a=await(0,oe.nH)(r,e.password,e.tx);else{if(!e.witnessSetHex)throw new Error("missing password or witness from connector dialog");a=e.witnessSetHex}t={ok:a}}catch(e){t={err:"transaction signing failed"}}if("cardano-tx"!==a.continuationData.type)return void Ae(e.tabId,e.uid,{err:"unexpected error"});const{tx:s,returnTx:o}=a.continuationData;if(null==(null===(n=t)||void 0===n?void 0:n.ok))Ae(e.tabId,e.uid,t);else{const a=t.ok,r=P.RustModule.WasmScope((e=>{try{return e.WalletV4.FixedTransaction.from_hex(s).to_hex()}catch{return e.WalletV4.FixedTransaction.new_from_body_bytes((0,le.hexToBytes)(s)).to_hex()}})),n=(0,ie.transactionHexAddSignaturesFromWitnessSetHex)(r,a);Ae(e.tabId,e.uid,o?{ok:n}:{ok:(0,ie.transactionHexToWitnessSet)(n)})}}break;case"data":{if("cardano-data"!==a.continuationData.type)return void Ae(e.tabId,e.uid,{err:"unexpected error"});const{address:t,payload:n}=a.continuationData;let s;if(""!==e.password)try{s=await(0,F.mO)(r,e.password,t,n)}catch(t){return ve.Yd.error(`error when signing data ${t}`),void Ae(e.tabId,e.uid,{err:{code:_e.y.DATA_SIGN_PROOF_GENERATION,info:t.message}})}else{const{signedMessageData:t}=e;if(null==t)throw new Error("unexpected user signed confirmation: missing hardware wallet signing response");s=await(0,F.vX)(t.addressFieldHex,t.signatureHex,n,t.signingPublicKeyHex)}Ae(e.tabId,e.uid,{ok:s})}break;case"tx-reorg/cardano":{if("cardano-reorg-tx"!==a.continuationData.type)return void Ae(e.tabId,e.uid,{err:"unexpected error"});const{isCBOR:t}=a.continuationData,r=await(0,oe.Mk)([...e.tx],t);Ae(e.tabId,e.uid,{ok:r})}}delete t.pendingSigns[String(e.uid)],await(0,we.h3)(e.tabId,t)}}),Ce=l()({typeTag:"user-sign-reject",handle:async e=>{const t=await(0,we.AO)(e.tabId),a=null==t?void 0:t.pendingSigns[String(e.uid)];if(t&&a){var r;const n="data"===(null===(r=a.request)||void 0===r?void 0:r.type)?_e.y.DATA_SIGN_USER_DECLINED:_e.CO.USER_DECLINED;Ae(e.tabId,e.uid,{err:{code:n,info:"User rejected"}}),delete t.pendingSigns[String(e.uid)],await(0,we.h3)(e.tabId,t)}else console.error(`couldn't find tabId: ${e.tabId}`)}}),Ie=l()({typeTag:"sign-error",handle:async e=>{const t=await(0,we.AO)(e.tabId),a=null==t?void 0:t.pendingSigns[String(e.uid)];if(t&&a){var r;const n="data"===(null===(r=a.request)||void 0===r?void 0:r.type)?_e.y.DATA_SIGN_PROOF_GENERATION:_e.CO.PROOF_GENERATION;Ae(e.tabId,e.uid,{err:{code:n,info:`utxo error: ${e.errorType} (${e.data})`}}),delete t.pendingSigns[String(e.uid)],await(0,we.h3)(e.tabId,t)}else console.error(`couldn't find tabId: ${e.tabId}`)}}),ke=l()({typeTag:"tx_sign_window_retrieve_data",handle:async()=>{await new(A())((e=>{fe()(e,1)}));const e=await(0,we.Y7)();for(const a of ge()(e)){const r=e[a];for(const e of ge()(r.pendingSigns)){const n=r.pendingSigns[e];if(!n.openedWindow){var t;if(n.openedWindow=!0,await(0,we.h3)(Number(a),r),null==(null===(t=r.status)||void 0===t?void 0:t.publicDeriverId))throw new Error("no public deriver set for request");return{publicDeriverId:r.status.publicDeriverId,sign:n.request,tabId:Number(a),requesterUrl:r.url}}}}return null}}),De=l()({typeTag:"connect_retrieve_data",handle:async()=>{const e=await(0,we.Y7)();for(const a of ge()(e)){var t;const r=e[a];if(null!==(t=r.status)&&void 0!==t&&t.requestType)return r.status.openedWindow=!0,{url:r.url,appAuthID:r.appAuthID,imgBase64Url:r.imgBase64Url,tabId:Number(a)}}return null}}),Se=l()({typeTag:"notify-dapp-connection-removed",handle:async e=>{const t=await(0,we.Y7)();for(const a of ge()(t)){const r=t[a];e&&r.url!==e.url||(0,me.B9)(Number(a),{type:"disconnect"})}}});l()({typeTag:"get_connected_sites",handle:async()=>{var e;const t=await(0,we.Y7)();return{sites:y()(e=ge()(t)).call(e,(e=>t[e].url))}}}),a(63139);var Me=a(33913);function Re(e){return new(A())(((t,a)=>{var r;const n={type:e.type,request:_()(null!==(r=e.request)&&void 0!==r?r:null)};window.chrome.runtime.sendMessage(n,(r=>{var n;console.debug(`CLIENT [${e.type}] received result: `,_()((0,le.sanitizeForLog)(r))),window.chrome.runtime.lastError?a(`Error ${window.chrome.runtime.lastError} when calling the background with: ${null!==(n=_()((0,le.sanitizeForLog)(e)))&&void 0!==n?n:"undefined"}`):t(r)}))}))}function Be(e){var t;const a=e=>y()(e).call(e,(e=>y()(e).call(e,(e=>({...e,values:w()(e)&&T.a.from(w()(e))})))));return e.submittedTransactions=y()(t=e.submittedTransactions).call(t,(({networkId:e,publicDeriverId:t,transaction:a,usedUtxos:r,isDrepDelegation:n})=>({networkId:e,publicDeriverId:t,transaction:(0,b.T)(a),usedUtxos:r,isDrepDelegation:n}))),e.balance=T.a.from(e.balance),e.assetDeposits=T.a.from(e.assetDeposits),e.allAddressesByType=a(e.allAddressesByType),e.internalAddressesByType=a(e.internalAddressesByType),e.externalAddressesByType=a(e.externalAddressesByType),e}async function We(e){const t=await Re({type:J.typeTag,request:{networkId:e}});if(t.error)throw console.error("error when loading wallets:",t.error),new Error(`error when loading wallets: ${t.error}`);if(!h()(t))throw new Error(`loading wallets not array: ${_()(t)}`);for(const e of t)Be(e);return t}async function Pe(e){var t;const a=e.signRequest.unsignedTx.build_tx(),r=a.body(),n={senderUtxos:e.signRequest.senderUtxos,unsignedTx:a.to_hex(),metadata:null===(t=e.signRequest.metadata)||void 0===t?void 0:t.to_hex(),password:e.password,publicDeriverId:e.publicDeriverId};r.free(),a.free();const s=await Re({type:de.typeTag,request:n});return st(s),nt(s,C.IncorrectWalletPasswordError)}async function Ne(e){const t=await Re({type:ce.typeTag,request:e});if(st(t),null!=t&&t.error)throw new Error(t.error)}async function Fe(e){return nt(await Re({type:X.typeTag,request:e}),Me.UZ)}const Oe=async e=>await Re({type:se.I.typeTag,request:e});async function Le(e){return nt(await Re({type:Ee.typeTag,request:e}),Me.UZ)}async function He(){return new(c())(await Re({type:re.typeTag}))}async function Ve(){return new(c())(await Re({type:ae.typeTag}))}const Ue=async e=>await Re({type:ne.typeTag,request:e}),Ge=async e=>await Re({type:I.k.typeTag,request:e}),je=async()=>{await Re({type:I.X.typeTag})},Ze=async e=>{await Re({type:be.typeTag,request:e})},ze=async e=>{await Re({type:Te.typeTag,request:e})},Ke=async e=>{await Re({type:Ce.typeTag,request:e})},Ye=async e=>{await Re({type:Ie.typeTag,request:e})},qe=async()=>await Re({type:ke.typeTag}),$e=async()=>await Re({type:De.typeTag}),Je=async e=>{await Re({type:Se.typeTag,request:e})},Xe=async({networkId:e})=>await Re({type:K.Zc.typeTag,request:{networkId:e}});function Qe(e){chrome.runtime.sendMessage({type:"bring_rpc_request",function:"set-cashback-wallet",params:e})}const et=l()({walletStateUpdate:[],serverStatusUpdate:[],coinPriceUpdate:[]}),tt=window.location.origin||null,at="yoroi-emit-update";function rt(e){et.coinPriceUpdate.push(e)}function nt(e,t){var a;if("string"==typeof e.error&&n()(a=e.error).call(a,C.IncorrectWalletPasswordError.errorId))throw new t;if(e.error)throw new C.SendTransactionApiError;return e}function st(e){var t;if(null!=e&&null!==(t=e.error)&&void 0!==t&&n()(t).call(t,"api.errors.invalidWitnessError"))throw new C.InvalidWitnessError}chrome.runtime.onMessage.addListener(((e,{origin:t},a)=>{if(null!=tt&&t!==tt)return void ve.Yd.debug("[client] ignoring non-origin message ("+t+"/"+tt+")");if(e.type!==at)return void ve.Yd.debug("[client] ignoring unknown type message ("+e.type+"/"+at+")");const r=e.data,n=typeof r;if("string"!==n)return void ve.Yd.error("[client] unexpected message type ("+n+") a JSON string is expected, but received: "+_()((0,le.sanitizeForLog)(r)));let s;try{s=JSON.parse(r)}catch(e){return void ve.Yd.error("unparsable message: "+r+" | Error: "+(0,ve.n)(e))}if("object"==typeof s){if(ve.Yd.debug("get message from background:",_()((0,le.sanitizeForLog)(s))),"wallet-state-update"===s.type){var i,l,d;s.params.newTxs&&(s.params.newTxs=p()(l=y()(d=s.params.newTxs).call(d,(e=>{try{return function(e){return null==(null==e?void 0:e.txid)?null:Object.prototype.hasOwnProperty.call(e,"certificates")?b.Z.fromData((0,b.T)(e)):E.Z.fromData((0,E.T)(e))}(e)}catch(t){return console.error("Failed to deserialize a transaction from: "+_()(e),t),null}}))).call(l,Boolean)),s.params.walletState&&Be(s.params.walletState),o()(i=et.walletStateUpdate).call(i,(e=>e(s.params)))}else if("server-status-update"===s.type){var c;o()(c=et.serverStatusUpdate).call(c,(e=>e(s.params)))}else if("coin-price-update"===s.type){var u;o()(u=et.coinPriceUpdate).call(u,(e=>e(s.params)))}}else ve.Yd.error("unrecognizable message type: "+typeof s+" (expected object); Original message: "+r)}))},70526:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r,n,s=a(87672),o=a.n(s),i=a(67294),l=a(259),d=a(30710),c=a(17621),u=a.n(c),p=a(90649),g=a(48521);const h=(e,t,a)=>({primary:e,secondary:t,spots:a}),f=[h("#E1F2FF","#17D1AA","#A80B32"),h("#E1F2FF","#FA5380","#0833B2"),h("#E1F2FF","#F06EF5","#0804F7"),h("#E1F2FF","#EBB687","#852D62"),h("#E1F2FF","#F59F9A","#085F48")],w=(e,t=0)=>{if(t<-100||t>100)throw Error("Expected factor between -100 and 100 (default 0)");let a=u()(e);for(let e=0;e<Math.abs(t);e++)a=t<0?a.desaturate():a.saturate();return a.toHexString()};let m=(0,l.observer)((n=class extends i.Component{render(){const{iconSeed:e,scalePx:t,size:a,saturationFactor:r}=this.props;if(""===e)return(0,g.jsx)("div",{style:{width:"42px",height:"42px"}});const n=(0,p.hexToBytes)(e)[0]%f.length,s=f[n];return(0,g.jsx)(d.default,{seed:e,size:a,scale:null!=t?t:5,bgColor:w(s.primary,r),color:w(s.secondary,r),spotColor:w(s.spots,r)})}},o()(n,"defaultProps",{scalePx:5,saturationFactor:0,size:7}),r=n))||r},87351:(e,t,a)=>{"use strict";a.d(t,{Qc:()=>k,ZP:()=>M});var r,n,s=a(32366),o=a.n(s),i=a(41511),l=a.n(i),d=a(89400),c=a.n(d),u=a(87672),p=a.n(u),g=a(67294),h=a(259),f=a(99095),w=a(70526),m=(a(55343),a(69166)),y=a(63367),x=a(22417),_=a(90649),v=a(99226),A=a(90948),b=a(23972),E=a(28336),T=a(48521);const C=(0,f.defineMessages)({tokenTypes:{id:"wallet.topbar.dialog.tokenTypes",defaultMessage:"!!!Token types"}});function I(e){return D(e,{saturationFactor:0,size:8,scalePx:5,iconSize:40,borderRadius:4})}function k(e){return D(e,{saturationFactor:0,size:8,scalePx:4,iconSize:32,borderRadius:4})}function D(e,t){return[e.TextPart,(0,T.jsx)(v.Z,{sx:{width:`${t.iconSize}px`,height:`${t.iconSize}px`,borderRadius:`${t.borderRadius}px`,alignItems:"center",justifyContent:"center","& .identicon":{borderRadius:`${t.borderRadius}px`}},children:(0,T.jsx)(w.default,{iconSeed:e.ImagePart,saturationFactor:t.saturationFactor,size:t.size,scalePx:t.scalePx})})]}const S=(0,A.ZP)(v.Z)((({theme:e})=>({"& svg path":{fill:e.palette.ds.el_gray_medium}})));let M=(0,h.observer)((n=class extends g.Component{constructor(...e){super(...e),p()(this,"getTotalAmount",(()=>(0,_.maybe)(this.props.walletAmount,(e=>{var t,a;return null!==(t=null===(a=this.props.rewards)||void 0===a?void 0:a.joinAddCopy(e))&&void 0!==t?t:e})))),p()(this,"countTokenTypes",(()=>{var e;return this.props.walletAmount&&c()(this.props.walletAmount)&&l()(c()(this.props.walletAmount))?o()(e=c()(this.props.walletAmount)).call(e,((e,t)=>{const a=this.props.getTokenInfo(t);return""===a.Identifier||a.IsDefault||(!0===a.IsNFT?e.nfts++:e.tokenTypes++),e}),{tokenTypes:0,nfts:0}):{tokenTypes:0,nfts:0}}))}render(){var e;const{intl:t}=this.context,{shouldHideBalance:a,walletId:r,idx:n,unitOfAccountSetting:s,getCurrentPrice:o,id:i}=this.props,[l,d]=null!==(e=(0,_.maybe)(this.props.plate,I))&&void 0!==e?e:[],c=this.getTotalAmount(),{tokenTypes:u,nfts:p}=this.countTokenTypes(),g=`${i}-selectWallet_${n}-button`,h=`${i}:walletCard_${n}-walletName-text`,f=`${i}:walletCard_${n}`,w=`${i}:walletCard_${n}-walletTokensAmount-text`,A=`${i}:walletCard_${n}-walletNFTsAmount-text`,k=e=>e?"ds.gray_200":!0===this.props.isCurrentWallet?"ds.primary_600":"transparent";return(0,T.jsx)(v.Z,{sx:{background:"ds.bg_color_max"},mb:"16px",children:(0,T.jsx)(y._l,{draggableId:r.toString(),index:n,children:(e,r)=>(0,T.jsxs)(v.Z,{tabIndex:"0",role:"button",...e.draggableProps,ref:e.innerRef,sx:{padding:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"8px",border:"1px solid",borderColor:k(r.isDragging),"&:hover":{borderColor:!0!==this.props.isCurrentWallet&&"ds.gray_300","& .dragIcon":{opacity:1}},cursor:"pointer",backgroundColor:r.isDragging?"ds.bg_color_min":"transparent",opacity:r.isDragging?"0.4":"1"},children:[(0,T.jsx)(v.Z,{role:"button",tabIndex:"0",onClick:this.props.onSelect,onKeyDown:this.props.onSelect,id:g,children:(0,T.jsxs)(v.Z,{display:"flex",gap:"24px",children:[(0,T.jsxs)(v.Z,{display:"flex",gap:"8px",children:[d,(0,T.jsxs)(v.Z,{maxWidth:"112px",width:"112px",children:[(0,T.jsx)(b.Z,{id:h,variant:"body2",color:"ds.text_gray_medium",fontWeight:500,children:(0,E.truncateLongName)(this.props.name)}),(0,T.jsx)(b.Z,{variant:"caption1",color:"ds.text_gray_low",children:l})]})]}),(0,T.jsx)(v.Z,{sx:{"& .MuiTypography-root":{mt:"0px",mb:"0px"}},children:(0,T.jsx)(x.Z,{shouldHideBalance:a,amount:c,getTokenInfo:this.props.getTokenInfo,showFiat:!0,showAmount:!0,unitOfAccountSetting:s,getCurrentPrice:o,id:f})}),(0,T.jsxs)(v.Z,{color:"ds.text_gray_medium",children:[(0,T.jsxs)(v.Z,{display:"flex",alignItems:"center",children:[(0,T.jsxs)(b.Z,{variant:"body2",marginRight:"4px",lineHeight:"16px",children:[t.formatMessage(C.tokenTypes),":"]}),(0,T.jsx)(b.Z,{variant:"caption1",fontWeight:500,lineHeight:"16px",id:w,children:u})]}),(0,T.jsxs)(v.Z,{display:"flex",alignItems:"center",mt:"8px",children:[(0,T.jsxs)(b.Z,{variant:"body2",marginRight:"4px",lineHeight:"16px",children:["NFTs",":"]}),(0,T.jsx)(b.Z,{variant:"caption1",fontWeight:500,lineHeight:"16px",id:A,children:p})]})]})]})}),(0,T.jsx)(v.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 0.3s",opacity:r.isDragging?1:0},className:"dragIcon",...e.dragHandleProps,children:(0,T.jsx)(S,{children:(0,T.jsx)(m.r,{})})})]})})})}},p()(n,"contextTypes",{intl:f.intlShape.isRequired}),p()(n,"defaultProps",{isCurrentWallet:!1}),r=n))||r},36094:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>T});var r=a(20116),n=a.n(r),s=a(33032),o=a.n(s),i=a(67294),l=a(96486),d=a(47867),c=a(23972),u=a(54799),p=a(19896),g=a(35450),h=a(5108),f=a(259),w=a(42133),m=a(48521);function y(e){const{title:t,children:a,dialogActions:r,closeOnOverlayClick:s,onClose:u,className:g,closeButton:f,withCloseButton:w,backButton:y,scrollableContentClass:_,id:v,styleFlags:T,forceBottomDivider:C,contentHeader:I}=e,[k,D]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=o()((()=>{const e=document.querySelector(_?`.${_}`:".ModalContent");e&&(e.clientHeight<e.scrollHeight?D(!0):D(!1))}),30);return()=>{clearTimeout(e)}}),[a]);const S=r&&r.length>0,M=w||f,R=null!=r&&n()(r).call(r,(e=>!0===e.isSubmitting)).length>0;return(0,m.jsx)(d.Z,{open:!0,onClose:!0===s?u:(e,t)=>{"backdropClick"!==t&&(null==u||u(e))},sx:{bgcolor:"ds.special_web_overlay",display:"flex",justifyContent:"center",alignItems:"center","& .MuiBackdrop-root":{backgroundColor:"transparent"}},id:v+"-dialogWindow-modalWindow",children:(0,m.jsxs)(A,{display:"flex",flexDirection:"column",className:g,style:e.styleOverride,boxShadow:"0px 13px 20px -1px #00000026",contentHasScroll:k,children:[null!=t&&""!==t?(0,m.jsx)(c.Z,{as:"h1",variant:"body1",className:"dialog__title",id:String(v)+"-dialogTitle-text",color:"ds.text_gray_medium",children:t}):null,null!=a?(0,m.jsxs)(b,{pt:null!=T&&T.contentNoTopPadding?"0px !important":void 0,pb:k||!S?"24px":"0px !important",className:"ModalContent",style:e.styleContentOverride,children:[I&&(0,m.jsx)(p.Z,{children:I}),(0,m.jsx)(p.Z,{sx:{maxHeight:"100%",overflowY:"auto",overflowX:"hidden",flexGrow:1},children:a})]}):null,S&&(0,m.jsx)(E,{hasDivider:C||k,children:(0,l.map)(r,((e,t)=>{var a;const r=e.label.toLowerCase().replace(/ /gi,"");return(0,m.jsx)(h.Z,{variant:"primary",id:null!==(a=e.id)&&void 0!==a?a:v+"-"+r+"-button",...(n=e.danger,s=e.primary,n?{variant:"contained",color:"error"}:s?{variant:"primary"}:s?!0===n?{variant:"danger"}:!0===s?{variant:"primary"}:{variant:"secondary"}:{variant:"secondary"}),loading:e.isSubmitting,onClick:e.onClick,disabled:!0===e.disabled||!0===e.isSubmitting,size:e.size,children:e.label},t);var n,s}))}),!R&&M?(0,m.jsx)(x,{onClose:u,closeButton:f?i.cloneElement(f,{onClose:u}):null,idLocatorPath:v}):null,!R&&y]})})}y.defaultProps={title:void 0,children:void 0,dialogActions:void 0,closeButton:void 0,backButton:void 0,className:void 0,scrollableContentClass:void 0,contentHeader:null,styleOverride:void 0,onClose:void 0,closeOnOverlayClick:!1,id:"dialog"};const x=({onClose:e,closeButton:t,sx:a,idLocatorPath:r="modalWindow"})=>(0,m.jsx)(p.Z,{sx:{position:"absolute",display:"inline-flex",right:"16px",top:"16px",cursor:"pointer",...null!=a?a:{}},onClick:e,id:r+"-closeModal-button",children:t||(0,m.jsx)(v,{children:(0,m.jsx)(w.r,{})})}),_=(0,i.forwardRef)((({contentHasScroll:e,empty:t,hasDivider:a,...r},n)=>(0,m.jsx)(p.Z,{...r,ref:n}))),v=(0,g.Z)(u.Z)((({theme:e,active:t})=>({backgroundColor:t&&e.palette.ds.gray_200,"& svg":{"& path":{fill:e.palette.ds.el_gray_medium}}}))),A=(0,g.Z)(_)((({theme:e,contentHasScroll:t,empty:a=!1})=>{const r="classic"===e.name||"modern"===e.name?"var(--yoroi-comp-dialog-min-width-md)":"648px",n=t?"1px solid":"";return{position:"relative",minWidth:a?"0px":r,borderRadius:"classic"===e.name?0:8,paddingTop:"classic"===e.name?"25px":"0px",paddingBottom:"classic"===e.name||"modern"===e.name?"30px":"0px",maxWidth:"classic"===e.name?"785px":"824px",backgroundColor:a?void 0:e.palette.ds.bg_color_max,color:"var(--yoroi-comp-dialog-text)",maxHeight:"95vh","& .dialog__title":{marginBottom:"classic"===e.name?"22px":"0px",padding:"classic"===e.name?"0":"24px",fontWeight:500,textAlign:"center",textTransform:"uppercase",letterSpacing:0,display:"block",borderBottom:"classic"===e.name||"modern"===e.name?"":n,borderBottomColor:"classic"===e.name||"modern"===e.name?e.palette.gray[200]:e.palette.grayscale[200]}}})),b=(0,g.Z)(p.Z)((({theme:e})=>({overflowX:"hidden",overflowY:"overlay",maxHeight:"70vh",paddingLeft:"classic"===e.name?"30px":"24px",paddingRight:"classic"===e.name?"30px":"24px",paddingTop:"classic"===e.name?"0px":"24px",paddingBottom:"classic"===e.name||"modern"===e.name?"0px":"24px",flexGrow:1,display:"flex",flexFlow:"column"}))),E=(0,g.Z)(_)((({theme:e,hasDivider:t})=>({display:"flex",gap:"24px",paddingLeft:"classic"===e.name?"30px":"24px",paddingRight:"classic"===e.name?"30px":"24px",paddingTop:"classic"===e.name||"modern"===e.name?"0":"24px",paddingBottom:"classic"===e.name||"modern"===e.name?"0":"24px",marginTop:"classic"===e.name?"20px":"0px",borderTop:"classic"===e.name||"modern"===e.name?"":t?"1px solid":"",borderTopColor:"classic"===e.name||"modern"===e.name?e.palette.gray[200]:e.palette.grayscale[200],"& button":{width:"50%","&:only-child":{width:"100%"}}})));const T=(0,f.observer)(y)},69051:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var r,n,s=a(87672),o=a.n(s),i=a(67294),l=a(259),d=a(94184),c=a.n(d),u=a(11798),p=a(48521);let g=(0,l.observer)((n=class extends i.Component{constructor(...e){super(...e),o()(this,"root",void 0)}render(){const e=null!=this.props.color&&this.props.color>=1&&this.props.color<=3;let t;switch(this.props.color){case 1:t=u.Z.blue;break;case 2:t=u.Z.gray;break;case 3:t=u.Z.white;break;default:t=u.Z.light}const a=1-(this.props.small?1:0)+(this.props.large?1:0),r=[u.Z.smallSize,u.Z.standardSize,u.Z.largeSize][a],n=e?t:!0===this.props.light?u.Z.light:u.Z.dark,s=c()([u.Z.component,n,r]);return(0,p.jsx)("div",{className:s,id:this.props.id&&this.props.id+"-loadingSpinner-component",ref:e=>{this.root=e}})}},o()(n,"defaultProps",{small:!1,large:!1,light:!1,color:0,id:"somewhere"}),r=n))||r},66905:(e,t,a)=>{"use strict";a.d(t,{yK:()=>o,r7:()=>i,M8:()=>l,C4:()=>d,OC:()=>c,Iz:()=>u,x_:()=>p,Q:()=>g});var r=a(56474),n=a.n(r),s=a(905);new s.Z(10).pow(8);const o=2147483648,i=n()({BIP44:2147483692,CIP1852:2147485500}),l=n()({CARDANO:2147485463}),d=20,c=n()({EXTERNAL:0,INTERNAL:1,CHIMERIC_ACCOUNT:2,GOVERNANCE_DREP_KEYS:3}),u=0,p=0,g=2160;new s.Z(25e6)},90649:(e,t,a)=>{"use strict";a.d(t,{bytesToHex:()=>S,bytesToBase64:()=>M,hexToBytes:()=>R,hexToUtf:()=>B,utfToBytes:()=>W,logErr:()=>P,createFilterUniqueBy:()=>N,listValues:()=>F,last:()=>O,maybe:()=>L,noop:()=>H,fail:()=>V,forceNonNull:()=>U,purify:()=>G,isEmptyArray:()=>j,sanitizeForLog:()=>Z,ensureArray:()=>z,iterateLenGet:()=>K,iterateLenGetMap:()=>Y});var r=a(2991),n=a.n(r),s=a(20116),o=a.n(s),i=a(66419),l=a.n(i),d=a(98341),c=a.n(d),u=a(87672),p=a.n(u),g=a(16976),h=a.n(g),f=a(69301),w=a.n(f),m=a(86902),y=a.n(m),x=(a(11128),a(41511)),_=a.n(x),v=(a(33032),a(93476),a(59340)),A=a.n(v),b=a(32366),E=a.n(b),T=(a(47302),a(26295),a(20455)),C=a.n(T),I=a(36384),k=a.n(I),D=(a(29828),a(48764).Buffer);function S(e){return D.from(e).toString("hex")}function M(e){return D.from(e).toString("base64")}function R(e){return D.from(e,"hex")}function B(e){return R(e).toString("utf-8")}function W(e){return D.from(e,"utf-8")}function P(e,t){try{return e()}catch(e){throw console.error("string"==typeof t?t:t(e),e),e}}function N(e=(e=>e)){const t=new(k());return a=>{const r=e(a);return!t.has(r)&&t.add(r)&&!0}}function F(e){return C()(e)}function O(e){return e[e.length-1]}function L(e,t){return null==e?e:t(e)}function H(...e){}function V(...e){throw new Error(...e)}function U(e){return e}function G(e){return JSON.parse(A()(e))}function j(e){return _()(e)&&0===e.length}function Z(e){const t=["password"];if(null!=e&&"object"==typeof e){var a;let r=E()(a=y()(e)).call(a,((t,a)=>({...t,[a]:Z(e[a])})),{});for(const e of t)null!=r[e]&&(r={...r,[e]:"[sanitized]"});return r}return e}function z(e){return _()(e)?e:[e]}function K(e){return q.from(function*(){if(null!=e){const t=e.len();for(let a=0;a<t;a++)yield e.get(a)}}())}function Y(e){return $.fromTuples(function*(){if(e)for(const t of K(w()(e).call(e)))yield[t,e.get(t)]}())}class q{constructor(e){p()(this,"__source",void 0),this.__source=e}static from(e){return new q(e)}[c()](){return h()(this.__source)}forEach(e){for(const t of this.__source)e(t)}zip(e){return function(e,t){return q.from(function*(){const a=h()(e),r=h()(t);for(;;){const e=a.next(),t=r.next();if(e.done||t.done)break;yield[e.value,t.value]}}())}(this.__source,e)}join(e){const t=this.__source;return q.from(function*(){for(const e of t)yield e;for(const t of e)yield t}())}toArray(){return l()(this.__source)}toSet(){return new(k())(this.__source)}map(e){const t=this.__source;return q.from(function*(){for(const a of t)yield e(a)}())}flatMap(e){const t=this.__source;return q.from(function*(){for(const a of t)for(const t of e(a))yield t}())}filter(e){const t=this.__source;return q.from(function*(){for(const a of t)e(a)&&(yield a)}())}unique(){const e=new(k());return o()(this).call(this,(t=>!e.has(t)&&(e.add(t),!0)))}nonNull(){return o()(this).call(this,(e=>null!=e))}}class $ extends q{static fromTuples(e){return new $(e)}keys(){return n()(this).call(this,(([e])=>e))}values(){return n()(this).call(this,(([,e])=>e))}nonNullValue(){return $.fromTuples(o()(this).call(this,(([,e])=>null!=e)))}}},63139:(e,t,a)=>{"use strict";a.d(t,{UnexpectedError:()=>c,default:()=>u});var r=a(59340),n=a.n(r),s=a(87672),o=a.n(s),i=a(27216);const l=(0,a(99095).defineMessages)({unknownError:{id:"app.errors.unknowError",defaultMessage:"!!!Unknown error occurred. Please retry."},unexpectedError:{id:"app.errors.unexpectedError",defaultMessage:"!!!Unexpected error occurred. Please retry."}});class d extends i.Z{constructor({id:e,defaultMessage:t,values:a}){if(!e)throw new Error("id:string is required.");if(null==t)throw new Error("defaultMessage:string is required.");super(`${e}: ${void 0===a?"undefined":n()(a)}`),o()(this,"id",void 0),o()(this,"defaultMessage",void 0),o()(this,"values",void 0),this.id=e,this.defaultMessage=t,this.values=a||{}}}class c extends d{constructor(){super({id:l.unexpectedError.id,defaultMessage:l.unexpectedError.defaultMessage||""})}}const u=d},38043:(e,t,a)=>{"use strict";a.d(t,{default:()=>n,connectorMessages:()=>s});var r=a(99095);const n=(0,r.defineMessages)({notEnoughMoneyToSendError:{id:"api.errors.NotEnoughMoneyToSendError",defaultMessage:"!!!Insufficient funds to complete this transaction."},receive:{id:"global.receive",defaultMessage:"!!!Receive"},send:{id:"wallet.navigation.send",defaultMessage:"!!!Send"},yoroi:{id:"global.yoroi",defaultMessage:"!!!Yoroi"},yoroiNightly:{id:"global.yoroiNightly",defaultMessage:"!!!Yoroi Nightly"},yoroiIntro:{id:"global.yoroi.intro",defaultMessage:"!!!Light wallet for Cardano assets"},here:{id:"global.util.here",defaultMessage:"!!!here"},addToken:{id:"global.labels.addToken",defaultMessage:"!!!Add Token"},addNft:{id:"global.labels.addNft",defaultMessage:"!!!Add NFT"},nfts:{id:"global.labels.nft",defaultMessage:"!!!NFTs"},passwordLabel:{id:"global.labels.password",defaultMessage:"!!!Password"},standardWallet:{id:"wallet.nav.type.standard",defaultMessage:"!!!Standard wallet"},transactionFee:{id:"wallet.send.preview.transactionFee",defaultMessage:"!!!Transaction Fee"},trezorWallet:{id:"wallet.nav.type.trezor",defaultMessage:"!!!Trezor wallet"},ledgerWallet:{id:"wallet.nav.type.ledger",defaultMessage:"!!!Ledger wallet"},important:{id:"global.dialogs.important",defaultMessage:"!!!Important"},fieldIsRequired:{id:"global.errors.fieldIsRequired",defaultMessage:"!!!This field is required."},invalidWalletName:{id:"global.errors.invalidWalletName",defaultMessage:"!!!Wallet name requires at least 1 and no more than 40 characters."},invalidWalletPassword:{id:"global.errors.invalidWalletPassword",defaultMessage:"!!!Password requires at least 10 characters."},invalidRepeatPassword:{id:"global.errors.invalidRepeatPassword",defaultMessage:"!!!Passwords do not match. Please retype."},errorLabel:{id:"global.labels.error",defaultMessage:"!!!Error"},processingLabel:{id:"global.labels.processing",defaultMessage:"!!!Processing..."},nextButtonLabel:{id:"global.labels.next",defaultMessage:"!!!Next"},backButtonLabel:{id:"global.labels.back",defaultMessage:"!!!Back"},instructionTitle:{id:"transfer.instructions.instructions.title.label",defaultMessage:"!!!Instructions"},confirm:{id:"global.labels.confirm",defaultMessage:"!!!Confirm"},continue:{id:"global.labels.continue",defaultMessage:"!!!Continue"},current:{id:"global.labels.current",defaultMessage:"!!!Current"},name:{id:"global.labels.name",defaultMessage:"!!!Name"},amount:{id:"global.labels.amount",defaultMessage:"!!!Amount"},minAda:{id:"global.labels.minAda",defaultMessage:"!!!Min-ADA"},id:{id:"global.labels.id",defaultMessage:"!!!ID"},finish:{id:"global.labels.finish",defaultMessage:"!!!Finish"},cancel:{id:"global.labels.cancel",defaultMessage:"!!!Cancel"},close:{id:"global.labels.close",defaultMessage:"!!!Close"},change:{id:"global.labels.change",defaultMessage:"!!!Change"},delegateLabel:{id:"global.labels.delegate",defaultMessage:"!!!Delegate"},create:{id:"global.labels.create",defaultMessage:"!!!Create"},restore:{id:"global.labels.restore",defaultMessage:"!!!Restore"},remove:{id:"global.labels.remove",defaultMessage:"!!!Remove"},cardanoscan:{id:"global.explorers.cardanoscan",defaultMessage:"!!!Cardanoscan"},exportButtonLabel:{id:"wallet.transaction.export.dialog.exportButton.label",defaultMessage:"!!!Export"},derivationPathLabel:{id:"wallet.receive.confirmationDialog.derivationPathLabel",defaultMessage:"!!!Derivation Path"},delegateNow:{id:"wallet.staking.banner.delegate",defaultMessage:"!!!Delegate Now"},delegateVote:{id:"wallet.staking.banner.delegateVote",defaultMessage:"!!!Delegate Vote"},delegateToYoroi:{id:"wallet.staking.banner.delegateToYoroi",defaultMessage:"!!!Delegate to our DRep and help the Cardano network evolve in a way that benefits your wallet experience."},delegateToYoroiDRep:{id:"governance.delegateToYoroiDRep",defaultMessage:"!!!Delegate to Yoroi DRep"},considerDelegating:{id:"governance.considerDelegating",defaultMessage:"!!!Consider delegating to Yoroi?"},publicKeyExplanation:{id:"global.publicKey.explanation",defaultMessage:"!!!Public keys allow seeing the wallet history for the wallet, but does <strong>not</strong> allow to spend or move the funds in any way (private key is <strong>not</strong> included)"},whyUse:{id:"global.why",defaultMessage:"!!!This can be used to:"},save:{id:"global.labels.save",defaultMessage:"!!!Save"},learnMore:{id:"global.labels.LearnMore",defaultMessage:"!!!Learn more"},smartContracts:{id:"global.labels.smartContracts",defaultMessage:"!!!Smart contracts"},walletLabel:{id:"settings.menu.wallet.link.label",defaultMessage:"!!!Wallet"},assetDepositLabel:{id:"settings.menu.assetDeposit.link.label",defaultMessage:"!!!Locked assets deposit"},languageEnglish:{id:"global.language.english",defaultMessage:"!!!English"},languageJapanese:{id:"global.language.japanese",defaultMessage:"!!!"},languageRussian:{id:"global.language.russian",defaultMessage:"!!!P"},languageChineseSimplified:{id:"global.language.chinese.simplified",defaultMessage:"!!!"},languageChineseTraditional:{id:"global.language.chinese.traditional",defaultMessage:"!!!"},languageKorean:{id:"global.language.korean",defaultMessage:"!!!"},languageGerman:{id:"global.language.german",defaultMessage:"!!!Deutsch"},languageFrench:{id:"global.language.french",defaultMessage:"!!!Franais"},languagePortuguese:{id:"global.language.portuguese",defaultMessage:"!!!Portugus"},languageDutch:{id:"global.language.dutch",defaultMessage:"!!!Nederlands"},languageIndonesian:{id:"global.language.indonesian",defaultMessage:"!!!Bahasa Indonesia"},languageTurkish:{id:"global.language.turkish",defaultMessage:"!!!Turkish"},languageSpanish:{id:"global.language.spanish",defaultMessage:"!!!Espaol"},languageItalian:{id:"global.language.italian",defaultMessage:"!!!Italiano"},languageCzech:{id:"global.language.czech",defaultMessage:"!!!Czech"},languageSlovak:{id:"global.language.slovak",defaultMessage:"!!!Slovak"},languageVietnamese:{id:"global.language.vietnamese",defaultMessage:"!!!Vietnamese"},addressLabel:{id:"wallet.receive.confirmationDialog.addressLabel",defaultMessage:"!!!Address"},addressesLabel:{id:"wallet.receive.confirmationDialog.addressesLabel",defaultMessage:"!!!Addresses"},addWalletLabel:{id:"wallet.nav.addButton",defaultMessage:"!!!Add new wallet"},allWalletsLabel:{id:"wallet.nav.allWalletsLabel",defaultMessage:"!!!All wallets"},changeWallet:{id:"wallet.nav.changeWallet",defaultMessage:"!!!Change wallet"},attentionHeaderText:{id:"widgets.warningBox.headerText",defaultMessage:"!!!Attention"},recoveryPhraseDialogTitle:{id:"wallet.backup.recovery.phrase.dialog.title",defaultMessage:"!!!Recovery phrase"},faqLinkUrl:{id:"settings.support.faq.faqLinkURL",defaultMessage:"!!!https://yoroi-wallet.com/faq/"},walletSendConfirmationDialogTitle:{id:"wallet.send.confirmationDialog.title",defaultMessage:"!!!Confirm transaction"},walletSendConfirmationAddressToLabel:{id:"wallet.send.confirmationDialog.addressToLabel",defaultMessage:"!!!To"},amountLabel:{id:"wallet.send.confirmationDialog.amountLabel",defaultMessage:"!!!Amount"},walletSendConfirmationFeesLabel:{id:"wallet.send.confirmationDialog.feesLabel",defaultMessage:"!!!Fees"},walletSendConfirmationTotalLabel:{id:"wallet.send.confirmationDialog.totalLabel",defaultMessage:"!!!Total"},walletSendConfirmationTxSizeLabel:{id:"wallet.send.confirmationDialog.txSizeLabel",defaultMessage:"!!!Size"},connectLabel:{id:"wallet.connect.hw.dialog.connect.button.label",defaultMessage:"!!!Connect"},hwConnectDialogSaveButtonLabel:{id:"wallet.connect.hw.dialog.save.button.label",defaultMessage:"!!!Save"},hwConnectDialogAboutPrerequisite4:{id:"wallet.connect.hw.dialog.step.about.prerequisite.4",defaultMessage:"!!!Your computer must remain connected to the Internet throughout the process."},hwConnectDialogAboutPrerequisiteHeader:{id:"wallet.connect.hw.dialog.step.about.prerequisite.header",defaultMessage:"!!!Prerequisites"},hwConnectDialogConnectIntroTextLine3:{id:"wallet.connect.hw.dialog.step.connect.introText.line.3",defaultMessage:"!!!This process shares the Cardano public key with Yoroi."},hwConnectDialogSaveWalletNameInputLabel:{id:"wallet.connect.hw.dialog.step.save.walletName.label",defaultMessage:"!!!Wallet name"},hwConnectDialogSaveWalletNameInputPH:{id:"wallet.connect.hw.dialog.step.save.walletName.hint",defaultMessage:"!!!Enter wallet name"},ledgerConnectAllDialogTitle:{id:"wallet.connect.ledger.dialog.title.label",defaultMessage:"!!!Connect to Ledger Hardware Wallet"},ledgerError101:{id:"wallet.connect.ledger.error.101",defaultMessage:"!!!Failed to connect. Please check your ledger device and retry."},trezorConnectAllDialogTitle:{id:"wallet.connect.trezor.dialog.title.label",defaultMessage:"!!!Connect to Trezor Hardware Wallet"},trezorError101:{id:"wallet.connect.trezor.error.101",defaultMessage:"!!!Failed to connect trezor.io. Please check your Internet connection and retry."},hwError101:{id:"wallet.hw.common.error.101",defaultMessage:"!!!Necessary permissions were not granted by the user. Please retry."},trezorError103:{id:"wallet.connect.trezor.error.103",defaultMessage:"!!!Cancelled. Please retry."},walletCreatedNotificationMessage:{id:"wallet.summary.page.walletCreatedNotificationMessage",defaultMessage:"!!!You have successfully created a new wallet"},walletRestoredNotificationMessage:{id:"wallet.summary.page.walletRestoredNotificationMessage",defaultMessage:"!!!You have successfully restored your wallet"},integratedNotificationMessage:{id:"wallet.summary.page.integratedNotificationMessage",defaultMessage:"!!!You have successfully integrated with your {deviceName}"},noTransactionsFound:{id:"wallet.summary.no.transaction",defaultMessage:"!!!No transaction history."},assetSelect:{id:"global.selectAsset.labael",defaultMessage:"!!!Select asset"},assets:{id:"global.label.assets",defaultMessage:"!!!assets"},success:{id:"global.label.success",defaultMessage:"!!!Success"},step1:{id:"transfer.form.instructions.step1.text",defaultMessage:"!!!It will take about 1 minute to restore your balance. In the next step, you will be presented with a transaction that will move all of your funds. Please review the details of the transaction carefully. You will need to pay a standard transaction fee on the Cardano network to make the transaction."},feeLabel:{id:"wallet.transaction.fee",defaultMessage:"!!!Fee"},languageSelectLabel:{id:"profile.languageSelect.form.languageSelectLabel",defaultMessage:"!!!Select your language"},languageSelectLabelShort:{id:"profile.languageSelect.form.languageSelectLabelShort",defaultMessage:"!!!Select language"},languageSelectLabelInfo:{id:"settings.general.languageSelect.labelInfo",defaultMessage:"!!!The selected language translation is fully provided by the community"},languageSelectInfo:{id:"settings.general.languageSelect.info",defaultMessage:"!!!For EMURGO, friendliness in Yoroi is an important topic. We believe understanding blockchain concepts is easier in your native language. We try supporting as many languages as possible, but for a broader selection of languages we need to accept the help from community translators. The selected language translation is fully provided by the community."},translationAcknowledgment:{id:"settings.general.translation.acknowledgment",defaultMessage:"!!!Thanks to the following"},translationContributors:{id:"settings.general.translation.contributors",defaultMessage:"_"},paperPasswordLabel:{id:"wallet.restore.dialog.paperPasswordLabel",defaultMessage:"!!!Paper wallet password"},shortRecoveryPhrase:{id:"wallet.restore.dialog.form.errors.shortRecoveryPhrase",defaultMessage:"!!!Short recovery phrase"},goBack:{id:"global.labels.goBack",defaultMessage:"!!!Go back label"},allowLabel:{id:"global.label.allow",defaultMessage:"!!!Allow"},contactSupport:{id:"global.contact",defaultMessage:"!!!contact support"},staleTxnWarningLine1:{id:"global.staleTxnWarningLine1",defaultMessage:"!!!Your wallet has changed since you created this transaction."},staleTxnWarningLine2:{id:"global.staleTxnWarningLine2",defaultMessage:"!!!You can still send this transaction but it may fail."},forMoreHelp:{id:"loading.screen.error",defaultMessage:"!!!Unexpected error occurred. We apologize for the inconvenience. If this error persists, please reach out to our support team {supportRequestLink}"},logsContent:{id:"settings.support.logs.content",defaultMessage:"!!!If you want to inspect logs, you can {downloadLogsLink}. Logs do not contain sensitive information, and it would be helpful to attach them to problem reports to help the team investigate the issue you are experiencing. Logs can be attached automatically when using the bug reporting feature."},downloadLogsLink:{id:"settings.support.logs.downloadLogsLink",defaultMessage:"!!!download them here"},downloadLogsButtonLabel:{id:"settings.support.logs.downloadLogsButtonLabel",defaultMessage:"!!!Download Logs"},blockchainExplorer:{id:"settings.general.explorer",defaultMessage:"!!!explorer"},newPasswordLabel:{id:"wallet.settings.changePassword.dialog.newPasswordLabel",defaultMessage:"!!!New password"},newPasswordFieldPlaceholder:{id:"wallet.settings.changePassword.dialog.newPasswordFieldPlaceholder",defaultMessage:"!!!Type new password"},repeatPasswordLabel:{id:"wallet.settings.changePassword.dialog.repeatPasswordLabel",defaultMessage:"!!!Repeat new password"},repeatPasswordFieldPlaceholder:{id:"wallet.settings.changePassword.dialog.repeatPasswordFieldPlaceholder",defaultMessage:"!!!Type new password"},uriSchemeLabel:{id:"global.uriSchemeTitleLabel",defaultMessage:"!!!Cardano Payment URLs"},uriExplanation:{id:"global.uriExplanation",defaultMessage:"!!!These allow you to easily share invoices with friends and businesses by simply clicking a URL."},uriExplanationRevamp:{id:"global.uriExplanation.revamp",defaultMessage:"!!!Allow URLs to easily share invoices with friends and businesses"},updatePool:{id:"global.updatePool",defaultMessage:"!!!  UPDATE POOL"},copyTooltipMessage:{id:"global.copyTooltipMessage",defaultMessage:"!!!Copied"},attentionTitle:{id:"transfer.instructions.attention.title.label",defaultMessage:"!!!Attention"},invalidMemo:{id:"wallet.transaction.memo.invalid",defaultMessage:"!!!Memo must be at least 1 and at most {maxMemo} characters."},transactionFailed:{id:"wallet.transaction.transactionFailed",defaultMessage:"!!!Transaction failed"},transactionFailedInfo:{id:"wallet.transaction.transactionFailedInfo",defaultMessage:"!!!Your transaction has not been processed properly due to technical issues"},tryAgain:{id:"wallet.transaction.tryAgain",defaultMessage:"!!!Try Again"},transactionSubmitted:{id:"wallet.transaction.transactionSubmitted",defaultMessage:"!!!Transaction submitted"},transactionSubmittedInfo:{id:"wallet.transaction.transactionSubmittedInfo",defaultMessage:"!!!Check this transaction in the list of wallet transactions"},sendingIsDisabled:{id:"wallet.send.form.sendingIsDisabled",defaultMessage:"!!!Unable to process. Please retry after the previous transaction has been completed."},passwordDisclaimer:{id:"wallet.restore.dialog.passwordDisclaimer",defaultMessage:"!!!Typing the wrong wallet password will give you a different wallet. This allows for plausible deniability."},recoveryPhraseInputLabel:{id:"wallet.restore.dialog.recovery.phrase.input.label",defaultMessage:"!!!Recovery phrase"},recoveryPhraseInputHint:{id:"wallet.restore.dialog.recovery.phrase.input.hint",defaultMessage:"!!!Enter recovery phrase"},recoveryPhraseNoResults:{id:"wallet.restore.dialog.recovery.phrase.input.noResults",defaultMessage:"!!!Not found"},invalidRecoveryPhrase:{id:"wallet.restore.dialog.form.errors.invalidRecoveryPhrase",defaultMessage:"!!!Invalid recovery phrase. Please retype."},totalRewardsLabel:{id:"wallet.dashboard.summary.rewardsTitle",defaultMessage:"!!!Total Rewards"},skipLabel:{id:"profile.uriPrompt.form.skipLabel",defaultMessage:"!!!Skip"},refuseLabel:{id:"profile.uriPrompt.form.refuseLabel",defaultMessage:"!!!Refuse"},checkLabel:{id:"wallet.connect.hw.dialog.step.about.label",defaultMessage:"!!!CHECK"},walletUpgrade:{id:"wallet.backup.dialog.legacy.upgrade",defaultMessage:"!!!Wallet Upgrade"},dateToday:{id:"wallet.summary.page.todayLabel",defaultMessage:"!!!Today"},dateYesterday:{id:"wallet.summary.page.yesterdayLabel",defaultMessage:"!!!Yesterday"},uriLandingDialogConfirmLabel:{id:"uri.landing.dialog.confirm.label",defaultMessage:"!!!I understand"},restoreByronEraWalletDescription:{id:"wallet.add.optionDialog.walletEra.byronEra.description",defaultMessage:"!!!Wallets created before July 29th, 2020 are Byron-era wallets and cannot delegate."},sendButtonLabel:{id:"wallet.send.confirmationDialog.submit",defaultMessage:"!!!Send"},walletPasswordLabel:{id:"wallet.send.confirmationDialog.walletPasswordLabel",defaultMessage:"!!!Password"},walletPasswordFieldPlaceholder:{id:"wallet.send.confirmationDialog.walletPasswordFieldPlaceholder",defaultMessage:"!!!Type your password"},txGeneration:{id:"wallet.delegation.transaction.generation",defaultMessage:"!!!Generating transaction"},delegationById:{id:"wallet.navigation.delegationById",defaultMessage:"!!!Delegation by Id"},poolFetching:{id:"wallet.delegation.poolInfo.fetching",defaultMessage:"!!!Fetching pool information"},transactionId:{id:"wallet.transaction.transactionId",defaultMessage:"!!!Transaction ID"},epochLabel:{id:"global.labels.epoch",defaultMessage:"!!!Epoch"},stakepoolNameLabel:{id:"global.labels.stakepool",defaultMessage:"!!!Stakepool Name"},stakePoolChecksumAndName:{id:"global.labels.stakePoolChecksumAndName",defaultMessage:"!!!Stake pool checksum and name"},rewardsLabel:{id:"global.labels.rewardsLabel",defaultMessage:"!!!Rewards"},rewardsListLabel:{id:"global.labels.rewardsListLabel",defaultMessage:"!!!Rewards list"},totalTokenLabel:{id:"wallet.dashboard.summary.adaTitle",defaultMessage:"!!!Total {ticker}"},marginsLabel:{id:"wallet.dashboard.stakePool.margins",defaultMessage:"!!!Margins"},loadMoreButtonLabel:{id:"global.labels.loadMore",defaultMessage:"!!!Load more"},unknownPoolLabel:{id:"wallet.staking.pool.unknownLabel",defaultMessage:"!!!Unknown pool"},poolSize:{id:"wallet.staking.pool.size",defaultMessage:"!!!Pool size"},poolShare:{id:"wallet.staking.pool.share",defaultMessage:"!!!Share"},poolSaturation:{id:"wallet.staking.pool.saturation",defaultMessage:"!!!Saturation"},sidebarWallets:{id:"sidebar.wallets",defaultMessage:"!!!My wallets"},sidebarCashback:{id:"sidebar.cashback",defaultMessage:"!!!Cashback"},sidebarAssets:{id:"sidebar.assets",defaultMessage:"!!!Assets"},sidebarSettings:{id:"sidebar.settings",defaultMessage:"!!!Settings"},sidebarGovernance:{id:"sidebar.governance",defaultMessage:"!!!Governance"},sidebarTransfer:{id:"sidebar.transfer",defaultMessage:"!!!Claim or transfer wallet"},stakingDashboard:{id:"sidebar.stakingDashboard",defaultMessage:"!!!Staking Dashboard"},sidebarStaking:{id:"sidebar.staking",defaultMessage:"!!!Staking"},sidebarPortfolio:{id:"sidebar.portfolio",defaultMessage:"!!!Portfolio"},sidebarNfts:{id:"sidebar.nfts",defaultMessage:"!!!NFTs"},sidebarVoting:{id:"sidebar.voting",defaultMessage:"!!!Voting"},sidebarSwap:{id:"sidebar.swap",defaultMessage:"!!!Swap"},sidebarFaq:{id:"sidebar.faq",defaultMessage:"!!!Faq"},sidebarNewUpdates:{id:"sidebar.newUpdates",defaultMessage:"!!!New updates"},sidebarFeedback:{id:"sidebar.feedback",defaultMessage:"!!!Feedback"},ledgerTitle:{id:"wallet.add.optionDialog.connect.hw.ledger.title",defaultMessage:"!!!Ledger Hardware Wallet"},transactions:{id:"wallet.navigation.transactions",defaultMessage:"!!!Transactions"},trezorTitle:{id:"wallet.add.optionDialog.connect.hw.trezor.title",defaultMessage:"!!!Trezor Hardware Wallet"},undelegateLabel:{id:"global.labael.undelegate",defaultMessage:"!!!Undelegate"},roa30d:{id:"wallet.staking.banner.roa30d",defaultMessage:"!!!ROA 30d"},roaHelperMessage:{id:"wallet.staking.banner.roaHelperMessage",defaultMessage:"!!!Estimated ROA (Return of ADA) based on staking result from the last 30 days"},stakePoolDelegated:{id:"wallet.dashboard.upcomingRewards.stakePoolDelegated",defaultMessage:"!!!Stake Pool Delegated"},totalDelegated:{id:"wallet.dashboard.summary.totalDelegated",defaultMessage:"!!!Total Delegated"},overview:{id:"wallet.staking.overview",defaultMessage:"!!!Overview"},rewardHistory:{id:"wallet.staking.rewards.rewardHistory",defaultMessage:"!!!Reward History"},rewardValue:{id:"wallet.staking.rewards.rewardValue",defaultMessage:"!!!Reward value"},openRewardHistory:{id:"wallet.staking.rewards.openRewardHistory",defaultMessage:"!!!Open Reward History"},epochProgress:{id:"wallet.staking.epochProgress",defaultMessage:"!!!Epoch Progress"},epochs:{id:"wallet.staking.epochsLabel",defaultMessage:"!!!Epochs"},tokens:{id:"wallet.assets.tokens",defaultMessage:"!!!Tokens"},fingerprint:{id:"wallet.assets.fingerprint",defaultMessage:"!!!Fingerprint"},auditAddressWarning:{id:"wallet.receive.page.internalWarning2",defaultMessage:"!!!addresses are shown here for personal auditing purposes and should never be used."},rewardAddressesTitle:{id:"wallet.receive.page.rewardAddressesTitle",defaultMessage:"!!!Reward addresses"},internalAddressesTitle:{id:"wallet.receive.page.internalAddressesTitle",defaultMessage:"!!!Internal addresses"},lastSyncMessage:{id:"myWallets.wallets.lastSyncText",defaultMessage:"!!!Last sync"},neverSyncedMessage:{id:"myWallets.wallets.neverSync",defaultMessage:"!!!Never synced"},createWalletLabel:{id:"wallet.add.page.create.title",defaultMessage:"!!!Create Wallet"},allLabel:{id:"wallet.receive.navigation.allLabel",defaultMessage:"!!!All"},noteLabel:{id:"global.labels.note",defaultMessage:"!!!Note:"},upgradeLabel:{id:"global.labels.upgrade",defaultMessage:"!!!Upgrade"},pendingTxWarning:{id:"wallet.staking.warning.pendingTx",defaultMessage:"!!!You cannot change your delegation preference while a transaction is pending"},stakePoolHash:{id:"wallet.delegation.transaction.stakePoolHash",defaultMessage:"!!!Stake pool id"},finalBalanceLabel:{id:"transfer.summary.finalBalance.label",defaultMessage:"!!!Final balance"},StakeDeregistration:{id:"wallet.transaction.certificate.StakeDeregistration",defaultMessage:"!!!Staking key deregistration"},withdrawalsLabel:{id:"wallet.transaction.withdrawalsLabel",defaultMessage:"!!!Withdrawals"},withdrawLabel:{id:"wallet.transaction.withdraw",defaultMessage:"!!!Withdraw"},byronLabel:{id:"wallet.receive.navigation.byronLabel",defaultMessage:"!!!Byron"},shelleyLabel:{id:"global.labels.shelleyLabel",defaultMessage:"!!!Shelley"},spendingKeyHashLabel:{id:"global.labels.spendingKeyHash",defaultMessage:"!!!Spending key hash"},stakingKeyHashLabel:{id:"global.labels.stakingKeyHash",defaultMessage:"!!!Staking key hash"},keyRegistrationPointer:{id:"global.labels.keyRegistrationPointer",defaultMessage:"!!!Key registration pointer"},support:{id:"settings.menu.support.link.label",defaultMessage:"!!!Support"},termsOfUse:{id:"settings.menu.termsOfUse.link.label",defaultMessage:"!!!Terms of use"},termsOfService:{id:"settings.menu.termsOfService.link.label",defaultMessage:"!!!Terms of Service Agreement"},fromAddresses:{id:"wallet.transaction.addresses.from",defaultMessage:"!!!From addresses"},toAddresses:{id:"wallet.transaction.addresses.to",defaultMessage:"!!!To addresses"},resyncButtonLabel:{id:"wallet.settings.resync.buttonLabel",defaultMessage:"!!!Resync wallet"},blogLinkWrapper:{id:"settings.support.faq.blogLinkWrapper",defaultMessage:"!!!blog post"},blogLearnMore:{id:"global.blog.learnMore",defaultMessage:"!!!You can read our {blogLink} to learn more."},keyLabel:{id:"global.key.label",defaultMessage:"!!!Key"},stepPin:{id:"wallet.voting.dialog.stepPin",defaultMessage:"!!!PIN"},stepConfirm:{id:"wallet.voting.dialog.stepConfirm",defaultMessage:"!!!Confirm"},registerLabel:{id:"wallet.voting.dialog.registerLabel",defaultMessage:"!!!Register"},transactionLabel:{id:"wallet.voting.dialog.transactionLabel",defaultMessage:"!!!Transaction"},stepQrCode:{id:"wallet.voting.dialog.stepQrCode",defaultMessage:"!!!QR Code"},votingRegistrationTitle:{id:"wallet.voting.dialog.title",defaultMessage:"!!!Register for Voting"},confirmPin:{id:"wallet.voting.dialog.confirmPin",defaultMessage:"!!!Confirm PIN"},pinDoesNotMatch:{id:"global.errors.pinDoesNotMatch",defaultMessage:"!!!PIN codes do not match. Please retype."},invalidPin:{id:"global.errors.invalidPin",defaultMessage:"!!!Invalid PIN. Please retype."},buyAda:{id:"button.buyAda",defaultMessage:"!!!Buy ADA"},sellAda:{id:"button.sellAda",defaultMessage:"!!!Sell ADA"},buySellAda:{id:"button.buySellAda",defaultMessage:"!!!Buy/Sell ADA"},txConfirmationLedgerNanoLine2:{id:"wallet.send.ledger.confirmationDialog.info.line.2",defaultMessage:"!!!Make sure Cardano ADA app must remain open on the Ledger device throughout the process."},txConfirmationTrezorTLine2:{id:"wallet.send.trezor.confirmationDialog.info.line.2",defaultMessage:"!!!A new tab will appear. Please follow the instructions in the new tab."},syncing:{id:"wallet.syncing",defaultMessage:"!!!Syncing..."},loading:{id:"wallet.loading",defaultMessage:"!!!Loading..."},confirmOnLedger:{id:"label.confirm.ledger",defaultMessage:"!!!Confirm on Ledger"},confirmOnTrezor:{id:"label.confirm.trezor",defaultMessage:"!!!Confirm on Trezor"},tosAgreement:{id:"profile.languageSelect.tosAgreement",defaultMessage:'!!!I agree with <span id="tosLink">Terms of Service Agreement</span> and <span id="privacyLink">Privacy Notice</span>'},poolNotGenerating:{id:"wallet.transitionDialog.poolNotGenerating",defaultMessage:"!!!This pool is NOT generating staking rewards anymore"},goToTransactions:{id:"wallet.transaction.success.button.label",defaultMessage:"!!!Go To Transactions"},provider:{id:"buysell.dialog.provider",defaultMessage:"!!!Provider"},disclaimer:{id:"buysell.dialog.disclaimer",defaultMessage:"!!!Disclaimer"},proceed:{id:"buysell.dialog.proceed",defaultMessage:"PROCEED"},mainnet:{id:"networkName.mainnet",defaultMessage:"!!!Mainnet"},preprod:{id:"networkName.preprod",defaultMessage:"!!!Preprod"},preview:{id:"networkName.preview",defaultMessage:"!!!Preview"},goToFaucetButton:{id:"wallet.emptyWalletMessage.goToFaucet",defaultMessage:"!!!GO TO TADA FAUCET"},welcomeMessageTestnet:{id:"wallet.emptyWalletMessage.testnet",defaultMessage:"!!!Learn Cardano with test ADA "},welcomeMessageSubtitleTestnet:{id:"wallet.emptyWalletMessageSubtitle.testnet",defaultMessage:"!!!Get started with Cardano's test currency, TADA. It's your key to testing a new world of possibilities."},undelegatePool:{id:"transaction.review.undelegatePool",defaultMessage:"!!!Unstake entire wallet balance from"},deregisteringStakingKey:{id:"transaction.review.deregisteringStakingKey",defaultMessage:"!!!Undelegating from the pool"}}),s=((0,r.defineMessages)({memoLabel:{id:"global.labels.memo",defaultMessage:"!!!Memo"},addMemo:{id:"global.labels.addMemo",defaultMessage:"!!!Add memo"},editMemo:{id:"global.labels.editMemo",defaultMessage:"!!!Edit memo"},deleteMemo:{id:"global.labels.deleteMemo",defaultMessage:"!!!Delete memo"},optionalMemo:{id:"global.labels.optionalMemo",defaultMessage:"!!!Memo (optional)"},memoWarning:{id:"wallet.send.form.memoWarning",defaultMessage:"!!!(Optional) Memo is stored locally"}}),(0,r.defineMessages)({connectedWebsites:{id:"global.connector.connectedWebsites",defaultMessage:"!!!Connected Websites"},messageReadOnly:{id:"global.connector.messageReadOnly",defaultMessage:"!!!We are granting read-only to view utxos/addresses."},about:{id:"connector.settings.about",defaultMessage:"!!!About"},signTransaction:{id:"connector.settings.signTransaction",defaultMessage:"!!!Sign transaction"},signData:{id:"connector.signin.signData",defaultMessage:"!!!Sign data"},connect:{id:"connector.settings.connect",defaultMessage:"!!!Connect"},dappConnector:{id:"connector.appName",defaultMessage:"!!!Dapp Connector"},connector:{id:"connector.appNameShort",defaultMessage:"!!!Connector"},yourAddresses:{id:"connector.yourAddresses",defaultMessage:"!!!Your Addresses"},foreignAddresses:{id:"connector.foreignAddresses",defaultMessage:"!!!Foreign Addresses"},fromWallet:{id:"connector.fromWallet",defaultMessage:"!!!From wallet"},fromAddresses:{id:"connector.from",defaultMessage:"!!!From (Inputs): {qty}"},toAddresses:{id:"connector.to",defaultMessage:"!!!To (Outputs): {qty}"},send:{id:"wallet.navigation.send",defaultMessage:"!!!Send"},receive:{id:"wallet.navigation.receive",defaultMessage:"!!!Receive"},assetsSent:{id:"connector.assetsSent",defaultMessage:"!!!{quantity} assets sent"},assetsReceived:{id:"connector.assetsReceived",defaultMessage:"!!!{quantity} assets received"},assetSent:{id:"connector.assetSent",defaultMessage:"!!!{assetName} sent"},assetReceived:{id:"connector.assetReceived",defaultMessage:"!!!{assetName} received"},noAssetsSent:{id:"connector.noAssetsSent",defaultMessage:"!!!No assets sent"},noAssetsReceived:{id:"connector.noAssetsReceived",defaultMessage:"!!!No assets received"}}))},70210:(e,t,a)=>{"use strict";a.d(t,{Iz:()=>Z,a2:()=>z});var r,n=a(69301),s=a.n(n),o=a(78914),i=a.n(o),l=a(56474),d=a.n(l),c=a(6467),u=a.n(c),p=a(4187),g=a.n(p),h=a(63151),f=a.n(h),w=a(13655),m=a.n(w),y=a(51949),x=a.n(y),_=a(51738),v=a.n(_),A=a(54206),b=a.n(A),E=a(68333),T=a.n(E),C=a(75686),I=a.n(C),k=a(32820),D=a.n(k),S=a(22669),M=a.n(S),R=a(38043),B=a(44435),W=a(82442),P=a(5511),N=a(72284),F=a(22253),O=a(83818),L=a(37061),H=a(11045),V=a(45619),U=a(89157),G=a(6711);d()([...u(),...g(),...f(),...m(),...x(),...v(),...b(),...T(),...I(),...D(),...M()]);const j=a(88754),Z={};i()(r=s()(j).call(j)).call(r,(e=>{const t=e.replace("./","").replace(".json","");Z[t]=j(e)}));const z=[{value:"en-US",label:R.default.languageEnglish,svg:B.r},{value:"ja-JP",label:R.default.languageJapanese,svg:W.r},{value:"ko-KR",label:R.default.languageKorean,svg:P.r},{value:"zh-Hans",label:R.default.languageChineseSimplified,svg:N.r},{value:"ru-RU",label:R.default.languageRussian,svg:F.r},{value:"de-DE",label:R.default.languageGerman,svg:O.r},{value:"fr-FR",label:R.default.languageFrench,svg:L.r},{value:"pt-BR",label:R.default.languagePortuguese,svg:H.r},{value:"es-ES",label:R.default.languageSpanish,svg:V.r},{value:"id-ID",label:R.default.languageIndonesian,svg:U.r},{value:"vi-VN",label:R.default.languageVietnamese,svg:G.r}]},5227:(e,t,a)=>{"use strict";a.d(t,{ROUTES:()=>n});const r="/page-error",n={ROOT:"/",PAGE_ERROR:r,NIGHTLY_INFO:"/nightly",PROFILE:{LANGUAGE_SELECTION:"/profile/language-selection",TERMS_OF_USE:"/profile/terms-of-use",COMPLEXITY_LEVEL:"/profile/complexity-level",URI_PROMPT:"/profile/uri-prompt",OPT_FOR_ANALYTICS:"/profile/opt-for-analytics"},SWITCH:"/switch",WALLETS:{ROOT:"/wallets",ADD:"/wallets/add",CREATE_NEW_WALLET:"/wallets/new",RESTORE_WALLET:"/wallets/restore",TRANSACTIONS:"/wallets/transactions",SEND:"/wallets/send",RECEIVE:{ROOT:"/wallets/receive",ADDRESS_LIST:"/wallets/receive/:group/:name"}},SETTINGS:{ROOT:"/settings",GENERAL:"/settings/general",BLOCKCHAIN:"/settings/blockchain",WALLET:"/settings/wallet",EXTERNAL_STORAGE:"/settings/external-storage",TERMS_OF_USE:"/settings/terms-of-use",SUPPORT:"/settings/support",LEVEL_OF_COMPLEXITY:"/settings/level-of-complexity",ANALYTICS:"/settings/analytics",PAPER_WALLET:"/settings/paper-wallet"},TRANSFER:{ROOT:"/transfer"},SEND_FROM_URI:{ROOT:"/send-from-uri"},STAKING:"/staking",ASSETS:{ROOT:"/assets",DETAILS:"/assets/tokens/:tokenId"},CASHBACK:{ROOT:"/cashback"},NFTS:{ROOT:"/nfts",DETAILS:"/nfts/:nftId"},DAPP_CONNECTOR:{CONNECTED_WEBSITES:"/connector/connected-websites"},REVAMP:{CATALYST_VOTING:"/voting"},SWAP:{ROOT:"/swap",ERROR:"/swap"+r,ORDERS:"/swap/orders"},EXCHANGE_END:"/exchange-end",Governance:{ROOT:"/governance",DELEGATE:"/governance/delagation",SUBMITTED:"/governance/submitted",FAIL:"/governance/failed"},PORTFOLIO:{ROOT:"/portfolio",DAPPS:"/portfolio/dapps",DETAILS:"/portfolio/details/:tokenId"},TX_REVIEW:{FAIL:"/tx-review/failed",SUCCESS:"/tx-review/success"}}},41274:(e,t,a)=>{"use strict";a.d(t,{JV:()=>v,kh:()=>A,T2:()=>b,z3:()=>E,IJ:()=>T,Wx:()=>C,zq:()=>I,_4:()=>k,gO:()=>D,xP:()=>S});var r,n,s,o,i=a(34074),l=a.n(i),d=a(5838),c=a.n(d),u=a(87672),p=a.n(u),g=a(89749),h=a.n(g),f=(a(18293),a(22188)),w=a(148),m=a(96486),y=a(66905),x=a(38079);let _=(r=class{constructor(e){c()(this,"addressesRequests",n,this),p()(this,"stores",void 0),p()(this,"request",void 0),c()(this,"refreshAddressesFromDb",s,this),p()(this,"_flowCoerceResult",(e=>(e.result,e.result))),p()(this,"_getRequest",(e=>{const t=(0,m.find)(this.addressesRequests,{publicDeriverId:e});return t&&t.cachedRequest?t.cachedRequest:new w.Z(this.request)})),c()(this,"addObservedWallet",o,this),this.stores=e.stores,this.request=e.request}get all(){const e=this.stores.wallets.selected;if(!e)return[];const t=this._flowCoerceResult(this._getRequest(e.publicDeriverId));return null==t?[]:t}get wasExecuted(){const e=this.stores.wallets.selected;return!!e&&this._getRequest(e.publicDeriverId).wasExecuted}},n=h()(r.prototype,"addressesRequests",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h()(r.prototype,"all",[f.computed],l()(r.prototype,"all"),r.prototype),h()(r.prototype,"wasExecuted",[f.computed],l()(r.prototype,"wasExecuted"),r.prototype),s=h()(r.prototype,"refreshAddressesFromDb",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{const t=this._getRequest(e.publicDeriverId);t.invalidate({immediately:!1}),await t.execute({publicDeriver:e}).promise}}}),o=h()(r.prototype,"addObservedWallet",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return({publicDeriverId:e})=>{this.addressesRequests.push({publicDeriverId:e,cachedRequest:this._getRequest(e)})}}}),r);class v extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._wrapForeign({...t,storeName:e.name})}),this}}class A extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._wrapForAllAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY})}),this}}class b extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY,chainsRequest:{chainId:y.OC.EXTERNAL}})})}),this}}class E extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_LEGACY,chainsRequest:{chainId:y.OC.INTERNAL}})}),this}}class T extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_BASE,chainsRequest:{chainId:y.OC.EXTERNAL}})})}),this}}class C extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_BASE,chainsRequest:{chainId:y.OC.INTERNAL}})})}),this}}class I extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._wrapForAllAddresses({publicDeriver:t.publicDeriver,...t,storeName:e.name,type:x.dq.CARDANO_BASE})}),this}}class k extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_ENTERPRISE,chainsRequest:{chainId:y.OC.EXTERNAL}})})}),this}}class D extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._createAddressIfNeeded({publicDeriver:t.publicDeriver,genAddresses:()=>e.stores.addresses._wrapForChainAddresses({...t,storeName:e.name,type:x.dq.CARDANO_ENTERPRISE,chainsRequest:{chainId:y.OC.INTERNAL}})})}),this}}class S extends _{constructor(e){return super({stores:e.stores,request:t=>e.stores.addresses._wrapForAllAddresses({publicDeriver:t.publicDeriver,...t,storeName:e.name,type:x.dq.CARDANO_REWARD})}),this}}},148:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(89837);a(63139);class n extends r.Z{}},39803:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>D});var r,n,s,o,i,l=a(34074),d=a.n(l),c=a(41511),u=a.n(c),p=a(93476),g=a.n(p),h=a(33032),f=a.n(h),w=a(36384),m=a.n(w),y=a(5838),x=a.n(y),_=a(87672),v=a.n(_),A=a(89749),b=a.n(A),E=(a(18293),a(22188)),T=a(78230),C=a(99095),I=a(63139);const k=(0,C.defineMessages)({apiMethodNotYetImplementedError:{id:"api.errors.ApiMethodNotYetImplementedError",defaultMessage:"!!!This API method is not yet implemented."},promiseNotCalledYetError:{id:"api.errors.PromiseNotCalledYetError",defaultMessage:"!!!Result accessed before execution finished."}});let D=(r=class{constructor(e){x()(this,"result",n,this),x()(this,"error",s,this),x()(this,"isExecuting",o,this),x()(this,"wasExecuted",i,this),v()(this,"currentlyExecuting",new(m())),v()(this,"promise",null),v()(this,"_method",void 0),v()(this,"_isWaitingForResponse",!1),v()(this,"_currentApiCall",null),this._method=e}execute(...e){if(this._isWaitingForResponse)return this;f()((0,E.action)("Request::execute (setting this.isExecuting)",(()=>{this.isExecuting=!0})),0);const t=Math.random();return this.currentlyExecuting.add(t),this.promise=new(g())(((a,r)=>{this._method||r(new S),this._method(...e).then((e=>{if(this.currentlyExecuting.has(t))return this.currentlyExecuting.delete(t),f()((0,E.action)("Request::execute/then",(()=>{null!=this.result&&(0,E.isObservableArray)(this.result)&&u()(e)?this.result.replace(e):this.result=e,this._currentApiCall&&(this._currentApiCall.result=e),this.isExecuting=!1,this.wasExecuted=!0,this.error=null,this._isWaitingForResponse=!1,a(e)})),1),e;a(e)})).catch((0,E.action)("Request::execute/catch",(e=>{this.currentlyExecuting.has(t)?(this.currentlyExecuting.delete(t),f()((0,E.action)((()=>{this.error=e,this.result=null,this.isExecuting=!1,this.wasExecuted=!0,this._isWaitingForResponse=!1,r(e)})),1)):r(e)})))})),this._isWaitingForResponse=!0,this._currentApiCall={args:e,result:null},this}isExecutingWithArgs(...e){return this.isExecuting&&null!=this._currentApiCall&&(0,T.isEqual)(this._currentApiCall.args,e)}get isExecutingFirstTime(){return!this.wasExecuted&&this.isExecuting}then(...e){if(!this.promise)throw new M;return this.promise.then(...e)}catch(...e){if(!this.promise)throw new M;return this.promise.catch(...e)}patch(e){return new(g())((t=>{f()((0,E.action)((()=>{const a=e(this.result);void 0!==a&&(this.result=a),this._currentApiCall&&(this._currentApiCall.result=this.result),t(this)})),0)}))}cancel(){return this.isExecuting=!1,this._isWaitingForResponse=!1,this._currentApiCall=null,this}reset(){this.result=null,this.error=null,this.isExecuting=!1,this.wasExecuted=!1,this._isWaitingForResponse=!1,this._currentApiCall=null}},n=b()(r.prototype,"result",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=b()(r.prototype,"error",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=b()(r.prototype,"isExecuting",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=b()(r.prototype,"wasExecuted",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b()(r.prototype,"isExecutingFirstTime",[E.computed],d()(r.prototype,"isExecutingFirstTime"),r.prototype),b()(r.prototype,"cancel",[E.action],d()(r.prototype,"cancel"),r.prototype),b()(r.prototype,"reset",[E.action],d()(r.prototype,"reset"),r.prototype),r);class S extends I.default{constructor(){super({id:k.apiMethodNotYetImplementedError.id,defaultMessage:k.apiMethodNotYetImplementedError.defaultMessage||""})}}class M extends I.default{constructor(){super({id:k.apiMethodNotYetImplementedError.id,defaultMessage:k.apiMethodNotYetImplementedError.defaultMessage||""})}}},45918:(e,t,a)=>{"use strict";a.d(t,{WH:()=>u}),a(94473),a(89400);var r=a(20116),n=a.n(r),s=a(41274),o=a(3577),i=(a(95667),a(16885));a(5227),a(39329),a(84174);const l=[];function d(e){return l.push(e),e}const c=[i.DN.None,i.DN.Unused,i.DN.Used,i.DN.HasBalance];async function u(e){const t=(0,o.sX)(e);if(t)return(await t.nextInternal()).addressInfo;const a=(0,o.se)(e);if(a){const e=await a.getAllUtxoAddresses(),t=(0,o.h5)(a);if(t)return t.pickReceive(e[0]);const r=e[0];return{addr:r.addrs[0],row:r.row,addressing:r.addressing}}}d({isRelated:()=>!1,class:s.kh,validFilters:c,name:{subgroup:i.CW.all,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!1,class:s.T2,validFilters:c,name:{subgroup:i.CW.external,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!1,class:s.z3,validFilters:c,name:{subgroup:i.CW.internal,group:i.m2.byron},isHidden:e=>!1}),d({isRelated:()=>!0,class:s.IJ,validFilters:c,name:{subgroup:i.CW.external,group:i.m2.base},isHidden:e=>!1}),d({isRelated:()=>!0,class:s.Wx,validFilters:c,name:{subgroup:i.CW.internal,group:i.m2.base},isHidden:e=>!1}),d({isRelated:()=>!0,class:s.zq,validFilters:c,name:{subgroup:i.CW.mangled,group:i.m2.base},isHidden:e=>null==e.result||0===e.result.length}),d({isRelated:()=>!0,class:s._4,validFilters:c,name:{subgroup:i.CW.external,group:i.m2.enterprise},isHidden:e=>{var t;return null==e.result||0===n()(t=e.result).call(t,(e=>e.isUsed)).length}}),d({isRelated:()=>!0,class:s.gO,validFilters:c,name:{subgroup:i.CW.internal,group:i.m2.enterprise},isHidden:e=>{var t;return null==e.result||0===n()(t=e.result).call(t,(e=>e.isUsed)).length}}),d({isRelated:()=>!0,class:s.xP,validFilters:[i.DN.None],name:{subgroup:i.CW.all,group:i.m2.reward},isHidden:e=>null==e.result||0===e.result.length}),d({isRelated:()=>!0,class:s.JV,validFilters:[i.DN.None],name:{subgroup:i.CW.all,group:i.m2.addressBook},isHidden:e=>!1})},52065:(e,t,a)=>{"use strict";a.d(t,{getTokenName:()=>c,assetNameFromIdentifier:()=>p,getTokenIdentifierIfExists:()=>h,createTokenRowSummary:()=>f,genLookupOrFail:()=>w,genLookupOrNull:()=>m});var r=a(59340),n=a.n(r),s=a(44914),o=a.n(s),i=a(23665),l=a(69875),d=a(90649);function c(e){const t=g(e).name;if(null!=t)return t;const a=h(e);return null!=a?a:"-"}function u(e){if(null==e||0===e.length||!(0,l.isHex)(e))return{name:"",cip67Tag:null};const{asciiName:t,hexName:a,cip67Tag:r}=i.AssetNameUtils.resolveProperties(e);return{name:null!=t?t:a,cip67Tag:null==r?void 0:r.toString(10)}}function p(e){const[,t]=e.split(".");return u(t).name}function g(e){if(null!=e.Metadata.ticker)return{name:e.Metadata.ticker,cip67Tag:null};if(null!=e.Metadata.longName)return{name:e.Metadata.longName,cip67Tag:null};if("Cardano"===e.Metadata.type){const t=e.Metadata.assetName,{name:a,cip67Tag:r}=u(t);return{name:a,cip67Tag:r}}return{name:null,cip67Tag:null}}function h(e){if(!e.IsDefault){if("Cardano"===e.Metadata.type){const{policyId:t,assetName:a}=e.Metadata;return o().fromParts((0,d.hexToBytes)(t),(0,d.hexToBytes)(a)).fingerprint()}return e.Identifier}}function f(e){const{numberOfDecimals:t,ticker:a,logo:r}=e.Metadata,{name:n}=g(e);return{ticker:null!=a?a:void 0,name:null!=n?n:void 0,decimals:null!=t?t:void 0,logo:null!=r?r:void 0}}function w(e){return t=>{var a;const r=null===(a=e.get(t.networkId.toString()))||void 0===a?void 0:a.get(t.identifier);if(null==r)throw new Error(`genLookupOrFail no token info for ${n()(t)}`);return r}}function m(e){return t=>{var a;const r=null===(a=e.get(t.networkId.toString()))||void 0===a?void 0:a.get(t.identifier);return null==r?null:r}}},83739:(e,t,a)=>{"use strict";a.d(t,{XZ:()=>g.X,Af:()=>h.A,NI:()=>f.N,Q6:()=>w.Q,AZ:()=>m.A,ah:()=>d,N0:()=>A,v2:()=>b.v,sN:()=>E.s,zu:()=>T.z,Ph:()=>C.P,x4:()=>I.x,mQ:()=>k.m,nv:()=>D.n,u:()=>S.u});var r=a(45347),n=a(68666);const{palette:s}=r.p,{palette:o}=n.q,i=o.ds,l=s.ds,d={styleOverrides:{root:{fontSize:"1rem",borderRadius:8,fontWeight:500,fontFamily:"Rubik",lineHeight:"19px",textTransform:"uppercase",padding:"16px",boxShadow:"none","&.MuiButton-sizeLarge":{height:"56px"},"&.MuiButton-sizeMedium":{padding:"13px 24px"},"&.MuiButton-sizeSmall":{padding:"7px"},"&.MuiButton-sizeFlat":{padding:"13px 24px",height:"unset"},"&:hover":{boxShadow:"none"},"& span.MuiButton-startIcon":{marginLeft:"0px",marginRight:"6px"}}},defaultProps:{disableRipple:!1},variants:[{props:{variant:"primary"},style:c("primary",i)},{props:{variant:"secondary"},style:u("primary",i)},{props:{variant:"tertiary",color:"primary"},style:p("primary",i)},{props:{variant:"tertiary",color:"secondary"},style:p("grayscale",i)},{props:{variant:"destructive"},style:{backgroundColor:i.sys_magenta_500,color:i.gray_min,":hover":{backgroundColor:i.sys_magenta_600},":active":{backgroundColor:i.sys_magenta_700},":focus":{backgroundColor:i.sys_magenta_500,outline:"2px solid",outlineColor:i.sys_yellow_500},"&.Mui-disabled":{color:i.gray_min,backgroundColor:i.sys_magenta_300,cursor:"not-allowed",pointerEvents:"unset"},"& .MuiLoadingButton-loadingIndicator":{color:i.gray_min},"& .MuiButton-startIcon svg":{fill:i.gray_min},"& .MuiButton-startIcon svg path":{fill:i.gray_min}}},{props:{variant:"segmented"},style:{minWidth:"unset",maxWidth:"unset",width:"40px",height:"40px",padding:"8px",color:"ds.gray_200","&.MuiButton-sizeMedium":{padding:"8px",height:"40px"},":hover":{color:"ds.gray_50"},"&.active":{backgroundColor:i.gray_200,":hover":{backgroundColor:i.gray_50}}}}]};function c(e,t){return{backgroundColor:t[`${e}_500`],color:t.white_static,":hover":{backgroundColor:t[`${e}_600`]},":active":{backgroundColor:t[`${e}_700`]},":focus":{backgroundColor:t[`${e}_500`],outline:"2px solid",outlineColor:t.sys_yellow_500},"&.Mui-disabled":{color:t.gray_min,backgroundColor:t[`${e}_200`],cursor:"not-allowed",pointerEvents:"unset"},"&.MuiLoadingButton-root.Mui-disabled":{backgroundColor:t.primary_200},"& .MuiLoadingButton-loadingIndicator":{color:t.white_static},"& .MuiButton-startIcon svg":{fill:t.white_static},"& .MuiButton-startIcon svg path":{fill:t.white_static}}}function u(e,t){return{backgroundColor:"transparent",color:t.text_primary_medium,border:"2px solid",borderColor:t.el_primary_medium,":hover":{border:"2px solid",color:t.text_primary_max,backgroundColor:t.primary_100,borderColor:t.el_primary_max},":pressed":{border:"2px solid",color:t.text_primary_max,backgroundColor:t.primary_200,borderColor:t.el_primary_max},":active":{borderColor:t.el_primary_max,color:t.text_primary_max},":focus":{borderColor:t.el_primary_medium,color:t.text_primary_medium,outline:"2px solid",outlineColor:t.sys_yellow_500},"&.Mui-disabled":{border:"2px solid",borderColor:t.el_primary_low,color:t.text_primary_low,cursor:"not-allowed",pointerEvents:"unset"},"& .MuiLoadingButton-loadingIndicator":{color:t[`${e}_600`]},"& .MuiLoadingButton-root":{backgroundColor:t.primary_500},"& .MuiButton-startIcon svg":{fill:t[`${e}_500`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_500`]}}}function p(e,t){return{backgroundColor:"transparent",color:t.text_primary_medium,":hover":{backgroundColor:t[`${e}_100`],color:"primary"===e?t.text_primary_max:t.text_gray_max,"& .MuiButton-startIcon svg":{fill:"primary"===e?t.text_primary_max:t.text_gray_max},"& .MuiButton-startIcon svg path":{fill:"primary"===e?t.text_primary_max:t.text_gray_max}},":active":{backgroundColor:t.gray_100,color:t[`${e}_700`],"& .MuiButton-startIcon svg":{fill:t[`${e}_700`]},"& .MuiButton-startIcon svg path":{fill:t[`${e}_700`]}},":focus":{outline:"2px solid",outlineColor:t.sys_yellow_500},":disabled":{color:"primary"===e?t.text_primary_min:t.text_gray_min,cursor:"not-allowed",pointerEvents:"unset","& .MuiButton-startIcon svg":{fill:"primary"===e?t.text_primary_min:t.text_gray_min},"& .MuiButton-startIcon svg path":{fill:"primary"===e?t.text_primary_min:t.text_gray_min}},"&.Mui-disabled":{color:"primary"===e?t.text_primary_min:t.text_gray_min,cursor:"not-allowed",pointerEvents:"unset",opacity:1,"& .MuiButton-startIcon svg":{fill:"primary"===e?t.text_primary_min:t.text_gray_min},"& .MuiButton-startIcon svg path":{fill:"primary"===e?t.text_primary_min:t.text_gray_min}},"& .MuiLoadingButton-loadingIndicator":{color:t[`${e}_600`]},"& .MuiButton-startIcon svg":{fill:t.text_primary_medium},"& .MuiButton-startIcon svg path":{fill:t.text_primary_medium}}}c("primary",l),u("primary",l),p("primary",l),p("grayscale",l),l.sys_magenta_500,l.gray_min,l.sys_magenta_600,l.sys_magenta_700,l.sys_magenta_500,l.sys_yellow_500,l.gray_min,l.sys_magenta_300,l.gray_min,l.gray_min,l.gray_min;var g=a(7127),h=a(12991),f=a(86860),w=a(73494),m=a(51832);const{palette:y}=r.p,{palette:x}=n.q,_=x.ds,v=y.ds,A={styleOverrides:{root:{color:_.text_primary_medium,textDecoration:"none","&:hover":{color:_.text_primary_max,textDecoration:"underline"},":active":{color:_.primary_700,textDecoration:"underline"},":focus":{color:_.text_primary_medium,outlineWidth:"2px",outlineStyle:"solid",outlineColor:_.sys_yellow_500,textDecoration:"underline"},":disabled":{color:_.text_primary_min},":visited":{color:_.primary_700}}}};v.text_primary_medium,v.text_primary_max,v.primary_700,v.text_primary_medium,v.sys_yellow_500,v.text_primary_min,v.primary_700;var b=a(82353),E=a(818),T=a(69449),C=a(7088),I=a(33314),k=a(46149),D=a(48468),S=a(13769)},18261:(e,t,a)=>{"use strict";a.d(t,{lT:()=>s,Du:()=>o});var r=a(29828),n=a.n(r);const s=(e,t)=>{var a;e=n()(e).call(e,"--")?e:"--"+e,null===(a=document.documentElement)||void 0===a||a.style.setProperty(e,t)},o=e=>e+" !important"},16885:(e,t,a)=>{"use strict";a.d(t,{CW:()=>i,m2:()=>l,DN:()=>c});var r=a(56474),n=a.n(r),s=a(99095),o=a(38043);const i=n()({all:"all",internal:"internal",external:"external",mangled:"mangled"}),l=(n()({all:o.default.allLabel,...(0,s.defineMessages)({external:{id:"wallet.receive.nav.external",defaultMessage:"!!!External"},internal:{id:"wallet.receive.nav.internal",defaultMessage:"!!!Internal"},mangled:{id:"wallet.receive.nav.mangled",defaultMessage:"!!!Mangled"}})}),n()({base:"base",enterprise:"enterprise",reward:"reward",byron:"byron",addressBook:"addressBook",group:"group"})),d=(0,s.defineMessages)({group:{id:"wallet.address.category.group",defaultMessage:"!!!Addresses formed by the combination of a spending key and a staking key"},single:{id:"wallet.address.category.single",defaultMessage:"!!!Addresses containing only a spending key and no staking key"}}),c=(n()({group:d.group,base:d.group,enterprise:d.single,...(0,s.defineMessages)({reward:{id:"wallet.address.category.reward",defaultMessage:"!!!Address for your staking key"},byron:{id:"wallet.address.category.byron",defaultMessage:"!!!Addresses created using the Byron-era address format"},addressBook:{id:"wallet.address.category.addressBook",defaultMessage:"!!!Addresses that do not belong to you, but are relevant to your wallet"}})}),n()({byron:o.default.byronLabel,...(0,s.defineMessages)({base:{id:"wallet.receive.navigation.baseLabel",defaultMessage:"!!!Base"},enterprise:{id:"wallet.receive.navigation.enterpriseLabel",defaultMessage:"!!!Enterprise"},reward:{id:"wallet.receive.navigation.rewardLabel",defaultMessage:"!!!Reward"},group:{id:"wallet.receive.navigation.groupLabel",defaultMessage:"!!!Group"},addressBook:{id:"wallet.receive.navigation.AddressBook",defaultMessage:"!!!Address book"}})}),n()({None:"None",Unused:"Unused",Used:"Used",HasBalance:"HasBalance"}));n()({None:o.default.allLabel,...(0,s.defineMessages)({Used:{id:"wallet.receive.navigation.usedLabel",defaultMessage:"!!!Used"},Unused:{id:"wallet.receive.navigation.unusedLabel",defaultMessage:"!!!Unused"},HasBalance:{id:"wallet.receive.navigation.hasBalanceLabel",defaultMessage:"!!!Has Balance"}})})},52298:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(42898);class n extends r.ZP{bindings(){return{ReactToolbox:{id:"id",name:"name",type:"type",value:"value",label:"label",placeholder:"hint",disabled:"disabled",error:"error",onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"}}}}},28336:(e,t,a)=>{"use strict";a.d(t,{splitAmount:()=>s,truncateLongName:()=>o,truncateToken:()=>l,truncateAddressShort:()=>d,formatBigNumberToFloatString:()=>c}),a(39291);var r=a(3649),n=a.n(r);function s(e,t){if(0===t)return[e.toFormat(0),""];const a=e.toFormat(t),r=a.length-t;let s=a.substring(0,r);const o=a.substring(r).replace(/0+$/,"");return o||(s=n()(s).call(s,0,s.length-1)),[s,o]}a(905);const o=(e,t)=>{if("string"!=typeof e||0===e.length)return"";const a=Math.max(null!=t?t:15,4);return e.length>a?e.substring(0,a-3)+"...":e};function i(e,t){return e.length-3<=t?e:e.substring(0,t/2)+"..."+e.substring(e.length-t/2,e.length)}function l(e){return i(e,20)}function d(e,t){return i(e,null!=t?t:20)}function c(e){return e.isInteger()?e.toFixed(1):e.toString()}},39329:(e,t,a)=>{"use strict";a.d(t,{ee:()=>r}),a(86902),a(78914),a(41511),a(29828);const r=e=>{e.preventDefault();let t=e.target;for(;!(t instanceof HTMLAnchorElement);){if(!(t instanceof Element))return;t=t.parentNode}t instanceof HTMLAnchorElement&&window.open(t.href,"_blank")}},16544:(e,t,a)=>{"use strict";a.d(t,{calculateAndFormatValue:()=>o});var r=a(59340),n=a.n(r),s=(a(905),a(13469));function o(e,t){try{return(a=e.multipliedBy(t)).isZero()?"0":a.abs().lt(1)?a.toFormat(6):a.toFixed(2)}catch(a){return s.Yd.error(`Error when calling calculateAndFormatValue(${n()(e)}, ${t}): ${a.message}`),"-"}var a}},43577:(e,t,a)=>{"use strict";a.d(t,{tQ:()=>V,XN:()=>U,nH:()=>z,O8:()=>K,xC:()=>Y,Mk:()=>q});var r=a(86902),n=a.n(r),s=(a(51938),a(94198)),o=a.n(s),i=a(51942),l=a.n(i),d=a(32366),c=a.n(d),u=a(36384),p=a.n(u),g=(a(47302),a(20116)),h=a.n(g),f=(a(78580),a(25843),a(80426)),w=a.n(f),m=a(94473),y=a.n(m),x=a(2991),_=a.n(x),v=a(93476),A=a.n(v),b=a(3649),E=a.n(b),T=(a(63371),a(86335)),C=(a(38441),a(3577)),I=a(905),k=(a(21131),a(38079)),D=a(37495),S=(a(45918),a(79562)),M=a(27649),R=a(84184),B=a(84174),W=(a(51965),a(60274)),P=a(90649),N=a(55343),F=(a(39845),a(57421),a(34704),a(27423),a(94346),a(71265),a(66905)),O=a(75723),L=(a(32533),a(95667)),H=a(48764).Buffer;function V(e){var t;const[a,r]=(0,W.jK)(e,F.OC.GOVERNANCE_DREP_KEYS,F.x_),n=c()(t=(0,B.getCardanoHaskellBaseConfig)((0,B.getNetworkById)(e.networkId))).call(t,((e,t)=>l()(e,t)),{}),s=o()(n.ChainNetworkId,10);return[(0,O.pubKeyHashToRewardAddress)(a.hash().to_hex(),s),r]}function U(e,t){var a,r;const n=null==e?void 0:e.native_scripts();return _()(a=w()(r=(0,P.iterateLenGet)(n)).call(r,(e=>(0,P.iterateLenGet)(e.get_required_signers())))).call(a,(e=>e.to_hex())).toSet()}function G(e){var t;return _()(t=(0,P.iterateLenGet)(e.required_signers())).call(t,(e=>e.to_hex())).toSet()}new I.Z("5000000"),new I.Z("2000000");const j=[[e=>e.as_stake_deregistration(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_vote_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_and_vote_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_registration_and_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_stake_vote_registration_and_delegation(),e=>e.stake_credential().to_keyhash()],[e=>e.as_drep_registration(),e=>e.voting_credential().to_keyhash()],[e=>e.as_drep_deregistration(),e=>e.voting_credential().to_keyhash()],[e=>e.as_drep_update(),e=>e.voting_credential().to_keyhash()],[e=>e.as_pool_registration(),e=>(0,P.iterateLenGet)(e.pool_params().pool_owners()).toArray()]];function Z(e){var t,a,r,n;const s=w()(t=(0,P.iterateLenGet)(e.certs()).nonNull()).call(t,(e=>{for(const[t,a]of j){const r=(0,P.maybe)(t(e),a);if(null!=r)return(0,P.ensureArray)(r)}return[]})),o=_()(a=(0,P.iterateLenGet)(null===(r=e.voting_procedures())||void 0===r?void 0:r.get_voters()).nonNull()).call(a,(e=>{var t;return null===(t=e.to_drep_credential())||void 0===t?void 0:t.to_keyhash()})).nonNull();return _()(n=s.join(o)).call(n,(e=>e.to_hex())).toSet()}async function z(e,t,a){return T.RustModule.WasmScope((r=>async function(e,t,a,r){var n;const{txBody:s,witnessSet:o,auxiliaryData:i,rawTxBody:l}=K(a,r),d=(0,C.se)(e);if(null==d)throw new Error("missing utxo functionality");const c=(0,C.sX)(d);if(null==c)throw new Error("missing chains functionality");const u=new(p())([...G(s),...U(o),...Z(s)]),g=u.size>0,[f,w,m]=await A().all([c.getAllUtxos(),g?(0,D.XN)({publicDeriver:e,type:k.dq.CARDANO_BASE}):A().resolve([]),g?(0,D.XN)({publicDeriver:e,type:k.dq.CARDANO_REWARD}):A().resolve([])]),y=new(p()),x=[];if(g){var v;if(0===w.length)throw new Error("Cannot sign transaction script - no base addresses are available in the wallet!");const t=r.WalletV4.Address.from_bytes((0,P.hexToBytes)(w[0].address)),a=t.network_id(),n=null===(v=r.WalletV4.BaseAddress.from_address(t))||void 0===v?void 0:v.stake_cred();if(null==n)throw new Error("Cannot sign transaction script - failed to parse the base address staking cred!");for(const e of u){const t=r.WalletV4.Ed25519KeyHash.from_bytes((0,P.hexToBytes)(e)),s=r.WalletV4.Credential.from_keyhash(t),o=r.WalletV4.BaseAddress.new(a,s,n).to_address();y.add((0,P.bytesToHex)(o.to_bytes()))}for(const e of w){const{address:t,addressing:a}=e;if(y.delete(t)&&x.push({address:t,addressing:a}),0===y.size)break}for(const e of m){const{address:t,addressing:a}=e;u.has(E()(t).call(t,2))&&x.push({address:t,addressing:a})}const[s,o]=await(0,W.ZE)(e),i=s.hash().to_hex();if(u.has(i)){const e=r.WalletV4.RewardAddress.new(0,r.WalletV4.Credential.from_keyhash(s.hash())).to_address().to_hex();x.push({address:e,...o})}}const b=await(0,S.loadSubmittedTransactions)()||[],T=new W.ZP,I=await T.addressedUtxosWithSubmittedTxs((0,M.ue)(f),e,b),B=_()(n=(0,P.iterateLenGet)(s.inputs()).join((0,P.iterateLenGet)(s.collateral()))).call(n,(e=>`${e.transaction_id().to_hex()}${String(e.index())}`)).toSet(),N=h()(I).call(I,(e=>B.has(e.utxo_id)));return(await(0,R.Ff)(N,l,e,t,i,x)).witness_set().to_hex()}(e,t,a,r)))}function K(e,t){const{tx:a}=e;let r,n,s,o;const i=(0,P.hexToBytes)(a);try{const e=t.WalletV4.FixedTransaction.from_bytes(i);r=e.body(),n=e.witness_set(),s=e.auxiliary_data(),o=H.from(e.raw_body())}catch(e){try{r=t.WalletV4.TransactionBody.from_bytes(i),o=i}catch(t){throw e}}return{txBody:r,witnessSet:n,auxiliaryData:s,rawTxBody:o}}async function Y(e,t,a){var r,n;const s=(0,C.se)(e);if(!s)throw new Error("expect to be able to get all UTXOs");const o=new(p())(w()(r=await s.getAllUtxoAddresses()).call(r,(e=>{var t;return _()(t=e.addrs).call(t,(e=>e.Hash))})));let i;i=a||(0,M.ue)(await s.getAllUtxos());const l=await(0,S.loadSubmittedTransactions)()||[],d=new W.ZP;i=await d.addressedUtxosWithSubmittedTxs(i,e,l);const c=(0,O.transactionHexToHash)(t),u=T.RustModule.WalletV4.Transaction.from_hex(t),g=e.getParent().defaultToken,h={defaultNetworkId:g.NetworkId,defaultIdentifier:g.Identifier},f=new N.a([],h),m={from:[],to:[]};let x=!0;const v=u.body(),A=new N.a([],h),b=A.add(A.createDefaultEntry(new I.Z(v.fee().to_str()))),E=[];for(const e of(0,P.iterateLenGet)(v.inputs())){const t=e.transaction_id().to_hex(),a=e.index(),r=y()(i).call(i,(e=>e.tx_hash===t&&e.tx_index===a));if(!r)throw new Error("missing UTXO");E.push({txHash:t,index:a});const n=new N.a([],h);n.add({amount:new I.Z(r.amount),identifier:g.Identifier,networkId:g.NetworkId});for(const e of r.assets)n.add({amount:new I.Z(e.amount),identifier:e.assetId,networkId:g.NetworkId});m.from.push({address:r.receiver,value:n}),o.has(r.receiver)&&f.joinSubtractMutable(n)}for(const e of(0,P.iterateLenGet)(v.outputs())){const t=(0,M.$Z)(e.amount(),h),a=e.address().to_hex();m.to.push({address:a,value:t,isForeign:!1}),o.has(a)?f.joinAddMutable(t):x=!1}const D=_()(n=(0,P.iterateLenGetMap)(v.withdrawals()).nonNullValue()).call(n,(([e,t])=>({address:e.to_address().to_hex(),value:new N.a([{amount:new I.Z(t.to_str()),identifier:g.Identifier,networkId:g.NetworkId}],h)}))).toArray();let R=!1;for(const e of(0,P.iterateLenGet)(v.certs()))if((0,L.isCertificateKindDrepDelegation)(e.kind())){R=!0;break}const B=u.auxiliary_data(),F={txid:c,type:x?"self":"expend",amount:f,fee:b,date:new Date,addresses:m,state:k.YM.SUBMITTED,errorMsg:null,block:null,certificates:[],ttl:new I.Z(String(v.ttl())),metadata:null==B?void 0:B.to_hex(),withdrawals:D,isValid:!0};l.push({publicDeriverId:e.publicDeriverId,transaction:F,networkId:e.getParent().getNetworkInfo().NetworkId,usedUtxos:E,isDrepDelegation:R}),await(0,S.persistSubmittedTransactions)(l)}async function q(e,t){const a=e;await T.RustModule.load();const r=T.RustModule.WalletV4;return t?_()(a).call(a,(e=>{const t=r.TransactionInput.new(r.TransactionHash.from_hex(e.tx_hash),e.tx_index),a=r.Value.new(r.BigNum.from_str(e.amount));(e.assets||[]).length>0&&a.set_multiasset(function(e){const t=c()(e).call(e,((e,t)=>((e[t.policyId]=e[t.policyId]||[]).push(t),e)),{}),a=T.RustModule.WalletV4,r=a.MultiAsset.new();for(const e of n()(t)){const n=t[e],s=a.ScriptHash.from_hex(e),o=T.RustModule.WalletV4.Assets.new();for(const e of n)o.insert(a.AssetName.new((0,P.hexToBytes)(e.name)),a.BigNum.from_str(e.amount));r.insert(s,o)}return r}(e.assets));const s=r.TransactionOutput.new(r.Address.from_hex(e.receiver),a);return r.TransactionUnspentOutput.new(t,s).to_hex()})):_()(a).call(a,(e=>({...e,receiver:r.Address.from_hex(e.receiver).to_bech32()})))}},66528:(e,t,a)=>{"use strict";var r=a(73935),n=a(22188),s=a(72986),o=a(59731),i=a(36473),l=a(86902),d=a.n(l),c=a(2991),u=a.n(c),p=a(78914),g=a.n(p),h=a(56474),f=a.n(h),w=a(49262),m=a(84174);const y="/select-cashback-wallet";class x extends w.ZP{setup(){super.setup()}teardown(){super.teardown()}getCurrentNetworkId(){return window.location.hash.replace(/^#/,"")===y?m.networks.CardanoMainnet.NetworkId:super.getCurrentNetworkId()}}var _=a(7107),v=a(18680),A=a(19109);class b extends A.Z{setup(){super.setup()}}var E,T,C=a(32366),I=a.n(C),k=a(5838),D=a.n(k),S=a(87672),M=a.n(S),R=a(89749),B=a.n(R),W=(a(18293),a(39392)),P=a.n(W),N=a(94473),F=a.n(N),O=a(32880),L=a(54973),H=a(52065);let V=(E=class extends O.Z{constructor(...e){super(...e),D()(this,"tokenInfo",T,this),M()(this,"fetchMissingTokenInfo",(async(e,t)=>{const a=await(0,L.getCardanoAssets)({networkId:e,tokenIds:t});(0,n.runInAction)((()=>{this._updateTokenInfo(a)}))})),M()(this,"refreshTokenInfo",(async()=>{const e=await(0,L.getCardanoAssets)();(0,n.runInAction)((()=>{this._updateTokenInfo(e)}))})),M()(this,"getDefaultTokenInfo",(e=>function(e,t){var a;const r=F()(m.defaultAssets).call(m.defaultAssets,(t=>t.NetworkId===e));if(null==r)throw new Error("TokenInfoStore no default token found for network");const n=null===(a=t.get(e.toString()))||void 0===a?void 0:a.get(r.Identifier);if(null==n)throw new Error("TokenInfoStore no row found for default token");return n}(e,this.tokenInfo))),M()(this,"getDefaultTokenInfoSummary",(e=>(0,H.createTokenRowSummary)(this.getDefaultTokenInfo(e)))),M()(this,"_updateTokenInfo",(e=>{for(const t of e){const e=this.tokenInfo.get(t.NetworkId.toString());if(null==e){const e=u()(n.observable).call(n.observable);e.set(t.Identifier,t),this.tokenInfo.set(t.NetworkId.toString(),e)}else e.set(t.Identifier,t)}}))}setup(){super.setup(),this.tokenInfo=new(P())}async fetchRemoteMetadata(e,t){const a=t.replace(".","");return(await this.stores.substores.ada.stateFetchStore.fetcher.getTokenInfo({network:e,tokenIds:[a]}))[a]}async getLocalOrRemoteMetadata(e,t){var a;const r=null===(a=this.tokenInfo.get(String(e.NetworkId)))||void 0===a?void 0:a.get(t);if(null!=r)return(0,H.createTokenRowSummary)(r);const n=await this.fetchRemoteMetadata(e,t);return null!=n?n:{name:void 0,ticker:void 0,decimals:void 0,logo:void 0}}fetchMissingAndGetLocalOrRemoteMetadata(e,t){const a=this.fetchMissingTokenInfo(e.NetworkId,t);return I()(t).call(t,((t,r)=>(t[r]=a.then((()=>this.getLocalOrRemoteMetadata(e,r))),t)),{})}},T=B()(E.prototype,"tokenInfo",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E);var U=a(34074),G=a.n(U),j=a(51942),Z=a.n(j),z=a(80426),K=a.n(z),Y=a(36384),q=a.n(Y),$=a(55343);const J=f()({IDLE:0,PENDING:1,SUCCESS:2,REJECTED:3});var X=a(33913),Q=a(905),ee=a(70797),te=a(86335),ae=a(27649),re=a(43577),ne=a(79562),se=a(28082),oe=a(70184),ie=a(62021),le=a(17462),de=a.n(le),ce=a(9838),ue=a(53003),pe=a(63139),ge=a(99095);const he=(0,ge.defineMessages)({transactionHashMismatchError:{id:"wallet.hw.tx.hash.error",defaultMessage:"!!!The transaction hash computed by Yoroi extension and that by the device mismatch."},unsupportedTransactionError:{id:"wallet.hw.tx.unsupported.error",defaultMessage:"!!!Signing this transaction with hardware wallet is not supported."},trezorSignDataUnsupportedError:{id:"wallet.hw.trezor.data.sign.unsupported.error",defaultMessage:"!!!Trezor does not support data signing at this memoment"},unknownAddressError:{id:"wallet.hw.data.sign.unkown.address",defaultMessage:"!!!The requested signing address is not found in this wallet"}}),fe=new pe.default(he.transactionHashMismatchError),we=new pe.default(he.unsupportedTransactionError),me=new pe.default(he.trezorSignDataUnsupportedError),ye=new pe.default(he.unknownAddressError);var xe=a(52974),_e=a(75941),ve=a(74057),Ae=a.n(ve);async function be(e,t,a){const r=function(){const{manifest:e}=xe.Z.wallets.hardwareWallet.trezorT;return{email:e.EMAIL,appUrl:_e.Z.isFirefox()?e.appURL.FIREFOX:e.appURL.CHROME}}();await Ae().init({manifest:r}),t&&Ae().on(ve.DEVICE_EVENT,t),a&&Ae().on(ve.UI_EVENT,a);const n=await e(Ae());return t&&Ae().off(ve.DEVICE_EVENT,t),a&&Ae().off(ve.UI_EVENT,a),await Ae().dispose(),n}var Ee,Te,Ce,Ie,ke,De,Se,Me,Re,Be,We,Pe,Ne,Fe,Oe,Le,He,Ve,Ue,Ge=a(6951),je=a(90649),Ze=a(75723),ze=a(60274),Ke=a(68469);let Ye=!1,qe=!1,$e=(Ee=class extends O.Z{constructor(...e){super(...e),D()(this,"unrecoverableError",Te,this),D()(this,"connectingMessage",Ce,this),D()(this,"whiteList",Ie,this),D()(this,"loadingWallets",ke,this),D()(this,"errorWallets",De,this),D()(this,"wallets",Se,this),D()(this,"getConnectorWhitelist",Me,this),D()(this,"setConnectorWhitelist",Re,this),D()(this,"signingMessage",Be,this),D()(this,"adaTransaction",We,this),M()(this,"rawTx",null),M()(this,"addressedUtxos",null),M()(this,"reorgTxSignRequest",null),M()(this,"collateralOutputAddressSet",null),D()(this,"submissionError",Pe,this),D()(this,"hwWalletError",Ne,this),D()(this,"isHwWalletErrorRecoverable",Fe,this),M()(this,"isSignInExecuted",!1),D()(this,"_getConnectingMsg",Oe,this),D()(this,"_getSigningMsg",Le,this),D()(this,"confirmSignInTx",He,this),D()(this,"cancelSignInTx",Ve,this),D()(this,"refreshWallets",Ue,this),M()(this,"createAdaTransaction",(async()=>{var e;const{signingMessage:t,connectedWallet:a}=this;if(null==a||null==t)return;if(!t.sign.tx)return;const{tx:r}=t.sign.tx,s=(0,m.getNetworkById)(a.networkId);if(!(0,m.isCardanoHaskell)(s))throw new Error("ConnectorStore::createAdaTransaction unexpected wallet type");const o=await(0,ne.loadSubmittedTransactions)()||[],i=await this.api.ada._addressedUtxosWithSubmittedTxs((0,ae.ue)(a.utxos),a.publicDeriverId,a.allUtxoAddresses,o);this.addressedUtxos=i;const l=this.stores.tokenInfoStore.getDefaultTokenInfo(s.NetworkId);let d;try{const e=te.RustModule.WalletV4.FixedTransaction.from_hex(r);this.rawTx=r,d=e.body()}catch{try{d=te.RustModule.WalletV4.TransactionBody.from_hex(r),this.rawTx=(0,Ze.transactionBodyHexToTransaction)(r)}catch{return void(0,n.runInAction)((()=>{this.unrecoverableError="Unable to parse input transaction."}))}}const c=[],p=[],g=new(q())(K()(o).call(o,(({usedUtxos:e})=>{var t;return u()(t=e||[]).call(t,(({txHash:e,index:t})=>`${e}${t}`))})));for(const e of(0,je.iterateLenGet)(d.inputs())){const a=e.transaction_id().to_hex(),r=e.index();if(g.has(`${a}${r}`))return(0,L.signFail)({errorType:"spent_utxo",data:`${a}${r}`,uid:t.sign.uid,tabId:t.tabId}),void this.closeWindow();const n=F()(i).call(i,(({tx_hash:e,tx_index:t})=>e===a&&t===r));n?c.push({address:n.receiver,value:(0,ae.Bi)(n,l.NetworkId)}):p.push({txHash:a,txIndex:r})}const h=new(q())(u()(e=[...a.allAddresses.utxoAddresses,...a.allAddresses.accountingAddresses]).call(e,(e=>e.address.Hash))),f=[];for(const e of(0,je.iterateLenGet)(d.outputs())){const t=e.address().to_hex();f.push({address:t,isForeign:!h.has(t),value:(0,ae.$Z)(e.amount(),{defaultNetworkId:a.networkId,defaultIdentifier:a.defaultTokenId})})}const w={tokenId:l.Identifier,networkId:l.NetworkId,amount:d.fee().to_str()},{amount:y,total:x}=await this._calculateAmountAndTotal(a,c,f,w,a.utxos,h),_=[];if(p.length){const e=await this.stores.substores.ada.stateFetchStore.fetcher.getUtxoData({network:s,utxos:p});for(let a=0;a<e.length;a++){const r=e[a];if(null==r||"object"!=typeof r)return(0,L.signFail)({errorType:"missing_utxo",data:`${p[a].txHash}${p[a].txIndex}`,uid:t.sign.uid,tabId:t.tabId}),void this.closeWindow();if(null!=r.spendingTxHash)return(0,L.signFail)({errorType:"spent_utxo",data:`${p[a].txHash}${p[a].txIndex}`,uid:t.sign.uid,tabId:t.tabId}),void this.closeWindow();const n=(0,ae.Bi)(r.output,l.NetworkId);_.push({address:(0,Ze.addressBech32ToHex)(r.output.address),value:n})}}const v=[],A=d.certs();if(A)for(const e of(0,je.iterateLenGet)(A)){if(!e)throw new Error("unexpectedly missing certificate");const t=e.as_stake_registration();if(t){var b,E;const e=null!==(b=null===(E=t.coin())||void 0===E?void 0:E.toString())&&void 0!==b?b:null;v.push({type:"StakeRegistrationCert",coin:e});continue}const a=e.as_stake_deregistration();if(a){var T,C;const e=null!==(T=null===(C=a.coin())||void 0===C?void 0:C.toString())&&void 0!==T?T:null;v.push({type:"StakeDeregistrationCert",coin:e});continue}const r=e.as_stake_delegation();if(r){const e=r.stake_credential().to_keyhash();e&&v.push({type:"StakeDelegationCert",poolKeyHash:e.to_hex()});continue}const n=e.as_vote_delegation();if(n){n.stake_credential().to_keyhash()&&v.push({type:"VoteDelegCert",drep:n.drep().to_hex()});continue}const s=e.as_stake_and_vote_delegation();if(s){s.stake_credential().to_keyhash()&&v.push({type:"StakeVoteDelegCert",drep:s.drep().to_hex(),poolKeyHash:s.pool_keyhash().to_hex()});continue}const o=e.as_stake_registration_and_delegation();if(o){o.stake_credential().to_keyhash()&&v.push({type:"StakeRegDelegCert",poolKeyHash:o.pool_keyhash().to_hex(),coin:o.coin().to_str()});continue}const i=e.as_vote_registration_and_delegation();if(i){i.stake_credential().to_keyhash()&&v.push({type:"VoteRegDelegCert",drep:i.drep().to_hex(),coin:i.coin().to_str()});continue}const l=e.as_stake_vote_registration_and_delegation();if(l){l.stake_credential().to_keyhash()&&v.push({type:"StakeVoteRegDelegCert",poolKeyHash:l.pool_keyhash().to_hex(),drep:l.drep().to_hex(),coin:l.coin().to_str()});continue}const d=e.as_drep_registration();if(d){d.voting_credential().to_keyhash()&&v.push({type:"RegDrepCert",coin:d.coin().to_str(),anchor:Je(d.anchor())});continue}const c=e.as_drep_deregistration();if(c){c.voting_credential().to_keyhash()&&v.push({type:"UnregDrepCert",coin:c.coin().to_str()});continue}const u=e.as_drep_update();u&&u.voting_credential().to_keyhash()&&v.push({type:"UpdateDrepCert",anchor:Je(u.anchor())})}const I=d.voting_procedures();if(I)for(const e of(0,je.iterateLenGet)(I.get_voters())){if(!e)throw new Error("unexpectedly missing voter");const t=I.get_governance_action_ids_by_voter(e);for(const a of(0,je.iterateLenGet)(t)){var k,D,S,M,R,B,W,P,N;if(!a)throw new Error("unexpectedly missing governance action id");const t=I.get(e,a);if(!t)throw new Error("unexpectedly missing voting procedure");v.push({type:"VotingProcedure",voterType:e.kind(),voterHash:(null===(k=e.to_constitutional_committee_hot_credential())||void 0===k||null===(D=k.to_scripthash())||void 0===D?void 0:D.to_hex())||(null===(S=e.to_constitutional_committee_hot_credential())||void 0===S||null===(M=S.to_keyhash())||void 0===M?void 0:M.to_hex())||(null===(R=e.to_drep_credential())||void 0===R||null===(B=R.to_scripthash())||void 0===B?void 0:B.to_hex())||(null===(W=e.to_drep_credential())||void 0===W||null===(P=W.to_keyhash())||void 0===P?void 0:P.to_hex())||(null===(N=e.to_stake_pool_key_hash())||void 0===N?void 0:N.to_hex())||(()=>{throw new Error("unexpected voter")})(),govActionTxId:a.transaction_id().to_hex(),govActionIndex:a.index(),vote:t.vote_kind(),anchor:Je(t.anchor())})}}const O=d.voting_proposals();if(O)for(const e of(0,je.iterateLenGet)(O));const H=d.current_treasury_value();H&&v.push({type:"TreasuryValue",coin:H.to_str()});const V=d.donation();V&&v.push({type:"TreasuryDonation",positiveCoin:V.to_str()}),(0,n.runInAction)((()=>{this.adaTransaction={inputs:c,foreignInputs:_,outputs:f,fee:w,total:x,amount:y,cip95Info:v}}))})),M()(this,"generateReorgTransaction",(async()=>{const{signingMessage:e,connectedWallet:t}=this;if(null==t||null==e)return;if("tx-reorg/cardano"!==e.sign.type)throw new Error("unexpected signing data type");const{usedUtxoIds:a,reorgTargetAmount:r,utxos:s}=e.sign.tx,o=(0,ae.ue)((0,n.toJS)(s));this.addressedUtxos=o;const i=new ze.ZP,l=(await i._getAllUsedAddresses(t))[0];if(!l)throw new Error("wallet has no used address");const d=await(0,L.getProtocolParameters)(t),{unsignedTx:c,collateralOutputAddressSet:u}=await i._createReorgTx((0,m.getNetworkById)(t.networkId),{defaultNetworkId:t.networkId,defaultIdentifier:t.defaultTokenId},t.publicDeriverId,t.allUtxoAddresses,t.receiveAddress,a,r,o,t.submittedTransactions,l,d);this.reorgTxSignRequest=c,this.collateralOutputAddressSet=u;const p={tokenId:c.fee().getDefaultEntry().identifier,networkId:c.fee().getDefaultEntry().networkId,amount:c.fee().getDefaultEntry().amount.toString()},{amount:g,total:h}=await this._calculateAmountAndTotal(t,c.inputs(),c.outputs(),p,s);(0,n.runInAction)((()=>{this.adaTransaction={foreignInputs:[],inputs:c.inputs(),outputs:c.outputs(),fee:p,amount:g,total:h,cip95Info:[]}}))})),M()(this,"signAndSendReorgTx",(async(e,t,a)=>{const r=this.reorgTxSignRequest;if(!r)throw new Error("unexpected nullish sign request");const n=r.unsignedTx.build_tx().to_hex();if("mnemonic"===e.type)await(0,L.signAndBroadcastTransaction)({signRequest:r,password:t,publicDeriverId:e.publicDeriverId});else{const t=await this.hwSignTxHex(e,n);await(0,L.broadcastTransaction)({signedTxHex:t,publicDeriverId:e.publicDeriverId,addressedUtxos:a})}return(0,Ze.transactionHexToHash)(n)})),M()(this,"getUtxosAfterReorg",(e=>{var t;const a=null===(t=this.adaTransaction)||void 0===t?void 0:t.outputs;if(!a)throw new Error("unexpected nullish transaction");if(!this.collateralOutputAddressSet)throw new Error("unexpected nullish collateral address set");const r=[];for(let t=0;t<a.length;t++)this.collateralOutputAddressSet.has(a[t].address)&&r.push({utxo_id:e+String(t),tx_hash:e,tx_index:t,receiver:a[t].address,amount:a[t].value.getDefault().toString(),assets:[]});return r})),M()(this,"_getConnectorWhitelist",(async()=>{await this.getConnectorWhitelist.execute()})),M()(this,"updateConnectorWhitelist",(async({whitelist:e})=>{await this.setConnectorWhitelist.execute({whitelist:e}),await this.getConnectorWhitelist.execute()}))}setup(){super.setup(),this._getConnectorWhitelist(),this._getConnectingMsg(),this._getSigningMsg(),(0,je.noop)(this.currentConnectorWhitelist)}teardown(){super.teardown()}closeWindow(){window.close()}async _calculateAmountAndTotal(e,t,a,r,n,s){var o;s||(s=new(q())(u()(o=e.allAddresses.utxoAddresses).call(o,(e=>e.address.Hash)))).add(e.receiveAddress.addr.Hash);const i={defaultNetworkId:e.networkId,defaultIdentifier:e.defaultTokenId},l=new $.a([{amount:new Q.Z("0"),identifier:i.defaultIdentifier,networkId:i.defaultNetworkId}],i);for(const e of t)s.has(e.address)&&l.joinSubtractMutable(e.value);for(const e of a)s.has(e.address)&&l.joinAddMutable(e.value);const d=l.joinAddCopy(new $.a([{identifier:r.tokenId,networkId:r.networkId,amount:new Q.Z(r.amount)}],i));return{total:l,amount:d}}get signingRequest(){if(null==this.signingMessage)return;const{signingMessage:e}=this;null!=this.connectedWallet&&e.sign.tx}get currentConnectorWhitelist(){var e;let{result:t}=this.getConnectorWhitelist;return null==t&&(t=this.getConnectorWhitelist.execute().result),null!==(e=t)&&void 0!==e?e:[]}get connectedWallet(){var e;const{signingMessage:t}=this;return null==t?null:F()(e=this.wallets).call(e,(e=>e.publicDeriverId===t.publicDeriverId))}async hwSignTxHex(e,t,a=[]){const r={};for(const{address:t,path:a}of e.allAddresses.utxoAddresses)r[t.Hash]=a;for(const{address:t,path:a}of e.allAddresses.accountingAddresses)r[t.Hash]=a;if("ledger"===e.type)return this.ledgerSignTx(e,t,r,a);if("trezor"===e.type)return this.trezorSignTx(e,t,r);throw new Error("unexpected wallet type")}async trezorSignTx(e,t,a){var r;const s=(0,m.getNetworkById)(e.networkId),o=I()(r=(0,m.getCardanoHaskellBaseConfig)(s)).call(r,((e,t)=>Z()(e,t)),{}),{addressedUtxos:i}=this;if(!i)throw new Error("unexpected nullish addressed UTXOs");const l=(0,Ze.transactionHexToBodyHex)(t);let d,c;try{d=(0,ie.fu)(l,Number(o.ChainNetworkId),o.ByronNetworkId,(e=>a[e]),i)}catch(e){throw console.error("toTrezorSignRequest failed: ",e),(0,n.runInAction)((()=>{this.hwWalletError=we,this.isHwWalletErrorRecoverable=!1})),new Error("unsupported transaction")}try{const e=await be((e=>e.cardanoSignTransaction({...(0,je.purify)(d),allowSeedlessDevice:!0})));if(!e.success)throw new Error(`Trezor signing error: ${e.payload.error} (code=${String(e.payload.code)})`);c=e.payload}catch(e){throw(0,n.runInAction)((()=>{this.hwWalletError=new ue.Z(e),this.isHwWalletErrorRecoverable=!0})),e}if(c.hash!==de()(32).update((0,je.hexToBytes)(l)).digest("hex"))throw(0,n.runInAction)((()=>{this.hwWalletError=fe,this.isHwWalletErrorRecoverable=!1})),new Error("hash mismatch");return(0,ie.Qo)(t,c.witnesses)}async ledgerSignTx(e,t,a,r=[]){var s;const o=(0,m.getNetworkById)(e.networkId),i=I()(s=(0,m.getCardanoHaskellBaseConfig)(o)).call(s,((e,t)=>Z()(e,t)),{}),{addressedUtxos:l}=this;if(!l)throw new Error("unexpected nullish addressed UTXOs");const[d,c]=(0,re.tQ)(e);a[d]=c.addressing.path;const u=(0,Ze.transactionHexToBodyHex)(t);let p;try{p=(0,oe.od)(u,Number(i.ChainNetworkId),i.ByronNetworkId,(e=>a[e]),l,r)}catch(e){throw console.error("toLedgerSignRequest failed: ",e),(0,n.runInAction)((()=>{this.hwWalletError=we,this.isHwWalletErrorRecoverable=!1})),new Error("unsupported transaction")}const g=e.hardwareWalletDeviceId||"",h=new se.L({locale:this.stores.profile.currentLocale});let f;try{f=await h.signTransaction({serial:g,params:p})}catch(e){throw Xe(),(0,n.runInAction)((()=>{this.hwWalletError=new ce.Z(e),this.isHwWalletErrorRecoverable=!0})),e}if(f.txHashHex!==de()(32).update((0,je.hexToBytes)(u)).digest("hex"))throw(0,n.runInAction)((()=>{this.hwWalletError=fe,this.isHwWalletErrorRecoverable=!1})),new Error("hash mismatch");const w={key:te.RustModule.WalletV4.Bip32PublicKey.from_hex(e.publicKey),addressing:{startLevel:1,path:e.pathToPublic}};return(0,oe.Qo)(t,f.witnesses,w)}checkHwWalletSignData(){const{connectedWallet:e}=this;null!=e&&"trezor"===e.type&&(0,n.runInAction)((()=>{this.hwWalletError=me,this.isHwWalletErrorRecoverable=!1}))}get filteredWallets(){return this.wallets}},Te=B()(Ee.prototype,"unrecoverableError",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=B()(Ee.prototype,"connectingMessage",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=B()(Ee.prototype,"whiteList",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ke=B()(Ee.prototype,"loadingWallets",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.IDLE}}),De=B()(Ee.prototype,"errorWallets",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Se=B()(Ee.prototype,"wallets",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=B()(Ee.prototype,"getConnectorWhitelist",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ee.Z(this.api.localStorage.getWhitelist)}}),Re=B()(Ee.prototype,"setConnectorWhitelist",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ee.Z((({whitelist:e})=>this.api.localStorage.setWhitelist(e)))}}),Be=B()(Ee.prototype,"signingMessage",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=B()(Ee.prototype,"adaTransaction",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=B()(Ee.prototype,"submissionError",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=B()(Ee.prototype,"hwWalletError",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=B()(Ee.prototype,"isHwWalletErrorRecoverable",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B()(Ee.prototype,"closeWindow",[n.action],G()(Ee.prototype,"closeWindow"),Ee.prototype),Oe=B()(Ee.prototype,"_getConnectingMsg",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{await async function(){if(!Ye){const e=await(0,L.connectWindowRetrieveData)();return Ye=!0,e}}().then((e=>{(0,n.runInAction)((()=>{this.connectingMessage=e}))})).catch((e=>console.error(e)))}}}),Le=B()(Ee.prototype,"_getSigningMsg",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{await async function(){if(!qe){const e=await(0,L.signWindowRetrieveData)();return qe=!0,e}}().then((e=>{(0,n.runInAction)((()=>{this.signingMessage=e})),e&&("tx/cardano"===e.sign.type&&(this.createAdaTransaction(),Ge.ampli.dappPopupSignTransactionPageViewed()),"tx-reorg/cardano"===e.sign.type&&(this.generateReorgTransaction(),Ge.ampli.dappPopupAddCollateralPageViewed()),"data"===e.sign.type&&this.checkHwWalletSignData())})).catch((e=>console.error(e)))}}}),He=B()(Ee.prototype,"confirmSignInTx",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{(0,n.runInAction)((()=>{this.submissionError=null}));const{signingMessage:t,connectedWallet:a}=this;if(null==t)throw new Error("confirmSignInTx confirming a tx but no signing message set");if(!a)throw new Error("unexpected nullish wallet");if("tx-reorg/cardano"===t.sign.type){let r;try{r=await this.signAndSendReorgTx(a,e,(0,ae.ue)(t.sign.tx.utxos))}catch(e){return e instanceof X.UZ?void(0,n.runInAction)((()=>{this.submissionError="WRONG_PASSWORD"})):void(0,n.runInAction)((()=>{this.submissionError="SEND_TX_ERROR"}))}const s=this.getUtxosAfterReorg(r);(0,L.userSignConfirm)({tx:s,uid:t.sign.uid,tabId:t.tabId,password:e})}else if("tx"===t.sign.type||"tx_input"===t.sign.type||"tx/cardano"===t.sign.type){const r=(0,n.toJS)(t.sign.tx);if("mnemonic"!==a.type){const{rawTx:e}=this;if(!e)throw new Error("unexpected nullish transaction");const n=te.RustModule.WasmScope((e=>{const{witnessSet:t}=(0,re.O8)(r,e);return null==t?[]:[...(0,re.XN)(t,e)]})),s=(0,Ze.transactionHexToWitnessSet)(await this.hwSignTxHex(a,e,n));(0,L.userSignConfirm)({tx:r,uid:t.sign.uid,tabId:t.tabId,witnessSetHex:s,password:""})}else(0,L.userSignConfirm)({tx:r,uid:t.sign.uid,tabId:t.tabId,password:e})}else{if("data"!==t.sign.type)throw new Error(`unkown sign data type ${t.sign.type}`);{const{payload:r}=t.sign;if("mnemonic"===a.type)(0,L.userSignConfirm)({tx:null,uid:t.sign.uid,tabId:t.tabId,password:e});else{if("ledger"!==a.type)throw new Error("Not expected to reach here. Unexpectedly wallet type");{const e=(0,ze.Cj)(a,t.sign.address);if(null==e)return void(0,n.runInAction)((()=>{this.hwWalletError=ye,this.isHwWalletErrorRecoverable=!1}));const s=a.hardwareWalletDeviceId||"",o=new se.L({locale:this.stores.profile.currentLocale});let i;try{i=await o.signMessage({serial:s,params:{messageHex:r,signingPath:e,hashPayload:!1,preferHexDisplay:!1,addressFieldType:Ke.MessageAddressFieldType.KEY_HASH}}),(0,L.userSignConfirm)({tx:null,uid:t.sign.uid,tabId:t.tabId,password:"",signedMessageData:i})}catch(e){return Xe(),void(0,n.runInAction)((()=>{this.hwWalletError=new ce.Z(e),this.isHwWalletErrorRecoverable=!0}))}}}}}(0,n.runInAction)((()=>{this.isSignInExecuted=!0})),await Ge.ampli.dappPopupSignTransactionSubmitted()}}}),Ve=B()(Ee.prototype,"cancelSignInTx",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{if(this.isSignInExecuted)return;if(null==this.signingMessage)throw new Error("confirmSignInTx confirming a tx but no signing message set");const{signingMessage:e}=this;(0,L.userSignReject)({uid:e.sign.uid,tabId:e.tabId})}}}),Ue=B()(Ee.prototype,"refreshWallets",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{(0,n.runInAction)((()=>{this.loadingWallets=J.PENDING,this.errorWallets=""}));try{var e,t,a;const r=await(0,L.getWallets)(this.stores.profile.getCurrentNetworkId());(0,n.runInAction)((()=>{this.loadingWallets=J.SUCCESS,this.wallets.replace(r)})),"tx/cardano"===(null===(e=this.signingMessage)||void 0===e?void 0:e.sign.type)&&this.createAdaTransaction(),"tx-reorg/cardano"===(null===(t=this.signingMessage)||void 0===t?void 0:t.sign.type)&&this.generateReorgTransaction(),"data"===(null===(a=this.signingMessage)||void 0===a?void 0:a.sign.type)&&this.checkHwWalletSignData()}catch(e){(0,n.runInAction)((()=>{this.loadingWallets=J.REJECTED,this.errorWallets=e.message}))}}}}),B()(Ee.prototype,"signingRequest",[n.computed],G()(Ee.prototype,"signingRequest"),Ee.prototype),B()(Ee.prototype,"currentConnectorWhitelist",[n.computed],G()(Ee.prototype,"currentConnectorWhitelist"),Ee.prototype),B()(Ee.prototype,"connectedWallet",[n.computed],G()(Ee.prototype,"connectedWallet"),Ee.prototype),Ee);function Je(e){return e?{url:e.url().url(),dataHash:e.anchor_data_hash().to_hex()}:null}function Xe(){chrome.windows.update(-2,{focused:!0})}var Qe=a(24913),et=a(61346);class tt extends Qe.Z{async loadingEnd(){await this.stores.tokenInfoStore.refreshTokenInfo(),await this.stores.coinPriceStore.loadFromStorage()}getTabIdKey(){return et.sz.YoroiConnector}}var at=a(37065);const rt=f()({stateFetchStore:at.Z}),nt=(0,n.observable)({stateFetchStore:null}),st=(0,n.action)(((e,t)=>{const a=d()(rt);return g()(a).call(a,(e=>{nt[e]&&nt[e].teardown()})),g()(a).call(a,(a=>{nt[a]=new rt[a](e,t)})),nt}));var ot=a(72527),it=a(25234);class lt extends it.Z{}const dt=f()({stateFetchStore:ot.Z,profile:x,uiDialogs:v.Z,uiNotifications:_.Z,coinPriceStore:b,loading:tt,connector:$e,tokenInfoStore:V,explorers:lt}),ct=(0,n.observable)({stateFetchStore:null,profile:null,explorers:null,uiDialogs:null,uiNotifications:null,coinPriceStore:null,loading:null,connector:null,tokenInfoStore:null,substores:null}),ut=(0,n.action)((e=>{const t=d()(dt);g()(t).call(t,(e=>{ct[e]&&ct[e].teardown()})),g()(t).call(t,(t=>{ct[t]=new dt[t](ct,e)})),g()(t).call(t,(e=>{ct[e]&&ct[e].initialize()})),ct.substores={ada:st(ct,e)};const a=ct;var r,n,s;return r=a.substores.ada,g()(n=u()(s=d()(r)).call(s,(e=>r[e]))).call(n,(e=>e.initialize())),a.loading.load().then((()=>console.debug("connector / loading store loaded"))).catch((e=>console.error("connector / loading store load failed",e))),a}));var pt=a(70210),gt=a(67294),ht=a(259),ft=a(16550),wt=a(6467),mt=a.n(wt),yt=a(4187),xt=a.n(yt),_t=a(63151),vt=a.n(_t),At=a(13655),bt=a.n(At),Et=a(51949),Tt=a.n(Et),Ct=a(51738),It=a.n(Ct),kt=a(54206),Dt=a.n(kt),St=a(68333),Mt=a.n(St),Rt=a(75686),Bt=a.n(Rt),Wt=a(32820),Pt=a.n(Wt),Nt=a(22669),Ft=a.n(Nt),Ot=a(64593),Lt=a(33032),Ht=a.n(Lt),Vt=a(20116),Ut=a.n(Vt),Gt=a(54103),jt=a.n(Gt),Zt=a(89400),zt=a.n(Zt),Kt=a(94184),Yt=a.n(Kt),qt=a(93379),$t=a.n(qt),Jt=a(4159);$t()(Jt.Z,{insert:"head",singleton:!1});const Xt=Jt.Z.locals||{};var Qt=a(26447),ea=a(69397),ta=a(23972),aa=a(90948),ra=a(99226),na=a(99987);$t()(na.Z,{insert:"head",singleton:!1});const sa=na.Z.locals||{};var oa=a(70526),ia=a(48521);class la extends gt.Component{render(){var e;const{publicDeriver:t,walletBalance:a,disabledForReason:r}=this.props,[n,s]=t.plate?(o=t.plate,i=sa.icon,[o.TextPart,(0,ia.jsx)("div",{className:i,children:(0,ia.jsx)(oa.default,{iconSeed:o.ImagePart,saturationFactor:0,scalePx:6})})]):[];var o,i;const l=null===(e=this.props.publicDeriver.plate)||void 0===e?void 0:e.TextPart;return(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(ra.Z,{className:sa.card,children:(0,ia.jsxs)("div",{className:sa.wrapper,children:[(0,ia.jsx)("div",{className:sa.avatar,children:s}),(0,ia.jsxs)("div",{className:sa.nameWrapper,children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#242838",fontWeight:"500",variant:"b1",fontSize:16,id:"connectedWalletName",children:this.props.publicDeriver.name}),(0,ia.jsx)("div",{className:sa.checksum,id:"connectedWalletPlate",children:l})]}),null!=a&&(0,ia.jsx)(ra.Z,{sx:{ml:"auto"},children:a})]})}),r&&(0,ia.jsx)("div",{className:sa.disabledReason,children:r})]})}}M()(la,"defaultProps",{walletBalance:void 0});var da=a(38043),ca=a(69051),ua=a(85342);$t()(ua.Z,{insert:"head",singleton:!1});const pa=ua.Z.locals||{};var ga=a(88441);const ha=e=>{var t,a;const r=null!==(t=e.step)&&void 0!==t?t:1,n=null!==(a=e.max)&&void 0!==a?a:3;return(0,ia.jsx)("div",{className:pa.component,children:(0,ia.jsx)(ga.Z,{color:"secondary",sx:{height:"8px"},value:100*r/n,variant:"determinate"})})},fa=ha;ha.defaultProps={step:1,max:3};var wa,ma,ya,xa=a(19896),_a=a(94535),va=a(52298),Aa=a(11634),ba=a.n(Aa);function Ea(){return Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ea.apply(this,arguments)}function Ta(e){return gt.createElement("svg",Ea({width:261,height:215,viewBox:"0 0 261 215",xmlns:"http://www.w3.org/2000/svg"},e),wa||(wa=gt.createElement("defs",null,gt.createElement("linearGradient",{x1:"0%",y1:"49.974%",x2:"100.018%",y2:"49.974%",id:"no-websites-connected_inline_svg__a"},gt.createElement("stop",{stopColor:"#17D1AA",offset:"0%"}),gt.createElement("stop",{stopColor:"#1ACBAF",offset:"15%"}),gt.createElement("stop",{stopColor:"#21B8BC",offset:"37%"}),gt.createElement("stop",{stopColor:"#2E9BD3",offset:"62%"}),gt.createElement("stop",{stopColor:"#3F71F1",offset:"89%"}),gt.createElement("stop",{stopColor:"#475FFF",offset:"100%"})),gt.createElement("linearGradient",{x1:"0%",y1:"50.001%",x2:"100%",y2:"50.001%",id:"no-websites-connected_inline_svg__b"},gt.createElement("stop",{stopColor:"#17D1AA",offset:"0%"}),gt.createElement("stop",{stopColor:"#1ACBAF",offset:"15%"}),gt.createElement("stop",{stopColor:"#21B8BC",offset:"37%"}),gt.createElement("stop",{stopColor:"#2E9BD3",offset:"62%"}),gt.createElement("stop",{stopColor:"#3F71F1",offset:"89%"}),gt.createElement("stop",{stopColor:"#475FFF",offset:"100%"})),gt.createElement("linearGradient",{x1:"0%",y1:"98.252%",x2:"53.86%",y2:"70.976%",id:"no-websites-connected_inline_svg__c"},gt.createElement("stop",{stopColor:"#1A44B7",offset:"0%"}),gt.createElement("stop",{stopColor:"#4760FF",offset:"100%"})))),ma||(ma=gt.createElement("g",{fill:"none",fillRule:"evenodd"},gt.createElement("g",{opacity:.2,stroke:"#1D45BA",strokeWidth:.5},gt.createElement("path",{d:"M88.512 206.008l172.395-98.865M23.001 156.749l160.818-92.225M78.51 52.704l181.606 104.014M-.195 120.451l152.232 87.192"})),gt.createElement("g",{fillRule:"nonzero"},gt.createElement("path",{d:"M43.44 106.652c2.5-16.313 0-20.069 0-20.069l-16.398 21.79s4.387 6.972 3.296 10.894a24.265 24.265 0 01-2.015 5.27 1.485 1.485 0 00.428 1.943c.11.084.23.154.357.207l5.824 3.44 7.042-12.202 1.547-6.88-1.622 1.272a26.273 26.273 0 001.541-5.665z",fill:"url(#no-websites-connected_inline_svg__a)",transform:"translate(72.24 8)"}),gt.createElement("path",{d:"M91.822 4.662l-5.594-3.177a14.715 14.715 0 00-2.47-.94c-1.507-.482-3.319-.224-5.264.906l-68.86 39.8C4.439 44.248.26 52.26.283 59.14l.19 55.39c0 4.128 1.547 6.88 3.88 7.815l6.4 3.326 5.028-7.506L78.765 81.76c5.195-2.999 9.374-11.01 9.35-17.89l-.184-53.4 3.89-5.81z",fill:"url(#no-websites-connected_inline_svg__b)",transform:"translate(72.24 8)"}),gt.createElement("path",{d:"M167.149 20.081c0-6.88-4.248-10.034-9.431-7.035L88.858 52.85c-5.196 3-9.375 11.01-9.352 17.89l.19 55.385c0 6.88 4.25 10.034 9.432 7.035l21.27-12.293a18.807 18.807 0 01-1.189 10.292 63.448 63.448 0 01-2.516 4.983 1.524 1.524 0 00.302 1.846c.511.475 1.28.548 1.874.178 4.964-3.21 11.879-9.41 13.443-19.604.277-1.807.49-3.44.652-4.96l35.025-20.247c5.195-2.999 9.374-11.01 9.35-17.89l-.19-55.385z",fill:"#E1F2FF"})),gt.createElement("g",{transform:"matrix(-1 0 0 1 152.99 48.376)",fill:"url(#no-websites-connected_inline_svg__c)"},gt.createElement("path",{d:"M10.504 9.881c0 2.798-2.262 3.668-5.053 1.945C2.661 10.102.398 6.436.398 3.639.398.842 2.66-.029 5.451 1.695c2.79 1.724 5.053 5.39 5.053 8.186M51.654 35.299c0 2.797-2.262 3.668-5.052 1.944-2.791-1.724-5.053-5.389-5.053-8.186 0-2.798 2.262-3.668 5.053-1.944 2.79 1.723 5.052 5.389 5.052 8.186M34.799 47.854L14.359 35.23c-1.249-.77-2.27-2.427-2.27-3.679 0-1.252 1.021-1.646 2.27-.874l20.44 12.625c1.249.772 2.27 2.428 2.27 3.68 0 1.252-1.021 1.645-2.27.873"})))))}function Ca(){return Ca=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ca.apply(this,arguments)}function Ia(e){return gt.createElement("svg",Ca({width:32,height:32,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},e),ya||(ya=gt.createElement("g",{fill:"none",fillRule:"evenodd"},gt.createElement("rect",{fill:"#F0F3F5",width:32,height:32,rx:16}),gt.createElement("g",{transform:"translate(6 8)"},gt.createElement("rect",{stroke:"#C4CAD7",strokeWidth:1.3,width:20,height:16,rx:2}),gt.createElement("path",{stroke:"#C4CAD7",strokeWidth:1.3,d:"M0 4h20"}),gt.createElement("g",{fill:"#C4CAD7",fillRule:"nonzero"},gt.createElement("path",{d:"M3.942 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.005-.038.015-.055l1.05-1.625-.945-1.545a.124.124 0 01-.014-.055c0-.03.01-.056.032-.077A.106.106 0 014.047 8h1.086c.093 0 .163.042.21.125l.35.61.38-.61A.226.226 0 016.283 8h1.034c.03 0 .056.01.078.033a.106.106 0 01.033.077c0 .02-.005.038-.015.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033H6.293a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09zM8.387 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.006-.038.016-.055l1.05-1.625-.945-1.545a.124.124 0 01-.015-.055c0-.03.01-.056.032-.077A.106.106 0 018.493 8h1.084c.094 0 .164.042.21.125l.35.61.38-.61a.226.226 0 01.21-.125h1.036c.03 0 .055.01.077.033a.106.106 0 01.033.077c0 .02-.005.038-.015.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033h-1.125a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09zM12.832 11.5a.106.106 0 01-.077-.033.106.106 0 01-.033-.077c0-.02.005-.038.015-.055l1.05-1.625-.945-1.545a.124.124 0 01-.015-.055c0-.03.011-.056.033-.077A.106.106 0 0112.938 8h1.084c.094 0 .164.042.21.125l.35.61.38-.61a.226.226 0 01.21-.125h1.035c.03 0 .056.01.078.033a.106.106 0 01.032.077c0 .02-.005.038-.014.055l-.965 1.53 1.065 1.64c.01.017.015.035.015.055 0 .03-.011.056-.033.077a.106.106 0 01-.077.033h-1.125a.226.226 0 01-.205-.115l-.435-.67-.415.67a.226.226 0 01-.205.115h-1.09z"}))))))}a.p,a.p;var ka,Da,Sa=a(22045),Ma=a(90490),Ra=a(22417);function Ba(){return Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ba.apply(this,arguments)}function Wa(e){return gt.createElement("svg",Ba({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ka||(ka=gt.createElement("path",{d:"M10 13a1 1 0 100 2h.01a1 1 0 100-2H10zM10 5a1 1 0 00-1 1v5a1 1 0 102 0V6a1 1 0 00-1-1z",fill:"#ED8600"})),Da||(Da=gt.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10zm10-8a8 8 0 100 16 8 8 0 000-16z",fill:"#ED8600"})))}a.p;var Pa,Na,Fa=a(29828),Oa=a.n(Fa),La=a(5227),Ha=a(95667),Va=a(75316),Ua=a(21073),Ga=a(39053),ja=a(90852),Za=a(65593),za=a(78744),Ka=a(67611),Ya=a(36094),qa=a(71653),$a=a(22715),Ja=a(91057),Xa=a(77524),Qa=a(66606),er=a(48975);const tr=(0,ge.defineMessages)({dialogTitle:{id:"buysell.dialog.title",defaultMessage:"!!!Exchange ADA"},adaAmount:{id:"buysell.dialog.adaAmount",defaultMessage:"!!!ADA Amount"},currentBalance:{id:"buysell.dialog.currentBalance",defaultMessage:"!!!Current balance: {amount} ADA"},lessThanMinimum:{id:"buysell.dialog.error.minimum",defaultMessage:"!!!Minimum {amount} ADA required"},notEnoughBalance:{id:"buysell.dialog.error.not.enough",defaultMessage:"!!!Not enough balance"},providerFee:{id:"buysell.dialog.providerFee",defaultMessage:"!!!Provider fee"},buyProviderFee:{id:"buysell.dialog.buyProviderFee",defaultMessage:"!!!2% fee"},sellProviderFee:{id:"buysell.dialog.sellProviderFee",defaultMessage:"!!!2.5% fee"},proceed:{id:"buysell.dialog.proceed",defaultMessage:"PROCEED"},urlGenerationErrorDialogTitle:{id:"buysell.dialog.error.dialog.title",defaultMessage:"!!!url generation"},longLoadingDialogText:{id:"buysell.dialog.longloading.text",defaultMessage:"!!!We are redirecting you outside Yoroi. Please wait."},failDialogText:{id:"buysell.dialog.fail.text",defaultMessage:"!!!This service is currently unavailable. Please try again later."}}),ar=new Q.Z("100"),rr=new Q.Z("1"),nr="https://ramp-redirect.yoroiwallet.com/yoroi-extension-exchange-callback.html",sr=(0,aa.ZP)(Va.Z)((({theme:e})=>({position:"relative",borderRadius:"8px",textAlign:"center",transition:"all .5s",[`&.${Ua.Z.root}`]:{color:e.palette.ds.text_gray_max,padding:"8px",backgroundColor:"transparent",fontSize:"16px",fontWeight:"500",lineHeight:"24px"},height:"auto",margin:"10px 0",float:"none",[`&.${Ua.Z.selected}, &.${Ua.Z.root}:hover`]:{backgroundColor:e.palette.ds.gray_200,color:e.palette.ds.text_gray_max,fontSize:"16px",fontWeight:"500",lineHeight:"24px"}}))),or=(0,aa.ZP)(ra.Z)({display:"flex",flexDirection:"row",marginBottom:"16px","& .provider-logo":{width:"48px",height:"48px"},"& .provider-name-fee":{marginLeft:"10px",display:"flex",flexDirection:"column",justifyContent:"center"},"& .provider-name":{fontFamily:"Rubik",fontSize:"16px",fontWeight:500,lineHeight:"24px",textAlign:"left"},"& .provider-fee":{fontFamily:"Rubik",fontSize:"12px",fontWeight:400,lineHeight:"16px",letterSpacing:"0.2px",textAlign:"left"}}),ir=(0,aa.ZP)(ra.Z)({height:"428px",width:"343px",display:"flex",margin:"auto","& .content":{margin:"auto"},"& svg":{display:"block",margin:"0 auto",width:"137px"},"& .text":{marginTop:"24px",fontFamily:"Rubik",fontSize:"20px",fontWeight:500,lineHeight:"30px",textAlign:"center"}}),lr=_e.Z.isDev()||_e.Z.isNightly()?tr.dialogTitle:da.default.buyAda;let dr=(0,ht.observer)((Na=class extends gt.Component{constructor(...e){super(...e),M()(this,"state",{isBuying:!0,inputError:null,urlGenerationError:null,amountAda:"",isSubmitting:!1,showDisclaimer:!0}),M()(this,"urlGenerationTimeout",null),M()(this,"onSubmit",(async()=>{const{state:e,props:t}=this;this.setState({isSubmitting:!0,urlGenerationError:null});const a=(0,Ka.M5)({isProduction:!0,partner:"yoroi"}),r=(0,Ka.eC)({api:a});let n,s;n=e.isBuying?{providerId:"banxa",queries:{fiatType:"USD",coinType:"ADA",walletAddress:t.receiveAdaAddress,orderType:"buy",returnUrl:nr,coinAmount:Number(e.amountAda),balance:t.currentBalanceAda.toString()}}:{providerId:"encryptus",queries:{fiatType:"USD",coinType:"ADA",walletAddress:t.receiveAdaAddress,orderType:"sell",returnUrl:nr,coinAmount:Number(e.amountAda),balance:t.currentBalanceAda.toString()}},this.urlGenerationTimeout=Ht()((()=>{this.state.urlGenerationError||(this.setState({urlGenerationError:"longLoading"}),this.urlGenerationTimeout=Ht()((()=>{this.state.urlGenerationError||this.setState({urlGenerationError:"timeout"})}),28e3))}),2e3);try{s=await r.referralLink.create(n)}catch(e){return void this.setState({urlGenerationError:"failed"})}finally{clearTimeout(this.urlGenerationTimeout)}const{urlGenerationError:o}=this.state;if("timeout"===o||"aborted"===o)return;this.setState({urlGenerationError:null});const i=this;chrome.tabs.create({url:s.href},(e=>{chrome.tabs.onRemoved.addListener((t=>{t===e.id&&i.setState({isSubmitting:!1})})),chrome.runtime.onMessage.addListener(((a,r)=>{"exchange callback"===a.type&&r.tab.id===e.id&&(chrome.tabs.remove(r.tab.id),t.onExchangeCallback())}))})),Ge.ampli.exchangeSubmitted({ada_amount:Number(e.amountAda),ramp_type:e.isBuying?"Buy":"Sell"})})),M()(this,"onChangeAmount",(e=>{const{value:t}=e.target;if(!t.match(/^\d*$/))return;const a=(()=>{if(""===t)return null;if(this.state.isBuying){if(ar.gt(t))return"lessThanBuyMinimum"}else{if(rr.gt(t))return"lessThanSellMinimum";if(rr.gt(this.props.currentBalanceAda))return"notEnoughBalance";if(new Q.Z(t).gt(this.props.currentBalanceAda))return"notEnoughBalance"}return null})();this.setState({amountAda:t,inputError:a})})),M()(this,"setDisclaimerAccepted",(()=>{this.setState({showDisclaimer:!1})})),M()(this,"renderDisclaimerDialog",(()=>{const{intl:e}=this.context,{onCancel:t}=this.props;return(0,ia.jsx)(er.Z,{onAccept:this.setDisclaimerAccepted,onClose:t,intl:e})}))}componentDidMount(){Ge.ampli.exchangePageViewed()}renderBuySell(){const{intl:e}=this.context,{state:t,props:a}=this,[r,n]=t.isBuying?[Xa.Z,"Banxa"]:[Qa.Z,"Encryptus"];let s=" ";return"lessThanBuyMinimum"===t.inputError?s=e.formatMessage(tr.lessThanMinimum,{amount:ar.toString()}):"lessThanSellMinimum"===t.inputError?s=e.formatMessage(tr.lessThanMinimum,{amount:rr.toString()}):"notEnoughBalance"===t.inputError&&(s=e.formatMessage(tr.notEnoughBalance)),(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)($a.Z,{label:e.formatMessage(tr.adaAmount),InputProps:{endAdornment:(0,ia.jsx)(Ja.Z,{position:"end",children:(0,ia.jsxs)("div",{style:{position:"relative"},children:[(0,ia.jsxs)("div",{style:{marginBottom:"8px",color:"#000",display:"flex",alignItems:"center"},children:[(0,ia.jsx)("img",{style:{marginRight:"8px",borderRadius:"4px",verticalAlign:"bottom"},src:"/js/863c8ba380c92ec53deae008560f89c1.png",alt:""}),(0,ia.jsx)(ta.Z,{variant:"body2",color:"ds.text_gray_max",children:"ADA"})]}),(0,ia.jsx)(ra.Z,{color:"ds.text_gray_low",sx:{position:"absolute",right:"0px",fontSize:"12px"},children:e.formatMessage(tr.currentBalance,{amount:a.currentBalanceAda})})]})}),sx:{paddingBottom:"1lh"}},sx:{paddingBottom:0},value:t.amountAda,onChange:this.onChangeAmount,error:null!==t.inputError,helperText:s,autoFocus:!0}),(0,ia.jsxs)(or,{children:[(0,ia.jsx)("div",{className:"provider-logo",children:(0,ia.jsx)("img",{src:r,alt:""})}),(0,ia.jsxs)("div",{className:"provider-name-fee",children:[(0,ia.jsx)(ta.Z,{variant:"body2",color:"ds.text_gray_medium",className:"provider-name",children:n}),(0,ia.jsx)(ta.Z,{variant:"body2",color:"ds.text_gray_medium",className:"provider-fee",children:t.isBuying?e.formatMessage(tr.buyProviderFee):e.formatMessage(tr.sellProviderFee)})]})]})]})}render(){const{intl:e}=this.context,{state:t,props:a}=this,{urlGenerationError:r,showDisclaimer:n}=t;if(n)return this.renderDisclaimerDialog();if("longLoading"===r){const t=()=>{this.setState({urlGenerationError:"aborted",isSubmitting:!1})};return(0,ia.jsx)(Ya.ZP,{title:e.formatMessage(tr.urlGenerationErrorDialogTitle),closeOnOverlayClick:!1,closeButton:(0,ia.jsx)(qa.Z,{}),onClose:t,children:(0,ia.jsx)(ir,{children:(0,ia.jsxs)("div",{className:"content",children:[(0,ia.jsx)(Za.r,{}),(0,ia.jsx)(ta.Z,{variant:"h1",color:"ds.text_gray_medium",className:"text",children:e.formatMessage(tr.failDialogText)})]})})})}if("timeout"===r||"failed"===r){const t=()=>{this.setState({urlGenerationError:null,isSubmitting:!1})};return(0,ia.jsx)(Ya.ZP,{title:e.formatMessage(tr.urlGenerationErrorDialogTitle),closeOnOverlayClick:!0,closeButton:(0,ia.jsx)(qa.Z,{}),onClose:t,children:(0,ia.jsx)(ir,{children:(0,ia.jsxs)("div",{className:"content",children:[(0,ia.jsx)(za.r,{}),(0,ia.jsx)("div",{className:"text",children:e.formatMessage(tr.failDialogText)})]})})})}return(0,ia.jsxs)(Ya.ZP,{title:e.formatMessage(lr),closeOnOverlayClick:!1,onClose:a.onCancel,closeButton:(0,ia.jsx)(qa.Z,{}),dialogActions:[{label:e.formatMessage(da.default.proceed),primary:!0,disabled:""===t.amountAda||null!==t.inputError,onClick:this.onSubmit,isSubmitting:t.isSubmitting}],styleOverride:{width:"648px"},styleFlags:{contentNoTopPadding:!0},children:[(_e.Z.isDev()||_e.Z.isNightly())&&(0,ia.jsxs)(Ga.Z,{value:t.isBuying?0:1,onChange:()=>this.setState({isBuying:!t.isBuying,inputError:null}),sx:{width:"100%",[`& .${ja.Z.indicator}`]:{display:"none"},boxShadow:"none"},children:[(0,ia.jsx)(sr,{disableRipple:!0,label:e.formatMessage(da.default.buyAda)}),(0,ia.jsx)(sr,{disableRipple:!0,label:e.formatMessage(da.default.sellAda)})]}),this.renderBuySell()]})}},M()(Na,"contextTypes",{intl:ge.intlShape.isRequired}),Pa=Na))||Pa;var cr=a(72603),ur=a(42375),pr=a(37527),gr=a(74640),hr=a(71363);const fr=f()({testnetFaucet:"https://docs.cardano.org/cardano-testnets/tools/faucet"});var wr;const mr=f()({[m.networks.CardanoPreprodTestnet.NetworkId]:{color:"rgba(236, 186, 9, 1)",text:"Preprod"},[m.networks.CardanoPreviewTestnet.NetworkId]:{color:"rgba(143, 201, 246, 1)",text:"Preview"}}),yr=new ne.default;var xr,_r;(0,ht.observer)((wr=class extends gt.Component{constructor(...e){super(...e),M()(this,"updateHideBalance",(async()=>{await this.props.stores.profile.updateHideBalance()})),M()(this,"addNewWallet",(async()=>{this.props.stores.uiDialogs.closeActiveDialog(),this.props.stores.app.goToRoute({route:La.ROUTES.WALLETS.ADD});const e=this.props.stores.wallets.selected;e&&await yr.unsetPortfolioFiatPair(e.networkId)})),M()(this,"onSelectWallet",(async e=>{const{delegation:t,app:a}=this.props.stores,r=t.isRewardWallet(e),n=a.currentRoute===La.ROUTES.STAKING;this.props.stores.wallets.setActiveWallet({publicDeriverId:e});const s=this.props.stores.wallets.selected;s&&await yr.unsetPortfolioFiatPair(s.networkId);const o=!r&&n?La.ROUTES.WALLETS.ROOT:a.currentRoute;this.props.stores.app.goToRoute({route:o})})),M()(this,"checkAndResetGovRoutes",(()=>{const{stores:e}=this.props,t=e.app.currentRoute;t!==La.ROUTES.Governance.FAIL&&t!==La.ROUTES.Governance.SUBMITTED||e.app.goToRoute({route:La.ROUTES.Governance.ROOT})})),M()(this,"getDialog",(()=>{const{stores:e}=this.props,{selected:t,wallets:a}=e.wallets,r=(0,H.genLookupOrFail)(e.tokenInfoStore.tokenInfo),n=e.profile.shouldHideBalance;if(e.uiDialogs.isOpen(pr.Z))return(0,ia.jsx)(pr.Z,{cardanoWallets:u()(a).call(a,(e=>({walletId:e.publicDeriverId,rewards:this.props.stores.delegation.getRewardBalanceOrZero(e),amount:e.balance,plate:e.plate,type:e.type,name:e.name}))),onSelect:e=>{this.checkAndResetGovRoutes(),this.onSelectWallet(e)},selectedWalletId:null==t?void 0:t.publicDeriverId,close:()=>{this.checkAndResetGovRoutes(),this.props.stores.uiDialogs.closeActiveDialog()},shouldHideBalance:n,onUpdateHideBalance:this.updateHideBalance,getTokenInfo:r,walletAmount:null==t?void 0:t.balance,onAddWallet:this.addNewWallet,onUpdateWalletListOrder:async(e,t)=>{await this.props.stores.wallets.reorderWallets(e,t)},unitOfAccountSetting:e.profile.unitOfAccount,getCurrentPrice:e.coinPriceStore.getCurrentPrice});if(e.uiDialogs.isOpen(dr)){if(!t)return null;const{numberOfDecimals:a}=r(t.balance.getDefaultEntry()).Metadata,n=(0,Ha.addressToDisplayString)(t.receiveAddress.addr.Hash,(0,m.getNetworkById)(t.networkId));return(0,ia.jsx)(dr,{onCancel:this.props.stores.uiDialogs.closeActiveDialog,onExchangeCallback:()=>e.app.goToRoute({route:La.ROUTES.EXCHANGE_END}),currentBalanceAda:t.balance.getDefault().shiftedBy(-a),receiveAdaAddress:n})}return this.props.stores.uiDialogs.isOpen(hr.Z)?(0,ia.jsx)(hr.Z,{stores:this.props.stores}):null}))}render(){var e;const{stores:t,pageBanner:a,isErrorPage:r}=this.props,{profile:n,wallets:s}=t,{selected:o,selectedWalletName:i}=s,l=n.shouldHideBalance,d=()=>{if(!o||!i)return null;const{plate:e}=o,t=this.props.stores.delegation.getRewardBalanceOrZero(o);return(0,ia.jsx)(ur.Z,{plate:e,name:i,onUpdateHideBalance:this.updateHideBalance,shouldHideBalance:l,rewards:t,walletAmount:o.balance,getTokenInfo:(0,H.genLookupOrFail)(this.props.stores.tokenInfoStore.tokenInfo),defaultToken:this.props.stores.tokenInfoStore.getDefaultTokenInfo(o.networkId),unitOfAccountSetting:n.unitOfAccount,getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,openWalletInfoDialog:()=>{Ge.ampli.allWalletsPageViewed(),this.props.stores.uiDialogs.open({dialog:pr.Z})}})};let c;if((null===(e=this.props.stores.wallets.selected)||void 0===e?void 0:e.networkId)!==m.networks.CardanoMainnet.NetworkId&&this.props.stores.wallets.selected){const{color:e,text:a}=mr[this.props.stores.wallets.selected.networkId];c=(0,ia.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[this.props.title,(0,ia.jsx)("button",{style:{backgroundColor:e,marginLeft:"8px",borderRadius:"16px",paddingLeft:"8px",paddingRight:"8px",cursor:"pointer"},onClick:()=>t.uiDialogs.open({dialog:hr.Z}),children:a})]})}else c=this.props.title;const u=this.props.stores.profile.getCurrentNetworkId()!==m.networks.CardanoMainnet.NetworkId;return(0,ia.jsxs)(ia.Fragment,{children:[this.getDialog(),(0,ia.jsx)(cr.Z,{title:c,menu:this.props.menu,walletDetails:null!==o?(0,ia.jsx)(d,{}):null,buyButton:(0,ia.jsx)(gr.Z,{onBuySellClick:()=>{var e;u?window.open(fr.testnetFaucet,"_blank"):(Oa()(e=t.router.location.pathname).call(e,La.ROUTES.WALLETS.ROOT)&&Ge.ampli.walletPageExchangeClicked(),this.props.stores.uiDialogs.open({dialog:dr}))},isTestnet:u}),isErrorPage:r,pageBanner:a}),a&&a]})}},M()(wr,"contextTypes",{intl:ge.intlShape.isRequired}),M()(wr,"defaultProps",{menu:void 0}),wr));const vr=(0,ge.defineMessages)({subtitle:{id:"connector.label.connect",defaultMessage:"!!!Connect to"},connectWallet:{id:"connector.label.connectWallet",defaultMessage:"!!!Connect Wallet"},connectWalletAuthRequest:{id:"connector.label.connectWalletAuthRequest",defaultMessage:"!!!The dApp requests to use your wallet identity for authentication. Enter your password to confirm."},yourWallets:{id:"connector.label.yourWallets",defaultMessage:"!!!Your Wallets"},selectAllWallets:{id:"connector.label.selectAllWallets",defaultMessage:"!!!Select all wallets"},connectInfo:{id:"connector.connect.info",defaultMessage:"!!!Your connection preferences will be saved to your Yoroi dApp list."},noWalletsFound:{id:"connector.connect.noWalletsFound",defaultMessage:"!!!Ooops, no wallets found"},incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect wallet password."},createWallet:{id:"connector.connect.createWallet",defaultMessage:"!!!create wallet"},harwareWalletConnectWithAuthNotSupported:{id:"connector.connect.hardwareWalletsConnectWithAuthNotSupported",defaultMessage:"!!!Connecting to hardware wallet with authentication is not supported"},testnetWarningTitle:{id:"connector.connect.testnetWarningTitle",defaultMessage:"!!!Testnet support"},testnetWarningText:{id:"connector.connect.testnetWarningText",defaultMessage:"!!!This DApp may not support Cardano {networkName} (test blockchain network). Ensure it supports {networkName} before connecting."},cashbackApplyAll:{id:"connector.connect.cashback.apply.all",defaultMessage:"!!!The wallet you select will be applied for all partner websites."},cashbackDisabledTrezor:{id:"connector.connect.cashback.trezor.disabled",defaultMessage:"!!!Cashback service doesnt support Trezor wallet connection"},addWallet:{id:"connector.connect.cashback.addWallet",defaultMessage:"!!!Add wallet"}});let Ar=(0,ht.observer)((_r=class extends gt.Component{constructor(...e){super(...e),M()(this,"form",new va.Z({fields:{walletPassword:{type:"password",label:this.context.intl.formatMessage(da.default.walletPasswordLabel),placeholder:this.context.intl.formatMessage(da.default.walletPasswordFieldPlaceholder),value:"",validators:[({field:e})=>""===e.value?[!1,this.context.intl.formatMessage(da.default.fieldIsRequired)]:[!0]]}}},{options:{validateOnChange:!0,validateOnBlur:!1,validationDebounceWait:xe.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:ba()()}})),M()(this,"hidePasswordForm",(()=>{this.form.$("walletPassword").clear(),this.props.hidePasswordForm()})),M()(this,"submit",(()=>{this.form.submit({onSuccess:e=>{const{walletPassword:t}=zt()(e).call(e),{deriver:a,checksum:r}=this.props.selectedWallet;a&&r&&this.props.onConnect(a,r,t).catch((e=>{if(!(e instanceof X.UZ))throw e;this.form.$("walletPassword").invalidate(this.context.intl.formatMessage(vr.incorrectWalletPasswordError))}))},onError:()=>{}})})),M()(this,"onCancel",(()=>{this.props.onCancel()})),M()(this,"onCreateWallet",(()=>{const{isSelectingCashbackWallet:e=!1}=this.props,t=e?"?from=cashback":"";window.chrome.tabs.create({url:`${window.location.origin}/main_window.html#/wallets/add${t}`}),this.props.onCancel()}))}render(){var e,t,a;const{intl:r}=this.context,{loading:n,error:s,publicDerivers:o,message:i,onSelectWallet:l,networkId:d,shouldHideBalance:c,isAppAuth:p,onUpdateHideBalance:g,selectedWallet:h,isSelectingCashbackWallet:f=!1}=this.props,w=_e.N.isNightly(),y=Yt()([Xt.component,w&&Xt.isNightly]),x=n===J.IDLE||n===J.PENDING,_=n===J.SUCCESS,v=n===J.REJECTED,A="mnemonic"!==(null===(e=h.deriver)||void 0===e?void 0:e.type),b=null!==(t=null==i?void 0:i.url)&&void 0!==t?t:"",E=null==i?void 0:i.imgBase64Url;if(_&&!o.length)return(0,ia.jsxs)("div",{className:Xt.noWallets,children:[(0,ia.jsx)("div",{className:Xt.noWalletsImage,children:(0,ia.jsx)(Ta,{})}),(0,ia.jsxs)("div",{children:[(0,ia.jsx)("div",{className:Xt.noWalletsText,children:r.formatMessage(vr.noWalletsFound)}),(0,ia.jsx)("button",{className:Xt.createWallet,onClick:this.onCreateWallet,type:"button",children:r.formatMessage(vr.createWallet)})]})]});const T=this.form.$("walletPassword"),C=_&&Boolean(o.length),I=(0,ia.jsxs)(xa.Z,{p:"26px",children:[(0,ia.jsx)("div",{children:A?r.formatMessage(vr.harwareWalletConnectWithAuthNotSupported):(0,ia.jsx)(_a.Z,{type:"password",...jt()(T).call(T),error:T.error,id:"walletPassword"})}),(0,ia.jsxs)(Qt.Z,{direction:"row",spacing:4,mt:"15px",children:[(0,ia.jsx)(ea.Z,{fullWidth:!0,variant:"outlined",onClick:this.hidePasswordForm,sx:{minWidth:"auto"},id:"backButton",children:r.formatMessage(da.default.backButtonLabel)}),!A&&(0,ia.jsx)(ea.Z,{variant:"contained",sx:{minWidth:"auto"},fullWidth:!0,disabled:!T.isValid,onClick:this.submit,id:"confirmButton",children:r.formatMessage(da.default.confirm)})]})]}),k=null===(a=mr[d])||void 0===a?void 0:a.text;return(0,ia.jsxs)("div",{className:y,children:[C?(0,ia.jsxs)(ia.Fragment,{children:[!f&&(0,ia.jsx)(fa,{step:p?2:1,max:2}),(0,ia.jsx)(ta.Z,{component:"div",variant:"h4",color:"gray.900",marginTop:"32px",paddingX:"32px",fontWeight:"500",textAlign:"center",fontSize:"20px",className:Xt.pageTitle,children:r.formatMessage(vr.connectWallet)}),!f&&(0,ia.jsxs)("div",{className:Xt.connectWrapper,children:[(0,ia.jsx)("div",{className:Xt.image,children:null!=E&&""!==E?(0,ia.jsx)("img",{src:E,alt:`${b} favicon`}):(0,ia.jsx)(Ia,{})}),(0,ia.jsx)(xa.Z,{marginTop:"16px",children:(0,ia.jsxs)(ta.Z,{component:"div",variant:"body-1",fontWeight:"400",color:"gray.900",children:[r.formatMessage(vr.subtitle)," ",(0,ia.jsx)(ta.Z,{as:"span",variant:"body-1",fontWeight:"500",children:b})]})})]})]}):null,(0,ia.jsx)(xa.Z,{flex:1,children:p?I:(0,ia.jsxs)(ia.Fragment,{children:[v?(0,ia.jsx)("div",{className:Xt.errorMessage,children:s}):null,x?(0,ia.jsx)("div",{className:Xt.loading,children:(0,ia.jsx)(ca.default,{})}):C?(0,ia.jsxs)("div",{className:Xt.walletsContainer,children:[(0,ia.jsxs)("div",{className:Xt.titleWallet,children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"body-1",lineHeight:"24px",color:"gray.900",children:r.formatMessage(vr.yourWallets)}),(0,ia.jsx)("button",{type:"button",className:Xt.toggleButton,onClick:g,children:c?(0,ia.jsx)(Ma.r,{}):(0,ia.jsx)(Sa.r,{})})]}),d!==m.networks.CardanoMainnet.NetworkId&&(0,ia.jsxs)(Tr,{children:[(0,ia.jsxs)(Cr,{children:[(0,ia.jsx)(Wa,{}),r.formatMessage(vr.testnetWarningTitle)]}),(0,ia.jsx)(ta.Z,{children:r.formatMessage(vr.testnetWarningText,{networkName:k})})]}),f&&(0,ia.jsx)("div",{className:Xt.cashbackApplyAll,children:r.formatMessage(vr.cashbackApplyAll)}),(0,ia.jsx)("ul",{className:Xt.list,children:u()(o).call(o,((e,t)=>{const a=f&&"trezor"===e.type,n=a?Er:br;return(0,ia.jsx)("li",{className:[Xt.listItem,a?"":Xt.enabledWallet].join(" "),children:(0,ia.jsx)(n,{onClick:()=>l(e,e.plate),children:(0,ia.jsx)(la,{disabledForReason:a?r.formatMessage(vr.cashbackDisabledTrezor):null,publicDeriver:e,walletBalance:(0,ia.jsx)(xa.Z,{sx:{ml:"auto",textAlign:"right"},children:(0,ia.jsx)(Ra.Z,{shouldHideBalance:this.props.shouldHideBalance,amount:e.balance,getTokenInfo:this.props.getTokenInfo,unitOfAccountSetting:this.props.unitOfAccount,getCurrentPrice:this.props.getCurrentPrice,showFiat:!0,showAmount:!0,id:"dAppConnector:connect:walletList:walletCard_"+t})})})})},e.publicDeriverId)}))})]}):null]})}),f||!C||p?null:(0,ia.jsxs)("div",{className:Xt.bottom,children:[(0,ia.jsx)("div",{className:Xt.infoText,children:r.formatMessage(vr.connectInfo)}),(0,ia.jsx)("div",{className:Xt.infoText,children:r.formatMessage(da.connectorMessages.messageReadOnly)})]}),f&&(0,ia.jsxs)(xa.Z,{sx:{display:"flex",gap:"15px",padding:"32px"},children:[(0,ia.jsx)(ea.Z,{sx:{minWidth:0},fullWidth:!0,variant:"outlined",color:"primary",onClick:this.onCancel,id:"cancelButton",children:r.formatMessage(da.default.cancel)}),(0,ia.jsx)(ea.Z,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>{this.onCreateWallet()},sx:{minWidth:0},id:"addWalletButton",children:r.formatMessage(vr.addWallet)})]})]})}},M()(_r,"contextTypes",{intl:ge.intlShape.isRequired}),xr=_r))||xr;const br=(0,aa.ZP)("button")({cursor:"pointer",width:"100%",fontSize:"1rem",padding:"16px"}),Er=(0,aa.ZP)(br)({cursor:"default"}),Tr=(0,aa.ZP)(xa.Z)((({theme:e})=>({background:e.palette.ds.sys_yellow_100,padding:"16px",display:"flex",flexDirection:"column",gap:"8px"}))),Cr=(0,aa.ZP)(ta.Z)((({theme:e})=>({color:e.palette.ds.sys_orange_500,fontWeight:500,"& svg":{verticalAlign:"text-bottom",marginRight:"8px"}})));var Ir;let kr=(0,ht.observer)(Ir=class extends gt.Component{constructor(...e){super(...e),M()(this,"state",{isAppAuth:!1,selectedWallet:{index:-1,deriver:null,checksum:null}}),M()(this,"onUnload",(()=>{const e=this.props.stores.connector.connectingMessage;(0,L.userConnectResponse)({accepted:!1,tabId:null==e?void 0:e.tabId})})),M()(this,"onConnect",(async(e,t,a)=>{var r,n;const{stores:s}=this.props,o=s.connector.connectingMessage;if(null==o)throw new Error("chromeMessage connecting to a wallet but no connect message found");const i=o.url,l=o.appAuthID;let d;d=null!=a?await(0,L.connectorCreateAuthEntry)({appAuthID:l,publicDeriverId:e.publicDeriverId,password:a}):null;const{publicDeriverId:c}=e,p=new(q())(u()(r=s.connector.wallets).call(r,(e=>e.publicDeriverId))),g=Ut()(n=s.connector.currentConnectorWhitelist).call(n,(e=>!(e.url===i&&p.has(e.publicDeriverId))));g.push({url:i,publicDeriverId:c,appAuthID:l,auth:d,image:o.imgBase64Url}),await s.connector.updateConnectorWhitelist({whitelist:g}),await Ge.ampli.dappPopupConnectWalletPasswordPageViewed(),(0,L.userConnectResponse)({accepted:!0,publicDeriverId:c,auth:d,tabId:o.tabId}),Ht()((()=>{s.connector.closeWindow()}),100)})),M()(this,"onSelectWallet",((e,t)=>{if(this.props.stores.connector.wallets){const r=e.publicDeriverId;var a;this.setState((a=>({...a,selectedWallet:{index:r,deriver:e,checksum:t}}))),r>=0&&e&&(null!=(null===(a=this.props.stores.connector.connectingMessage)||void 0===a?void 0:a.appAuthID)?this.setState({isAppAuth:!0}):this.onConnect(e,t))}})),M()(this,"onCancel",(()=>{const e=this.props.stores.connector.connectingMessage;(0,L.userConnectResponse)({accepted:!1,tabId:null==e?void 0:e.tabId}),this.props.stores.connector.closeWindow()})),M()(this,"hidePasswordForm",(()=>{this.setState({isAppAuth:!1})})),M()(this,"updateHideBalance",(async()=>{await this.props.stores.profile.updateHideBalance()}))}componentDidMount(){(0,n.autorun)((()=>{this.props.stores.connector.loadingWallets===J.SUCCESS&&Ge.ampli.dappPopupConnectWalletPageViewed({wallet_count:this.props.stores.connector.wallets.length})}))}UNSAFE_componentWillMount(){this.props.stores.connector.refreshWallets(),window.addEventListener("beforeunload",this.onUnload),window.addEventListener("unload",this.onUnload)}render(){const e=this.props.stores.connector.connectingMessage,t=this.props.stores.connector.wallets,a=this.props.stores.connector.errorWallets,r=this.props.stores.connector.loadingWallets,n=this.props.stores.profile.getCurrentNetworkId();return(0,ia.jsx)(Ar,{selectedWallet:this.state.selectedWallet,onConnect:this.onConnect,onCancel:this.onCancel,isAppAuth:this.state.isAppAuth,hidePasswordForm:this.hidePasswordForm,loading:r,error:a,message:e,publicDerivers:t,onSelectWallet:this.onSelectWallet,networkId:n,getTokenInfo:(0,H.genLookupOrFail)(this.props.stores.tokenInfoStore.tokenInfo),shouldHideBalance:this.props.stores.profile.shouldHideBalance,unitOfAccount:this.props.stores.profile.unitOfAccount,getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,onUpdateHideBalance:this.updateHideBalance})}})||Ir;var Dr,Sr;function Mr(){return Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Mr.apply(this,arguments)}function Rr(e){return gt.createElement("svg",Mr({width:20,height:18,viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Dr||(Dr=gt.createElement("g",{clipPath:"url(#yoroi-logo_inline_svg__clip0)"},gt.createElement("path",{d:"M15.451 13.856l-1.584 1.121L2.195 6.76c0-.017 0-.033-.005-.049V4.52l13.262 9.338v-.001zM12.194 3.25c-.704.493-1.415.975-2.12 1.467a.188.188 0 01-.257 0C8.947 4.1 8.071 3.487 7.2 2.874c-.917-.649-1.834-1.3-2.75-1.952L3.149 0H0c.167.12.305.22.443.317L2.91 2.06 5.35 3.789c.765.541 1.528 1.086 2.294 1.628.727.513 1.456 1.021 2.183 1.536a.158.158 0 00.215 0c.586-.41 1.18-.812 1.764-1.223a2251.31 2251.31 0 004.357-3.048l3.171-2.21C19.553.32 19.771.167 20 0h-3.157c-1.55 1.083-3.1 2.166-4.648 3.25zM2.208 9.986a.243.243 0 00-.017.042v2.152a.13.13 0 00.011.047l7.79 5.487h.007l1.586-1.12-9.378-6.609h.001zm15.563-5.461L11.973 8.61a.515.515 0 00.061.07c.49.354.981.706 1.472 1.057a.089.089 0 00.053.01l4.198-2.962a.167.167 0 00.014-.04V4.524zm.005 5.546c-.658.463-1.294.91-1.936 1.364l1.506 1.088.43-.304V10.07z",fill:"#fff"}))),Sr||(Sr=gt.createElement("defs",null,gt.createElement("clipPath",{id:"yoroi-logo_inline_svg__clip0"},gt.createElement("path",{fill:"#fff",d:"M0 0h20v17.714H0z"})))))}a.p;var Br=a(96903);$t()(Br.Z,{insert:"head",singleton:!1});const Wr=Br.Z.locals||{};var Pr,Nr,Fr=a(85057),Or=a(62999);const Lr=(0,ge.defineMessages)({yoroiDappConnector:{id:"global.connector.yoroiDappConnector",defaultMessage:"!!!Yoroi Dapp Connector"},yoroiConnector:{id:"global.connector.yoroiConnector",defaultMessage:"!!!Yoroi Connector"}});let Hr=(0,ht.observer)((Nr=class extends gt.Component{render(){const{intl:e}=this.context,t=e.formatMessage(this.props.location.pathname===y?Lr.yoroiConnector:Lr.yoroiDappConnector);let a=null;const r=mr[this.props.networkId];return r&&(a=(0,ia.jsx)("div",{className:Wr.badge,style:{backgroundColor:r.color},children:r.text})),(0,ia.jsxs)("div",{className:Wr.layout,children:[(0,ia.jsx)(Fr.Z,{isTestnet:_e.Z.isTest()}),(0,ia.jsx)("div",{className:Wr.header,children:(0,ia.jsxs)("div",{className:Wr.menu,children:[(0,ia.jsx)(Rr,{}),(0,ia.jsx)("div",{className:Wr.logo,children:(0,ia.jsx)("h3",{children:t})}),(0,ia.jsx)("div",{className:Wr.connectorLogoContainer,children:(0,ia.jsx)(Or.r,{className:Wr.connectorLogo})}),a]})}),(0,ia.jsx)("div",{className:Wr.content,children:this.props.children})]})}},M()(Nr,"contextTypes",{intl:ge.intlShape.isRequired}),Pr=Nr))||Pr;const Vr=(0,ft.withRouter)(Hr);var Ur,Gr,jr=a(28336),Zr=a(64245),zr=(a(36572),a(16544)),Kr=a(74855),Yr=a.n(Kr),qr=a(20787),$r=a(52758),Jr=a(47606),Xr=a(21023);const Qr=(0,ge.defineMessages)({copyTooltipMessage:{id:"widgets.copyableaddress.addressCopyTooltipMessage",defaultMessage:"!!!Copy to clipboard"},copied:{id:"widgets.copyableaddress.copied",defaultMessage:"!!!Copied"}}),en=(0,aa.ZP)(ra.Z)((({theme:e})=>({"& svg":{"& path":{fill:e.palette.ds.el_gray_medium}}})));let tn=(0,ht.observer)((Gr=class extends gt.Component{render(){const{hash:e,elementId:t,sx:a,onCopyAddress:r,notification:n,darkVariant:s,id:o}=this.props,{intl:i}=this.context,l=n&&n.id===t?$r.r:qr.r,d=(0,ia.jsx)(Xr.Z,{title:(0,ia.jsx)(ta.Z,{component:"div",variant:"body3",children:n&&n.id===t?i.formatMessage(n.message):i.formatMessage(Qr.copyTooltipMessage)}),placement:this.props.placementTooltip,children:(0,ia.jsx)("span",{className:Jr.Z.copyIconBig,id:o+"-copyAddress-button",children:(0,ia.jsx)(en,{children:(0,ia.jsx)(l,{})})})});return(0,ia.jsxs)(ra.Z,{sx:a,className:Yt()([Jr.Z.component,!0===s&&Jr.Z.componentDark]),id:o+"-copyableAddress-box",children:[(0,ia.jsx)("span",{id:o+"-address-text",children:this.props.children}),(0,ia.jsx)(Yr(),{text:e,onCopy:null==r?void 0:(e,t)=>r(),children:d})]})}},M()(Gr,"contextTypes",{intl:ge.intlShape.isRequired}),M()(Gr,"defaultProps",{onCopyAddress:void 0,placementTooltip:"bottom",elementId:void 0,sx:{},darkVariant:!1}),Ur=Gr))||Ur;var an,rn,nn,sn;function on(){return on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},on.apply(this,arguments)}function ln(e){return gt.createElement("svg",on({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),an||(an=gt.createElement("path",{d:"M7 1a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 11-2 0v-.586L6.707 6.707a1 1 0 01-1.414-1.414L8.586 2H8a1 1 0 01-1-1z",fill:"#3154CB"})),rn||(rn=gt.createElement("path",{d:"M2.2 3a.2.2 0 00-.2.2v6.6a.2.2 0 00.2.2h6.6a.2.2 0 00.2-.2V7.625a1 1 0 112 0V9.8A2.2 2.2 0 018.8 12H2.2A2.2 2.2 0 010 9.8V3.2A2.2 2.2 0 012.2 1h2.175a1 1 0 010 2H2.2z",fill:"#3154CB"})))}a.p;let dn=(0,ht.observer)((sn=class extends gt.Component{constructor(...e){super(...e),M()(this,"getTicker",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,ia.jsxs)(Zr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:[(0,ia.jsx)("span",{children:(0,jr.truncateToken)((0,H.getTokenName)(e))})," ",(0,ia.jsx)(ln,{})]}):(0,jr.truncateToken)((0,H.getTokenName)(e))})),M()(this,"getFingerprint",(e=>{if("Cardano"===e.Metadata.type)return(0,H.getTokenIdentifierIfExists)(e)})),M()(this,"_resolveTokenInfo",(e=>this.props.getTokenInfo(e))),M()(this,"renderAmountDisplay",(e=>{const t=(0,H.assetNameFromIdentifier)(e.entry.identifier),a=this._resolveTokenInfo(e.entry),r=a?a.Metadata.numberOfDecimals:0,n=e.entry.amount.shiftedBy(-r),s=a?this.getTicker(a):t,[o,i]=(0,jr.splitAmount)(n,r),l=Oa()(o).call(o,"-")?o:"+"+o;return(0,ia.jsxs)("div",{children:[(0,ia.jsx)("span",{children:l}),(0,ia.jsx)("span",{children:i})," ",s]})})),M()(this,"renderRow",(e=>{var t;if(!Boolean(e.address))return null;const a=e.address.value;if(null==a)return null;const r=`${e.kind}-address-${e.addressIndex}-copyNotification`,n=t=>`${e.kind}-${e.address.address}-${e.addressIndex}-${t}`,s=t=>(0,ia.jsx)("div",{id:"addressRow-amount",children:this.renderAmountDisplay({entry:{...t,amount:e.transform?e.transform(t.amount):t.amount}})}),o=e.address.address?this.props.addressToDisplayString(e.address.address):"";return(0,ia.jsxs)(xa.Z,{display:"flex",alignItems:"flex-start",justifyContent:"space-between",py:"16px",borderRadius:"8px",id:"addressRow",children:[(0,ia.jsx)(tn,{id:"utxoDetails_"+e.addressIndex,hash:o,elementId:r,onCopyAddress:()=>this.props.onCopyAddressTooltip(e.address.address,r),notification:this.props.notification,children:(0,ia.jsx)(Zr.Z,{selectedExplorer:this.props.selectedExplorer,hash:o,light:!0,linkType:"address",children:(0,ia.jsx)(ta.Z,{as:"span",color:"#242838",children:(0,jr.truncateAddressShort)(o,10)})})}),(0,ia.jsxs)(xa.Z,{textAlign:"right",color:"var(--yoroi-palette-gray-600)",sx:{"& > *":{paddingTop:"6px",":first-child":{color:"var(--yoroi-palette-gray-900)"}}},children:[s(a.getDefaultEntry()),u()(t=a.nonDefaultEntries()).call(t,(e=>(0,ia.jsxs)(gt.Fragment,{children:[(0,ia.jsx)("div",{}),(0,ia.jsx)("div",{}),s(e)]},n(e.identifier))))]})]},n(a.getDefaultEntry().identifier))}))}render(){var e,t,a,r,n;const{intl:s}=this.context,{txData:o}=this.props,i=Ut()(e=o.outputs).call(e,(e=>e.isForeign));return(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(xa.Z,{pb:"10px",children:(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#000",children:s.formatMessage(da.connectorMessages.fromAddresses,{qty:o.inputs.length})})}),(0,ia.jsxs)(cn,{children:[(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:s.formatMessage(da.connectorMessages.yourAddresses)}),(0,ia.jsx)(xa.Z,{id:"fromAddressesBox-yourInputs",children:u()(t=o.inputs).call(t,((e,t)=>this.renderRow({kind:"in",address:e,addressIndex:t,transform:e=>e.abs().negated()})))})]}),o.foreignInputs.length>0&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(un,{}),(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:s.formatMessage(da.connectorMessages.foreignAddresses)}),(0,ia.jsx)(xa.Z,{id:"fromAddressesBox-foreignInputs",children:u()(a=o.foreignInputs).call(a,((e,t)=>this.renderRow({kind:"in-foreign",address:e,addressIndex:t,transform:e=>e.abs().negated()})))})]})]})]})]}),(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(xa.Z,{pb:"10px",children:(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#000",children:s.formatMessage(da.connectorMessages.toAddresses,{qty:o.outputs.length})})}),(0,ia.jsxs)(cn,{withMargin:!1,children:[(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:s.formatMessage(da.connectorMessages.yourAddresses)}),(0,ia.jsx)(xa.Z,{id:"toAddressesBox-yourOutputs",children:u()(r=Ut()(n=o.outputs).call(n,(e=>!e.isForeign))).call(r,((e,t)=>this.renderRow({kind:"out",address:e,addressIndex:t,transform:e=>e.abs()})))})]}),i.length>0&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(un,{}),(0,ia.jsxs)(xa.Z,{id:"toAddressesBox-foreignOutputs",children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"500",color:"#4A5065",children:s.formatMessage(da.connectorMessages.foreignAddresses)}),(0,ia.jsx)(xa.Z,{children:u()(i).call(i,((e,t)=>this.renderRow({kind:"out-foreign",address:e,addressIndex:t,transform:e=>e.abs()})))})]})]})]})]})]})}},M()(sn,"contextTypes",{intl:ge.intlShape.isRequired}),nn=sn))||nn;const cn=({children:e,withMargin:t=!0})=>(0,ia.jsx)(xa.Z,{sx:{border:"1px solid #DCE0E9",borderRadius:"8px",padding:"16px",marginBottom:t?"40px":0},children:e}),un=()=>(0,ia.jsx)(xa.Z,{sx:{height:"1px",width:"100%",backgroundColor:"#DCE0E9",mt:"16px",mb:"16px"}}),pn=dn;var gn=a(35450),hn=a(45670),fn=a(66568),wn=a(69422),mn=a(61730);const yn=(0,ge.defineMessages)({details:{id:"connector.signIn.tabs.details",defaultMessage:"!!!Details"},utxos:{id:"connector.signIn.tabs.utxos",defaultMessage:"!!!UTxOs"},connection:{id:"connector.signIn.tabs.connection",defaultMessage:"!!!Connection"}}),xn=(0,ge.injectIntl)((0,ht.observer)((function({connectionContent:e,utxosContent:t,detailsContent:a,isDataSignin:r,intl:n}){const[s,o]=(0,gt.useState)(0),i=(0,mn.Z)("(min-width:1441px)"),l=[{id:0,label:n.formatMessage(yn.details),component:a},{id:1,label:n.formatMessage(yn.utxos),component:t},{id:2,label:n.formatMessage(yn.connection),component:e}],d=_e.Z.isNightly()||_e.Z.isTest();return(0,ia.jsxs)(_n,{children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#242838",variant:"h4",align:"center",my:"32px",children:n.formatMessage(da.connectorMessages[r?"signData":"signTransaction"])}),(0,ia.jsxs)(hn.ZP,{value:s,children:[(0,ia.jsxs)(xa.Z,{sx:{backgroundColor:"var(--yoroi-palette-common-white)",marginLeft:"32px",marginRight:"32px"},children:[(0,ia.jsx)(fn.Z,{sx:{width:i?"640px":"480px",boxShadow:"none","&.MuiTabs-indicator":{height:"2px"}},textColor:"primary",indicatorColor:"primary",onChange:(e,t)=>o(t),"aria-label":"Staking tabs",children:u()(l).call(l,(({label:e,component:t,id:a})=>null!==t&&(0,ia.jsx)(vn,{disableRipple:!0,label:(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:500,children:e}),value:a},a)))}),(0,ia.jsx)("div",{style:{backgroundColor:"#DCE0E9",height:"1px",width:"100%"}})]}),u()(l).call(l,(({component:e,id:t})=>null!==e&&(0,ia.jsx)(wn.Z,{sx:{height:d?"calc(100vh - 306px - 46px)":"calc(100vh - 306px)",overflowY:"scroll",margin:"auto",boxShadow:"none",backgroundColor:"var(--yoroi-palette-common-white)",p:"32px",pr:"12px",width:i?"640px":"480px"},value:t,children:e},t)))]})]})}))),_n=(0,gn.Z)(xa.Z)({backgroundColor:"var(--yoroi-palette-common-white)"}),vn=(0,gn.Z)(Va.Z)({"&.MuiTab-root":{paddingLeft:0,paddingRight:0,paddingTop:"11px",paddingBottom:"11px",marginRight:"24px",minWidth:0},"&.MuiTab-root:hover":{color:"#3154CB"}}),An=(0,ge.defineMessages)({summary:{id:"connector.signin.summary",defaultMessage:"!!!Summary"}}),bn=({txAssetsData:e,renderExplorerHashLink:t,intl:a})=>{const{sent:r,received:n}=e,[s=null]=r,[o=null]=n,{assetsSent:i,assetSent:l,assetsReceived:d,assetReceived:c}=da.connectorMessages;return(0,ia.jsxs)(ia.Fragment,{children:[r.length>1&&(0,ia.jsx)(ra.Z,{lineHeight:"24px",children:a.formatMessage(i,{quantity:r.length})}),1===r.length&&(0,ia.jsxs)(ra.Z,{lineHeight:"24px",sx:{"& .ExplorableHash_url":{color:"#fff"},"& .ExplorableHash_url svg":{marginRight:"3px"},"& .ExplorableHash_url svg path":{fill:"#fff"}},children:[t(null==s?void 0:s.tokenInfo),a.formatMessage(l,{assetName:""})]}),n.length>1&&(0,ia.jsx)(ra.Z,{lineHeight:"24px",children:a.formatMessage(d,{quantity:n.length})}),1===n.length&&(0,ia.jsxs)(ra.Z,{lineHeight:"24px",sx:{"& .ExplorableHash_url":{color:"#fff"},"& .ExplorableHash_url svg":{marginRight:"3px"},"& .ExplorableHash_url svg path":{fill:"#fff"}},children:[t(null==o?void 0:o.tokenInfo)," ",a.formatMessage(c,{assetName:""})]})]})},En=(0,ge.injectIntl)((function({txAssetsData:e,renderExplorerHashLink:t,intl:a}){const{total:r,isOnlyTxFee:n,sent:s,received:o}=e,i=n&&0===s.length&&0===o.length;return(0,ia.jsxs)(ra.Z,{p:"16px",borderRadius:"8px",color:"var(--yoroi-palette-common-white)",sx:{background:"linear-gradient(30.09deg, #244ABF 0%, #4760FF 176.73%)"},children:[(0,ia.jsxs)(ra.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",id:"signTxMessagesSummaryBox",children:[(0,ia.jsx)(ta.Z,{component:"div",variant:"b1",fontWeight:500,children:a.formatMessage(An.summary)}),(0,ia.jsxs)(ta.Z,{component:"div",variant:"h3",fontSize:"24px",textAlign:"right",id:"signTxMessagesSummaryBox-total",children:[i?r.fee:r.total," ",r.ticker]})]}),(s.length>0||o.length>0)&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(Tn,{}),(0,ia.jsx)(ra.Z,{textAlign:"right",children:bn({txAssetsData:e,renderExplorerHashLink:t,intl:a})})]})]})})),Tn=()=>(0,ia.jsx)(ra.Z,{sx:{height:"1px",width:"100%",background:"rgba(255, 255, 255, 0.48)",mt:"16px",mb:"16px"}});var Cn;function In(){return In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},In.apply(this,arguments)}function kn(e){return gt.createElement("svg",In({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Cn||(Cn=gt.createElement("path",{d:"M2.4 5.933a1.042 1.042 0 000 1.475l7.008 7.008a.83.83 0 001.175 0l7.008-7.008a1.041 1.041 0 000-1.475 1.041 1.041 0 00-1.475 0L10 12.05 3.875 5.925c-.409-.4-1.067-.4-1.475.008z",fill:"#4A5065"})))}a.p;var Dn=a(91356);const Sn=(0,ge.defineMessages)({transactionFee:{id:"connector.signin.transactionFee",defaultMessage:"!!!Transaction Fee"}}),Mn=({amount:e,tokenInfo:t,renderExplorerHashLink:a})=>{let r;return r=e.eq("1")&&t.IsNFT?null:(0,ia.jsx)("span",{children:e.shiftedBy(-t.Metadata.numberOfDecimals).toString()+" "}),(0,ia.jsxs)(ia.Fragment,{children:[r,a(t)]})},Rn=(0,ge.injectIntl)((function({intl:e,txAssetsData:t,renderExplorerHashLink:a,passwordFormField:r,hwWalletError:n,walletType:s,cip95Info:o}){const{total:i,isOnlyTxFee:l,sent:d,received:c}=t,u=Number(i.amount)<0,p=Number(i.amount)>0;return(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(Nn,{cip95Info:o}),(0,ia.jsx)("br",{})]}),(0,ia.jsx)(En,{renderExplorerHashLink:a,txAssetsData:t}),(0,ia.jsx)(Pn,{id:"signTxAdditionalInfoPanel",children:(0,ia.jsxs)(xa.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",id:"signTxAdditionalInfoPanelBox",children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#4A5065",fontWeight:500,children:e.formatMessage(Sn.transactionFee)}),(0,ia.jsxs)(ta.Z,{component:"div",textAlign:"right",color:"#242838",id:"signTxAdditionalInfoPanelBox-fee",children:[i.fee," ",i.ticker]})]})}),(!l||d.length>0||c.length>0)&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(Bn,{intl:e,total:i,hasNativeToken:u,assets:d,action:"sent",panelTitle:e.formatMessage(da.connectorMessages.send),renderExplorerHashLink:a}),(0,ia.jsx)(Bn,{intl:e,total:i,hasNativeToken:p,assets:c,action:"received",panelTitle:e.formatMessage(da.connectorMessages.receive),renderExplorerHashLink:a})]}),"mnemonic"===s&&(0,ia.jsx)(xa.Z,{mt:"32px",children:r}),(0,ia.jsx)(Dn.Z,{error:n})]})})),Bn=({intl:e,assets:t=[],total:a,panelTitle:r,action:n,hasNativeToken:s,renderExplorerHashLink:o})=>{var i,l;const[d,c]=(0,gt.useState)(!1),p=t.length>1,{assetsSent:g,assetsReceived:h,noAssetsSent:f,noAssetsReceived:w}=da.connectorMessages,m="sent"===n?g:h,y="sent"===n?f:w;return(0,ia.jsxs)(Pn,{children:[(0,ia.jsxs)(xa.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",sx:{cursor:"pointer"},onClick:()=>c((e=>!e)),children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#4A5065",fontWeight:500,children:r}),p&&(0,ia.jsx)(xa.Z,{sx:{rotate:d?"180deg":"none"},children:(0,ia.jsx)(kn,{})})]}),(Oa()(i=a.amount).call(i,"-")&&"sent"===n||!Oa()(l=a.amount).call(l,"-")&&"received"===n)&&(0,ia.jsxs)(Wn,{children:[a.amount," ",a.ticker]}),!p&&1===t.length&&(0,ia.jsx)(Wn,{children:Mn({...t[0],renderExplorerHashLink:o})}),p&&d&&(0,ia.jsx)(ia.Fragment,{children:u()(t).call(t,((e,t)=>(0,ia.jsx)(Wn,{children:Mn({...e,renderExplorerHashLink:o})},t)))}),p&&!d&&(0,ia.jsx)(Wn,{children:e.formatMessage(m,{quantity:t.length})}),!s&&0===t.length&&(0,ia.jsx)(Wn,{children:e.formatMessage(y)})]})},Wn=({children:e})=>(0,ia.jsx)(xa.Z,{mt:"16px",id:"asseetValueDisplayBox",children:(0,ia.jsx)(ta.Z,{component:"div",textAlign:"right",color:"#242838",children:e})}),Pn=({children:e})=>(0,ia.jsx)(xa.Z,{mt:"32px",width:"100%",p:"16px",border:"1px solid var(--yoroi-palette-gray-100)",borderRadius:"8px",children:e}),Nn=({cip95Info:e})=>{var t,a,r,n,s,o,i,l,d,c,p,g,h,f;function w(e){try{return new Q.Z(e).div(1e6).toString()}catch(t){return console.error(t),String(e)}}return[...u()(t=Ut()(e).call(e,(e=>"StakeRegistrationCert"===e.type))).call(t,((e,t)=>{if("StakeRegistrationCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsx)("span",{children:"Register stake credential"}),e.coin&&(0,ia.jsxs)("span",{children:["with ",w(e.coin)," ADA deposit"]})]},`StakeRegistrationCert${t}`)})),...u()(a=Ut()(e).call(e,(e=>"StakeDeregistrationCert"===e.type))).call(a,((e,t)=>{if("StakeDeregistrationCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsx)("span",{children:"Deregister stake credential"}),e.coin&&(0,ia.jsxs)("span",{children:["and return ",w(e.coin)," ADA deposit"]})]},`StakeDeregistrationCert${t}`)})),...u()(r=Ut()(e).call(e,(e=>"StakeDelegationCert"===e.type))).call(r,((e,t)=>{if("StakeDelegationCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:["Stake delegation to the pool: ",e.poolKeyHash]},`StakeDelegationCert${t}`)})),...u()(n=Ut()(e).call(e,(e=>"VoteDelegCert"===e.type))).call(n,((e,t)=>{if("VoteDelegCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:["Vote delegation to DRep: ",e.drep]},`VoteDelegCert${t}`)})),...u()(s=Ut()(e).call(e,(e=>"StakeVoteDelegCert"===e.type))).call(s,((e,t)=>{if("StakeVoteDelegCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Delegate to the stake pool $",e.poolKeyHash]}),(0,ia.jsxs)("div",{children:["and DRep $",e.drep]})]},`StakeVoteDelegCert${t}`)})),...u()(o=Ut()(e).call(e,(e=>"StakeRegDelegCert"===e.type))).call(o,((e,t)=>{if("StakeRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to stake pool"]}),(0,ia.jsxs)("div",{children:["$",e.poolKeyHash]})]},`StakeRegDelegCert${t}`)})),...u()(i=Ut()(e).call(e,(e=>"VoteRegDelegCert"===e.type))).call(i,((e,t)=>{if("VoteRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to the DRep"]}),(0,ia.jsxs)("div",{children:["$",e.drep]})]},`VoteRegDelegCert${t}`)})),...u()(l=Ut()(e).call(e,(e=>"StakeVoteRegDelegCert"===e.type))).call(l,((e,t)=>{if("StakeVoteRegDelegCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Register your stake credential with deposit of ",w(e.coin)," ADA and delegate to the DRep"]}),(0,ia.jsxs)("div",{children:["$",e.drep," and the stake pool"]}),(0,ia.jsxs)("div",{children:["$",e.poolKeyHash]})]},`StakeVoteRegDelegCert${t}`)})),...u()(d=Ut()(e).call(e,(e=>"RegDrepCert"===e.type))).call(d,((e,t)=>{if("RegDrepCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Register DRep credential with deposit ",w(e.coin)," ADA"]}),e.anchor&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,ia.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`RegDrepCert${t}`)})),...u()(c=Ut()(e).call(e,(e=>"UnregDrepCert"===e.type))).call(c,((e,t)=>{if("UnregDrepCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:["Unregister DRep credential and return ",w(e.coin)," ADA deposit"]},`UnregDrepCert${t}`)})),...u()(p=Ut()(e).call(e,(e=>"UpdateDrepCert"===e.type))).call(p,((e,t)=>{if("UpdateDrepCert"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsx)("div",{children:"Update DRep credential"}),e.anchor&&(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,ia.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`UpdateDrepCert${t}`)})),...u()(g=Ut()(e).call(e,(e=>"TreasuryValue"===e.type))).call(g,((e,t)=>{if("TreasuryValue"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:["Treasury value: ",w(e.coin)," ADA"]},`TreasuryValue${t}`)})),...u()(h=Ut()(e).call(e,(e=>"TreasuryDonation"===e.type))).call(h,((e,t)=>{if("TreasuryDonation"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:["Treasury donation: ",w(e.positiveCoin)," ADA"]},`TreasuryDonation${t}`)})),...u()(f=Ut()(e).call(e,(e=>"VotingProcedure"===e.type))).call(f,((e,t)=>{if("VotingProcedure"!==e.type)throw new Error("unexpected type");return(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["Voter: ",e.voterHash]}),(0,ia.jsxs)("div",{children:["Governance action transaction: ",e.govActionTxId]}),(0,ia.jsxs)("div",{children:["Governance action index: ",e.govActionIndex]}),(0,ia.jsxs)("div",{children:["Vote: ",["no","yes","abstain"][e.vote]]}),e.anchor&&(0,ia.jsxs)("div",{children:[(0,ia.jsxs)("div",{children:["URL: ",e.anchor.url]}),(0,ia.jsxs)("div",{children:["Hash: ",e.anchor.dataHash]})]})]},`VotingProcedure${t}`)}))]},Fn=(0,ge.defineMessages)({connectedTo:{id:"connector.signin.connectedTo",defaultMessage:"!!!Connected To"}}),On=(0,ge.injectIntl)((function({intl:e,connectedWebsite:t,connectedWallet:a}){var r,n;const s=null!==(r=null==t?void 0:t.url)&&void 0!==r?r:"",o=null!==(n=null==t?void 0:t.image)&&void 0!==n?n:"";return(0,ia.jsxs)(ra.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",children:e.formatMessage(Fn.connectedTo)}),(0,ia.jsxs)(ra.Z,{display:"flex",alignItems:"center",children:[(0,ia.jsx)(ra.Z,{sx:{marginRight:"8px",display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",border:"1px solid #A7AFC0",borderRadius:"50%",img:{width:"30px"}},children:null!=o&&""!==o?(0,ia.jsx)("img",{src:o,alt:`${s} favicon`}):(0,ia.jsx)(Ia,{})}),(0,ia.jsx)(ta.Z,{component:"div",variant:"body1",fontWeight:"400",color:"#242838",id:"connectedToUrl",children:s})]}),(0,ia.jsxs)(ra.Z,{mt:"32px",children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",children:e.formatMessage(da.connectorMessages.fromWallet)}),(0,ia.jsx)(la,{publicDeriver:a})]})]})}));var Ln,Hn;const Vn=(0,ge.defineMessages)({incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect wallet password."},sendError:{id:"connector.signin.error.sendError",defaultMessage:"!!!An error occured when sending the transaction."},signMessage:{id:"connector.signin.signMessage",defaultMessage:"!!!Sign Message"}}),Un=(0,ht.observer)((Hn=class extends gt.Component{constructor(...e){super(...e),M()(this,"state",{isSubmitting:!1}),M()(this,"form",new va.Z({fields:{walletPassword:{type:"password",label:this.context.intl.formatMessage(da.default.passwordLabel),placeholder:this.context.intl.formatMessage(da.default.passwordLabel),value:"",validators:[({field:e})=>""===e.value?[!1,this.context.intl.formatMessage(da.default.fieldIsRequired)]:[!0]]}}},{options:{validateOnChange:!0,validateOnBlur:!1,validationDebounceWait:xe.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:ba()()}})),M()(this,"getTicker",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,ia.jsx)(Zr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:(0,ia.jsx)("span",{children:(0,jr.truncateToken)((0,H.getTokenName)(e))})}):(0,jr.truncateToken)((0,H.getTokenName)(e))})),M()(this,"renderAddressExplorerUrl",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,ia.jsxs)(Zr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:[(0,ia.jsx)("span",{children:(0,jr.truncateAddressShort)((0,H.getTokenName)(e),10)})," ",(0,ia.jsx)(ln,{})]}):(0,jr.truncateAddressShort)((0,H.getTokenName)(e),10)})),M()(this,"getFingerprint",(e=>{if("Cardano"===e.Metadata.type)return(0,H.getTokenIdentifierIfExists)(e)})),M()(this,"getDisplayAmount",(e=>{const t=this.props.getTokenInfo(e);if(!t)throw new Error("missing token info");const a=t?t.Metadata.numberOfDecimals:0,r=e.amount.shiftedBy(-a),n=e.fee.shiftedBy(-a),s=0===e.amount.toNumber()||e.amount.toNumber()<0,o=e.amount.plus(s?e.fee.negated():e.fee).shiftedBy(-a),i=t?this.getTicker(t):(0,H.assetNameFromIdentifier)(e.identifier);let l=null,d=null;if(!0===this.props.unitOfAccountSetting.enabled){const{currency:e}=this.props.unitOfAccountSetting,a=this.props.getCurrentPrice((0,H.getTokenName)(t),e);if(null!=a){const t=(0,zr.calculateAndFormatValue)(r,a),[n,s]=t.split(".");l=n+(s?"."+s:".00"),d=e}}const[c,u]=(0,jr.splitAmount)(r,a),[p,g]=(0,jr.splitAmount)(n,a),[h,f]=(0,jr.splitAmount)(o,a);return{fiatAmount:l,currency:d,amount:c+(u||""),fee:p+(g||""),total:h+(f||""),ticker:i}})),M()(this,"getAssetsExplorerLink",(()=>null)),M()(this,"getSummaryAssetsData",(()=>{const{txData:e}=this.props,t={total:{},isOnlyTxFee:!1,sent:[],received:[]};if(e){var a;const n=e.amount.defaults.defaultIdentifier,s=null!==(a=e.amount.get(n))&&void 0!==a?a:new Q.Z("0"),o=new Q.Z(e.fee.amount),i=e.amount.nonDefaultEntries();for(const e of i){var r;const a={amount:e.amount,tokenInfo:null!==(r=this.props.getTokenInfo(e))&&void 0!==r?r:{Identifier:e.identifier,IsDefault:!1,IsNFT:!1,Metadata:{type:"Cardano",policyId:e.identifier.split(".")[0],assetName:e.identifier.split(".")[1],numberOfDecimals:0,ticker:null,longName:null}}};e.amount.isPositive()?t.received.push(a):t.sent.push(a)}t.total=this.getDisplayAmount({identifier:e.fee.tokenId,networkId:e.fee.networkId,amount:s,fee:o}),t.isOnlyTxFee=0===s.toNumber()}return t}))}submit(){"mnemonic"===this.props.walletType?this.form.submit({onSuccess:e=>{const{walletPassword:t}=zt()(e).call(e);this.setState({isSubmitting:!0}),this.props.onConfirm(t).finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{if(!(e instanceof X.UZ))throw e;this.form.$("walletPassword").invalidate(this.context.intl.formatMessage(Vn.incorrectWalletPasswordError))}))},onError:()=>{}}):(this.setState({isSubmitting:!0}),this.props.onConfirm("").finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{throw e})))}renderPayload(e){const t=(0,je.hexToUtf)(e);return t.match(/^[\t\n\r -~\xA0-\xAC\xAE-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0606-\u061B\u061D-\u06DC\u06DE-\u070D\u0710-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0898-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u2070\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EFD}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110BC}\u{110BE}-\u{110C2}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1342F}\u{13440}-\u{13455}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BC9F}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D172}\u{1D17B}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0100}-\u{E01EF}]+$/u)?t:e}render(){var e;const{form:t}=this,a=t.$("walletPassword"),{intl:r}=this.context,{txData:n,onCancel:s,connectedWebsite:o,signData:i}=this.props,{isSubmitting:l}=this.state,{walletType:d,hwWalletError:c,isHwWalletErrorRecoverable:u}=this.props;if(c&&!1===u)return(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(Dn.Z,{error:c}),Boolean(this.props.tx)&&(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",children:"Transaction:"}),(0,ia.jsx)("textarea",{rows:"10",style:{width:"100%"},disabled:!0,value:this.props.tx})]})]});let p,g,h;if(n){const e=this.getSummaryAssetsData();p=(0,ia.jsx)(xa.Z,{children:(0,ia.jsx)(Rn,{txAssetsData:e,renderExplorerHashLink:this.renderAddressExplorerUrl,walletType:d,hwWalletError:c,passwordFormField:(0,ia.jsx)(_a.Z,{type:"password",...jt()(a).call(a),error:a.error,id:"walletPassword"}),cip95Info:n.cip95Info})}),g=(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(xa.Z,{mb:"32px",children:(0,ia.jsx)(En,{txAssetsData:e,renderExplorerHashLink:this.renderAddressExplorerUrl})}),(0,ia.jsx)(pn,{txData:n,onCopyAddressTooltip:this.props.onCopyAddressTooltip,addressToDisplayString:this.props.addressToDisplayString,getCurrentPrice:this.props.getCurrentPrice,getTokenInfo:this.props.getTokenInfo,notification:this.props.notification,selectedExplorer:this.props.selectedExplorer,unitOfAccountSetting:this.props.unitOfAccountSetting})]})}else{if(!i)return null;p=(0,ia.jsxs)(xa.Z,{children:[(0,ia.jsx)(ta.Z,{component:"div",color:"#4A5065",variant:"body1",fontWeight:500,mb:"16px",id:"signMessageTitle",children:r.formatMessage(Vn.signMessage)}),(0,ia.jsx)(xa.Z,{width:"100%",p:"16px",border:"1px solid var(--yoroi-palette-gray-100)",borderRadius:"6px",id:"signMessageBox-payload",sx:{overflow:"auto"},children:(0,ia.jsx)("pre",{children:this.renderPayload(i.payload)})}),(0,ia.jsx)(Dn.Z,{error:c}),"mnemonic"===d&&(0,ia.jsx)(xa.Z,{mt:"16px",children:(0,ia.jsx)(_a.Z,{type:"password",...jt()(a).call(a),error:a.error,id:"walletPassword"})})]}),g=null}return h="ledger"===d?da.default.confirmOnLedger:"trezor"===d?da.default.confirmOnTrezor:da.default.confirm,(0,ia.jsxs)(xa.Z,{height:"100%",display:"flex",flexDirection:"column",children:[(0,ia.jsx)(xn,{isDataSignin:!n&&Boolean(i),detailsContent:(0,ia.jsx)(xa.Z,{overflowWrap:"break-word",children:p}),connectionContent:(0,ia.jsx)(On,{connectedWallet:this.props.selectedWallet,connectedWebsite:o}),utxosContent:g}),(0,ia.jsx)(xa.Z,{sx:{padding:"32px",borderTop:"1px solid #DCE0E9",maxWidth:"100%",backgroundColor:"#fff"},children:(0,ia.jsxs)(xa.Z,{sx:{display:"flex",gap:"15px"},children:[(0,ia.jsx)(ea.Z,{sx:{minWidth:0},fullWidth:!0,variant:"outlined",color:"primary",onClick:s,disabled:l,id:"cancelButton",children:r.formatMessage(da.default.cancel)}),(0,ia.jsx)(ea.Z,{variant:"contained",color:"primary",fullWidth:!0,disabled:"mnemonic"===d&&!a.isValid||l,onClick:jt()(e=this.submit).call(e,this),sx:{minWidth:0},id:"confirmButton",children:r.formatMessage(h)})]})})]})}},M()(Hn,"contextTypes",{intl:ge.intlShape.isRequired}),Ln=Hn))||Ln;var Gn,jn,Zn,zn,Kn,Yn,qn,$n,Jn,Xn,Qn,es,ts,as,rs,ns,ss,os,is,ls,ds,cs,us,ps,gs,hs,fs,ws,ms,ys=a(82164),xs=a(96386),_s=a(73891),vs=a(42588),As=a(5108);function bs(){return bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},bs.apply(this,arguments)}function Es(e){return gt.createElement("svg",bs({width:184,height:146,viewBox:"0 0 184 146",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Gn||(Gn=gt.createElement("g",{opacity:.2,stroke:"#1D45BA",strokeWidth:.5},gt.createElement("path",{d:"M64.57 142.368l114.355-61.97M21.115 111.492l106.676-57.807M57.935 46.277L178.4 111.473M5.729 88.74l100.98 54.653"}))),jn||(jn=gt.createElement("path",{d:"M107.552 115.445l5.789-3.362c-.084.183-.22.336-.392.44l-5.789 3.357a.968.968 0 00.392-.44v.005z",fill:"url(#add-collateral_inline_svg__paint0_linear_1859_97359)"})),Zn||(Zn=gt.createElement("path",{d:"M108.932 112.435l5.789-3.356-1.381 3.005-5.789 3.361 1.381-3.01z",fill:"url(#add-collateral_inline_svg__paint1_linear_1859_97359)"})),zn||(zn=gt.createElement("path",{d:"M98.674 106.521l5.789-3.361 10.259 5.919-5.79 3.356-10.258-5.914z",fill:"#243542"})),Kn||(Kn=gt.createElement("path",{d:"M108.932 112.435l-1.381 3.01c-.281.62-.955.751-1.694.325l-4.135-2.386a4.044 4.044 0 01-1.689-2.275l-1.36-4.588 10.259 5.914z",fill:"url(#add-collateral_inline_svg__paint2_linear_1859_97359)"})),Yn||(Yn=gt.createElement("path",{d:"M70.744 82.395l34.458 19.869.101-36.991L70.85 45.404l-.106 36.991z",fill:"url(#add-collateral_inline_svg__paint3_linear_1859_97359)"})),qn||(qn=gt.createElement("path",{d:"M105.211 98.678V82.395H70.744l34.458 19.868.009-3.585z",fill:"url(#add-collateral_inline_svg__paint4_linear_1859_97359)"})),$n||($n=gt.createElement("path",{d:"M77.437 98.01l5.785-3.356a.941.941 0 01-.392.44l-5.789 3.36a.985.985 0 00.396-.439v-.004z",fill:"url(#add-collateral_inline_svg__paint5_linear_1859_97359)"})),Jn||(Jn=gt.createElement("path",{d:"M78.812 95.005l5.79-3.361-1.382 3.01-5.784 3.357 1.376-3.006z",fill:"url(#add-collateral_inline_svg__paint6_linear_1859_97359)"})),Xn||(Xn=gt.createElement("path",{d:"M68.555 89.087l5.789-3.357 10.258 5.914-5.789 3.361-10.258-5.918z",fill:"#243542"})),Qn||(Qn=gt.createElement("path",{d:"M78.813 95.005l-1.377 3.006c-.286.624-.959.75-1.698.325l-4.135-2.382a4.09 4.09 0 01-1.689-2.28l-1.342-4.583 10.241 5.914z",fill:"url(#add-collateral_inline_svg__paint7_linear_1859_97359)"})),es||(es=gt.createElement("path",{d:"M114.14 64.6l-.14 48.723a1.284 1.284 0 01-.537 1.177l35.368-20.527a1.095 1.095 0 00.502-.778 2.33 2.33 0 00.035-.4l.145-48.722-35.373 20.528zM102.044 14.587a1.321 1.321 0 00-1.32-.128L65.369 34.987a1.29 1.29 0 011.32.132l45.635 26.314 35.369-20.528-45.649-26.318z",fill:"#0CDDB3"})),ts||(ts=gt.createElement("path",{d:"M112.311 61.433l35.368-20.528a4.033 4.033 0 011.834 3.168l-35.368 20.528a4.024 4.024 0 00-1.83-3.168h-.004z",fill:"url(#add-collateral_inline_svg__paint8_linear_1859_97359)"})),as||(as=gt.createElement("path",{d:"M78.902 75.049l33.312.273v4.573c0 2.44-1.63 4.874-4.88 6.733-6.506 3.71-17.05 3.71-23.556 0-3.25-1.855-4.876-4.294-4.876-6.733v-4.846z",fill:"url(#add-collateral_inline_svg__paint9_linear_1859_97359)"})),rs||(rs=gt.createElement("path",{d:"M107.335 82.07c-6.506 3.695-17.05 3.695-23.555 0-6.506-3.694-6.501-9.696 0-13.39 6.501-3.694 17.049-3.694 23.555 0s6.506 9.687 0 13.39z",fill:"url(#add-collateral_inline_svg__paint10_linear_1859_97359)"})),ns||(ns=gt.createElement("path",{d:"M95.231 83.535c7.937 0 14.37-3.8 14.37-8.486 0-4.687-6.433-8.487-14.37-8.487-7.936 0-14.37 3.8-14.37 8.487s6.434 8.486 14.37 8.486z",fill:"url(#add-collateral_inline_svg__paint11_linear_1859_97359)"})),ss||(ss=gt.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M101.67 72.105c-.302-.174-.786-.14-1.088.035l-1.632.942-1.57-.384 1.026-.593c.303-.174.363-.453.06-.627-.301-.175-.785-.175-1.087 0l-1.48.854-6.466-1.57a1.166 1.166 0 00-.847.105c-.211.122-.272.332-.18.489l2.779 3.661-1.45.837c-.303.175-.363.454-.06.628.301.174.785.174 1.087 0l1.058-.61.664.906-1.601.924c-.302.175-.363.454-.06.628.302.175.785.175 1.087 0l1.239-.715 2.326 3.017c.152.227.605.314.998.227.09-.018.15-.053.211-.088.212-.122.302-.314.181-.488l-2.507-3.295 4.894-2.825 5.802 1.43c.302.07.604.034.846-.105.06-.035.121-.07.181-.14.151-.226 0-.488-.393-.575l-5.257-1.29 1.239-.715c.302-.21.332-.506 0-.663zm-11.06-.104l4.08.994-2.327 1.342-1.752-2.336zm2.448 3.19l.665.907 4.049-2.336-1.571-.384-3.143 1.814z",fill:"#fff"})),os||(os=gt.createElement("path",{d:"M101.67 72.105l-.13.075.006.004.007.003.117-.082zm-2.72.977l-.071.097.114.028.087-.05-.13-.075zm-1.57-.384l-.13-.075-.194.111.252.062.071-.098zm1.026-.593l.13.075-.13-.075zm-2.507.227l-.072.098.114.027.087-.05-.13-.075zm-6.466-1.57l.07-.097h-.002l-.069.098zm-1.028.594l-.175.033.007.01.168-.043zm2.78 3.661l.13.075.089-.051-.05-.066-.17.042zm-1.45.837l.13.075-.13-.075zm2.085.018l.169-.042-.107-.145-.192.112.13.075zm.664.906l.13.075.088-.05-.049-.066-.169.041zm.665.837l.168-.043-.109-.14-.189.108.13.075zm2.326 3.017l.172-.038-.004-.005-.168.043zm.998.227l-.058-.101-.008.002.066.099zm.392-.576l.171-.04-.002-.002-.169.042zm-2.507-3.295l-.13-.075-.09.05.051.067.169-.042zm4.894-2.825l.073-.098-.115-.028-.087.05.13.076zm5.802 1.43l-.072.097.004.001.068-.098zm1.027-.245l.165.048.003-.005.004-.004-.172-.038zm-.393-.575l-.072.098.006.001.066-.099zm-5.257-1.29l-.13-.075-.193.11.251.062.072-.097zm1.239-.715l.13.075.011-.007-.141-.068zm-6.98.227l.13.075.193-.112-.252-.061-.071.098zM90.61 72l.072-.098-.422-.103.182.243.169-.042zm1.753 2.336l-.168.042.107.144.191-.11-.13-.076zm1.36 1.761l-.17.042.107.145.193-.112-.13-.075zm-.665-.906l-.13-.075-.087.05.048.066.17-.041zm4.714-1.43l.13.075.193-.111-.252-.062-.071.098zm-1.571-.384l.071-.097-.114-.028-.087.05.13.075zm4.511-1.163c.25-.144.615-.157.828-.035l.26-.15c-.392-.226-.994-.17-1.348.035l.26.15zm-1.632.942l1.632-.942-.26-.15-1.632.942.26.15zm-1.772-.361l1.57.383.144-.195-1.571-.383-.143.195zm.968-.766l-1.027.593.26.15 1.027-.593-.26-.15zm.061-.477c.212.122.19.333-.06.477l.26.15c.354-.204.452-.551.06-.777l-.26.15zm-.828 0a.909.909 0 01.828 0l.26-.15c-.374-.216-.974-.216-1.348 0l.26.15zm-1.48.854l1.48-.854-.26-.15-1.48.854.26.15zm-6.668-1.546l6.466 1.569.143-.196-6.466-1.569-.143.195zm-.645.081a.878.878 0 01.648-.08l.137-.198c-.372-.085-.752-.04-1.044.128l.26.15zm-.137.38c-.071-.124-.018-.29.137-.38l-.26-.15c-.267.155-.335.408-.225.597l.348-.067zm2.774 3.653l-2.78-3.662-.336.085 2.78 3.662.336-.085zm-1.488.954l1.45-.837-.26-.15-1.45.837.26.15zm-.06.478c-.213-.123-.19-.334.06-.478l-.26-.15c-.355.205-.453.552-.06.778l.26-.15zm.827 0a.909.909 0 01-.828 0l-.26.15c.374.216.974.216 1.348 0l-.26-.15zm1.058-.61l-1.058.61.26.15 1.057-.61-.26-.15zm.963.94l-.664-.907-.339.083.665.907.338-.083zm-1.64 1.04l1.601-.924-.26-.15-1.601.924.26.15zm-.06.478c-.213-.122-.19-.333.06-.477l-.26-.15c-.355.204-.453.551-.06.777l.26-.15zm.827 0a.909.909 0 01-.828 0l-.26.15c.374.216.974.216 1.348 0l-.26-.15zm1.239-.715l-1.239.715.26.15 1.239-.715-.26-.15zm2.624 3.049l-2.326-3.017-.336.086 2.327 3.017.335-.086zm.764.17c-.318.071-.653-.004-.76-.165l-.343.076c.195.292.767.391 1.235.287l-.132-.197zm.147-.063a.426.426 0 01-.14.062l.117.201c.137-.026.226-.08.283-.113l-.26-.15zm.14-.373c.092.13.025.278-.14.373l.26.15c.258-.149.373-.385.222-.602l-.341.079zM94.19 77.03l2.508 3.296.337-.085-2.508-3.296-.337.085zm4.934-2.942l-4.895 2.825.26.15 4.894-2.825-.26-.15zm6.003 1.407l-5.801-1.43-.145.195 5.802 1.43.144-.195zm.644-.082a.878.878 0 01-.648.081l-.136.197c.371.086.751.04 1.044-.128l-.26-.15zm.147-.112a.497.497 0 01-.147.112l.26.15c.064-.037.142-.082.216-.167l-.329-.095zm-.295-.429c.28.062.41.255.288.439l.343.076c.18-.27.007-.6-.499-.713l-.132.198zm-5.263-1.292l5.257 1.29.144-.194-5.257-1.29-.144.194zm1.181-.887l-1.239.715.26.15 1.239-.715-.26-.15zm.013-.506c.225.106.239.33-.024.513l.282.136c.341-.236.415-.605-.025-.813l-.233.164zm-6.792.71l-4.079-.994-.143.195 4.08.994.142-.195zm-2.268 1.515l2.327-1.342-.26-.15-2.327 1.342.26.15zm-2.05-2.37l1.752 2.337.337-.084-1.753-2.336-.337.084zm3.45 4.015l-.666-.907-.338.083.665.907.338-.083zm3.749-2.37l-4.049 2.336.26.15 4.049-2.336-.26-.15zm-1.513-.211l1.571.384.143-.196-1.57-.383-.144.195zm-2.94 1.79l3.142-1.813-.26-.15-3.143 1.814.26.15z",fill:"#fff"})),is||(is=gt.createElement("path",{d:"M112.311 61.433L66.675 35.119c-1.011-.572-1.838-.132-1.843 1.05l-.14 48.717a4.044 4.044 0 001.834 3.173l45.635 26.314c1.012.584 1.839.11 1.839-1.05l.141-48.722a4.024 4.024 0 00-1.83-3.168zm-7.109 40.831L70.745 82.395l.105-36.99 34.453 19.868-.101 36.991z",fill:"url(#add-collateral_inline_svg__paint12_linear_1859_97359)"})),ls||(ls=gt.createElement("path",{d:"M41.007 107.756l-5.385-3.124a.95.95 0 01-.391-.879l5.38 3.124a.96.96 0 00.396.879z",fill:"url(#add-collateral_inline_svg__paint13_linear_1859_97359)"})),ds||(ds=gt.createElement("path",{d:"M40.611 106.89l-5.38-3.124-.092-49.825 5.38 3.124.092 49.825z",fill:"url(#add-collateral_inline_svg__paint14_linear_1859_97359)"})),cs||(cs=gt.createElement("path",{d:"M41.873 54.732l-5.385-3.124L65.94 34.627l3.616 2.135-27.683 17.97z",fill:"url(#add-collateral_inline_svg__paint15_linear_1859_97359)"})),us||(us=gt.createElement("path",{d:"M40.523 57.065l-5.384-3.123a2.962 2.962 0 011.35-2.334l5.385 3.124a2.955 2.955 0 00-1.35 2.333z",fill:"url(#add-collateral_inline_svg__paint16_linear_1859_97359)"})),ps||(ps=gt.createElement("path",{d:"M69.557 36.744l.101 53.098-27.687 17.817c-.748.439-1.355.088-1.36-.769l-.088-49.825a2.95 2.95 0 011.35-2.333l27.684-17.988z",fill:"url(#add-collateral_inline_svg__paint17_linear_1859_97359)"})),gs||(gs=gt.createElement("path",{d:"M70.432 46.981h-1.905v6.077h1.905v-6.077z",fill:"url(#add-collateral_inline_svg__paint18_linear_1859_97359)"})),hs||(hs=gt.createElement("path",{d:"M70.432 74.6h-1.905v6.077h1.905v-6.076z",fill:"url(#add-collateral_inline_svg__paint19_linear_1859_97359)"})),fs||(fs=gt.createElement("defs",null,gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint0_linear_1859_97359",x1:113.74,y1:116.349,x2:113.74,y2:112.063,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint1_linear_1859_97359",x1:115.184,y1:116.232,x2:115.184,y2:109.045,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint2_linear_1859_97359",x1:98.875,y1:106.984,x2:116.718,y2:105.754,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint3_linear_1859_97359",x1:106.852,y1:136.692,x2:186.123,y2:53.555,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#244ABF"}),gt.createElement("stop",{offset:1,stopColor:"#4760FF"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint4_linear_1859_97359",x1:107.435,y1:104.718,x2:107.435,y2:82.29,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint5_linear_1859_97359",x1:83.621,y1:98.924,x2:83.621,y2:94.634,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint6_linear_1859_97359",x1:85.064,y1:98.797,x2:85.064,y2:91.611,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint7_linear_1859_97359",x1:68.773,y1:89.554,x2:86.586,y2:88.328,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint8_linear_1859_97359",x1:113.041,y1:42.06,x2:177.409,y2:35.61,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint9_linear_1859_97359",x1:92.809,y1:75.903,x2:111.345,y2:88.322,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint10_linear_1859_97359",x1:94.347,y1:65.05,x2:97.179,y2:89.883,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{offset:.09,stopColor:"#84E4A4"}),gt.createElement("stop",{offset:.97,stopColor:"#3C53D7"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint11_linear_1859_97359",x1:111.456,y1:85.632,x2:111.456,y2:66.472,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint12_linear_1859_97359",x1:65.662,y1:38.758,x2:151.944,y2:35.343,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint13_linear_1859_97359",x1:38.116,y1:103.753,x2:41.132,y2:109.654,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#0CDDB3"}),gt.createElement("stop",{offset:1,stopColor:"#4F6FC6"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint14_linear_1859_97359",x1:37.875,y1:53.941,x2:51.39,y2:55.833,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#0CDDB3"}),gt.createElement("stop",{offset:1,stopColor:"#4F6FC6"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint15_linear_1859_97359",x1:53.022,y1:34.627,x2:66.991,y2:65.739,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#0CDDB3"}),gt.createElement("stop",{offset:1,stopColor:"#4F6FC6"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint16_linear_1859_97359",x1:38.506,y1:51.608,x2:42.977,y2:59.08,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#0CDDB3"}),gt.createElement("stop",{offset:1,stopColor:"#4F6FC6"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint17_linear_1859_97359",x1:71.538,y1:116.633,x2:71.538,y2:36.369,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#1D45BA"}),gt.createElement("stop",{offset:.42,stopColor:"#1D47BA"}),gt.createElement("stop",{offset:.572,stopColor:"#1D4EB9"}),gt.createElement("stop",{offset:.68,stopColor:"#1C59B8"}),gt.createElement("stop",{offset:.767,stopColor:"#1B6AB6"}),gt.createElement("stop",{offset:.842,stopColor:"#1A80B3"}),gt.createElement("stop",{offset:.908,stopColor:"#199CB0"}),gt.createElement("stop",{offset:.966,stopColor:"#18BBAD"}),gt.createElement("stop",{offset:1,stopColor:"#17D1AA"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint18_linear_1859_97359",x1:68.565,y1:47.278,x2:71.892,y2:47.211,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})),gt.createElement("linearGradient",{id:"add-collateral_inline_svg__paint19_linear_1859_97359",x1:68.565,y1:74.897,x2:71.892,y2:74.83,gradientUnits:"userSpaceOnUse"},gt.createElement("stop",{stopColor:"#17D1AA"}),gt.createElement("stop",{offset:.066,stopColor:"#1AC2AE"}),gt.createElement("stop",{offset:.265,stopColor:"#229BB8"}),gt.createElement("stop",{offset:.462,stopColor:"#297CC0"}),gt.createElement("stop",{offset:.652,stopColor:"#2D66C6"}),gt.createElement("stop",{offset:.835,stopColor:"#3059CA"}),gt.createElement("stop",{offset:1,stopColor:"#3154CB"})))))}a.p;const Ts=(0,ge.defineMessages)({incorrectWalletPasswordError:{id:"api.errors.IncorrectPasswordError",defaultMessage:"!!!Incorrect wallet password."},reorgTitle:{id:"connector.signin.reorg.title",defaultMessage:"!!!Add Collateral"},reorgMessage:{id:"connector.signin.reorg.message",defaultMessage:"!!!To interact with {smartContractsLink} in Cardano you should add collateral, which means to make a 0 ADA transaction.{lineBreak}{lineBreak}It is a guarantee that prevent from failing smart contracts and scams. {learnMoreLink} about collateral."},sendError:{id:"connector.signin.error.sendError",defaultMessage:"!!!An error occured when sending the transaction."},transactionFee:{id:"connector.signin.transactionFee",defaultMessage:"!!!Transaction Fee"}}),Cs=(0,ht.observer)((ms=class extends gt.Component{constructor(...e){super(...e),M()(this,"state",{isSubmitting:!1}),M()(this,"form",new va.Z({fields:{walletPassword:{type:"password",label:this.context.intl.formatMessage(da.default.passwordLabel),placeholder:this.context.intl.formatMessage(da.default.passwordLabel),value:"",validators:[({field:e})=>""===e.value?[!1,this.context.intl.formatMessage(da.default.fieldIsRequired)]:[!0]]}}},{options:{validateOnChange:!0,validateOnBlur:!1,validationDebounceWait:xe.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:ba()()}})),M()(this,"getTicker",(e=>{const t=this.getFingerprint(e);return void 0!==t?(0,ia.jsx)(Zr.Z,{selectedExplorer:this.props.selectedExplorer,hash:t,light:!0,linkType:"token",children:(0,ia.jsx)("span",{children:(0,jr.truncateToken)((0,H.getTokenName)(e))})}):(0,jr.truncateToken)((0,H.getTokenName)(e))})),M()(this,"getFingerprint",(e=>{if("Cardano"===e.Metadata.type)return(0,H.getTokenIdentifierIfExists)(e)})),M()(this,"_resolveTokenInfo",(e=>this.props.getTokenInfo(e))),M()(this,"renderAmountDisplay",(e=>{const t=this._resolveTokenInfo(e.entry);if(!t)throw new Error("missing token info");const a=t?t.Metadata.numberOfDecimals:0,r=e.entry.amount.shiftedBy(-a),n=t?this.getTicker(t):(0,H.assetNameFromIdentifier)(e.entry.identifier),[s,o]=(0,jr.splitAmount)(r,a),i=Oa()(s).call(s,"-")?s.replace("-",""):s;return(0,ia.jsxs)("div",{children:[(0,ia.jsx)("span",{children:i}),(0,ia.jsx)("span",{children:o})," ",n]})}))}submit(){"mnemonic"===this.props.walletType?this.form.submit({onSuccess:e=>{const{walletPassword:t}=zt()(e).call(e);this.setState({isSubmitting:!0}),this.props.onConfirm(t).finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{if(!(e instanceof X.UZ))throw e;this.form.$("walletPassword").invalidate(this.context.intl.formatMessage(Ts.incorrectWalletPasswordError))}))},onError:()=>{}}):(this.setState({isSubmitting:!0}),this.props.onConfirm("").finally((()=>{this.setState({isSubmitting:!1})})).catch((e=>{throw e})))}render(){var e,t;const{txData:a,onCancel:r,submissionError:n}=this.props;if(!a)return null;const{intl:s}=this.context,{form:o}=this,i=o.$("walletPassword"),{isSubmitting:l}=this.state,d=a.amount.defaults.defaultIdentifier,c=null!==(e=a.amount.get(d))&&void 0!==e?e:new Q.Z("0"),u=new Q.Z(a.fee.amount).negated(),p=(0,ia.jsx)(_s.Z,{href:"https://docs.cardano.org/plutus/collateral-mechanism",target:"_blank",rel:"noreferrer",sx:{textDecoration:"none"},children:s.formatMessage(da.default.learnMore)}),g=(0,ia.jsx)(_s.Z,{href:"https://emurgohelpdesk.zendesk.com/hc/en-us/articles/4415793858959-What-are-smart-contracts",target:"_blank",rel:"noreferrer",sx:{textDecoration:"none"},children:s.formatMessage(da.default.smartContracts).toLowerCase()}),{walletType:h}=this.props;let f;switch(h){case"ledger":f=da.default.confirmOnLedger;break;case"trezor":f=da.default.confirmOnTrezor;break;default:f=da.default.confirm}return(0,ia.jsxs)(xa.Z,{overflowWrap:"break-word",display:"flex",height:"100%",flexDirection:"column",children:[(0,ia.jsxs)(xa.Z,{maxWidth:480,margin:"0 auto",padding:"32px",flex:"1",flexGrow:"1",overflow:"auto",children:[(0,ia.jsx)(ta.Z,{component:"div",textAlign:"center",color:"gray.900",variant:"h4",fontWeight:500,marginBottom:"8px",fontSize:"20px",id:"addCollateralTitle",children:s.formatMessage(Ts.reorgTitle)}),(0,ia.jsx)(xa.Z,{textAlign:"center",my:"32px",children:(0,ia.jsx)(Es,{})}),(0,ia.jsx)(ta.Z,{component:"div",children:(0,ia.jsx)(ge.FormattedMessage,{...Ts.reorgMessage,values:{learnMoreLink:p,smartContractsLink:g,lineBreak:(0,ia.jsx)("br",{})}})}),(0,ia.jsx)(xa.Z,{pt:"24px",children:(0,ia.jsxs)(xa.Z,{width:"100%",padding:"16px",border:"1px solid var(--yoroi-palette-gray-100)",borderRadius:"6px",display:"flex",flexDirection:"column",gap:"16px",children:[(0,ia.jsxs)(xa.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,ia.jsx)(ta.Z,{component:"div",children:s.formatMessage(da.default.amount)}),(0,ia.jsx)(ta.Z,{component:"div",id:"addCollateralAmountTitle",children:this.renderAmountDisplay({entry:{identifier:a.fee.tokenId,networkId:a.fee.networkId,amount:c}})})]}),(0,ia.jsxs)(xa.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,ia.jsx)(ta.Z,{component:"div",children:s.formatMessage(Ts.transactionFee)}),(0,ia.jsx)(ta.Z,{component:"div",id:"addCollateralFeeTitle",children:this.renderAmountDisplay({entry:{identifier:a.fee.tokenId,networkId:a.fee.networkId,amount:u}})})]})]})}),"mnemonic"===h&&(0,ia.jsxs)(xa.Z,{mt:"24px",children:[(0,ia.jsx)(_a.Z,{type:"password",...jt()(i).call(i),error:i.error,id:"walletPassword"}),"SEND_TX_ERROR"===n&&(0,ia.jsx)(vs.Z,{severity:"error",children:s.formatMessage(Ts.sendError)})]})]}),this.props.hwWalletError&&(0,ia.jsx)(Dn.Z,{error:this.props.hwWalletError}),(0,ia.jsx)(xa.Z,{borderTop:"1px solid var(--yoroi-palette-gray-300)",children:(0,ia.jsxs)(xa.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"15px",maxWidth:480,margin:"0 auto",padding:"32px"},children:[(0,ia.jsx)(ea.Z,{sx:{height:"40px",minWidth:"unset",minHeight:"unset",fontSize:"14px",lineHeight:"15px"},disableRipple:!1,variant:"outlined",color:"primary",onClick:r,id:"cancelButton",children:s.formatMessage(da.default.backButtonLabel)}),(0,ia.jsx)(As.Z,{sx:{minWidth:"auto"},variant:"contained",fullWidth:!0,disabled:"mnemonic"===h&&!i.isValid,onClick:jt()(t=this.submit).call(t,this),loading:l,id:"confirmButton",children:s.formatMessage(f)})]})})]})}},M()(ms,"contextTypes",{intl:ge.intlShape.isRequired}),ws=ms))||ws;var Is,ks,Ds;let Ss=(0,ht.observer)((ks=class extends gt.Component{constructor(...e){super(...e),D()(this,"notificationElementId",Ds,this),M()(this,"onUnload",(e=>{e.preventDefault(),this.props.stores.connector.cancelSignInTx()})),M()(this,"onConfirm",(e=>async t=>{var a;const{signingMessage:r}=this.props.stores.connector;if(null==r)throw new Error("missing the signing message");const n=F()(a=this.props.stores.connector.filteredWallets).call(a,(e=>e.publicDeriverId===r.publicDeriverId));if(null==n)throw new Error("missing connected wallet");"mnemonic"===n.type&&await(0,L.getPrivateStakingKey)({publicDeriverId:e.publicDeriverId,password:t}),await this.props.stores.connector.confirmSignInTx(t),window.removeEventListener("beforeunload",this.onUnload),window.removeEventListener("unload",this.onUnload),window.close()})),M()(this,"onCancel",(()=>{window.removeEventListener("beforeunload",this.onUnload),window.removeEventListener("unload",this.onUnload),this.props.stores.connector.cancelSignInTx(),Ht()((()=>{window.close()}),100)}))}componentDidMount(){this.props.stores.connector.refreshWallets(),window.addEventListener("beforeunload",this.onUnload),window.addEventListener("unload",this.onUnload)}renderLoading(){return(0,ia.jsx)(xs.Z,{bottomPadding:0,children:(0,ia.jsx)(ys.Z,{children:(0,ia.jsx)(ca.default,{})})})}renderError(e){return(0,ia.jsx)(xs.Z,{bottomPadding:0,children:e})}render(){var e,t;const{uiNotifications:a}=this.props.stores,{signingMessage:r,unrecoverableError:s}=this.props.stores.connector;if(null!=s)return this.renderError(s);if(null==r)return this.renderLoading();const o=F()(e=this.props.stores.connector.filteredWallets).call(e,(e=>e.publicDeriverId===r.publicDeriverId));if(null==o)return this.renderLoading();const i=this.props.stores.connector.currentConnectorWhitelist,l=F()(i).call(i,(e=>o.publicDeriverId===e.publicDeriverId&&e.url===r.requesterUrl)),d={duration:xe.Z.wallets.ADDRESS_COPY_TOOLTIP_NOTIFICATION_DURATION,message:da.default.copyTooltipMessage},c=(e,t)=>{a.isOpen(t)||((0,n.runInAction)((()=>{this.notificationElementId=t})),a.open({id:t,duration:d.duration,message:d.message}))},u=e=>(0,Ha.addressToDisplayString)(e,(0,m.getNetworkById)(o.networkId)),p=e=>this.onConfirm(o)(e),g=null==this.notificationElementId?null:a.getTooltipActiveNotification(this.notificationElementId),h="data"===r.sign.type?{address:r.sign.address,payload:r.sign.payload}:null,f=null!==(t=this.props.stores.explorers.selectedExplorer.get(o.networkId))&&void 0!==t?t:(()=>{throw new Error("No explorer for wallet network")})();let w=null;switch(r.sign.type){case"tx-reorg/cardano":{const e=this.props.stores.connector.adaTransaction;if(null==e&&null==h)return this.renderLoading();w=(0,ia.jsx)(Cs,{txData:e,getTokenInfo:(0,H.genLookupOrNull)(this.props.stores.tokenInfoStore.tokenInfo),onConfirm:p,onCancel:this.onCancel,selectedExplorer:f,submissionError:this.props.stores.connector.submissionError,walletType:o.type,hwWalletError:this.props.stores.connector.hwWalletError});break}case"data":case"tx/cardano":{const e=this.props.stores.connector.adaTransaction;if(null==e&&null==h)return this.renderLoading();let t;t="tx/cardano"===r.sign.type?r.sign.tx.tx:"",w=(0,ia.jsx)(Un,{shouldHideBalance:this.props.stores.profile.shouldHideBalance,connectedWebsite:l,selectedWallet:o,onCopyAddressTooltip:c,notification:g,txData:e,getTokenInfo:(0,H.genLookupOrNull)(this.props.stores.tokenInfoStore.tokenInfo),defaultToken:{defaultNetworkId:o.networkId,defaultIdentifier:o.defaultTokenId},network:(0,m.getNetworkById)(o.networkId),onConfirm:p,onCancel:this.onCancel,addressToDisplayString:u,getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,selectedExplorer:f,unitOfAccountSetting:this.props.stores.profile.unitOfAccount,submissionError:this.props.stores.connector.submissionError,signData:h,walletType:o.type,hwWalletError:this.props.stores.connector.hwWalletError,isHwWalletErrorRecoverable:this.props.stores.connector.isHwWalletErrorRecoverable,tx:t});break}default:w=null}return(0,ia.jsx)(ra.Z,{sx:{height:"calc(100vh - 52px)",bgcolor:"white"},children:w})}},Ds=B()(ks.prototype,"notificationElementId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Is=ks))||Is;var Ms,Rs=a(59828);let Bs=(0,ht.observer)(Ms=class extends gt.Component{componentDidMount(){this.props.stores.connector.refreshWallets()}onSelectWallet(e){(0,L.setCashbackWallet)(e.publicDeriverId),Ht()(window.close,50)}render(){const{stores:e}=this.props;return(0,ia.jsx)(Ar,{selectedWallet:{index:-1,deriver:void 0,checksum:void 0},onConnect:async()=>{},onCancel:()=>this.onSelectWallet({publicDeriverId:-1}),isAppAuth:!1,hidePasswordForm:()=>{},loading:e.connector.loadingWallets,error:"",message:null,publicDerivers:e.connector.wallets,onSelectWallet:this.onSelectWallet,networkId:e.profile.getCurrentNetworkId(),getTokenInfo:(0,H.genLookupOrFail)(e.tokenInfoStore.tokenInfo),shouldHideBalance:e.profile.shouldHideBalance,unitOfAccount:e.profile.unitOfAccount,getCurrentPrice:e.coinPriceStore.getCurrentPrice,onUpdateHideBalance:e.profile.updateHideBalance,isSelectingCashbackWallet:!0})}})||Ms;const Ws=(0,ge.injectIntl)((0,ht.observer)((e=>{const{stores:t,intl:a}=e,r=a.formatMessage((0,ft.useLocation)().pathname===y?Lr.yoroiConnector:Lr.yoroiDappConnector);return(0,ia.jsxs)(ia.Fragment,{children:[(0,ia.jsx)(Ot.Z,{children:(0,ia.jsx)("title",{children:r})}),t.loading.isLoading?(0,ia.jsx)(Rs.Z,{stores:t}):Ns(Ps(t),t)]})}))),Ps=e=>(0,ia.jsxs)(ft.Switch,{children:[(0,ia.jsx)(ft.Route,{exact:!0,path:"/",component:t=>(0,ia.jsx)(kr,{...t,stores:e})}),(0,ia.jsx)(ft.Route,{exact:!0,path:"/signin-transaction",component:t=>(0,ia.jsx)(Ss,{...t,stores:e})}),(0,ia.jsx)(ft.Route,{exact:!0,path:y,component:t=>(0,ia.jsx)(Bs,{...t,stores:e})})]});function Ns(e,t){return(0,ia.jsx)(Vr,{networkId:t.profile.getCurrentNetworkId(),children:e})}var Fs,Os,Ls,Hs=a(35265),Vs=a(95666),Us=a(13469),Gs=a(22233),js=a(50502),Zs=a(66720),zs=a(27283);(0,ge.addLocaleData)([...mt(),...xt(),...vt(),...bt(),...Tt(),...It(),...Dt(),...Mt(),...Bt(),...Pt(),...Ft()]);let Ks=(0,ht.observer)((Os=class extends gt.Component{constructor(...e){super(...e),D()(this,"mergedMessages",Ls,this),M()(this,"componentDidMount",(()=>{(0,n.autorun)((async()=>{const e={...await pt.Iz["en-US"],...await pt.Iz[this.props.stores.profile.currentLocale]};(0,n.runInAction)((()=>{this.mergedMessages=e}))}))})),M()(this,"state",{crashed:!1}),M()(this,"getContent",(()=>{const{stores:e,history:t}=this.props;return!0===this.state.crashed?(0,ia.jsx)(Vs.Z,{}):(0,ia.jsx)(ft.Router,{history:t,children:(0,ia.jsx)(Ws,{stores:e})})}))}static getDerivedStateFromError(e){return{crashed:!0}}componentDidCatch(e,t){Us.Yd.error(t.componentStack)}componentWillUnmount(){window.removeEventListener("unload",(()=>{}))}render(){const e=this.mergedMessages;if(null===e)return null;const{stores:t}=this.props,a=t.profile.currentLocale,r=t.profile.currentTheme,n=zs.K6[r];return(0,zs.LO)(r),(0,ia.jsx)("div",{style:{height:"100%",backgroundColor:"var(--yoroi-palette-gray-50)"},children:(0,ia.jsxs)(Gs.Z,{theme:n,children:[(0,ia.jsx)(Zs.ZP,{}),(0,js.W0)(n),(0,ia.jsx)(Hs.Z,{}),(0,ia.jsx)(ge.IntlProvider,{locale:a,key:a,messages:e,children:this.getContent()})]})})}},Ls=B()(Os.prototype,"mergedMessages",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fs=Os))||Fs;const Ys=Ks;(0,n.configure)({enforceActions:"always"}),Q.Z.DEBUG=!0,(0,et.HG)(et.sz.YoroiConnector),window.addEventListener("load",(async()=>{const e=await(0,i.s)(),t=new s.RouterStore,a=(0,o.q_)(),l=(0,s.syncHistoryWithStore)(a,t),d=ut(e);window.yoroi={api:e,translations:pt.Iz,stores:d,reset:(0,n.action)((()=>{ut(e)}))};const c=document.querySelector("#root-yoroi-connector");if(null==c)throw new Error("Root element not found.");const u=(new ne.default).loadIsAnalyticsAllowed();await Ge.ampli.load({environment:_e.Z.isProduction()?"production":"development",client:{configuration:{optOut:!u,flushIntervalMillis:5e3,trackingOptions:{ipAddress:!1},defaultTracking:!1}}}).promise,(0,r.render)((0,ia.jsx)(Ys,{stores:d,history:l}),c)}))},85342:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(23645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".ProgressBar_component{overflow:hidden;position:absolute;left:0;right:0;top:0}.ProgressBar_component progress{margin-right:8px}.ProgressBar_component progress[value]{width:100%;-webkit-appearance:none;appearance:none}.ProgressBar_component progress[value]::-webkit-progress-bar{height:4px;background-color:var(--yoroi-palette-gray-200)}.ProgressBar_component progress[value]::-webkit-progress-value{height:4px;background-color:var(--yoroi-palette-secondary-300)}\n",""]),n.locals={component:"ProgressBar_component"};const s=n},4159:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(23645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".ConnectPage_component{display:flex;flex-direction:column;height:calc(100vh - 52px);overflow:auto;background-color:#fff}.ConnectPage_component.ConnectPage_isNightly{height:calc(100vh - 138px)}.ConnectPage_connectWrapper{padding-top:32px;padding-bottom:32px;display:flex;flex-direction:column;align-items:center}.ConnectPage_connectWrapper .ConnectPage_image{width:64px;height:64px;border:1px solid #a7afc0;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:#fff}.ConnectPage_connectWrapper .ConnectPage_image img{width:44px}.ConnectPage_connectWrapper .ConnectPage_title{text-align:center;margin-top:8px;font-size:18px;font-weight:500}.ConnectPage_toggleButton{cursor:pointer}.ConnectPage_noWallets{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;margin-top:60px;letter-spacing:0}.ConnectPage_noWallets .ConnectPage_noWalletsImage{margin-bottom:33px}.ConnectPage_noWallets .ConnectPage_noWalletsText{color:#242838;font-size:24px;letter-spacing:0;line-height:32px;margin-bottom:16px}.ConnectPage_noWallets .ConnectPage_createWallet{color:#17d1aa;font-size:16px;line-height:24px;cursor:pointer}.ConnectPage_noWallets .ConnectPage_createWallet::first-letter{text-transform:uppercase}.ConnectPage_walletsContainer{padding-left:16px;padding-right:16px}.ConnectPage_titleWallet{display:flex;align-items:center;margin-left:16px;margin-bottom:8px;font-weight:500}.ConnectPage_titleWallet *+*{padding-left:10px}.ConnectPage_cashbackApplyAll{margin-left:16px;font-weight:400;font-size:14px;line-height:16px}.ConnectPage_list{overflow:auto}.ConnectPage_list .ConnectPage_listItem{border:1px solid #fff;border-radius:8px}.ConnectPage_list .ConnectPage_listItem>div{width:100%}.ConnectPage_list .ConnectPage_listItem label{width:100%;color:var(--yoroi-palette-gray-900)}.ConnectPage_list .ConnectPage_enabledWallet:hover{border-color:#c4cad7}.ConnectPage_bottom{border-top:1px solid #dce0e9;padding:15px 32px}.ConnectPage_bottom .ConnectPage_infoText{color:var(--yoroi-palette-gray-600);font-size:12px;line-height:20px}.ConnectPage_errorMessage{color:var(--yoroi-comp-input-error);padding:10px 0}.ConnectPage_errorMessage p{margin-top:10px;overflow-wrap:break-word}@media (min-width: 678px){.ConnectPage_component{max-width:600px;margin:auto;padding-top:40px}.ConnectPage_component .ConnectPage_pageTitle{text-align:center;padding-left:0px}}\n",""]),n.locals={component:"ConnectPage_component",isNightly:"ConnectPage_isNightly",connectWrapper:"ConnectPage_connectWrapper",image:"ConnectPage_image",title:"ConnectPage_title",toggleButton:"ConnectPage_toggleButton",noWallets:"ConnectPage_noWallets",noWalletsImage:"ConnectPage_noWalletsImage",noWalletsText:"ConnectPage_noWalletsText",createWallet:"ConnectPage_createWallet",walletsContainer:"ConnectPage_walletsContainer",titleWallet:"ConnectPage_titleWallet",cashbackApplyAll:"ConnectPage_cashbackApplyAll",list:"ConnectPage_list",listItem:"ConnectPage_listItem",enabledWallet:"ConnectPage_enabledWallet",bottom:"ConnectPage_bottom",infoText:"ConnectPage_infoText",errorMessage:"ConnectPage_errorMessage",pageTitle:"ConnectPage_pageTitle"};const s=n},99987:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(23645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".ConnectedWallet_card{display:flex;align-items:center;justify-content:flex-start;width:100%}.ConnectedWallet_card .ConnectedWallet_avatar{margin-right:8px;border-radius:4px;overflow:hidden;object-fit:cover;height:40px;width:40px}.ConnectedWallet_card .ConnectedWallet_icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center}.ConnectedWallet_card .ConnectedWallet_wrapper{display:flex;align-items:center;width:100%}.ConnectedWallet_card .ConnectedWallet_nameWrapper{display:flex;flex-flow:column;align-items:flex-start;justify-content:space-between;height:100%}.ConnectedWallet_card .ConnectedWallet_name{flex:1;text-align:left}.ConnectedWallet_card .ConnectedWallet_balance{font-weight:400}.ConnectedWallet_card .ConnectedWallet_checksum{color:#6b7384;margin-top:8px;font-size:14px}.ConnectedWallet_disabledReason{font-size:12px;font-weight:400;line-height:16px;letter-spacing:0.20000000298023224px;text-align:left;color:var(--text-error, #ff1351)}\n",""]),n.locals={card:"ConnectedWallet_card",avatar:"ConnectedWallet_avatar",icon:"ConnectedWallet_icon",wrapper:"ConnectedWallet_wrapper",nameWrapper:"ConnectedWallet_nameWrapper",name:"ConnectedWallet_name",balance:"ConnectedWallet_balance",checksum:"ConnectedWallet_checksum",disabledReason:"ConnectedWallet_disabledReason"};const s=n},96903:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(23645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".Layout_layout{width:480px;min-height:100vh;border-radius:2px;background-color:var(--yoroi-palette-gray-50);box-shadow:0 2px 5px 3px rgba(0,0,0,0.06);font-weight:400;margin:0 auto}@media screen and (min-width: 1441px){.Layout_layout{width:640px}}.Layout_header{height:56px;background:linear-gradient(30.09deg, #244abf 0%, #4760ff 176.73%);display:flex;align-items:center;padding:16px 32px}.Layout_header .Layout_menuIcon{cursor:pointer}.Layout_header .Layout_menu{margin:0 auto;padding-right:24px;color:#fff;display:flex}.Layout_header .Layout_menu svg{width:24px;height:24px}.Layout_header .Layout_menu .Layout_connectorLogoContainer{display:flex;align-items:center}.Layout_header .Layout_menu .Layout_connectorLogo{width:20px;height:20px;margin-left:10px}.Layout_header .Layout_menu .Layout_logo{display:flex;align-items:center;margin-left:12px}.Layout_header .Layout_menu .Layout_logo h3{font-size:16px;font-weight:500;letter-spacing:0;line-height:19px;text-transform:capitalize}.Layout_header .Layout_menu .Layout_poweredBy{font-size:8px;letter-spacing:0;line-height:9px}.Layout_header .Layout_setting{margin-left:65px}.Layout_content{position:relative}.Layout_badge{border-radius:16px;padding-left:8px;padding-right:8px;height:24px;line-height:24px}\n",""]),n.locals={layout:"Layout_layout",header:"Layout_header",menuIcon:"Layout_menuIcon",menu:"Layout_menu",connectorLogoContainer:"Layout_connectorLogoContainer",connectorLogo:"Layout_connectorLogo",logo:"Layout_logo",poweredBy:"Layout_poweredBy",setting:"Layout_setting",content:"Layout_content",badge:"Layout_badge"};const s=n},58763:()=>{},44709:()=>{}},he={};function fe(e){if(he[e])return he[e].exports;var t=he[e]={id:e,loaded:!1,exports:{}};return ge[e].call(t.exports,t,t.exports,fe),t.loaded=!0,t.exports}fe.m=ge,fe.c=he,fe.x=e=>{},fe.amdO={},fe.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return fe.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,fe.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"==typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"==typeof a.then)return a}var n=Object.create(null);fe.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>a[e]));return s.default=()=>a,fe.d(n,s),n},fe.d=(e,t)=>{for(var a in t)fe.o(t,a)&&!fe.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},fe.f={},fe.e=e=>Promise.all(Object.keys(fe.f).reduce(((t,a)=>(fe.f[a](e,t),t)),[])),fe.u=e=>e+"."+{748:"4a5f731c424ecfb83d63",2530:"791b81a91128855134af",2635:"7620191cb76bd2ba9070",3162:"3fe0fb9e0b75feaf5e91",4292:"b15b7cdfd1eec698e2f6",4351:"fc79d0d734f973ea0f9b",4388:"082c4f390ac3a281d6a2",5262:"789ac67e6611ea702234",5560:"ee04f6213ede2f204ed3",5573:"d6a6244de49c715fe2f4",6170:"28febcade35e752501bc",6256:"33c4c4eac55a2e5b6ca7",6336:"1a1eeb70d7867e015730",6452:"16b3295c5457c72ed067",6553:"92c05e159570cb78c43d",7196:"e9e301eeb7b0d3f6e23e",8066:"0ee1dc9e6da9f2d23c31",8533:"8f8ee50062e387505440"}[e]+".chunk.js",fe.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),fe.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),fe.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},r="yoroi:",fe.l=(e,t,n,s)=>{if(a[e])a[e].push(t);else{var o,i;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==r+n){o=c;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,fe.nc&&o.setAttribute("nonce",fe.nc),o.setAttribute("data-webpack",r+n),o.src=e),a[e]=[t];var u=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var n=a[e];if(delete a[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),i&&document.head.appendChild(o)}},fe.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},fe.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),fe.p="/js/",(()=>{var e={6875:0},t=[[96768,5845,3411,3557,1047,259,5786,5900],[66528,5845,3411,3557,1047,259,5786,5900]];fe.f.j=(t,a)=>{var r=fe.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var n=new Promise(((a,n)=>{r=e[t]=[a,n]}));a.push(r[2]=n);var s=fe.p+fe.u(t),o=new Error;fe.l(s,(a=>{if(fe.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}}),"chunk-"+t,t)}};var a=e=>{},r=(r,n)=>{for(var s,o,[i,l,d,c]=n,u=0,p=[];u<i.length;u++)o=i[u],fe.o(e,o)&&e[o]&&p.push(e[o][0]),e[o]=0;for(s in l)fe.o(l,s)&&(fe.m[s]=l[s]);for(d&&d(fe),r&&r(n);p.length;)p.shift()();return c&&t.push.apply(t,c),a()},n=self.webpackChunkyoroi=self.webpackChunkyoroi||[];function s(){for(var a,r=0;r<t.length;r++){for(var n=t[r],s=!0,o=1;o<n.length;o++){var i=n[o];0!==e[i]&&(s=!1)}s&&(t.splice(r--,1),a=fe(fe.s=n[0]))}return 0===t.length&&(fe.x(),fe.x=e=>{}),a}n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var o=fe.x;fe.x=()=>(fe.x=o||(e=>{}),(a=s)())})(),ce={},ue={1416:function(){return{"./cardano_wallet_browser.js":{__wbindgen_string_new:function(e,t){return void 0===n&&(n=fe.c[82123].exports),n.__wbindgen_string_new(e,t)},__wbindgen_object_drop_ref:function(e){return void 0===s&&(s=fe.c[82123].exports),s.__wbindgen_object_drop_ref(e)},__wbindgen_json_parse:function(e,t){return void 0===o&&(o=fe.c[82123].exports),o.__wbindgen_json_parse(e,t)},__wbindgen_json_serialize:function(e,t){return void 0===i&&(i=fe.c[82123].exports),i.__wbindgen_json_serialize(e,t)},__wbindgen_throw:function(e,t){return void 0===l&&(l=fe.c[82123].exports),l.__wbindgen_throw(e,t)},__wbindgen_rethrow:function(e){return void 0===d&&(d=fe.c[82123].exports),d.__wbindgen_rethrow(e)}}}},84747:function(){return{"./cardano_serialization_lib_bg.js":{__wbindgen_number_new:function(e){return void 0===c&&(c=fe.c[87019].exports),c.pT7(e)},__wbindgen_object_drop_ref:function(e){return void 0===u&&(u=fe.c[87019].exports),u.ug$(e)},__wbindgen_string_new:function(e,t){return void 0===p&&(p=fe.c[87019].exports),p.h4u(e,t)},__wbindgen_error_new:function(e,t){return void 0===g&&(g=fe.c[87019].exports),g.hdV(e,t)},__wbindgen_string_get:function(e,t){return void 0===h&&(h=fe.c[87019].exports),h.qtq(e,t)},__wbindgen_object_clone_ref:function(e){return void 0===f&&(f=fe.c[87019].exports),f.m_1(e)},__wbindgen_is_object:function(e){return void 0===w&&(w=fe.c[87019].exports),w.WlW(e)},__wbg_String_91fba7ded13ba54c:function(e,t){return void 0===m&&(m=fe.c[87019].exports),m.RVh(e,t)},__wbg_set_20cbc34131e76824:function(e,t,a){return void 0===y&&(y=fe.c[87019].exports),y.Wl7(e,t,a)},__wbg_crypto_1d1f22824a6a080c:function(e){return void 0===x&&(x=fe.c[87019].exports),x.q4o(e)},__wbg_process_4a72847cc503995b:function(e){return void 0===_&&(_=fe.c[87019].exports),_.eoR(e)},__wbg_versions_f686565e586dd935:function(e){return void 0===v&&(v=fe.c[87019].exports),v.uYV(e)},__wbg_node_104a2ff8d6ea03a2:function(e){return void 0===A&&(A=fe.c[87019].exports),A.qxi(e)},__wbindgen_is_string:function(e){return void 0===b&&(b=fe.c[87019].exports),b.eYF(e)},__wbg_require_cca90b1a94a0255b:function(){return void 0===E&&(E=fe.c[87019].exports),E.OQ_()},__wbg_msCrypto_eb05e62b530a1508:function(e){return void 0===T&&(T=fe.c[87019].exports),T.hcz(e)},__wbg_getRandomValues_3aa56aa6edec874c:function(e,t){return void 0===C&&(C=fe.c[87019].exports),C.Iui(e,t)},__wbg_randomFillSync_5c9c955aa56b6049:function(e,t){return void 0===I&&(I=fe.c[87019].exports),I.oH7(e,t)},__wbg_new_16b304a2cfa7ff4a:function(){return void 0===k&&(k=fe.c[87019].exports),k.G26()},__wbindgen_is_function:function(e){return void 0===D&&(D=fe.c[87019].exports),D.o$X(e)},__wbg_newnoargs_e258087cd0daa0ea:function(e,t){return void 0===S&&(S=fe.c[87019].exports),S.eh8(e,t)},__wbg_new_d9bc3a0147634640:function(){return void 0===M&&(M=fe.c[87019].exports),M.oS$()},__wbg_call_27c0f87801dedf93:function(e,t){return void 0===R&&(R=fe.c[87019].exports),R.SpE(e,t)},__wbg_new_72fb9a18b5ae2624:function(){return void 0===B&&(B=fe.c[87019].exports),B.Rx9()},__wbg_self_ce0dbfc45cf2f5be:function(){return void 0===W&&(W=fe.c[87019].exports),W.m75()},__wbg_window_c6fb939a7f436783:function(){return void 0===P&&(P=fe.c[87019].exports),P.YYI()},__wbg_globalThis_d1e6af4856ba331b:function(){return void 0===N&&(N=fe.c[87019].exports),N.Bgs()},__wbg_global_207b558942527489:function(){return void 0===F&&(F=fe.c[87019].exports),F.nDs()},__wbindgen_is_undefined:function(e){return void 0===O&&(O=fe.c[87019].exports),O.XP4(e)},__wbg_set_d4638f722068f043:function(e,t,a){return void 0===L&&(L=fe.c[87019].exports),L.CFs(e,t,a)},__wbg_call_b3ca7c6051f9bec1:function(e,t,a){return void 0===H&&(H=fe.c[87019].exports),H.EIi(e,t,a)},__wbg_set_8417257aaedc936b:function(e,t,a){return void 0===V&&(V=fe.c[87019].exports),V.MZW(e,t,a)},__wbg_buffer_12d079cc21e14bdb:function(e){return void 0===U&&(U=fe.c[87019].exports),U._D(e)},__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb:function(e,t,a){return void 0===G&&(G=fe.c[87019].exports),G.a6l(e,t,a)},__wbg_new_63b92bc8671ed464:function(e){return void 0===j&&(j=fe.c[87019].exports),j.KX$(e)},__wbg_set_a47bac70306a19a7:function(e,t,a){return void 0===Z&&(Z=fe.c[87019].exports),Z.fH$(e,t,a)},__wbg_newwithlength_e9b4878cebadb3d3:function(e){return void 0===z&&(z=fe.c[87019].exports),z.qlr(e)},__wbg_subarray_a1f73cd4b5b42fe1:function(e,t,a){return void 0===K&&(K=fe.c[87019].exports),K.kW0(e,t,a)},__wbg_new_d87f272aec784ec0:function(e,t){return void 0===Y&&(Y=fe.c[87019].exports),Y.neC(e,t)},__wbg_call_eae29933372a39be:function(e,t){return void 0===q&&(q=fe.c[87019].exports),q.UZK(e,t)},__wbindgen_jsval_eq:function(e,t){return void 0===$&&($=fe.c[87019].exports),$.YqC(e,t)},__wbg_self_e0b3266d2d9eba1a:function(e){return void 0===J&&(J=fe.c[87019].exports),J.NRn(e)},__wbg_require_0993fe224bf8e202:function(e,t){return void 0===X&&(X=fe.c[87019].exports),X.dVC(e,t)},__wbg_crypto_e95a6e54c5c2e37f:function(e){return void 0===Q&&(Q=fe.c[87019].exports),Q.yfN(e)},__wbg_getRandomValues_dc67302a7bd1aec5:function(e){return void 0===ee&&(ee=fe.c[87019].exports),ee.j8U(e)},__wbg_randomFillSync_dd2297de5917c74e:function(e,t,a){return void 0===te&&(te=fe.c[87019].exports),te.SaM(e,t,a)},__wbg_getRandomValues_02639197c8166a96:function(e,t,a){return void 0===ae&&(ae=fe.c[87019].exports),ae.ZU4(e,t,a)},__wbindgen_debug_string:function(e,t){return void 0===re&&(re=fe.c[87019].exports),re.fYP(e,t)},__wbindgen_throw:function(e,t){return void 0===ne&&(ne=fe.c[87019].exports),ne.Or8(e,t)},__wbindgen_memory:function(){return void 0===se&&(se=fe.c[87019].exports),se.oHO()}}}},24040:function(){return{"./cardano_message_signing_bg.js":{__wbindgen_object_drop_ref:function(e){return void 0===oe&&(oe=fe.c[78263].exports),oe.ug(e)},__wbindgen_string_new:function(e,t){return void 0===ie&&(ie=fe.c[78263].exports),ie.h4(e,t)},__wbindgen_debug_string:function(e,t){return void 0===le&&(le=fe.c[78263].exports),le.fY(e,t)},__wbindgen_throw:function(e,t){return void 0===de&&(de=fe.c[78263].exports),de.Or(e,t)}}}}},pe={4351:[84747],4388:[1416],5573:[24040]},fe.w={},fe.f.wasm=function(e,t){(pe[e]||[]).forEach((function(a,r){var n=ce[a];if(n)t.push(n);else{var s,o=ue[a](),i=fetch(fe.p+""+{4351:{84747:"4ce8b395b65f2aaebee6"},4388:{1416:"775accd33a430df30a9c"},5573:{24040:"d64838ce1dd37e274495"}}[e][a]+".module.wasm");s=o instanceof Promise&&"function"==typeof WebAssembly.compileStreaming?Promise.all([WebAssembly.compileStreaming(i),o]).then((function(e){return WebAssembly.instantiate(e[0],e[1])})):"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(i,o):i.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,o)})),t.push(ce[a]=s.then((function(e){return fe.w[a]=(e.instance||e).exports})))}}))},fe.x()})();