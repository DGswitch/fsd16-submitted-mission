(self.webpackChunkyoroi=self.webpackChunkyoroi||[]).push([[6322],{54903:(e,t,a)=>{e.exports=a(88906)},96322:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>oe});var s=a(54903),r=a.n(s),i=a(66419),n=a.n(i),o=a(2991),l=a.n(o),c=a(39969),d=a.n(c),u=a(59340),h=a.n(u),g=a(67294),m=a(93379),p=a.n(m),f=a(21065);p()(f.Z,{insert:"head",singleton:!1});const w=f.Z.locals||{};var b=a(259),x=a(43960),y=a(15434),k=a(46957),_=a(75941),M=a(5227),v=a(65075),S=a(71744),C=a(38043),j=a(38079),A=a(60274),T=a(12565),Z=a(36094),E=a(71653),P=a(86335),N=a(23972),W=a(99226),I=a(2734),D=a(4380),O=a(22715),R=a(28082),B=a(68469),Y=a(33913),H=a(21131),L=a(9838),z=a(63139),G=a(99095),U=a(84174),K=a(90649),F=a(87351),q=a(79562),Q=a(20847),J=a(19809),V=a(90948),X=a(48521);const $=(0,G.defineMessages)({disclaimer:{id:"cashback.disclaimer",defaultMessage:'!!!By clicking "Proceed," you acknowledge that you will be redirected to a third-party service provider offering cashback services in ADA currency. You may be required to agree to the terms, conditions, and privacy policies of the third-party provider to complete the transaction. Yoroi Wallet does not control, endorse, or assume responsibility for the content, security, policies, or services provided by the third party.'},disclaimerNote:{id:"cashback.disclaimer.note",defaultMessage:"!!!Please note:"},disclaimerNote1:{id:"cashback.disclaimer.note.1",defaultMessage:"!!!1. Yoroi Wallet is not liable for any losses, delays, or errors that may occur while using the third-party service."},disclaimerNote2:{id:"cashback.disclaimer.note.2",defaultMessage:"!!!2. Transactions may be subject to restrictions based on your geographic location, applicable laws, financial institution policies, or the service provider's limitations."},disclaimerNote3:{id:"cashback.disclaimer.note.3",defaultMessage:"!!!3. Ensure you review and understand the third party's terms, as your interactions are solely governed by their agreements."},disclaimerNote4:{id:"cashback.disclaimer.note.4",defaultMessage:"!!!4. Yoroi Wallet does not collect or store any personal or financial data submitted through the third-party platform."},disclaimerAgree:{id:"cashback.disclaimer.agree",defaultMessage:"!!!I understand this disclaimer."}}),ee=(0,V.ZP)(N.Z)((({theme:e})=>({fontSize:"16px",lineHeight:"24px",color:e.palette.ds.text_gray_medium}))),te=(0,V.ZP)(N.Z)((({theme:e})=>({fontSize:"16px",lineHeight:"24px",fontWeight:500,color:e.palette.ds.text_gray_medium}))),ae=(0,G.injectIntl)((e=>{const{intl:t}=e,[a,s]=(0,g.useState)(!1);return(0,X.jsxs)(Z.ZP,{title:t.formatMessage(C.default.disclaimer),dialogActions:[{label:t.formatMessage(C.default.proceed),onClick:e.onProceed,disabled:!a,primary:!0}],children:[(0,X.jsx)(ee,{children:t.formatMessage($.disclaimer)}),(0,X.jsx)(ee,{children:" "}),(0,X.jsx)(te,{children:t.formatMessage($.disclaimerNote)}),(0,X.jsx)(ee,{children:t.formatMessage($.disclaimerNote1)}),(0,X.jsx)(ee,{children:t.formatMessage($.disclaimerNote2)}),(0,X.jsx)(ee,{children:t.formatMessage($.disclaimerNote3)}),(0,X.jsx)(ee,{children:t.formatMessage($.disclaimerNote4)}),(0,X.jsx)(ee,{children:" "}),(0,X.jsx)(Q.Z,{sx:{marginLeft:"0px",color:"ds.text_gray_medium"},control:(0,X.jsx)(J.Z,{checked:a,onChange:e=>s(e.target.checked)}),label:t.formatMessage($.disclaimerAgree)})]})})),se=(0,G.defineMessages)({claim:{id:"cashback.claim.dialog.title",defaultMessage:"!!!CLAIM CASHBACK"},passwordClaimInstruction:{id:"cashback.claim.dialog.instruction.password",defaultMessage:"!!!Enter your password to claim cashback rewards."},hardwardClaimInstruction:{id:"cashback.claim.dialog.instruction.hardware",defaultMessage:"!!!Confirm on your hardware wallet to claim cashback rewards."},message:{id:"cashback.claim.dialog.message.label",defaultMessage:"!!!Message"},notCurrentText:{id:"cashback.not.current.warning.text",defaultMessage:"!!!Your cashback rewards are currently linked to another wallet. To claim your ADA cashback, either switch to the rewards wallet or change the rewards wallet to the one you're using now. You can always access settings at anytime to change your cashback wallet and make claiming rewards relevant for you."},currentWalletLabel:{id:"cashback.not.current.warning.current",defaultMessage:"!!!Current rewards wallet"},warning:{id:"cashback.not.current.warning.title",defaultMessage:"!!!WARNING"},useThis:{id:"cashback.not.current.warning.use.this",defaultMessage:"!!!use this wallet"},keep:{id:"cashback.not.current.warning.keep",defaultMessage:"!!!keep current wallet"},chooseTitle:{id:"cashback.not.current.warning.title.choose",defaultMessage:"!!!wrong wallet"},setThis:{id:"cashback.not.current.warning.button.set.this",defaultMessage:"!!!set this wallet"},switch:{id:"cashback.not.current.warning.button.switch",defaultMessage:"!!!switch wallet"},chooseText1:{id:"cashback.not.current.warning.text.choose.1",defaultMessage:"!!!Your cashback rewards are currently linked to another wallet."},chooseText2:{id:"cashback.not.current.warning.text.choose.2",defaultMessage:"!!!Switch wallet to access your rewards or set this wallet as your cashback wallet."},setCurrentTitle:{id:"cashback.not.current.warning.title.set.current",defaultMessage:"!!!Set my Current Wallet as my Cashback Wallet"},no:{id:"cashback.not.current.warning.button.no",defaultMessage:"!!!no"},yes:{id:"cashback.not.current.warning.button.yes",defaultMessage:"!!!yes"},switchText:{id:"cashback.not.current.warning.text.switch",defaultMessage:"!!!You will no longer be able to claim rewards linked to your previous cashback wallet until you link it again."}}),re=(0,G.injectIntl)((0,b.observer)((e=>{const{intl:t}=e,[a,s]=(0,g.useState)("switchOrSet");return"switchOrSet"===a?(0,X.jsxs)(Z.ZP,{title:t.formatMessage(se.chooseTitle),dialogActions:[{label:t.formatMessage(se.setThis),onClick:()=>{s("confirmSet")}},{label:t.formatMessage(se.switch),primary:!0,onClick:e.onSwitchToCashbackWallet}],children:[(0,X.jsx)(N.Z,{sx:{fontSize:"16px",lineHeight:"24px"},color:"ds.text_gray_medium",children:t.formatMessage(se.chooseText1)}),(0,X.jsx)(N.Z,{sx:{fontSize:"16px",lineHeight:"24px"},color:"ds.text_gray_medium",children:t.formatMessage(se.chooseText2)})]}):(0,X.jsxs)(Z.ZP,{title:t.formatMessage(se.setCurrentTitle),dialogActions:[{label:t.formatMessage(se.no),onClick:()=>{s("switchOrSet")}},{label:t.formatMessage(se.yes),primary:!0,onClick:e.onSetCurrentAsCashbackWallet}],children:[(0,X.jsx)(N.Z,{sx:{fontSize:"16px",lineHeight:"24px"},color:"ds.text_gray_medium",children:t.formatMessage(se.switchText)}),(0,X.jsx)(N.Z,{sx:{fontSize:"12px",fontHeight:"16px",lineHeight:"16px"},color:"ds.text_gray_medium",children:t.formatMessage(se.currentWalletLabel)}),(0,X.jsxs)(W.Z,{sx:{display:"flex",flexDirection:"row",overflow:"hidden"},children:[(0,F.Qc)(e.shownCashbackWallet.plate)[1],(0,X.jsx)(N.Z,{sx:{fontWeight:"500px",fontSize:"16px",lineHeight:"24px",marginTop:"auto",marginBottom:"auto",marginLeft:"1em"},color:"ds.text_gray_medium",children:e.shownCashbackWallet.plate.TextPart})]})]})}))),ie=_.Z.isDev()||_.Z.isNightly(),ne=(0,b.observer)((e=>{const{stores:t,intl:a}=e,s=t.wallets.selected;if(!s)throw Error("no publicDeriver");const i=(0,I.Z)(),o=(0,g.useRef)(null),[c,u]=(0,g.useState)(""),[m,p]=(0,g.useState)(!1),[f,b]=(0,g.useState)(""),[G,F]=(0,g.useState)(""),[Q,J]=(0,g.useState)(""),[V,$]=(0,g.useState)(!1),[ee,te]=(0,g.useState)("#000000fa"),ne=t.profile.getBringSandboxRequest,oe=(0,g.useMemo)((()=>ie&&ne.result),[ne.result]),le=(0,g.useCallback)((async()=>{const e=oe?{baseUrl:"https://sandbox-api.bringweb3.io/v1/extension/",identifier:"G1TjqDrfxS8jhRYz15Sg2fMGsvZpdFF8IWgKe0g8",apiEndpoint:"sandbox"}:{baseUrl:"https://api.bringweb3.io/v1/extension/",identifier:"G1TjqDrfxS8jhRYz15Sg2fMGsvZpdFF8IWgKe0g8",apiEndpoint:"prod"};try{const a=t.wallets.selected;if(!a)throw Error("no publicDeriver");const s=P.RustModule.WalletV4.Address.from_hex(a.externalAddressesByType[j.dq.CARDANO_BASE][0].address).to_bech32(),r=await fetch(`${e.baseUrl}check/portal`,{method:"POST",headers:{"x-api-key":e.identifier,"Content-Type":"application/json"},body:h()({walletAddress:s})}),n=await r.json(),o=new(d())(n.iframeUrl);o.searchParams.set("token",n.token),o.searchParams.set("theme",i.name.split("-")[0]),u(o.href)}catch(e){console.error("Error fetching data:",e)}}),[t.wallets.selected,oe]);function ce(e){var t;return l()(t=n()(e)).call(t,(e=>{var t;return r()(t=e.charCodeAt(0).toString(16)).call(t,2,"0")})).join("")}const de=(0,g.useCallback)((async(e,r)=>{const{address:i,addressing:n}=s.externalAddressesByType[j.dq.CARDANO_BASE][0];try{var l;let a;if("mnemonic"===s.type){const t=await(0,T.A)(s.publicDeriverId);try{a=await(0,A.mO)(t,r,i,ce(e))}catch(e){if(e instanceof Y.UZ)throw new H.IncorrectWalletPasswordError;throw e}}else{if("ledger"!==s.type)throw new Error("unsupported wallet type");{const r=new R.L({locale:t.profile.currentLocale});try{const t=(0,U.getNetworkById)(s.networkId).BaseConfig[0],i=ce(e),o=!0,{signatureHex:l,signingPublicKeyHex:c,addressFieldHex:d}=await r.signMessage({serial:null,params:{preferHexDisplay:!1,messageHex:i,signingPath:n.path,hashPayload:o,addressFieldType:B.MessageAddressFieldType.ADDRESS,address:{type:B.AddressType.BASE_PAYMENT_KEY_STAKE_KEY,params:{spendingPath:n.path,stakingPath:s.stakingAddressing.addressing.path}},network:{protocolMagic:t.ByronNetworkId,networkId:Number(t.ChainNetworkId)}}});a=await(0,A.vX)(d,l,i,c,o)}catch(e){throw new L.Z(e)}}}null===(l=o.current)||void 0===l||l.contentWindow.postMessage({to:"bringweb3",action:"SIGNATURE",...a,message:e,address:i},"*"),$(!1),b("")}catch(e){F(e instanceof z.default?a.formatMessage(e):e.message)}}),[]),ue=(0,g.useCallback)((async e=>{const t=new(d())(c).origin;if(e.origin!==t)return;const a=e.data;"SIGN_MESSAGE"===a.action?(J(a.messageToSign),$(!0)):"POPUP_OPENED"===a.action?(p(!0),te(a.overlayBgColor||ee)):"POPUP_CLOSED"===a.action&&p(!1)}),[c,ee]);(0,g.useEffect)((()=>(_.Z.isLight&&t.app.goToRoute({route:M.ROUTES.WALLETS.ROOT}),c||le(),window.addEventListener("message",ue),()=>{window.removeEventListener("message",ue)})),[c,le,ue]);const[he,ge]=(0,g.useState)(null);(0,g.useEffect)((()=>{t.wallets.getCashbackWalletRequest.execute().then((e=>(e&&e!==t.wallets.selected&&(ge(e),p(!0)),"nonsense"))).catch(console.error)}),[]);const[me,pe]=(0,g.useState)(!1);(0,g.useEffect)((()=>{(new q.default).isDisclaimerShown("cashback").then((e=>(e||(pe(!0),p(!0)),"nonsense"))).catch(console.error)}),[]);const fe=(0,g.useCallback)((()=>{var e;null===(e=o.current)||void 0===e||e.contentWindow.postMessage({to:"bringweb3",action:"CLOSE_POPUP"},"*"),p(!1)}),[]),we=(0,g.useCallback)((()=>{var e;null===(e=o.current)||void 0===e||e.contentWindow.postMessage({to:"bringweb3",action:"ABORT_SIGN_MESSAGE"},"*"),$(!1),b(""),F("")}),[]),be=(0,X.jsx)(k.Z,{stores:t});return(0,X.jsx)(x.Z,{banner:(0,X.jsx)(y.Z,{stores:t}),sidebar:be,navbar:(0,X.jsx)(v.default,{stores:t,title:(0,X.jsx)(S.default,{title:a.formatMessage(C.default.sidebarCashback)+(oe?" (sandbox)":"")})}),children:(0,X.jsxs)(g.Suspense,{fallback:null,children:[me&&(0,X.jsx)(ae,{onProceed:()=>{pe(!1),he||p(!1),(new q.default).setShownDisclaimer("cashback")}}),he&&!me&&(0,X.jsx)(re,{shownCashbackWallet:he,onSetCurrentAsCashbackWallet:()=>{t.wallets.setCashbackWallet((0,K.forceNonNull)(t.wallets.selected).publicDeriverId),ge(null),p(!1)},onSwitchToCashbackWallet:()=>{t.wallets.setActiveWallet({publicDeriverId:he.publicDeriverId})}}),V?(0,X.jsx)(Z.ZP,{title:a.formatMessage(se.claim),closeOnOverlayClick:!0,closeButton:(0,X.jsx)(E.Z,{}),onClose:we,dialogActions:[{label:a.formatMessage(C.default.confirm),primary:!0,disabled:"mnemonic"===s.type&&!f,onClick:()=>de(Q,f)}],children:(0,X.jsxs)(W.Z,{children:[(0,X.jsx)(N.Z,{sx:{marginBottom:"16px",color:"light-theme"===i.name?"#242838":"#E1E6F5"},children:a.formatMessage("mnemonic"===s.type?se.passwordClaimInstruction:se.hardwardClaimInstruction)}),(0,X.jsx)(N.Z,{sx:{color:"light-theme"===i.name?"#6B7384":"#7C85A3"},children:a.formatMessage(se.message)}),(0,X.jsx)(D.Z,{sx:{whiteSpace:"pre-wrap",wordBreak:"break-word",color:"light-theme"===i.name?"#242838":"#E1E6F5"},children:Q}),"mnemonic"===s.type&&(0,X.jsx)(O.Z,{className:"walletPassword",value:f,label:"Password",type:"password",onChange:e=>{b(e.target.value)},error:!!G,disabled:!1}),(0,X.jsx)(N.Z,{color:"ds.text_error",children:G})]})}):null,m?(0,X.jsx)("div",{className:w.iframe_overlay,style:{background:ee},onClick:fe}):null,c&&(0,X.jsx)("iframe",{title:"cashback",ref:o,id:"bringweb3",className:w.iframe,src:c,style:{verticalAlign:"bottom"},width:"100%",height:"100%"})]})})})),oe=(0,G.injectIntl)(ne)},51337:(e,t,a)=>{"use strict";var s=a(7046),r=a(49335),i=String.prototype;e.exports=function(e){var t=e.padStart;return"string"==typeof e||e===i||s(i,e)&&t===i.padStart?r:t}},49335:(e,t,a)=>{"use strict";a(92075);var s=a(13119);e.exports=s("String","padStart")},4887:(e,t,a)=>{"use strict";var s=a(2861);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(s)},92075:(e,t,a)=>{"use strict";var s=a(76887),r=a(6930).start;s({target:"String",proto:!0,forced:a(4887)},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},88906:(e,t,a)=>{"use strict";var s=a(51337);e.exports=s},21065:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(23645),r=a.n(s)()((function(e){return e[1]}));r.push([e.id,".styles-module__overlay___NUy9j{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: fixed;\n    inset: 0;\n    background: #00000031;\n    z-index: 12;\n}\n\n.styles-module__popup___ra0gG{\n    position: relative;\n    display: flex;\n    gap: 8px;\n    flex-direction: column;\n    align-items: center;\n    height: 400px;\n    width: 480px;\n    background: white;\n    border-radius: 8px;\n    padding: 16px;\n}\n\n.styles-module__close_btn___sJ-Rb{\n    position: absolute;\n    top: 16px;\n    right: 16px;\n}\n\n.styles-module__form___OeKQx{\n    display: flex;\n    flex-direction: column;\n}\n\n.styles-module__iframe_overlay___YRknZ{\n    position: fixed;\n    inset: 0;\n    z-index: 10;\n}\n\n.styles-module__iframe___KT8Ak{\n    position: relative;\n    z-index: 11;\n}",""]),r.locals={overlay:"styles-module__overlay___NUy9j",popup:"styles-module__popup___ra0gG",close_btn:"styles-module__close_btn___sJ-Rb",form:"styles-module__form___OeKQx",iframe_overlay:"styles-module__iframe_overlay___YRknZ",iframe:"styles-module__iframe___KT8Ak"};const i=r}}]);