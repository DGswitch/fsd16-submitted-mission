(self.webpackChunkyoroi=self.webpackChunkyoroi||[]).push([[5556],{70988:(e,t,s)=>{"use strict";s.d(t,{Z:()=>v});var r,o,n=s(54103),i=s.n(n),a=s(87672),l=s.n(a),p=s(67294),c=s(259),d=s(99095),h=s(52298),u=s(11634),m=s.n(u),f=s(38043),x=s(52974),g=s(94535),b=s(99226),w=s(23972),y=s(48521);let v=(0,c.observer)((o=class extends p.Component{constructor(...e){super(...e),l()(this,"form",new h.Z({fields:{[this.props.fieldName]:{type:"password",onChange:this.props.onChange,label:this.props.placeholder,placeholder:"",value:this.props.initValues||"",validators:[({field:e})=>[this.props.passwordMatches(e.value),this.context.intl.formatMessage(f.default.invalidRepeatPassword)],({field:e})=>[this.props.allowEmptyInput||e.value.length>=0,this.context.intl.formatMessage(f.default.fieldIsRequired)],({field:e})=>[this.props.validCheck(e.value),this.context.intl.formatMessage(f.default.invalidWalletPassword)]]}}},{options:{validateOnChange:!0,validationDebounceWait:x.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:m()()}}))}componentDidMount(){this.props.setForm(this.form)}render(){const{form:e}=this,t=e.$(this.props.fieldName);return(0,y.jsxs)(b.Z,{children:[(0,y.jsx)(w.Z,{variant:"body1",color:"ds.text_gray_medium",children:this.props.disclaimer}),(0,y.jsx)(g.Z,{className:this.props.fieldName,...i()(t).call(t),disabled:this.props.disabled,error:t.error,done:this.props.done})]})}},l()(o,"defaultProps",{initValues:void 0,disclaimer:void 0,onChange:void 0,done:void 0}),l()(o,"contextTypes",{intl:d.intlShape.isRequired}),r=o))||r},15556:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Je});var r=s(87672),o=s.n(r),n=s(67294),i=s(259),a=s(52065),l=s(28336),p=s(99095),c=s(38043),d=s(21023),h=s(23972),u=s(28092),m=s(93379),f=s.n(m),x=s(30680);f()(x.Z,{insert:"head",singleton:!1});const g=x.Z.locals||{};var b,w,y=s(94184),v=s.n(y),T=s(48521);let P=(0,i.observer)((w=class extends n.Component{constructor(...e){super(...e),o()(this,"makeDefaultChild",(()=>(0,T.jsx)(u.r,{width:"14",height:"14"})))}render(){const{toolTip:e,children:t}=this.props,s=null==t?this.makeDefaultChild():t;return(0,T.jsx)("div",{className:v()([g.component,!0===this.props.isPoolAvatar?g.PoolAvatarTooltip:null]),children:(0,T.jsx)(d.Z,{title:(0,T.jsx)(h.Z,{component:"div",variant:"body3",children:e}),placement:"top",children:(0,T.jsx)("span",{className:g.infoIcon,children:s})})})}},o()(w,"defaultProps",{children:void 0,isPoolAvatar:!1,placementTooltip:"top"}),b=w))||b;var C=s(90948),_=s(99226);const S=s.p+"94b83a21c73ce95566d2b8f4a32b5247.svg";var k,M;const A=(0,p.defineMessages)({yoroiPaperLabel:{id:"yoroiTransfer.start.instructions.legacy-yoroiPaper",defaultMessage:"!!!Legacy Yoroi paper wallet"}}),E=(0,C.ZP)(_.Z)((({theme:e})=>({backgroundImage:e.palette.ds.bg_gradient_1,"&:hover":{backgroundImage:e.palette.ds.bg_gradient_2}}))),I=(0,C.ZP)(_.Z)((({theme:e})=>({"& svg":{width:"20px",height:"20px","& g":{fill:e.palette.ds.el_gray_medium}}})));let R=(0,i.observer)((M=class extends n.Component{render(){const{intl:e}=this.context;return(0,T.jsx)(_.Z,{display:"flex",children:(0,T.jsx)(E,{component:"button",onClick:this.props.onByron,borderRadius:"8px",width:"312px",height:"475px",children:(0,T.jsxs)(_.Z,{padding:"24px",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"flex-end",height:"100%",children:[(0,T.jsx)(_.Z,{marginBottom:"60px",children:(0,T.jsx)("img",{src:S,alt:e.formatMessage(A.yoroiPaperLabel)})}),(0,T.jsxs)(I,{paddingTop:"32px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",children:[(0,T.jsx)(h.Z,{color:"ds.text_gray_max",variant:"h4",fontWeight:500,textAlign:"center",children:e.formatMessage(A.yoroiPaperLabel)}),(0,T.jsx)(P,{toolTip:(0,T.jsx)(_.Z,{children:(0,T.jsx)(h.Z,{color:"ds.gray_min",children:e.formatMessage(c.default.restoreByronEraWalletDescription)})})})]}),(0,T.jsx)(h.Z,{color:"ds.text_gray_low",children:"2017-2020"})]})})})}},o()(M,"contextTypes",{intl:p.intlShape.isRequired}),k=M))||k;var j,F,Z=s(39329),D=s(73891);const N=(0,p.defineMessages)({instruction:{id:"wallet.transfer.instruction",defaultMessage:"!!!Any {ticker} claimed will be transferred to your currently selected wallet"},subInstruction:{id:"wallet.transfer.subInstruction",defaultMessage:"!!!Learn more about Byron and Shelley eras and how to claim ADA on our"},faqAbbreviation:{id:"settings.support.faq.abbreviation",defaultMessage:"!!!FAQ"}});let O=(0,i.observer)((F=class extends n.Component{render(){const{intl:e}=this.context,t=(0,T.jsx)(D.Z,{href:e.formatMessage(c.default.faqLinkUrl),onClick:e=>(0,Z.ee)(e),id:"settings:support-faq-link",children:e.formatMessage(N.faqAbbreviation)});return(0,T.jsx)(_.Z,{height:"100%",children:(0,T.jsxs)(_.Z,{"min-height":"100%",display:"flex",flexDirection:"column",alignItems:"center",children:[(0,T.jsxs)(_.Z,{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"40px",children:[(0,T.jsx)(h.Z,{variant:"body1",fontWeight:500,color:"ds.text_gray_medium",children:e.formatMessage(N.instruction,{ticker:this.props.ticker})}),(0,T.jsxs)(h.Z,{variant:"body1",color:"ds.text_gray_medium",children:[e.formatMessage(N.subInstruction,{ticker:this.props.ticker}),"Â ",t]})]}),(0,T.jsx)(R,{onByron:this.props.onByron})]})})}},o()(F,"contextTypes",{intl:p.intlShape.isRequired}),j=F))||j;var L,B,W=s(33032),q=s.n(W),U=s(93476),Y=s.n(U),V=s(72913),z=s(23496),G=s(34074),H=s.n(G),K=s(89400),X=s.n(K),$=s(5838),Q=s.n($),J=s(89749),ee=s.n(J),te=(s(18293),s(96486)),se=s(22188),re=s(52298),oe=s(54103),ne=s.n(oe),ie=s(11634),ae=s.n(ie),le=s(52974),pe=s(11949);let ce=(0,i.observer)((B=class extends n.Component{constructor(...e){super(...e),o()(this,"form",new re.Z({fields:{recoveryPhrase:{label:this.context.intl.formatMessage(c.default.recoveryPhraseInputLabel),placeholder:"",value:[],validators:[({field:e})=>{const t=(0,te.join)(e.value," ");if(""===t)return[!1,this.context.intl.formatMessage(c.default.fieldIsRequired)];if(null!=this.props.mnemonicLength){const t=this.props.mnemonicLength-e.value.length;if(t>0)return[!1,this.context.intl.formatMessage(c.default.shortRecoveryPhrase,{number:t})]}return[this.props.mnemonicValidator(t),this.context.intl.formatMessage(c.default.invalidRecoveryPhrase)]}]}}},{options:{validateOnChange:!0,validationDebounceWait:le.Z.forms.FORM_VALIDATION_DEBOUNCE_WAIT},plugins:{vjf:ae()()}}))}componentDidMount(){this.props.setForm(this.form)}render(){const{intl:e}=this.context,{form:t}=this,{validWords:s,mnemonicLength:r}=this.props,o=t.$("recoveryPhrase");return(0,T.jsx)(pe.Z,{options:s,maxSelections:null!=r?r:le.Z.wallets.MAX_RECOVERY_PHRASE_WORD_COUNT,...ne()(o).call(o),done:o.isValid,error:o.error,maxVisibleOptions:5,noResultsMessage:e.formatMessage(c.default.recoveryPhraseNoResults),chipProps:{sx:{bgcolor:"ds.primary_100",color:"ds.text_primary_medium",":hover":{bgcolor:"ds.primary_200",color:"ds.text_primary_max"}}}})}},o()(B,"contextTypes",{intl:p.intlShape.isRequired}),L=B))||L;var de,he,ue=s(10944),me=s(70988);let fe=(0,i.observer)((he=class extends n.Component{render(){return(0,T.jsx)(me.Z,{setForm:this.props.setForm,disabled:!1,passwordMatches:this.props.passwordMatches,fieldName:"paperPassword",validCheck:e=>!this.props.includeLengthCheck||(0,ue.ZP)(e),placeholder:this.context.intl.formatMessage(c.default.paperPasswordLabel),allowEmptyInput:!1,initValues:this.props.initValues,disclaimer:this.context.intl.formatMessage(c.default.passwordDisclaimer)})}},o()(he,"defaultProps",{initValues:void 0}),o()(he,"contextTypes",{intl:p.intlShape.isRequired}),de=he))||de;var xe,ge,be=s(62848),we=s(36094);s(63139);let ye=(0,i.observer)((ge=class extends n.Component{render(){const{intl:e}=this.context,{onBack:t,step0:s}=this.props,r=[{label:e.formatMessage(c.default.backButtonLabel),onClick:t,className:v()(["backTransferButtonClasses"])},{label:e.formatMessage(c.default.nextButtonLabel),onClick:this.props.onSubmit,primary:!0,className:v()(["proceedTransferButtonClasses"]),disabled:this.props.isDisabled}];return(0,T.jsx)(we.ZP,{title:e.formatMessage(c.default.instructionTitle),dialogActions:r,closeOnOverlayClick:!1,onClose:t,backButton:(0,T.jsx)(be.Z,{onBack:t}),children:(0,T.jsx)(_.Z,{children:(0,T.jsxs)(_.Z,{children:[(0,T.jsxs)(_.Z,{children:[(0,T.jsx)(h.Z,{variant:"body2",color:"ds.text_gray_medium",children:s}),(0,T.jsx)(h.Z,{variant:"body2",color:"ds.text_gray_medium",sx:{pt:"16px"},children:e.formatMessage(c.default.step1)})]}),this.props.children,this.props.error&&(0,T.jsx)(_.Z,{textAlign:"center",children:(0,T.jsx)(h.Z,{variant:"body1",color:"ds.text_error",children:e.formatMessage(this.props.error,X()(this.props.error))})})]})})})}},o()(ge,"defaultProps",{error:void 0}),o()(ge,"contextTypes",{intl:p.intlShape.isRequired}),xe=ge))||xe;var ve,Te,Pe,Ce,_e;const Se=(0,p.defineMessages)({step0:{id:"yoroiTransfer.form.instructions.step0Paper.text",defaultMessage:"!!!Enter the 21-word recovery phrase used to back up your Yoroi Paper wallet and your paper password to restore the balance and transfer all the funds."}});let ke=(0,i.observer)((_e=class extends n.Component{constructor(...e){super(...e),Q()(this,"mnemonicForm",Pe,this),Q()(this,"paperPasswordForm",Ce,this),o()(this,"getMnemonic",(()=>new(Y())(((e,t)=>{if(null==this.mnemonicForm)throw new Error("YoroiPaperWalletFormPage mnemonicForm not set");this.mnemonicForm.submit({onSuccess:t=>{const{recoveryPhrase:s}=X()(t).call(t);e((0,te.join)(s," "))},onError:()=>t()})})))),o()(this,"getPaperPassword",(()=>new(Y())(((e,t)=>{if(null==this.paperPasswordForm)throw new Error("YoroiPaperWalletFormPage paperPasswordForm not set");this.paperPasswordForm.submit({onSuccess:t=>{const{paperPassword:s}=X()(t).call(t);e(s)},onError:()=>t()})})))),o()(this,"submit",(async()=>{if(null==this.mnemonicForm)throw new Error("YoroiPaperWalletFormPage form not set");const e=await this.getMnemonic(),t=await this.getPaperPassword();this.props.onSubmit({recoveryPhrase:e,paperPassword:t})}))}setMnemonicFrom(e){this.mnemonicForm=e}setPaperPasswordFrom(e){this.paperPasswordForm=e}render(){const{intl:e}=this.context;return(0,T.jsxs)(ye,{onSubmit:this.submit,onBack:this.props.onBack,step0:e.formatMessage(Se.step0),isDisabled:null==this.mnemonicForm||this.mnemonicForm.hasError||null==this.paperPasswordForm||this.paperPasswordForm.hasError,children:[(0,T.jsx)(ce,{setForm:e=>this.setMnemonicFrom(e),mnemonicValidator:this.props.mnemonicValidator,validWords:this.props.validWords,mnemonicLength:this.props.mnemonicLength}),(0,T.jsx)(fe,{setForm:e=>this.setPaperPasswordFrom(e),passwordMatches:this.props.passwordMatches,includeLengthCheck:this.props.includeLengthCheck})]})}},o()(_e,"contextTypes",{intl:p.intlShape.isRequired}),Te=_e,Pe=ee()(Te.prototype,"mnemonicForm",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=ee()(Te.prototype,"paperPasswordForm",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee()(Te.prototype,"setMnemonicFrom",[se.action],H()(Te.prototype,"setMnemonicFrom"),Te.prototype),ee()(Te.prototype,"setPaperPasswordFrom",[se.action],H()(Te.prototype,"setPaperPasswordFrom"),Te.prototype),ve=Te))||ve;var Me,Ae,Ee,Ie,Re=s(21477),je=s(71954);let Fe=(0,i.observer)((Ae=class extends n.Component{constructor(...e){super(...e),Q()(this,"notificationElementId",Ee,this),Q()(this,"plates",Ie,this),o()(this,"getSelectedNetwork",(()=>{const{selectedNetwork:e}=this.props.stores.profile;if(void 0===e)throw new Error("YoroiPlatePage no API selected");return e}))}async componentDidMount(){const{yoroiTransfer:e}=this.props.stores,t=(0,je.o6)(e.recoveryPhrase,this.props.accountIndex,this.getSelectedNetwork());(0,se.runInAction)((()=>{this.plates=t}))}render(){var e;if(null==this.plates)return null;const{uiNotifications:t}=this.props.stores,s={duration:le.Z.wallets.ADDRESS_COPY_TOOLTIP_NOTIFICATION_DURATION,message:c.default.copyTooltipMessage};return(0,T.jsx)(Re.Z,{plates:this.plates,selectedExplorer:null!==(e=this.props.stores.explorers.selectedExplorer.get(this.getSelectedNetwork().NetworkId))&&void 0!==e?e:(()=>{throw new Error("No explorer for wallet network")})(),onCopyAddressTooltip:(e,r)=>{t.isOpen(r)||((0,se.runInAction)((()=>{this.notificationElementId=r})),t.open({id:r,duration:s.duration,message:s.message}))},notification:t.getTooltipActiveNotification(this.notificationElementId),onNext:this.props.onNext,onCancel:this.props.onCancel,isSubmitting:!1,error:void 0})}},Ee=ee()(Ae.prototype,"notificationElementId",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ie=ee()(Ae.prototype,"plates",[se.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=Ae))||Me;var Ze,De,Ne=s(52773),Oe=s(94687),Le=s(74249);const Be=(0,p.defineMessages)({title:{id:"yoroiTransfer.successPage.title",defaultMessage:"!!!success"},text:{id:"yoroiTransfer.successPage.text",defaultMessage:"!!!Your funds were successfully transferred."}});let We=(0,i.observer)((De=class extends n.Component{render(){const{intl:e}=this.context;return(0,T.jsx)(Le.Z,{title:e.formatMessage(Be.title),text:e.formatMessage(Be.text)})}},o()(De,"contextTypes",{intl:p.intlShape.isRequired}),Ze=De))||Ze;var qe,Ue,Ye=s(32147),Ve=s(5227),ze=s(95667),Ge=s(45918),He=s(45408),Ke=s(84174);let Xe=(0,i.observer)((Ue=class extends n.Component{constructor(...e){super(...e),o()(this,"goToCreateWallet",(()=>{this.props.stores.app.goToRoute({route:Ve.ROUTES.WALLETS.ADD})})),o()(this,"setupTransferFundsWithPaperMnemonic",(e=>{this.props.stores.yoroiTransfer.setupTransferFundsWithPaperMnemonic({...e})})),o()(this,"checkAddresses",(async()=>{const e=this.props.stores.wallets,t=this.props.stores.yoroiTransfer,s=e.selected;if(null==s)throw new Error("checkAddresses no wallet selected");await this.props.stores.yoroiTransfer.checkAddresses({getDestinationAddress:t.nextInternalAddress(s)})})),o()(this,"transferFunds",(async()=>{const{stores:e}=this.props,{wallets:t,yoroiTransfer:s}=e,r=e.wallets.selectedOrFail;await this.props.stores.yoroiTransfer.transferFunds({network:(0,Ke.getNetworkById)(r.networkId),next:async()=>{const s=(new Date).getTime();try{await t.refreshWalletFromRemote(r.publicDeriverId)}catch(e){}const o=(new Date).getTime()-s;await new(Y())((s=>{q()((()=>{null!=t.selected&&e.app.goToRoute({route:Ve.ROUTES.WALLETS.TRANSACTIONS}),s()}),Math.max(5e3-o,0))}))},getDestinationAddress:s.nextInternalAddress(r),rebuildTx:!0})})),o()(this,"backToUninitialized",(()=>{this.props.stores.yoroiTransfer.backToUninitialized()})),o()(this,"cancelTransferFunds",(()=>{this.props.stores.yoroiTransfer.reset()}))}render(){const{stores:e}=this.props,t=this.props.stores.yoroiTransfer,s=this.props.stores.wallets.selected;if(null==s)throw new Error("checkAddresses no wallet selected");switch(t.status){case Ye.S.GETTING_PAPER_MNEMONICS:return(0,T.jsx)(ke,{onSubmit:this.setupTransferFundsWithPaperMnemonic,onBack:this.backToUninitialized,mnemonicValidator:e=>(0,He._)(e,le.Z.wallets.YOROI_PAPER_RECOVERY_PHRASE_WORD_COUNT),validWords:V,mnemonicLength:le.Z.wallets.YOROI_PAPER_RECOVERY_PHRASE_WORD_COUNT,passwordMatches:e=>!0,includeLengthCheck:!1});case Ye.S.DISPLAY_CHECKSUM:return(0,T.jsx)(Fe,{stores:e,onNext:this.checkAddresses,onCancel:this.backToUninitialized,accountIndex:this.props.stores.walletRestore.selectedAccount});case Ye.S.RESTORING_ADDRESSES:case Ye.S.CHECKING_ADDRESSES:case Ye.S.GENERATING_TX:return(0,T.jsx)(Ne.Z,{status:t.status});case Ye.S.READY_TO_TRANSFER:{var r;const{transferTx:o}=t;if(null==o)return null;const{intl:n}=this.context;return(0,T.jsx)(z.Z,{form:null,transferTx:o,selectedExplorer:null!==(r=this.props.stores.explorers.selectedExplorer.get(s.networkId))&&void 0!==r?r:(()=>{throw new Error("No explorer for wallet network")})(),getTokenInfo:(0,a.genLookupOrFail)(this.props.stores.tokenInfoStore.tokenInfo),onSubmit:{label:n.formatMessage(c.default.nextButtonLabel),trigger:this.transferFunds},isSubmitting:e.wallets.sendMoneyRequest.isExecuting,onCancel:{label:n.formatMessage(c.default.cancel),trigger:this.cancelTransferFunds},error:t.error,dialogTitle:n.formatMessage(c.default.walletSendConfirmationDialogTitle),getCurrentPrice:this.props.stores.coinPriceStore.getCurrentPrice,addressLookup:(0,Ge.iL)(s.networkId,n,void 0,this.props.stores.addresses.addressSubgroupMap),unitOfAccountSetting:e.profile.unitOfAccount,addressToDisplayString:e=>(0,ze.addressToDisplayString)(e,(0,Ke.getNetworkById)(s.networkId))})}case Ye.S.ERROR:return(0,T.jsx)(Oe.Z,{error:t.error,onCancel:this.cancelTransferFunds});case Ye.S.SUCCESS:return(0,T.jsx)(We,{});default:return null}}},o()(Ue,"contextTypes",{intl:p.intlShape.isRequired}),qe=Ue))||qe;var $e,Qe;let Je=(0,i.observer)((Qe=class extends n.Component{constructor(...e){super(...e),o()(this,"onClose",(()=>{this.props.stores.uiDialogs.closeActiveDialog()})),o()(this,"startTransferYoroiPaperFunds",(()=>{this.props.stores.yoroiTransfer.startTransferFunds()}))}render(){const{stores:e}=this.props,t=e.wallets.selected;if(null==t)return null;const s=e.tokenInfoStore.getDefaultTokenInfo(t.networkId);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(O,{onByron:this.startTransferYoroiPaperFunds,ticker:(0,l.truncateToken)((0,a.getTokenName)(s))}),(0,T.jsx)(Xe,{stores:e})]})}},o()(Qe,"contextTypes",{intl:p.intlShape.isRequired}),$e=Qe))||$e},94687:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var r,o,n=s(87672),i=s.n(n),a=s(67294),l=s(259),p=s(99095),c=(s(63139),s(95416)),d=s(38043),h=s(21131),u=s(48521);let m=(0,l.observer)((o=class extends a.Component{render(){const{intl:e}=this.context,{error:t,onCancel:s}=this.props;return(0,u.jsx)(c.Z,{title:e.formatMessage(new h.GenerateTransferTxError),backButtonLabel:e.formatMessage(d.default.cancel),onCancel:s,error:t})}},i()(o,"defaultProps",{error:void 0}),i()(o,"contextTypes",{intl:p.intlShape.isRequired}),r=o))||r},30680:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(23645),o=s.n(r)()((function(e){return e[1]}));o.push([e.id,".CustomTooltip_component{flex-direction:column}.CustomTooltip_component .CustomTooltip_infoIcon{flex:1}.CustomTooltip_PoolAvatarTooltip .SimpleBubble_root:not(.SimpleBubble_openUpward){margin-top:15px !important;margin-left:70px}.CustomTooltip_PoolAvatarTooltip .SimpleBubble_root.SimpleBubble_transparent.SimpleBubble_openUpward{margin-bottom:-15px !important;margin-left:70px}\n",""]),o.locals={component:"CustomTooltip_component",infoIcon:"CustomTooltip_infoIcon",PoolAvatarTooltip:"CustomTooltip_PoolAvatarTooltip"};const n=o}}]);