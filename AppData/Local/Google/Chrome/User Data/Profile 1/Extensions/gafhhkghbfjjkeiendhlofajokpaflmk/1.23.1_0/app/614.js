!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1f0f236b-213e-4814-9b1f-92025e5706b5",e._sentryDebugIdIdentifier="sentry-dbid-1f0f236b-213e-4814-9b1f-92025e5706b5")}catch(r){}}();var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"1.23.1-0cf8ecc"};(self["webpackChunk_lace_browser_extension_wallet"]=self["webpackChunk_lace_browser_extension_wallet"]||[]).push([[614],{"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__awaiter||function(e,t,r,s){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,a){function fulfilled(e){try{step(s.next(e))}catch(t){a(t)}}function rejected(e){try{step(s["throw"](e))}catch(t){a(t)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Networks=t.utils=t.Ada=void 0;const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/deriveAddress.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/deriveNativeScriptHash.js");const u=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getExtendedPublicKeys.js");const f=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getSerial.js");const p=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const h=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/runTests.js");const m=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/showAddress.js");const v=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signCVote.js");const _=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signOperationalCertificate.js");const y=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signMessage.js");const w=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/messageData.js");const g=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signTx.js");const b=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/address.js");const P=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/cVote.js");const S=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/nativeScript.js");const C=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/operationalCertificate.js");const T=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/transaction.js");const k=i(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js"));t.utils=k.default;const A=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const E=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");a(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js"),t);a(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js"),t);const j=215;function wrapConvertDeviceStatusError(e){return(...t)=>o(this,void 0,void 0,function*(){try{return yield e(...t)}catch(r){if(r&&"object"==typeof r&&"statusCode"in r&&"number"==typeof r.statusCode){throw new n.DeviceStatusError(r.statusCode)}throw r}})}function wrapRetryStillInCall(e){return(...t)=>o(this,void 0,void 0,function*(){try{return yield e(...t)}catch(r){if(r&&r.statusCode&&r.statusCode===n.DeviceStatusCodes.ERR_STILL_IN_CALL){return yield e(...t)}throw r}})}function interact(e,t){return o(this,void 0,void 0,function*(){let r=e.next();let s=true;while(!r.done){const a=r.value;const o=s?yield wrapRetryStillInCall(t)(a):yield t(a);s=false;r=e.next(o)}return r.value})}class Ada{constructor(e,t="ADA"){this.transport=e;const r=["getVersion","getSerial","getExtendedPublicKeys","signTransaction","deriveAddress","showAddress","deriveNativeScriptHash"];this.transport.decorateAppAPIMethods(this,r,t);this._send=e=>o(this,void 0,void 0,function*(){if(e.data.length>255){throw new Error("APDU too large, likely a bug")}let t=yield wrapConvertDeviceStatusError(this.transport.send)(j,e.ins,e.p1,e.p2,e.data);t=k.default.stripRetcodeFromResponse(t);if(null!=e.expectedResponseLength)(0,A.assert)(t.length===e.expectedResponseLength,`unexpected response length: ${t.length} instead of ${e.expectedResponseLength}`);return t})}getVersion(){return o(this,void 0,void 0,function*(){const e=yield interact(this._getVersion(),this._send);return{version:e,compatibility:(0,p.getCompatibility)(e)}})}*_getVersion(){return yield*(0,p.getVersion)()}getSerial(){return o(this,void 0,void 0,function*(){return interact(this._getSerial(),this._send)})}*_getSerial(){const e=yield*(0,p.getVersion)();return yield*(0,f.getSerial)(e)}runTests(){return o(this,void 0,void 0,function*(){return interact(this._runTests(),this._send)})}*_runTests(){const e=yield*(0,p.getVersion)();return yield*(0,h.runTests)(e)}getExtendedPublicKeys({paths:e}){return o(this,void 0,void 0,function*(){(0,E.validate)((0,E.isArray)(e),d.InvalidDataReason.GET_EXT_PUB_KEY_PATHS_NOT_ARRAY);const t=e.map(e=>(0,E.parseBIP32Path)(e,d.InvalidDataReason.INVALID_PATH));return interact(this._getExtendedPublicKeys(t),this._send)})}*_getExtendedPublicKeys(e){const t=yield*(0,p.getVersion)();return yield*(0,u.getExtendedPublicKeys)(t,e)}getExtendedPublicKey({path:e}){return o(this,void 0,void 0,function*(){return(yield this.getExtendedPublicKeys({paths:[e]}))[0]})}deriveAddress({network:e,address:t}){return o(this,void 0,void 0,function*(){const r=(0,b.parseAddress)(e,t);return interact(this._deriveAddress(r),this._send)})}*_deriveAddress(e){const t=yield*(0,p.getVersion)();return yield*(0,c.deriveAddress)(t,e)}showAddress({network:e,address:t}){return o(this,void 0,void 0,function*(){const r=(0,b.parseAddress)(e,t);return interact(this._showAddress(r),this._send)})}*_showAddress(e){const t=yield*(0,p.getVersion)();return yield*(0,m.showAddress)(t,e)}signTransaction(e){return o(this,void 0,void 0,function*(){const t=(0,T.parseSignTransactionRequest)(e);return interact(this._signTx(t),this._send)})}*_signTx(e){const t=yield*(0,p.getVersion)();return yield*(0,g.signTransaction)(t,e)}signOperationalCertificate(e){return o(this,void 0,void 0,function*(){const t=(0,C.parseOperationalCertificate)(e);return interact(this._signOperationalCertificate(t),this._send)})}*_signOperationalCertificate(e){const t=yield*(0,p.getVersion)();return yield*(0,_.signOperationalCertificate)(t,e)}signMessage(e){return o(this,void 0,void 0,function*(){const t=(0,w.parseMessageData)(e);return interact(this._signMessage(t),this._send)})}*_signMessage(e){const t=yield*(0,p.getVersion)();return yield*(0,y.signMessage)(t,e)}signCIP36Vote(e){return o(this,void 0,void 0,function*(){const t=(0,P.parseCVote)(e);return interact(this._signCIP36Vote(t),this._send)})}*_signCIP36Vote(e){const t=yield*(0,p.getVersion)();return yield*(0,v.signCVote)(t,e)}deriveNativeScriptHash({script:e,displayFormat:t}){return o(this,void 0,void 0,function*(){const r=(0,S.parseNativeScript)(e);const s=(0,S.parseNativeScriptHashDisplayFormat)(t);return interact(this._deriveNativeScriptHash(r,s),this._send)})}*_deriveNativeScriptHash(e,t){const r=yield*(0,p.getVersion)();return yield*(0,l.deriveNativeScriptHash)(r,e,t)}}t.Ada=Ada;t["default"]=Ada;t.Networks={Mainnet:{networkId:1,protocolMagic:764824073},Testnet:{networkId:0,protocolMagic:1097911063}}},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/deviceStatusError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeviceStatusError=t.DeviceStatusMessages=t.DeviceStatusCodes=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js");t.DeviceStatusCodes={ERR_STILL_IN_CALL:28164,ERR_INVALID_DATA:28167,ERR_INVALID_BIP_PATH:28168,ERR_REJECTED_BY_USER:28169,ERR_REJECTED_BY_POLICY:28176,ERR_DEVICE_LOCKED:28177,ERR_UNSUPPORTED_ADDRESS_TYPE:28178,ERR_CLA_NOT_SUPPORTED:28160};t.DeviceStatusMessages={[t.DeviceStatusCodes.ERR_INVALID_DATA]:"Invalid data supplied to Ledger",[t.DeviceStatusCodes.ERR_INVALID_BIP_PATH]:"Invalid derivation path supplied to Ledger",[t.DeviceStatusCodes.ERR_REJECTED_BY_USER]:"Action rejected by user",[t.DeviceStatusCodes.ERR_REJECTED_BY_POLICY]:"Action rejected by Ledger's security policy",[t.DeviceStatusCodes.ERR_DEVICE_LOCKED]:"Device is locked",[t.DeviceStatusCodes.ERR_CLA_NOT_SUPPORTED]:"Wrong Ledger app",[t.DeviceStatusCodes.ERR_UNSUPPORTED_ADDRESS_TYPE]:"Unsupported address type"};const a="https://github.com/cardano-foundation/ledger-app-cardano/blob/master/src/errors.h";const getDeviceErrorDescription=e=>{var r;const s=`0x${e.toString(16)}`;const o=`General error ${s}. Please consult ${a}`;return null!==(r=t.DeviceStatusMessages[e])&&void 0!==r?r:o};class DeviceStatusError extends s.ErrorBase{constructor(e){super(getDeviceErrorDescription(e));this.code=e}}t.DeviceStatusError=DeviceStatusError},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/deviceUnsupported.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeviceVersionUnsupported=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js");class DeviceVersionUnsupported extends s.ErrorBase{}t.DeviceVersionUnsupported=DeviceVersionUnsupported},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ErrorBase=void 0;class ErrorBase extends Error{constructor(e){super(e);this.name=this.constructor.name}}t.ErrorBase=ErrorBase},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidDataReason=t.DeviceStatusMessages=t.DeviceStatusError=t.DeviceStatusCodes=t.DeviceVersionUnsupported=t.InvalidData=t.ErrorBase=void 0;var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js");Object.defineProperty(t,"ErrorBase",{enumerable:true,get:function(){return s.ErrorBase}});var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidData.js");Object.defineProperty(t,"InvalidData",{enumerable:true,get:function(){return a.InvalidData}});var o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/deviceUnsupported.js");Object.defineProperty(t,"DeviceVersionUnsupported",{enumerable:true,get:function(){return o.DeviceVersionUnsupported}});var i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/deviceStatusError.js");Object.defineProperty(t,"DeviceStatusCodes",{enumerable:true,get:function(){return i.DeviceStatusCodes}});Object.defineProperty(t,"DeviceStatusError",{enumerable:true,get:function(){return i.DeviceStatusError}});Object.defineProperty(t,"DeviceStatusMessages",{enumerable:true,get:function(){return i.DeviceStatusMessages}});var n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");Object.defineProperty(t,"InvalidDataReason",{enumerable:true,get:function(){return n.InvalidDataReason}})},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidData=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js");class InvalidData extends s.ErrorBase{constructor(e){super(e)}}t.InvalidData=InvalidData},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidDataReason=void 0;var r;(function(e){e["GET_EXT_PUB_KEY_PATHS_NOT_ARRAY"]="ext pub key paths not an array";e["INVALID_PATH"]="invalid path";e["NETWORK_INVALID_PROTOCOL_MAGIC"]="invalid protocol magic";e["NETWORK_INVALID_NETWORK_ID"]="invalid network id";e["NETWORK_ID_INCLUDE_INVALID"]="invalid value for includeNetworkId";e["INPUTS_NOT_ARRAY"]="inputs not an array";e["INPUT_INVALID_TX_HASH"]="invalid tx hash in an input";e["INPUT_INVALID_PATH"]="invalid input path";e["INPUT_INVALID_UTXO_INDEX"]="invalid input utxo index";e["OUTPUTS_NOT_ARRAY"]="outputs not an array";e["OUTPUT_INVALID_FORMAT"]="invalid output format";e["OUTPUT_INVALID_AMOUNT"]="invalid amount in an output";e["OUTPUT_INVALID_ADDRESS"]="invalid address in an output";e["OUTPUT_INVALID_ADDRESS_PARAMS"]="change address must have path as payment part";e["OUTPUT_INVALID_DATUM_HASH"]="invalid datum hash";e["OUTPUT_INVALID_INLINE_DATUM"]="invalid inline datum";e["OUTPUT_INVALID_REFERENCE_SCRIPT_HEX"]="invalid script hex";e["OUTPUT_INCONSISTENT_DATUM"]="datum is not consistent with output type";e["OUTPUT_INCONSISTENT_REFERENCE_SCRIPT"]="reference script is not consistent with output type";e["MULTIASSET_INVALID_POLICY_NAME"]="invalid policy id in a multiasset token bundle";e["MULTIASSET_INVALID_TOKEN_BUNDLE_NOT_ARRAY"]="invalid multiasset token bundle - asset groups not an array";e["MULTIASSET_INVALID_TOKEN_BUNDLE_TOO_LARGE"]="invalid multiasset token bundle - too many asset groups";e["MULTIASSET_INVALID_TOKEN_BUNDLE_ORDERING"]="invalid multiasset token bundle - incorrect ordering of asset groups";e["MULTIASSET_INVALID_TOKEN_BUNDLE_NOT_UNIQUE"]="invalid multiasset token bundle - policyIds not unique";e["MULTIASSET_INVALID_TOKEN_BUNDLE_EMPTY"]="invalid multiasset token bundle - token bundle is not allowed to be empty";e["MULTIASSET_INVALID_TOKEN_AMOUNT"]="invalid token amount in an asset group in a multiasset token bundle";e["MULTIASSET_INVALID_ASSET_NAME"]="invalid asset name in an asset group in a multiasset token bundle";e["MULTIASSET_INVALID_ASSET_GROUP_NOT_ARRAY"]="invalid asset group in multiasset token bundle - tokens not an array";e["MULTIASSET_INVALID_ASSET_GROUP_TOO_LARGE"]="invalid asset group in multiasset token bundle - too many tokens";e["MULTIASSET_INVALID_ASSET_GROUP_EMPTY"]="invalid asset group in multiasset token bundle - zero tokens";e["MULTIASSET_INVALID_ASSET_GROUP_ORDERING"]="invalid asset group in multiasset token bundle - incorrect ordering of tokens";e["MULTIASSET_INVALID_ASSET_GROUP_NOT_UNIQUE"]="invalid asset group in multiasset token bundle - token names not unique";e["ADDRESS_UNKNOWN_TYPE"]="unknown address type";e["ADDRESS_INVALID_SPENDING_INFO"]="invalid address spending information";e["ADDRESS_INVALID_SPENDING_KEY_PATH"]="invalid address spending key path";e["ADDRESS_INVALID_SPENDING_SCRIPT_HASH"]="invalid address spending script hash";e["ADDRESS_INVALID_BLOCKCHAIN_POINTER"]="invalid address blockchain pointer";e["ADDRESS_INVALID_STAKING_KEY_PATH"]="invalid address staking key path";e["ADDRESS_INVALID_STAKING_KEY_HASH"]="invalid address staking key hash";e["ADDRESS_INVALID_STAKING_SCRIPT_HASH"]="invalid address staking script hash";e["ADDRESS_INVALID_STAKING_INFO"]="Invalid staking info in an output";e["ADDRESS_INVALID_REWARD_ADDRESS"]="invalid reward address for this version of ledger";e["FEE_INVALID"]="invalid fee";e["TTL_INVALID"]="invalid ttl";e["CERTIFICATES_NOT_ARRAY"]="certificates not an array";e["CERTIFICATE_INVALID_TYPE"]="invalid certificate type";e["CERTIFICATE_INVALID_PATH"]="one of the certificates contains an invalid path";e["CERTIFICATE_INVALID_STAKE_CREDENTIAL"]="one of the certificates contains an invalid stake credential";e["CERTIFICATE_INVALID_COMMITTEE_CREDENTIAL"]="one of the certificates contains invalid constitutional committee credential";e["CERTIFICATE_INVALID_DREP_CREDENTIAL"]="one of the certificates contains an invalid DRep credential";e["CERTIFICATE_INVALID_POOL_KEY_HASH"]="one of the certificates contains an invalid pool key hash";e["CERTIFICATE_SUPERFLUOUS_POOL_KEY_HASH"]="superfluous pool key hash in a certificate";e["CERTIFICATE_INVALID_DEPOSIT"]="one of the certificates contains an invalid deposit";e["CERTIFICATE_INVALID_DREP"]="one of the certificates contains an invalid DRep";e["ANCHOR_INVALID_URL"]="anchor with an invalid URL";e["ANCHOR_INVALID_HASH"]="anchor with an invalid data hash";e["POOL_REGISTRATION_INVALID_VRF_KEY_HASH"]="invalid vrf key hash in a pool registration certificate";e["POOL_REGISTRATION_INVALID_PLEDGE"]="invalid pledge in a pool registration certificate";e["POOL_REGISTRATION_INVALID_COST"]="invalid cost in a pool registration certificate";e["POOL_REGISTRATION_INVALID_MARGIN"]="invalid margin in a pool registration certificate";e["POOL_REGISTRATION_INVALID_MARGIN_DENOMINATOR"]="pool margin denominator must be a value between 1 and 10^15";e["POOL_REGISTRATION_OWNERS_TOO_MANY"]="too many owners in a pool registration certificate";e["POOL_KEY_INVALID_TYPE"]="invalid pool key type";e["POOL_KEY_INVALID_PATH"]="invalid pool key path in a pool registration certificate";e["POOL_KEY_INVALID_KEY_HASH"]="invalid pool key hash in a pool registration certificate";e["POOL_OWNER_INVALID_TYPE"]="invalid owner type";e["POOL_OWNER_INVALID_PATH"]="invalid owner path in a pool registration certificate";e["POOL_OWNER_INVALID_KEY_HASH"]="invalid owner key hash in a pool registration certificate";e["POOL_REGISTRATION_RELAYS_TOO_MANY"]="too many pool relays in a pool registration certificate";e["POOL_REWARD_ACCOUNT_INVALID_TYPE"]="invalid pool reward account type";e["POOL_REWARD_ACCOUNT_INVALID_PATH"]="invalid pool reward account key path in a pool registration certificate";e["POOL_REWARD_ACCOUNT_INVALID_HEX"]="invalid pool reward account hex in a pool registration certificate";e["POOL_RETIREMENT_INVALID_RETIREMENT_EPOCH"]="invalid pool retirement epoch";e["RELAY_INVALID_TYPE"]="invalid type of a relay in a pool registration certificate";e["RELAY_INVALID_PORT"]="invalid port in a relay in a pool registration certificate";e["RELAY_INVALID_IPV4"]="invalid ipv4 in a relay in a pool registration certificate";e["RELAY_INVALID_IPV6"]="invalid ipv6 in a relay in a pool registration certificate";e["RELAY_INVALID_DNS"]="invalid dns record in a relay in a pool registration certificate";e["POOL_REGISTRATION_METADATA_INVALID_URL"]="invalid metadata in a pool registration certificate= invalid url";e["POOL_REGISTRATION_METADATA_INVALID_HASH"]="invalid metadata in a pool registration certificate= invalid hash";e["WITHDRAWALS_NOT_ARRAY"]="withdrawals not an array";e["WITHDRAWAL_INVALID_AMOUNT"]="invalid withdrawal amount";e["WITHDRAWAL_INVALID_PATH"]="invalid withdrawal path";e["WITHDRAWAL_INVALID_STAKE_CREDENTIAL"]="withdrawal stake credential contains both a path and a scripthash or neither";e["AUXILIARY_DATA_UNKNOWN_TYPE"]="unknown auxiliary data type";e["AUXILIARY_DATA_INVALID_HASH"]="invalid auxiliary data hash";e["METADATA_UNKNOWN_TYPE"]="unknown metadata type";e["CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP15"]="CIP36 registration params inconsistent with CIP-15";e["CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP36"]="CIP36 registration params inconsistent with CIP-36";e["CVOTE_REGISTRATION_BOTH_KEY_AND_PATH"]="CIP36 vote key given both as a key and as a derivation path";e["CVOTE_REGISTRATION_MISSING_VOTE_KEY"]="CIP36 vote key missing";e["CVOTE_REGISTRATION_INVALID_VOTE_KEY"]="invalid CIP36 registration vote key";e["CVOTE_REGISTRATION_INVALID_VOTE_KEY_PATH"]="invalid CIP36 registration vote key path";e["CVOTE_REGISTRATION_INVALID_STAKING_KEY_PATH"]="invalid CIP36 registration staking key path";e["CVOTE_REGISTRATION_INVALID_NONCE"]="invalid CIP36 registration nonce";e["CVOTE_REGISTRATION_INVALID_VOTING_PURPOSE"]="invalid CIP36 registration voting purpose";e["CVOTE_REGISTRATION_DELEGATIONS_NOT_ARRAY"]="CIP36 registration delegations not an array";e["CVOTE_DELEGATION_UNKNOWN_FORMAT"]="invalid CIP36 delegation format";e["CVOTE_DELEGATION_UNKNOWN_DELEGATION_TYPE"]="invalid CIP36 delegation type";e["CVOTE_DELEGATION_INVALID_WEIGHT"]="invalid CIP36 delegation weight";e["CVOTE_DELEGATION_INVALID_PATH"]="invalid CIP36 delegation path";e["CVOTE_DELEGATION_INVALID_KEY"]="invalid CIP36 delegation key";e["VALIDITY_INTERVAL_START_INVALID"]="invalid validity interval start";e["SCRIPT_DATA_HASH_WRONG_LENGTH"]="script data hash not 32 bytes long";e["COLLATERAL_INPUTS_NOT_ARRAY"]="collateral inputs not an array";e["REQUIRED_SIGNERS_NOT_ARRAY"]="required signers not an array";e["VKEY_HASH_WRONG_LENGTH"]="vkey hash not 28 bytes long";e["UNKNOWN_REQUIRED_SIGNER_TYPE"]="unknown required signer type";e["REQUIRED_SIGNER_INVALID_PATH"]="invalid path for required signer";e["COLLATERAL_INPUT_CONTAINS_DATUM"]="collateral return output contains datum";e["COLLATERAL_INPUT_CONTAINS_REFERENCE_SCRIPT"]="collateral return output contains reference script";e["TOTAL_COLLATERAL_NOT_VALID"]="total collateral not valid";e["REFERENCE_INPUTS_NOT_ARRAY"]="reference inputs not an array";e["VOTING_PROCEDURES_NOT_ARRAY"]="voting procedures not an array";e["VOTER_VOTES_NOT_ARRAY"]="voter's votes not an array";e["VOTER_INVALID"]="invalid voter in voting procedures";e["GOV_ACTION_ID_INVALID_TX_HASH"]="invalid governance action id tx hash";e["GOV_ACTION_ID_INVALID_INDEX"]="invalid governance action id index";e["VOTING_PROCEDURES_INVALID_NUMBER_OF_VOTERS"]="there must be exactly 1 voter in voting procedures";e["VOTING_PROCEDURES_INVALID_NUMBER_OF_VOTES"]="there must be exactly 1 voting procedure per voter";e["TREASURY_NOT_VALID"]="treasury amount not valid";e["DONATION_NOT_VALID"]="treasury donation not valid";e["SIGN_MODE_UNKNOWN"]="unknown signing mode";e["SIGN_MODE_ORDINARY__POOL_REGISTRATION_NOT_ALLOWED"]="pool registration not allowed in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__CERTIFICATE_STAKE_CREDENTIAL_ONLY_AS_PATH"]="certificate stake credential must be given as a staking path in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__CERTIFICATE_COMMITTEE_COLD_CREDENTIAL_ONLY_AS_PATH"]="certificate constitutional committee cold credential must be given as a path in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__CERTIFICATE_DREP_CREDENTIAL_ONLY_AS_PATH"]="certificate DRep credential must be given as a path in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__WITHDRAWAL_ONLY_AS_PATH"]="withdrawal must be given as a path in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__COLLATERAL_INPUTS_NOT_ALLOWED"]="collateral inputs not allowed in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__COLLATERAL_OUTPUT_NOT_ALLOWED"]="collateral output not allowed in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__TOTAL_COLLATERAL_NOT_ALLOWED"]="total collateral not allowed in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__REFERENCE_INPUTS_NOT_ALLOWED"]="reference inputs not allowed in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_ORDINARY__VOTER_ONLY_AS_PATH"]="voter credential in voting procedures must be given as a path in TransactionSigningMode.ORDINARY_TRANSACTION";e["SIGN_MODE_MULTISIG__POOL_REGISTRATION_NOT_ALLOWED"]="pool registration not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__POOL_RETIREMENT_NOT_ALLOWED"]="pool retirement not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__DEVICE_OWNED_ADDRESS_NOT_ALLOWED"]="outputs given by path not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__CERTIFICATE_CREDENTIAL_ONLY_AS_SCRIPT"]="certificate credential must be a script hash in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__WITHDRAWAL_ONLY_AS_SCRIPT"]="withdrawal must be a script hash in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__COLLATERAL_INPUTS_NOT_ALLOWED"]="collateral inputs not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__COLLATERAL_OUTPUT_NOT_ALLOWED"]="collateral output not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__TOTAL_COLLATERAL_NOT_ALLOWED"]="total collateral not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__REFERENCE_INPUTS_NOT_ALLOWED"]="reference inputs not allowed in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_MULTISIG__VOTER_ONLY_AS_SCRIPT"]="voter credential in voting procedures must be a script hash in TransactionSigningMode.MULTISIG_TRANSACTION";e["SIGN_MODE_POOL_OWNER__INPUT_WITH_PATH_NOT_ALLOWED"]="inputs with path not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__DEVICE_OWNED_ADDRESS_NOT_ALLOWED"]="outputs given by path are not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__DATUM_NOT_ALLOWED"]="datum in outputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__REFERENCE_SCRIPT_NOT_ALLOWED"]="reference script in outputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__SINGLE_POOL_REG_CERTIFICATE_REQUIRED"]="single pool registration certificate is expected in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__THIRD_PARTY_POOL_KEY_REQUIRED"]="third party pool key is required in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__SINGLE_DEVICE_OWNER_REQUIRED"]="single device-owned pool owner is expected in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__WITHDRAWALS_NOT_ALLOWED"]="withdrawals not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__MINT_NOT_ALLOWED"]="mint not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__SCRIPT_DATA_HASH_NOT_ALLOWED"]="script data hash not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__COLLATERAL_INPUTS_NOT_ALLOWED"]="collateral inputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__COLLATERAL_OUTPUT_NOT_ALLOWED"]="reference inputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__TOTAL_COLLATERAL_NOT_ALLOWED"]="total collateral not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__REQUIRED_SIGNERS_NOT_ALLOWED"]="required signers not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__REFERENCE_INPUTS_NOT_ALLOWED"]="reference inputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__VOTING_PROCEDURES_NOT_ALLOWED"]="voting procedures not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__TREASURY_NOT_ALLOWED"]="treasury amount not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OWNER__DONATION_NOT_ALLOWED"]="treasury donation not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OWNER";e["SIGN_MODE_POOL_OPERATOR__DATUM_NOT_ALLOWED"]="datum in outputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__REFERENCE_SCRIPT_NOT_ALLOWED"]="reference script in outputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__SINGLE_POOL_REG_CERTIFICATE_REQUIRED"]="single pool registration certificate is expected in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__DEVICE_OWNED_POOL_KEY_REQUIRED"]="device owned pool key is required in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__DEVICE_OWNED_POOL_OWNER_NOT_ALLOWED"]="device-owned pool owner not expected in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__WITHDRAWALS_NOT_ALLOWED"]="withdrawals not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__MINT_NOT_ALLOWED"]="mint not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__SCRIPT_DATA_HASH_NOT_ALLOWED"]="script data hash not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__COLLATERAL_INPUTS_NOT_ALLOWED"]="collateral inputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__COLLATERAL_OUTPUT_NOT_ALLOWED"]="collateral output not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__TOTAL_COLLATERAL_NOT_ALLOWED"]="total collateral not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__REQUIRED_SIGNERS_NOT_ALLOWED"]="required signers not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__REFERENCE_INPUTS_NOT_ALLOWED"]="reference inputs not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__VOTING_PROCEDURES_NOT_ALLOWED"]="voting procedures not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__TREASURY_NOT_ALLOWED"]="treasury amount not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_POOL_OPERATOR__DONATION_NOT_ALLOWED"]="treasury donation not allowed in TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR";e["SIGN_MODE_PLUTUS__DEVICE_OWNED_ADDRESS_NOT_ALLOWED"]="outputs given by path not allowed in TransactionSigningMode.PLUTUS_TRANSACTION";e["SIGN_MODE_PLUTUS__POOL_REGISTRATION_NOT_ALLOWED"]="pool registration not allowed in TransactionSigningMode.PLUTUS_TRANSACTION";e["ADDITIONAL_WITNESSES_NOT_ARRAY"]="additional witnesses not an array";e["OPERATIONAL_CERTIFICATE_INVALID_KES_KEY"]="invalid operational certificate kes key";e["OPERATIONAL_CERTIFICATE_INVALID_KES_PERIOD"]="invalid operational certificate kes period";e["OPERATIONAL_CERTIFICATE_INVALID_ISSUE_COUNTER"]="invalid operational certificate issue counter";e["OPERATIONAL_CERTIFICATE_INVALID_COLD_KEY_PATH"]="invalid operational certificate cold key path";e["MESSAGE_DATA_INVALID_WITNESS_PATH"]="CIP-8 message signing: invalid witness path";e["MESSAGE_DATA_INVALID_MESSAGE_HEX"]="CIP-8 message signing: invalid message hex string";e["MESSAGE_DATA_LONG_NON_HASHED_MSG"]="CIP-8 message signing: non-hashed message too long";e["CVOTE_INVALID_VOTECAST_DATA"]="invalid votecast data for CIP36 vote";e["CVOTE_INVALID_WITNESS"]="invalid witness for CIP36 vote";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA"]="invalid native script input";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_KEY_PATH"]="invalid key path param";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_KEY_HASH"]="invalid key hash param";e["DERIVE_NATIVE_SCRIPT_HASH_SCRIPTS_NOT_AN_ARRAY"]="invalid scripts - scripts is not an array";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_REQUIRED_COUNT"]="invalid required count";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_TOKEN_LOCKING_SLOT"]="invalid token locking slot";e["DERIVE_NATIVE_SCRIPT_HASH_REQUIRED_COUNT_HIGHER_THAN_NUMBER_OF_SCRIPTS"]="invalid required count - higher than number of total scripts";e["DERIVE_NATIVE_SCRIPT_HASH_UNKNOWN_TYPE"]="unknown script type";e["DERIVE_NATIVE_SCRIPT_HASH_INVALID_DISPLAY_FORMAT"]="invalid native script hash display format";e["LEDGER_POLICY"]="Action rejected by Ledger's security policy";e["INVALID_DATA_SUPPLIED_TO_LEDGER"]="Invalid data supplied to Ledger";e["INVALID_B2_HASH"]="invalid blake2 hashing"})(r=t.InvalidDataReason||(t.InvalidDataReason={}))},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/deriveAddress.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deriveAddress=t.ensureAddressDerivationSupportedByAppVersion=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js");const send=e=>Object.assign({ins:17},e);function ensureAddressDerivationSupportedByAppVersion(e,t){(0,i.ensureLedgerAppVersionCompatible)(e);if(t.type===o.AddressType.BYRON&&!(0,i.getCompatibility)(e).supportsByronAddressDerivation){throw new s.DeviceVersionUnsupported(`Byron address parameters not supported by Ledger app version ${(0,a.getVersionString)(e)}.`)}}t.ensureAddressDerivationSupportedByAppVersion=ensureAddressDerivationSupportedByAppVersion;function*deriveAddress(e,t){ensureAddressDerivationSupportedByAppVersion(e,t);const r=1;const s=0;const a=yield send({p1:r,p2:s,data:(0,n.serializeAddressParams)(t,e)});return{addressHex:a.toString("hex")}}t.deriveAddress=deriveAddress},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/deriveNativeScriptHash.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.deriveNativeScriptHash=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/nativeScript.js");const send=e=>Object.assign({ins:18},e);function*deriveScriptHash_startComplexScript(e){yield send({p1:1,p2:0,data:(0,d.serializeComplexNativeScriptStart)(e),expectedResponseLength:0})}function*deriveNativeScriptHash_addSimpleScript(e){yield send({p1:2,p2:0,data:(0,d.serializeSimpleNativeScript)(e),expectedResponseLength:0})}function isComplexScript(e){switch(e.type){case o.NativeScriptType.ALL:case o.NativeScriptType.ANY:case o.NativeScriptType.N_OF_K:return true;default:return false}}function*deriveNativeScriptHash_addScript(e){if(isComplexScript(e)){yield*deriveScriptHash_startComplexScript(e);for(const t of e.params.scripts)yield*deriveNativeScriptHash_addScript(t)}else{return yield*deriveNativeScriptHash_addSimpleScript(e)}}function*deriveNativeScriptHash_finishWholeNativeScript(e){const t=yield send({p1:3,p2:0,data:(0,d.serializeWholeNativeScriptFinish)(e),expectedResponseLength:a.NATIVE_SCRIPT_HASH_LENGTH});return{scriptHashHex:t.toString("hex")}}function ensureScriptHashDerivationSupportedByAppVersion(e){if(!(0,n.getCompatibility)(e).supportsNativeScriptHashDerivation){throw new s.DeviceVersionUnsupported(`Native script hash derivation not supported by Ledger app version ${(0,i.getVersionString)(e)}.`)}}function*deriveNativeScriptHash(e,t,r){(0,n.ensureLedgerAppVersionCompatible)(e);ensureScriptHashDerivationSupportedByAppVersion(e);yield*deriveNativeScriptHash_addScript(t);const{scriptHashHex:s}=yield*deriveNativeScriptHash_finishWholeNativeScript(r);return{scriptHashHex:s}}t.deriveNativeScriptHash=deriveNativeScriptHash},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getExtendedPublicKeys.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.getExtendedPublicKeys=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");function ensureLedgerAppVersionCompatibleForPaths(e,t){const r=t.some(e=>e[0]===1694+i.HARDENED);if(r&&!(0,l.getCompatibility)(e).supportsCIP36Vote){throw new a.DeviceVersionUnsupported(`CIP36 vote keys not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}}const send=e=>Object.assign({ins:16},e);function*getExtendedPublicKeys(e,t){(0,l.ensureLedgerAppVersionCompatible)(e);ensureLedgerAppVersionCompatibleForPaths(e,t);const r=[];for(let a=0;a<t.length;a++){const i=s.concat([(0,c.path_to_buf)(t[a])]);let u;if(0===a){const f=t.length>1?(0,c.uint32_to_buf)(t.length-1):s.from([]);u=yield send({p1:0,p2:0,data:s.concat([i,f]),expectedResponseLength:o.EXTENDED_PUBLIC_KEY_LENGTH})}else{u=yield send({p1:1,p2:0,data:i,expectedResponseLength:o.EXTENDED_PUBLIC_KEY_LENGTH})}const p=32;const h=32;const[m,v,_]=(0,n.chunkBy)(u,[p,h]);(0,d.assert)(0===_.length,"invalid response length");r.push({publicKeyHex:m.toString("hex"),chainCodeHex:v.toString("hex")})}return r}t.getExtendedPublicKeys=getExtendedPublicKeys},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getSerial.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getSerial=void 0;const o=a(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js"));const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const send=e=>Object.assign({ins:1},e);function*getSerial(e){(0,i.ensureLedgerAppVersionCompatible)(e);const t=0;const r=0;const a=yield send({p1:t,p2:r,data:s.alloc(0),expectedResponseLength:7});const n=o.default.buf_to_hex(a);return{serialHex:n}}t.getSerial=getSerial},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.ensureLedgerAppVersionCompatible=t.getCompatibility=t.isLedgerAppVersionAtMost=t.isLedgerAppVersionAtLeast=t.getVersion=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const send=e=>Object.assign({ins:0},e);function*getVersion(){const e=0;const t=0;const r=yield send({p1:e,p2:t,data:s.alloc(0),expectedResponseLength:4});const[a,o,i,n]=r;const d=1;const c=4;const l={isDebug:(n&d)===d,isAppXS:(n&c)===c};return{major:a,minor:o,patch:i,flags:l}}t.getVersion=getVersion;function isLedgerAppVersionAtLeast(e,t,r){const{major:s,minor:a}=e;return s>t||s===t&&a>=r}t.isLedgerAppVersionAtLeast=isLedgerAppVersionAtLeast;function isLedgerAppVersionAtMost(e,t,r){const{major:s,minor:a}=e;return s<t||s===t&&a<=r}t.isLedgerAppVersionAtMost=isLedgerAppVersionAtMost;function getCompatibility(e){const t=isLedgerAppVersionAtLeast(e,2,2)&&isLedgerAppVersionAtMost(e,7,1/0);const r=isLedgerAppVersionAtLeast(e,2,3)&&isLedgerAppVersionAtMost(e,7,1/0);const s=isLedgerAppVersionAtLeast(e,2,4)&&isLedgerAppVersionAtMost(e,7,1/0);const a=isLedgerAppVersionAtLeast(e,3,0)&&isLedgerAppVersionAtMost(e,7,1/0);const o=isLedgerAppVersionAtLeast(e,4,0)&&isLedgerAppVersionAtMost(e,7,1/0);const i=isLedgerAppVersionAtLeast(e,4,1)&&isLedgerAppVersionAtMost(e,7,1/0);const n=isLedgerAppVersionAtLeast(e,5,0)&&isLedgerAppVersionAtMost(e,7,1/0);const d=isLedgerAppVersionAtLeast(e,6,0)&&isLedgerAppVersionAtMost(e,7,1/0);const c=isLedgerAppVersionAtLeast(e,7,0)&&isLedgerAppVersionAtMost(e,7,1/0);const l=isLedgerAppVersionAtLeast(e,7,1)&&isLedgerAppVersionAtMost(e,7,1/0);const u=e.flags.isAppXS;return{isCompatible:t,recommendedVersion:t?null:"7.0",supportsByronAddressDerivation:t&&!u,supportsMary:t,supportsCatalystRegistration:r,supportsCIP36:d,supportsZeroTtl:r,supportsPoolRegistrationAsOwner:t&&!u,supportsPoolRegistrationAsOperator:s&&!u,supportsPoolRetirement:s&&!u,supportsNativeScriptHashDerivation:a&&!u,supportsMultisigTransaction:a,supportsMint:a,supportsAlonzo:o,supportsReqSignersInOrdinaryTx:i,supportsBabbage:n,supportsCIP36Vote:d,supportsConway:c,supportsMessageSigning:l}}t.getCompatibility=getCompatibility;function ensureLedgerAppVersionCompatible(e){const{isCompatible:t,recommendedVersion:r}=getCompatibility(e);if(!t){throw new a.DeviceVersionUnsupported(`Device app version ${(0,o.getVersionString)(e)} unsupported, recommended version is ${r}.`)}}t.ensureLedgerAppVersionCompatible=ensureLedgerAppVersionCompatible},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/runTests.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.runTests=void 0;const send=e=>Object.assign({ins:240},e);function*runTests(e){yield send({p1:0,p2:0,data:s.alloc(0),expectedResponseLength:0})}t.runTests=runTests},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeAddressParams=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");function serializeSpendingDataSource(e){switch(e.type){case"spending_path":return(0,c.path_to_buf)(e.path);case"spending_script_hash":return(0,c.hex_to_buf)(e.scriptHashHex);case"no_spending":return s.alloc(0);default:(0,d.unreachable)(e)}}function serializeStakingDataSource(e){const t={["no_staking"]:17,["staking_key_path"]:34,["staking_key_hash"]:51,["blockchain_pointer"]:68,["staking_script_hash"]:85};switch(e.type){case"no_staking":return s.concat([(0,c.uint8_to_buf)(t[e.type])]);case"staking_key_hash":return s.concat([(0,c.uint8_to_buf)(t[e.type]),(0,c.hex_to_buf)(e.keyHashHex)]);case"staking_script_hash":return s.concat([(0,c.uint8_to_buf)(t[e.type]),(0,c.hex_to_buf)(e.scriptHashHex)]);case"staking_key_path":return s.concat([(0,c.uint8_to_buf)(t[e.type]),(0,c.path_to_buf)(e.path)]);case"blockchain_pointer":return s.concat([(0,c.uint8_to_buf)(t[e.type]),(0,c.uint32_to_buf)(e.pointer.blockIndex),(0,c.uint32_to_buf)(e.pointer.txIndex),(0,c.uint32_to_buf)(e.pointer.certificateIndex)]);default:(0,d.unreachable)(e)}}function serializeAddressParams(e,t){let r=e.spendingDataSource;let u=e.stakingDataSource;if(!(0,l.getCompatibility)(t).supportsMultisigTransaction){if(e.type===i.AddressType.REWARD_KEY){(0,d.assert)("staking_key_path"===u.type,o.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);r={type:"spending_path",path:u.path};u={type:"no_staking"}}else if(e.type===i.AddressType.REWARD_SCRIPT){throw new a.DeviceVersionUnsupported(`Scripthash based address derivation not supported by Ledger app version ${(0,n.getVersionString)(t)}.`)}}return s.concat([(0,c.uint8_to_buf)(e.type),e.type===i.AddressType.BYRON?(0,c.uint32_to_buf)(e.protocolMagic):(0,c.uint8_to_buf)(e.networkId),serializeSpendingDataSource(r),serializeStakingDataSource(u)])}t.serializeAddressParams=serializeAddressParams},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/cVoteRegistration.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeCVoteRegistrationVotingPurpose=t.serializeCVoteRegistrationNonce=t.serializeCVoteRegistrationPaymentDestination=t.serializeCVoteRegistrationStakingPath=t.serializeCVoteRegistrationDelegation=t.serializeCVoteRegistrationVoteKey=t.serializeCVoteRegistrationInit=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txOutput.js");function serializeCVoteRegistrationInit(e){const t={[o.CIP36VoteRegistrationFormat.CIP_15]:1,[o.CIP36VoteRegistrationFormat.CIP_36]:2};const r=(0,n.uint8_to_buf)(t[e.format]);const a=null!=e.delegations?e.delegations.length:0;const i=(0,n.uint32_to_buf)(a);return s.concat([r,i])}t.serializeCVoteRegistrationInit=serializeCVoteRegistrationInit;function serializeDelegationType(e){const t={[o.CIP36VoteDelegationType.KEY]:1,[o.CIP36VoteDelegationType.PATH]:2};return(0,n.uint8_to_buf)(t[e])}function serializeCVoteRegistrationVoteKey(e,t,r){if(null!=e){(0,i.assert)(null==t,"redundant vote key path");const d=(0,a.getCompatibility)(r).supportsCIP36?serializeDelegationType(o.CIP36VoteDelegationType.KEY):s.from([]);return s.concat([d,(0,n.hex_to_buf)(e)])}(0,i.assert)(null!=t,"missing vote key");(0,i.assert)((0,a.getCompatibility)(r).supportsCIP36Vote,"key derivation path for vote keys not supported by the device");return s.concat([serializeDelegationType(o.CIP36VoteDelegationType.PATH),(0,n.path_to_buf)(t)])}t.serializeCVoteRegistrationVoteKey=serializeCVoteRegistrationVoteKey;function serializeCVoteRegistrationDelegation(e){const t=serializeDelegationType(e.type);const r=(0,n.uint32_to_buf)(e.weight);switch(e.type){case o.CIP36VoteDelegationType.KEY:return s.concat([t,(0,n.hex_to_buf)(e.voteKey),r]);case o.CIP36VoteDelegationType.PATH:return s.concat([t,(0,n.path_to_buf)(e.voteKeyPath),r]);default:(0,i.unreachable)(e)}}t.serializeCVoteRegistrationDelegation=serializeCVoteRegistrationDelegation;function serializeCVoteRegistrationStakingPath(e){return s.concat([(0,n.path_to_buf)(e)])}t.serializeCVoteRegistrationStakingPath=serializeCVoteRegistrationStakingPath;function serializeCVoteRegistrationPaymentDestination(e,t){if((0,a.getCompatibility)(t).supportsCIP36){return(0,c.serializeTxOutputDestination)(e,t)}(0,i.assert)(e.type===o.TxOutputDestinationType.DEVICE_OWNED,"wrong destination for payment address in Catalyst");return(0,d.serializeAddressParams)(e.addressParams,t)}t.serializeCVoteRegistrationPaymentDestination=serializeCVoteRegistrationPaymentDestination;function serializeCVoteRegistrationNonce(e){return s.concat([(0,n.uint64_to_buf)(e)])}t.serializeCVoteRegistrationNonce=serializeCVoteRegistrationNonce;function serializeCVoteRegistrationVotingPurpose(e){const t=(0,n.serializeOptionFlag)(null!=e);const r=null!=e?(0,n.uint64_to_buf)(e):s.from([]);return s.concat([t,r])}t.serializeCVoteRegistrationVotingPurpose=serializeCVoteRegistrationVotingPurpose},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/messageData.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeMessageDataInit=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js");function serializeMessageDataInit(e,t){const r=(0,o.uint32_to_buf)(t.messageHex.length/2);const n=t.hashPayload?(0,o.uint8_to_buf)(1):(0,o.uint8_to_buf)(0);const d=t.isAscii?(0,o.uint8_to_buf)(1):(0,o.uint8_to_buf)(0);const c={[a.MessageAddressFieldType.ADDRESS]:1,[a.MessageAddressFieldType.KEY_HASH]:2};const l=(0,o.uint8_to_buf)(c[t.addressFieldType]);const u=t.addressFieldType===a.MessageAddressFieldType.ADDRESS?(0,i.serializeAddressParams)(t.address,e):s.concat([]);return s.concat([r,(0,o.path_to_buf)(t.signingPath),n,d,l,u])}t.serializeMessageDataInit=serializeMessageDataInit},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/nativeScript.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeWholeNativeScriptFinish=t.serializeSimpleNativeScript=t.serializeComplexNativeScriptStart=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const n={[a.NativeScriptType.PUBKEY_DEVICE_OWNED]:0,[a.NativeScriptType.PUBKEY_THIRD_PARTY]:0,[a.NativeScriptType.ALL]:1,[a.NativeScriptType.ANY]:2,[a.NativeScriptType.N_OF_K]:3,[a.NativeScriptType.INVALID_BEFORE]:4,[a.NativeScriptType.INVALID_HEREAFTER]:5};const d={[a.NativeScriptType.PUBKEY_DEVICE_OWNED]:1,[a.NativeScriptType.PUBKEY_THIRD_PARTY]:2};const c={[a.NativeScriptHashDisplayFormat.BECH32]:1,[a.NativeScriptHashDisplayFormat.POLICY_ID]:2};function serializeComplexNativeScriptStart(e){switch(e.type){case a.NativeScriptType.ALL:case a.NativeScriptType.ANY:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint32_to_buf)(e.params.scripts.length)]);case a.NativeScriptType.N_OF_K:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint32_to_buf)(e.params.scripts.length),(0,i.uint32_to_buf)(e.params.requiredCount)]);default:(0,o.unreachable)(e)}}t.serializeComplexNativeScriptStart=serializeComplexNativeScriptStart;function serializeSimpleNativeScript(e){switch(e.type){case a.NativeScriptType.PUBKEY_DEVICE_OWNED:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint8_to_buf)(d[e.type]),(0,i.path_to_buf)(e.params.path)]);case a.NativeScriptType.PUBKEY_THIRD_PARTY:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint8_to_buf)(d[e.type]),(0,i.hex_to_buf)(e.params.keyHashHex)]);case a.NativeScriptType.INVALID_BEFORE:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint64_to_buf)(e.params.slot)]);case a.NativeScriptType.INVALID_HEREAFTER:return s.concat([(0,i.uint8_to_buf)(n[e.type]),(0,i.uint64_to_buf)(e.params.slot)]);default:(0,o.unreachable)(e)}}t.serializeSimpleNativeScript=serializeSimpleNativeScript;function serializeWholeNativeScriptFinish(e){return s.concat([(0,i.uint8_to_buf)(c[e])])}t.serializeWholeNativeScriptFinish=serializeWholeNativeScriptFinish},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/operationalCertificate.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeOperationalCertificate=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");function serializeOperationalCertificate({kesPublicKeyHex:e,kesPeriod:t,issueCounter:r,coldKeyPath:o}){return s.concat([(0,a.hex_to_buf)(e),(0,a.uint64_to_buf)(t),(0,a.uint64_to_buf)(r),(0,a.path_to_buf)(o)])}t.serializeOperationalCertificate=serializeOperationalCertificate},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/poolRegistrationCertificate.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializePoolMetadata=t.serializePoolRelay=t.serializePoolRewardAccountLegacy=t.serializePoolRewardAccount=t.serializePoolOwner=t.serializePoolKeyLegacy=t.serializePoolKey=t.serializeFinancials=t.serializePoolInitialParamsLegacy=t.serializePoolInitialParams=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const n=Object.freeze({SIGN_TX_INCLUDED_NO:1,SIGN_TX_INCLUDED_YES:2});function serializePoolInitialParams(e){return s.concat([(0,i.uint32_to_buf)(e.owners.length),(0,i.uint32_to_buf)(e.relays.length)])}t.serializePoolInitialParams=serializePoolInitialParams;function serializePoolInitialParamsLegacy(e){return s.concat([serializePoolKeyLegacy(e.poolKey),(0,i.hex_to_buf)(e.vrfHashHex),(0,i.serializeCoin)(e.pledge),(0,i.serializeCoin)(e.cost),(0,i.uint64_to_buf)(e.margin.numerator),(0,i.uint64_to_buf)(e.margin.denominator),serializePoolRewardAccountLegacy(e.rewardAccount),(0,i.uint32_to_buf)(e.owners.length),(0,i.uint32_to_buf)(e.relays.length)])}t.serializePoolInitialParamsLegacy=serializePoolInitialParamsLegacy;function serializeFinancials(e){return s.concat([(0,i.serializeCoin)(e.pledge),(0,i.serializeCoin)(e.cost),(0,i.uint64_to_buf)(e.margin.numerator),(0,i.uint64_to_buf)(e.margin.denominator)])}t.serializeFinancials=serializeFinancials;function serializePoolKey(e){const t={[a.PoolKeyType.DEVICE_OWNED]:1,[a.PoolKeyType.THIRD_PARTY]:2};switch(e.type){case a.PoolKeyType.DEVICE_OWNED:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.path_to_buf)(e.path)]);case a.PoolKeyType.THIRD_PARTY:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.hex_to_buf)(e.hashHex)]);default:(0,o.unreachable)(e)}}t.serializePoolKey=serializePoolKey;function serializePoolKeyLegacy(e){(0,o.assert)(e.type===a.PoolKeyType.THIRD_PARTY,"invalid pool key type for legacy Ledger version");return(0,i.hex_to_buf)(e.hashHex)}t.serializePoolKeyLegacy=serializePoolKeyLegacy;function serializePoolOwner(e){const t={[a.PoolOwnerType.DEVICE_OWNED]:1,[a.PoolOwnerType.THIRD_PARTY]:2};switch(e.type){case a.PoolOwnerType.DEVICE_OWNED:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.path_to_buf)(e.path)]);case a.PoolOwnerType.THIRD_PARTY:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.hex_to_buf)(e.hashHex)]);default:(0,o.unreachable)(e)}}t.serializePoolOwner=serializePoolOwner;function serializePoolRewardAccount(e){const t={[a.PoolRewardAccountType.DEVICE_OWNED]:1,[a.PoolRewardAccountType.THIRD_PARTY]:2};switch(e.type){case a.PoolRewardAccountType.DEVICE_OWNED:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.path_to_buf)(e.path)]);case a.PoolRewardAccountType.THIRD_PARTY:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.hex_to_buf)(e.rewardAccountHex)]);default:(0,o.unreachable)(e)}}t.serializePoolRewardAccount=serializePoolRewardAccount;function serializePoolRewardAccountLegacy(e){(0,o.assert)(e.type===a.PoolRewardAccountType.THIRD_PARTY,"invalid pool reward account type for legacy Ledger version");return(0,i.hex_to_buf)(e.rewardAccountHex)}t.serializePoolRewardAccountLegacy=serializePoolRewardAccountLegacy;function serializePoolRelay(e){function serializeOptional(e,t){if(null==e){return s.concat([(0,i.uint8_to_buf)(1)])}return s.concat([(0,i.uint8_to_buf)(2),t(e)])}switch(e.type){case 0:return s.concat([(0,i.uint8_to_buf)(e.type),serializeOptional(e.port,e=>(0,i.uint16_to_buf)(e)),serializeOptional(e.ipv4,e=>e),serializeOptional(e.ipv6,e=>e)]);case 1:return s.concat([(0,i.uint8_to_buf)(e.type),serializeOptional(e.port,e=>(0,i.uint16_to_buf)(e)),s.from(e.dnsName,"ascii")]);case 2:return s.concat([(0,i.uint8_to_buf)(e.type),s.from(e.dnsName,"ascii")]);default:(0,o.unreachable)(e)}}t.serializePoolRelay=serializePoolRelay;function serializePoolMetadata(e){if(null==e){return s.concat([(0,i.uint8_to_buf)(n.SIGN_TX_INCLUDED_NO)])}return s.concat([(0,i.uint8_to_buf)(n.SIGN_TX_INCLUDED_YES),(0,i.hex_to_buf)(e.hashHex),s.from(e.url,"ascii")])}t.serializePoolMetadata=serializePoolMetadata},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txAuxiliaryData.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeTxAuxiliaryData=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");function serializeTxAuxiliaryData(e){const t={[a.TxAuxiliaryDataType.ARBITRARY_HASH]:0,[a.TxAuxiliaryDataType.CIP36_REGISTRATION]:1};switch(e.type){case a.TxAuxiliaryDataType.ARBITRARY_HASH:return s.concat([(0,i.uint8_to_buf)(t[e.type]),(0,i.hex_to_buf)(e.hashHex)]);case a.TxAuxiliaryDataType.CIP36_REGISTRATION:return s.concat([(0,i.uint8_to_buf)(t[e.type])]);default:(0,o.unreachable)(e)}}t.serializeTxAuxiliaryData=serializeTxAuxiliaryData},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txCertificate.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeTxCertificate=t.serializeTxCertificatePreMultisig=t.serializeDRep=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");function serializeDRep(e){switch(e.type){case 100:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.path_to_buf)(e.path)]);case 0:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.hex_to_buf)(e.keyHashHex)]);case 1:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.hex_to_buf)(e.scriptHashHex)]);case 2:case 3:return s.concat([(0,i.uint8_to_buf)(e.type)]);default:(0,o.unreachable)(e)}}t.serializeDRep=serializeDRep;function serializeTxCertificatePreMultisig(e){switch(e.type){case a.CertificateType.STAKE_REGISTRATION:case a.CertificateType.STAKE_DEREGISTRATION:(0,o.assert)(0===e.stakeCredential.type,"invalid stake credential");return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.path_to_buf)(e.stakeCredential.path)]);case a.CertificateType.STAKE_DELEGATION:(0,o.assert)(0===e.stakeCredential.type,"invalid stake credential");return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.path_to_buf)(e.stakeCredential.path),(0,i.hex_to_buf)(e.poolKeyHashHex)]);case a.CertificateType.STAKE_POOL_REGISTRATION:return s.concat([(0,i.uint8_to_buf)(e.type)]);case a.CertificateType.STAKE_POOL_RETIREMENT:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.path_to_buf)(e.path),(0,i.uint64_to_buf)(e.retirementEpoch)]);case a.CertificateType.STAKE_REGISTRATION_CONWAY:case a.CertificateType.STAKE_DEREGISTRATION_CONWAY:case a.CertificateType.VOTE_DELEGATION:case a.CertificateType.AUTHORIZE_COMMITTEE_HOT:case a.CertificateType.RESIGN_COMMITTEE_COLD:case a.CertificateType.DREP_REGISTRATION:case a.CertificateType.DREP_DEREGISTRATION:case a.CertificateType.DREP_UPDATE:(0,o.assert)(false,"Conway certificates in pre-multisig serialization");break;default:(0,o.unreachable)(e)}}t.serializeTxCertificatePreMultisig=serializeTxCertificatePreMultisig;function serializeTxCertificate(e,t){if(!(0,n.getCompatibility)(t).supportsMultisigTransaction){return serializeTxCertificatePreMultisig(e)}switch(e.type){case a.CertificateType.STAKE_REGISTRATION:case a.CertificateType.STAKE_DEREGISTRATION:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.stakeCredential)]);case a.CertificateType.STAKE_REGISTRATION_CONWAY:case a.CertificateType.STAKE_DEREGISTRATION_CONWAY:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.stakeCredential),(0,i.serializeCoin)(e.deposit)]);case a.CertificateType.STAKE_DELEGATION:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.stakeCredential),(0,i.hex_to_buf)(e.poolKeyHashHex)]);case a.CertificateType.VOTE_DELEGATION:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.stakeCredential),serializeDRep(e.dRep)]);case a.CertificateType.AUTHORIZE_COMMITTEE_HOT:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.coldCredential),(0,i.serializeCredential)(e.hotCredential)]);case a.CertificateType.RESIGN_COMMITTEE_COLD:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.coldCredential),(0,i.serializeAnchor)(e.anchor)]);case a.CertificateType.DREP_REGISTRATION:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.dRepCredential),(0,i.serializeCoin)(e.deposit),(0,i.serializeAnchor)(e.anchor)]);case a.CertificateType.DREP_DEREGISTRATION:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.dRepCredential),(0,i.serializeCoin)(e.deposit)]);case a.CertificateType.DREP_UPDATE:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.serializeCredential)(e.dRepCredential),(0,i.serializeAnchor)(e.anchor)]);case a.CertificateType.STAKE_POOL_REGISTRATION:return s.concat([(0,i.uint8_to_buf)(e.type)]);case a.CertificateType.STAKE_POOL_RETIREMENT:return s.concat([(0,i.uint8_to_buf)(e.type),(0,i.path_to_buf)(e.path),(0,i.uint64_to_buf)(e.retirementEpoch)]);default:(0,o.unreachable)(e)}}t.serializeTxCertificate=serializeTxCertificate},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txInit.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeTxInit=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const _serializeSigningMode=e=>{const t={[a.TransactionSigningMode.ORDINARY_TRANSACTION]:3,[a.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER]:4,[a.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR]:5,[a.TransactionSigningMode.MULTISIG_TRANSACTION]:6,[a.TransactionSigningMode.PLUTUS_TRANSACTION]:7}[e];(0,o.assert)(void 0!==t,"Invalid signing mode");return(0,i.uint8_to_buf)(t)};function serializeTxOptions(e){let t=0;if(e.tagCborSets)t+=1;return(0,i.uint64_to_buf)(t.toString())}function serializeTxInit(e,t,r,a,o){const d=(0,n.getCompatibility)(o).supportsConway?serializeTxOptions(a):s.from([]);const c=(0,n.getCompatibility)(o).supportsMint||o.flags.isAppXS;const l=c?(0,i.serializeOptionFlag)(null!=e.mint):s.from([]);const u=(0,n.getCompatibility)(o).supportsAlonzo?(0,i.serializeOptionFlag)(null!=e.scriptDataHashHex):s.from([]);const f=(0,n.getCompatibility)(o).supportsAlonzo?(0,i.uint32_to_buf)(e.collateralInputs.length):s.from([]);const p=(0,n.getCompatibility)(o).supportsAlonzo?(0,i.uint32_to_buf)(e.requiredSigners.length):s.from([]);const h=(0,n.getCompatibility)(o).supportsAlonzo?(0,i.serializeOptionFlag)(e.includeNetworkId):s.from([]);const m=(0,n.getCompatibility)(o).supportsBabbage?(0,i.serializeOptionFlag)(null!=e.collateralOutput):s.from([]);const v=(0,n.getCompatibility)(o).supportsBabbage?(0,i.serializeOptionFlag)(null!=e.totalCollateral):s.from([]);const _=(0,n.getCompatibility)(o).supportsBabbage?(0,i.uint32_to_buf)(e.referenceInputs.length):s.from([]);const y=(0,n.getCompatibility)(o).supportsConway?(0,i.uint32_to_buf)(e.votingProcedures.length):s.from([]);const w=(0,n.getCompatibility)(o).supportsConway?(0,i.serializeOptionFlag)(null!=e.treasury):s.from([]);const g=(0,n.getCompatibility)(o).supportsConway?(0,i.serializeOptionFlag)(null!=e.donation):s.from([]);const b=(0,n.getCompatibility)(o).supportsBabbage?s.from([]):(0,i.uint32_to_buf)(r);const P=(0,n.getCompatibility)(o).supportsBabbage?(0,i.uint32_to_buf)(r):s.from([]);return s.concat([d,(0,i.uint8_to_buf)(e.network.networkId),(0,i.uint32_to_buf)(e.network.protocolMagic),(0,i.serializeOptionFlag)(null!=e.ttl),(0,i.serializeOptionFlag)(null!=e.auxiliaryData),(0,i.serializeOptionFlag)(null!=e.validityIntervalStart),l,u,h,m,v,w,g,_serializeSigningMode(t),(0,i.uint32_to_buf)(e.inputs.length),(0,i.uint32_to_buf)(e.outputs.length),(0,i.uint32_to_buf)(e.certificates.length),(0,i.uint32_to_buf)(e.withdrawals.length),b,f,p,_,y,P])}t.serializeTxInit=serializeTxInit},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txOther.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeVoterVotes=t.serializeRequiredSigner=t.serializeMintBasicParams=t.serializeToken=t.serializeAssetGroup=t.serializeTxWitnessRequest=t.serializeTxValidityStart=t.serializeTxTtl=t.serializeTxWithdrawal=t.serializeTxInput=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");function serializeTxInput(e){return s.concat([(0,n.hex_to_buf)(e.txHashHex),(0,n.uint32_to_buf)(e.outputIndex)])}t.serializeTxInput=serializeTxInput;function serializeTxWithdrawal(e,t){if((0,d.getCompatibility)(t).supportsMultisigTransaction){return s.concat([(0,n.serializeCoin)(e.amount),(0,n.serializeCredential)(e.stakeCredential)])}(0,i.assert)(0===e.stakeCredential.type,o.InvalidDataReason.WITHDRAWAL_INVALID_STAKE_CREDENTIAL);return s.concat([(0,n.serializeCoin)(e.amount),(0,n.path_to_buf)(e.stakeCredential.path)])}t.serializeTxWithdrawal=serializeTxWithdrawal;function serializeTxTtl(e){return s.concat([(0,n.uint64_to_buf)(e)])}t.serializeTxTtl=serializeTxTtl;function serializeTxValidityStart(e){return s.concat([(0,n.uint64_to_buf)(e)])}t.serializeTxValidityStart=serializeTxValidityStart;function serializeTxWitnessRequest(e){return s.concat([(0,n.path_to_buf)(e)])}t.serializeTxWitnessRequest=serializeTxWitnessRequest;function serializeAssetGroup(e){return s.concat([(0,n.hex_to_buf)(e.policyIdHex),(0,n.uint32_to_buf)(e.tokens.length)])}t.serializeAssetGroup=serializeAssetGroup;function serializeToken(e,t){return s.concat([(0,n.uint32_to_buf)(e.assetNameHex.length/2),(0,n.hex_to_buf)(e.assetNameHex),t(e.amount)])}t.serializeToken=serializeToken;function serializeMintBasicParams(e){return s.concat([(0,n.uint32_to_buf)(e.length)])}t.serializeMintBasicParams=serializeMintBasicParams;function serializeRequiredSigner(e){switch(e.type){case 0:return s.concat([(0,n.uint8_to_buf)(e.type),(0,n.path_to_buf)(e.path)]);case 1:return s.concat([(0,n.uint8_to_buf)(e.type),(0,n.hex_to_buf)(e.hashHex)]);default:(0,i.unreachable)(e)}}t.serializeRequiredSigner=serializeRequiredSigner;function serializeVoter(e){switch(e.type){case a.VoterType.COMMITTEE_KEY_HASH:case a.VoterType.DREP_KEY_HASH:case a.VoterType.STAKE_POOL_KEY_HASH:return s.concat([(0,n.uint8_to_buf)(e.type),(0,n.hex_to_buf)(e.keyHashHex)]);case a.VoterType.COMMITTEE_KEY_PATH:case a.VoterType.DREP_KEY_PATH:case a.VoterType.STAKE_POOL_KEY_PATH:return s.concat([(0,n.uint8_to_buf)(e.type),(0,n.path_to_buf)(e.keyPath)]);case a.VoterType.COMMITTEE_SCRIPT_HASH:case a.VoterType.DREP_SCRIPT_HASH:return s.concat([(0,n.uint8_to_buf)(e.type),(0,n.hex_to_buf)(e.scriptHashHex)]);default:(0,i.unreachable)(e)}}function serializeVoterVotes(e){(0,i.assert)(1===e.votes.length,"too few / too many votes");const t=e.votes[0];return s.concat([serializeVoter(e.voter),s.concat([(0,n.hex_to_buf)(t.govActionId.txHashHex),(0,n.uint32_to_buf)(t.govActionId.govActionIndex)]),s.concat([(0,n.uint8_to_buf)(t.votingProcedure.vote),(0,n.serializeAnchor)(t.votingProcedure.anchor)])])}t.serializeVoterVotes=serializeVoterVotes},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txOutput.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeTxOutputRefScript=t.serializeTxOutputDatum=t.serializeTxOutputBasicParams=t.serializeTxOutputDestination=t.MAX_CHUNK_SIZE=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js");t.MAX_CHUNK_SIZE=240;function serializeTxOutputDestination(e,t){const r={[a.TxOutputDestinationType.THIRD_PARTY]:1,[a.TxOutputDestinationType.DEVICE_OWNED]:2};switch(e.type){case a.TxOutputDestinationType.THIRD_PARTY:return s.concat([(0,n.uint8_to_buf)(r[e.type]),(0,n.uint32_to_buf)(e.addressHex.length/2),(0,n.hex_to_buf)(e.addressHex)]);case a.TxOutputDestinationType.DEVICE_OWNED:return s.concat([(0,n.uint8_to_buf)(r[e.type]),(0,c.serializeAddressParams)(e.addressParams,t)]);default:(0,i.unreachable)(e)}}t.serializeTxOutputDestination=serializeTxOutputDestination;function serializeTxOutputBasicParams(e,t){const r=(0,d.getCompatibility)(t).supportsBabbage?(0,n.uint8_to_buf)(e.format):s.from([]);const a=(0,d.getCompatibility)(t).supportsAlonzo?(0,n.serializeOptionFlag)(null!=e.datum):s.from([]);const o=(0,d.getCompatibility)(t).supportsBabbage?(0,n.serializeOptionFlag)(null!=e.referenceScriptHex):s.from([]);return s.concat([r,serializeTxOutputDestination(e.destination,t),(0,n.serializeCoin)(e.amount),(0,n.uint32_to_buf)(e.tokenBundle.length),a,o])}t.serializeTxOutputBasicParams=serializeTxOutputBasicParams;function serializeTxOutputDatum(e,r){switch(e.type){case o.DatumType.HASH:{const a=(0,d.getCompatibility)(r).supportsBabbage?(0,n.uint8_to_buf)(o.DatumType.HASH):s.concat([]);return s.concat([a,(0,n.hex_to_buf)(e.datumHashHex)])}case o.DatumType.INLINE:{const c=e.datumHex.length/2;let l;l=c>t.MAX_CHUNK_SIZE?e.datumHex.substring(0,2*t.MAX_CHUNK_SIZE):e.datumHex;const u=l.length/2;return s.concat([(0,n.uint8_to_buf)(o.DatumType.INLINE),(0,n.uint32_to_buf)(c),(0,n.uint32_to_buf)(u),(0,n.hex_to_buf)(l)])}default:return(0,i.unreachable)(e)}}t.serializeTxOutputDatum=serializeTxOutputDatum;function serializeTxOutputRefScript(e){const r=e.length/2;let a;a=r>t.MAX_CHUNK_SIZE?e.substring(0,2*t.MAX_CHUNK_SIZE):e;const o=a.length/2;return s.concat([(0,n.uint32_to_buf)(r),(0,n.uint32_to_buf)(o),(0,n.hex_to_buf)(a)])}t.serializeTxOutputRefScript=serializeTxOutputRefScript},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/showAddress.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.showAddress=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/addressParams.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/deriveAddress.js");const send=e=>Object.assign({ins:17},e);function*showAddress(e,t){(0,a.ensureAddressDerivationSupportedByAppVersion)(e,t);const r=2;const o=0;yield send({p1:r,p2:o,data:(0,s.serializeAddressParams)(t,e),expectedResponseLength:0})}t.showAddress=showAddress},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signCVote.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.signCVote=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const send=e=>Object.assign({ins:35},e);function*signCVote(e,t){if(!(0,d.getCompatibility)(e).supportsCIP36Vote){throw new a.DeviceVersionUnsupported(`CIP36 voting not supported by Ledger app version ${(0,i.getVersionString)(e)}.`)}const r=240;const c=(0,n.hex_to_buf)(t.voteCastDataHex);let l=0;let u=Math.min(c.length,l+r);const f=s.concat([(0,n.uint32_to_buf)(c.length),c.slice(l,u)]);yield send({p1:1,p2:0,data:f,expectedResponseLength:0});l=u;while(l<c.length){u=Math.min(c.length,l+r);yield send({p1:2,p2:0,data:c.slice(l,u),expectedResponseLength:0});l=u}const p=32;const h=yield send({p1:3,p2:0,data:s.concat([]),expectedResponseLength:p});const m=yield send({p1:4,p2:0,data:(0,n.path_to_buf)(t.witnessPath),expectedResponseLength:o.ED25519_SIGNATURE_LENGTH});return{dataHashHex:h.toString("hex"),witnessPath:t.witnessPath,witnessSignatureHex:m.toString("hex")}}t.signCVote=signCVote},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signMessage.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.signMessage=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/messageData.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const send=e=>Object.assign({ins:36},e);function*signMessage(e,t){if(!(0,d.getCompatibility)(e).supportsMessageSigning){throw new o.DeviceVersionUnsupported(`CIP-8 message signing not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}yield send({p1:1,p2:0,data:(0,c.serializeMessageDataInit)(e,t),expectedResponseLength:0});const r=198;const u=99;const f=250;const p=(0,a.hex_to_buf)(t.messageHex);const getChunkData=(e,t)=>{const r=p.slice(e,t);return s.concat([(0,a.uint32_to_buf)(r.length),r])};const h=t.isAscii?r:u;let m=0;let v=Math.min(p.length,h);yield send({p1:2,p2:0,data:getChunkData(m,v),expectedResponseLength:0});m=v;if(m<p.length)(0,l.validate)(t.hashPayload,o.InvalidDataReason.MESSAGE_DATA_LONG_NON_HASHED_MSG);while(m<p.length){v=Math.min(p.length,m+f);yield send({p1:2,p2:0,data:getChunkData(m,v),expectedResponseLength:0});m=v}const _=128;const y=yield send({p1:3,p2:0,data:s.concat([]),expectedResponseLength:i.ED25519_SIGNATURE_LENGTH+i.PUBLIC_KEY_LENGTH+4+_});let w=0;const g=y.slice(w,w+i.ED25519_SIGNATURE_LENGTH).toString("hex");w+=i.ED25519_SIGNATURE_LENGTH;const b=y.slice(w,w+i.PUBLIC_KEY_LENGTH).toString("hex");w+=i.PUBLIC_KEY_LENGTH;const P=y.slice(w,w+4);w+=4;const S=(0,a.buf_to_uint32)(P);const C=y.slice(w,w+S).toString("hex");return{signatureHex:g,signingPublicKeyHex:b,addressFieldHex:C}}t.signMessage=signMessage},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signOperationalCertificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signOperationalCertificate=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/operationalCertificate.js");const send=e=>Object.assign({ins:34},e);function*signOperationalCertificate(e,t){if(!(0,i.getCompatibility)(e).supportsPoolRegistrationAsOperator){throw new s.DeviceVersionUnsupported(`Operational certificate signing not supported by Ledger app version ${(0,o.getVersionString)(e)}.`)}const r=0;const d=0;const c=yield send({p1:r,p2:d,data:(0,n.serializeOperationalCertificate)(t),expectedResponseLength:a.ED25519_SIGNATURE_LENGTH});return{signatureHex:c.toString("hex")}}t.signOperationalCertificate=signOperationalCertificate},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/signTx.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.signTransaction=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/getVersion.js");const u=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/cVoteRegistration.js");const f=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/poolRegistrationCertificate.js");const p=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txAuxiliaryData.js");const h=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txCertificate.js");const m=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txInit.js");const v=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txOther.js");const _=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/interactions/serialization/txOutput.js");const send=e=>Object.assign({ins:33},e);function*signTx_init(e,t,r,s,a){yield send({p1:1,p2:0,data:(0,m.serializeTxInit)(e,t,r.length,s,a),expectedResponseLength:0})}function*signTx_addInput(e){yield send({p1:2,p2:0,data:(0,v.serializeTxInput)(e),expectedResponseLength:0})}function*signTx_addOutput_sendChunks(e,t){let r=2*_.MAX_CHUNK_SIZE;let a=r;while(r<e.length){a=Math.min(e.length,r+2*_.MAX_CHUNK_SIZE);const o=e.substring(r,a);yield send({p1:3,p2:t,data:s.concat([(0,c.uint32_to_buf)(o.length/2),(0,c.hex_to_buf)(o)]),expectedResponseLength:0});r=a}}function*signTx_addTokenBundle(e,t,r){for(const s of e){yield send({p1:t,p2:49,data:(0,v.serializeAssetGroup)(s),expectedResponseLength:0});for(const a of s.tokens)yield send({p1:t,p2:50,data:(0,v.serializeToken)(a,r),expectedResponseLength:0})}}function*signTx_addOutput(e,t){yield send({p1:3,p2:48,data:(0,_.serializeTxOutputBasicParams)(e,t),expectedResponseLength:0});yield*signTx_addTokenBundle(e.tokenBundle,3,c.uint64_to_buf);if(e.datum){yield send({p1:3,p2:52,data:(0,_.serializeTxOutputDatum)(e.datum,t),expectedResponseLength:0});if(e.datum.type===i.DatumType.INLINE){const r=e.datum.datumHex.length/2>_.MAX_CHUNK_SIZE;if(r)yield*signTx_addOutput_sendChunks(e.datum.datumHex,53)}}if(e.referenceScriptHex){yield send({p1:3,p2:54,data:(0,_.serializeTxOutputRefScript)(e.referenceScriptHex),expectedResponseLength:0});if(e.referenceScriptHex.length/2>_.MAX_CHUNK_SIZE)yield*signTx_addOutput_sendChunks(e.referenceScriptHex,55)}yield send({p1:3,p2:51,data:s.concat([]),expectedResponseLength:0})}function*signTx_addStakePoolRegistrationCertificate(e){(0,d.assert)(e.type===o.CertificateType.STAKE_POOL_REGISTRATION,"invalid certificate type");const t=e.pool;yield send({p1:6,p2:48,data:(0,f.serializePoolInitialParams)(t),expectedResponseLength:0});yield send({p1:6,p2:49,data:(0,f.serializePoolKey)(t.poolKey),expectedResponseLength:0});yield send({p1:6,p2:50,data:(0,c.hex_to_buf)(t.vrfHashHex),expectedResponseLength:0});yield send({p1:6,p2:51,data:(0,f.serializeFinancials)(t),expectedResponseLength:0});yield send({p1:6,p2:52,data:(0,f.serializePoolRewardAccount)(t.rewardAccount),expectedResponseLength:0});for(const r of t.owners)yield send({p1:6,p2:53,data:(0,f.serializePoolOwner)(r),expectedResponseLength:0});for(const a of t.relays)yield send({p1:6,p2:54,data:(0,f.serializePoolRelay)(a),expectedResponseLength:0});yield send({p1:6,p2:55,data:(0,f.serializePoolMetadata)(t.metadata),expectedResponseLength:0});yield send({p1:6,p2:56,data:s.alloc(0),expectedResponseLength:0})}function*signTx_addStakePoolRegistrationCertificateLegacy(e){(0,d.assert)(e.type===o.CertificateType.STAKE_POOL_REGISTRATION,"invalid certificate type");const t=e.pool;yield send({p1:6,p2:48,data:(0,f.serializePoolInitialParamsLegacy)(t),expectedResponseLength:0});for(const r of t.owners)yield send({p1:6,p2:49,data:(0,f.serializePoolOwner)(r),expectedResponseLength:0});for(const a of t.relays)yield send({p1:6,p2:50,data:(0,f.serializePoolRelay)(a),expectedResponseLength:0});yield send({p1:6,p2:51,data:(0,f.serializePoolMetadata)(t.metadata),expectedResponseLength:0});yield send({p1:6,p2:52,data:s.alloc(0),expectedResponseLength:0})}function*signTx_addCertificate(e,t){yield send({p1:6,p2:0,data:(0,h.serializeTxCertificate)(e,t),expectedResponseLength:0});if(e.type===o.CertificateType.STAKE_POOL_REGISTRATION)if((0,l.getCompatibility)(t).supportsPoolRegistrationAsOperator)yield*signTx_addStakePoolRegistrationCertificate(e);else yield*signTx_addStakePoolRegistrationCertificateLegacy(e)}function*signTx_addWithdrawal(e,t){yield send({p1:7,p2:0,data:(0,v.serializeTxWithdrawal)(e,t),expectedResponseLength:0})}function*signTx_setFee(e){yield send({p1:4,p2:0,data:(0,c.serializeCoin)(e),expectedResponseLength:0})}function*signTx_setTtl(e){yield send({p1:5,p2:0,data:(0,v.serializeTxTtl)(e),expectedResponseLength:0})}function*signTx_setAuxiliaryData(e,t){const r=[i.TxAuxiliaryDataType.ARBITRARY_HASH,i.TxAuxiliaryDataType.CIP36_REGISTRATION];(0,d.assert)(r.includes(e.type),"Auxiliary data type not implemented");yield send({p1:8,p2:0,data:(0,p.serializeTxAuxiliaryData)(e),expectedResponseLength:0});if(e.type===i.TxAuxiliaryDataType.CIP36_REGISTRATION){const a=e.params;if((0,l.getCompatibility)(t).supportsCIP36)yield send({p1:8,p2:54,data:(0,u.serializeCVoteRegistrationInit)(e.params),expectedResponseLength:0});if(a.votePublicKey||a.votePublicKeyPath)yield send({p1:8,p2:48,data:(0,u.serializeCVoteRegistrationVoteKey)(a.votePublicKey,a.votePublicKeyPath,t),expectedResponseLength:0});else if(a.delegations){for(const n of a.delegations)yield send({p1:8,p2:55,data:(0,u.serializeCVoteRegistrationDelegation)(n),expectedResponseLength:0})}else{throw Error("wrong CIP36 registration params")}yield send({p1:8,p2:49,data:(0,u.serializeCVoteRegistrationStakingPath)(a.stakingPath),expectedResponseLength:0});yield send({p1:8,p2:50,data:(0,u.serializeCVoteRegistrationPaymentDestination)(a.paymentDestination,t),expectedResponseLength:0});yield send({p1:8,p2:51,data:(0,u.serializeCVoteRegistrationNonce)(a.nonce),expectedResponseLength:0});if((0,l.getCompatibility)(t).supportsCIP36)yield send({p1:8,p2:53,data:(0,u.serializeCVoteRegistrationVotingPurpose)(a.votingPurpose),expectedResponseLength:0});const c=64;const f=yield send({p1:8,p2:52,data:s.alloc(0),expectedResponseLength:o.AUXILIARY_DATA_HASH_LENGTH+c});const h=f.slice(0,o.AUXILIARY_DATA_HASH_LENGTH);const m=f.slice(o.AUXILIARY_DATA_HASH_LENGTH,o.AUXILIARY_DATA_HASH_LENGTH+c);return{type:i.TxAuxiliaryDataSupplementType.CIP36_REGISTRATION,auxiliaryDataHashHex:h.toString("hex"),cip36VoteRegistrationSignatureHex:m.toString("hex")}}return null}function*signTx_setAuxiliaryData_before_v2_3(e){(0,d.assert)(e.type===i.TxAuxiliaryDataType.ARBITRARY_HASH,"Auxiliary data type not implemented");yield send({p1:8,p2:0,data:(0,c.hex_to_buf)(e.hashHex),expectedResponseLength:0});return null}function*signTx_setValidityIntervalStart(e){yield send({p1:9,p2:0,data:(0,v.serializeTxValidityStart)(e)})}function*signTx_setMint(e){yield send({p1:11,p2:48,data:(0,v.serializeMintBasicParams)(e),expectedResponseLength:0});yield*signTx_addTokenBundle(e,11,c.int64_to_buf);yield send({p1:11,p2:51,data:s.alloc(0),expectedResponseLength:0})}function*signTx_setScriptDataHash(e){yield send({p1:12,p2:0,data:(0,c.hex_to_buf)(e)})}function*signTx_addCollateralInput(e){yield send({p1:13,p2:0,data:(0,v.serializeTxInput)(e),expectedResponseLength:0})}function*signTx_addRequiredSigner(e){yield send({p1:14,p2:0,data:(0,v.serializeRequiredSigner)(e),expectedResponseLength:0})}function*signTx_addCollateralOutput(e,t){yield send({p1:18,p2:48,data:(0,_.serializeTxOutputBasicParams)(e,t),expectedResponseLength:0});yield*signTx_addTokenBundle(e.tokenBundle,18,c.uint64_to_buf);yield send({p1:18,p2:51,data:s.concat([]),expectedResponseLength:0})}function*signTx_addTotalCollateral(e){yield send({p1:16,p2:0,data:(0,c.serializeCoin)(e),expectedResponseLength:0})}function*signTx_addReferenceInput(e){yield send({p1:17,p2:0,data:(0,v.serializeTxInput)(e),expectedResponseLength:0})}function*signTx_addVoterVotes(e){yield send({p1:19,p2:0,data:(0,v.serializeVoterVotes)(e),expectedResponseLength:0})}function*signTx_addTreasury(e){yield send({p1:21,p2:0,data:(0,c.serializeCoin)(e),expectedResponseLength:0})}function*signTx_addDonation(e){yield send({p1:22,p2:0,data:(0,c.serializeCoin)(e),expectedResponseLength:0})}function*signTx_awaitConfirm(){const e=yield send({p1:10,p2:0,data:s.alloc(0),expectedResponseLength:o.TX_HASH_LENGTH});return{txHashHex:e.toString("hex")}}function*signTx_getWitness(e){const t=yield send({p1:15,p2:0,data:(0,v.serializeTxWitnessRequest)(e),expectedResponseLength:o.ED25519_SIGNATURE_LENGTH});return{path:e,witnessSignatureHex:(0,c.buf_to_hex)(t)}}function uniquify(e){const t={};e.forEach(e=>{t[JSON.stringify(e)]=e});return Object.values(t)}function gatherWitnessPaths(e){const{tx:t,signingMode:r,additionalWitnessPaths:s}=e;const a=[];if(r!==i.TransactionSigningMode.MULTISIG_TRANSACTION){for(const n of t.inputs)if(null!=n.path)a.push(n.path);for(const d of t.certificates){switch(d.type){case o.CertificateType.STAKE_REGISTRATION_CONWAY:case o.CertificateType.STAKE_DEREGISTRATION:case o.CertificateType.STAKE_DEREGISTRATION_CONWAY:case o.CertificateType.STAKE_DELEGATION:case o.CertificateType.VOTE_DELEGATION:if(0===d.stakeCredential.type)a.push(d.stakeCredential.path);break;case o.CertificateType.AUTHORIZE_COMMITTEE_HOT:case o.CertificateType.RESIGN_COMMITTEE_COLD:if(0===d.coldCredential.type)a.push(d.coldCredential.path);break;case o.CertificateType.DREP_REGISTRATION:case o.CertificateType.DREP_DEREGISTRATION:case o.CertificateType.DREP_UPDATE:if(0===d.dRepCredential.type)a.push(d.dRepCredential.path);break;case o.CertificateType.STAKE_POOL_REGISTRATION:d.pool.owners.forEach(e=>{if(e.type===o.PoolOwnerType.DEVICE_OWNED)a.push(e.path)});if(d.pool.poolKey.type===i.PoolKeyType.DEVICE_OWNED)a.push(d.pool.poolKey.path);break;case o.CertificateType.STAKE_POOL_RETIREMENT:a.push(d.path);break;default:break}}for(const c of t.withdrawals)if(0===c.stakeCredential.type)a.push(c.stakeCredential.path);for(const l of t.requiredSigners){switch(l.type){case 0:a.push(l.path);break;default:break}}for(const u of t.collateralInputs)if(null!=u.path)a.push(u.path);for(const f of t.votingProcedures){switch(f.voter.type){case i.VoterType.COMMITTEE_KEY_PATH:case i.VoterType.DREP_KEY_PATH:case i.VoterType.STAKE_POOL_KEY_PATH:a.push(f.voter.keyPath);break;default:break}}}s.forEach(e=>a.push(e));return uniquify(a)}function hasCredentialInCertificatesPreConway(e,t){return e.certificates.some(e=>(e.type===o.CertificateType.STAKE_DELEGATION||e.type===o.CertificateType.STAKE_REGISTRATION||e.type===o.CertificateType.STAKE_DEREGISTRATION)&&e.stakeCredential.type===t)}function hasCredentialInWithdrawals(e,t){return e.withdrawals.some(e=>e.stakeCredential.type===t)}function hasScriptHashInAddressParams(e){const t=[i.AddressType.BASE_PAYMENT_KEY_STAKE_SCRIPT,i.AddressType.BASE_PAYMENT_SCRIPT_STAKE_KEY,i.AddressType.BASE_PAYMENT_SCRIPT_STAKE_SCRIPT,i.AddressType.ENTERPRISE_SCRIPT,i.AddressType.POINTER_SCRIPT,i.AddressType.REWARD_SCRIPT];return e.outputs.some(e=>e.destination.type===i.TxOutputDestinationType.DEVICE_OWNED&&t.includes(e.destination.addressParams.type))}function ensureRequestSupportedByAppVersion(e,t){var r,s,d;if(t.signingMode===i.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER&&!(0,l.getCompatibility)(e).supportsPoolRegistrationAsOwner){throw new a.DeviceVersionUnsupported(`Pool registration as owner not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.signingMode===i.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR&&!(0,l.getCompatibility)(e).supportsPoolRegistrationAsOperator){throw new a.DeviceVersionUnsupported(`Pool registration as operator not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.signingMode===i.TransactionSigningMode.MULTISIG_TRANSACTION&&!(0,l.getCompatibility)(e).supportsMultisigTransaction){throw new a.DeviceVersionUnsupported(`Multisig transactions not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.signingMode===i.TransactionSigningMode.PLUTUS_TRANSACTION&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Plutus transactions not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const isOutputByron=e=>null!=e&&e.destination.type===i.TxOutputDestinationType.DEVICE_OWNED&&e.destination.addressParams.type===i.AddressType.BYRON;const c=t.tx.outputs.some(isOutputByron)||isOutputByron(t.tx.collateralOutput);if(c&&!(0,l.getCompatibility)(e).supportsByronAddressDerivation){throw new a.DeviceVersionUnsupported(`Byron address parameters not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(hasScriptHashInAddressParams(t.tx)&&!(0,l.getCompatibility)(e).supportsMultisigTransaction){throw new a.DeviceVersionUnsupported(`Script hash in address parameters in output not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const u=t.tx.outputs.some(e=>null!=e.datum);if(u&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Datum in output not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const f=t.tx.outputs.some(e=>e.format===i.TxOutputFormat.MAP_BABBAGE);if(f&&!(0,l.getCompatibility)(e).supportsBabbage){throw new a.DeviceVersionUnsupported(`Outputs with map format not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if((null===(r=t.tx)||void 0===r?void 0:r.ttl)==="0"&&!(0,l.getCompatibility)(e).supportsZeroTtl){throw new a.DeviceVersionUnsupported(`Zero TTL not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const p=t.tx.certificates.some(e=>e.type===o.CertificateType.STAKE_POOL_REGISTRATION);const h=(0,l.getCompatibility)(e).supportsPoolRegistrationAsOwner||(0,l.getCompatibility)(e).supportsPoolRegistrationAsOperator;if(p&&!h){throw new a.DeviceVersionUnsupported(`Pool registration certificate not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const m=t.tx.certificates.some(e=>e.type===o.CertificateType.STAKE_POOL_RETIREMENT);if(m&&!(0,l.getCompatibility)(e).supportsPoolRetirement){throw new a.DeviceVersionUnsupported(`Pool retirement certificate not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const v=[o.CertificateType.STAKE_REGISTRATION_CONWAY,o.CertificateType.STAKE_DEREGISTRATION_CONWAY,o.CertificateType.VOTE_DELEGATION,o.CertificateType.AUTHORIZE_COMMITTEE_HOT,o.CertificateType.RESIGN_COMMITTEE_COLD,o.CertificateType.DREP_REGISTRATION,o.CertificateType.DREP_DEREGISTRATION,o.CertificateType.DREP_UPDATE];const _=t.tx.certificates.some(e=>v.includes(e.type));if(_&&!(0,l.getCompatibility)(e).supportsConway){throw new a.DeviceVersionUnsupported(`Conway era certificates not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(hasCredentialInCertificatesPreConway(t.tx,1)&&!(0,l.getCompatibility)(e).supportsMultisigTransaction){throw new a.DeviceVersionUnsupported(`Script hash in certificate stake credential not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(hasCredentialInCertificatesPreConway(t.tx,2)&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Key hash in certificate stake credential not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(hasCredentialInWithdrawals(t.tx,1)&&!(0,l.getCompatibility)(e).supportsMultisigTransaction){throw new a.DeviceVersionUnsupported(`Script hash in withdrawal not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(hasCredentialInWithdrawals(t.tx,2)&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Key hash in withdrawal not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if((null===(s=t.tx)||void 0===s?void 0:s.mint)!==null&&!(0,l.getCompatibility)(e).supportsMint){throw new a.DeviceVersionUnsupported(`Mint not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.validityIntervalStart&&!(0,l.getCompatibility)(e).supportsMary){throw new a.DeviceVersionUnsupported(`Validity interval start not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.scriptDataHashHex&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Script data hash not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.tx.collateralInputs.length>0&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Collateral inputs not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.tx.requiredSigners.length>0){if(!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Required signers not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(!(0,l.getCompatibility)(e).supportsReqSignersInOrdinaryTx){switch(t.signingMode){case i.TransactionSigningMode.ORDINARY_TRANSACTION:throw new a.DeviceVersionUnsupported(`Required signers in ordinary transaction not supported by Ledger app version ${(0,n.getVersionString)(e)}.`);case i.TransactionSigningMode.MULTISIG_TRANSACTION:throw new a.DeviceVersionUnsupported(`Required signers in multisig transaction not supported by Ledger app version ${(0,n.getVersionString)(e)}.`);default:break}}}if(null!==t.tx.includeNetworkId&&!(0,l.getCompatibility)(e).supportsAlonzo){throw new a.DeviceVersionUnsupported(`Network id in tx body not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.collateralOutput&&!(0,l.getCompatibility)(e).supportsBabbage){throw new a.DeviceVersionUnsupported(`Collateral output not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.totalCollateral&&!(0,l.getCompatibility)(e).supportsBabbage){throw new a.DeviceVersionUnsupported(`Total collateral not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.tx.referenceInputs.length>0&&!(0,l.getCompatibility)(e).supportsBabbage){throw new a.DeviceVersionUnsupported(`Reference inputs not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(t.tx.votingProcedures.length>0&&!(0,l.getCompatibility)(e).supportsConway){throw new a.DeviceVersionUnsupported(`Voting procedures not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.treasury&&!(0,l.getCompatibility)(e).supportsConway){throw new a.DeviceVersionUnsupported(`Treasury amount not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}if(null!==t.tx.donation&&!(0,l.getCompatibility)(e).supportsConway){throw new a.DeviceVersionUnsupported(`Treasury donation not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const y=null===(d=t.tx)||void 0===d?void 0:d.auxiliaryData;const w=(null==y?void 0:y.type)===i.TxAuxiliaryDataType.CIP36_REGISTRATION&&y.params.format===i.CIP36VoteRegistrationFormat.CIP_15;if(w&&!(0,l.getCompatibility)(e).supportsCatalystRegistration){throw new a.DeviceVersionUnsupported(`Catalyst registration not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const g=(null==y?void 0:y.type)===i.TxAuxiliaryDataType.CIP36_REGISTRATION&&y.params.format===i.CIP36VoteRegistrationFormat.CIP_36;if(g&&!(0,l.getCompatibility)(e).supportsCIP36){throw new a.DeviceVersionUnsupported(`CIP36 registration not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const b=(null==y?void 0:y.type)===i.TxAuxiliaryDataType.CIP36_REGISTRATION&&null!=y.params.votePublicKeyPath;if(b&&!(0,l.getCompatibility)(e).supportsCIP36Vote){throw new a.DeviceVersionUnsupported(`Vote key derivation path in CIP15/CIP36 registration not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}const P=(null==y?void 0:y.type)===i.TxAuxiliaryDataType.CIP36_REGISTRATION&&y.params.paymentDestination.type!==i.TxOutputDestinationType.DEVICE_OWNED;if(P&&!(0,l.getCompatibility)(e).supportsCIP36){throw new a.DeviceVersionUnsupported(`CIP36 payment addresses not owned by the device not supported by Ledger app version ${(0,n.getVersionString)(e)}.`)}}function*signTransaction(e,t){(0,l.ensureLedgerAppVersionCompatible)(e);ensureRequestSupportedByAppVersion(e,t);const r=(0,l.getCompatibility)(e).supportsCatalystRegistration||(0,l.getCompatibility)(e).supportsCIP36;const{tx:s,signingMode:a}=t;const o=gatherWitnessPaths(t);yield*signTx_init(s,a,o,t.options,e);let i=null;if(r&&null!=s.auxiliaryData)i=yield*signTx_setAuxiliaryData(s.auxiliaryData,e);for(const n of s.inputs)yield*signTx_addInput(n);for(const d of s.outputs)yield*signTx_addOutput(d,e);yield*signTx_setFee(s.fee);if(null!=s.ttl)yield*signTx_setTtl(s.ttl);for(const c of s.certificates)yield*signTx_addCertificate(c,e);for(const u of s.withdrawals)yield*signTx_addWithdrawal(u,e);if(!r&&null!=s.auxiliaryData)i=yield*signTx_setAuxiliaryData_before_v2_3(s.auxiliaryData);if(null!=s.validityIntervalStart)yield*signTx_setValidityIntervalStart(s.validityIntervalStart);if(null!=s.mint)yield*signTx_setMint(s.mint);if(null!=s.scriptDataHashHex)yield*signTx_setScriptDataHash(s.scriptDataHashHex);for(const f of s.collateralInputs)yield*signTx_addCollateralInput(f);for(const p of s.requiredSigners)yield*signTx_addRequiredSigner(p);if(null!=s.collateralOutput)yield*signTx_addCollateralOutput(s.collateralOutput,e);if(null!=s.totalCollateral)yield*signTx_addTotalCollateral(s.totalCollateral);for(const h of s.referenceInputs)yield*signTx_addReferenceInput(h);for(const m of s.votingProcedures)yield*signTx_addVoterVotes(m);if(null!=s.treasury)yield*signTx_addTreasury(s.treasury);if(null!=s.donation)yield*signTx_addDonation(s.donation);const{txHashHex:v}=yield*signTx_awaitConfirm();const _=[];for(const y of o){const w=yield*signTx_getWitness(y);_.push(w)}return{txHashHex:v,witnesses:_,auxiliaryDataSupplement:i}}t.signTransaction=signTransaction},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/address.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseAddress=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/network.js");function extractSpendingDataSource(e,t){if(null!=e){(0,i.validate)(null==t,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_SCRIPT_HASH);return{type:"spending_path",path:(0,i.parseBIP32Path)(e,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_KEY_PATH)}}if(null!=t){(0,i.validate)(null==e,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_KEY_PATH);return{type:"spending_script_hash",scriptHashHex:(0,i.parseHexStringOfLength)(t,o.SCRIPT_HASH_LENGTH,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_SCRIPT_HASH)}}return{type:"no_spending"}}function extractStakingDataSource(e,t,r,s){if(null!=e){(0,i.validate)(null==t,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==r,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==s,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);const n=(0,i.parseBIP32Path)(e,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_KEY_PATH);return{type:"staking_key_path",path:n}}if(null!=t){(0,i.validate)(null==e,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==r,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==s,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);const d=(0,i.parseHexStringOfLength)(t,o.KEY_HASH_LENGTH,a.InvalidDataReason.ADDRESS_INVALID_STAKING_KEY_HASH);return{type:"staking_key_hash",keyHashHex:d}}if(null!=r){(0,i.validate)(null==e,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==t,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==s,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);const c=r;return{type:"blockchain_pointer",pointer:{blockIndex:(0,i.parseUint32_t)(c.blockIndex,a.InvalidDataReason.ADDRESS_INVALID_BLOCKCHAIN_POINTER),txIndex:(0,i.parseUint32_t)(c.txIndex,a.InvalidDataReason.ADDRESS_INVALID_BLOCKCHAIN_POINTER),certificateIndex:(0,i.parseUint32_t)(c.certificateIndex,a.InvalidDataReason.ADDRESS_INVALID_BLOCKCHAIN_POINTER)}}}if(null!=s){(0,i.validate)(null==e,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==t,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);(0,i.validate)(null==r,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);const l=(0,i.parseHexStringOfLength)(s,o.SCRIPT_HASH_LENGTH,a.InvalidDataReason.ADDRESS_INVALID_STAKING_SCRIPT_HASH);return{type:"staking_script_hash",scriptHashHex:l}}return{type:"no_staking"}}function validateSpendingDataSource(e,t){switch(e){case o.AddressType.BASE_PAYMENT_KEY_STAKE_KEY:case o.AddressType.BASE_PAYMENT_KEY_STAKE_SCRIPT:case o.AddressType.POINTER_KEY:case o.AddressType.ENTERPRISE_KEY:case o.AddressType.BYRON:(0,i.validate)("spending_path"===t.type,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_INFO);break;case o.AddressType.BASE_PAYMENT_SCRIPT_STAKE_KEY:case o.AddressType.BASE_PAYMENT_SCRIPT_STAKE_SCRIPT:case o.AddressType.POINTER_SCRIPT:case o.AddressType.ENTERPRISE_SCRIPT:(0,i.validate)("spending_script_hash"===t.type,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_INFO);break;case o.AddressType.REWARD_KEY:case o.AddressType.REWARD_SCRIPT:(0,i.validate)("no_spending"===t.type,a.InvalidDataReason.ADDRESS_INVALID_SPENDING_INFO);break;default:throw new s.InvalidData(a.InvalidDataReason.ADDRESS_UNKNOWN_TYPE)}}function validateStakingDataSource(e,t){switch(e){case o.AddressType.BASE_PAYMENT_KEY_STAKE_KEY:case o.AddressType.BASE_PAYMENT_SCRIPT_STAKE_KEY:case o.AddressType.REWARD_KEY:(0,i.validate)("staking_key_path"===t.type||"staking_key_hash"===t.type,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);break;case o.AddressType.BASE_PAYMENT_SCRIPT_STAKE_SCRIPT:case o.AddressType.BASE_PAYMENT_KEY_STAKE_SCRIPT:case o.AddressType.REWARD_SCRIPT:(0,i.validate)("staking_script_hash"===t.type,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);break;case o.AddressType.POINTER_KEY:case o.AddressType.POINTER_SCRIPT:(0,i.validate)("blockchain_pointer"===t.type,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);break;case o.AddressType.BYRON:case o.AddressType.ENTERPRISE_KEY:case o.AddressType.ENTERPRISE_SCRIPT:(0,i.validate)("no_staking"===t.type,a.InvalidDataReason.ADDRESS_INVALID_STAKING_INFO);break;default:throw new s.InvalidData(a.InvalidDataReason.ADDRESS_UNKNOWN_TYPE)}}function parseAddress(e,t){const r=(0,n.parseNetwork)(e);const s=t.params;const a=extractSpendingDataSource(s.spendingPath,s.spendingScriptHashHex);const i=extractStakingDataSource(s.stakingPath,s.stakingKeyHashHex,s.stakingBlockchainPointer,s.stakingScriptHashHex);validateSpendingDataSource(t.type,a);validateStakingDataSource(t.type,i);if(t.type===o.AddressType.BYRON){return{type:t.type,protocolMagic:r.protocolMagic,spendingDataSource:a,stakingDataSource:i}}{const d=r.networkId;return{type:t.type,networkId:d,spendingDataSource:a,stakingDataSource:i}}}t.parseAddress=parseAddress},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/cVote.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseCVote=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");function parseCVote(e){const t=(0,a.parseHexString)(e.voteCastDataHex,s.InvalidDataReason.CVOTE_INVALID_VOTECAST_DATA);const r=35;(0,a.validate)(t.length>=2*r,s.InvalidDataReason.CVOTE_INVALID_VOTECAST_DATA);const o=(0,a.parseBIP32Path)(e.witnessPath,s.InvalidDataReason.CVOTE_INVALID_WITNESS);return{voteCastDataHex:t,witnessPath:o}}t.parseCVote=parseCVote},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/certificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseCertificate=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/poolRegistration.js");function parseDRep(e,t){switch(e.type){case n.DRepParamsType.KEY_PATH:return{type:100,path:(0,d.parseBIP32Path)(e.keyPath,t)};case n.DRepParamsType.KEY_HASH:return{type:0,keyHashHex:(0,d.parseHexStringOfLength)(e.keyHashHex,i.KEY_HASH_LENGTH,t)};case n.DRepParamsType.SCRIPT_HASH:return{type:1,scriptHashHex:(0,d.parseHexStringOfLength)(e.scriptHashHex,i.SCRIPT_HASH_LENGTH,t)};case n.DRepParamsType.ABSTAIN:return{type:2};case n.DRepParamsType.NO_CONFIDENCE:return{type:3};default:(0,s.unreachable)(e)}}function parseDeposit(e){return(0,d.parseCoin)(e,o.InvalidDataReason.CERTIFICATE_INVALID_DEPOSIT)}function parseCertificate(e){switch(e.type){case i.CertificateType.STAKE_REGISTRATION:case i.CertificateType.STAKE_DEREGISTRATION:return{type:e.type,stakeCredential:(0,d.parseCredential)(e.params.stakeCredential,o.InvalidDataReason.CERTIFICATE_INVALID_STAKE_CREDENTIAL)};case i.CertificateType.STAKE_REGISTRATION_CONWAY:case i.CertificateType.STAKE_DEREGISTRATION_CONWAY:return{type:e.type,stakeCredential:(0,d.parseCredential)(e.params.stakeCredential,o.InvalidDataReason.CERTIFICATE_INVALID_STAKE_CREDENTIAL),deposit:parseDeposit(e.params.deposit)};case i.CertificateType.STAKE_DELEGATION:return{type:e.type,stakeCredential:(0,d.parseCredential)(e.params.stakeCredential,o.InvalidDataReason.CERTIFICATE_INVALID_STAKE_CREDENTIAL),poolKeyHashHex:(0,d.parseHexStringOfLength)(e.params.poolKeyHashHex,i.KEY_HASH_LENGTH,o.InvalidDataReason.CERTIFICATE_INVALID_POOL_KEY_HASH)};case i.CertificateType.VOTE_DELEGATION:return{type:e.type,stakeCredential:(0,d.parseCredential)(e.params.stakeCredential,o.InvalidDataReason.CERTIFICATE_INVALID_STAKE_CREDENTIAL),dRep:parseDRep(e.params.dRep,o.InvalidDataReason.CERTIFICATE_INVALID_DREP)};case i.CertificateType.AUTHORIZE_COMMITTEE_HOT:return{type:e.type,coldCredential:(0,d.parseCredential)(e.params.coldCredential,o.InvalidDataReason.CERTIFICATE_INVALID_COMMITTEE_CREDENTIAL),hotCredential:(0,d.parseCredential)(e.params.hotCredential,o.InvalidDataReason.CERTIFICATE_INVALID_COMMITTEE_CREDENTIAL)};case i.CertificateType.RESIGN_COMMITTEE_COLD:return{type:e.type,coldCredential:(0,d.parseCredential)(e.params.coldCredential,o.InvalidDataReason.CERTIFICATE_INVALID_COMMITTEE_CREDENTIAL),anchor:null==e.params.anchor?null:(0,d.parseAnchor)(e.params.anchor)};case i.CertificateType.DREP_REGISTRATION:return{type:e.type,dRepCredential:(0,d.parseCredential)(e.params.dRepCredential,o.InvalidDataReason.CERTIFICATE_INVALID_DREP_CREDENTIAL),deposit:parseDeposit(e.params.deposit),anchor:null==e.params.anchor?null:(0,d.parseAnchor)(e.params.anchor)};case i.CertificateType.DREP_DEREGISTRATION:return{type:e.type,dRepCredential:(0,d.parseCredential)(e.params.dRepCredential,o.InvalidDataReason.CERTIFICATE_INVALID_DREP_CREDENTIAL),deposit:parseDeposit(e.params.deposit)};case i.CertificateType.DREP_UPDATE:return{type:e.type,dRepCredential:(0,d.parseCredential)(e.params.dRepCredential,o.InvalidDataReason.CERTIFICATE_INVALID_DREP_CREDENTIAL),anchor:null==e.params.anchor?null:(0,d.parseAnchor)(e.params.anchor)};case i.CertificateType.STAKE_POOL_REGISTRATION:return{type:e.type,pool:(0,c.parsePoolParams)(e.params)};case i.CertificateType.STAKE_POOL_RETIREMENT:return{type:e.type,path:(0,d.parseBIP32Path)(e.params.poolKeyPath,o.InvalidDataReason.CERTIFICATE_INVALID_PATH),retirementEpoch:(0,d.parseUint64_str)(e.params.retirementEpoch,{},o.InvalidDataReason.POOL_RETIREMENT_INVALID_RETIREMENT_EPOCH)};default:throw new a.InvalidData(o.InvalidDataReason.CERTIFICATE_INVALID_TYPE)}}t.parseCertificate=parseCertificate},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/constants.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TOKENS_IN_GROUP_MAX=t.ASSET_GROUPS_MAX=t.POOL_REGISTRATION_RELAYS_MAX=t.POOL_REGISTRATION_OWNERS_MAX=t.MAX_LOVELACE_SUPPLY_STR=void 0;t.MAX_LOVELACE_SUPPLY_STR="45 000 000 000.000000".replace(/[ .]/,"");t.POOL_REGISTRATION_OWNERS_MAX=1e3;t.POOL_REGISTRATION_RELAYS_MAX=1e3;t.ASSET_GROUPS_MAX=1e3;t.TOKENS_IN_GROUP_MAX=1e3},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/messageData.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.parseMessageData=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/address.js");function isPrintableAscii(e){for(let t=0;t<e.length;t++){if(e[t]>126)return false;if(e[t]<32)return false}return true}function isAscii(e){const t=s.from(e,"hex");if(0===t.length)return false;if(!isPrintableAscii(t))return false;const r=" ".charCodeAt(0);if(t[0]===r)return false;if(t[t.length-1]===r)return false;for(let a=0;a+1<t.length;a++)if(t[a]===r&&t[a+1]===r)return false;return true}function parseMessageData(e){const t=e.preferHexDisplay||false;const r={signingPath:(0,n.parseBIP32Path)(e.signingPath,o.InvalidDataReason.MESSAGE_DATA_INVALID_WITNESS_PATH),isAscii:isAscii(e.messageHex)&&!t,hashPayload:e.hashPayload,messageHex:(0,n.parseHexString)(e.messageHex,o.InvalidDataReason.MESSAGE_DATA_INVALID_MESSAGE_HEX)};switch(e.addressFieldType){case i.MessageAddressFieldType.ADDRESS:return Object.assign(Object.assign({},r),{addressFieldType:i.MessageAddressFieldType.ADDRESS,address:(0,d.parseAddress)(e.network,e.address)});case i.MessageAddressFieldType.KEY_HASH:return Object.assign(Object.assign({},r),{addressFieldType:i.MessageAddressFieldType.KEY_HASH});default:(0,a.unreachable)(e)}}t.parseMessageData=parseMessageData},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/nativeScript.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseNativeScriptHashDisplayFormat=t.parseNativeScript=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");function parseNativeScript(e){const t=e.params;switch(e.type){case o.NativeScriptType.PUBKEY_DEVICE_OWNED:(0,i.validate)(null==t.keyHashHex,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.requiredCount,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.slot,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.scripts,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);return{type:e.type,params:{path:(0,i.parseBIP32Path)(t.path,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_KEY_PATH)}};case o.NativeScriptType.PUBKEY_THIRD_PARTY:(0,i.validate)(null==t.path,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.requiredCount,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.slot,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.scripts,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);return{type:e.type,params:{keyHashHex:(0,i.parseHexStringOfLength)(t.keyHashHex,a.KEY_HASH_LENGTH,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_KEY_HASH)}};case o.NativeScriptType.ALL:case o.NativeScriptType.ANY:(0,i.validate)(null==t.path,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.keyHashHex,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.requiredCount,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.slot,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)((0,i.isArray)(t.scripts),s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_SCRIPTS_NOT_AN_ARRAY);return{type:e.type,params:{scripts:t.scripts.map(parseNativeScript)}};case o.NativeScriptType.N_OF_K:{(0,i.validate)(null==t.path,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.keyHashHex,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.slot,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)((0,i.isArray)(t.scripts),s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_SCRIPTS_NOT_AN_ARRAY);const r=(0,i.parseUint32_t)(t.requiredCount,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_REQUIRED_COUNT);(0,i.validate)(r<=t.scripts.length,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_REQUIRED_COUNT_HIGHER_THAN_NUMBER_OF_SCRIPTS);return{type:e.type,params:{requiredCount:r,scripts:t.scripts.map(parseNativeScript)}}}case o.NativeScriptType.INVALID_BEFORE:case o.NativeScriptType.INVALID_HEREAFTER:(0,i.validate)(null==t.path,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.keyHashHex,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.requiredCount,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);(0,i.validate)(null==t.scripts,s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DATA);return{type:e.type,params:{slot:(0,i.parseUint64_str)(t.slot,{},s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_TOKEN_LOCKING_SLOT)}};default:throw new s.InvalidData(s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_UNKNOWN_TYPE)}}t.parseNativeScript=parseNativeScript;function parseNativeScriptHashDisplayFormat(e){switch(e){case o.NativeScriptHashDisplayFormat.BECH32:case o.NativeScriptHashDisplayFormat.POLICY_ID:break;default:throw new s.InvalidData(s.InvalidDataReason.DERIVE_NATIVE_SCRIPT_HASH_INVALID_DISPLAY_FORMAT)}return e}t.parseNativeScriptHashDisplayFormat=parseNativeScriptHashDisplayFormat},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/network.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseNetwork=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");function parseNetwork(e){const t={protocolMagic:(0,a.parseUint32_t)(e.protocolMagic,s.InvalidDataReason.NETWORK_INVALID_PROTOCOL_MAGIC),networkId:(0,a.parseUint8_t)(e.networkId,s.InvalidDataReason.NETWORK_INVALID_NETWORK_ID)};(0,a.validate)(t.networkId<=15,s.InvalidDataReason.NETWORK_INVALID_NETWORK_ID);return t}t.parseNetwork=parseNetwork},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/operationalCertificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseOperationalCertificate=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");function parseOperationalCertificate(e){return{kesPublicKeyHex:(0,o.parseHexStringOfLength)(e.kesPublicKeyHex,a.KES_PUBLIC_KEY_LENGTH,s.InvalidDataReason.OPERATIONAL_CERTIFICATE_INVALID_KES_KEY),kesPeriod:(0,o.parseUint64_str)(e.kesPeriod,{},s.InvalidDataReason.OPERATIONAL_CERTIFICATE_INVALID_KES_PERIOD),issueCounter:(0,o.parseUint64_str)(e.issueCounter,{},s.InvalidDataReason.OPERATIONAL_CERTIFICATE_INVALID_ISSUE_COUNTER),coldKeyPath:(0,o.parseBIP32Path)(e.coldKeyPath,s.InvalidDataReason.OPERATIONAL_CERTIFICATE_INVALID_COLD_KEY_PATH)}}t.parseOperationalCertificate=parseOperationalCertificate},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/output.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseTxOutput=t.parseTxDestination=t.parseTokenBundle=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/address.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/constants.js");function parseToken(e,t){const r=(0,n.parseHexString)(e.assetNameHex,a.InvalidDataReason.MULTIASSET_INVALID_ASSET_NAME);(0,n.validate)(e.assetNameHex.length<=2*o.ASSET_NAME_LENGTH_MAX,a.InvalidDataReason.MULTIASSET_INVALID_ASSET_NAME);const s=t(e.amount,{},a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_AMOUNT);return{assetNameHex:r,amount:s}}function parseAssetGroup(e,t){(0,n.validate)((0,n.isArray)(e.tokens),a.InvalidDataReason.MULTIASSET_INVALID_ASSET_GROUP_NOT_ARRAY);(0,n.validate)(e.tokens.length<=c.TOKENS_IN_GROUP_MAX,a.InvalidDataReason.MULTIASSET_INVALID_ASSET_GROUP_TOO_LARGE);(0,n.validate)(e.tokens.length>0,a.InvalidDataReason.MULTIASSET_INVALID_ASSET_GROUP_EMPTY);const r={policyIdHex:(0,n.parseHexStringOfLength)(e.policyIdHex,o.TOKEN_POLICY_LENGTH,a.InvalidDataReason.MULTIASSET_INVALID_POLICY_NAME),tokens:e.tokens.map(e=>parseToken(e,t))};const s=r.tokens.map(e=>e.assetNameHex);(0,n.validate)(s.length===new Set(s).size,a.InvalidDataReason.MULTIASSET_INVALID_ASSET_GROUP_NOT_UNIQUE);const i=[...s].sort((e,t)=>{if(e.length===t.length)return e.localeCompare(t);return e.length-t.length});(0,n.validate)(JSON.stringify(s)===JSON.stringify(i),a.InvalidDataReason.MULTIASSET_INVALID_ASSET_GROUP_ORDERING);return r}function parseTokenBundle(e,t,r){(0,n.validate)((0,n.isArray)(e),a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_BUNDLE_NOT_ARRAY);(0,n.validate)(e.length<=c.ASSET_GROUPS_MAX,a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_BUNDLE_TOO_LARGE);(0,n.validate)(t||e.length>0,a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_BUNDLE_EMPTY);const s=e.map(e=>parseAssetGroup(e,r));const o=s.map(e=>e.policyIdHex);(0,n.validate)(o.length===new Set(o).size,a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_BUNDLE_NOT_UNIQUE);const i=[...o].sort();(0,n.validate)(JSON.stringify(o)===JSON.stringify(i),a.InvalidDataReason.MULTIASSET_INVALID_TOKEN_BUNDLE_ORDERING);return s}t.parseTokenBundle=parseTokenBundle;function parseDatumHash(e){return{type:i.DatumType.HASH,datumHashHex:(0,n.parseHexStringOfLength)(e,o.DATUM_HASH_LENGTH,a.InvalidDataReason.OUTPUT_INVALID_DATUM_HASH)}}function parseDatum(e){var t,r;if(e.format===i.TxOutputFormat.MAP_BABBAGE){switch(null===(t=e.datum)||void 0===t?void 0:t.type){case i.DatumType.HASH:return parseDatumHash(null===(r=e.datum)||void 0===r?void 0:r.datumHashHex);case i.DatumType.INLINE:return{type:i.DatumType.INLINE,datumHex:(0,n.parseHexString)(e.datum.datumHex,a.InvalidDataReason.OUTPUT_INVALID_INLINE_DATUM)};default:return null}}else{return null==e.datumHashHex?null:parseDatumHash(e.datumHashHex)}}function parseTxDestination(e,t,r){switch(t.type){case i.TxOutputDestinationType.THIRD_PARTY:{const o=t.params;const c=(0,n.parseHexString)(o.addressHex,a.InvalidDataReason.OUTPUT_INVALID_ADDRESS);(0,n.validate)(o.addressHex.length<=256,a.InvalidDataReason.OUTPUT_INVALID_ADDRESS);return{type:i.TxOutputDestinationType.THIRD_PARTY,addressHex:c}}case i.TxOutputDestinationType.DEVICE_OWNED:{const l=t.params;const u=(0,d.parseAddress)(e,l);if(r)(0,n.validate)("spending_path"===u.spendingDataSource.type,a.InvalidDataReason.OUTPUT_INVALID_ADDRESS_PARAMS);return{type:i.TxOutputDestinationType.DEVICE_OWNED,addressParams:u}}default:throw new s.InvalidData(a.InvalidDataReason.ADDRESS_UNKNOWN_TYPE)}}t.parseTxDestination=parseTxDestination;function parseTxOutput(e,t){var r;const s=e.format===i.TxOutputFormat.MAP_BABBAGE?i.TxOutputFormat.MAP_BABBAGE:i.TxOutputFormat.ARRAY_LEGACY;const o=(0,n.parseCoin)(e.amount,a.InvalidDataReason.OUTPUT_INVALID_AMOUNT);const d=parseTokenBundle(null!==(r=e.tokenBundle)&&void 0!==r?r:[],true,n.parseUint64_str);const c=parseTxDestination(t,e.destination,true);const l=parseDatum(e);if((null==l?void 0:l.type)===i.DatumType.INLINE)(0,n.validate)(e.format===i.TxOutputFormat.MAP_BABBAGE,a.InvalidDataReason.OUTPUT_INCONSISTENT_DATUM);const u=e.format===i.TxOutputFormat.MAP_BABBAGE&&e.referenceScriptHex?(0,n.parseHexString)(e.referenceScriptHex,a.InvalidDataReason.OUTPUT_INVALID_REFERENCE_SCRIPT_HEX):null;if(null!=u)(0,n.validate)(e.format===i.TxOutputFormat.MAP_BABBAGE,a.InvalidDataReason.OUTPUT_INCONSISTENT_REFERENCE_SCRIPT);return{format:s,amount:o,tokenBundle:d,destination:c,datum:l,referenceScriptHex:u}}t.parseTxOutput=parseTxOutput},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/poolRegistration.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.parsePoolParams=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/constants.js");function parseMargin(e){const t="1 000 000 000 000 000 000".replace(/[ ]/,"");const r=(0,d.parseUint64_str)(e.denominator,{max:t},o.InvalidDataReason.POOL_REGISTRATION_INVALID_MARGIN_DENOMINATOR);const s=(0,d.parseUint64_str)(e.numerator,{max:r},o.InvalidDataReason.POOL_REGISTRATION_INVALID_MARGIN);return{numerator:s,denominator:r}}function parsePoolKey(e){switch(e.type){case n.PoolKeyType.DEVICE_OWNED:{const t=e.params;const r=(0,d.parseBIP32Path)(t.path,o.InvalidDataReason.POOL_KEY_INVALID_PATH);return{type:n.PoolKeyType.DEVICE_OWNED,path:r}}case n.PoolKeyType.THIRD_PARTY:{const s=e.params;const c=(0,d.parseHexStringOfLength)(s.keyHashHex,i.KEY_HASH_LENGTH,o.InvalidDataReason.POOL_KEY_INVALID_KEY_HASH);return{type:n.PoolKeyType.THIRD_PARTY,hashHex:c}}default:throw new a.InvalidData(o.InvalidDataReason.POOL_KEY_INVALID_TYPE)}}function parsePoolOwnerParams(e){switch(e.type){case n.PoolOwnerType.DEVICE_OWNED:{const t=e.params;const r=(0,d.parseBIP32Path)(t.stakingPath,o.InvalidDataReason.POOL_OWNER_INVALID_PATH);return{type:n.PoolOwnerType.DEVICE_OWNED,path:r}}case n.PoolOwnerType.THIRD_PARTY:{const s=e.params;const c=(0,d.parseHexStringOfLength)(s.stakingKeyHashHex,i.KEY_HASH_LENGTH,o.InvalidDataReason.POOL_OWNER_INVALID_KEY_HASH);return{type:n.PoolOwnerType.THIRD_PARTY,hashHex:c}}default:throw new a.InvalidData(o.InvalidDataReason.POOL_OWNER_INVALID_TYPE)}}function parseRewardAccount(e){switch(e.type){case n.PoolRewardAccountType.DEVICE_OWNED:{const t=e.params;const r=(0,d.parseBIP32Path)(t.path,o.InvalidDataReason.POOL_REWARD_ACCOUNT_INVALID_PATH);return{type:n.PoolRewardAccountType.DEVICE_OWNED,path:r}}case n.PoolRewardAccountType.THIRD_PARTY:{const s=e.params;const c=(0,d.parseHexStringOfLength)(s.rewardAccountHex,i.REWARD_ACCOUNT_HEX_LENGTH,o.InvalidDataReason.POOL_REWARD_ACCOUNT_INVALID_HEX);return{type:n.PoolRewardAccountType.THIRD_PARTY,rewardAccountHex:c}}default:throw new a.InvalidData(o.InvalidDataReason.POOL_REWARD_ACCOUNT_INVALID_TYPE)}}function parsePort(e,t){(0,d.validate)((0,d.isUint16)(e),t);return e}function parseIPv4(e,t){(0,d.validate)((0,d.isString)(e),t);const r=e.split(".");(0,d.validate)(4===r.length,t);const a=s.alloc(4);for(let i=0;i<4;i++){const n=(0,d.parseIntFromStr)(r[i],o.InvalidDataReason.RELAY_INVALID_IPV4);(0,d.validate)((0,d.isUint8)(n),t);a.writeUInt8(n,i)}return a}function parseIPv6(e,t){(0,d.validate)((0,d.isString)(e),t);const r=e.split(":").join("");(0,d.validate)((0,d.isHexStringOfLength)(r,16),t);return(0,c.hex_to_buf)(r)}function parseDnsName(e,t){(0,d.validate)((0,d.isString)(e),t);(0,d.validate)(e.length<=i.MAX_DNS_NAME_LENGTH,t);(0,d.validate)(e.length>0,t);(0,d.validate)(/^[\x00-\x7F]*$/.test(e),t);(0,d.validate)(e.split("").every(e=>e.charCodeAt(0)>=32&&e.charCodeAt(0)<=126),t);return e}function parsePoolRelayParams(e){switch(e.type){case 0:{const t=e.params;return{type:0,port:"portNumber"in t&&null!=t.portNumber?parsePort(t.portNumber,o.InvalidDataReason.RELAY_INVALID_PORT):null,ipv4:"ipv4"in t&&null!=t.ipv4?parseIPv4(t.ipv4,o.InvalidDataReason.RELAY_INVALID_IPV4):null,ipv6:"ipv6"in t&&null!=t.ipv6?parseIPv6(t.ipv6,o.InvalidDataReason.RELAY_INVALID_IPV6):null}}case 1:{const r=e.params;return{type:1,port:"portNumber"in r&&null!=r.portNumber?parsePort(r.portNumber,o.InvalidDataReason.RELAY_INVALID_PORT):null,dnsName:parseDnsName(r.dnsName,o.InvalidDataReason.RELAY_INVALID_DNS)}}case 2:{const s=e.params;return{type:2,dnsName:parseDnsName(s.dnsName,o.InvalidDataReason.RELAY_INVALID_DNS)}}default:throw new a.InvalidData(o.InvalidDataReason.RELAY_INVALID_TYPE)}}function parsePoolMetadataParams(e){const t=(0,d.parseAscii)(e.metadataUrl,o.InvalidDataReason.POOL_REGISTRATION_METADATA_INVALID_URL);(0,d.validate)(t.length<=i.MAX_URL_LENGTH,o.InvalidDataReason.POOL_REGISTRATION_METADATA_INVALID_URL);const r=(0,d.parseHexStringOfLength)(e.metadataHashHex,i.AUXILIARY_DATA_HASH_LENGTH,o.InvalidDataReason.POOL_REGISTRATION_METADATA_INVALID_HASH);return{url:t,hashHex:r,__brand:"pool_metadata"}}function parsePoolParams(e){const t=parsePoolKey(e.poolKey);const r=(0,d.parseHexStringOfLength)(e.vrfKeyHashHex,i.VRF_KEY_HASH_LENGTH,o.InvalidDataReason.POOL_REGISTRATION_INVALID_VRF_KEY_HASH);const s=(0,d.parseCoin)(e.pledge,o.InvalidDataReason.POOL_REGISTRATION_INVALID_PLEDGE);const a=(0,d.parseCoin)(e.cost,o.InvalidDataReason.POOL_REGISTRATION_INVALID_COST);const n=parseMargin(e.margin);const c=parseRewardAccount(e.rewardAccount);const u=e.poolOwners.map(e=>parsePoolOwnerParams(e));const f=e.relays.map(e=>parsePoolRelayParams(e));const p=null==e.metadata?null:parsePoolMetadataParams(e.metadata);(0,d.validate)(u.length<=l.POOL_REGISTRATION_OWNERS_MAX,o.InvalidDataReason.POOL_REGISTRATION_OWNERS_TOO_MANY);(0,d.validate)(f.length<=l.POOL_REGISTRATION_RELAYS_MAX,o.InvalidDataReason.POOL_REGISTRATION_RELAYS_TOO_MANY);return{poolKey:t,vrfHashHex:r,pledge:s,cost:a,margin:n,rewardAccount:c,owners:u,relays:f,metadata:p}}t.parsePoolParams=parsePoolParams},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/transaction.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseSignTransactionRequest=t.parseTransaction=t.parseSigningMode=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/certificate.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/constants.js");const u=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/network.js");const f=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/output.js");const p=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/txAuxiliaryData.js");function parseCertificates(e){(0,d.validate)((0,d.isArray)(e),a.InvalidDataReason.CERTIFICATES_NOT_ARRAY);const t=e.map(e=>(0,c.parseCertificate)(e));return t}function parseBoolean(e,t){(0,d.validate)("boolean"==typeof e,t);return e}function parseTxInput(e){const t=(0,d.parseHexStringOfLength)(e.txHashHex,o.TX_HASH_LENGTH,a.InvalidDataReason.INPUT_INVALID_TX_HASH);const r=(0,d.parseUint32_t)(e.outputIndex,a.InvalidDataReason.INPUT_INVALID_UTXO_INDEX);return{txHashHex:t,outputIndex:r,path:null!=e.path?(0,d.parseBIP32Path)(e.path,a.InvalidDataReason.INPUT_INVALID_PATH):null}}function parseWithdrawal(e){return{amount:(0,d.parseCoin)(e.amount,a.InvalidDataReason.WITHDRAWAL_INVALID_AMOUNT),stakeCredential:(0,d.parseCredential)(e.stakeCredential,a.InvalidDataReason.WITHDRAWAL_INVALID_STAKE_CREDENTIAL)}}function parseRequiredSigner(e){switch(e.type){case i.TxRequiredSignerType.PATH:return{type:0,path:(0,d.parseBIP32Path)(e.path,a.InvalidDataReason.REQUIRED_SIGNER_INVALID_PATH)};case i.TxRequiredSignerType.HASH:return{type:1,hashHex:(0,d.parseHexStringOfLength)(e.hashHex,o.KEY_HASH_LENGTH,a.InvalidDataReason.VKEY_HASH_WRONG_LENGTH)};default:throw new s.InvalidData(a.InvalidDataReason.UNKNOWN_REQUIRED_SIGNER_TYPE)}}function parseVoter(e){const t=a.InvalidDataReason.VOTER_INVALID;switch(e.type){case i.VoterType.COMMITTEE_KEY_HASH:case i.VoterType.DREP_KEY_HASH:case i.VoterType.STAKE_POOL_KEY_HASH:return{type:e.type,keyHashHex:(0,d.parseHexStringOfLength)(e.keyHashHex,o.KEY_HASH_LENGTH,t)};case i.VoterType.COMMITTEE_KEY_PATH:case i.VoterType.DREP_KEY_PATH:case i.VoterType.STAKE_POOL_KEY_PATH:return{type:e.type,keyPath:(0,d.parseBIP32Path)(e.keyPath,t)};case i.VoterType.DREP_SCRIPT_HASH:case i.VoterType.COMMITTEE_SCRIPT_HASH:return{type:e.type,scriptHashHex:(0,d.parseHexStringOfLength)(e.scriptHashHex,o.SCRIPT_HASH_LENGTH,t)};default:(0,n.unreachable)(e)}}function parseVote(e){return{govActionId:{txHashHex:(0,d.parseHexStringOfLength)(e.govActionId.txHashHex,o.TX_HASH_LENGTH,a.InvalidDataReason.GOV_ACTION_ID_INVALID_TX_HASH),govActionIndex:(0,d.parseUint32_t)(e.govActionId.govActionIndex,a.InvalidDataReason.GOV_ACTION_ID_INVALID_INDEX)},votingProcedure:{vote:e.votingProcedure.vote,anchor:null==e.votingProcedure.anchor?null:(0,d.parseAnchor)(e.votingProcedure.anchor)}}}function parseVoterVotes(e){(0,d.validate)((0,d.isArray)(e.votes),a.InvalidDataReason.VOTER_VOTES_NOT_ARRAY);return{voter:parseVoter(e.voter),votes:e.votes.map(e=>parseVote(e))}}function parseSigningMode(e){switch(e){case i.TransactionSigningMode.ORDINARY_TRANSACTION:case i.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER:case i.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR:case i.TransactionSigningMode.MULTISIG_TRANSACTION:case i.TransactionSigningMode.PLUTUS_TRANSACTION:return e;default:throw new s.InvalidData(a.InvalidDataReason.SIGN_MODE_UNKNOWN)}}t.parseSigningMode=parseSigningMode;function parseTransaction(e){var t,r,s,i,n,c,h,m,v,_,y,w;const g=(0,u.parseNetwork)(e.network);(0,d.validate)((0,d.isArray)(e.inputs),a.InvalidDataReason.INPUTS_NOT_ARRAY);const b=e.inputs.map(e=>parseTxInput(e));(0,d.validate)((0,d.isArray)(e.outputs),a.InvalidDataReason.OUTPUTS_NOT_ARRAY);const P=e.outputs.map(t=>(0,f.parseTxOutput)(t,e.network));const S=(0,d.parseCoin)(e.fee,a.InvalidDataReason.FEE_INVALID);const C=null==e.ttl?null:(0,d.parseUint64_str)(e.ttl,{},a.InvalidDataReason.TTL_INVALID);(0,d.validate)((0,d.isArray)(null!==(t=e.certificates)&&void 0!==t?t:[]),a.InvalidDataReason.CERTIFICATES_NOT_ARRAY);const T=parseCertificates(null!==(r=e.certificates)&&void 0!==r?r:[]);(0,d.validate)((0,d.isArray)(null!==(s=e.withdrawals)&&void 0!==s?s:[]),a.InvalidDataReason.WITHDRAWALS_NOT_ARRAY);const k=(null!==(i=e.withdrawals)&&void 0!==i?i:[]).map(e=>parseWithdrawal(e));const A=null==e.auxiliaryData?null:(0,p.parseTxAuxiliaryData)(g,e.auxiliaryData);const E=null==e.validityIntervalStart?null:(0,d.parseUint64_str)(e.validityIntervalStart,{},a.InvalidDataReason.VALIDITY_INTERVAL_START_INVALID);const j=null==e.mint?null:(0,f.parseTokenBundle)(e.mint,false,d.parseInt64_str);const I=null==e.scriptDataHashHex?null:(0,d.parseHexStringOfLength)(e.scriptDataHashHex,o.SCRIPT_DATA_HASH_LENGTH,a.InvalidDataReason.SCRIPT_DATA_HASH_WRONG_LENGTH);(0,d.validate)((0,d.isArray)(null!==(n=e.collateralInputs)&&void 0!==n?n:[]),a.InvalidDataReason.COLLATERAL_INPUTS_NOT_ARRAY);const x=(null!==(c=e.collateralInputs)&&void 0!==c?c:[]).map(e=>parseTxInput(e));(0,d.validate)((0,d.isArray)(null!==(h=e.requiredSigners)&&void 0!==h?h:[]),a.InvalidDataReason.REQUIRED_SIGNERS_NOT_ARRAY);const R=(null!==(m=e.requiredSigners)&&void 0!==m?m:[]).map(e=>parseRequiredSigner(e));const M=null!=e.includeNetworkId&&parseBoolean(e.includeNetworkId,a.InvalidDataReason.NETWORK_ID_INCLUDE_INVALID);const O=null==e.collateralOutput?null:(0,f.parseTxOutput)(e.collateralOutput,e.network);(0,d.validate)((null==O?void 0:O.datum)==null,a.InvalidDataReason.COLLATERAL_INPUT_CONTAINS_DATUM);(0,d.validate)((null==O?void 0:O.referenceScriptHex)==null,a.InvalidDataReason.COLLATERAL_INPUT_CONTAINS_REFERENCE_SCRIPT);const B=null==e.totalCollateral?null:(0,d.parseCoin)(e.totalCollateral,a.InvalidDataReason.TOTAL_COLLATERAL_NOT_VALID);(0,d.validate)((0,d.isArray)(null!==(v=e.referenceInputs)&&void 0!==v?v:[]),a.InvalidDataReason.REFERENCE_INPUTS_NOT_ARRAY);const D=(null!==(_=e.referenceInputs)&&void 0!==_?_:[]).map(e=>parseTxInput(e));(0,d.validate)((0,d.isArray)(null!==(y=e.votingProcedures)&&void 0!==y?y:[]),a.InvalidDataReason.VOTING_PROCEDURES_NOT_ARRAY);const N=(null!==(w=e.votingProcedures)&&void 0!==w?w:[]).map(e=>parseVoterVotes(e));(0,d.validate)(N.length<=1,a.InvalidDataReason.VOTING_PROCEDURES_INVALID_NUMBER_OF_VOTERS);for(const F of N)(0,d.validate)(1===F.votes.length,a.InvalidDataReason.VOTING_PROCEDURES_INVALID_NUMBER_OF_VOTES);const H=null==e.treasury?null:(0,d.parseCoin)(e.treasury,a.InvalidDataReason.TREASURY_NOT_VALID);const G=null==e.donation?null:(0,d.parseUint64_str)(e.donation,{min:"1",max:l.MAX_LOVELACE_SUPPLY_STR},a.InvalidDataReason.DONATION_NOT_VALID);return{network:g,inputs:b,outputs:P,ttl:C,auxiliaryData:A,validityIntervalStart:E,withdrawals:k,certificates:T,fee:S,mint:j,scriptDataHashHex:I,collateralInputs:x,requiredSigners:R,includeNetworkId:M,collateralOutput:O,totalCollateral:B,referenceInputs:D,votingProcedures:N,treasury:H,donation:G}}t.parseTransaction=parseTransaction;function parseTxOptions(e){return{tagCborSets:(null==e?void 0:e.tagCborSets)||false}}function parseSignTransactionRequest(e){var t,r;const s=parseTransaction(e.tx);const c=parseSigningMode(e.signingMode);const l=parseTxOptions(e.options);(0,d.validate)((0,d.isArray)(null!==(t=e.additionalWitnessPaths)&&void 0!==t?t:[]),a.InvalidDataReason.ADDITIONAL_WITNESSES_NOT_ARRAY);const u=(null!==(r=e.additionalWitnessPaths)&&void 0!==r?r:[]).map(e=>(0,d.parseBIP32Path)(e,a.InvalidDataReason.INVALID_PATH));switch(c){case i.TransactionSigningMode.ORDINARY_TRANSACTION:(0,d.validate)(s.certificates.every(e=>e.type!==o.CertificateType.STAKE_POOL_REGISTRATION),a.InvalidDataReason.SIGN_MODE_ORDINARY__POOL_REGISTRATION_NOT_ALLOWED);(0,d.validate)(s.certificates.every(e=>{switch(e.type){case o.CertificateType.STAKE_REGISTRATION:case o.CertificateType.STAKE_REGISTRATION_CONWAY:case o.CertificateType.STAKE_DEREGISTRATION:case o.CertificateType.STAKE_DEREGISTRATION_CONWAY:case o.CertificateType.STAKE_DELEGATION:case o.CertificateType.VOTE_DELEGATION:return 0===e.stakeCredential.type;default:return true}}),a.InvalidDataReason.SIGN_MODE_ORDINARY__CERTIFICATE_STAKE_CREDENTIAL_ONLY_AS_PATH);(0,d.validate)(s.certificates.every(e=>{switch(e.type){case o.CertificateType.AUTHORIZE_COMMITTEE_HOT:case o.CertificateType.RESIGN_COMMITTEE_COLD:return 0===e.coldCredential.type;default:return true}}),a.InvalidDataReason.SIGN_MODE_ORDINARY__CERTIFICATE_COMMITTEE_COLD_CREDENTIAL_ONLY_AS_PATH);(0,d.validate)(s.certificates.every(e=>{switch(e.type){case o.CertificateType.DREP_REGISTRATION:case o.CertificateType.DREP_DEREGISTRATION:case o.CertificateType.DREP_UPDATE:return 0===e.dRepCredential.type;default:return true}}),a.InvalidDataReason.SIGN_MODE_ORDINARY__CERTIFICATE_DREP_CREDENTIAL_ONLY_AS_PATH);(0,d.validate)(s.withdrawals.every(e=>0===e.stakeCredential.type),a.InvalidDataReason.SIGN_MODE_ORDINARY__WITHDRAWAL_ONLY_AS_PATH);(0,d.validate)(0===s.collateralInputs.length,a.InvalidDataReason.SIGN_MODE_ORDINARY__COLLATERAL_INPUTS_NOT_ALLOWED);(0,d.validate)(null==s.collateralOutput,a.InvalidDataReason.SIGN_MODE_ORDINARY__COLLATERAL_OUTPUT_NOT_ALLOWED);(0,d.validate)(null==s.totalCollateral,a.InvalidDataReason.SIGN_MODE_ORDINARY__TOTAL_COLLATERAL_NOT_ALLOWED);(0,d.validate)(0===s.referenceInputs.length,a.InvalidDataReason.SIGN_MODE_ORDINARY__REFERENCE_INPUTS_NOT_ALLOWED);(0,d.validate)(s.votingProcedures.every(e=>{switch(e.voter.type){case i.VoterType.COMMITTEE_KEY_PATH:case i.VoterType.DREP_KEY_PATH:case i.VoterType.STAKE_POOL_KEY_PATH:return true;default:return false}}),a.InvalidDataReason.SIGN_MODE_ORDINARY__VOTER_ONLY_AS_PATH);break;case i.TransactionSigningMode.MULTISIG_TRANSACTION:(0,d.validate)(s.outputs.every(e=>e.destination.type===i.TxOutputDestinationType.THIRD_PARTY),a.InvalidDataReason.SIGN_MODE_MULTISIG__DEVICE_OWNED_ADDRESS_NOT_ALLOWED);(0,d.validate)(s.certificates.every(e=>e.type!==o.CertificateType.STAKE_POOL_REGISTRATION),a.InvalidDataReason.SIGN_MODE_MULTISIG__POOL_REGISTRATION_NOT_ALLOWED);(0,d.validate)(s.certificates.every(e=>e.type!==o.CertificateType.STAKE_POOL_RETIREMENT),a.InvalidDataReason.SIGN_MODE_MULTISIG__POOL_RETIREMENT_NOT_ALLOWED);(0,d.validate)(s.certificates.every(e=>{switch(e.type){case o.CertificateType.STAKE_REGISTRATION:case o.CertificateType.STAKE_REGISTRATION_CONWAY:case o.CertificateType.STAKE_DEREGISTRATION:case o.CertificateType.STAKE_DEREGISTRATION_CONWAY:case o.CertificateType.STAKE_DELEGATION:case o.CertificateType.VOTE_DELEGATION:return 1===e.stakeCredential.type;case o.CertificateType.AUTHORIZE_COMMITTEE_HOT:case o.CertificateType.RESIGN_COMMITTEE_COLD:return 1===e.coldCredential.type;case o.CertificateType.DREP_REGISTRATION:case o.CertificateType.DREP_DEREGISTRATION:case o.CertificateType.DREP_UPDATE:return 1===e.dRepCredential.type;default:return true}}),a.InvalidDataReason.SIGN_MODE_MULTISIG__CERTIFICATE_CREDENTIAL_ONLY_AS_SCRIPT);(0,d.validate)(s.withdrawals.every(e=>1===e.stakeCredential.type),a.InvalidDataReason.SIGN_MODE_MULTISIG__WITHDRAWAL_ONLY_AS_SCRIPT);(0,d.validate)(0===s.collateralInputs.length,a.InvalidDataReason.SIGN_MODE_MULTISIG__COLLATERAL_INPUTS_NOT_ALLOWED);(0,d.validate)(null==s.collateralOutput,a.InvalidDataReason.SIGN_MODE_MULTISIG__COLLATERAL_OUTPUT_NOT_ALLOWED);(0,d.validate)(null==s.totalCollateral,a.InvalidDataReason.SIGN_MODE_MULTISIG__TOTAL_COLLATERAL_NOT_ALLOWED);(0,d.validate)(0===s.referenceInputs.length,a.InvalidDataReason.SIGN_MODE_MULTISIG__REFERENCE_INPUTS_NOT_ALLOWED);(0,d.validate)(s.votingProcedures.every(e=>{switch(e.voter.type){case i.VoterType.COMMITTEE_SCRIPT_HASH:case i.VoterType.DREP_SCRIPT_HASH:return true;default:return false}}),a.InvalidDataReason.SIGN_MODE_MULTISIG__VOTER_ONLY_AS_SCRIPT);break;case i.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER:(0,d.validate)(s.inputs.every(e=>null==e.path),a.InvalidDataReason.SIGN_MODE_POOL_OWNER__INPUT_WITH_PATH_NOT_ALLOWED);(0,d.validate)(s.outputs.every(e=>e.destination.type===i.TxOutputDestinationType.THIRD_PARTY),a.InvalidDataReason.SIGN_MODE_POOL_OWNER__DEVICE_OWNED_ADDRESS_NOT_ALLOWED);(0,d.validate)(s.outputs.every(e=>null==e.datum),a.InvalidDataReason.SIGN_MODE_POOL_OWNER__DATUM_NOT_ALLOWED);(0,d.validate)(s.outputs.every(e=>null==e.referenceScriptHex),a.InvalidDataReason.SIGN_MODE_POOL_OWNER__REFERENCE_SCRIPT_NOT_ALLOWED);(0,d.validate)(1===s.certificates.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__SINGLE_POOL_REG_CERTIFICATE_REQUIRED);s.certificates.forEach(e=>{(0,d.validate)(e.type===o.CertificateType.STAKE_POOL_REGISTRATION,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__SINGLE_POOL_REG_CERTIFICATE_REQUIRED);(0,d.validate)(e.pool.poolKey.type===i.PoolKeyType.THIRD_PARTY,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__THIRD_PARTY_POOL_KEY_REQUIRED);(0,d.validate)(1===e.pool.owners.filter(e=>e.type===i.PoolOwnerType.DEVICE_OWNED).length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__SINGLE_DEVICE_OWNER_REQUIRED)});(0,d.validate)(0===s.withdrawals.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__WITHDRAWALS_NOT_ALLOWED);(0,d.validate)(null==s.mint,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__MINT_NOT_ALLOWED);(0,d.validate)(null==s.scriptDataHashHex,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__SCRIPT_DATA_HASH_NOT_ALLOWED);(0,d.validate)(0===s.collateralInputs.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__COLLATERAL_INPUTS_NOT_ALLOWED);(0,d.validate)(0===s.requiredSigners.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__REQUIRED_SIGNERS_NOT_ALLOWED);(0,d.validate)(null==s.collateralOutput,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__COLLATERAL_OUTPUT_NOT_ALLOWED);(0,d.validate)(null==s.totalCollateral,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__TOTAL_COLLATERAL_NOT_ALLOWED);(0,d.validate)(0===s.referenceInputs.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__REFERENCE_INPUTS_NOT_ALLOWED);(0,d.validate)(0===s.votingProcedures.length,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__VOTING_PROCEDURES_NOT_ALLOWED);(0,d.validate)(null==s.treasury,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__TREASURY_NOT_ALLOWED);(0,d.validate)(null==s.donation,a.InvalidDataReason.SIGN_MODE_POOL_OWNER__DONATION_NOT_ALLOWED);break;case i.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR:(0,d.validate)(s.outputs.every(e=>null==e.datum),a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__DATUM_NOT_ALLOWED);(0,d.validate)(s.outputs.every(e=>null==e.referenceScriptHex),a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__REFERENCE_SCRIPT_NOT_ALLOWED);(0,d.validate)(1===s.certificates.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__SINGLE_POOL_REG_CERTIFICATE_REQUIRED);s.certificates.forEach(e=>{(0,d.validate)(e.type===o.CertificateType.STAKE_POOL_REGISTRATION,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__SINGLE_POOL_REG_CERTIFICATE_REQUIRED);(0,d.validate)(e.pool.poolKey.type===i.PoolKeyType.DEVICE_OWNED,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__DEVICE_OWNED_POOL_KEY_REQUIRED);(0,d.validate)(0===e.pool.owners.filter(e=>e.type===i.PoolOwnerType.DEVICE_OWNED).length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__DEVICE_OWNED_POOL_OWNER_NOT_ALLOWED)});(0,d.validate)(0===s.withdrawals.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__WITHDRAWALS_NOT_ALLOWED);(0,d.validate)(null==s.mint,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__MINT_NOT_ALLOWED);(0,d.validate)(null==s.scriptDataHashHex,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__SCRIPT_DATA_HASH_NOT_ALLOWED);(0,d.validate)(0===s.collateralInputs.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__COLLATERAL_INPUTS_NOT_ALLOWED);(0,d.validate)(0===s.requiredSigners.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__REQUIRED_SIGNERS_NOT_ALLOWED);(0,d.validate)(null==s.collateralOutput,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__COLLATERAL_OUTPUT_NOT_ALLOWED);(0,d.validate)(null==s.totalCollateral,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__TOTAL_COLLATERAL_NOT_ALLOWED);(0,d.validate)(0===s.referenceInputs.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__REFERENCE_INPUTS_NOT_ALLOWED);(0,d.validate)(0===s.votingProcedures.length,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__VOTING_PROCEDURES_NOT_ALLOWED);(0,d.validate)(null==s.treasury,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__TREASURY_NOT_ALLOWED);(0,d.validate)(null==s.donation,a.InvalidDataReason.SIGN_MODE_POOL_OPERATOR__DONATION_NOT_ALLOWED);break;case i.TransactionSigningMode.PLUTUS_TRANSACTION:(0,d.validate)(s.certificates.every(e=>e.type!==o.CertificateType.STAKE_POOL_REGISTRATION),a.InvalidDataReason.SIGN_MODE_PLUTUS__POOL_REGISTRATION_NOT_ALLOWED);break;default:(0,n.unreachable)(c)}return{tx:s,signingMode:c,additionalWitnessPaths:u,options:l}}t.parseSignTransactionRequest=parseSignTransactionRequest},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/txAuxiliaryData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseTxAuxiliaryData=t.CVOTE_VKEY_LENGTH=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/invalidDataReason.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/output.js");t.CVOTE_VKEY_LENGTH=32;function parseCVoteDelegation(e){const t=(0,n.parseUint32_t)(e.weight,a.InvalidDataReason.CVOTE_DELEGATION_INVALID_WEIGHT);switch(e.type){case i.CIP36VoteDelegationType.KEY:return{type:e.type,voteKey:(0,n.parseHexStringOfLength)(e.voteKeyHex,o.CVOTE_PUBLIC_KEY_LENGTH,a.InvalidDataReason.CVOTE_DELEGATION_INVALID_KEY),weight:t};case i.CIP36VoteDelegationType.PATH:return{type:e.type,voteKeyPath:(0,n.parseBIP32Path)(e.voteKeyPath,a.InvalidDataReason.CVOTE_DELEGATION_INVALID_PATH),weight:t};default:throw new s.InvalidData(a.InvalidDataReason.CVOTE_DELEGATION_UNKNOWN_DELEGATION_TYPE)}}function parseCVoteDelegations(e){(0,n.validate)((0,n.isArray)(e),a.InvalidDataReason.CVOTE_REGISTRATION_DELEGATIONS_NOT_ARRAY);return e.map(e=>parseCVoteDelegation(e))}function parseCVoteRegistrationParams(e,r){switch(r.format){case i.CIP36VoteRegistrationFormat.CIP_15:(0,n.validate)(null==r.delegations,a.InvalidDataReason.CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP15);(0,n.validate)(null!=r.voteKeyHex,a.InvalidDataReason.CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP15);(0,n.validate)(null==r.votingPurpose,a.InvalidDataReason.CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP15);break;case i.CIP36VoteRegistrationFormat.CIP_36:if(null!=r.delegations)(0,n.validate)(null==r.voteKeyHex&&null==r.voteKeyPath,a.InvalidDataReason.CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP36);else{(0,n.validate)(null==r.delegations,a.InvalidDataReason.CVOTE_REGISTRATION_INCONSISTENT_WITH_CIP36);(0,n.validate)(null==r.voteKeyHex||null==r.voteKeyPath,a.InvalidDataReason.CVOTE_REGISTRATION_BOTH_KEY_AND_PATH);(0,n.validate)(null!=r.voteKeyHex||null!=r.voteKeyPath,a.InvalidDataReason.CVOTE_REGISTRATION_MISSING_VOTE_KEY)}break;default:throw new s.InvalidData(a.InvalidDataReason.CVOTE_DELEGATION_UNKNOWN_FORMAT)}const o=null==r.voteKeyHex?null:(0,n.parseHexStringOfLength)(r.voteKeyHex,t.CVOTE_VKEY_LENGTH,a.InvalidDataReason.CVOTE_REGISTRATION_INVALID_VOTE_KEY);const c=null==r.voteKeyPath?null:(0,n.parseBIP32Path)(r.voteKeyPath,a.InvalidDataReason.CVOTE_REGISTRATION_INVALID_VOTE_KEY_PATH);const l=null==r.delegations?null:parseCVoteDelegations(r.delegations);const u=null==r.votingPurpose?null:(0,n.parseUint64_str)(r.votingPurpose,{},a.InvalidDataReason.CVOTE_REGISTRATION_INVALID_VOTING_PURPOSE);return{format:r.format,votePublicKey:o,votePublicKeyPath:c,delegations:l,stakingPath:(0,n.parseBIP32Path)(r.stakingPath,a.InvalidDataReason.CVOTE_REGISTRATION_INVALID_STAKING_KEY_PATH),paymentDestination:(0,d.parseTxDestination)(e,r.paymentDestination,false),nonce:(0,n.parseUint64_str)(r.nonce,{},a.InvalidDataReason.CVOTE_REGISTRATION_INVALID_NONCE),votingPurpose:u}}function parseTxAuxiliaryData(e,t){switch(t.type){case i.TxAuxiliaryDataType.ARBITRARY_HASH:return{type:i.TxAuxiliaryDataType.ARBITRARY_HASH,hashHex:(0,n.parseHexStringOfLength)(t.params.hashHex,o.AUXILIARY_DATA_HASH_LENGTH,a.InvalidDataReason.AUXILIARY_DATA_INVALID_HASH)};case i.TxAuxiliaryDataType.CIP36_REGISTRATION:return{type:i.TxAuxiliaryDataType.CIP36_REGISTRATION,params:parseCVoteRegistrationParams(e,t.params)};default:throw new s.InvalidData(a.InvalidDataReason.AUXILIARY_DATA_UNKNOWN_TYPE)}}t.parseTxAuxiliaryData=parseTxAuxiliaryData},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NATIVE_SCRIPT_HASH_LENGTH=t.ASSET_NAME_LENGTH_MAX=t.CVOTE_PUBLIC_KEY_LENGTH=t.TOKEN_POLICY_LENGTH=t.MAX_DNS_NAME_LENGTH=t.MAX_URL_LENGTH=t.ANCHOR_HASH_LENGTH=t.DATUM_HASH_LENGTH=t.SCRIPT_DATA_HASH_LENGTH=t.ED25519_SIGNATURE_LENGTH=t.REWARD_ACCOUNT_HEX_LENGTH=t.VRF_KEY_HASH_LENGTH=t.KES_PUBLIC_KEY_LENGTH=t.AUXILIARY_DATA_HASH_LENGTH=t.TX_HASH_LENGTH=t.SCRIPT_HASH_LENGTH=t.KEY_HASH_LENGTH=t.PUBLIC_KEY_LENGTH=t.EXTENDED_PUBLIC_KEY_LENGTH=t.NativeScriptHashDisplayFormat=t.TxOutputFormat=t.TxOutputDestinationType=t.CIP36VoteDelegationType=t.TxAuxiliaryDataType=t.TransactionSigningMode=t.PoolRewardAccountType=t.PoolOwnerType=t.PoolKeyType=t.NativeScriptType=t.DatumType=t.CertificateType=t.AddressType=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");Object.defineProperty(t,"AddressType",{enumerable:true,get:function(){return s.AddressType}});Object.defineProperty(t,"CertificateType",{enumerable:true,get:function(){return s.CertificateType}});Object.defineProperty(t,"CIP36VoteDelegationType",{enumerable:true,get:function(){return s.CIP36VoteDelegationType}});Object.defineProperty(t,"DatumType",{enumerable:true,get:function(){return s.DatumType}});Object.defineProperty(t,"NativeScriptType",{enumerable:true,get:function(){return s.NativeScriptType}});Object.defineProperty(t,"PoolKeyType",{enumerable:true,get:function(){return s.PoolKeyType}});Object.defineProperty(t,"PoolOwnerType",{enumerable:true,get:function(){return s.PoolOwnerType}});Object.defineProperty(t,"PoolRewardAccountType",{enumerable:true,get:function(){return s.PoolRewardAccountType}});Object.defineProperty(t,"TransactionSigningMode",{enumerable:true,get:function(){return s.TransactionSigningMode}});Object.defineProperty(t,"TxAuxiliaryDataType",{enumerable:true,get:function(){return s.TxAuxiliaryDataType}});Object.defineProperty(t,"TxOutputDestinationType",{enumerable:true,get:function(){return s.TxOutputDestinationType}});Object.defineProperty(t,"TxOutputFormat",{enumerable:true,get:function(){return s.TxOutputFormat}});var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");Object.defineProperty(t,"NativeScriptHashDisplayFormat",{enumerable:true,get:function(){return a.NativeScriptHashDisplayFormat}});t.EXTENDED_PUBLIC_KEY_LENGTH=64;t.PUBLIC_KEY_LENGTH=32;t.KEY_HASH_LENGTH=28;t.SCRIPT_HASH_LENGTH=28;t.TX_HASH_LENGTH=32;t.AUXILIARY_DATA_HASH_LENGTH=32;t.KES_PUBLIC_KEY_LENGTH=32;t.VRF_KEY_HASH_LENGTH=32;t.REWARD_ACCOUNT_HEX_LENGTH=29;t.ED25519_SIGNATURE_LENGTH=64;t.SCRIPT_DATA_HASH_LENGTH=32;t.DATUM_HASH_LENGTH=32;t.ANCHOR_HASH_LENGTH=32;t.MAX_URL_LENGTH=128;t.MAX_DNS_NAME_LENGTH=128;t.TOKEN_POLICY_LENGTH=28;t.CVOTE_PUBLIC_KEY_LENGTH=32;t.ASSET_NAME_LENGTH_MAX=32;t.NATIVE_SCRIPT_HASH_LENGTH=28},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NativeScriptHashDisplayFormat=t.NativeScriptType=t.TransactionSigningMode=t.VoteOption=t.VoterType=t.TxRequiredSignerType=t.CIP36VoteDelegationType=t.CIP36VoteRegistrationFormat=t.TxAuxiliaryDataType=t.TxAuxiliaryDataSupplementType=t.DRepParamsType=t.CredentialParamsType=t.PoolRewardAccountType=t.PoolOwnerType=t.PoolKeyType=t.TxOutputDestinationType=t.TxOutputFormat=t.DatumType=t.MessageAddressFieldType=t.HARDENED=t.CertificateType=t.AddressType=void 0;var r;(function(e){e[e["BASE_PAYMENT_KEY_STAKE_KEY"]=0]="BASE_PAYMENT_KEY_STAKE_KEY";e[e["BASE_PAYMENT_SCRIPT_STAKE_KEY"]=1]="BASE_PAYMENT_SCRIPT_STAKE_KEY";e[e["BASE_PAYMENT_KEY_STAKE_SCRIPT"]=2]="BASE_PAYMENT_KEY_STAKE_SCRIPT";e[e["BASE_PAYMENT_SCRIPT_STAKE_SCRIPT"]=3]="BASE_PAYMENT_SCRIPT_STAKE_SCRIPT";e[e["POINTER_KEY"]=4]="POINTER_KEY";e[e["POINTER_SCRIPT"]=5]="POINTER_SCRIPT";e[e["ENTERPRISE_KEY"]=6]="ENTERPRISE_KEY";e[e["ENTERPRISE_SCRIPT"]=7]="ENTERPRISE_SCRIPT";e[e["BYRON"]=8]="BYRON";e[e["REWARD_KEY"]=14]="REWARD_KEY";e[e["REWARD_SCRIPT"]=15]="REWARD_SCRIPT"})(r=t.AddressType||(t.AddressType={}));var s;(function(e){e[e["STAKE_REGISTRATION"]=0]="STAKE_REGISTRATION";e[e["STAKE_DEREGISTRATION"]=1]="STAKE_DEREGISTRATION";e[e["STAKE_DELEGATION"]=2]="STAKE_DELEGATION";e[e["STAKE_POOL_REGISTRATION"]=3]="STAKE_POOL_REGISTRATION";e[e["STAKE_POOL_RETIREMENT"]=4]="STAKE_POOL_RETIREMENT";e[e["STAKE_REGISTRATION_CONWAY"]=7]="STAKE_REGISTRATION_CONWAY";e[e["STAKE_DEREGISTRATION_CONWAY"]=8]="STAKE_DEREGISTRATION_CONWAY";e[e["VOTE_DELEGATION"]=9]="VOTE_DELEGATION";e[e["AUTHORIZE_COMMITTEE_HOT"]=14]="AUTHORIZE_COMMITTEE_HOT";e[e["RESIGN_COMMITTEE_COLD"]=15]="RESIGN_COMMITTEE_COLD";e[e["DREP_REGISTRATION"]=16]="DREP_REGISTRATION";e[e["DREP_DEREGISTRATION"]=17]="DREP_DEREGISTRATION";e[e["DREP_UPDATE"]=18]="DREP_UPDATE"})(s=t.CertificateType||(t.CertificateType={}));t.HARDENED=2147483648;var a;(function(e){e["ADDRESS"]="address";e["KEY_HASH"]="key_hash"})(a=t.MessageAddressFieldType||(t.MessageAddressFieldType={}));var o;(function(e){e[e["HASH"]=0]="HASH";e[e["INLINE"]=1]="INLINE"})(o=t.DatumType||(t.DatumType={}));var i;(function(e){e[e["ARRAY_LEGACY"]=0]="ARRAY_LEGACY";e[e["MAP_BABBAGE"]=1]="MAP_BABBAGE"})(i=t.TxOutputFormat||(t.TxOutputFormat={}));var n;(function(e){e["THIRD_PARTY"]="third_party";e["DEVICE_OWNED"]="device_owned"})(n=t.TxOutputDestinationType||(t.TxOutputDestinationType={}));var d;(function(e){e["THIRD_PARTY"]="third_party";e["DEVICE_OWNED"]="device_owned"})(d=t.PoolKeyType||(t.PoolKeyType={}));var c;(function(e){e["THIRD_PARTY"]="third_party";e["DEVICE_OWNED"]="device_owned"})(c=t.PoolOwnerType||(t.PoolOwnerType={}));var l;(function(e){e["THIRD_PARTY"]="third_party";e["DEVICE_OWNED"]="device_owned"})(l=t.PoolRewardAccountType||(t.PoolRewardAccountType={}));var u;(function(e){e[e["KEY_PATH"]=0]="KEY_PATH";e[e["KEY_HASH"]=1]="KEY_HASH";e[e["SCRIPT_HASH"]=2]="SCRIPT_HASH"})(u=t.CredentialParamsType||(t.CredentialParamsType={}));var f;(function(e){e[e["KEY_PATH"]=0]="KEY_PATH";e[e["KEY_HASH"]=1]="KEY_HASH";e[e["SCRIPT_HASH"]=2]="SCRIPT_HASH";e[e["ABSTAIN"]=3]="ABSTAIN";e[e["NO_CONFIDENCE"]=4]="NO_CONFIDENCE"})(f=t.DRepParamsType||(t.DRepParamsType={}));var p;(function(e){e["CIP36_REGISTRATION"]="cip36_voting_registration"})(p=t.TxAuxiliaryDataSupplementType||(t.TxAuxiliaryDataSupplementType={}));var h;(function(e){e["ARBITRARY_HASH"]="arbitrary_hash";e["CIP36_REGISTRATION"]="cip36_registration"})(h=t.TxAuxiliaryDataType||(t.TxAuxiliaryDataType={}));var m;(function(e){e["CIP_15"]="cip_15";e["CIP_36"]="cip_36"})(m=t.CIP36VoteRegistrationFormat||(t.CIP36VoteRegistrationFormat={}));var v;(function(e){e["PATH"]="cip36_vote_key_path";e["KEY"]="cip36_vote_key_keyHex"})(v=t.CIP36VoteDelegationType||(t.CIP36VoteDelegationType={}));var _;(function(e){e["PATH"]="required_signer_path";e["HASH"]="required_signer_hash"})(_=t.TxRequiredSignerType||(t.TxRequiredSignerType={}));var y;(function(e){e[e["COMMITTEE_KEY_HASH"]=0]="COMMITTEE_KEY_HASH";e[e["COMMITTEE_KEY_PATH"]=100]="COMMITTEE_KEY_PATH";e[e["COMMITTEE_SCRIPT_HASH"]=1]="COMMITTEE_SCRIPT_HASH";e[e["DREP_KEY_HASH"]=2]="DREP_KEY_HASH";e[e["DREP_KEY_PATH"]=102]="DREP_KEY_PATH";e[e["DREP_SCRIPT_HASH"]=3]="DREP_SCRIPT_HASH";e[e["STAKE_POOL_KEY_HASH"]=4]="STAKE_POOL_KEY_HASH";e[e["STAKE_POOL_KEY_PATH"]=104]="STAKE_POOL_KEY_PATH"})(y=t.VoterType||(t.VoterType={}));var w;(function(e){e[e["NO"]=0]="NO";e[e["YES"]=1]="YES";e[e["ABSTAIN"]=2]="ABSTAIN"})(w=t.VoteOption||(t.VoteOption={}));var g;(function(e){e["ORDINARY_TRANSACTION"]="ordinary_transaction";e["MULTISIG_TRANSACTION"]="multisig_transaction";e["POOL_REGISTRATION_AS_OWNER"]="pool_registration_as_owner";e["POOL_REGISTRATION_AS_OPERATOR"]="pool_registration_as_operator";e["PLUTUS_TRANSACTION"]="plutus_transaction"})(g=t.TransactionSigningMode||(t.TransactionSigningMode={}));var b;(function(e){e["PUBKEY_DEVICE_OWNED"]="pubkey_device_owned";e["PUBKEY_THIRD_PARTY"]="pubkey_third_party";e["ALL"]="all";e["ANY"]="any";e["N_OF_K"]="n_of_k";e["INVALID_BEFORE"]="invalid_before";e["INVALID_HEREAFTER"]="invalid_hereafter"})(b=t.NativeScriptType||(t.NativeScriptType={}));var P;(function(e){e["BECH32"]="bech32";e["POLICY_ID"]="policyId"})(P=t.NativeScriptHashDisplayFormat||(t.NativeScriptHashDisplayFormat={}))},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getVersionString=t.stripRetcodeFromResponse=t.chunkBy=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js");const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js");const sum=e=>e.reduce((e,t)=>e+t,0);function chunkBy(e,t){(0,a.assert)((0,o.isBuffer)(e),"invalid buffer");(0,a.assert)((0,o.isArray)(t),"invalid chunks");for(const r of t){(0,a.assert)((0,o.isInteger)(r),"bad chunk length");(0,a.assert)(r>0,"bad chunk length")}(0,a.assert)(e.length<=sum(t),"data too short");let s=0;const i=[];const n=e.length-sum(t);for(const d of[...t,n]){i.push(e.slice(s,s+d));s+=d}return i}t.chunkBy=chunkBy;function stripRetcodeFromResponse(e){(0,a.assert)((0,o.isBuffer)(e),"invalid buffer");(0,a.assert)(e.length>=2,"response too short");const t=e.length-2;const r=(0,i.buf_to_uint16)(e.slice(t,t+2));(0,a.assert)(36864===r,`Invalid retcode ${r}`);return e.slice(0,t)}t.stripRetcodeFromResponse=stripRetcodeFromResponse;t["default"]={hex_to_buf:i.hex_to_buf,buf_to_hex:i.buf_to_hex,assert:a.assert,base58_encode:s.base58_encode,bech32_encodeAddress:s.bech32_encodeAddress,bech32_decodeAddress:s.bech32_decodeAddress,chunkBy,stripRetcodeFromResponse};function getVersionString(e){const t=e.flags.isAppXS?"-NanoS":"";return`${e.major}.${e.minor}.${e.patch}${t}`}t.getVersionString=getVersionString},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.bech32_decodeAddress=t.bech32_encodeAddress=t.base58_decode=t.base58_encode=t.str_to_path=void 0;const o=a(r("../../node_modules/base-x/src/index.js"));const i=a(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/node_modules/bech32/index.js"));const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const c=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const l=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");const u="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const f=(0,o.default)(u);const p=0;function parseBIP32Index(e,t){let r=0;if(e.endsWith("'")){e=e.slice(0,-1);r=d.HARDENED}const s=(0,l.parseIntFromStr)(e,t);(0,l.validate)(s>=0,t);(0,l.validate)(s<d.HARDENED,t);return r+s}function str_to_path(e){const t=n.InvalidDataReason.INVALID_PATH;(0,l.validate)((0,l.isString)(e),t);(0,l.validate)(e.length>0,t);return e.split("/").map(e=>{return parseBIP32Index(e,t)})}t.str_to_path=str_to_path;function base58_encode(e){(0,c.assert)((0,l.isBuffer)(e),"invalid buffer");return f.encode(e)}t.base58_encode=base58_encode;const isValidBase58=e=>(0,l.isString)(e)&&[...e].every(e=>u.includes(e));function base58_decode(e){(0,c.assert)(isValidBase58(e),"invalid base58 string");return f.decode(e)}t.base58_decode=base58_decode;function getShelleyAddressPrefix(e){let t="";const r=(240&e[0])>>4;switch(r){case d.AddressType.REWARD_KEY:case d.AddressType.REWARD_SCRIPT:t="stake";break;default:t="addr"}const s=15&e[0];if(s===p)t+="_test";return t}function bech32_encodeAddress(e){(0,c.assert)((0,l.isBuffer)(e),"invalid buffer");const t=i.default.toWords(e);const r=150;return i.default.encode(getShelleyAddressPrefix(e),t,r)}t.bech32_encodeAddress=bech32_encodeAddress;function bech32_decodeAddress(e){const{words:t}=i.default.decode(e,1e3);return s.from(i.default.fromWords(t))}t.bech32_decodeAddress=bech32_decodeAddress},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.unreachable=t.assert=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/errorBase.js");function assert(e,t){const r=t?`: ${t}`:"";if(!e)throw new s.ErrorBase(`Assertion failed${r}`)}t.assert=assert;function unreachable(e){assert(false,"Unreachable code hit")}t.unreachable=unreachable},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.parseAnchor=t.parseCredential=t.parseCoin=t.parseIntFromStr=t.parseBIP32Path=t.parseUint8_t=t.parseUint16_t=t.parseUint32_t=t.parseUint64_str=t.parseInt64_str=t.parseHexStringOfLength=t.parseHexString=t.parseAscii=t.validate=t.isInt64Bigint=t.isInt64Number=t.isInt64str=t.isIntStr=t.isUint64Bigint=t.isUint64Number=t.isUint64str=t.isUintStr=t.isValidPath=t.isHexStringOfLength=t.isHexString=t.isUint8=t.isUint16=t.isUint32=t.isBuffer=t.isArray=t.isInteger=t.isString=t.MAX_INT_64_STR=t.MIN_INT_64_STR=t.MAX_UINT_64_STR=void 0;const a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/parsing/constants.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/errors/index.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/internal.js");const n=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const d=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");t.MAX_UINT_64_STR="18446744073709551615";t.MIN_INT_64_STR="-9223372036854775808";t.MAX_INT_64_STR="9223372036854775807";const isString=e=>"string"==typeof e;t.isString=isString;const isInteger=e=>Number.isInteger(e);t.isInteger=isInteger;const isArray=e=>Array.isArray(e);t.isArray=isArray;const isBuffer=e=>s.isBuffer(e);t.isBuffer=isBuffer;const isUint32=e=>(0,t.isInteger)(e)&&e>=0&&e<=4294967295;t.isUint32=isUint32;const isUint16=e=>(0,t.isInteger)(e)&&e>=0&&e<=65535;t.isUint16=isUint16;const isUint8=e=>(0,t.isInteger)(e)&&e>=0&&e<=255;t.isUint8=isUint8;const isHexString=e=>(0,t.isString)(e)&&e.length%2===0&&/^[0-9a-fA-F]*$/.test(e);t.isHexString=isHexString;const isHexStringOfLength=(e,r)=>(0,t.isHexString)(e)&&e.length===2*r;t.isHexStringOfLength=isHexStringOfLength;const isValidPath=e=>(0,t.isArray)(e)&&e.every(e=>(0,t.isUint32)(e))&&e.length<=5;t.isValidPath=isValidPath;const isUintStr=(e,r)=>{var s,a;const o=null!==(s=r.min)&&void 0!==s?s:"0";const i=null!==(a=r.max)&&void 0!==a?a:t.MAX_UINT_64_STR;return(0,t.isString)(e)&&/^[0-9]*$/.test(e)&&e.length>0&&e.length<=i.length&&(1===e.length||"0"!==e[0])&&(e.length<i.length||e<=i)&&(e.length>o.length||e>=o)};t.isUintStr=isUintStr;const isUint64str=e=>(0,t.isUintStr)(e,{});t.isUint64str=isUint64str;const isUint64Number=e=>(0,t.isInteger)(e)&&e>=0&&e<=Number.MAX_SAFE_INTEGER;t.isUint64Number=isUint64Number;const isUint64Bigint=e=>"bigint"==typeof e&&(0,t.isUint64str)(e.toString());t.isUint64Bigint=isUint64Bigint;const isIntStr=(e,r)=>{var s,a;const o=null!==(s=r.min)&&void 0!==s?s:t.MIN_INT_64_STR;const i=null!==(a=r.max)&&void 0!==a?a:t.MAX_INT_64_STR;const n=(0,t.isString)(e)&&/^-?[0-9]*$/.test(e)&&e.length>0;const d=(0,t.isString)(e)&&e.startsWith("-")&&(2===e.length||"0"!==e[1])&&(e.length<o.length||e<=o);const c=(0,t.isString)(e)&&!e.startsWith("-")&&(1===e.length||"0"!==e[0])&&(e.length<i.length||e<=i);return n&&(d||c)};t.isIntStr=isIntStr;const isInt64str=e=>(0,t.isIntStr)(e,{});t.isInt64str=isInt64str;const isInt64Number=e=>(0,t.isInteger)(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER;t.isInt64Number=isInt64Number;const isInt64Bigint=e=>"bigint"==typeof e&&(0,t.isInt64str)(e.toString());t.isInt64Bigint=isInt64Bigint;function validate(e,t){if(!e)throw new o.InvalidData(t)}t.validate=validate;function parseAscii(e,r){validate((0,t.isString)(e),r);validate(e.split("").every(e=>e.charCodeAt(0)>=32&&e.charCodeAt(0)<=126),r);return e}t.parseAscii=parseAscii;function parseHexString(e,r){validate((0,t.isHexString)(e),r);return e}t.parseHexString=parseHexString;function parseHexStringOfLength(e,r,s){validate((0,t.isHexStringOfLength)(e,r),s);return e}t.parseHexStringOfLength=parseHexStringOfLength;function parseInt64_str(e,r,s){switch(typeof e){case"string":validate((0,t.isInt64str)(e)&&(0,t.isIntStr)(e,r),s);return e;case"number":validate((0,t.isInt64Number)(e)&&(0,t.isIntStr)(e.toString(),r),s);return e.toString();case"bigint":validate((0,t.isInt64Bigint)(e)&&(0,t.isIntStr)(e.toString(),r),s);return e.toString();default:validate(false,s)}}t.parseInt64_str=parseInt64_str;function parseUint64_str(e,r,s){switch(typeof e){case"string":validate((0,t.isUint64str)(e)&&(0,t.isUintStr)(e,r),s);return e;case"number":validate((0,t.isUint64Number)(e)&&(0,t.isUintStr)(e.toString(),r),s);return e.toString();case"bigint":validate((0,t.isUint64Bigint)(e)&&(0,t.isUintStr)(e.toString(),r),s);return e.toString();default:validate(false,s)}}t.parseUint64_str=parseUint64_str;function parseUint32_t(e,r){validate((0,t.isUint32)(e),r);return e}t.parseUint32_t=parseUint32_t;function parseUint16_t(e,r){validate((0,t.isUint16)(e),r);return e}t.parseUint16_t=parseUint16_t;function parseUint8_t(e,r){validate((0,t.isUint8)(e),r);return e}t.parseUint8_t=parseUint8_t;function parseBIP32Path(e,r){validate((0,t.isValidPath)(e),r);return e}t.parseBIP32Path=parseBIP32Path;function parseIntFromStr(e,r){validate((0,t.isString)(e),r);const s=parseInt(e,10);validate(`${s}`===e,r);validate(!isNaN(s),r);validate((0,t.isInteger)(s),r);return s}t.parseIntFromStr=parseIntFromStr;function parseCoin(e,t){return parseUint64_str(e,{max:a.MAX_LOVELACE_SUPPLY_STR},t)}t.parseCoin=parseCoin;function parseCredential(e,t){switch(e.type){case n.CredentialParamsType.KEY_PATH:return{type:0,path:parseBIP32Path(e.keyPath,t)};case n.CredentialParamsType.KEY_HASH:return{type:2,keyHashHex:parseHexStringOfLength(e.keyHashHex,i.KEY_HASH_LENGTH,t)};case n.CredentialParamsType.SCRIPT_HASH:return{type:1,scriptHashHex:parseHexStringOfLength(e.scriptHashHex,i.SCRIPT_HASH_LENGTH,t)};default:(0,d.unreachable)(e)}}t.parseCredential=parseCredential;function parseAnchor(e){const t=parseAscii(e.url,o.InvalidDataReason.ANCHOR_INVALID_URL);validate(t.length<=i.MAX_URL_LENGTH,o.InvalidDataReason.ANCHOR_INVALID_URL);const r=parseHexStringOfLength(e.hashHex,i.ANCHOR_HASH_LENGTH,o.InvalidDataReason.ANCHOR_INVALID_HASH);return{url:t,hashHex:r,__brand:"anchor"}}t.parseAnchor=parseAnchor},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/serialize.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.serializeAnchor=t.serializeCredential=t.serializeCoin=t.serializeOptionFlag=t.path_to_buf=t.buf_to_hex=t.hex_to_buf=t.int64_to_buf=t.uint64_to_buf=t.buf_to_uint32=t.uint32_to_buf=t.buf_to_uint16=t.uint16_to_buf=t.uint8_to_buf=void 0;const a=r("../../node_modules/int64-buffer/int64-buffer.js");const o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/assert.js");const i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/parse.js");function uint8_to_buf(e){(0,o.assert)((0,i.isUint8)(e),"invalid uint8");const t=s.alloc(1);t.writeUInt8(e,0);return t}t.uint8_to_buf=uint8_to_buf;function uint16_to_buf(e){(0,o.assert)((0,i.isUint16)(e),"invalid uint16");const t=s.alloc(2);t.writeUInt16BE(e,0);return t}t.uint16_to_buf=uint16_to_buf;function buf_to_uint16(e){(0,o.assert)(2===e.length,"invalid uint16 buffer");return e.readUIntBE(0,2)}t.buf_to_uint16=buf_to_uint16;function uint32_to_buf(e){(0,o.assert)((0,i.isUint32)(e),"invalid uint32");const t=s.alloc(4);t.writeUInt32BE(e,0);return t}t.uint32_to_buf=uint32_to_buf;function buf_to_uint32(e){(0,o.assert)(4===e.length,"invalid uint32 buffer");return e.readUIntBE(0,4)}t.buf_to_uint32=buf_to_uint32;function uint64_to_buf(e){(0,o.assert)((0,i.isUint64str)(e),"invalid uint64_str");const t=new a.Uint64BE(e,10).toBuffer();(0,o.assert)(8===t.length,"invalid data length");return t}t.uint64_to_buf=uint64_to_buf;function int64_to_buf(e){(0,o.assert)((0,i.isInt64str)(e),"invalid int64_str");const t=new a.Int64BE(e,10).toBuffer();(0,o.assert)(8===t.length,"invalid data length");return t}t.int64_to_buf=int64_to_buf;function hex_to_buf(e){(0,o.assert)((0,i.isHexString)(e),"invalid hex string");return s.from(e,"hex")}t.hex_to_buf=hex_to_buf;function buf_to_hex(e){return e.toString("hex")}t.buf_to_hex=buf_to_hex;function path_to_buf(e){(0,o.assert)((0,i.isValidPath)(e),"invalid bip32 path");const t=s.alloc(1+4*e.length);t.writeUInt8(e.length,0);for(let r=0;r<e.length;r++)t.writeUInt32BE(e[r],1+4*r);return t}t.path_to_buf=path_to_buf;function serializeOptionFlag(e){const t={NO:1,YES:2};const r=e?t.YES:t.NO;return uint8_to_buf(r)}t.serializeOptionFlag=serializeOptionFlag;function serializeCoin(e){return s.concat([uint64_to_buf(e)])}t.serializeCoin=serializeCoin;function serializeCredential(e){switch(e.type){case 0:return s.concat([uint8_to_buf(e.type),path_to_buf(e.path)]);case 2:return s.concat([uint8_to_buf(e.type),hex_to_buf(e.keyHashHex)]);case 1:return s.concat([uint8_to_buf(e.type),hex_to_buf(e.scriptHashHex)]);default:(0,o.unreachable)(e)}}t.serializeCredential=serializeCredential;function serializeAnchor(e){if(null==e){return s.concat([serializeOptionFlag(false)])}return s.concat([serializeOptionFlag(true),hex_to_buf(e.hashHex),s.from(e.url,"ascii")])}t.serializeAnchor=serializeAnchor},"../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/node_modules/bech32/index.js":e=>{"use strict";var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var r={};for(var s=0;s<t.length;s++){var a=t.charAt(s);if(void 0!==r[a])throw new TypeError(a+" is ambiguous");r[a]=s}function polymodStep(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function prefixChk(e){var t=1;for(var r=0;r<e.length;++r){var s=e.charCodeAt(r);if(s<33||s>126)return"Invalid prefix ("+e+")";t=polymodStep(t)^s>>5}t=polymodStep(t);for(r=0;r<e.length;++r){var a=e.charCodeAt(r);t=polymodStep(t)^31&a}return t}function encode(e,r,s){s=s||90;if(e.length+7+r.length>s)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var a=prefixChk(e);if("string"==typeof a)throw new Error(a);var o=e+"1";for(var i=0;i<r.length;++i){var n=r[i];if(n>>5!==0)throw new Error("Non 5-bit word");a=polymodStep(a)^n;o+=t.charAt(n)}for(i=0;i<6;++i)a=polymodStep(a);a^=1;for(i=0;i<6;++i){var d=a>>(5-i)*5&31;o+=t.charAt(d)}return o}function __decode(e,t){t=t||90;if(e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var s=e.toLowerCase();var a=e.toUpperCase();if(e!==s&&e!==a)return"Mixed-case string "+e;e=s;var o=e.lastIndexOf("1");if(-1===o)return"No separator character for "+e;if(0===o)return"Missing prefix for "+e;var i=e.slice(0,o);var n=e.slice(o+1);if(n.length<6)return"Data too short";var d=prefixChk(i);if("string"==typeof d)return d;var c=[];for(var l=0;l<n.length;++l){var u=n.charAt(l);var f=r[u];if(void 0===f)return"Unknown character "+u;d=polymodStep(d)^f;if(!(l+6>=n.length))c.push(f)}if(1!==d)return"Invalid checksum for "+e;return{prefix:i,words:c}}function decodeUnsafe(){var e=__decode.apply(null,arguments);if("object"==typeof e)return e}function decode(e){var t=__decode.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)}function convert(e,t,r,s){var a=0;var o=0;var i=(1<<r)-1;var n=[];for(var d=0;d<e.length;++d){a=a<<t|e[d];o+=t;while(o>=r){o-=r;n.push(a>>o&i)}}if(s){if(o>0)n.push(a<<r-o&i)}else{if(o>=t)return"Excess padding";if(a<<r-o&i)return"Non-zero padding"}return n}function toWordsUnsafe(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t}function toWords(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t;throw new Error(t)}function fromWordsUnsafe(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t}function fromWords(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t;throw new Error(t)}e.exports={decodeUnsafe:decodeUnsafe,decode:decode,encode:encode,toWordsUnsafe:toWordsUnsafe,toWords:toWords,fromWordsUnsafe:fromWordsUnsafe,fromWords:fromWords}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/AssetInfoProvider/BlockfrostAssetProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostAssetProvider:()=>BlockfrostAssetProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var n=r("../../node_modules/lodash/omit.js");class BlockfrostAssetProvider extends o.BlockfrostProvider{mapNftMetadata(e){var t,r,a,o;const n=this.metadatumToString((null===(t=e.onchain_metadata)||void 0===t?void 0:t.image)||(null===(r=e.metadata)||void 0===r?void 0:r.logo));const d=(null===(a=e.onchain_metadata)||void 0===a?void 0:a.name)||(null===(o=e.metadata)||void 0===o?void 0:o.name);if(!n||!d)return null;try{var c,l,u,f;return{description:this.metadatumToString((null===(c=e.onchain_metadata)||void 0===c?void 0:c.description)||(null===(l=e.metadata)||void 0===l?void 0:l.description)),files:Array.isArray(null===(u=e.onchain_metadata)||void 0===u?void 0:u.files)?e.onchain_metadata.files.map(e=>{const t=e.mediaType;const r=e.name;const a=this.metadatumToString(e.src);if(!a||!t)return null;try{return{mediaType:s.MediaType(t),name:r,otherProperties:this.mapFileMetadataOtherProperties(e),src:s.Uri(a)}}catch(o){this.logger.warn("Failed to parse onchain_metadata file",e,o);return null}}).filter(i.isNotNil):void 0,image:s.Uri(n),mediaType:(null===(f=e.onchain_metadata)||void 0===f?void 0:f.mediaType)?s.ImageMediaType(e.onchain_metadata.mediaType):void 0,name:d,otherProperties:this.mapNftMetadataOtherProperties(e.onchain_metadata),version:this.mapNftMetadataVersion(e.onchain_metadata)}}catch(p){this.logger.warn("Failed to parse nft metadata",e,p);return null}}metadatumToString(e){let t;if(Array.isArray(e)){const r=e.map(e=>this.asString(e)).filter(i.isNotNil);t=r.join("")}else{t=this.asString(e)}return t}objToMetadatum(e){if("string"==typeof e)return e;if("number"==typeof e)return BigInt(e);if("object"==typeof e){if(null===e)return"";if(Array.isArray(e)){return e.map(e=>this.objToMetadatum(e))}return new Map(Object.entries(e).map(([e,t])=>[e,this.objToMetadatum(t)]))}return""}mapNftMetadataVersion(e){return"string"==typeof(null==e?void 0:e.version)?e.version:"1.0"}mapFileMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","mediaType","src"])}mapNftMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","image","description","mediaType","files","version"])}mapOtherProperties(e,t){if(!e){return}const r=Object.entries(n(e,t));if(0===r.length)return;return new Map(r.map(([e,t])=>[e,this.objToMetadatum(t)]))}mapTokenMetadata(e,t){var r,s,a,o,i,n,d,c,l;return{assetId:e,decimals:(null===(r=t.metadata)||void 0===r?void 0:r.decimals)||void 0,desc:this.metadatumToString((null===(s=t.metadata)||void 0===s?void 0:s.description)||(null===(a=t.onchain_metadata)||void 0===a?void 0:a.description)),icon:this.metadatumToString((null===(o=t.metadata)||void 0===o?void 0:o.logo)||(null===(i=t.onchain_metadata)||void 0===i?void 0:i.image)),name:(null===(n=t.metadata)||void 0===n?void 0:n.name)||(null===(d=t.onchain_metadata)||void 0===d?void 0:d.name),ticker:(null===(c=t.metadata)||void 0===c?void 0:c.ticker)||void 0,url:(null===(l=t.metadata)||void 0===l?void 0:l.url)||void 0,version:"1.0"}}async getAsset({assetId:e,extraData:t}){try{const r=await this.request(`assets/${e.toString()}`);const s=a.AssetId.getAssetName(e);const o=a.PolicyId(r.policy_id);const i=BigInt(r.quantity);return{assetId:e,fingerprint:a.AssetFingerprint(r.fingerprint),name:s,nftMetadata:(null==t?void 0:t.nftMetadata)?this.mapNftMetadata(r):null,policyId:o,quantity:i,supply:i,tokenMetadata:(null==t?void 0:t.tokenMetadata)?this.mapTokenMetadata(e,r):null}}catch(n){this.logger.error("getAsset failed",e,t);throw this.toProviderError(n)}}getAssets({assetIds:e,extraData:t}){return Promise.all(e.map(e=>this.getAsset({assetId:e,extraData:t})))}constructor(e,t){super(e,t);this.asString=e=>"string"==typeof e?e:void 0}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/ChainHistoryProvider/BlockfrostChainHistoryProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostChainHistoryProvider:()=>BlockfrostChainHistoryProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var _=r("../../node_modules/lodash/omit.js");var y=r("../../node_modules/lodash/uniq.js");var w=r("../../node_modules/buffer/index.js")["Buffer"];const g=2147483647;const compareTx=(e,t)=>e.block_height-t.block_height||e.tx_index-t.tx_index;class BlockfrostChainHistoryProvider extends s.BlockfrostProvider{async fetchRedeemers({hash:e,redeemer_count:t}){if(!t)return;return this.request(`txs/${e}/redeemers`).then(e=>e.map(({purpose:e,script_hash:t,unit_mem:r,unit_steps:s,tx_index:a})=>({data:w.from(t),executionUnits:{memory:Number.parseInt(r),steps:Number.parseInt(s)},index:a,purpose:(()=>{switch(e){case"cert":return i.RedeemerPurpose.certificate;case"reward":return i.RedeemerPurpose.withdrawal;case"mint":return i.RedeemerPurpose.mint;case"spend":return i.RedeemerPurpose.spend;default:return e}})()})))}async fetchWithdrawals({withdrawal_count:e,hash:t}){if(!e)return;return this.request(`txs/${t}/withdrawals`).then(e=>e.map(({address:e,amount:t})=>({quantity:BigInt(t),stakeAddress:n.RewardAccount(e)})))}gatherMintsFromUtxos({asset_mint_or_burn_count:e},{inputs:t,outputs:r}){if(!e)return;const s=r.flatMap(e=>e.amount);const a=t.flatMap(e=>e.amount);const o=s.filter(e=>!a.some(t=>e.unit===t.unit));return new Map(o.map(e=>[d.AssetId(e.unit),BigInt(e.quantity)]))}async fetchPoolRetireCerts(e){return this.request(`txs/${e}/pool_retires`).then(e=>e.map(({pool_id:e,retiring_epoch:t,cert_index:r})=>({__typename:c.CertificateType.PoolRetirement,cert_index:r,epoch:l.EpochNo(t),poolId:u.PoolId(e)})))}async fetchPoolUpdateCerts(e){return this.request(`txs/${e}/pool_updates`).then(e=>e.map(({pool_id:e,cert_index:t,fixed_cost:r,margin_cost:s,pledge:a,reward_account:o,vrf_key:i})=>({__typename:c.CertificateType.PoolRegistration,cert_index:t,poolId:u.PoolId(e),poolParameters:{cost:BigInt(r),id:e,margin:f.FractionUtils.toFraction(s),owners:[],pledge:BigInt(a),relays:[],rewardAccount:o,vrf:i}})))}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){return this.fetchCBOR(e).then(t=>{const r=p.Transaction.fromCbor(p.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null})}async fetchMirCerts(e){return this.request(`txs/${e}/mirs`).then(e=>e.map(({address:e,amount:t,cert_index:r,pot:s})=>({__typename:c.CertificateType.MIR,cert_index:r,kind:c.MirCertificateKind.ToStakeCreds,pot:"reserve"===s?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,quantity:BigInt(t),rewardAccount:n.RewardAccount(e)})))}async fetchStakeCerts(e){return this.request(`txs/${e}/stakes`).then(e=>e.map(({address:e,cert_index:t,registration:r})=>({__typename:r?c.CertificateType.StakeRegistration:c.CertificateType.StakeDeregistration,cert_index:t,stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:h.CredentialType.KeyHash}})))}async fetchDelegationCerts(e){return this.request(`txs/${e}/delegations`).then(e=>e.map(({address:e,pool_id:t,cert_index:r})=>({__typename:c.CertificateType.StakeDelegation,cert_index:r,poolId:u.PoolId(t),stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:h.CredentialType.KeyHash}})))}async fetchCertificates({pool_retire_count:e,pool_update_count:t,mir_cert_count:r,stake_cert_count:s,delegation_count:a,hash:o}){if(e+t+r+s+a===0)return;return Promise.all([e?this.fetchPoolRetireCerts(o):[],t?this.fetchPoolUpdateCerts(o):[],r?this.fetchMirCerts(o):[],s?this.fetchStakeCerts(o):[],a?this.fetchDelegationCerts(o):[]]).then(e=>e.flat().sort((e,t)=>t.cert_index-e.cert_index).map(e=>e))}async fetchJsonMetadataAsAuxiliaryData(e){const t=void 0;return this.request(`txs/${e}/metadata`).then(e=>{const r=(0,a.blockfrostMetadataToTxMetadata)(e);return r&&r.size>0?{blob:r}:t}).catch(e=>{if((0,a.isBlockfrostNotFoundError)(e)){return t}throw e})}async fetchEpochNo(e){const t=await this.networkInfoProvider.eraSummaries().then(m.createSlotEpochCalc);return t(e)}async fetchEpochParameters(e){return await this.request(`epochs/${e}/parameters`)}async processCertificates(e,t){if(!t)return;const r=await this.fetchEpochNo(l.Slot(e.slot));const{pool_deposit:s,key_deposit:a}=await this.fetchEpochParameters(r);return t.map(t=>{const r=_(t,"cert_index");switch(r.__typename){case c.CertificateType.PoolRegistration:{r.poolParameters.owners=[];r.poolParameters.relays=[];const o=void 0===e.deposit||""===e.deposit||"0"===e.deposit?0n:BigInt(s);delete r.poolParameters.metadataJson;return{...r,deposit:o}}case c.CertificateType.StakeRegistration:{const i=BigInt(a);return{...r,__typename:c.CertificateType.Registration,deposit:i}}case c.CertificateType.StakeDeregistration:{const n=BigInt(a);return{...r,__typename:c.CertificateType.Unregistration,deposit:n}}default:return r}})}async transactionDetailsUsingAPIs(e){const t=i.TransactionId(e.hash);const[r,s,a,o]=await Promise.all([this.fetchCertificates(e),this.fetchWithdrawals(e),this.fetchUtxos(t),this.fetchJsonMetadataAsAuxiliaryData(t)]);const{inputs:n,outputs:d,collaterals:c}=this.transactionUtxos(a);const l=this.gatherMintsFromUtxos(e,a);const u=l?new Map([...l].sort()):l;const f=e.valid_contract?i.InputSource.inputs:i.InputSource.collaterals;const p=this.mapTxBody({certificates:await this.processCertificates(e,r),collateralReturn:void 0,collaterals:c,fee:BigInt(e.fees),inputs:n,mint:u,outputs:d,proposalProcedures:void 0,validityInterval:{invalidBefore:this.parseValidityInterval(e.invalid_before),invalidHereafter:this.parseValidityInterval(e.invalid_hereafter)},votingProcedures:void 0,withdrawals:s},f);return{auxiliaryData:o,blockHeader:this.mapBlockHeader(e),body:p,id:t,index:e.index,inputSource:f,txSize:e.size,witness:this.witnessFromRedeemers(await this.fetchRedeemers(e))}}witnessFromRedeemers(e){const t=w.from("not implemented");if(e){for(const r of e)r.data=t}return{redeemers:e,signatures:new Map}}async transactionDetailsUsingCBOR(e){const t=i.TransactionId(e.hash);const r=await this.fetchDetailsFromCBOR(t);if(!r)return;const s=await this.request(`txs/${t}/utxos`);const{inputs:a,outputs:o,collaterals:n}=this.transactionUtxos(s,r);const d=e.valid_contract?i.InputSource.inputs:i.InputSource.collaterals;const c=this.mapTxBody({certificates:await this.processCertificates(e,r.body.certificates),collateralReturn:r.body.collateralReturn,collaterals:n,fee:r.body.fee,inputs:a,mint:r.body.mint?new Map([...r.body.mint].sort()):void 0,outputs:o,proposalProcedures:r.body.proposalProcedures,validityInterval:r.body.validityInterval?r.body.validityInterval:{invalidBefore:void 0,invalidHereafter:void 0},votingProcedures:r.body.votingProcedures,withdrawals:r.body.withdrawals},d);return{auxiliaryData:r.auxiliaryData,blockHeader:this.mapBlockHeader(e),body:c,id:t,index:e.index,inputSource:d,txSize:e.size,witness:this.witnessFromRedeemers(r.witness.redeemers)}}async fetchTransaction(e){try{const t=await this.request(`txs/${e.toString()}`);var r;return null!==(r=await this.transactionDetailsUsingCBOR(t))&&void 0!==r?r:await this.transactionDetailsUsingAPIs(t)}catch(s){throw this.toProviderError(s)}}transactionUtxos(e,t){const r=e.inputs.filter(e=>e.collateral).map(o.BlockfrostToCore.hydratedTxIn);const s=e.inputs.filter(e=>!e.collateral&&!e.reference).map(o.BlockfrostToCore.hydratedTxIn);const a=e.outputs.filter(e=>!e.collateral).map(e=>{const r=null==t?void 0:t.body.outputs.find(t=>t.address===e.address);return o.BlockfrostToCore.txOut(e,r)});return{collaterals:r,inputs:s,outputs:a}}async blocksByHashes({ids:e}){try{const t=await Promise.all(e.map(e=>this.request(`blocks/${e.toString()}`)));return t.map(e=>{if(!e.epoch||!e.epoch_slot||!e.height||!e.slot||!e.block_vrf){throw new v.ProviderError(v.ProviderFailure.Unknown,null,"Queried unsupported block")}return{confirmations:e.confirmations,date:new Date(1e3*e.time),epoch:l.EpochNo(e.epoch),epochSlot:e.epoch_slot,fees:BigInt(e.fees||"0"),header:{blockNo:l.BlockNo(e.height),hash:l.BlockId(e.hash),slot:l.Slot(e.slot)},nextBlock:e.next_block?l.BlockId(e.next_block):void 0,previousBlock:e.previous_block?l.BlockId(e.previous_block):void 0,size:l.BlockSize(e.size),slotLeader:l.SlotLeader(e.slot_leader),totalOutput:BigInt(e.output||"0"),txCount:e.tx_count,vrf:l.VrfVkBech32(e.block_vrf)}})}catch(r){throw this.toProviderError(r)}}async transactionsByHashes({ids:e}){return Promise.all(e.map(async e=>{const t=await this.cache.get(e);if(t)return t;try{const r=await this.fetchTransaction(e);void this.cache.set(e,r);return r}catch(s){throw this.toProviderError(s)}}))}async transactionsByAddresses({addresses:e,pagination:t,blockRange:r}){this.logger.debug(`transactionsByAddresses: ${JSON.stringify(r)} ${JSON.stringify(e)}`);try{var s;const o=null!==(s=null==r?void 0:r.lowerBound)&&void 0!==s?s:0;var n;const d=null!==(n=null==r?void 0:r.upperBound)&&void 0!==n?n:g;var c;const l=null!==(c=null==t?void 0:t.limit)&&void 0!==c?c:g;const u=await Promise.all(e.map(async e=>{return(0,a.fetchSequentially)({haveEnoughItems:(null==r?void 0:r.lowerBound)?e=>e.length>0&&e[e.length-1].block_height<r.lowerBound||e.length>=l:e=>e.length>=l,paginationOptions:t?{count:t.limit,order:t.order,page:(t.startAt+t.limit)/t.limit}:void 0,request:t=>{let s=`addresses/${e}/transactions?${t}`;if(null==r?void 0:r.lowerBound)s+=`&from=${r.lowerBound.toString()}`;if(null==r?void 0:r.upperBound)s+=`&to=${r.upperBound.toString()}`;return this.request(s)}})}));const f=u.flat(1);const p=y(f.filter(({block_height:e})=>e>=o&&e<=d).sort("desc"===t.order?(e,t)=>compareTx(t,e):compareTx).map(({tx_hash:e})=>i.TransactionId(e)));const h=await this.transactionsByHashes({ids:p});return{pageResults:h,totalResultCount:p.length}}catch(m){throw this.toProviderError(m)}}mapTxBody({collateralReturn:e,collaterals:t,fee:r,inputs:s,outputs:a,mint:o,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l,certificates:u},f){return{...f===i.InputSource.collaterals?{collateralReturn:a.length>0?a[0]:void 0,collaterals:s,fee:BigInt(0),inputs:[],outputs:[],totalCollateral:r}:{collateralReturn:null!=e?e:void 0,collaterals:t,fee:r,inputs:s,outputs:a},certificates:u,mint:o,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l}}mapBlockHeader({block:e,block_height:t,slot:r}){return{blockNo:l.BlockNo(t),hash:l.BlockId(e),slot:l.Slot(r)}}fetchUtxos(e){return this.request(`txs/${e}/utxos`)}constructor({cache:e,client:t,networkInfoProvider:r,logger:s}){super(t,s);this.parseValidityInterval=e=>l.Slot(Number.parseInt(e||""))||void 0;this.cache=e;this.networkInfoProvider=r}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/DRepProvider/BlockfrostDRepProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostDRepProvider:()=>BlockfrostDRepProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");class BlockfrostDRepProvider extends s.BlockfrostProvider{async getDRepInfo({id:e}){try{const t=a.DRepID.toCip129DRepID(e).toString();const r=await this.request(`governance/dreps/${t}`);const s=BigInt(r.amount);const i=r.active_epoch?o.EpochNo(r.active_epoch):void 0;const n=r.active;const d=r.has_script;return{active:n,activeEpoch:i,amount:s,hasScript:d,id:e}}catch(c){this.logger.error("getDRep failed",e);throw this.toProviderError(c)}}getDRepsInfo({ids:e}){return Promise.all(e.map(e=>this.getDRepInfo({id:e})))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HandleProvider/handleHttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{handleHttpProvider:()=>handleHttpProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js");const a={getPolicyIds:"/policyIds",healthCheck:"/health",resolveHandles:"/resolve"};var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js");const handleHttpProvider=e=>(0,s.createHttpProvider)({...e,apiVersion:e.apiVersion||o.apiVersion.handle,modifyData:(e,t)=>"resolveHandles"===e?{...t,check_handle:true}:{...t},paths:a,serviceSlug:"handle"})},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{createHttpProvider:()=>createHttpProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var o=r("../../node_modules/axios/lib/axios.js");const i=JSON.parse('{"version":"0.26.14"}');const isEmptyResponse=e=>""===e;const transformResponse=e=>{if(!e)return e;if("string"==typeof e)e=JSON.parse(e);return(0,a.fromSerializableObject)(e,{errorTypes:[s.ProviderError]})};const transformRequest=e=>{if(!e)return e;return JSON.stringify((0,a.toSerializableObject)(e))};const defaultModifyData=(e,t)=>({...t});const createHttpProvider=({apiVersion:e,baseUrl:t,axiosOptions:r,mapError:a,paths:n,adapter:d,logger:c,modifyData:l,serviceSlug:u})=>{const f=l||defaultModifyData;return new Proxy({},{get(l,p){const h=p;const m=n[h];if(!m)return;return async(...n)=>{try{const l={...r,adapter:d,baseURL:`${t.replace(/\/$/,"")}/v${e}/${u}`,data:f(h,n[0]),headers:{...null==r?void 0:r.headers,"Content-Type":"application/json","Version-Api":JSON.stringify(e),"Version-Software":i.version},method:"post",responseType:"json",transformRequest,transformResponse,url:m};c.debug(`Sending ${l.method} request to ${l.baseURL}${l.url} with data:`);c.debug(l.data);const p=o["default"].create(l);const v=(await p.request(l)).data;return isEmptyResponse(v)?void 0:v}catch(y){if(o["default"].isAxiosError(y)){if(y.response){const _=y.response.data;if(a)return a(_,h);throw new s.ProviderError(s.ProviderFailure.Unknown,_)}if(y.request){throw new s.ProviderError(s.ProviderFailure.ConnectionFailure,y,y.code)}}c.error(y);throw new s.ProviderError(s.ProviderFailure.Unknown,y)}}},has(e,t){return t in n}})}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/NetworkInfoProvider/BlockfrostNetworkInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostNetworkInfoProvider:()=>BlockfrostNetworkInfoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");class BlockfrostNetworkInfoProvider extends s.BlockfrostProvider{async stake(){try{const{stake:e}=await this.request("network");return{active:BigInt(e.active),live:BigInt(e.live)}}catch(t){throw this.toProviderError(t)}}async lovelaceSupply(){try{const{supply:e}=await this.request("network");return{circulating:BigInt(e.circulating),total:BigInt(e.total)}}catch(t){throw this.toProviderError(t)}}async ledgerTip(){try{const e=await this.request("blocks/latest");return a.BlockfrostToCore.blockToTip(e)}catch(t){throw this.toProviderError(t)}}async protocolParameters(){try{const e=await this.request("epochs/latest/parameters");return a.BlockfrostToCore.protocolParameters(e)}catch(t){throw this.toProviderError(t)}}async genesisParameters(){return this.request("genesis").then(e=>({activeSlotsCoefficient:e.active_slots_coefficient,epochLength:e.epoch_length,maxKesEvolutions:e.max_kes_evolutions,maxLovelaceSupply:BigInt(e.max_lovelace_supply),networkId:e.network_magic===o.NetworkMagics.Mainnet?o.NetworkId.Mainnet:o.NetworkId.Testnet,networkMagic:e.network_magic,securityParameter:e.security_param,slotLength:(0,i.Seconds)(e.slot_length||.2),slotsPerKesPeriod:e.slots_per_kes_period,systemStart:new Date(1e3*e.system_start),updateQuorum:e.update_quorum})).catch(e=>{throw this.toProviderError(e)})}async fetchEraSummaries(){try{return await this.request("network/eras")}catch(e){throw this.toProviderError(e)}}async parseEraSummaries(e,t){try{return e.map(e=>({parameters:{epochLength:e.parameters.epoch_length,slotLength:(0,i.Milliseconds)(1e3*e.parameters.slot_length)},start:{slot:e.start.slot,time:new Date(t.getTime()+1e3*e.start.time)}}))}catch(r){throw this.toProviderError(r)}}async eraSummaries(){try{const{systemStart:e}=await this.genesisParameters();const t=await this.fetchEraSummaries();return this.parseEraSummaries(t,e)}catch(r){throw this.toProviderError(r)}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardAccountInfoProvider/RewardAccountInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardAccountInfoProvider:()=>BlockfrostRewardAccountInfoProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var n=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var d=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/lodash/uniq.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,p,h,m,v,_,y;const emptyArrayIfNotFound=e=>{if((0,n.isBlockfrostNotFoundError)(e)){return[]}throw e};class BlockfrostRewardAccountInfoProvider extends d.BlockfrostProvider{async rewardAccountInfo(e,t){const[r,[a]]=await Promise.all([await this.request(`accounts/${e}`).catch(t=>{if((0,n.isBlockfrostNotFoundError)(t)){return{active:false,active_epoch:null,controlled_amount:"0",drep_id:null,pool_id:null,reserves_sum:"0",rewards_sum:"0",stake_address:e,treasury_sum:"0",withdrawable_amount:"0",withdrawals_sum:"0"}}throw t}),this.request(`accounts/${e}/registrations?order=desc&count=1`).catch(emptyArrayIfNotFound)]);const o=await __classPrivateFieldGet(this,f,"m",m).call(this,a);const i=r.active?s.StakeCredentialStatus.Registered:(null==a?void 0:a.action)==="registered"?s.StakeCredentialStatus.Registering:void 0===o||o<=t?s.StakeCredentialStatus.Unregistered:s.StakeCredentialStatus.Unregistering;const d=BigInt(r.withdrawable_amount||"0");const[c,l,u]=await Promise.all([__classPrivateFieldGet(this,f,"m",y).call(this,e,t,o),__classPrivateFieldGet(this,f,"m",v).call(this,r),__classPrivateFieldGet(this,f,"m",_).call(this,a)]);return{address:e,credentialStatus:i,dRepDelegatee:l,delegatee:c,deposit:u,rewardBalance:d}}async delegationPortfolio(e){const t=await (0,n.fetchSequentially)({haveEnoughItems:e=>e.some(c.isNotNil),paginationOptions:{order:"desc"},request:async t=>{const r=await this.request(`accounts/${e}/delegations?${t}`).catch(emptyArrayIfNotFound);const o=[];for(const{tx_hash:i}of r){var n;const d=await this.request(`txs/${i}/metadata/cbor`).catch(emptyArrayIfNotFound);const c=null===(n=d.find(({label:e})=>"6862"===e))||void 0===n?void 0:n.metadata;if(!c){o.push(null);continue}const u=a.TransactionMetadatum.fromCbor((0,l.HexBlob)(c));try{o.push(s.cip17FromMetadatum(u.toCore()));break}catch{o.push(null)}}return o}});return t.find(c.isNotNil)||null}constructor({client:e,logger:t,stakePoolProvider:r,dRepProvider:s}){super(e,t);f.add(this);p.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,p,s,"f");__classPrivateFieldSet(this,h,r,"f")}}p=new WeakMap,h=new WeakMap,f=new WeakSet,m=async function _BlockfrostRewardAccountInfoProvider_getUnregisteringAtEpoch(e){if(!e||"registered"===e.action){return}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);return o.EpochNo(r.epoch)},v=async function _BlockfrostRewardAccountInfoProvider_getDrepDelegatee(e){if(!e.drep_id)return;if("drep_always_abstain"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysAbstain"}}}if("drep_always_no_confidence"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysNoConfidence"}}}const t=i.DRepID.toCip129DRepID(i.DRepID(e.drep_id));const r=await __classPrivateFieldGet(this,p,"f").getDRepInfo({id:t});return{delegateRepresentative:r}},_=async function _BlockfrostRewardAccountInfoProvider_getKeyDeposit(e){if(!e||"deregistered"===e.action){return 0n}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);const s=await this.request(`epochs/${r.epoch}/parameters`);return BigInt(s.key_deposit)},y=async function _BlockfrostRewardAccountInfoProvider_getDelegatee(e,t,r){var s,a,o;const i=await (0,n.fetchSequentially)({haveEnoughItems:e=>{var r;return(null===(r=e[e.length-1])||void 0===r?void 0:r.active_epoch)<=t},paginationOptions:{order:"desc"},request:t=>this.request(`accounts/${e}/delegations?${t}`)});const isRegisteredAt=e=>{if(!r){return true}return r>t+e||void 0};const d=[isRegisteredAt(0)&&(null===(s=i.find(({active_epoch:e})=>e<=t))||void 0===s?void 0:s.pool_id),isRegisteredAt(1)&&(null===(a=i.find(({active_epoch:e})=>e<=t+1))||void 0===a?void 0:a.pool_id),isRegisteredAt(2)&&(null===(o=i.find(({active_epoch:e})=>e<=t+2))||void 0===o?void 0:o.pool_id)];const l=u(d.filter(c.isNotNil));if(0===l.length){return}const f=await __classPrivateFieldGet(this,h,"f").queryStakePools({filters:{identifier:{values:l.map(e=>({id:e}))}},pagination:{limit:3,startAt:0}});const stakePoolMathingPoolId=e=>f.pageResults.find(t=>t.id===d[e]);return{currentEpoch:stakePoolMathingPoolId(0),nextEpoch:stakePoolMathingPoolId(1),nextNextEpoch:stakePoolMathingPoolId(2)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardsProvider/BlockfrostRewardsProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardsProvider:()=>BlockfrostRewardsProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");const stringToBigInt=e=>BigInt(e);class BlockfrostRewardsProvider extends o.BlockfrostProvider{async rewardAccountBalance({rewardAccount:e}){try{const t=await this.request(`accounts/${e.toString()}`);return BigInt(t.withdrawable_amount)}catch(r){if((0,i.isBlockfrostNotFoundError)(r)){return 0n}throw this.toProviderError(r)}}async accountRewards(e,{lowerBound:t=s.EpochNo(0),upperBound:r=s.EpochNo(Number.MAX_SAFE_INTEGER)}={}){const o=100;return(0,i.fetchSequentially)({haveEnoughItems:(e,t)=>{const s=t[t.length-1];return!s||s.epoch>=r},paginationOptions:{count:o},request:t=>this.request(`accounts/${e.toString()}/rewards?${t}`),responseTranslator:e=>e.filter(({epoch:e})=>t<=e&&e<=r).map(({epoch:e,amount:t,pool_id:r})=>({epoch:s.EpochNo(e),rewards:stringToBigInt(t),...r&&{poolId:a.PoolId(r)}}))})}async rewardsHistory({rewardAccounts:e,epochs:t}){const r=await Promise.all(e.map(e=>this.accountRewards(e,t)));return new Map(r.map((t,r)=>[e[r],t]))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/StakePoolProvider/stakePoolHttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{stakePoolHttpProvider:()=>stakePoolHttpProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js");const o={healthCheck:"/health",queryStakePools:"/search",stakePoolStats:"/stats"};const stakePoolHttpProvider=e=>(0,s.createHttpProvider)({...e,apiVersion:e.apiVersion||a.apiVersion.stakePool,paths:o,serviceSlug:"stake-pool"})},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/BlockfrostTxSubmitProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostTxSubmitProvider:()=>BlockfrostTxSubmitProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const tryParseBlockfrostTxSubmissionErrorMessage=e=>{try{var t,r,s;const a=JSON.parse(e);if("object"==typeof a&&Array.isArray(null==a?void 0:null===(t=a.contents)||void 0===t?void 0:null===(r=t.contents)||void 0===r?void 0:null===(s=r.contents)||void 0===s?void 0:s.error)){return a}}catch{return null}return null};const tryMapTxBlockfrostSubmissionError=e=>{try{const t=JSON.parse(e.detail);if("string"==typeof(null==t?void 0:t.message)){const r=tryParseBlockfrostTxSubmissionErrorMessage(t.message);if(!r){return null}const s=r.contents.contents.contents.error[0];if(s.includes("OutsideValidityIntervalUTxO")){return new a.TxSubmissionError(a.TxSubmissionErrorCode.OutsideOfValidityInterval,null,s)}const o=/ValueNotConservedUTxO.+Coin (\d+).+Coin (\d+)/.exec(s);if(o){const i=BigInt(o[1]);const n=BigInt(o[2]);const d={consumed:{coins:i},produced:{coins:n}};return new a.TxSubmissionError(a.TxSubmissionErrorCode.ValueNotConserved,d,s)}}}catch{return null}return null};class BlockfrostTxSubmitProvider extends s.BlockfrostProvider{async submitTx({signedTransaction:e}){try{await this.request("tx/submit",{body:i.from(e,"hex"),headers:{"Content-Type":"application/cbor"},method:"POST"})}catch(r){if(r instanceof o.ProviderError){const t=tryMapTxBlockfrostSubmissionError(r);if(t){throw new o.ProviderError(r.reason,t,r.detail)}}throw r}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/TxSubmitApiProvider.js":(e,t,r)=>{"use strict";r.d(t,{TxSubmitApiProvider:()=>TxSubmitApiProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const hexStringToBuffer=e=>o.from(e,"hex");const bufferToHexString=e=>e.toString("hex");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");const parseStringishError=e=>{if(/outsideofvalidity/i.test(e)){return new i.TxSubmissionError(i.TxSubmissionErrorCode.OutsideOfValidityInterval,null,e)}if(/valuenotconserved/i.test(e)){return new i.TxSubmissionError(i.TxSubmissionErrorCode.ValueNotConserved,null,e)}if(/nonadacollateral/i.test(e)){return new i.TxSubmissionError(i.TxSubmissionErrorCode.NonAdaCollateral,null,e)}if(/incompletewithdrawals/i.test(e)){return new i.TxSubmissionError(i.TxSubmissionErrorCode.IncompleteWithdrawals,null,e)}return null};const mapCardanoTxSubmitError=e=>{if("string"==typeof e){return parseStringishError(e)}if("object"==typeof e&&e){return parseStringishError(JSON.stringify(e))}return null};var n=r("../../node_modules/axios/lib/axios.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;class TxSubmitApiProvider{async submitTx({signedTransaction:e}){let t;try{t=s.Transaction.fromCbor(e).getId();__classPrivateFieldGet(this,l,"f").debug(`Submitting tx ${t} ...`);await __classPrivateFieldGet(this,d,"f").call(this,{adapter:__classPrivateFieldGet(this,f,"f"),data:hexStringToBuffer(e),headers:{"Content-Type":"application/cbor"},method:"post",url:__classPrivateFieldGet(this,u,"f")});__classPrivateFieldSet(this,c,true,"f");__classPrivateFieldGet(this,l,"f").debug(`Tx ${t} submitted`)}catch(i){__classPrivateFieldSet(this,c,false,"f");__classPrivateFieldGet(this,l,"f").error(`Tx ${t} submission error`);__classPrivateFieldGet(this,l,"f").error(i);if(n["default"].isAxiosError(i)&&i.response){const{data:r,status:o}=i.response;if("number"==typeof o&&o>=400&&o<500)__classPrivateFieldSet(this,c,true,"f");throw new a.ProviderError(a.ProviderFailure.BadRequest,mapCardanoTxSubmitError(r),"string"==typeof r?r:JSON.stringify(r))}throw new a.ProviderError(a.ProviderFailure.Unknown,i,"submitting tx")}}healthCheck(){return Promise.resolve({ok:__classPrivateFieldGet(this,c,"f")})}constructor({baseUrl:e,path:t="/api/submit/tx"},{logger:r,adapter:s}){d.set(this,void 0);c.set(this,true);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,n["default"].create({baseURL:e.origin}),"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/UtxoProvider/BlockfrostUtxoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostUtxoProvider:()=>BlockfrostUtxoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");class BlockfrostUtxoProvider extends s.BlockfrostProvider{async fetchUtxos(e,t){const r=`addresses/${e.toString()}/utxos?${t}`;const s=await this.request(r);const o=s.map(t=>this.fetchDetailsFromCBOR(t.tx_hash).then(r=>{const s=r?r.body.outputs.find(e=>e.address===t.address):void 0;return a.BlockfrostToCore.addressUtxoContent(e.toString(),t,s)}));return Promise.all(o)}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e.cbor)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){const t=await this.cache.get(e);if(t)return t;const r=await this.fetchCBOR(e).then(t=>{const r=i.Transaction.fromCbor(i.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null});if(!r){return null}void this.cache.set(e,r);return r}async utxoByAddresses({addresses:e}){try{const t=await Promise.all(e.map(async e=>(0,o.fetchSequentially)({request:async t=>await this.fetchUtxos(e,t)})));return t.flat(1)}catch(r){throw this.toProviderError(r)}}constructor({cache:e,client:t,logger:r}){super(t,r);this.cache=e}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/WebSocket.js":(e,t,r)=>{"use strict";r.d(t,{CardanoWsClient:()=>CardanoWsClient});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var h=r("../../node_modules/isomorphic-ws/browser.js");const m="not-connected";const deserializeDatum=e=>{for(const t of e.body.outputs)if(t.datum)t.datum=s.PlutusData.fromCbor(t.datum).toCore()};const deserializeMetadata=e=>{if(e.auxiliaryData)e.auxiliaryData={blob:new Map(e.auxiliaryData.map(e=>{const t=BigInt(e[0]);return[t,a.GeneralTransactionMetadata.fromCbor(e[1]).toCore().get(t)]}))}};const isEventError=e=>"object"==typeof e&&!!e&&e.error instanceof Error;const isTxRelevant=({body:{collaterals:e,collateralReturn:t,inputs:r,outputs:s},inputSource:a},i)=>a===o.InputSource.inputs?r.some(e=>i.includes(e.address))||s.some(e=>i.includes(e.address)):e.some(e=>i.includes(e.address))||t&&i.includes(t.address);const removeRolledBackTxs=(e,t)=>{let r;for(r in e)if(e[r].blockHeader.blockNo>t)delete e[r]};class WsProvider{emitHealth(e,{notRecoverable:t,overwrite:r}={}){if(this.notRecoverable)return;if(!e){this.reason=void 0;return this.healthSubject$.next({ok:true})}if(t)this.notRecoverable=true;let s;if("string"==typeof e){if(r||!this.reason)this.reason=e;s={notRecoverable:this.notRecoverable,ok:false,reason:this.reason}}else s=e;this.healthSubject$.next(s)}healthCheck(){return(0,c.firstValueFrom)(this.health$)}constructor(){this.health$=this.healthSubject$=new l.ReplaySubject(1);this.healthSubject$.next({ok:false,reason:"starting"})}}class CardanoWsClient extends WsProvider{createNetworkInfoProviderMethod(e){return async()=>{this.logger.debug(`CardanoWsClient.${e} called`);const t=await (0,c.firstValueFrom)((0,u.merge)(this.health$.pipe((0,f.filter)(({ok:e,reason:t})=>!e&&"starting"!==t)),this.networkInfo[`${e}$`]));if("ok"in t&&"reason"in t&&false===t.ok){this.logger.error(`CardanoWsClient.${e} error`,t.reason);throw new i.ProviderError(i.ProviderFailure.ConnectionFailure,void 0,t.reason)}this.logger.debug(`CardanoWsClient.${e} response:`,(0,d.toSerializableObject)(t));return t}}connect(){if("stop"!==this.status)this.status="connecting";const e=this.ws=new h["default"](this.url);e.onmessage=e=>{try{if("string"!=typeof e.data)throw new Error("Unexpected data from WebSocket ");const t=(0,d.fromSerializableObject)(JSON.parse(e.data));const{clientId:r,networkInfo:s,responseTo:a,syncing:o,transactions:i,utxos:c}=t;if(r){this.logger.info(`Connected with clientId ${this.clientId=r}`);if(o)this.emitHealth("Server is still syncing",{overwrite:true});else this.emitHealth()}if(i)for(const l of i){deserializeDatum(l);deserializeMetadata(l);this.transactions[l.id]=l;delete this.utxos[l.id];this.logger.debug("CardanoWsClient got tx",l.id,l.blockHeader)}if(c){for(const u of c)if(!this.transactions[u.id]){deserializeDatum(u);this.utxos[u.id]=u}}if(s){const{eraSummaries:f,genesisParameters:p,ledgerTip:h,lovelaceSupply:m,protocolParameters:v,stake:_}=s;if(f)this.networkInfoSubjects.eraSummaries$.next(f);if(p)this.networkInfoSubjects.genesisParameters$.next(p);if(m)this.networkInfoSubjects.lovelaceSupply$.next(m);if(v)this.networkInfoSubjects.protocolParameters$.next(v);if(_)this.networkInfoSubjects.stake$.next(_);if(h){this.logger.debug("CardanoWsClient got tip",h);removeRolledBackTxs(this.transactions,h.blockNo);removeRolledBackTxs(this.utxos,h.blockNo);this.networkInfoSubjects.ledgerTip$.next(h)}if(f&&h&&m&&v&&!r){const y=(0,n.createSlotEpochInfoCalc)(f)(h.slot);this.epochSubject$.next({epochInfo:y,eraSummaries:f,ledgerTip:h,lovelaceSupply:m,protocolParameters:v})}}if(a){const w=this.handlers.get(a);this.logger.debug("CardanoWsClient response",a);if(w){const{error:g}=t;this.handlers.delete(a);g?w(g):w(void 0,t)}}}catch(b){this.logger.error(b,"While parsing message",e.data,this.clientId)}};e.onclose=()=>{this.logger.debug("WebSocket client connection closed",this.clientId);if(this.heartbeatTimeout){clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=void 0}this.clientId=m;if("stop"===this.status)this.closeResolver();else{this.status="idle";const e=setTimeout(()=>this.connect(),1e3);if("function"==typeof e.unref)e.unref()}this.emitHealth("closed")};e.onerror=t=>{const r=t instanceof Error?t:isEventError(t)?t.error:new Error(`Unknown error: ${JSON.stringify(t)}`);this.logger.error(r,"Async error from WebSocket client",this.clientId);e.close();this.emitHealth(r.message,{overwrite:true});for(const s of this.handlers.values())s(r);this.handlers.clear();this.addresses={};this.transactions={}};e.onopen=()=>{if("stop"!==this.status)this.status="connected";this.heartbeat()}}heartbeat(){if(this.heartbeatTimeout)clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=setTimeout(()=>{try{this.request({})}catch(e){this.logger.error(e,"Error while refreshing heartbeat",this.clientId)}},this.heartbeatInterval);if("function"==typeof this.heartbeatTimeout.unref)this.heartbeatTimeout.unref()}close(){this.status="stop";this.ws.close();return this.closePromise}request(e,t){if("connected"!==this.status)return false;if(Object.keys(e).length>0)e={...e,requestId:++this.requestId};this.logger.debug("CardanoWsClient request",e);this.ws.send(JSON.stringify(e));this.heartbeat();if(e.requestId&&t)this.handlers.set(e.requestId,t);return true}transactionsByAddresses(e){const{addresses:t,blockRange:r,pagination:s}=e;return new Promise((a,o)=>{const n=(null==r?void 0:r.lowerBound)||0;const l=(null==r?void 0:r.upperBound)||Number.POSITIVE_INFINITY;const u=[];const p={addresses:u,lower:n};this.logger.debug("CardanoWsClient.transactionsByAddresses called",e);const complete=r=>{if(r){for(const i of u)delete this.addresses[i];this.logger.error("CardanoWsClient.transactionsByAddresses error",e,r);return o(r)}const c=Object.values(this.transactions).filter(({blockHeader:{blockNo:e}})=>n<=e&&e<=l).filter(e=>isTxRelevant(e,t)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);const f=(null==s?void 0:s.startAt)||0;const p=f+((null==s?void 0:s.limit)||Number.POSITIVE_INFINITY);const h=c.filter((e,t)=>f<=t&&t<p);const m={pageResults:h,totalResultCount:c.length};this.logger.debug("CardanoWsClient.transactionsByAddresses response",e,(0,d.toSerializableObject)(m));a(m)};for(const h of t){const m=this.addresses[h];let v=false;if(m){if("syncing"===m.status)return complete(new i.ProviderError(i.ProviderFailure.Conflict,null,`${h} still loading`));if(n<m.lower)v=true}else v=true;if(v){u.push(h);this.addresses[h]={lower:n,status:"syncing"}}}(0,c.firstValueFrom)(this.health$.pipe((0,f.filter)(({reason:e})=>"starting"!==e))).then(({ok:e,reason:t})=>{if(!e)return complete(new i.ProviderError(i.ProviderFailure.ConnectionFailure,void 0,t));if(0===u.length)return complete();this.deferRequest(p,e=>{if(e)return complete(new i.ProviderError(i.ProviderFailure.ConnectionFailure,e,e.message));for(const t of u)this.addresses[t].status="synced";complete()})}).catch(complete)})}deferRequest(e,t){const{requests:r,timeout:s}=this.deferredRequests;if(s)clearTimeout(s);r.push({complete:t,txsByAddresses:e});this.deferredRequests.timeout=setTimeout(()=>{this.deferredRequests={requests:[]};this.request({txsByAddresses:r.reduce((e,{txsByAddresses:{addresses:t,lower:r}})=>({addresses:[...e.addresses,...t],lower:e.lower<r?e.lower:r}),{addresses:[],lower:Number.POSITIVE_INFINITY})},e=>r.forEach(({complete:t})=>t(e)))},3)}utxoByAddresses({addresses:e}){this.logger.debug("CardanoWsClient.utxoByAddresses called",e);for(const t of e){const r=this.addresses[t];let s;if(!r){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} not loaded`);return Promise.reject(new i.ProviderError(i.ProviderFailure.NotImplemented,null,s))}if("syncing"===r.status){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} still loading`);return Promise.reject(new i.ProviderError(i.ProviderFailure.Conflict,null,s))}}const a=[];const o=[...Object.values(this.utxos),...Object.values(this.transactions)].filter(t=>isTxRelevant(t,e)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);for(let n=0;n<o.length;++n){const c=o[n];for(let l=0;l<c.body.outputs.length;++l){const u=c.body.outputs[l];if(e.includes(u.address)){let f=true;for(let p=n+1;p<o.length&&f;++p){const h=o[p];for(let m=0;m<h.body.inputs.length&&f;++m){const v=h.body.inputs[m];if(v.txId===c.id&&v.index===l)f=false}}if(f)a.push([{address:u.address,index:l,txId:c.id},u])}}}this.logger.debug("CardanoWsClient.utxoByAddresses response",(0,d.toSerializableObject)(a));return Promise.resolve(a)}constructor(e,t){super();this.clientId=m;this.addresses={};this.deferredRequests={requests:[]};this.handlers=new Map;this.requestId=0;this.status="idle";this.transactions={};this.utxos={};this.networkInfoSubjects={};this.epoch$=this.epochSubject$=new p.Subject;this.heartbeatInterval=1e3*(t.heartbeatInterval||55);this.logger=e.logger;this.url=t.url;this.closePromise=new Promise(e=>{this.closeResolver=e});this.networkInfoSubjects={eraSummaries$:new l.ReplaySubject(1),genesisParameters$:new l.ReplaySubject(1),ledgerTip$:new l.ReplaySubject(1),lovelaceSupply$:new l.ReplaySubject(1),protocolParameters$:new l.ReplaySubject(1),stake$:new l.ReplaySubject(1)};this.networkInfo=this.networkInfoSubjects;this.chainHistoryProvider={blocksByHashes:t=>e.chainHistoryProvider.blocksByHashes(t),healthCheck:()=>this.healthCheck(),transactionsByAddresses:e=>this.transactionsByAddresses(e),transactionsByHashes:t=>e.chainHistoryProvider.transactionsByHashes(t)};this.networkInfoProvider={eraSummaries:this.createNetworkInfoProviderMethod("eraSummaries"),genesisParameters:this.createNetworkInfoProviderMethod("genesisParameters"),healthCheck:()=>this.healthCheck(),ledgerTip:this.createNetworkInfoProviderMethod("ledgerTip"),lovelaceSupply:this.createNetworkInfoProviderMethod("lovelaceSupply"),protocolParameters:this.createNetworkInfoProviderMethod("protocolParameters"),stake:this.createNetworkInfoProviderMethod("stake")};this.utxoProvider={healthCheck:()=>this.healthCheck(),utxoByAddresses:e=>this.utxoByAddresses(e)};this.connect()}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostClient:()=>BlockfrostClient,BlockfrostError:()=>BlockfrostError});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}var o=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js");const tryReadResponseText=async e=>{try{return e.text()}catch{return}};class BlockfrostError extends a{constructor(e,t,r){const s=t||(null==r?void 0:r.message);super(`Blockfrost error with status '${e}': ${s}`);this.status=e;this.body=t;this.innerError=r}}class BlockfrostClient{request(e,t){return this.rateLimiter.schedule(()=>{return(0,o.firstValueFrom)((0,c.fromFetch)(`${this.baseUrl}/${e}`,{...this.requestInit,...t,headers:(null==t?void 0:t.headers)?{...this.requestInit.headers,...t.headers}:this.requestInit.headers}).pipe((0,i.switchMap)(async e=>{if(e.ok){try{return await e.json()}catch{throw new BlockfrostError(e.status,"Failed to parse json")}}throw new BlockfrostError(e.status,await tryReadResponseText(e))}),(0,n.catchError)(e=>{if(e instanceof BlockfrostError){return(0,d.throwError)(()=>e)}return(0,d.throwError)(()=>new BlockfrostError(void 0,void 0,e))})))})}constructor({apiVersion:e,projectId:t,baseUrl:r},{rateLimiter:s}){this.rateLimiter=s;this.requestInit=t?{headers:{project_id:t}}:{};this.baseUrl=e?`${r}/api/${e}`:`${r}`}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostProvider:()=>BlockfrostProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;const toProviderFailure=e=>{switch(e){case 400:return a.ProviderFailure.BadRequest;case 403:return a.ProviderFailure.Forbidden;case 404:return a.ProviderFailure.NotFound;case 402:case 418:case 425:case 429:return a.ProviderFailure.ServerUnavailable;case 500:return a.ProviderFailure.Unhealthy;default:return a.ProviderFailure.Unknown}};class BlockfrostProvider{async request(e,t){try{this.logger.debug("request",e);const r=await __classPrivateFieldGet(this,n,"f").request(e,t);this.logger.debug("response",r);return r}catch(s){(0,i.isBlockfrostNotFoundError)(s)?this.logger.debug("Blockfrost not found",s):this.logger.error(s);throw this.toProviderError(s)}}async healthCheck(){try{const e=await __classPrivateFieldGet(this,n,"f").request("health");return{ok:e.is_healthy}}catch(t){return{ok:false,reason:this.toProviderError(t).message}}}toProviderError(e){if(e instanceof a.ProviderError){return e}if(e instanceof s.BlockfrostError){return new a.ProviderError(toProviderFailure(e.status),e,e.body)}return new a.ProviderError(a.ProviderFailure.Unknown,e)}constructor(e,t){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");this.logger=(0,o.contextLogger)(t,this.constructor.name)}}n=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostToCore:()=>u});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const u={addressUtxoContent:(e,t,r)=>[u.hydratedTxIn(u.inputFromUtxo(e,t)),u.txOut(u.outputFromUtxo(e,t),r)],blockToTip:e=>({blockNo:s.BlockNo(e.height),hash:s.BlockId(e.hash),slot:s.Slot(e.slot)}),hydratedTxIn:e=>({address:a.PaymentAddress(e.address),index:e.output_index,txId:o.TransactionId(e.tx_hash)}),inputFromUtxo:(e,t)=>({address:e,amount:t.amount,output_index:t.output_index,tx_hash:t.tx_hash}),inputs:e=>e.map(e=>u.hydratedTxIn(e)),outputFromUtxo:(e,t)=>({...t,address:e,collateral:false}),outputs:e=>e.map(e=>u.txOut(e)),protocolParameters:e=>({coinsPerUtxoByte:Number(e.coins_per_utxo_word),collateralPercentage:e.collateral_percent,committeeTermLimit:s.EpochNo(0),costModels:new Map([[i.PlutusLanguageVersion.V1,Object.values(e.cost_models.PlutusV1)],[i.PlutusLanguageVersion.V2,Object.values(e.cost_models.PlutusV2)]]),dRepDeposit:e.drep_deposit?Number(e.drep_deposit):void 0,dRepInactivityPeriod:s.EpochNo(0),dRepVotingThresholds:null,desiredNumberOfPools:e.n_opt,governanceActionDeposit:e.gov_action_deposit?Number(e.gov_action_deposit):void 0,governanceActionValidityPeriod:s.EpochNo(0),maxBlockBodySize:e.max_block_size,maxBlockHeaderSize:e.max_block_header_size,maxCollateralInputs:Number(e.max_collateral_inputs),maxExecutionUnitsPerBlock:{memory:Number.parseInt(e.max_block_ex_mem),steps:Number.parseInt(e.max_block_ex_steps)},maxExecutionUnitsPerTransaction:{memory:Number.parseInt(e.max_tx_ex_mem),steps:Number.parseInt(e.max_tx_ex_steps)},maxTxSize:Number(e.max_tx_size),maxValueSize:Number(e.max_val_size),minCommitteeSize:0,minFeeCoefficient:e.min_fee_a,minFeeConstant:e.min_fee_b,minPoolCost:Number(e.min_pool_cost),monetaryExpansion:e.rho.toString(),poolDeposit:Number(e.pool_deposit),poolInfluence:e.a0.toString(),poolRetirementEpochBound:e.e_max,poolVotingThresholds:null,prices:{memory:e.price_mem,steps:e.price_step},protocolVersion:{major:e.protocol_major_ver,minor:e.protocol_minor_ver},stakeKeyDeposit:Number(e.key_deposit),treasuryExpansion:e.tau.toString()}),txOut:(e,t)=>{const r={coins:BigInt(e.amount.find(({unit:e})=>"lovelace"===e).quantity)};const s=new Map;for(const{quantity:o,unit:i}of e.amount)if("lovelace"!==i)s.set(n.AssetId(i),BigInt(o));if(s.size>0)r.assets=s;const u={address:a.PaymentAddress(e.address),value:r};if(e.inline_datum)u.datum=d.PlutusData.fromCbor((0,l.HexBlob)(e.inline_datum)).toCore();if(e.data_hash)u.datumHash=(0,c.Hash32ByteBase16)(e.data_hash);if(null==t?void 0:t.scriptReference)u.scriptReference=t.scriptReference;return u}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js":(e,t,r)=>{"use strict";r.d(t,{blockfrostMetadataToTxMetadata:()=>blockfrostMetadataToTxMetadata,fetchSequentially:()=>fetchSequentially,isBlockfrostNotFoundError:()=>isBlockfrostNotFoundError});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const a=e[s];r[s]="function"==typeof a?(...e)=>a(...e).catch(t):a;return r},{});const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(jsonToMetadatum)}return new Map(Object.keys(e).map(t=>[tryParseBigIntKey(t),jsonToMetadatum(e[t])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");const isBlockfrostNotFoundError=e=>e instanceof a.BlockfrostError&&404===e.status||e instanceof s.ProviderError&&e.reason===s.ProviderFailure.NotFound;const buildQueryString=({page:e,count:t,order:r})=>{let s="";const appendIfDefined=(e,t)=>{if(void 0!==e)s+=s?`&${t}`:t};appendIfDefined(e,`page=${e}`);appendIfDefined(t,`count=${t}`);appendIfDefined(r,`order=${r}`);return s};const fetchSequentially=async(e,t=[])=>{var r,s;const a=(null===(r=e.paginationOptions)||void 0===r?void 0:r.count)||100;const o=(null===(s=e.paginationOptions)||void 0===s?void 0:s.page)||1;try{var i,n;const d=await e.request(buildQueryString({count:a,order:null===(i=e.paginationOptions)||void 0===i?void 0:i.order,page:o}));const c=e.responseTranslator?e.responseTranslator(d):d;const l=[...t,...c];const u=null===(n=e.haveEnoughItems)||void 0===n?void 0:n.call(e,l,d);if(d.length===a&&!u){return fetchSequentially({...e,paginationOptions:{...e.paginationOptions,page:o+1}},l)}return l}catch(f){if(isBlockfrostNotFoundError(f)){return[]}throw f}};const blockfrostMetadataToTxMetadata=e=>e.reduce((e,t)=>{const{json_metadata:r,label:s}=t;if(!r||!s)return e;e.set(BigInt(s),jsonToMetadatum(r));return e},new Map)},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js":(e,t,r)=>{"use strict";r.d(t,{apiVersion:()=>s});const s={assetInfo:"1.0.0",chainHistory:"3.1.0",handle:"1.0.0",networkInfo:"1.0.0",rewards:"1.0.0",root:"1.0.0",stakePool:"1.1.0",txSubmit:"2.0.0",utxo:"2.0.0"}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidFileError=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends s.CustomError{}t.InvalidFileError=InvalidFileError},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromMetadatum=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=a(r("../../node_modules/lodash/difference.js"));const isString=e=>"string"==typeof e;const f=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(c.asString);if(t.some(e=>void 0===e)){return}return t.join("")}return(0,c.asString)(e)};const mapOtherProperties=(e,t)=>{const r=(0,u.default)([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,d.asMetadatumMap)(e);if(!s)throw new n.InvalidFileError;const a=(0,c.asString)(s.get("name"));const o=(0,c.asString)(s.get("mediaType"));if(!o){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const l=metadatumToString(s.get("src"));if(!l){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,i.MediaType)(o),name:a,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,i.Uri)(l)}};const getPolicyMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||(()=>{for(const[r,a]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return a})());const getAssetMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||e.get(s.from(t,"hex").toString("utf8"))||(()=>{for(const[r,a]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return a})());const getName=(e,t,r,s,a=false)=>{const i=(0,c.asString)(e.get("name"));if(i)return i;if("1.0"===t){try{return o.AssetName.toUTF8(r.name,a)}catch(n){s.warn(n)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=(0,c.asString)(e);if(t&&f.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,s=false)=>{const a=null==t?void 0:t.get(721n);if(!a)return null;const n=(0,d.asMetadatumMap)(a);if(!n)return null;const u=getPolicyMetadata(n,e.policyId);if(!u)return null;const f=parseVersion(u.get("version"));if(!f)return null;const p=getAssetMetadata(u,e.name);if(!p)return null;const h=getName(p,f,e,r,true);const m=metadatumToString(p.get("image"));const v=o.AssetId.fromParts(e.policyId,e.name);if(s&&!h||!m){r.warn(missingFieldLogMessage(h?"image":"name",v,true));return null}const _=(0,c.asString)(p.get("mediaType"));const y=(0,d.asMetadatumArray)(p.get("files"));try{return{description:metadatumToString(p.get("description")),files:null==y?void 0:y.map(e=>mapFile(e,v,r)).filter(l.isNotNil),image:(0,i.Uri)(m),mediaType:_?(0,i.ImageMediaType)(_):void 0,name:h||"",otherProperties:mapOtherProperties(p,["name","image","mediaType","description","files"]),version:f}}catch(w){r.warn("Invalid CIP-25 metadata",p,w);return null}};t.fromMetadatum=fromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromPlutusData=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,i.isPlutusBigInt)(e)||(0,i.isPlutusBoundedBytes)(e))return e;if((0,i.isPlutusMap)(e)){const r=mapOtherProperties((0,i.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,i.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const mapFile=(e,t)=>{if(!(0,i.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:o,name:n,...d}=(0,i.tryConvertPlutusMapToUtf8Record)(e,t);const c=tryCoerce(r,s.MediaType,t);const l=tryCoerce(o,s.Uri,t);if("string"!=typeof l||"string"!=typeof c){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:c,name:(0,a.asString)(n),otherProperties:undefinedIfEmpty(mapOtherProperties(d,t)),src:l}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,i.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>mapFile(e,t)).filter(o.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const a=(0,i.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!a)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return a}});const fromPlutusData=(e,t,r=false)=>{const n=(0,o.contextLogger)(t,"NftMetadata.fromPlutusData");const d=getConditionalValidators(r,n);if(!d.isValidDatumShape(e)){return null}const[c,l]=e.fields.items;if(!(0,i.isPlutusMap)(c)||!(0,i.isPlutusBigInt)(l)){n.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const u=(0,i.tryConvertPlutusMapToUtf8Record)(c,n);const{name:f,image:p,mediaType:h,description:m,files:v,..._}=u;if(!d.isNameValid(f)){return null}if("string"!=typeof p){n.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const y=tryCoerce(p,s.Uri,n);if(!y){return null}return{description:(0,a.asString)(m),files:mapFiles(v,n),image:y,mediaType:tryCoerce(h,s.ImageMediaType,n),name:f||"",otherProperties:undefinedIfEmpty(mapOtherProperties(_,n)),version:l.toString()}};t.fromPlutusData=fromPlutusData},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.NftMetadata=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js");a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js"),t);t.NftMetadata={fromMetadatum:o.fromMetadatum,fromPlutusData:i.fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.MediaType=t.ImageMediaType=t.Uri=void 0;const i=o(r("../../node_modules/@biglup/is-cid/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return i.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new n.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};t.Uri=Uri;const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "image/*"')};t.ImageMediaType=ImageMediaType;const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "*/*"')};t.MediaType=MediaType},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asString=void 0;const asString=e=>"string"==typeof e?e:void 0;t.asString=asString},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.AssetNameLabelNum=t.AssetNameLabel=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js"));const d=8;const c="0";const AssetNameLabel=e=>e;t.AssetNameLabel=AssetNameLabel;t.AssetNameLabelNum={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new i.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>(0,n.default)(Uint8Array.from(s.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const r=e[0];const s=e[7];const a=e.slice(1,5);const o=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(r,s)||isInvalidChecksum(a,o)){return null}return(0,t.AssetNameLabel)(Number.parseInt(a,16))};t.AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const s=assetNameLabelHexToNum(t);if(null===s){return null}return{content:(0,o.AssetName)(r),label:s}};t.AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,o.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});let r=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)r=new Int32Array(r);const crc8=(e,t=0)=>{let s=Math.trunc(t);for(const a of e)s=255&r[(s^a)&255];return s};t["default"]=crc8},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;t.util=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.coalesceTokenMaps=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[a,o]of r.entries()){const i=t.get(a)||0n;t.set(a,i+o)}}if(0===t.size){return}return t};t.coalesceTokenMaps=coalesceTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.getAssetNameAsText=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js");const getAssetNameAsText=e=>{var t;const r=a.AssetId.getAssetName(e);const i=null===(t=o.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return s.from(i||r,"hex").toString("utf8")};t.getAssetNameAsText=getAssetNameAsText},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValidHandle=void 0;const r=new RegExp(/^[a-z0-9_.-]{1,15}$/);const s=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{s.lastIndex=0;return r.test(e)||s.test(e)||"0|0"===e};t.isValidHandle=isValidHandle},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.removeNegativesFromTokenMap=void 0;const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};t.removeNegativesFromTokenMap=removeNegativesFromTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.subtractTokenMaps=t.subtractMaps=void 0;const a=s(r("../../node_modules/lodash/uniq.js"));const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,o]of e.entries())if(0n!==o)r.set(s,o);return r}if(!e){const i=new Map;for(const[n,d]of t.entries())if(0n!==d)i.set(n,-d);return i}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[p,h]of t.entries()){if(e.has(p)){l.push(p);continue}if(0n!==h)c.set(p,-h)}const m=(0,a.default)(l);for(const v of m){const _=e.get(v);const y=t.get(v);const w=_-y;if(0n!==w)c.set(v,w)}return c};t.subtractMaps=subtractMaps;const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(t.subtractMaps)};t.subtractTokenMaps=subtractTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;Object.defineProperty(t,"__esModule",{value:true});t.isAddress=t.Address=t.CredentialType=t.AddressType=void 0;const l=i(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const y=1023;var w;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(w=t.AddressType||(t.AddressType={}));var g;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(g=t.CredentialType||(t.CredentialType={}));class Address{static fromBytes(e){const t=s.from(e,"hex");const r=t[0]>>4;let a;switch(r){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:a=u.BaseAddress.unpackParts(r,t);break;case w.PointerKey:case w.PointerScript:a=v.PointerAddress.unpackParts(r,t);break;case w.EnterpriseKey:case w.EnterpriseScript:a=p.EnterpriseAddress.unpackParts(r,t);break;case w.RewardKey:case w.RewardScript:a=_.RewardAddress.unpackParts(r,t);break;case w.Byron:a=f.ByronAddress.unpackParts(r,t);break;default:throw new h.InvalidArgumentError("data","Invalid address raw data")}return a}toBytes(){let e;switch(d(this,c,"f").type){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:e=u.BaseAddress.packParts(d(this,c,"f"));break;case w.PointerKey:case w.PointerScript:e=v.PointerAddress.packParts(d(this,c,"f"));break;case w.EnterpriseKey:case w.EnterpriseScript:e=p.EnterpriseAddress.packParts(d(this,c,"f"));break;case w.RewardKey:case w.RewardScript:e=_.RewardAddress.packParts(d(this,c,"f"));break;case w.Byron:e=f.ByronAddress.packParts(d(this,c,"f"));break;default:throw new Error("Invalid address")}return h.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(h.HexBlob.fromBytes(l.base58.decode(e)))}toBase58(){if(d(this,c,"f").type!==w.Byron)throw new Error("Only Byron addresses will be encoded in base58");return l.base58.encode(s.from(this.toBytes(),"hex"))}toBech32(){const e=l.bech32.toWords(s.from(this.toBytes(),"hex"));if(d(this,c,"f").type===w.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(d(this,c,"f").type,d(this,c,"f").networkId);const r=l.bech32.encode(t,e,y);return d(this,c,"f").type===w.RewardKey||(d(this,c,"f").type,w.RewardScript),r}static fromBech32(e){const{words:t}=l.bech32.decode(e,y);return Address.fromBytes(h.HexBlob.fromBytes(l.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,h.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(d(t,c,"f").type!==w.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return f.ByronAddress.fromAddress(this)}asReward(){return _.RewardAddress.fromAddress(this)}asPointer(){return v.PointerAddress.fromAddress(this)}asEnterprise(){return p.EnterpriseAddress.fromAddress(this)}asBase(){return u.BaseAddress.fromAddress(this)}getType(){return d(this,c,"f").type}getNetworkId(){if(d(this,c,"f").type===w.Byron){var e;if((null===(e=d(this,c,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return m.NetworkId.Mainnet;return m.NetworkId.Testnet}return d(this,c,"f").networkId}getProps(){return d(this,c,"f")}static getBech32Prefix(e,t){let r="";switch(e){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:case w.PointerKey:case w.PointerScript:case w.EnterpriseKey:case w.EnterpriseScript:r="addr";break;case w.RewardKey:case w.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){c.set(this,void 0);n(this,c,e,"f")}}t.Address=Address;c=new WeakMap;const isAddress=e=>Address.isValid(e);t.isAddress=isAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BaseAddress=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class BaseAddress{static fromCredentials(e,t,r){let s=l.AddressType.BasePaymentKeyStakeKey;if(t.type===l.CredentialType.ScriptHash)s|=1;if(r.type===l.CredentialType.ScriptHash)s|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:s})}getPaymentCredential(){return o(this,d,"f")}getStakeCredential(){return o(this,c,"f")}toAddress(){return new l.Address({delegationPart:o(this,c,"f"),networkId:o(this,n,"f"),paymentPart:o(this,d,"f"),type:o(this,i,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.BasePaymentKeyStakeKey:case l.AddressType.BasePaymentScriptStakeKey:case l.AddressType.BasePaymentKeyStakeScript:case l.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new f.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const a=(0,u.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));const o=(0,u.Hash28ByteBase16)(s.from(t.slice(29,57)).toString("hex"));const i=e===l.AddressType.BasePaymentKeyStakeScript||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;const n=e===l.AddressType.BasePaymentScriptStakeKey||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;return new l.Address({delegationPart:{hash:o,type:i},networkId:r,paymentPart:{hash:a,type:n},type:e})}constructor(e){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,c,e.delegationPart,"f");a(this,i,e.type,"f")}}t.BaseAddress=BaseAddress;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;Object.defineProperty(t,"__esModule",{value:true});t.ByronAddress=t.ByronAddressType=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var p;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(p=t.ByronAddressType||(t.ByronAddressType={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:d.AddressType.Byron})}getAttributes(){return o(this,n,"f").attrs}getRoot(){return o(this,n,"f").root}getByronAddressType(){return o(this,n,"f").type}toAddress(){return new d.Address({byronAddressContent:o(this,n,"f"),type:o(this,i,"f")})}static fromAddress(e){return e.getProps().type===d.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:a}=e.byronAddressContent;let o=0;if(r.derivationPath)++o;if(r.magic)++o;const i=new c.CborWriter;i.writeStartArray(3);i.writeByteString(s.from(t,"hex"));i.writeStartMap(o);if(r.derivationPath){const n=new c.CborWriter().writeByteString(s.from(r.derivationPath,"hex")).encode();i.writeInt(1);i.writeByteString(n)}if(r.magic){const d=new c.CborWriter().writeInt(r.magic).encode();i.writeInt(2);i.writeByteString(d)}i.writeInt(a);const l=s.from(i.encodeAsHex(),"hex");i.reset();i.writeStartArray(2);i.writeTag(c.CborTag.EncodedCborDataItem);i.writeByteString(l);i.writeInt((0,f.crc32)(l));return i.encode()}static unpackParts(e,t){let r=new c.CborReader(u.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const a=r.readByteString();if(Number(r.readInt())!==(0,f.crc32)(a))throw new u.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new c.CborReader(u.HexBlob.fromBytes(a));r.readStartArray();const o=(0,l.Hash28ByteBase16)(s.from(r.readByteString()).toString("hex"));r.readStartMap();let i;let n;while(r.peekState()!==c.CborReaderState.EndMap){const p=r.readInt();switch(p){case 1n:{const h=r.readByteString();n=u.HexBlob.fromBytes(new c.CborReader(u.HexBlob.fromBytes(h)).readByteString());break}case 2n:{const m=r.readByteString();i=Number(new c.CborReader(u.HexBlob.fromBytes(m)).readInt());break}}}r.readEndMap();const v=Number(r.readInt());return new d.Address({byronAddressContent:{attrs:{derivationPath:n,magic:i},root:o,type:v},type:e})}constructor(e){i.set(this,void 0);n.set(this,void 0);a(this,n,e.byronAddressContent,"f");a(this,i,e.type,"f")}}t.ByronAddress=ByronAddress;i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.DRepID=void 0;const n=i(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=1023;const f=28;const p=29;const DRepID=e=>{try{return(0,l.typedBech32)(e,["drep"],47)}catch{return(0,l.typedBech32)(e,["drep","drep_script"],45)}};t.DRepID=DRepID;t.DRepID.isValid=e=>{try{(0,t.DRepID)(e);return true}catch{return false}};t.DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===d.CredentialType.ScriptHash)t="drep_script";const r=n.bech32.toWords(s.from(e.hash,"hex"));return n.bech32.encode(t,r,u)};t.DRepID.cip129FromCredential=e=>{let t="22";if(e.type===d.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const a=n.bech32.toWords(s.from(r,"hex"));return n.bech32.encode("drep",a,u)};t.DRepID.toCredential=e=>{const{words:t}=n.bech32.decode(e,u);const r=n.bech32.fromWords(t);if(r.length!==f&&r.length!==p){throw new Error("Invalid DRepID payload")}if(r.length===f){const a=e.includes("drep_script");return{hash:(0,c.Hash28ByteBase16)(s.from(r).toString("hex")),type:a?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}}const o=r[0];const i=r.slice(1);const l=(32&o)===32;const h=(3&o)===3;if(!l){throw new Error("Invalid governance credential type")}return{hash:(0,c.Hash28ByteBase16)(s.from(i).toString("hex")),type:h?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}};t.DRepID.toCip105DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip105FromCredential(r)};t.DRepID.toCip129DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip129FromCredential(r)};t.DRepID.toAddress=e=>{const r=t.DRepID.toCredential(e);return new d.Address({paymentPart:r,type:r.type===d.CredentialType.KeyHash?d.AddressType.EnterpriseKey:d.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.EnterpriseAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===c.CredentialType.ScriptHash?c.AddressType.EnterpriseScript:c.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return o(this,d,"f")}toAddress(){return new c.Address({networkId:o(this,n,"f"),paymentPart:o(this,d,"f"),type:o(this,i,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.EnterpriseKey:case c.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const a=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:a,type:e===c.AddressType.EnterpriseScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,i,e.type,"f")}}t.EnterpriseAddress=EnterpriseAddress;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.addressNetworkId=t.inputsWithAddresses=t.isAddressWithin=t.PaymentAddress=t.isRewardAccount=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const isRewardAccount=e=>{try{(0,i.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};t.isRewardAccount=isRewardAccount;const PaymentAddress=e=>{if(a.Address.isValid(e)){if((0,t.isRewardAccount)(e)||o.DRepID.isValid(e)){throw new i.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,i.assertIsHexString)(e)}catch{throw new i.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const r=a.Address.fromBytes(i.HexBlob.fromBytes(s.from(e,"hex")));return r.getType()===a.AddressType.Byron?r.toBase58():r.toBech32()};t.PaymentAddress=PaymentAddress;const isAddressWithin=e=>({address:t})=>e.includes(t);t.isAddressWithin=isAddressWithin;const inputsWithAddresses=(e,r)=>e.body.inputs.filter((0,t.isAddressWithin)(r));t.inputsWithAddresses=inputsWithAddresses;const addressNetworkId=e=>{const t=a.Address.fromString(e);return t.getNetworkId()};t.addressNetworkId=addressNetworkId},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.PointerAddress=t.CertIndex=t.TxIndex=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new f.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return s.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const a=e[s];r<<=7n;r|=BigInt(127&a);t=(128&a)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;t.TxIndex=TxIndex;const CertIndex=e=>e;t.CertIndex=CertIndex;class PointerAddress{static fromCredentials(e,t,r){let s=l.AddressType.PointerKey;if(t.type===l.CredentialType.ScriptHash)s&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:s})}getPaymentCredential(){return o(this,d,"f")}getStakePointer(){return o(this,c,"f")}toAddress(){return new l.Address({networkId:o(this,n,"f"),paymentPart:o(this,d,"f"),pointer:o(this,c,"f"),type:o(this,i,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.PointerKey:case l.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:a}=e.pointer;return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(a)])])}static unpackParts(e,r){if(r.length<=29)throw new f.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const a=15&r[0];const o=(0,u.Hash28ByteBase16)(s.from(r.slice(1,29)).toString("hex"));let i=29;const n=s.from(r);const{value:d,bytesRead:c}=variableLengthDecode(n.subarray(i));i+=c;const{value:p,bytesRead:h}=variableLengthDecode(n.subarray(i));i+=h;const{value:m}=variableLengthDecode(n.subarray(i));return new l.Address({networkId:a,paymentPart:{hash:o,type:e===l.AddressType.PointerScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash},pointer:{certIndex:(0,t.CertIndex)(Number(m)),slot:d,txIndex:(0,t.TxIndex)(Number(p))},type:e})}constructor(e){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,c,e.pointer,"f");a(this,i,e.type,"f")}}t.PointerAddress=PointerAddress;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createRewardAccount=t.RewardAccount=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,o.typedBech32)(e,["stake","stake_test"],47);t.RewardAccount=RewardAccount;t.RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;t.RewardAccount.fromCredential=(e,r)=>(0,t.RewardAccount)(i.RewardAddress.fromCredentials(r,{hash:e.hash,type:e.type}).toAddress().toBech32());t.RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,r)=>(0,t.RewardAccount)(i.RewardAddress.fromCredentials(r,{hash:(0,a.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32());t.createRewardAccount=createRewardAccount},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.RewardAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class RewardAddress{static fromCredentials(e,t){let r=c.AddressType.RewardKey;if(t.type===c.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return o(this,d,"f")}toAddress(){return new c.Address({networkId:o(this,n,"f"),paymentPart:o(this,d,"f"),type:o(this,i,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.RewardKey:case c.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const a=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:a,type:e===c.AddressType.RewardScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,i,e.type,"f")}}t.RewardAddress=RewardAddress;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChainIds=t.NetworkMagics=t.NetworkId=void 0;var r;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(r=t.NetworkId||(t.NetworkId={}));var s;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(s=t.NetworkMagics||(t.NetworkMagics={}));t.ChainIds={Mainnet:{networkId:r.Mainnet,networkMagic:s.Mainnet},Preprod:{networkId:r.Testnet,networkMagic:s.Preprod},Preview:{networkId:r.Testnet,networkMagic:s.Preview},Sanchonet:{networkId:r.Testnet,networkMagic:s.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js"),t);t.util=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.AssetFingerprint=t.PolicyId=t.AssetId=t.AssetName=void 0;const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/web-encoding/src/lib.js");const AssetName=e=>{if(e.length>0){(0,d.assertIsHexString)(e);if(e.length>64){throw new d.InvalidStringError("too long")}}return e.toLowerCase()};t.AssetName=AssetName;const l=new c.TextDecoder("utf8",{fatal:true});t.AssetName.toUTF8=(e,t=false)=>{const r=s.from(e,"hex");try{if(t){return l.decode(r.filter(e=>e>31))}return l.decode(r)}catch(a){throw new d.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,a)}};const AssetId=e=>{const t=e.split(".").join("");(0,d.assertIsHexString)(t);if(t.length>120)throw new d.InvalidStringError("too long");if(t.length<56)throw new d.InvalidStringError("too short");return t};t.AssetId=AssetId;const PolicyId=e=>n.Hash28ByteBase16(e);t.PolicyId=PolicyId;t.AssetId.getPolicyId=e=>(0,t.PolicyId)(e.slice(0,56));t.AssetId.getAssetName=e=>(0,t.AssetName)(e.slice(56));t.AssetId.fromParts=(e,r)=>(0,t.AssetId)(e+r);const AssetFingerprint=e=>(0,d.typedBech32)(e,"asset",32);t.AssetFingerprint=AssetFingerprint;t.AssetFingerprint.fromParts=(e,r)=>{const a=s.from(e,"hex");const o=s.from(r,"hex");const i=(0,d.HexBlob)(n.blake2b(20).update(new Uint8Array([...a,...o])).digest("hex"));return(0,t.AssetFingerprint)(d.HexBlob.toTypedBech32("asset",i))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeAuxiliaryDataHash=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"));const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const computeAuxiliaryDataHash=e=>e?(0,d.Hash32ByteBase16)(i.blake2b(i.blake2b.BYTES).update((0,c.hexToBytes)(n.AuxiliaryData.fromCore(e).toCbor())).digest("hex")):void 0;t.computeAuxiliaryDataHash=computeAuxiliaryDataHash},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SlotLeader=t.GenesisDelegate=t.VrfVkBech32=t.BlockId=t.Slot=t.EpochNo=t.BlockNo=t.BlockSize=void 0;const n=i(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js");const BlockSize=e=>e;t.BlockSize=BlockSize;const BlockNo=e=>e;t.BlockNo=BlockNo;const EpochNo=e=>e;t.EpochNo=EpochNo;const Slot=e=>e;t.Slot=Slot;const BlockId=e=>d.Hash32ByteBase16(e);t.BlockId=BlockId;const VrfVkBech32=e=>(0,c.typedBech32)(e,"vrf_vk",52);t.VrfVkBech32=VrfVkBech32;const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return d.Hash28ByteBase16(e)};t.GenesisDelegate=GenesisDelegate;const SlotLeader=e=>{try{return(0,l.PoolId)(e)}catch{try{return(0,t.GenesisDelegate)(e)}catch(r){throw new c.InvalidStringError("Expected either PoolId or GenesisDelegate",r)}}};t.SlotLeader=SlotLeader;t.VrfVkBech32.fromHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.VrfVkBech32)(n.bech32.encode("vrf_vk",r,1023))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.includesAnyCertificate=t.stakeKeyCertificates=t.createDelegationCert=t.createStakeDeregistrationCert=t.createStakeRegistrationCert=t.isCertType=t.VoteDelegationCredentialCertificateTypes=t.StakeCredentialCertificateTypes=t.RegAndDeregCertificateTypes=t.StakeDelegationCertificateTypes=t.StakeRegistrationCertificateTypes=t.PostConwayStakeRegistrationCertificateTypes=t.MirCertificateKind=t.MirCertificatePot=t.CertificateType=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");var o;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(o=t.CertificateType||(t.CertificateType={}));var i;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(i=t.MirCertificatePot||(t.MirCertificatePot={}));var n;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(n=t.MirCertificateKind||(t.MirCertificateKind={}));t.PostConwayStakeRegistrationCertificateTypes=[o.Registration,o.VoteRegistrationDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];t.StakeRegistrationCertificateTypes=[o.StakeRegistration,...t.PostConwayStakeRegistrationCertificateTypes];t.StakeDelegationCertificateTypes=[o.StakeDelegation,o.StakeVoteDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];t.RegAndDeregCertificateTypes=[...t.StakeRegistrationCertificateTypes,o.Unregistration,o.StakeDeregistration];t.StakeCredentialCertificateTypes=[...t.RegAndDeregCertificateTypes,...t.StakeDelegationCertificateTypes,o.VoteDelegation];t.VoteDelegationCredentialCertificateTypes=[o.VoteDelegation,o.VoteRegistrationDelegation,o.StakeVoteDelegation,o.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);t.isCertType=isCertType;const createStakeRegistrationCert=e=>({__typename:o.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createStakeRegistrationCert=createStakeRegistrationCert;const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:o.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}}:{__typename:o.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}};t.createStakeDeregistrationCert=createStakeDeregistrationCert;const createDelegationCert=(e,t)=>({__typename:o.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createDelegationCert=createDelegationCert;const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>(0,t.isCertType)(e,t.RegAndDeregCertificateTypes)?e:void 0).filter(a.isNotNil))||[]};t.stakeKeyCertificates=stakeKeyCertificates;const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false;t.includesAnyCertificate=includesAnyCertificate},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Cip1854ExtendedAccountPublicKey=void 0;const n=i(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1023;const u="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,c.assertIsBech32WithPrefix)(e,[u])}catch{throw new c.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};t.Cip1854ExtendedAccountPublicKey=Cip1854ExtendedAccountPublicKey;t.Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.Cip1854ExtendedAccountPublicKey)(n.bech32.encode(u,r,l))};t.Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=n.bech32.decode(e,l);return(0,d.Bip32PublicKeyHex)(s.from(n.bech32.fromWords(t)).toString("hex"))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cip17FromMetadatum=t.portfolioMetadataFromCip17=t.DelegationMetadataLabel=t.StakeCredentialStatus=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");var a;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(a=t.StakeCredentialStatus||(t.StakeCredentialStatus={}));t.DelegationMetadataLabel=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};t.portfolioMetadataFromCip17=portfolioMetadataFromCip17;const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t};t.cip17FromMetadatum=cip17FromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDRepAlwaysNoConfidence=t.isDRepAlwaysAbstain=t.isDRepCredential=t.isDrepInfo=t.VoterType=t.Vote=t.GovernanceActionType=void 0;var r;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(r=t.GovernanceActionType||(t.GovernanceActionType={}));var s;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(s=t.Vote||(t.Vote={}));var a;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(a=t.VoterType||(t.VoterType={}));const isDrepInfo=e=>"id"in e&&"active"in e;t.isDrepInfo=isDrepInfo;const isDRepCredential=e=>"type"in e&&"hash"in e;t.isDRepCredential=isDRepCredential;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;t.isDRepAlwaysAbstain=isDRepAlwaysAbstain;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename;t.isDRepAlwaysNoConfidence=isDRepAlwaysNoConfidence},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusMapEncoding=t.PlutusListEncoding=void 0;var r;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(r=t.PlutusListEncoding||(t.PlutusListEncoding={}));var s;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(s=t.PlutusMapEncoding||(t.PlutusMapEncoding={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPlutusScript=t.isNativeScript=t.PlutusLanguageVersion=t.NativeScriptKind=t.ScriptType=void 0;var r;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(r=t.ScriptType||(t.ScriptType={}));var s;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(s=t.NativeScriptKind||(t.NativeScriptKind={}));var a;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(a=t.PlutusLanguageVersion||(t.PlutusLanguageVersion={}));const isNativeScript=e=>e.__type===r.Native;t.isNativeScript=isNativeScript;const isPlutusScript=e=>e.__type===r.Plutus;t.isPlutusScript=isPlutusScript},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExtendedPoolStatus=void 0;var r;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(r=t.ExtendedPoolStatus||(t.ExtendedPoolStatus={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PoolMdVk=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const PoolMdVk=e=>(0,s.typedBech32)(e,"poolmd_vk",52);t.PoolMdVk=PoolMdVk},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StakePoolEpochRewards=t.StakePoolStatus=void 0;var r;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(r=t.StakePoolStatus||(t.StakePoolStatus={}));class StakePoolEpochRewards{}t.StakePoolEpochRewards=StakePoolEpochRewards},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.VrfVkHex=t.PoolIdHex=t.PoolId=void 0;const i=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=1023;const PoolId=e=>(0,d.typedBech32)(e,"pool",45);t.PoolId=PoolId;t.PoolId.fromKeyHash=e=>d.HexBlob.toTypedBech32("pool",(0,d.HexBlob)(e));const PoolIdHex=e=>n.Hash28ByteBase16(e);t.PoolIdHex=PoolIdHex;const VrfVkHex=e=>(0,d.typedHex)(e,64);t.VrfVkHex=VrfVkHex;t.PoolId.toKeyHash=e=>{const{words:t}=i.bech32.decode(e,c);return n.Ed25519KeyHashHex(d.HexBlob.fromBytes(i.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.RedeemerPurpose=t.InputSource=t.TransactionId=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const TransactionId=e=>i.Hash32ByteBase16(e);t.TransactionId=TransactionId;t.TransactionId.fromHexBlob=e=>i.Hash32ByteBase16.fromHexBlob(e);var n;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(n=t.InputSource||(t.InputSource={}));var d;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(d=t.RedeemerPurpose||(t.RedeemerPurpose={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.FractionUtils=void 0;const a=s(r("../../node_modules/fraction.js/fraction.js"));const toFractionJs=e=>{if("number"==typeof e){return new a.default(e)}const{numerator:t,denominator:r}=e;return new a.default(t,r)};t.FractionUtils={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addressesShareAnyKey=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?s.Address.fromString(e):e;if(!t){throw new a.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case s.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:{const o=t.asEnterprise();return{paymentId:{credential:o.getPaymentCredential()}}}case s.AddressType.PointerKey:case s.AddressType.PointerScript:{const i=t.asPointer();return{paymentId:{credential:i.getPaymentCredential()},stakeId:{pointer:i.getStakePointer()}}}case s.AddressType.RewardKey:case s.AddressType.RewardScript:{const n=t.asReward();return{stakeId:{credential:n.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)};t.addressesShareAnyKey=addressesShareAnyKey},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeImplicitCoin=void 0;const i=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"));const n=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"));const d=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=i.RewardAccount.toNetworkId(t[0]);return t.includes(i.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let s=0n;let a=0n;const o=0===r.length;const d=new Set(r.map(e=>n.PoolId.fromKeyHash((0,l.Ed25519KeyHashHex)(i.RewardAccount.toHash(e)))));for(const c of t){switch(c.__typename){case n.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,r))s+=e.stakeKeyDeposit;break;case n.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,r))a+=e.stakeKeyDeposit;break;case n.CertificateType.PoolRegistration:if(o||r.some(e=>c.poolParameters.owners.includes(e)))s+=e.poolDeposit;break;case n.CertificateType.PoolRetirement:if(o||d.has(c.poolId))a+=e.poolDeposit;break}}return{deposit:s,reclaimDeposit:a}};const computeConwayDeposits=(e,t,r,s)=>{let a=0n;let o=0n;for(const c of e){switch(c.__typename){case n.CertificateType.Registration:case n.CertificateType.StakeRegistrationDelegation:case n.CertificateType.VoteRegistrationDelegation:case n.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))a+=c.deposit;break;case n.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))o+=c.deposit;break;case n.CertificateType.RegisterDelegateRepresentative:case n.CertificateType.UnregisterDelegateRepresentative:if(!r||c.dRepCredential.type===i.CredentialType.KeyHash&&c.dRepCredential.hash===d.Hash28ByteBase16.fromEd25519KeyHashHex(r))c.__typename===n.CertificateType.RegisterDelegateRepresentative?a+=c.deposit:o+=c.deposit;break}}if(s)for(const l of s)a+=l.deposit;return{deposit:a,reclaimDeposit:o}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],a,o)=>{if(0===r.length&&(!o||0===o.length))return{deposit:0n,reclaimDeposit:0n};const i={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(i,r,s);const d=computeConwayDeposits(r,s,a,o);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>c.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:a=[]},o,i)=>{const{deposit:n,reclaimDeposit:d}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],o,i,s);const l=!!(null==o?void 0:o.length);const u=c.BigIntMath.sum(a.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(a,o):u;return{deposit:n,input:f+d,reclaimDeposit:d,withdrawals:f}};t.computeImplicitCoin=computeImplicitCoin},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.computeMinUtxoValue=void 0;const computeMinUtxoValue=e=>29n*e;t.computeMinUtxoValue=computeMinUtxoValue},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.estimateStakePoolAPY=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:o,pledge:i}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,s.Percent)(Number(o)/Number(t-i)/(r/a)*365)};t.estimateStakePoolAPY=estimateStakePoolAPY},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isScriptAddress=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const isScriptAddress=e=>{const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const a=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==a?void 0:a.type)===s.CredentialType.ScriptHash};t.isScriptAddress=isScriptAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPhase2ValidationErrTx=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals;t.isPhase2ValidationErrTx=isPhase2ValidationErrTx},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryConvertPlutusMapToUtf8Record=t.isPlutusBigInt=t.isConstrPlutusData=t.isPlutusMap=t.isPlutusList=t.isAnyPlutusDataCollection=t.isPlutusBoundedBytes=void 0;const s=r("../../node_modules/web-encoding/src/lib.js");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);t.isPlutusBoundedBytes=isPlutusBoundedBytes;const isAnyPlutusDataCollection=e=>"object"==typeof e&&!(0,t.isPlutusBoundedBytes)(e);t.isAnyPlutusDataCollection=isAnyPlutusDataCollection;const isPlutusList=e=>(0,t.isAnyPlutusDataCollection)(e)&&"items"in e;t.isPlutusList=isPlutusList;const isPlutusMap=e=>(0,t.isAnyPlutusDataCollection)(e)&&"data"in e;t.isPlutusMap=isPlutusMap;const isConstrPlutusData=e=>(0,t.isAnyPlutusDataCollection)(e)&&"fields"in e;t.isConstrPlutusData=isConstrPlutusData;const isPlutusBigInt=e=>"bigint"==typeof e;t.isPlutusBigInt=isPlutusBigInt;const a=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!(0,t.isPlutusBoundedBytes)(e))return e;try{return a.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,a]of e.data.entries()){const o=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof o){t.warn("Failed to decode plutus map key",s);continue}r[o]=tryConvertPlutusDataToUtf8String(a)}return r};t.tryConvertPlutusMapToUtf8Record=tryConvertPlutusMapToUtf8Record},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveInputValue=void 0;const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};t.resolveInputValue=resolveInputValue},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CardanoNodeUtil=void 0;o(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js"),t);t.CardanoNodeUtil=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js"))},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StateQueryError=t.TxSubmissionError=t.ChainSyncError=t.GeneralCardanoNodeError=t.CardanoNodeError=t.TxSubmissionErrorCode=t.StateQueryErrorCode=t.ChainSyncErrorCode=t.GeneralCardanoNodeErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(a=t.GeneralCardanoNodeErrorCode||(t.GeneralCardanoNodeErrorCode={}));var o;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(o=t.ChainSyncErrorCode||(t.ChainSyncErrorCode={}));var i;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(i=t.StateQueryErrorCode||(t.StateQueryErrorCode={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n=t.TxSubmissionErrorCode||(t.TxSubmissionErrorCode={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}t.CardanoNodeError=CardanoNodeError;class GeneralCardanoNodeError extends CardanoNodeError{}t.GeneralCardanoNodeError=GeneralCardanoNodeError;class ChainSyncError extends CardanoNodeError{}t.ChainSyncError=ChainSyncError;class TxSubmissionError extends CardanoNodeError{}t.TxSubmissionError=TxSubmissionError;class StateQueryError extends CardanoNodeError{}t.StateQueryError=StateQueryError},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDrepNotRegistered=t.isUnknownCredential=t.isDrepAlreadyRegistered=t.isCredentialAlreadyRegistered=t.isUnknownOutputReferences=t.isIncompleteWithdrawalsError=t.isValueNotConservedError=t.isOutsideOfValidityIntervalError=t.isProviderError=t.asTxSubmissionErrorCode=t.asGeneralCardanoNodeErrorCode=t.asStateQueryErrorCode=t.asChainSyncErrorCode=t.isGeneralCardanoNodeErrorCode=t.isStateQueryErrorCode=t.isTxSubmissionErrorCode=t.isChainSyncErrorCode=t.asCardanoNodeError=t.asGeneralCardanoNodeError=t.asStateQueryError=t.asChainSyncError=t.asTxSubmissionError=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,o.isProductionEnvironment)())(0,o.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,o.isProductionEnvironment)())(0,o.stripStackTrace)(t);return t}return null};t.asTxSubmissionError=asSpecificCardanoNodeError(s.TxSubmissionError);t.asChainSyncError=asSpecificCardanoNodeError(s.ChainSyncError);t.asStateQueryError=asSpecificCardanoNodeError(s.StateQueryError);t.asGeneralCardanoNodeError=asSpecificCardanoNodeError(s.GeneralCardanoNodeError);const asCardanoNodeError=e=>(0,t.asGeneralCardanoNodeError)(e)||(0,t.asTxSubmissionError)(e)||(0,t.asStateQueryError)(e)||(0,t.asChainSyncError)(e)||new s.GeneralCardanoNodeError(s.GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');t.asCardanoNodeError=asCardanoNodeError;const i=new Set(Object.values(s.StateQueryErrorCode));const n=new Set(Object.values(s.GeneralCardanoNodeErrorCode));const d=new Set(Object.values(s.TxSubmissionErrorCode));const c=new Set(Object.values(s.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&c.has(e);t.isChainSyncErrorCode=isChainSyncErrorCode;const isTxSubmissionErrorCode=e=>"number"==typeof e&&d.has(e);t.isTxSubmissionErrorCode=isTxSubmissionErrorCode;const isStateQueryErrorCode=e=>"number"==typeof e&&i.has(e);t.isStateQueryErrorCode=isStateQueryErrorCode;const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&n.has(e);t.isGeneralCardanoNodeErrorCode=isGeneralCardanoNodeErrorCode;const asChainSyncErrorCode=e=>(0,t.isChainSyncErrorCode)(e)?e:null;t.asChainSyncErrorCode=asChainSyncErrorCode;const asStateQueryErrorCode=e=>(0,t.isStateQueryErrorCode)(e)?e:null;t.asStateQueryErrorCode=asStateQueryErrorCode;const asGeneralCardanoNodeErrorCode=e=>(0,t.isGeneralCardanoNodeErrorCode)(e)?e:null;t.asGeneralCardanoNodeErrorCode=asGeneralCardanoNodeErrorCode;const asTxSubmissionErrorCode=e=>(0,t.isTxSubmissionErrorCode)(e)?e:null;t.asTxSubmissionErrorCode=asTxSubmissionErrorCode;const isProviderError=e=>e instanceof a.ProviderError;t.isProviderError=isProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.OutsideOfValidityInterval;t.isOutsideOfValidityIntervalError=isOutsideOfValidityIntervalError;const isValueNotConservedError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.ValueNotConserved;t.isValueNotConservedError=isValueNotConservedError;const isIncompleteWithdrawalsError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.IncompleteWithdrawals;t.isIncompleteWithdrawalsError=isIncompleteWithdrawalsError;const isUnknownOutputReferences=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownOutputReferences;t.isUnknownOutputReferences=isUnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.CredentialAlreadyRegistered;t.isCredentialAlreadyRegistered=isCredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepAlreadyRegistered;t.isDrepAlreadyRegistered=isDrepAlreadyRegistered;const isUnknownCredential=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownCredential;t.isUnknownCredential=isUnknownCredential;const isDrepNotRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepNotRegistered;t.isDrepNotRegistered=isDrepNotRegistered},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toLiveStake=void 0;const toLiveStake=e=>[...e.values()].reduce((e,{stake:t})=>e+t.pool,BigInt(0));t.toLiveStake=toLiveStake},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.handleProviderPaths=void 0;t.handleProviderPaths={getPolicyIds:"/policyIds",healthCheck:"/health",resolveHandles:"/resolve"}},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SortFields=t.isPoolROSSortField=t.isPoolAPYSortField=t.isPoolMetricsSortField=t.isPoolDataSortField=t.PoolROSSortFields=t.PoolAPYSortFields=t.PoolMetricsSortFields=t.PoolDataSortFields=void 0;t.PoolDataSortFields=["cost","name","margin","pledge","ticker"];t.PoolMetricsSortFields=["blocks","liveStake","saturation"];t.PoolAPYSortFields=["apy"];t.PoolROSSortFields=["ros","lastRos"];const isPoolDataSortField=e=>t.PoolDataSortFields.includes(e);t.isPoolDataSortField=isPoolDataSortField;const isPoolMetricsSortField=e=>t.PoolMetricsSortFields.includes(e);t.isPoolMetricsSortField=isPoolMetricsSortField;const isPoolAPYSortField=e=>t.PoolAPYSortFields.includes(e);t.isPoolAPYSortField=isPoolAPYSortField;const isPoolROSSortField=e=>t.PoolROSSortFields.includes(e);t.isPoolROSSortField=isPoolROSSortField;t.SortFields=[...t.PoolDataSortFields,...t.PoolMetricsSortFields,...t.PoolAPYSortFields,...t.PoolROSSortFields]},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.ProviderUtil=void 0;o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js"),t);t.ProviderUtil=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;Object.defineProperty(t,"__esModule",{value:true});t.ProviderFactory=void 0;class ProviderFactory{register(e,t){r(this,s,"f").set(e,t)}create(e,t,a){if(!r(this,s,"f").has(e))throw new Error(`Provider unsupported: ${e}`);return r(this,s,"f").get(e)(t,a)}getProviders(){return[...r(this,s,"f").keys()]}constructor(){s.set(this,new Map)}}t.ProviderFactory=ProviderFactory;s=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.jsonToMetadatum=t.withProviderErrors=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const a=e[s];r[s]="function"==typeof a?(...e)=>a(...e).catch(t):a;return r},{});t.withProviderErrors=withProviderErrors;const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(t.jsonToMetadatum)}return new Map(Object.keys(e).map(r=>[tryParseBigIntKey(r),(0,t.jsonToMetadatum)(e[r])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};t.jsonToMetadatum=jsonToMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i,n,d,c,l,u,f,p,h,m;Object.defineProperty(t,"__esModule",{value:true});t.AuxiliaryData=t.ALONZO_AUX_TAG=t.SHELLEY_ERA_FIELDS_COUNT=void 0;const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");t.SHELLEY_ERA_FIELDS_COUNT=2;t.ALONZO_AUX_TAG=259;class AuxiliaryData{toCbor(){if(s(this,f,"f"))return s(this,f,"f");const e=new v.CborWriter;const r=s(this,o,"m",p).call(this);if(1===r&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));else if(r===t.SHELLEY_ERA_FIELDS_COUNT&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0&&void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeStartArray(r);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));e.writeStartArray(s(this,d,"f").length);for(const a of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(a.toCbor()))}else{e.writeTag(t.ALONZO_AUX_TAG);e.writeStartMap(r);if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()))}if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeInt(1n);e.writeStartArray(s(this,d,"f").length);for(const i of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(i.toCbor()))}if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0){e.writeInt(2n);e.writeStartArray(s(this,c,"f").length);for(const h of s(this,c,"f"))e.writeEncodedValue((0,P.hexToBytes)(h.toCbor()))}if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0){e.writeInt(3n);e.writeStartArray(s(this,l,"f").length);for(const m of s(this,l,"f"))e.writeEncodedValue((0,P.hexToBytes)(m.toCbor()))}if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0){e.writeInt(4n);e.writeStartArray(s(this,u,"f").length);for(const _ of s(this,u,"f"))e.writeEncodedValue((0,P.hexToBytes)(_.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const r=new v.CborReader(e);const s=new AuxiliaryData;const o=r.peekState();if(o===v.CborReaderState.StartMap)a(s,n,_.GeneralTransactionMetadata.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())),"f");else if(o===v.CborReaderState.Tag){const i=r.readTag();if(i!==t.ALONZO_AUX_TAG){throw new y.InvalidArgumentError("cbor",`Expected tag '${t.ALONZO_AUX_TAG}', but got ${i}.`)}r.readStartMap();while(r.peekState()!==v.CborReaderState.EndMap){const d=r.readInt();switch(d){case 0n:a(s,n,_.GeneralTransactionMetadata.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())),"f");break;case 1n:s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(w.NativeScript.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 2n:s.setPlutusV1Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV1Scripts().push(w.PlutusV1Script.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 3n:s.setPlutusV2Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV2Scripts().push(w.PlutusV2Script.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 4n:s.setPlutusV3Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV3Scripts().push(w.PlutusV3Script.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break}}r.readEndMap()}else{r.readStartArray();a(s,n,_.GeneralTransactionMetadata.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())),"f");s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(w.NativeScript.fromCbor(y.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}a(s,f,e,"f");return s}toCore(){const e=s(this,o,"m",h).call(this);const t={blob:s(this,n,"f")?s(this,n,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(_.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=s(AuxiliaryData,i,"m",m).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return s(this,n,"f")}setMetadata(e){a(this,n,e,"f");a(this,f,void 0,"f")}nativeScripts(){return s(this,d,"f")}setNativeScripts(e){a(this,d,e,"f");a(this,f,void 0,"f")}plutusV1Scripts(){return s(this,c,"f")}setPlutusV1Scripts(e){a(this,c,e,"f");a(this,f,void 0,"f")}plutusV2Scripts(){return s(this,l,"f")}setPlutusV2Scripts(e){a(this,l,e,"f");a(this,f,void 0,"f")}plutusV3Scripts(){return s(this,u,"f")}setPlutusV3Scripts(e){a(this,u,e,"f");a(this,f,void 0,"f")}constructor(){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}t.AuxiliaryData=AuxiliaryData;i=AuxiliaryData,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,o=new WeakSet,p=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)++e;if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0)++e;if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0)++e;if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0)++e;if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0)++e;return e},h=function _AuxiliaryData_getCoreScripts(){const e=s(this,c,"f")?s(this,c,"f").map(e=>e.toCore()):[];const t=s(this,l,"f")?s(this,l,"f").map(e=>e.toCore()):[];const r=s(this,u,"f")?s(this,u,"f").map(e=>e.toCore()):[];const a=s(this,d,"f")?s(this,d,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...a]},m=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case g.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(w.NativeScript.fromCore(r));break;case g.ScriptType.Plutus:if(r.version===g.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(w.PlutusV1Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(w.PlutusV2Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(w.PlutusV3Script.fromCore(r))}break;default:throw new b.SerializationError(b.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.GeneralTransactionMetadata=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class GeneralTransactionMetadata{toCbor(){if(a(this,i,"f"))return a(this,i,"f");const e=new n.CborWriter;e.writeStartMap(a(this,o,"f").size);for(const[t,r]of a(this,o,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,l.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new n.CborReader(e);r.readStartMap();while(r.peekState()!==n.CborReaderState.EndMap){const s=r.readInt();const a=c.TransactionMetadatum.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,a)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...a(this,o,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],c.TransactionMetadatum.fromCore(e[1])])))}metadata(){return a(this,o,"f")}setMetadata(e){s(this,o,e,"f");s(this,i,void 0,"f")}equals(e){if(a(this,i,"f")===a(e,i,"f"))return true;if(a(this,o,"f").size!==a(e,o,"f").size)return false;const t=[...a(this,o,"f").entries()];const r=[...a(e,o,"f").entries()];for(let s=0;s<a(this,o,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.GeneralTransactionMetadata=GeneralTransactionMetadata;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumList=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumList{toCbor(){const e=new n.CborWriter;if(s(this,i,"f"))e.writeStartArray();else e.writeStartArray(s(this,o,"f").length);for(const t of s(this,o,"f"))e.writeEncodedValue((0,l.hexToBytes)(t.toCbor()));if(s(this,i,"f"))e.writeEndArray();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new n.CborReader(e);const s=r.readStartArray();if(null===s)a(t,i,true,"f");while(r.peekState()!==n.CborReaderState.EndArray){t.add(c.TransactionMetadatum.fromCbor((0,l.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,o,"f").length}get(e){return s(this,o,"f")[e]}add(e){s(this,o,"f").push(e)}equals(e){if(s(this,o,"f").length!==s(e,o,"f").length)return false;for(let t=0;t<s(this,o,"f").length;++t)if(!s(this,o,"f")[t].equals(s(e,o,"f")[t]))return false;return true}constructor(){o.set(this,new Array);i.set(this,false)}}t.MetadatumList=MetadatumList;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumMap{toCbor(){const e=new n.CborWriter;if(s(this,i,"f"))e.writeStartMap();else e.writeStartMap(s(this,o,"f").size);for(const[t,r]of s(this,o,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,i,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)a(t,i,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const o=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(o,d)}r.readEndMap();return t}getLength(){return s(this,o,"f").size}insert(e,t){s(this,o,"f").set(e,t)}get(e){if(!s(this,o,"f"))return;const t=[...s(this,o,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new c.MetadatumList;for(const t of s(this,o,"f").keys())e.add(t);return e}equals(e){if(s(this,i,"f")!==s(e,i,"f"))return false;if(s(this,o,"f").size!==s(e,o,"f").size)return false;const t=[...s(this,o,"f").entries()];const r=[...s(e,o,"f").entries()];for(let a=0;a<s(this,o,"f").size;++a){if(!t[a][0].equals(r[a][0]))return false;if(!t[a][1].equals(r[a][1]))return false}return true}constructor(){o.set(this,new Map);i.set(this,false)}}t.MetadatumMap=MetadatumMap;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatum=void 0;const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?s.from(e,"utf8").length:e.length;if(t>64)throw new _.SerializationError(_.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(a(this,f,"f"))return a(this,f,"f");let e;switch(a(this,u,"f")){case y.TransactionMetadatumKind.Map:e=a(this,i,"f").toCbor();break;case y.TransactionMetadatumKind.List:e=a(this,n,"f").toCbor();break;case y.TransactionMetadatumKind.Bytes:{const t=new p.CborWriter;check64Length(a(this,c,"f"));t.writeByteString(a(this,c,"f"));e=(0,w.bytesToHex)(t.encode());break}case y.TransactionMetadatumKind.Text:{const r=new p.CborWriter;check64Length(a(this,l,"f"));r.writeTextString(a(this,l,"f"));e=(0,w.bytesToHex)(r.encode());break}case y.TransactionMetadatumKind.Integer:{const s=new p.CborWriter;if(a(this,d,"f")>=0&&a(this,d,"f")<=g||a(this,d,"f")<0&&a(this,d,"f")>=-1n-g)s.writeInt(a(this,d,"f"));else s.writeBigInteger(a(this,d,"f"));e=(0,w.bytesToHex)(s.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new p.CborReader(e);const s=r.peekState();switch(s){case p.CborReaderState.Tag:{const a=r.peekTag();switch(a){case p.CborTag.UnsignedBigNum:{r.readTag();const _=r.readByteString();o(t,d,TransactionMetadatum.bufferToBigint(_),"f");o(t,u,y.TransactionMetadatumKind.Integer,"f");break}case p.CborTag.NegativeBigNum:{r.readTag();const w=r.readByteString();o(t,d,TransactionMetadatum.bufferToBigint(w)*-1n,"f");o(t,u,y.TransactionMetadatumKind.Integer,"f");break}}break}case p.CborReaderState.NegativeInteger:case p.CborReaderState.UnsignedInteger:o(t,d,r.readInt(),"f");o(t,u,y.TransactionMetadatumKind.Integer,"f");break;case p.CborReaderState.StartIndefiniteLengthByteString:case p.CborReaderState.ByteString:o(t,c,r.readByteString(),"f");o(t,u,y.TransactionMetadatumKind.Bytes,"f");break;case p.CborReaderState.StartIndefiniteLengthTextString:case p.CborReaderState.TextString:o(t,l,r.readTextString(),"f");o(t,u,y.TransactionMetadatumKind.Text,"f");break;case p.CborReaderState.StartArray:o(t,n,m.MetadatumList.fromCbor(h.HexBlob.fromBytes(r.readEncodedValue())),"f");o(t,u,y.TransactionMetadatumKind.List,"f");break;case p.CborReaderState.StartMap:o(t,i,v.MetadatumMap.fromCbor(h.HexBlob.fromBytes(r.readEncodedValue())),"f");o(t,u,y.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}o(t,f,e,"f");return t}toCore(){switch(a(this,u,"f")){case y.TransactionMetadatumKind.Bytes:return new Uint8Array(a(this,c,"f"));case y.TransactionMetadatumKind.Text:return a(this,l,"f");case y.TransactionMetadatumKind.Integer:return a(this,d,"f");case y.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(a(this,n,"f"));case y.TransactionMetadatumKind.Map:{const e=a(this,i,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const o=r.get(s);t.set(o.toCore(),e.get(o).toCore())}return t}default:throw new _.NotImplementedError(`TransactionMetadatum mapping for kind ${a(this,u,"f")}`)}}static fromCore(e){if(null===e)throw new _.SerializationError(_.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new _.SerializationError(_.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new m.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new v.MetadatumMap;for(const[a,o]of e.entries())s.insert(TransactionMetadatum.fromCore(a),TransactionMetadatum.fromCore(o));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;o(t,i,e,"f");o(t,u,y.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;o(t,n,e,"f");o(t,u,y.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;o(t,d,e,"f");o(t,u,y.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;o(t,c,e,"f");o(t,u,y.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;o(t,l,e,"f");o(t,u,y.TransactionMetadatumKind.Text,"f");return t}getKind(){return a(this,u,"f")}asMap(){return a(this,i,"f")}asList(){return a(this,n,"f")}asInteger(){return a(this,d,"f")}asBytes(){return a(this,c,"f")}asText(){return a(this,l,"f")}equals(e){let t=false;switch(a(this,u,"f")){case y.TransactionMetadatumKind.Bytes:if(a(this,c,"f")&&a(e,c,"f")){return a(this,c,"f").length===a(e,c,"f").length&&a(this,c,"f").every((t,r)=>t===a(e,c,"f")[r])}return false;case y.TransactionMetadatumKind.Integer:return a(this,d,"f")===a(e,d,"f");case y.TransactionMetadatumKind.Text:return a(this,l,"f")===a(e,l,"f");case y.TransactionMetadatumKind.List:if(a(this,n,"f")&&a(e,n,"f")){return a(this,n,"f").equals(a(e,n,"f"))}return false;case y.TransactionMetadatumKind.Map:if(a(this,i,"f")&&a(e,i,"f")){return a(this,i,"f").equals(a(e,i,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,y.TransactionMetadatumKind.Map);f.set(this,void 0)}}t.TransactionMetadatum=TransactionMetadatum;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatumKind=void 0;var r;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(r=t.TransactionMetadatumKind||(t.TransactionMetadatumKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborAdditionalInfo=void 0;var r;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(r=t.CborAdditionalInfo||(t.CborAdditionalInfo={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.CborInitialByte=void 0;class CborInitialByte{CborInitialByte(e,t){r(this,a,e<<5|t,"f")}static from(e){const t=new CborInitialByte;r(t,a,e,"f");return t}getInitialByte(){return s(this,a,"f")}getMajorType(){return s(this,a,"f")>>5}getAdditionalInfo(){return s(this,a,"f")&CborInitialByte.AdditionalInformationMask}constructor(){a.set(this,void 0)}}t.CborInitialByte=CborInitialByte;a=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborMajorType=void 0;var r;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(r=t.CborMajorType||(t.CborMajorType={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x;Object.defineProperty(t,"__esModule",{value:true});t.CborReader=void 0;const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const F="Unexpected end of buffer";class CborReader{peekState(){if(o(this,p,"f")===D.CborReaderState.Undefined)a(this,p,o(this,i,"m",C).call(this),"f");return o(this,p,"f")}getBytesRemaining(){return o(this,d,"f").length-o(this,c,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=o(this,c,"f");let t=0;do{t=o(this,i,"m",x).call(this,t)}while(t>0)return o(this,d,"f").slice(e,o(this,c,"f"))}readStartArray(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Array);if(e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){o(this,i,"m",P).call(this,1);o(this,i,"m",_).call(this,B.CborMajorType.Array);return null}const t=o(this,i,"m",g).call(this);const{length:r,bytesRead:s}=o(CborReader,n,"m",T).call(CborReader,e,t);o(this,i,"m",P).call(this,s);o(this,i,"m",_).call(this,B.CborMajorType.Array,r);return r}readEndArray(){if(void 0===o(this,f,"f").definiteLength){o(this,i,"m",v).call(this);o(this,i,"m",y).call(this,B.CborMajorType.Array);o(this,i,"m",b).call(this);o(this,i,"m",P).call(this,1)}else{o(this,i,"m",y).call(this,B.CborMajorType.Array);o(this,i,"m",b).call(this)}}readInt(){const e=o(this,i,"m",A).call(this);o(this,i,"m",P).call(this,e.bytesRead);o(this,i,"m",b).call(this);return e.signedInt}readUInt(){const e=o(this,i,"m",k).call(this);o(this,i,"m",P).call(this,e.bytesRead);o(this,i,"m",b).call(this);return e.unsignedInt}readDouble(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Simple);let t;const r=o(this,i,"m",g).call(this);switch(e.getAdditionalInfo()){case R.CborAdditionalInfo.Additional16BitData:o(this,i,"m",S).call(this,3);t=(0,N.decodeHalf)(r.slice(1));o(this,i,"m",P).call(this,3);o(this,i,"m",b).call(this);return t;case R.CborAdditionalInfo.Additional32BitData:o(this,i,"m",S).call(this,5);t=s.from(r).readFloatBE(1);o(this,i,"m",P).call(this,5);o(this,i,"m",b).call(this);return t;case R.CborAdditionalInfo.Additional64BitData:o(this,i,"m",S).call(this,9);t=s.from(r).readDoubleBE(1);o(this,i,"m",P).call(this,9);o(this,i,"m",b).call(this);return t;default:throw new M.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Simple);if((e.getInitialByte()&O.CborInitialByte.AdditionalInformationMask)<R.CborAdditionalInfo.Additional8BitData){o(this,i,"m",P).call(this,1);o(this,i,"m",b).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===R.CborAdditionalInfo.Additional8BitData){o(this,i,"m",S).call(this,2);const t=o(this,d,"f")[o(this,c,"f")+1];o(this,i,"m",P).call(this,2);o(this,i,"m",b).call(this);return t}throw new M.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=o(this,i,"m",h).call(this,B.CborMajorType.NegativeInteger);const t=o(CborReader,n,"m",I).call(CborReader,e,o(this,i,"m",g).call(this));o(this,i,"m",P).call(this,t.bytesRead);o(this,i,"m",b).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=o(this,i,"m",h).call(this,B.CborMajorType.Map);if(t.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){o(this,i,"m",P).call(this,1);o(this,i,"m",_).call(this,B.CborMajorType.Map);e=null}else{const r=o(this,i,"m",g).call(this);const s=o(CborReader,n,"m",T).call(CborReader,t,r);if(2*s.length>r.length-s.bytesRead)throw new M.CborContentException("Definite length exceeds buffer size");o(this,i,"m",P).call(this,s.bytesRead);o(this,i,"m",_).call(this,B.CborMajorType.Map,2*s.length);e=s.length}o(this,f,"f").currentKeyOffset=o(this,c,"f");return e}readEndMap(){if(void 0===o(this,f,"f").definiteLength){o(this,i,"m",v).call(this);if(o(this,f,"f").itemsRead%2!==0)throw new M.CborContentException("Key missing value");o(this,i,"m",y).call(this,B.CborMajorType.Map);o(this,i,"m",b).call(this);o(this,i,"m",P).call(this,1)}else{o(this,i,"m",y).call(this,B.CborMajorType.Map);o(this,i,"m",b).call(this)}}readBoolean(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==R.CborAdditionalInfo.AdditionalTrue&&t!==R.CborAdditionalInfo.AdditionalFalse)throw new M.CborContentException("Not a boolean encoding");const r=t===R.CborAdditionalInfo.AdditionalTrue;o(this,i,"m",P).call(this,1);o(this,i,"m",b).call(this);return r}readNull(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==R.CborAdditionalInfo.AdditionalNull)throw new M.CborContentException("Not a null encoding");o(this,i,"m",P).call(this,1);o(this,i,"m",b).call(this)}readStartIndefiniteLengthByteString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.ByteString);if(e.getAdditionalInfo()!==R.CborAdditionalInfo.IndefiniteLength)throw new M.CborInvalidOperationException("Not indefinite length string");o(this,i,"m",P).call(this,1);o(this,i,"m",_).call(this,B.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){o(this,i,"m",v).call(this);o(this,i,"m",y).call(this,B.CborMajorType.ByteString);o(this,i,"m",b).call(this);o(this,i,"m",P).call(this,1)}readByteString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.ByteString);if(e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=o(this,i,"m",E).call(this,B.CborMajorType.ByteString);o(this,i,"m",P).call(this,r);o(this,i,"m",b).call(this);return t}const s=o(this,i,"m",g).call(this);const{length:a,bytesRead:d}=o(CborReader,n,"m",T).call(CborReader,e,s);o(this,i,"m",S).call(this,d+a);o(this,i,"m",P).call(this,d+a);o(this,i,"m",b).call(this);return s.slice(d,d+a)}readDefiniteLengthByteString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.ByteString);if(e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){throw new M.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=o(this,i,"m",g).call(this);const{length:r,bytesRead:s}=o(CborReader,n,"m",T).call(CborReader,e,t);o(this,i,"m",S).call(this,s+r);o(this,i,"m",P).call(this,s+r);o(this,i,"m",b).call(this);return t.slice(s,s+r)}readStartIndefiniteLengthTextString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==R.CborAdditionalInfo.IndefiniteLength)throw new M.CborInvalidOperationException("Not indefinite length string");o(this,i,"m",P).call(this,1);o(this,i,"m",_).call(this,B.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){o(this,i,"m",v).call(this);o(this,i,"m",y).call(this,B.CborMajorType.Utf8String);o(this,i,"m",b).call(this);o(this,i,"m",P).call(this,1)}readTextString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Utf8String);if(e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=o(this,i,"m",E).call(this,B.CborMajorType.Utf8String);o(this,i,"m",P).call(this,r);o(this,i,"m",b).call(this);return s.from(t).toString("utf8")}const a=o(this,i,"m",g).call(this);const{length:d,bytesRead:c}=o(CborReader,n,"m",T).call(CborReader,e,a);o(this,i,"m",S).call(this,c+d);o(this,i,"m",P).call(this,c+d);o(this,i,"m",b).call(this);return s.from(a.slice(c,c+d)).toString("utf8")}readDefiniteLengthTextString(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Utf8String);if(e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength){throw new M.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=o(this,i,"m",g).call(this);const{length:r,bytesRead:a}=o(CborReader,n,"m",T).call(CborReader,e,t);o(this,i,"m",S).call(this,a+r);o(this,i,"m",P).call(this,a+r);o(this,i,"m",b).call(this);return s.from(t.slice(a,a+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=o(this,i,"m",j).call(this);o(this,i,"m",P).call(this,t);a(this,u,true,"f");return e}peekTag(){const{tag:e}=o(this,i,"m",j).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new M.CborContentException(F)}}static mapSimpleValueDataToReaderState(e){switch(e){case R.CborAdditionalInfo.AdditionalNull:return D.CborReaderState.Null;case R.CborAdditionalInfo.AdditionalFalse:case R.CborAdditionalInfo.AdditionalTrue:return D.CborReaderState.Boolean;case R.CborAdditionalInfo.Additional16BitData:return D.CborReaderState.HalfPrecisionFloat;case R.CborAdditionalInfo.Additional32BitData:return D.CborReaderState.SinglePrecisionFloat;case R.CborAdditionalInfo.Additional64BitData:return D.CborReaderState.DoublePrecisionFloat;default:return D.CborReaderState.SimpleValue}}constructor(e){i.add(this);d.set(this,void 0);c.set(this,0);l.set(this,new Array);u.set(this,false);f.set(this,void 0);p.set(this,D.CborReaderState.Undefined);a(this,d,new Uint8Array(s.from(e,"hex")),"f");a(this,f,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}t.CborReader=CborReader;n=CborReader,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,i=new WeakSet,h=function _CborReader_peekInitialByte(e){if(void 0!==o(this,f,"f").definiteLength&&o(this,f,"f").definiteLength-o(this,f,"f").itemsRead===0)throw new M.CborInvalidOperationException("No more data items to read");if(o(this,c,"f")===o(this,d,"f").length){if(null===o(this,f,"f").type&&void 0===o(this,f,"f").definiteLength&&o(this,c,"f")>0)throw new M.CborInvalidOperationException("End of root-level. No more data items to read");throw new M.CborContentException(F)}const t=O.CborInitialByte.from(o(this,d,"f")[o(this,c,"f")]);switch(o(this,f,"f").type){case B.CborMajorType.ByteString:case B.CborMajorType.Utf8String:if(t.getInitialByte()===O.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===o(this,f,"f").type&&t.getAdditionalInfo()!==R.CborAdditionalInfo.IndefiniteLength){break}throw new M.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new M.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},m=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=O.CborInitialByte.from(e[0]);if(r.getInitialByte()!==O.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new M.CborContentException("Indefinite length string contains invalid data item");return r},v=function _CborReader_validateNextByteIsBreakByte(){const e=o(this,i,"m",h).call(this);if(e.getInitialByte()!==O.CborInitialByte.IndefiniteLengthBreakByte)throw new M.CborInvalidOperationException("Not at end of indefinite length data item")},_=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:o(this,f,"f").currentKeyOffset,definiteLength:o(this,f,"f").definiteLength,frameOffset:o(this,f,"f").frameOffset,itemsRead:o(this,f,"f").itemsRead,type:o(this,f,"f").type};o(this,l,"f").push(r);o(this,f,"f").type=e;o(this,f,"f").definiteLength=t;o(this,f,"f").itemsRead=0;o(this,f,"f").frameOffset=o(this,c,"f");a(this,u,false,"f");o(this,f,"f").currentKeyOffset=null},y=function _CborReader_popDataItem(e){if(null===o(this,f,"f").type||o(this,l,"f").length<=0)throw new M.CborInvalidOperationException("Is at root context");if(e!==o(this,f,"f").type)throw new M.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${o(this,f,"f").type}`);if(void 0!==o(this,f,"f").definiteLength&&o(this,f,"f").definiteLength-o(this,f,"f").itemsRead>0)throw new M.CborInvalidOperationException("Not at end of definite length data item");if(o(this,u,"f"))throw new M.CborContentException("Tag not followed by value");const t=o(this,l,"f").pop();o(this,i,"m",w).call(this,t)},w=function _CborReader_restoreStackFrame(e){o(this,f,"f").type=e.type;o(this,f,"f").frameOffset=e.frameOffset;o(this,f,"f").definiteLength=e.definiteLength;o(this,f,"f").itemsRead=e.itemsRead;o(this,f,"f").currentKeyOffset=e.currentKeyOffset;a(this,p,D.CborReaderState.Undefined,"f")},g=function _CborReader_getRemainingBytes(){return o(this,d,"f").slice(o(this,c,"f"))},b=function _CborReader_advanceDataItemCounters(){++o(this,f,"f").itemsRead;a(this,u,false,"f")},P=function _CborReader_advanceBuffer(e){if(o(this,c,"f")+e>o(this,d,"f").length)throw new M.CborContentException("Buffer offset out of bounds");a(this,c,o(this,c,"f")+e,"f");a(this,p,D.CborReaderState.Undefined,"f")},S=function _CborReader_ensureReadCapacity(e){if(o(this,d,"f").length-o(this,c,"f")<e){throw new M.CborContentException(F)}},C=function _CborReader_peekStateCore(){if(void 0!==o(this,f,"f").definiteLength&&o(this,f,"f").definiteLength-o(this,f,"f").itemsRead===0){if(null===o(this,f,"f").type)return D.CborReaderState.Finished;switch(o(this,f,"f").type){case B.CborMajorType.Array:return D.CborReaderState.EndArray;case B.CborMajorType.Map:return D.CborReaderState.EndMap;default:throw new M.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(o(this,c,"f")===o(this,d,"f").length){if(null===o(this,f,"f").type&&void 0===o(this,f,"f").definiteLength){return D.CborReaderState.Finished}throw new M.CborInvalidOperationException(F)}const e=O.CborInitialByte.from(o(this,d,"f")[o(this,c,"f")]);if(e.getInitialByte()===O.CborInitialByte.IndefiniteLengthBreakByte){if(o(this,u,"f")){throw new M.CborContentException("Tag not followed by value")}if(void 0===o(this,f,"f").definiteLength){switch(o(this,f,"f").type){case null:throw new M.CborContentException("Unexpected break byte");case B.CborMajorType.ByteString:return D.CborReaderState.EndIndefiniteLengthByteString;case B.CborMajorType.Utf8String:return D.CborReaderState.EndIndefiniteLengthTextString;case B.CborMajorType.Array:return D.CborReaderState.EndArray;case B.CborMajorType.Map:if(o(this,f,"f").itemsRead%2===0)return D.CborReaderState.EndMap;throw new M.CborContentException("Key missing value");default:throw new M.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new M.CborContentException("Unexpected break byte")}}if(null!==o(this,f,"f").type&&null!==o(this,f,"f").definiteLength){switch(o(this,f,"f").type){case B.CborMajorType.ByteString:case B.CborMajorType.Utf8String:if(e.getMajorType()!==o(this,f,"f").type){throw new M.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case B.CborMajorType.UnsignedInteger:return D.CborReaderState.UnsignedInteger;case B.CborMajorType.NegativeInteger:return D.CborReaderState.NegativeInteger;case B.CborMajorType.ByteString:return e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthByteString:D.CborReaderState.ByteString;case B.CborMajorType.Utf8String:return e.getAdditionalInfo()===R.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthTextString:D.CborReaderState.TextString;case B.CborMajorType.Array:return D.CborReaderState.StartArray;case B.CborMajorType.Map:return D.CborReaderState.StartMap;case B.CborMajorType.Tag:return D.CborReaderState.Tag;case B.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new M.CborContentException("Invalid CBOR major type.")}},T=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=o(CborReader,n,"m",I).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},k=function _CborReader_peekUnsignedInteger(){const e=o(this,i,"m",h).call(this);switch(e.getMajorType()){case B.CborMajorType.UnsignedInteger:return o(CborReader,n,"m",I).call(CborReader,e,o(this,i,"m",g).call(this));case B.CborMajorType.NegativeInteger:throw new M.CborContentException("Integer overflow");default:throw new M.CborInvalidOperationException(`Reader type mismatch, expected ${B.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},A=function _CborReader_peekSignedInteger(){const e=o(this,i,"m",h).call(this);switch(e.getMajorType()){case B.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=o(CborReader,n,"m",I).call(CborReader,e,o(this,i,"m",g).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case B.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:a}=o(CborReader,n,"m",I).call(CborReader,e,o(this,i,"m",g).call(this));return{bytesRead:a,signedInt:BigInt(-1)-s}}default:throw new M.CborInvalidOperationException(`Reader type mismatch, expected ${B.CborMajorType.UnsignedInteger} or ${B.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},E=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=o(this,i,"m",g).call(this);let r=s.from([]);let a=0;let d=1;let c=o(CborReader,n,"m",m).call(CborReader,t.slice(d),e);while(c.getInitialByte()!==O.CborInitialByte.IndefiniteLengthBreakByte){const{length:l,bytesRead:u}=o(CborReader,n,"m",T).call(CborReader,c,t.slice(d));const f=u+Number(l);r=s.concat([r,t.slice(d+(f-l),d+f)]);d+=f;c=o(CborReader,n,"m",m).call(CborReader,t.slice(d),e)}a=d+1;return{encodingLength:a,val:new Uint8Array(r)}},j=function _CborReader_peekTagCore(){const e=o(this,i,"m",h).call(this,B.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=o(CborReader,n,"m",I).call(CborReader,e,o(this,i,"m",g).call(this));return{bytesRead:r,tag:Number(t)}},I=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&O.CborInitialByte.AdditionalInformationMask)<R.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case R.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case R.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=s.from(t.slice(1));const a=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(a)}}case R.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const o=s.from(t.slice(1));const i=o.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(i)}}case R.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const n=s.from(t.slice(1,9));let d=BigInt(0);for(const c of n)d=(d<<BigInt(8))+BigInt(c);return{bytesRead:9,unsignedInt:d}}default:throw new M.CborContentException("Invalid integer encoding")}},x=function _CborReader_skipNextNode(e){let t;let r=e;while((t=o(this,i,"m",C).call(this))===D.CborReaderState.Tag)this.readTag();switch(t){case D.CborReaderState.UnsignedInteger:this.readUInt();break;case D.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case D.CborReaderState.ByteString:this.readByteString();break;case D.CborReaderState.TextString:this.readTextString();break;case D.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case D.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case D.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case D.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new M.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case D.CborReaderState.StartArray:this.readStartArray();r++;break;case D.CborReaderState.EndArray:if(0===r)throw new M.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case D.CborReaderState.StartMap:this.readStartMap();r++;break;case D.CborReaderState.EndMap:if(0===r)throw new M.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case D.CborReaderState.HalfPrecisionFloat:case D.CborReaderState.SinglePrecisionFloat:case D.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case D.CborReaderState.Null:case D.CborReaderState.Boolean:case D.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new M.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborReaderState=void 0;var r;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(r=t.CborReaderState||(t.CborReaderState={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborSimpleValue=void 0;var r;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(r=t.CborSimpleValue||(t.CborSimpleValue={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborTag=void 0;var r;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(r=t.CborTag||(t.CborTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.CborWriter=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const v=BigInt(-1);const _=BigInt("0x100000000");const y=24;const w=25;const g=26;const b=27;const P=244;const S=245;const C=246;const T=247;const k=159;const A=191;const E=249;const j=250;const I=251;const x=s.from("ffc00000","hex");const R=s.from("fff0000000000000","hex");const M=s.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=h.CborTag.UnsignedBigNum;if(e<0){e=-e+v;t=h.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const c=s.from(r,"hex");this.writeTag(t);a(this,i,"m",d).call(this,p.CborMajorType.ByteString,c.length);o(this,n,s.concat([a(this,n,"f"),c]),"f");return this}writeBoolean(e){a(this,i,"m",c).call(this,e?S:P);return this}writeByteString(e){a(this,i,"m",d).call(this,p.CborMajorType.ByteString,e.length);o(this,n,s.concat([a(this,n,"f"),e]),"f");return this}writeTextString(e){a(this,i,"m",d).call(this,p.CborMajorType.Utf8String,s.from(e,"utf8").length);o(this,n,s.concat([a(this,n,"f"),s.from(e,"utf8")]),"f");return this}writeEncodedValue(e){o(this,n,s.concat([a(this,n,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)a(this,i,"m",d).call(this,p.CborMajorType.Array,e);else a(this,i,"m",c).call(this,k);return this}writeEndArray(){a(this,i,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)a(this,i,"m",d).call(this,p.CborMajorType.Map,e);else a(this,i,"m",c).call(this,A);return this}writeEndMap(){a(this,i,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)a(this,i,"m",d).call(this,p.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else a(this,i,"m",d).call(this,p.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){a(this,i,"m",c).call(this,I);this.writeEncodedValue(R);return this}if(e===Number.POSITIVE_INFINITY){a(this,i,"m",c).call(this,I);this.writeEncodedValue(M);return this}if(Number.isNaN(e)){a(this,i,"m",c).call(this,j);this.writeEncodedValue(x);return this}try{t=(0,m.encodeHalf)(e);a(this,i,"m",c).call(this,E);this.writeEncodedValue(t)}catch{const r=s.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){a(this,i,"m",c).call(this,j);this.writeEncodedValue(r.valueOf())}else{const o=s.allocUnsafe(8);o.writeFloatBE(e,0);a(this,i,"m",c).call(this,I);this.writeEncodedValue(o.valueOf())}}return this}writeNull(){a(this,i,"m",c).call(this,C);return this}writeUndefined(){a(this,i,"m",c).call(this,T);return this}writeTag(e){a(this,i,"m",d).call(this,p.CborMajorType.Tag,e);return this}encodeAsHex(){return a(this,n,"f").toString("hex")}encode(){return new Uint8Array(a(this,n,"f"))}reset(){o(this,n,s.from([]),"f")}constructor(){i.add(this);n.set(this,s.from([]))}}t.CborWriter=CborWriter;n=new WeakMap,i=new WeakSet,d=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)a(this,i,"m",c).call(this,r|Number(t));else if(t<256){a(this,i,"m",c).call(this,r|y);a(this,i,"m",c).call(this,Number(t))}else if(t<65536){a(this,i,"m",c).call(this,r|w);a(this,i,"m",l).call(this,Number(t))}else if(t<4294967296){a(this,i,"m",c).call(this,r|g);a(this,i,"m",u).call(this,Number(t))}else{a(this,i,"m",c).call(this,r|b);a(this,i,"m",u).call(this,Number(BigInt(t)/_));a(this,i,"m",u).call(this,Number(BigInt(t)%_))}},c=function _CborWriter_pushUInt8(e){const t=s.allocUnsafe(1);t.writeUInt8(e,0);o(this,n,s.concat([a(this,n,"f"),t]),"f")},l=function _CborWriter_pushUInt16(e){const t=s.allocUnsafe(2);t.writeUInt16BE(e,0);o(this,n,s.concat([a(this,n,"f"),t]),"f")},u=function _CborWriter_pushUInt32(e){const t=s.allocUnsafe(4);t.writeUInt32BE(e,0);o(this,n,s.concat([a(this,n,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.encodeHalf=t.decodeHalf=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const o="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let a=0;a<r;a++)s*=Math.pow(2,Math.floor((t+a)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let a;a=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-a:a};t.decodeHalf=decodeHalf;const encodeHalf=e=>{const t=s.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new a.LossOfPrecisionException(o)}let i=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)i+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new a.LossOfPrecisionException(o)}i+=d+8388608>>126-n}else{throw new a.LossOfPrecisionException(o)}const c=new Uint8Array(2);c[0]=i>>>8&255;c[1]=255&i;return c};t.encodeHalf=encodeHalf},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LossOfPrecisionException=t.CborContentException=t.CborInvalidOperationException=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}t.CborInvalidOperationException=CborInvalidOperationException;class CborContentException extends s.CustomError{constructor(e){super(e)}}t.CborContentException=CborContentException;class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}t.LossOfPrecisionException=LossOfPrecisionException},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.AuthCommitteeHot=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class AuthCommitteeHot{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(h.CertificateKind.AuthCommitteeHot);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeStartArray(_);e.writeInt(d(this,l,"f").type);e.writeByteString(s.from(d(this,l,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.AuthCommitteeHot)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.AuthCommitteeHot}, but got ${s}`);const a=t.readStartArray();if(a!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readStartArray();if(d!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const c=Number(t.readInt());const l=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const m=new AuthCommitteeHot({hash:i,type:o},{hash:l,type:c});n(m,u,e,"f");return m}toCore(){return{__typename:m.CertificateType.AuthorizeCommitteeHot,coldCredential:d(this,c,"f"),hotCredential:d(this,l,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return d(this,c,"f")}hotCredential(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.AuthCommitteeHot=AuthCommitteeHot;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T;Object.defineProperty(t,"__esModule",{value:true});t.Certificate=void 0;const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js");const x=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js");const F=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js");const G=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js");const q=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js");class Certificate{toCbor(){if(s(this,T,"f"))return s(this,T,"f");let e;switch(s(this,o,"f")){case E.CertificateKind.StakeRegistration:e=s(this,f,"f").toCbor();break;case E.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCbor();break;case E.CertificateKind.StakeDelegation:e=s(this,l,"f").toCbor();break;case E.CertificateKind.PoolRetirement:e=s(this,c,"f").toCbor();break;case E.CertificateKind.PoolRegistration:e=s(this,d,"f").toCbor();break;case E.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCbor();break;case E.CertificateKind.GenesisKeyDelegation:e=s(this,i,"f").toCbor();break;case E.CertificateKind.Registration:e=s(this,p,"f").toCbor();break;case E.CertificateKind.Unregistration:e=s(this,h,"f").toCbor();break;case E.CertificateKind.VoteDelegation:e=s(this,m,"f").toCbor();break;case E.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCbor();break;case E.CertificateKind.StakeRegistrationDelegation:e=s(this,_,"f").toCbor();break;case E.CertificateKind.VoteRegistrationDelegation:e=s(this,y,"f").toCbor();break;case E.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,w,"f").toCbor();break;case E.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCbor();break;case E.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCbor();break;case E.CertificateKind.DrepRegistration:e=s(this,P,"f").toCbor();break;case E.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCbor();break;case E.CertificateKind.UpdateDrep:e=s(this,C,"f").toCbor();break;default:throw new x.InvalidStateError(`Unexpected kind value: ${s(this,o,"f")}`)}return e}static fromCbor(e){let t;const r=new A.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case E.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(G.StakeRegistration.fromCbor(e));break;case E.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(H.StakeDeregistration.fromCbor(e));break;case E.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(F.StakeDelegation.fromCbor(e));break;case E.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(O.PoolRetirement.fromCbor(e));break;case E.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(M.PoolRegistration.fromCbor(e));break;case E.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(R.MoveInstantaneousReward.fromCbor(e));break;case E.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(I.GenesisKeyDelegation.fromCbor(e));break;case E.CertificateKind.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCbor(e));break;case E.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(z.Unregistration.fromCbor(e));break;case E.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert($.VoteDelegation.fromCbor(e));break;case E.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(K.StakeVoteDelegation.fromCbor(e));break;case E.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(V.StakeRegistrationDelegation.fromCbor(e));break;case E.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCbor(e));break;case E.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(L.StakeVoteRegistrationDelegation.fromCbor(e));break;case E.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(k.AuthCommitteeHot.fromCbor(e));break;case E.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(N.ResignCommitteeCold.fromCbor(e));break;case E.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(B.RegisterDelegateRepresentative.fromCbor(e));break;case E.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(W.UnregisterDelegateRepresentative.fromCbor(e));break;case E.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert(U.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new x.InvalidStateError(`Unexpected kind value: ${s}`)}a(t,T,e,"f");return t}toCore(){let e;switch(s(this,o,"f")){case E.CertificateKind.StakeRegistration:e=s(this,f,"f").toCore();break;case E.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCore();break;case E.CertificateKind.StakeDelegation:e=s(this,l,"f").toCore();break;case E.CertificateKind.PoolRetirement:e=s(this,c,"f").toCore();break;case E.CertificateKind.PoolRegistration:e=s(this,d,"f").toCore();break;case E.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCore();break;case E.CertificateKind.GenesisKeyDelegation:e=s(this,i,"f").toCore();break;case E.CertificateKind.Registration:e=s(this,p,"f").toCore();break;case E.CertificateKind.Unregistration:e=s(this,h,"f").toCore();break;case E.CertificateKind.VoteDelegation:e=s(this,m,"f").toCore();break;case E.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCore();break;case E.CertificateKind.StakeRegistrationDelegation:e=s(this,_,"f").toCore();break;case E.CertificateKind.VoteRegistrationDelegation:e=s(this,y,"f").toCore();break;case E.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,w,"f").toCore();break;case E.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCore();break;case E.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCore();break;case E.CertificateKind.DrepRegistration:e=s(this,P,"f").toCore();break;case E.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCore();break;case E.CertificateKind.UpdateDrep:e=s(this,C,"f").toCore();break;default:throw new x.InvalidStateError(`Unexpected kind value: ${s(this,o,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case j.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(G.StakeRegistration.fromCore(e));break;case j.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(H.StakeDeregistration.fromCore(e));break;case j.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(F.StakeDelegation.fromCore(e));break;case j.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(O.PoolRetirement.fromCore(e));break;case j.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(M.PoolRegistration.fromCore(e));break;case j.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(R.MoveInstantaneousReward.fromCore(e));break;case j.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(I.GenesisKeyDelegation.fromCore(e));break;case j.CertificateType.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCore(e));break;case j.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(z.Unregistration.fromCore(e));break;case j.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert($.VoteDelegation.fromCore(e));break;case j.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(K.StakeVoteDelegation.fromCore(e));break;case j.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(V.StakeRegistrationDelegation.fromCore(e));break;case j.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCore(e));break;case j.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(L.StakeVoteRegistrationDelegation.fromCore(e));break;case j.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(k.AuthCommitteeHot.fromCore(e));break;case j.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(N.ResignCommitteeCold.fromCore(e));break;case j.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(B.RegisterDelegateRepresentative.fromCore(e));break;case j.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(W.UnregisterDelegateRepresentative.fromCore(e));break;case j.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert(U.UpdateDelegateRepresentative.fromCore(e));break;default:throw new x.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;a(t,f,e,"f");a(t,o,E.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;a(t,u,e,"f");a(t,o,E.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;a(t,l,e,"f");a(t,o,E.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;a(t,d,e,"f");a(t,o,E.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;a(t,c,e,"f");a(t,o,E.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;a(t,i,e,"f");a(t,o,E.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;a(t,n,e,"f");a(t,o,E.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;a(t,p,e,"f");a(t,o,E.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;a(t,h,e,"f");a(t,o,E.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;a(t,m,e,"f");a(t,o,E.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;a(t,v,e,"f");a(t,o,E.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;a(t,_,e,"f");a(t,o,E.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;a(t,y,e,"f");a(t,o,E.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;a(t,w,e,"f");a(t,o,E.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;a(t,g,e,"f");a(t,o,E.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;a(t,b,e,"f");a(t,o,E.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;a(t,P,e,"f");a(t,o,E.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;a(t,S,e,"f");a(t,o,E.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;a(t,C,e,"f");a(t,o,E.CertificateKind.UpdateDrep,"f");return t}kind(){return s(this,o,"f")}asStakeRegistration(){return s(this,f,"f")}asStakeDeregistration(){return s(this,u,"f")}asStakeDelegation(){return s(this,l,"f")}asPoolRegistration(){return s(this,d,"f")}asPoolRetirement(){return s(this,c,"f")}asGenesisKeyDelegation(){return s(this,i,"f")}asMoveInstantaneousRewardsCert(){return s(this,n,"f")}asRegistrationCert(){return s(this,p,"f")}asUnregistrationCert(){return s(this,h,"f")}asVoteDelegationCert(){return s(this,m,"f")}asStakeVoteDelegationCert(){return s(this,v,"f")}asStakeRegistrationDelegationCert(){return s(this,_,"f")}asVoteRegistrationDelegationCert(){return s(this,y,"f")}asStakeVoteRegistrationDelegationCert(){return s(this,w,"f")}asAuthCommitteeHotCert(){return s(this,g,"f")}asResignCommitteeColdCert(){return s(this,b,"f")}asRegisterDelegateRepresentativeCert(){return s(this,P,"f")}asUnregisterDelegateRepresentativeCert(){return s(this,S,"f")}asUpdateDelegateRepresentativeCert(){return s(this,C,"f")}constructor(){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0)}}t.Certificate=Certificate;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificateKind=void 0;var r;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(r=t.CertificateKind||(t.CertificateKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.DRep=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");class DRep{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");if(d(this,l,"f")===m.DRepKind.KeyHash||d(this,l,"f")===m.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===m.DRepKind.KeyHash||r===m.DRepKind.ScriptHash){const s=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));if(r===m.DRepKind.KeyHash){return DRep.newKeyHash(s)}return DRep.newScriptHash(s)}t.readEndArray();if(r===m.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(d(this,l,"f")===m.DRepKind.KeyHash||d(this,l,"f")===m.DRepKind.ScriptHash)return d(this,c,"f");if(d(this,l,"f")===m.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,_.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,_.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===h.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(m.DRepKind.KeyHash,{hash:e,type:h.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(m.DRepKind.ScriptHash,{hash:e,type:h.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(m.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(m.DRepKind.NoConfidence,void 0)}kind(){return d(this,l,"f")}toKeyHash(){var e;if(d(this,l,"f")!==m.DRepKind.KeyHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(d(this,l,"f")!==m.DRepKind.ScriptHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,t,"f");n(this,l,e,"f")}}t.DRep=DRep;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DRepKind=void 0;var r;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(r=t.DRepKind||(t.DRepKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.GenesisKeyDelegation=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=4;class GenesisKeyDelegation{toCbor(){const e=new h.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(y);e.writeInt(m.CertificateKind.GenesisKeyDelegation);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.GenesisKeyDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.GenesisKeyDelegation}, but got ${s}`);const a=p.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));const o=p.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));const i=p.Hash32ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=new GenesisKeyDelegation(a,o,i);n(d,f,e,"f");return d}toCore(){return{__typename:v.CertificateType.GenesisKeyDelegation,genesisDelegateHash:d(this,l,"f"),genesisHash:d(this,c,"f"),vrfKeyHash:d(this,u,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return d(this,c,"f")}setGenesisHash(e){n(this,c,e,"f");n(this,f,void 0,"f")}genesisDelegateHash(){return d(this,l,"f")}setGenesisDelegateHash(e){n(this,l,e,"f");n(this,f,void 0,"f")}vrfKeyHash(){return d(this,u,"f")}setVrfKeyHash(e){n(this,u,e,"f");n(this,f,void 0,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.GenesisKeyDelegation=GenesisKeyDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousReward=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");const v=2;class MoveInstantaneousReward{toCbor(){if(a(this,c,"f"))return a(this,c,"f");let e;switch(a(this,d,"f")){case p.MirCertificateKind.ToOtherPot:e=a(this,i,"f").toCbor();break;case p.MirCertificateKind.ToStakeCreds:e=a(this,n,"f").toCbor();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${a(this,d,"f")}`)}const t=new l.CborWriter;t.writeStartArray(v);t.writeInt(u.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(s.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);let r=t.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const s=Number(t.readInt());if(s!==u.CertificateKind.MoveInstantaneousRewards)throw new f.InvalidArgumentError("cbor",`Expected certificate kind ${u.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const a=f.HexBlob.fromBytes(t.readEncodedValue());const _=new l.CborReader(a);r=_.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const y=new MoveInstantaneousReward;_.readInt();if(_.peekState()===l.CborReaderState.UnsignedInteger){o(y,i,h.MoveInstantaneousRewardToOtherPot.fromCbor(a),"f");o(y,d,p.MirCertificateKind.ToOtherPot,"f")}else if(_.peekState()===l.CborReaderState.StartArray||_.peekState()===l.CborReaderState.StartMap){o(y,n,m.MoveInstantaneousRewardToStakeCreds.fromCbor(a),"f");o(y,d,p.MirCertificateKind.ToStakeCreds,"f")}else{throw new f.InvalidArgumentError("cbor","Invalid CBOR string")}o(y,c,e,"f");return y}toCore(){let e;switch(a(this,d,"f")){case p.MirCertificateKind.ToOtherPot:e=a(this,i,"f").toCore();break;case p.MirCertificateKind.ToStakeCreds:e=a(this,n,"f").toCore();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${a(this,d,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case p.MirCertificateKind.ToOtherPot:o(t,i,h.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");o(t,d,p.MirCertificateKind.ToOtherPot,"f");break;case p.MirCertificateKind.ToStakeCreds:o(t,n,m.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");o(t,d,p.MirCertificateKind.ToStakeCreds,"f");break;default:throw new f.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;o(t,i,e,"f");o(t,d,p.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;o(t,n,e,"f");o(t,d,p.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return a(this,d,"f")}asToOtherPot(){return a(this,i,"f")}asToStakeCreds(){return a(this,n,"f")}constructor(){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.MoveInstantaneousReward=MoveInstantaneousReward;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToOtherPot=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(u);e.writeInt(a(this,o,"f")===c.MirCertificatePot.Reserves?0:1);e.writeInt(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=t.readInt();if(a<0||a>1)throw new l.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${a}`);const i=new MoveInstantaneousRewardToOtherPot(0===a?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,o);s(i,n,e,"f");return i}toCore(){return{__typename:c.CertificateType.MIR,kind:c.MirCertificateKind.ToOtherPot,pot:a(this,o,"f"),quantity:a(this,i,"f")}}static fromCore(e){if(e.kind!==c.MirCertificateKind.ToOtherPot)throw new l.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new l.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return a(this,o,"f")}setPot(e){s(this,o,e,"f");s(this,n,void 0,"f")}getAmount(){return a(this,i,"f")}setAmount(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.MoveInstantaneousRewardToOtherPot=MoveInstantaneousRewardToOtherPot;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToStakeCreds=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeInt(d(this,c,"f")===h.MirCertificatePot.Reserves?0:1);const t=new Map([...d(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeStartArray(v);e.writeInt(r.type);e.writeByteString(s.from(r.hash,"hex"));e.writeInt(a)}return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s<0||s>1)throw new m.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${s} elements`);t.readStartMap();const a=new Map;while(t.peekState()!==p.CborReaderState.EndMap){t.readStartArray();const o=Number(t.readInt());if(o<0||o>1)throw new m.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${o}`);const i=f.Hash28ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();a.set({hash:i,type:o},d)}t.readEndMap();const c=new MoveInstantaneousRewardToStakeCreds(0===s?h.MirCertificatePot.Reserves:h.MirCertificatePot.Treasury,a);n(c,u,e,"f");return c}toCore(){if(0===d(this,l,"f").size)throw new m.InvalidStateError("The credential map is empty.");const[[e,t]]=d(this,l,"f");return{__typename:h.CertificateType.MIR,kind:h.MirCertificateKind.ToStakeCreds,pot:d(this,c,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==h.MirCertificateKind.ToStakeCreds)throw new m.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new m.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return d(this,c,"f")}setPot(e){n(this,c,e,"f");n(this,u,void 0,"f")}getStakeCreds(){return d(this,l,"f")}setStakeCreds(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.MoveInstantaneousRewardToStakeCreds=MoveInstantaneousRewardToStakeCreds;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolMetadata=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=64;const v=2;class PoolMetadata{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==v)throw new h.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=t.readTextString();const a=f.Hash32ByteBase16(h.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const o=new PoolMetadata(s,a);n(o,u,e,"f");return o}toCore(){return{hash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolMetadataHash(){return d(this,l,"f")}setPoolMetadataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>m)throw new h.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolMetadata=PoolMetadata;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p,h,m,v,_,y;Object.defineProperty(t,"__esModule",{value:true});t.PoolParams=void 0;const w=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const S=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js");class PoolParams{toCbor(){const e=new b.CborWriter;if(d(this,y,"f"))return d(this,y,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));e.writeInt(d(this,f,"f"));e.writeEncodedValue(s.from(d(this,p,"f").toCbor(),"hex"));e.writeByteString(s.from(d(this,h,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(s.from(d(this,m,"f").toCbor(),"hex"));e.writeStartArray(d(this,v,"f").length);for(const t of d(this,v,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));if(d(this,_,"f"))e.writeEncodedValue(s.from(d(this,_,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new b.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new S.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);n(s,y,e,"f");return s}static fromFlattenedCbor(e){const t=w.Ed25519KeyHashHex(S.HexBlob.fromBytes(e.readByteString()));const r=(0,C.VrfVkHex)(S.HexBlob.fromBytes(e.readByteString()));const s=e.readInt();const a=e.readInt();const o=A.UnitInterval.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));const i=g.Address.fromBytes(S.HexBlob.fromBytes(e.readByteString())).asReward();const n=new Array;let d;const c=P.CborSet.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()),P.Hash.fromCbor);e.readStartArray();while(e.peekState()!==b.CborReaderState.EndArray)n.push(k.Relay.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==b.CborReaderState.Null)d=T.PoolMetadata.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,s,a,o,i,c,n,d)}toCore(){const e=d(this,h,"f").toAddress();const t={cost:d(this,f,"f"),id:C.PoolId.fromKeyHash(d(this,c,"f")),margin:d(this,p,"f").toCore(),owners:d(this,m,"f").toCore().map(t=>(0,E.createRewardAccount)(t,e.getNetworkId())),pledge:d(this,u,"f"),relays:d(this,v,"f").map(e=>e.toCore()),rewardAccount:d(this,h,"f").toAddress().toBech32(),vrf:d(this,l,"f")};if(d(this,_,"f"))t.metadataJson=d(this,_,"f").toCore();return t}static fromCore(e){return new PoolParams(C.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,A.UnitInterval.fromCore(e.margin),g.Address.fromBech32(e.rewardAccount).asReward(),P.CborSet.fromCore(e.owners.map(e=>w.Ed25519KeyHashHex(g.Address.fromBech32(e).asReward().getPaymentCredential().hash)),P.Hash.fromCore),e.relays.map(e=>k.Relay.fromCore(e)),e.metadataJson?T.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return d(this,c,"f")}setOperator(e){n(this,c,e,"f");n(this,y,void 0,"f")}vrfKeyHash(){return d(this,l,"f")}setVrfKeyHash(e){n(this,l,e,"f");n(this,y,void 0,"f")}pledge(){return d(this,u,"f")}setPledge(e){n(this,u,e,"f");n(this,y,void 0,"f")}cost(){return d(this,f,"f")}setCost(e){n(this,f,e,"f");n(this,y,void 0,"f")}margin(){return d(this,p,"f")}setMargin(e){n(this,p,e,"f");n(this,y,void 0,"f")}rewardAccount(){return d(this,h,"f")}setRewardAccount(e){n(this,h,e,"f");n(this,y,void 0,"f")}poolOwners(){return d(this,m,"f")}setPoolOwners(e){n(this,m,e,"f");n(this,y,void 0,"f")}relays(){return d(this,v,"f")}setRelays(e){n(this,v,[...e],"f");n(this,y,void 0,"f")}poolMetadata(){return d(this,_,"f")}setPoolMetadata(e){n(this,_,e,"f");n(this,y,void 0,"f")}constructor(e,t,r,s,a,o,i,d,w){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f");n(this,f,s,"f");n(this,p,a,"f");n(this,h,o,"f");n(this,m,i,"f");n(this,v,d,"f");n(this,_,w,"f")}}t.PoolParams=PoolParams;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.MultiHostName=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=2;const l=2;const u=64;class MultiHostName{toCbor(){const e=new n.CborWriter;if(a(this,i,"f"))return a(this,i,"f");e.writeStartArray(c);e.writeInt(l);e.writeTextString(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==c)throw new d.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==l)throw new d.InvalidArgumentError("cbor",`Expected MultiHostName id ${l}, but got ${a}`);const o=t.readTextString();const u=new MultiHostName(o);s(u,i,e,"f");return u}toCore(){return{__typename:"RelayByNameMultihost",dnsName:a(this,o,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return a(this,o,"f")}setDnsName(e){if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f");s(this,i,void 0,"f")}constructor(e){o.set(this,void 0);i.set(this,void 0);if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f")}}t.MultiHostName=MultiHostName;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Relay=t.RelayKind=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var m;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(m=t.RelayKind||(t.RelayKind={}));class Relay{toCbor(){if(s(this,c,"f"))return s(this,c,"f");let e;switch(s(this,d,"f")){case m.SingleHostAddress:e=s(this,o,"f").toCbor();break;case m.SingleHostDnsName:e=s(this,i,"f").toCbor();break;case m.MultiHostDnsName:e=s(this,n,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCbor(e){let t;const r=new l.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case m.SingleHostAddress:t=Relay.newSingleHostAddr(p.SingleHostAddr.fromCbor(e));break;case m.SingleHostDnsName:t=Relay.newSingleHostName(h.SingleHostName.fromCbor(e));break;case m.MultiHostDnsName:t=Relay.newMultiHostName(f.MultiHostName.fromCbor(e));break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s}`)}a(t,c,e,"f");return t}toCore(){let e;switch(s(this,d,"f")){case m.SingleHostAddress:e=s(this,o,"f").toCore();break;case m.SingleHostDnsName:e=s(this,i,"f").toCore();break;case m.MultiHostDnsName:e=s(this,n,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(p.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(h.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(f.MultiHostName.fromCore(e));break;default:throw new u.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;a(t,o,e,"f");a(t,d,m.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;a(t,i,e,"f");a(t,d,m.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;a(t,n,e,"f");a(t,d,m.MultiHostDnsName,"f");return t}kind(){return s(this,d,"f")}asSingleHostAddr(){return s(this,o,"f")}asSingleHostName(){return s(this,i,"f")}asMultiHostName(){return s(this,n,"f")}constructor(){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.Relay=Relay;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostAddr=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js");const f=4;const p=0;class SingleHostAddr{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(f);e.writeInt(p);a(this,o,"f")?e.writeInt(a(this,o,"f")):e.writeNull();a(this,i,"f")?e.writeByteString((0,u.ipV4StringToByteArray)(a(this,i,"f"))):e.writeNull();a(this,n,"f")?e.writeByteString((0,u.ipV6StringToByteArray)(a(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==p)throw new l.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${p}, but got ${a}`);let o;let i;let n;if(t.peekState()===c.CborReaderState.Null){t.readNull();o=void 0}else{o=t.readInt()}if(t.peekState()===c.CborReaderState.Null){t.readNull();i=void 0}else{i=(0,u.byteArrayToIpV4String)(t.readByteString())}if(t.peekState()===c.CborReaderState.Null){t.readNull();n=void 0}else{n=(0,u.byteArrayToIPv6String)(t.readByteString())}const h=new SingleHostAddr(o?Number(o):void 0,i,n);s(h,d,e,"f");return h}toCore(){return{__typename:"RelayByAddress",ipv4:a(this,i,"f"),ipv6:a(this,n,"f"),port:a(this,o,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return a(this,o,"f")}setPort(e){s(this,o,e,"f");s(this,d,void 0,"f")}ipv4(){return a(this,i,"f")}setIpv4(e){s(this,i,e,"f");s(this,d,void 0,"f")}ipv6(){return a(this,n,"f")}setIpv6(e){s(this,n,e,"f");s(this,d,void 0,"f")}constructor(e,t,r){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f");s(this,n,r,"f")}}t.SingleHostAddr=SingleHostAddr;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostName=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(u);a(this,o,"f")?e.writeInt(a(this,o,"f")):e.writeNull();e.writeTextString(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==u)throw new c.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${a}`);let o;if(t.peekState()===d.CborReaderState.Null){t.readNull();o=void 0}else{o=t.readInt()}const i=t.readTextString();const f=new SingleHostName(i,o?Number(o):void 0);s(f,n,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:a(this,i,"f"),port:a(this,o,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return a(this,o,"f")}setPort(e){s(this,o,e,"f");s(this,n,void 0,"f")}dnsName(){return a(this,i,"f")}setDnsName(e){if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,t,"f");if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,i,e,"f")}}t.SingleHostName=SingleHostName;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.byteArrayToIPv6String=t.ipV6StringToByteArray=t.byteArrayToIpV4String=t.ipV4StringToByteArray=void 0;const s=r("../../node_modules/ip-address/dist/ip-address.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const ipV4StringToByteArray=e=>{if(!s.Address4.isValid(e))throw new a.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};t.ipV4StringToByteArray=ipV4StringToByteArray;const byteArrayToIpV4String=e=>{if(4!==e.length)throw new a.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};t.byteArrayToIpV4String=byteArrayToIpV4String;const ipV6StringToByteArray=e=>{if(!s.Address6.isValid(e))throw new a.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new s.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};t.ipV6StringToByteArray=ipV6StringToByteArray;const byteArrayToIPv6String=e=>{const t=s.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};t.byteArrayToIPv6String=byteArrayToIPv6String},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.PoolRegistration=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js");const f=u.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new n.CborWriter;if(a(this,i,"f"))return a(this,i,"f");e.writeStartArray(f);e.writeInt(d.CertificateKind.PoolRegistration);return a(this,o,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.CertificateKind.PoolRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.PoolRegistration}, but got ${a}`);const o=u.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(o);s(c,i,e,"f");return c}toCore(){return{__typename:c.CertificateType.PoolRegistration,poolParameters:a(this,o,"f").toCore()}}static fromCore(e){return new PoolRegistration(u.PoolParams.fromCore(e.poolParameters))}poolParameters(){return a(this,o,"f")}setPoolParameters(e){s(this,o,e,"f");s(this,i,void 0,"f")}constructor(e){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.PoolRegistration=PoolRegistration;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolRetirement=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const w=3;class PoolRetirement{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(w);e.writeInt(h.CertificateKind.PoolRetirement);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.PoolRetirement)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.PoolRetirement}, but got ${s}`);const a=f.Ed25519KeyHashHex(_.HexBlob.fromBytes(t.readByteString()));const o=t.readInt();t.readEndArray();const i=new PoolRetirement(a,(0,v.EpochNo)(Number(o)));n(i,u,e,"f");return i}toCore(){return{__typename:m.CertificateType.PoolRetirement,epoch:d(this,l,"f"),poolId:y.PoolId.fromKeyHash(d(this,c,"f"))}}static fromCore(e){return new PoolRetirement(y.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return d(this,c,"f")}setPoolKeyHash(e){n(this,c,e,"f");n(this,u,void 0,"f")}epoch(){return d(this,l,"f")}setEpoch(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolRetirement=PoolRetirement;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.RegisterDelegateRepresentative=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class RegisterDelegateRepresentative{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(v.CertificateKind.DrepRegistration);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));if(d(this,u,"f"))e.writeEncodedValue((0,w.hexToBytes)(d(this,u,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.DrepRegistration)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.DrepRegistration}, but got ${s}`);const a=t.readStartArray();if(a!==g)throw new y.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=p.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();let c;if(t.peekState()===m.CborReaderState.Null)t.readNull();else c=h.Anchor.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new RegisterDelegateRepresentative({hash:i,type:o},d,c);n(l,f,e,"f");return l}toCore(){return{__typename:_.CertificateType.RegisterDelegateRepresentative,anchor:d(this,u,"f")?d(this,u,"f").toCore():null,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?h.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}anchor(){return d(this,u,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.RegisterDelegateRepresentative=RegisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Registration=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class Registration{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(h.CertificateKind.Registration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.Registration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.Registration}, but got ${s}`);const a=t.readStartArray();if(a!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Registration({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:m.CertificateType.Registration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Registration=Registration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.ResignCommitteeCold=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class ResignCommitteeCold{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.ResignCommitteeCold);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,y.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.ResignCommitteeCold)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.ResignCommitteeCold}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===h.CborReaderState.Null)t.readNull();else d=p.Anchor.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ResignCommitteeCold({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.ResignCommitteeCold,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,coldCredential:d(this,c,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?p.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.ResignCommitteeCold=ResignCommitteeCold;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.StakeDelegation=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const y=3;const w=2;class StakeDelegation{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(y);e.writeInt(h.CertificateKind.StakeDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.StakeDelegation)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.StakeDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=f.Ed25519KeyHashHex(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new StakeDelegation({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:m.CertificateType.StakeDelegation,poolId:_.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,_.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolKeyHash(){return d(this,l,"f")}setPoolKeyHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.StakeDelegation=StakeDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeDeregistration=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeDeregistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(p.CertificateKind.StakeDeregistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeDeregistration)throw new m.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeDeregistration}, but got ${s}`);const a=t.readStartArray();if(a!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=u.Hash28ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeDeregistration({hash:i,type:o});n(d,l,e,"f");return d}toCore(){return{__typename:h.CertificateType.StakeDeregistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeDeregistration=StakeDeregistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistration=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeRegistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(p.CertificateKind.StakeRegistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeRegistration)throw new m.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeRegistration}, but got ${s}`);const a=t.readStartArray();if(a!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=u.Hash28ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeRegistration({hash:i,type:o});n(d,l,e,"f");return d}toCore(){return{__typename:h.CertificateType.StakeRegistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeRegistration=StakeRegistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistrationDelegation=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const w=2;class StakeRegistrationDelegation{toCbor(){const e=new h.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(m.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(4!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.StakeRegistrationDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.StakeRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=p.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=p.Ed25519KeyHashHex(_.HexBlob.fromBytes(t.readByteString()));const c=t.readInt();t.readEndArray();const l=new StakeRegistrationDelegation({hash:i,type:o},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeRegistrationDelegation,deposit:d(this,u,"f"),poolId:y.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,y.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeRegistrationDelegation=StakeRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteDelegation=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const b=2;class StakeVoteDelegation{toCbor(){const e=new h.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(m.CertificateKind.StakeVoteDelegation);e.writeStartArray(b);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeEncodedValue((0,g.hexToBytes)(d(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(4!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.StakeVoteDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.StakeVoteDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==b)throw new y.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=p.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=p.Ed25519KeyHashHex(y.HexBlob.fromBytes(t.readByteString()));const c=_.DRep.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new StakeVoteDelegation({hash:i,type:o},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeVoteDelegation,dRep:d(this,u,"f").toCore(),poolId:w.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,_.DRep.fromCore(e.dRep),w.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}drep(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeVoteDelegation=StakeVoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteRegistrationDelegation=void 0;const h=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const P=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new m.CborWriter;if(d(this,p,"f"))return d(this,p,"f");e.writeStartArray(5);e.writeInt(v.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(P);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));e.writeEncodedValue((0,b.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(5!==r)throw new w.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.StakeVoteRegistrationDelegation)throw new w.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.StakeVoteRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==P)throw new w.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=h.Hash28ByteBase16(w.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=h.Ed25519KeyHashHex(w.HexBlob.fromBytes(t.readByteString()));const c=y.DRep.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const l=t.readInt();t.readEndArray();const u=new StakeVoteRegistrationDelegation({hash:i,type:o},l,c,d);n(u,p,e,"f");return u}toCore(){return{__typename:_.CertificateType.StakeVoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,f,"f"),poolId:g.PoolId.fromKeyHash(d(this,u,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,y.DRep.fromCore(e.dRep),g.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,f,"f")}dRep(){return d(this,l,"f")}poolKeyHash(){return d(this,u,"f")}constructor(e,t,r,s){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);n(this,c,e,"f");n(this,f,t,"f");n(this,l,r,"f");n(this,u,s,"f")}}t.StakeVoteRegistrationDelegation=StakeVoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UnregisterDelegateRepresentative=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class UnregisterDelegateRepresentative{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(h.CertificateKind.DrepUnregistration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.DrepUnregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.DrepUnregistration}, but got ${s}`);const a=t.readStartArray();if(a!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new UnregisterDelegateRepresentative({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:m.CertificateType.UnregisterDelegateRepresentative,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UnregisterDelegateRepresentative=UnregisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Unregistration=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class Unregistration{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(h.CertificateKind.Unregistration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.Unregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.Unregistration}, but got ${s}`);const a=t.readStartArray();if(a!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Unregistration({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:m.CertificateType.Unregistration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Unregistration=Unregistration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UpdateDelegateRepresentative=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class UpdateDelegateRepresentative{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.UpdateDrep);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,y.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.UpdateDrep)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.UpdateDrep}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===h.CborReaderState.Null)t.readNull();else d=p.Anchor.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new UpdateDelegateRepresentative({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.UpdateDelegateRepresentative,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,dRepCredential:d(this,c,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?p.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UpdateDelegateRepresentative=UpdateDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.VoteDelegation=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class VoteDelegation{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(h.CertificateKind.VoteDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,y.hexToBytes)(d(this,l,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.VoteDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.VoteDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=v.DRep.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new VoteDelegation({hash:i,type:o},d);n(c,u,e,"f");return c}toCore(){return{__typename:m.CertificateType.VoteDelegation,dRep:d(this,l,"f").toCore(),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,v.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}dRep(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.VoteDelegation=VoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.VoteRegistrationDelegation=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class VoteRegistrationDelegation{toCbor(){const e=new h.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(m.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,w.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(4!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.VoteRegistrationDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.VoteRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==g)throw new y.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const o=Number(t.readInt());const i=p.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=_.DRep.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new VoteRegistrationDelegation({hash:i,type:o},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.VoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,u,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,_.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}dRep(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.VoteRegistrationDelegation=VoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Anchor=void 0;const f=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=2;const v=128;class Anchor{toCbor(){const e=new p.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(m);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==m)throw new h.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=t.readTextString();const a=f.Hash32ByteBase16(h.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const o=new Anchor(s,a);n(o,u,e,"f");return o}toCore(){return{dataHash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}dataHash(){return d(this,l,"f")}setDataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>v)throw new h.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.Anchor=Anchor;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;Object.defineProperty(t,"__esModule",{value:true});t.CborSet=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");class CborSet{static fromCbor(e,t){const r=new d.CborReader(e);const s=new CborSet([]);if(r.peekState()===d.CborReaderState.Tag&&r.peekTag()===d.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){o(s,i,"f").push(t(c.HexBlob.fromBytes(r.readEncodedValue())))}a(s,n,e,"f");return s}toCbor(){if(o(this,n,"f"))return o(this,n,"f");const e=new d.CborWriter;if(l.inConwayEra)e.writeTag(d.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return o(this,i,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return o(this,i,"f")}setValues(e){a(this,i,[...e],"f");a(this,n,void 0,"f")}size(){return o(this,i,"f").length}constructor(e){i.set(this,void 0);n.set(this,void 0);a(this,i,[...e],"f")}}t.CborSet=CborSet;i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Credential=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const c=2;class Credential{toCbor(){const e=new i.CborWriter;e.writeStartArray(c);e.writeInt(a(this,o,"f").type);e.writeByteString((0,d.hexToBytes)(a(this,o,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);if(t.readStartArray()!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=n.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...a(this,o,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...a(this,o,"f")}}constructor(e){o.set(this,void 0);s(this,o,e,"f")}}t.Credential=Credential;o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Datum=t.DatumKind=t.isDatumHash=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const p=2;const isDatumHash=e=>null!==e&&"string"==typeof e;t.isDatumHash=isDatumHash;var h;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(h=t.DatumKind||(t.DatumKind={}));class Datum{toCbor(){const e=new l.CborWriter;if(o(this,c,"f"))return o(this,c,"f");e.writeStartArray(p);e.writeInt(o(this,i,"f"));if(o(this,i,"f")===h.DataHash)e.writeByteString(s.from(o(this,n,"f"),"hex").valueOf());else e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==p)throw new u.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let o;let i;switch(s){case h.DataHash:o=u.HexBlob.fromBytes(t.readByteString());break;case h.InlineData:i=f.PlutusData.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new u.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const n=new Datum(o,i);a(n,c,e,"f");return n}toCore(){let e;switch(o(this,i,"f")){case h.DataHash:e=o(this,n,"f");break;case h.InlineData:e=o(this,d,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected datum kind ${o(this,i,"f")}`)}return e}static fromCore(e){if((0,t.isDatumHash)(e))return new Datum(e);return new Datum(void 0,f.PlutusData.fromCore(e))}kind(){return o(this,i,"f")}asDataHash(){return o(this,n,"f")}asInlineData(){return o(this,d,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);if(e&&t)throw new u.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new u.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)a(this,i,h.DataHash,"f");if(t)a(this,i,h.InlineData,"f");a(this,n,e,"f");a(this,d,t,"f")}}t.Datum=Datum;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.ExUnits=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ExUnits{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(a(this,o,"f"));e.writeInt(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=t.readUInt();const o=t.readUInt();t.readEndArray();const i=new ExUnits(a,o);s(i,n,e,"f");return i}toCore(){return{memory:Number(a(this,o,"f")),steps:Number(a(this,i,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return a(this,o,"f")}setMem(e){s(this,o,e,"f");s(this,n,void 0,"f")}steps(){return a(this,i,"f")}setSteps(e){s(this,i,e,"f");s(this,n,void 0,"f")}add(e){const t=a(this,o,"f")+a(e,o,"f");const r=a(this,i,"f")+a(e,i,"f");return new ExUnits(t,r)}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.ExUnits=ExUnits;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionId=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class GovernanceActionId{toCbor(){if(o(this,d,"f"))return o(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(o(this,i,"f"),"hex"));e.writeInt(o(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const o=t.readInt();const i=new GovernanceActionId(l.HexBlob.fromBytes(s),o);a(i,d,e,"f");return i}toCore(){return{actionIndex:Number(o(this,n,"f")),id:o(this,i,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return o(this,i,"f")}setTransactionId(e){a(this,i,e,"f");a(this,d,void 0,"f")}index(){return o(this,n,"f")}setIndex(e){a(this,n,e,"f");a(this,d,void 0,"f")}equals(e){return o(this,n,"f")===o(e,n,"f")&&o(this,i,"f")===o(e,i,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f")}}t.GovernanceActionId=GovernanceActionId;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.Hash=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class Hash{toCbor(){const e=new n.CborWriter;e.writeByteString(s.from(o(this,i,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);return new Hash(d.HexBlob.fromBytes(t.readByteString()))}toCore(){return o(this,i,"f")}static fromCore(e){return new Hash(e)}value(){return o(this,i,"f")}constructor(e){i.set(this,void 0);a(this,i,e,"f")}}t.Hash=Hash;i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolVersion=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ProtocolVersion{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(a(this,o,"f"));e.writeInt(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=Number(t.readInt());t.readEndArray();const i=new ProtocolVersion(a,o);s(i,n,e,"f");return i}toCore(){return{major:Number(a(this,o,"f")),minor:Number(a(this,i,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return a(this,o,"f")}setMajor(e){s(this,o,e,"f");s(this,n,void 0,"f")}minor(){return a(this,i,"f")}setMinor(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.ProtocolVersion=ProtocolVersion;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.UnitInterval=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=o(r("../../node_modules/fraction.js/fraction.js"));const f=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new u.default(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeTag(c.CborTag.RationalNumber);e.writeStartArray(f);e.writeInt(a(this,i,"f"));e.writeInt(a(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.readTag()!==c.CborTag.RationalNumber)throw new l.InvalidArgumentError("cbor",`Expected tag ${c.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=t.readInt();const o=t.readInt();t.readEndArray();const i=new UnitInterval(a,o);s(i,d,e,"f");return i}toCore(){return{denominator:Number(a(this,n,"f")),numerator:Number(a(this,i,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return a(this,i,"f")}setNumerator(e){s(this,i,e,"f");s(this,d,void 0,"f")}denominator(){return a(this,n,"f")}setDenominator(e){s(this,n,e,"f");s(this,d,void 0,"f")}toFloat(){return Number(a(this,i,"f"))/Number(a(this,n,"f"))}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,i,e,"f");s(this,n,t,"f")}}t.UnitInterval=UnitInterval;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.ConstrPlutusData=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=102n;const f=7n;class ConstrPlutusData{toCbor(){const e=new n.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(a(this,o,"f"));e.writeTag(Number(t));if(t!==u)e.writeEncodedValue((0,l.hexToBytes)(a(this,i,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(a(this,o,"f"));e.writeEncodedValue((0,l.hexToBytes)(a(this,i,"f").toCbor()))}return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new n.CborReader(e);const r=t.readTag();if(r===Number(u)){t.readStartArray();const s=t.readInt();const a=t.readEncodedValue();const o=c.PlutusList.fromCbor(d.HexBlob.fromBytes(a));t.readEndArray();return new ConstrPlutusData(s,o)}const i=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const l=t.readEncodedValue();const f=c.PlutusList.fromCbor(d.HexBlob.fromBytes(l));return new ConstrPlutusData(i,f)}getAlternative(){return a(this,o,"f")}getData(){return a(this,i,"f")}equals(e){if(a(this,o,"f")!==a(e,o,"f"))return false;return a(this,i,"f").equals(a(e,i,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+f;return u}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-f+e;return u}constructor(e,t){o.set(this,0n);i.set(this,new c.PlutusList);s(this,o,e,"f");s(this,i,t,"f")}}t.ConstrPlutusData=ConstrPlutusData;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l,u,f,p,h,m;Object.defineProperty(t,"__esModule",{value:true});t.PlutusData=void 0;const v=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"));const _=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js");const g=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const k=0xffffffffffffffffn;const A=new Uint8Array([95]);const E=64;const j=32;const I=BigInt(-1);class PlutusData{toCbor(){if(n(this,m,"f"))return n(this,m,"f");let e;switch(n(this,h,"f")){case P.PlutusDataKind.ConstrPlutusData:e=n(this,p,"f").toCbor();break;case P.PlutusDataKind.Map:e=n(this,c,"f").toCbor();break;case P.PlutusDataKind.List:e=n(this,l,"f").toCbor();break;case P.PlutusDataKind.Bytes:{const t=new y.CborWriter;if(n(this,f,"f").length<=E)t.writeByteString(n(this,f,"f"));else{t.writeEncodedValue(A);for(let r=0;r<n(this,f,"f").length;r+=E){const s=n(this,f,"f").slice(r,r+E);t.writeByteString(s)}t.writeEndArray()}e=(0,T.bytesToHex)(t.encode());break}case P.PlutusDataKind.Integer:{const a=new y.CborWriter;if(n(this,u,"f")>=0&&n(this,u,"f")<=k||n(this,u,"f")<0&&n(this,u,"f")>=-1n-k)a.writeInt(n(this,u,"f"));else{const o=PlutusData.bigintToBuffer(n(this,u,"f"));a.writeTag(n(this,u,"f")<0?y.CborTag.NegativeBigNum:y.CborTag.UnsignedBigNum);if(o.length<=E)a.writeByteString(o);else{a.writeEncodedValue(A);for(let i=0;i<o.length;i+=E){const d=o.slice(i,i+E);a.writeByteString(d)}a.writeEndArray()}}e=(0,T.bytesToHex)(a.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new y.CborReader(e);const s=r.peekState();switch(s){case y.CborReaderState.Tag:{const a=r.peekTag();switch(a){case y.CborTag.UnsignedBigNum:{r.readTag();const o=r.readByteString();d(t,u,PlutusData.bufferToBigint(o),"f");d(t,h,P.PlutusDataKind.Integer,"f");break}case y.CborTag.NegativeBigNum:{r.readTag();const i=r.readByteString();d(t,u,PlutusData.bufferToBigint(i)*-1n,"f");d(t,h,P.PlutusDataKind.Integer,"f");break}default:d(t,p,w.ConstrPlutusData.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,h,P.PlutusDataKind.ConstrPlutusData,"f")}break}case y.CborReaderState.NegativeInteger:case y.CborReaderState.UnsignedInteger:d(t,u,r.readInt(),"f");d(t,h,P.PlutusDataKind.Integer,"f");break;case y.CborReaderState.StartIndefiniteLengthByteString:case y.CborReaderState.ByteString:d(t,f,r.readByteString(),"f");d(t,h,P.PlutusDataKind.Bytes,"f");break;case y.CborReaderState.StartArray:d(t,l,S.PlutusList.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,h,P.PlutusDataKind.List,"f");break;case y.CborReaderState.StartMap:d(t,c,C.PlutusMap.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,h,P.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}d(t,m,e,"f");return t}toCore(){switch(n(this,h,"f")){case P.PlutusDataKind.Bytes:return n(this,f,"f");case P.PlutusDataKind.ConstrPlutusData:{const e=n(this,p,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case P.PlutusDataKind.Integer:return n(this,u,"f");case P.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(n(this,l,"f"));case P.PlutusDataKind.Map:{const t=n(this,c,"f");const r=new Map;const s=t.getKeys();for(let a=0;a<s.getLength();a++){const o=s.get(a);r.set(o.toCore(),t.get(o).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new b.NotImplementedError(`PlutusData mapping for kind ${n(this,h,"f")}`)}}hash(){const e=_.blake2b(j).update(s.from(this.toCbor(),"hex")).digest();return _.Hash32ByteBase16(g.HexBlob.fromBytes(e))}static fromCore(e){if(v.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(v.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(v.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(v.isPlutusMap(e)){const t=new C.PlutusMap;for(const[r,s]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(s));return PlutusData.newMap(t)}if(v.isConstrPlutusData(e)){const a=e.constructor;const o=new w.ConstrPlutusData(a,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(o)}throw new b.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;d(t,p,e,"f");d(t,h,P.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;d(t,c,e,"f");d(t,h,P.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;d(t,l,e,"f");d(t,h,P.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;d(t,u,e,"f");d(t,h,P.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;d(t,f,e,"f");d(t,h,P.PlutusDataKind.Bytes,"f");return t}getKind(){return n(this,h,"f")}asConstrPlutusData(){return n(this,p,"f")}asMap(){return n(this,c,"f")}asList(){return n(this,l,"f")}asInteger(){return n(this,u,"f")}asBoundedBytes(){return n(this,f,"f")}equals(e){switch(n(this,h,"f")){case P.PlutusDataKind.Bytes:if(n(this,f,"f")&&n(e,f,"f")){return n(this,f,"f").length===n(e,f,"f").length&&n(this,f,"f").every((t,r)=>t===n(e,f,"f")[r])}return false;case P.PlutusDataKind.Integer:return n(this,u,"f")===n(e,u,"f");case P.PlutusDataKind.ConstrPlutusData:if(n(this,p,"f")&&n(e,p,"f")){return n(this,p,"f").equals(n(e,p,"f"))}return false;case P.PlutusDataKind.List:if(n(this,l,"f")&&n(e,l,"f")){return n(this,l,"f").equals(n(e,l,"f"))}return false;case P.PlutusDataKind.Map:if(n(this,c,"f")&&n(e,c,"f")){return n(this,c,"f").equals(n(e,c,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new S.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+I;let t=e.toString(16);if(t.length%2)t=`0${t}`;return s.from(t,"hex")}constructor(){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,P.PlutusDataKind.ConstrPlutusData);m.set(this,void 0)}}t.PlutusData=PlutusData;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusDataKind=void 0;var r;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(r=t.PlutusDataKind||(t.PlutusDataKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.PlutusList=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusList{toCbor(){const e=new o.CborWriter;const t=s(this,a,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(s(this,a,"f").length);for(const r of s(this,a,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new o.CborReader(e);r.readStartArray();while(r.peekState()!==o.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,a,"f").length}get(e){return s(this,a,"f")[e]}add(e){s(this,a,"f").push(e)}equals(e){if(s(this,a,"f").length!==s(e,a,"f").length)return false;for(let t=0;t<s(this,a,"f").length;++t)if(!s(this,a,"f")[t].equals(s(e,a,"f")[t]))return false;return true}constructor(){a.set(this,new Array)}}t.PlutusList=PlutusList;a=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.PlutusMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusMap{toCbor(){const e=new n.CborWriter;if(s(this,i,"f"))e.writeStartMap();else e.writeStartMap(s(this,o,"f").size);for(const[t,r]of s(this,o,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,i,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)a(t,i,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const o=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(o,d)}r.readEndMap();return t}getLength(){return s(this,o,"f").size}insert(e,t){s(this,o,"f").set(e,t)}get(e){if(!s(this,o,"f"))return;const t=[...s(this,o,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new l.PlutusList;for(const t of s(this,o,"f").keys())e.add(t);return e}equals(e){if(s(this,i,"f")!==s(e,i,"f"))return false;if(s(this,o,"f").size!==s(e,o,"f").size)return false;const t=[...s(this,o,"f").entries()];const r=[...s(e,o,"f").entries()];for(let a=0;a<s(this,o,"f").size;++a){if(!t[a][0].equals(r[a][0]))return false;if(!t[a][1].equals(r[a][1]))return false}return true}constructor(){o.set(this,new Map);i.set(this,false)}}t.PlutusMap=PlutusMap;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l,u,f,p,h,m,v;Object.defineProperty(t,"__esModule",{value:true});t.NativeScript=void 0;const _=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js");const A=28;class NativeScript{toCbor(){if(n(this,v,"f"))return n(this,v,"f");let e;switch(n(this,m,"f")){case g.NativeScriptKind.RequireSignature:e=n(this,f,"f").toCbor();break;case g.NativeScriptKind.RequireAllOf:e=n(this,c,"f").toCbor();break;case g.NativeScriptKind.RequireAnyOf:e=n(this,l,"f").toCbor();break;case g.NativeScriptKind.RequireNOf:e=n(this,u,"f").toCbor();break;case g.NativeScriptKind.RequireTimeAfter:e=n(this,h,"f").toCbor();break;case g.NativeScriptKind.RequireTimeBefore:e=n(this,p,"f").toCbor();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${n(this,m,"f")}`)}return e}static fromCbor(e){let t;const r=new y.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case g.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(C.ScriptPubkey.fromCbor(e));break;case g.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(b.ScriptAll.fromCbor(e));break;case g.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(P.ScriptAny.fromCbor(e));break;case g.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(S.ScriptNOfK.fromCbor(e));break;case g.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(k.TimelockStart.fromCbor(e));break;case g.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(T.TimelockExpiry.fromCbor(e));break;default:throw new w.InvalidStateError(`Unexpected kind value: ${s}`)}d(t,v,e,"f");return t}toCore(){let e;switch(n(this,m,"f")){case g.NativeScriptKind.RequireSignature:e=n(this,f,"f").toCore();break;case g.NativeScriptKind.RequireAllOf:e=n(this,c,"f").toCore();break;case g.NativeScriptKind.RequireAnyOf:e=n(this,l,"f").toCore();break;case g.NativeScriptKind.RequireNOf:e=n(this,u,"f").toCore();break;case g.NativeScriptKind.RequireTimeAfter:e=n(this,h,"f").toCore();break;case g.NativeScriptKind.RequireTimeBefore:e=n(this,p,"f").toCore();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${n(this,m,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case g.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(C.ScriptPubkey.fromCore(e));break;case g.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(b.ScriptAll.fromCore(e));break;case g.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(P.ScriptAny.fromCore(e));break;case g.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(S.ScriptNOfK.fromCore(e));break;case g.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(k.TimelockStart.fromCore(e));break;case g.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(T.TimelockExpiry.fromCore(e));break;default:throw new w.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;const t=_.blake2b(A).update(s.from(e,"hex")).digest();return _.Hash28ByteBase16(w.HexBlob.fromBytes(t))}kind(){return n(this,m,"f")}static newScriptPubkey(e){const t=new NativeScript;d(t,f,e,"f");d(t,m,g.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;d(t,c,e,"f");d(t,m,g.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;d(t,l,e,"f");d(t,m,g.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;d(t,u,e,"f");d(t,m,g.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;d(t,h,e,"f");d(t,m,g.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;d(t,p,e,"f");d(t,m,g.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return n(this,f,"f")}asScriptAll(){return n(this,c,"f")}asScriptAny(){return n(this,l,"f")}asScriptNOfK(){return n(this,u,"f")}asTimelockStart(){return n(this,h,"f")}asTimelockExpiry(){return n(this,p,"f")}constructor(){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0)}}t.NativeScript=NativeScript;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAll=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAll{toCbor(){const e=new d.CborWriter;if(o(this,n,"f"))return o(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAllOf);e.writeStartArray(o(this,i,"f").length);for(const t of o(this,i,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAllOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const o=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)o.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const i=new ScriptAll(o);a(i,n,e,"f");return i}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAllOf,scripts:o(this,i,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return o(this,i,"f")}setNativeScripts(e){a(this,i,e,"f");a(this,n,void 0,"f")}constructor(e){i.set(this,void 0);n.set(this,void 0);a(this,i,e,"f")}}t.ScriptAll=ScriptAll;i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAny=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAny{toCbor(){const e=new d.CborWriter;if(o(this,n,"f"))return o(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAnyOf);e.writeStartArray(o(this,i,"f").length);for(const t of o(this,i,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAnyOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const o=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)o.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const i=new ScriptAny(o);a(i,n,e,"f");return i}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAnyOf,scripts:o(this,i,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return o(this,i,"f")}setNativeScripts(e){a(this,i,e,"f");a(this,n,void 0,"f")}constructor(e){i.set(this,void 0);n.set(this,void 0);a(this,i,e,"f")}}t.ScriptAny=ScriptAny;i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ScriptNOfK=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=3;class ScriptNOfK{toCbor(){const e=new c.CborWriter;if(o(this,d,"f"))return o(this,d,"f");e.writeStartArray(p);e.writeInt(f.NativeScriptKind.RequireNOf);e.writeInt(o(this,n,"f"));e.writeStartArray(o(this,i,"f").length);for(const t of o(this,i,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==p)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==f.NativeScriptKind.RequireNOf)throw new l.InvalidArgumentError("cbor",`Expected kind ${f.NativeScriptKind.RequireNOf}, but got kind ${s}`);const o=t.readInt();const i=new Array;t.readStartArray();while(t.peekState()!==c.CborReaderState.EndArray)i.push(u.NativeScript.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const n=new ScriptNOfK(i,Number(o));a(n,d,e,"f");return n}toCore(){return{__type:f.ScriptType.Native,kind:f.NativeScriptKind.RequireNOf,required:o(this,n,"f"),scripts:o(this,i,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>u.NativeScript.fromCore(e)),e.required)}required(){return o(this,n,"f")}setRequired(e){a(this,n,e,"f");a(this,d,void 0,"f")}nativeScripts(){return o(this,i,"f")}setNativeScripts(e){a(this,i,e,"f");a(this,d,void 0,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f")}}t.ScriptNOfK=ScriptNOfK;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ScriptPubkey=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const m=2;class ScriptPubkey{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(m);e.writeInt(h.NativeScriptKind.RequireSignature);e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==m)throw new p.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.NativeScriptKind.RequireSignature)throw new p.InvalidArgumentError("cbor",`Expected kind ${h.NativeScriptKind.RequireSignature}, but got kind ${s}`);const a=u.Ed25519KeyHashHex(p.HexBlob.fromBytes(t.readByteString()));const o=new ScriptPubkey(a);n(o,l,e,"f");return o}toCore(){return{__type:h.ScriptType.Native,keyHash:d(this,c,"f"),kind:h.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return d(this,c,"f")}setKeyHash(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.ScriptPubkey=ScriptPubkey;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.TimelockExpiry=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockExpiry{toCbor(){const e=new n.CborWriter;if(a(this,i,"f"))return a(this,i,"f");e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeBefore);e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==c.NativeScriptKind.RequireTimeBefore)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeBefore}, but got kind ${a}`);const o=(0,l.Slot)(Number(t.readInt()));const f=new TimelockExpiry(o);s(f,i,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeBefore,slot:a(this,o,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return a(this,o,"f")}setSlot(e){s(this,o,e,"f");s(this,i,void 0,"f")}constructor(e){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.TimelockExpiry=TimelockExpiry;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.TimelockStart=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockStart{toCbor(){if(a(this,i,"f"))return a(this,i,"f");const e=new n.CborWriter;e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeAfter);e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==c.NativeScriptKind.RequireTimeAfter)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeAfter}, but got kind ${a}`);const o=(0,l.Slot)(Number(t.readInt()));const f=new TimelockStart(o);s(f,i,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeAfter,slot:a(this,o,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return a(this,o,"f")}setSlot(e){s(this,o,e,"f");s(this,i,void 0,"f")}constructor(e){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.TimelockStart=TimelockStart;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV1Script=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const m=28;class PlutusV1Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(p.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:h.ScriptType.Plutus,bytes:this.rawBytes(),version:h.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==h.PlutusLanguageVersion.V1)throw new p.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;const t=u.blake2b(m).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(p.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV1Script=PlutusV1Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV2Script=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const m=28;class PlutusV2Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(p.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:h.ScriptType.Plutus,bytes:this.rawBytes(),version:h.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==h.PlutusLanguageVersion.V2)throw new p.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;const t=u.blake2b(m).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(p.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV2Script=PlutusV2Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV3Script=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const m=28;class PlutusV3Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(p.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:h.ScriptType.Plutus,bytes:this.rawBytes(),version:h.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==h.PlutusLanguageVersion.V3)throw new p.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;const t=u.blake2b(m).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(p.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV3Script=PlutusV3Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Script=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js");const y=2;class Script{toCbor(){if(a(this,u,"f"))return a(this,u,"f");const e=new f.CborWriter;let t;switch(a(this,l,"f")){case _.ScriptLanguage.Native:t=a(this,i,"f").toCbor();break;case _.ScriptLanguage.PlutusV1:t=a(this,n,"f").toCbor();break;case _.ScriptLanguage.PlutusV2:t=a(this,d,"f").toCbor();break;case _.ScriptLanguage.PlutusV3:t=a(this,c,"f").toCbor();break;default:throw new p.InvalidStateError(`Unexpected language value: ${a(this,l,"f")}`)}e.writeStartArray(y);e.writeInt(a(this,l,"f"));e.writeEncodedValue(s.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new f.CborReader(e);r.readStartArray();const s=Number(r.readInt());const a=p.HexBlob.fromBytes(r.readEncodedValue());switch(s){case _.ScriptLanguage.Native:t=Script.newNativeScript(h.NativeScript.fromCbor(a));break;case _.ScriptLanguage.PlutusV1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCbor(a));break;case _.ScriptLanguage.PlutusV2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCbor(a));break;case _.ScriptLanguage.PlutusV3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCbor(a));break;default:throw new p.InvalidStateError(`Unexpected language value: ${s}`)}o(t,u,e,"f");return t}toCore(){let e;switch(a(this,l,"f")){case _.ScriptLanguage.Native:e=a(this,i,"f").toCore();break;case _.ScriptLanguage.PlutusV1:e=a(this,n,"f").toCore();break;case _.ScriptLanguage.PlutusV2:e=a(this,d,"f").toCore();break;case _.ScriptLanguage.PlutusV3:e=a(this,c,"f").toCore();break;default:throw new p.InvalidStateError(`Unexpected language: ${a(this,l,"f")}`)}return e}static fromCore(e){let t;if((0,m.isNativeScript)(e))t=Script.newNativeScript(h.NativeScript.fromCore(e));else{switch(e.version){case m.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCore(e));break;case m.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCore(e));break;case m.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCore(e));break;default:throw new p.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return a(this,l,"f")}static newNativeScript(e){const t=new Script;o(t,i,e,"f");o(t,l,_.ScriptLanguage.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;o(t,n,e,"f");o(t,l,_.ScriptLanguage.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;o(t,d,e,"f");o(t,l,_.ScriptLanguage.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;o(t,c,e,"f");o(t,l,_.ScriptLanguage.PlutusV3,"f");return t}asNative(){return a(this,i,"f")}asPlutusV1(){return a(this,n,"f")}asPlutusV2(){return a(this,d,"f")}asPlutusV3(){return a(this,c,"f")}hash(){let e;switch(a(this,l,"f")){case _.ScriptLanguage.Native:e=a(this,i,"f").hash();break;case _.ScriptLanguage.PlutusV1:e=a(this,n,"f").hash();break;case _.ScriptLanguage.PlutusV2:e=a(this,d,"f").hash();break;case _.ScriptLanguage.PlutusV3:e=a(this,c,"f").hash();break;default:throw new p.InvalidStateError(`Unexpected script language ${a(this,l,"f")}`)}return e}constructor(){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0)}}t.Script=Script;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScriptLanguage=void 0;var r;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(r=t.ScriptLanguage||(t.ScriptLanguage={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l;Object.defineProperty(t,"__esModule",{value:true});t.deserializeTx=t.TxBodyCBOR=t.TxCBOR=t.Transaction=void 0;const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const _=4;class Transaction{toCbor(){const e=new f.CborWriter;if(o(this,l,"f"))return o(this,l,"f");e.writeStartArray(_);e.writeEncodedValue((0,v.hexToBytes)(o(this,i,"f").toCbor()));e.writeEncodedValue((0,v.hexToBytes)(o(this,n,"f").toCbor()));e.writeBoolean(o(this,c,"f"));if(o(this,d,"f"))e.writeEncodedValue((0,v.hexToBytes)(o(this,d,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();const s=t.readEncodedValue();const o=h.TransactionBody.fromCbor(p.HexBlob.fromBytes(s));const i=m.TransactionWitnessSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));let n=true;if(r===_)n=t.readBoolean();let d;if(t.peekState()!==f.CborReaderState.Null)d=u.AuxiliaryData.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const v=new Transaction(o,i,d);a(v,c,n,"f");a(v,l,e,"f");return v}toCore(){const e={body:o(this,i,"f").toCore(),id:this.getId(),isValid:o(this,c,"f"),witness:o(this,n,"f").toCore()};if(o(this,d,"f"))e.auxiliaryData=o(this,d,"f").toCore();return e}static fromCore(e){const t=new Transaction(h.TransactionBody.fromCore(e.body),m.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?u.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return h.TransactionBody.fromCbor(o(this,i,"f").toCbor())}setBody(e){a(this,i,e,"f");a(this,l,void 0,"f")}witnessSet(){return m.TransactionWitnessSet.fromCbor(o(this,n,"f").toCbor())}setWitnessSet(e){a(this,n,e,"f");a(this,l,void 0,"f")}isValid(){return o(this,c,"f")}setIsValid(e){a(this,l,void 0,"f");a(this,c,e,"f")}auxiliaryData(){if(o(this,d,"f")){return u.AuxiliaryData.fromCbor(o(this,d,"f").toCbor())}return}setAuxiliaryData(e){a(this,d,e,"f");a(this,l,void 0,"f")}getId(){return o(this,i,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,true);l.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f");a(this,d,r,"f")}}t.Transaction=Transaction;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap;const TxCBOR=e=>(0,p.HexBlob)(e);t.TxCBOR=TxCBOR;t.TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,p.HexBlob)(e);t.TxBodyCBOR=TxBodyCBOR;t.TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();t.deserializeTx=e=>{const r=e instanceof s?e.toString("hex"):e instanceof Uint8Array?s.from(e).toString("hex"):e;const a=Transaction.fromCbor((0,t.TxCBOR)(r));return a.toCore()};t.TxCBOR.deserialize=e=>(0,t.deserializeTx)(e)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.Committee=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;const p=2;const h=0;const m=1;class Committee{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");if(0===a(this,i,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");e.writeStartArray(f);e.writeStartMap(a(this,i,"f").length);for(const t of a(this,i,"f")){e.writeStartArray(p);e.writeInt(t[h].type);e.writeByteString((0,u.hexToBytes)(t[h].hash));e.writeInt(t[m])}e.writeEncodedValue((0,u.hexToBytes)(a(this,o,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);t.readStartMap();const a=[];while(t.peekState()!==d.CborReaderState.EndMap){if(t.readStartArray()!==p)throw new c.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const o=Number(t.readUInt());const i=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const u=Number(t.readUInt());a.push([{hash:i,type:o},u])}t.readEndMap();const v=l.UnitInterval.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const _=new Committee(v);for(const y of a)_.addMember(y[h],y[m]);s(_,n,e,"f");return _}toCore(){if(0===a(this,i,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");const e=a(this,i,"f").map(e=>({coldCredential:e[h],epoch:e[m]}));return{members:e,quorumThreshold:a(this,o,"f").toCore()}}static fromCore(e){const t=new Committee(l.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return a(this,i,"f").map(e=>e[0])}quorumThreshold(){return a(this,o,"f")}addMember(e,t){const r=a(this,i,"f").find(t=>t[h].type===e.type&&t[h].hash===e.hash);if(r)throw new c.InvalidArgumentError("committeeColdCredential","The given credential is already present");a(this,i,"f").push([e,t])}getMemberEpoch(e){const t=a(this,i,"f").find(t=>t[h].type===e.type&&t[h].hash===e.hash);if(t)return t[m];return}constructor(e){o.set(this,void 0);i.set(this,[]);n.set(this,void 0);s(this,o,e,"f")}}t.Committee=Committee;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.Constitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class Constitution{toCbor(){const e=new c.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(a(this,o,"f").toCbor()));a(this,i,"f")?e.writeByteString((0,u.hexToBytes)(a(this,i,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let o;if(t.peekState()===c.CborReaderState.Null)t.readNull();else o=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const i=new Constitution(a,o);s(i,n,e,"f");return i}toCore(){return{anchor:a(this,o,"f").toCore(),scriptHash:a(this,i,"f")?a(this,i,"f"):null}}static fromCore(e){return new Constitution(d.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return a(this,o,"f")}setAnchor(e){s(this,o,e,"f");s(this,n,void 0,"f")}scriptHash(){return a(this,i,"f")}setScriptHash(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.Constitution=Constitution;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionKind=void 0;var r;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(r=t.GovernanceActionKind||(t.GovernanceActionKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.HardForkInitiationAction=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const m=3;class HardForkInitiationAction{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(m);e.writeInt(l.GovernanceActionKind.HardForkInitiation);a(this,i,"f")?e.writeEncodedValue((0,h.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,h.hexToBytes)(a(this,o,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==m)throw new f.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==l.GovernanceActionKind.HardForkInitiation)throw new f.InvalidArgumentError("cbor",`Expected action kind, expected ${l.GovernanceActionKind.HardForkInitiation} but got ${a}`);let o;if(t.peekState()===d.CborReaderState.Null)t.readNull();else o=c.GovernanceActionId.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const i=p.ProtocolVersion.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const u=new HardForkInitiationAction(i,o);s(u,n,e,"f");return u}toCore(){return{__typename:u.GovernanceActionType.hard_fork_initiation_action,governanceActionId:a(this,i,"f")?a(this,i,"f").toCore():null,protocolVersion:a(this,o,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(p.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?c.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,i,"f")}protocolVersion(){return a(this,o,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.HardForkInitiationAction=HardForkInitiationAction;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o;Object.defineProperty(t,"__esModule",{value:true});t.InfoAction=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1;class InfoAction{toCbor(){const e=new i.CborWriter;if(s(this,o,"f"))return s(this,o,"f");e.writeStartArray(l);e.writeInt(n.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.Info)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.Info} but got ${s}`);const d=new InfoAction;a(d,o,e,"f");return d}toCore(){return{__typename:d.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){o.set(this,void 0)}}t.InfoAction=InfoAction;o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.NewConstitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const m=3;class NewConstitution{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(m);e.writeInt(u.GovernanceActionKind.NewConstitution);a(this,i,"f")?e.writeEncodedValue((0,h.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,h.hexToBytes)(a(this,o,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==m)throw new p.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==u.GovernanceActionKind.NewConstitution)throw new p.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.NewConstitution} but got ${a}`);let o;if(t.peekState()===d.CborReaderState.Null)t.readNull();else o=l.GovernanceActionId.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const i=c.Constitution.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const f=new NewConstitution(i,o);s(f,n,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.new_constitution,constitution:a(this,o,"f").toCore(),governanceActionId:a(this,i,"f")?a(this,i,"f").toCore():null}}static fromCore(e){return new NewConstitution(c.Constitution.fromCore(e.constitution),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,i,"f")}constitution(){return a(this,o,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.NewConstitution=NewConstitution;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.NoConfidence=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=2;class NoConfidence{toCbor(){const e=new n.CborWriter;if(a(this,i,"f"))return a(this,i,"f");e.writeStartArray(p);e.writeInt(c.GovernanceActionKind.NoConfidence);a(this,o,"f")?e.writeEncodedValue((0,f.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==p)throw new u.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==c.GovernanceActionKind.NoConfidence)throw new u.InvalidArgumentError("cbor",`Expected action kind, expected ${c.GovernanceActionKind.NoConfidence}  but got ${a}`);let o;if(t.peekState()===n.CborReaderState.Null)t.readNull();else o=d.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const l=new NoConfidence(o);s(l,i,e,"f");return l}toCore(){return{__typename:l.GovernanceActionType.no_confidence,governanceActionId:a(this,o,"f")?a(this,o,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?d.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,o,"f")}constructor(e){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.NoConfidence=NoConfidence;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ParameterChangeAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=4;class ParameterChangeAction{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.ParameterChange);a(this,i,"f")?e.writeEncodedValue((0,m.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(a(this,o,"f").toCbor()));a(this,n,"f")?e.writeByteString((0,m.hexToBytes)(a(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==u.GovernanceActionKind.ParameterChange)throw new p.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.ParameterChange} but got ${a}`);let o;if(t.peekState()===c.CborReaderState.Null)t.readNull();else o=l.GovernanceActionId.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const i=h.ProtocolParamUpdate.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));let n;if(t.peekState()===c.CborReaderState.Null)t.readNull();else n=p.HexBlob.fromBytes(t.readByteString());t.readEndArray();const f=new ParameterChangeAction(i,o,n);s(f,d,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.parameter_change_action,governanceActionId:a(this,i,"f")?a(this,i,"f").toCore():null,policyHash:a(this,n,"f")?a(this,n,"f"):null,protocolParamUpdate:a(this,o,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(h.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return a(this,i,"f")}protocolParamUpdate(){return a(this,o,"f")}policyHash(){return a(this,n,"f")}constructor(e,t,r){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f");s(this,n,r,"f")}}t.ParameterChangeAction=ParameterChangeAction;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c,l,u,f,p,h,m,v,_;Object.defineProperty(t,"__esModule",{value:true});t.ProposalProcedure=void 0;const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const M=4;class ProposalProcedure{toCbor(){const e=new g.CborWriter;if(a(this,_,"f"))return a(this,_,"f");let t;switch(a(this,p,"f")){case b.GovernanceActionKind.ParameterChange:t=a(this,i,"f").toCbor();break;case b.GovernanceActionKind.HardForkInitiation:t=a(this,n,"f").toCbor();break;case b.GovernanceActionKind.TreasuryWithdrawals:t=a(this,d,"f").toCbor();break;case b.GovernanceActionKind.NoConfidence:t=a(this,c,"f").toCbor();break;case b.GovernanceActionKind.UpdateCommittee:t=a(this,l,"f").toCbor();break;case b.GovernanceActionKind.NewConstitution:t=a(this,u,"f").toCbor();break;case b.GovernanceActionKind.Info:t=a(this,f,"f").toCbor();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${a(this,p,"f")}`)}e.writeStartArray(M);e.writeInt(a(this,h,"f"));const r=y.RewardAddress.fromAddress(y.Address.fromBech32(a(this,m,"f")));if(!r){throw new j.SerializationError(j.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${a(this,m,"f")}`)}e.writeByteString(s.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,R.hexToBytes)(t));e.writeEncodedValue((0,R.hexToBytes)(a(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new g.CborReader(e);r.readStartArray();const s=r.readInt();const a=y.Address.fromBytes(C.HexBlob.fromBytes(r.readByteString())).toBech32();const i=C.HexBlob.fromBytes(r.readEncodedValue());const n=w.Anchor.fromCbor(C.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const d=new g.CborReader(i);d.readStartArray();let c;const l=Number(d.readInt());switch(l){case b.GovernanceActionKind.ParameterChange:c=E.ParameterChangeAction.fromCbor(i);t=ProposalProcedure.newParameterChangeAction(s,a,n,c);break;case b.GovernanceActionKind.HardForkInitiation:c=S.HardForkInitiationAction.fromCbor(i);t=ProposalProcedure.newHardForkInitiationAction(s,a,n,c);break;case b.GovernanceActionKind.TreasuryWithdrawals:c=I.TreasuryWithdrawalsAction.fromCbor(i);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,a,n,c);break;case b.GovernanceActionKind.NoConfidence:c=A.NoConfidence.fromCbor(i);t=ProposalProcedure.newNoConfidence(s,a,n,c);break;case b.GovernanceActionKind.UpdateCommittee:c=x.UpdateCommittee.fromCbor(i);t=ProposalProcedure.newUpdateCommittee(s,a,n,c);break;case b.GovernanceActionKind.NewConstitution:c=k.NewConstitution.fromCbor(i);t=ProposalProcedure.newNewConstitution(s,a,n,c);break;case b.GovernanceActionKind.Info:c=T.InfoAction.fromCbor(i);t=ProposalProcedure.newInfoAction(s,a,n,c);break;default:throw new C.InvalidStateError(`Unexpected kind value: ${l}`)}o(t,_,e,"f");return t}toCore(){let e;switch(a(this,p,"f")){case b.GovernanceActionKind.ParameterChange:e=a(this,i,"f").toCore();break;case b.GovernanceActionKind.HardForkInitiation:e=a(this,n,"f").toCore();break;case b.GovernanceActionKind.TreasuryWithdrawals:e=a(this,d,"f").toCore();break;case b.GovernanceActionKind.NoConfidence:e=a(this,c,"f").toCore();break;case b.GovernanceActionKind.UpdateCommittee:e=a(this,l,"f").toCore();break;case b.GovernanceActionKind.NewConstitution:e=a(this,u,"f").toCore();break;case b.GovernanceActionKind.Info:e=a(this,f,"f").toCore();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${a(this,p,"f")}`)}return{anchor:a(this,v,"f").toCore(),deposit:a(this,h,"f"),governanceAction:e,rewardAccount:a(this,m,"f")}}static fromCore(e){let t;let r;const s=w.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case P.GovernanceActionType.parameter_change_action:t=E.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.hard_fork_initiation_action:t=S.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.treasury_withdrawals_action:t=I.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.no_confidence:t=A.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.update_committee:t=x.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.new_constitution:t=k.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.info_action:t=T.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new C.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.ParameterChange,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,i,s,"f");return a}static newHardForkInitiationAction(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.HardForkInitiation,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,n,s,"f");return a}static newTreasuryWithdrawalsAction(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.TreasuryWithdrawals,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,d,s,"f");return a}static newNoConfidence(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.NoConfidence,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,c,s,"f");return a}static newUpdateCommittee(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.UpdateCommittee,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,l,s,"f");return a}static newNewConstitution(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.NewConstitution,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,u,s,"f");return a}static newInfoAction(e,t,r,s){const a=new ProposalProcedure;o(a,p,b.GovernanceActionKind.Info,"f");o(a,h,e,"f");o(a,m,t,"f");o(a,v,r,"f");o(a,f,s,"f");return a}kind(){return a(this,p,"f")}deposit(){return a(this,h,"f")}rewardAccount(){return a(this,m,"f")}anchor(){return a(this,v,"f")}getParameterChangeAction(){return a(this,i,"f")}getHardForkInitiationAction(){return a(this,n,"f")}getTreasuryWithdrawalsAction(){return a(this,d,"f")}getNoConfidence(){return a(this,c,"f")}getUpdateCommittee(){return a(this,l,"f")}getNewConstitution(){return a(this,u,"f")}getInfoAction(){return a(this,f,"f")}constructor(){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0)}}t.ProposalProcedure=ProposalProcedure;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TreasuryWithdrawalsAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=3;class TreasuryWithdrawalsAction{toCbor(){const e=new l.CborWriter;if(o(this,d,"f"))return o(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...o(this,i,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){const f=c.RewardAddress.fromAddress(c.Address.fromBech32(r));if(!f){throw new h.SerializationError(h.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(s.from(f.toAddress().toBytes(),"hex"));e.writeInt(a)}o(this,n,"f")?e.writeByteString((0,m.hexToBytes)(o(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==u.GovernanceActionKind.TreasuryWithdrawals)throw new p.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const o=new Map;while(t.peekState()!==l.CborReaderState.EndMap){const i=c.Address.fromBytes(p.HexBlob.fromBytes(t.readByteString())).toBech32();const n=t.readInt();o.set(i,n)}t.readEndMap();let f;if(t.peekState()===l.CborReaderState.Null)t.readNull();else f=p.HexBlob.fromBytes(t.readByteString());t.readEndArray();const h=new TreasuryWithdrawalsAction(o,f);a(h,d,e,"f");return h}toCore(){const e=new Set([...o(this,i,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:f.GovernanceActionType.treasury_withdrawals_action,policyHash:o(this,n,"f")?o(this,n,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return o(this,i,"f")}policyHash(){return o(this,n,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f")}}t.TreasuryWithdrawalsAction=TreasuryWithdrawalsAction;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.UpdateCommittee=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const y=5;const w=2;const g=0;const b=1;class UpdateCommittee{toCbor(){const e=new l.CborWriter;if(a(this,c,"f"))return a(this,c,"f");e.writeStartArray(y);e.writeInt(m.GovernanceActionKind.UpdateCommittee);a(this,o,"f")?e.writeEncodedValue((0,_.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,_.hexToBytes)(a(this,i,"f").toCbor()));e.writeStartMap(a(this,n,"f").length);for(const t of a(this,n,"f")){e.writeStartArray(w);e.writeInt(t[g].type);e.writeByteString((0,_.hexToBytes)(t[g].hash));e.writeInt(t[b])}e.writeEncodedValue((0,_.hexToBytes)(a(this,d,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==m.GovernanceActionKind.UpdateCommittee)throw new v.InvalidArgumentError("cbor",`Expected action kind, expected ${m.GovernanceActionKind.UpdateCommittee} but got ${a}`);let o;if(t.peekState()===l.CborReaderState.Null)t.readNull();else o=h.GovernanceActionId.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const i=u.CborSet.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()),u.Credential.fromCbor);t.readStartMap();const n=[];while(t.peekState()!==l.CborReaderState.EndMap){if(t.readStartArray()!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const d=Number(t.readUInt());const f=v.HexBlob.fromBytes(t.readByteString());t.readEndArray();const p=Number(t.readUInt());n.push([{hash:f,type:d},p])}t.readEndMap();const _=u.UnitInterval.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const g=new UpdateCommittee(i,n,_,o);s(g,c,e,"f");return g}toCore(){return{__typename:f.GovernanceActionType.update_committee,governanceActionId:a(this,o,"f")?a(this,o,"f").toCore():null,membersToBeAdded:new Set(a(this,n,"f").map(e=>({coldCredential:e[g],epoch:(0,p.EpochNo)(e[b])}))),membersToBeRemoved:new Set(a(this,i,"f").toCore()),newQuorumThreshold:a(this,d,"f").toCore()}}static fromCore(e){return new UpdateCommittee(u.CborSet.fromCore([...e.membersToBeRemoved],u.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),u.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?h.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,o,"f")}membersToBeRemoved(){return a(this,i,"f").toCore()}membersToBeAdded(){return a(this,n,"f")}newQuorum(){return a(this,d,"f")}constructor(e,t,r,a){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,i,e,"f");s(this,n,t,"f");s(this,d,r,"f");s(this,o,a,"f")}}t.UpdateCommittee=UpdateCommittee;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x,R;Object.defineProperty(t,"__esModule",{value:true});t.TransactionBody=void 0;const M=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js");const F=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js");const G=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const q=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");class TransactionBody{toCbor(){var e;const t=new B.CborWriter;if(d(this,x,"f"))return d(this,x,"f");t.writeStartMap(d(this,c,"m",R).call(this));if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,$.hexToBytes)(d(this,l,"f").toCbor()))}if(void 0!==d(this,u,"f")&&d(this,u,"f").length>0){t.writeInt(1n);t.writeStartArray(d(this,u,"f").length);for(const r of d(this,u,"f"))t.writeEncodedValue(s.from(r.toCbor(),"hex"))}if(void 0!==d(this,f,"f")){t.writeInt(2n);t.writeInt(d(this,f,"f"))}if(void 0!==d(this,p,"f")){t.writeInt(3n);t.writeInt(d(this,p,"f"))}if(void 0!==d(this,h,"f")&&d(this,h,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,$.hexToBytes)(d(this,h,"f").toCbor()))}if(void 0!==d(this,m,"f")&&d(this,m,"f").size>0){t.writeInt(5n);const a=new Map;for(const[o,i]of d(this,m,"f")){const n=O.RewardAddress.fromAddress(O.Address.fromBech32(o));if(!n){throw new G.SerializationError(G.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${o}`)}const M=n.toAddress().toBytes();a.set(M,i)}const D=[...a].sort((e,t)=>e>t?1:-1);t.writeStartMap(D.length);for(const[N,F]of D){t.writeByteString(s.from(N,"hex"));t.writeInt(F)}}if(void 0!==d(this,v,"f")){t.writeInt(6n);t.writeEncodedValue(s.from(d(this,v,"f").toCbor(),"hex"))}if(void 0!==d(this,_,"f")){t.writeInt(7n);t.writeByteString(s.from(d(this,_,"f"),"hex"))}if(void 0!==d(this,y,"f")){t.writeInt(8n);t.writeInt(d(this,y,"f"))}if(void 0!==d(this,w,"f")&&d(this,w,"f").size>0){t.writeInt(9n);const H=(0,q.tokenMapToMultiAsset)(d(this,w,"f"));t.writeStartMap(H.size);const V=new Map([...H.entries()].sort(q.sortCanonically));for(const[K,L]of V.entries()){t.writeByteString(s.from(K,"hex"));const W=new Map([...L.entries()].sort(q.sortCanonically));t.writeStartMap(W.size);for(const[z,U]of W.entries()){t.writeByteString(s.from(z,"hex"));t.writeInt(U)}}}if(void 0!==d(this,g,"f")){t.writeInt(11n);t.writeByteString(s.from(d(this,g,"f"),"hex"))}if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,$.hexToBytes)(d(this,b,"f").toCbor()))}if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,$.hexToBytes)(d(this,P,"f").toCbor()))}if(void 0!==d(this,S,"f")){t.writeInt(15n);t.writeInt(d(this,S,"f"))}if(void 0!==d(this,C,"f")){t.writeInt(16n);t.writeEncodedValue(s.from(d(this,C,"f").toCbor(),"hex"))}if(void 0!==d(this,T,"f")){t.writeInt(17n);t.writeInt(d(this,T,"f"))}if(void 0!==d(this,k,"f")&&d(this,k,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,$.hexToBytes)(d(this,k,"f").toCbor()))}if(void 0!==d(this,A,"f")){t.writeInt(19n);t.writeEncodedValue(s.from(d(this,A,"f").toCbor(),"hex"))}if(void 0!==d(this,E,"f")&&d(this,E,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,$.hexToBytes)(d(this,E,"f").toCbor()))}if(void 0!==d(this,j,"f")){t.writeInt(21n);t.writeInt(d(this,j,"f"))}if(void 0!==d(this,I,"f")){t.writeInt(22n);t.writeInt(d(this,I,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new B.CborReader(e);const r=D.CborSet.fromCore([],L.TransactionInput.fromCore);const a=new Array;const o=0n;const i=new TransactionBody(r,a,o);t.readStartMap();while(t.peekState()!==B.CborReaderState.EndMap){const d=t.readInt();switch(d){case 0n:{const c=t.readEncodedValue();i.setInputs(D.CborSet.fromCbor(F.HexBlob.fromBytes(c),L.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==B.CborReaderState.EndArray){i.outputs().push(W.TransactionOutput.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:i.setFee(t.readInt());break;case 3n:i.setTtl((0,V.Slot)(Number(t.readInt())));break;case 4n:i.setCerts(D.CborSet.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue()),N.Certificate.fromCbor));break;case 5n:t.readStartMap();i.setWithdrawals(new Map);while(t.peekState()!==B.CborReaderState.EndMap){const l=O.Address.fromBytes(F.HexBlob.fromBytes(t.readByteString())).toBech32();const u=t.readInt();i.withdrawals().set(l,u)}t.readEndMap();break;case 6n:i.setUpdate(z.Update.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:i.setAuxiliaryDataHash(F.HexBlob.fromBytes(t.readByteString()));break;case 8n:i.setValidityStartInterval((0,V.Slot)(Number(t.readInt())));break;case 9n:{const f=new Map;t.readStartMap();while(t.peekState()!==B.CborReaderState.EndMap){const p=F.HexBlob.fromBytes(t.readByteString());if(!f.has(p))f.set(p,new Map);t.readStartMap();while(t.peekState()!==B.CborReaderState.EndMap){const h=s.from(t.readByteString()).toString("hex");const m=t.readInt();f.get(p).set(h,m)}t.readEndMap()}t.readEndMap();i.setMint((0,q.multiAssetsToTokenMap)(f));break}case 11n:i.setScriptDataHash(F.HexBlob.fromBytes(t.readByteString()));break;case 13n:i.setCollateral(D.CborSet.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue()),L.TransactionInput.fromCbor));break;case 14n:i.setRequiredSigners(D.CborSet.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue()),D.Hash.fromCbor));break;case 15n:i.setNetworkId(Number(t.readInt()));break;case 16n:i.setCollateralReturn(W.TransactionOutput.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:i.setTotalCollateral(t.readInt());break;case 18n:i.setReferenceInputs(D.CborSet.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue()),L.TransactionInput.fromCbor));break;case 19n:i.setVotingProcedures(U.VotingProcedures.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:i.setProposalProcedures(D.CborSet.fromCbor(F.HexBlob.fromBytes(t.readEncodedValue()),H.ProposalProcedure.fromCbor));break;case 21n:i.setCurrentTreasuryValue(t.readInt());break;case 22n:i.setDonation(t.readInt());break}}t.readEndMap();n(i,x,e,"f");return i}toCore(){var e,t,r,s,a,o;return{auxiliaryDataHash:d(this,_,"f"),certificates:(null===(e=d(this,h,"f"))||void 0===e?void 0:e.values())?d(this,h,"f").toCore():void 0,collateralReturn:null===(t=d(this,C,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=d(this,b,"f"))||void 0===r?void 0:r.values())?d(this,b,"f").toCore():void 0,donation:d(this,I,"f"),fee:d(this,f,"f"),inputs:d(this,l,"f").toCore(),mint:d(this,w,"f"),networkId:d(this,S,"f"),outputs:d(this,u,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=d(this,E,"f"))||void 0===s?void 0:s.values())?d(this,E,"f").toCore():void 0,referenceInputs:(null===(a=d(this,k,"f"))||void 0===a?void 0:a.size())?d(this,k,"f").toCore():void 0,requiredExtraSignatures:null===(o=d(this,P,"f"))||void 0===o?void 0:o.toCore(),scriptIntegrityHash:d(this,g,"f"),totalCollateral:d(this,T,"f"),treasuryValue:d(this,j,"f"),update:d(this,v,"f")?d(this,v,"f").toCore():void 0,validityInterval:d(this,p,"f")||void 0!==d(this,y,"f")?{invalidBefore:d(this,y,"f"),invalidHereafter:d(this,p,"f")}:void 0,votingProcedures:d(this,A,"f")?d(this,A,"f").toCore():void 0,withdrawals:d(this,m,"f")?[...d(this,m,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(D.CborSet.fromCore(e.inputs,L.TransactionInput.fromCore),e.outputs.map(e=>W.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(D.CborSet.fromCore(e.certificates,N.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(W.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(D.CborSet.fromCore(e.collaterals,L.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(D.CborSet.fromCore(e.referenceInputs,L.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(D.CborSet.fromCore(e.requiredExtraSignatures,D.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(z.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures(U.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(D.CborSet.fromCore(e.proposalProcedures,H.ProposalProcedure.fromCore));return t}setInputs(e){n(this,l,e,"f");n(this,x,void 0,"f")}inputs(){return d(this,l,"f")}setOutputs(e){n(this,u,e,"f");n(this,x,void 0,"f")}outputs(){return d(this,u,"f")}setFee(e){n(this,f,e,"f");n(this,x,void 0,"f")}fee(){return d(this,f,"f")}setTtl(e){n(this,p,e,"f");n(this,x,void 0,"f")}ttl(){return d(this,p,"f")}setCerts(e){n(this,h,e,"f");n(this,x,void 0,"f")}certs(){return d(this,h,"f")}setWithdrawals(e){n(this,m,e,"f");n(this,x,void 0,"f")}withdrawals(){return d(this,m,"f")}setUpdate(e){n(this,v,e,"f");n(this,x,void 0,"f")}update(){return d(this,v,"f")}setAuxiliaryDataHash(e){n(this,_,e,"f");n(this,x,void 0,"f")}auxiliaryDataHash(){return d(this,_,"f")}setValidityStartInterval(e){n(this,y,e,"f");n(this,x,void 0,"f")}validityStartInterval(){return d(this,y,"f")}setMint(e){n(this,w,(0,q.multiAssetsToTokenMap)(new Map([...(0,q.tokenMapToMultiAsset)(e).entries()].sort(q.sortCanonically))),"f");n(this,x,void 0,"f")}mint(){return d(this,w,"f")}setScriptDataHash(e){n(this,g,e,"f");n(this,x,void 0,"f")}scriptDataHash(){return d(this,g,"f")}setCollateral(e){n(this,b,e,"f");n(this,x,void 0,"f")}collateral(){return d(this,b,"f")}setRequiredSigners(e){n(this,P,e,"f");n(this,x,void 0,"f")}requiredSigners(){return d(this,P,"f")}setNetworkId(e){n(this,S,e,"f");n(this,x,void 0,"f")}networkId(){return d(this,S,"f")}setCollateralReturn(e){n(this,C,e,"f");n(this,x,void 0,"f")}collateralReturn(){return d(this,C,"f")}setTotalCollateral(e){n(this,T,e,"f");n(this,x,void 0,"f")}totalCollateral(){return d(this,T,"f")}setReferenceInputs(e){n(this,k,e,"f");n(this,x,void 0,"f")}referenceInputs(){return d(this,k,"f")}setVotingProcedures(e){n(this,A,e,"f");n(this,x,void 0,"f")}votingProcedures(){return d(this,A,"f")}setProposalProcedures(e){n(this,E,e,"f");n(this,x,void 0,"f")}proposalProcedures(){return d(this,E,"f")}setCurrentTreasuryValue(e){n(this,j,e,"f");n(this,x,void 0,"f")}currentTreasuryValue(){return d(this,j,"f")}setDonation(e){n(this,I,e,"f");n(this,x,void 0,"f")}donation(){return d(this,I,"f")}hash(){const e=M.blake2b(M.blake2b.BYTES).update((0,$.hexToBytes)(this.toCbor())).digest();return K.TransactionId.fromHexBlob(F.HexBlob.fromBytes(e))}hasTaggedSets(){const e=new B.CborReader(d(this,l,"f").toCbor());return e.peekState()===B.CborReaderState.Tag&&e.peekTag()===B.CborTag.Set}hasBabbageOutput(){if(0===d(this,u,"f").length)return false;const e=new B.CborReader(d(this,u,"f")[0].toCbor());return e.peekState()===B.CborReaderState.StartMap}constructor(e,t,r,s){c.add(this);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);n(this,l,e,"f");n(this,u,t,"f");n(this,f,r,"f");n(this,p,s,"f")}}t.TransactionBody=TransactionBody;l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,c=new WeakSet,R=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0)++t;if(void 0!==d(this,u,"f")&&d(this,u,"f").length>0)++t;if(void 0!==d(this,f,"f"))++t;if(void 0!==d(this,p,"f"))++t;if(void 0!==d(this,h,"f")&&d(this,h,"f").size()>0)++t;if(void 0!==d(this,m,"f")&&d(this,m,"f").size>0)++t;if(void 0!==d(this,v,"f"))++t;if(void 0!==d(this,_,"f"))++t;if(void 0!==d(this,y,"f"))++t;if(void 0!==d(this,w,"f")&&d(this,w,"f").size>0)++t;if(void 0!==d(this,g,"f"))++t;if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0)++t;if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0)++t;if(void 0!==d(this,S,"f"))++t;if(void 0!==d(this,C,"f"))++t;if(void 0!==d(this,T,"f"))++t;if(void 0!==d(this,k,"f")&&d(this,k,"f").size()>0)++t;if(void 0!==d(this,A,"f"))++t;if(void 0!==d(this,E,"f")&&d(this,E,"f").size()>0)++t;if(void 0!==d(this,j,"f"))++t;if(void 0!==d(this,I,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TransactionInput=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class TransactionInput{toCbor(){if(o(this,d,"f"))return o(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(o(this,i,"f"),"hex"));e.writeInt(o(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const o=t.readInt();const i=new TransactionInput(l.HexBlob.fromBytes(s),o);a(i,d,e,"f");return i}toCore(){return{index:Number(o(this,n,"f")),txId:o(this,i,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return o(this,i,"f")}setTransactionId(e){a(this,i,e,"f");a(this,d,void 0,"f")}index(){return o(this,n,"f")}setIndex(e){a(this,n,e,"f");a(this,d,void 0,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f")}}t.TransactionInput=TransactionInput;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionOutput=t.REQUIRED_FIELDS_COUNT=void 0;const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js");t.REQUIRED_FIELDS_COUNT=2;class TransactionOutput{toCbor(){if(o(this,u,"f"))return o(this,u,"f");const e=new h.CborWriter;const r=o(this,i,"m",f).call(this);if(r===t.REQUIRED_FIELDS_COUNT||3===r&&void 0!==o(this,c,"f")&&o(this,c,"f").kind()===m.DatumKind.DataHash){e.writeStartArray(r);e.writeByteString(s.from(o(this,n,"f").toBytes(),"hex"));e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex"));if(void 0!==o(this,c,"f"))e.writeByteString(s.from(o(this,c,"f").asDataHash(),"hex"))}else{e.writeStartMap(r);e.writeInt(0n);e.writeByteString(s.from(o(this,n,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex"));if(void 0!==o(this,c,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(o(this,c,"f").kind());switch(o(this,c,"f").kind()){case m.DatumKind.DataHash:e.writeByteString(s.from(o(this,c,"f").asDataHash(),"hex"));break;case m.DatumKind.InlineData:e.writeTag(h.CborTag.EncodedCborDataItem);e.writeByteString(s.from(o(this,c,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==o(this,l,"f")){e.writeInt(3n);e.writeTag(h.CborTag.EncodedCborDataItem);e.writeByteString(s.from(o(this,l,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);let r;let s;let o;let i;if(t.peekState()===h.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==h.CborReaderState.EndMap){const n=t.readInt();switch(n){case 0n:r=p.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));break;case 1n:s=w.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const d=new h.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));d.readStartArray();const c=Number(d.readInt());if(c===m.DatumKind.InlineData){const l=d.readTag();if(l!==h.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${h.CborTag.EncodedCborDataItem} but got ${l}`)}const f=d.readByteString();let g;let b;if(c===m.DatumKind.DataHash)g=v.HexBlob.fromBytes(f);if(c===m.DatumKind.InlineData)b=_.PlutusData.fromCbor(v.HexBlob.fromBytes(f));o=new m.Datum(g,b);break}case 3n:{const P=new h.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));const S=P.readTag();if(S!==h.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${h.CborTag.EncodedCborDataItem} but got ${S}`);const C=P.readByteString();i=y.Script.fromCbor(v.HexBlob.fromBytes(C));break}}}t.readEndMap()}else{const T=t.readStartArray();r=p.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));s=w.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));if(3===T){const k=t.readByteString();o=m.Datum.newDataHash(v.HexBlob.fromBytes(k))}}if(!r)throw new v.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!s)throw new v.InvalidArgumentError("cbor","Transaction output does not contain a value.");const A=new TransactionOutput(r,s);if(o)A.setDatum(o);if(i)A.setScriptRef(i);a(A,u,e,"f");return A}toCore(){var e;const t=o(this,d,"f").toCore();if(!t.assets)delete t.assets;const r={address:o(this,n,"f").asByron()?o(this,n,"f").toBase58():o(this,n,"f").toBech32(),value:t};if(o(this,c,"f")&&o(this,c,"f").kind()===m.DatumKind.InlineData)r.datum=null===(e=o(this,c,"f").asInlineData())||void 0===e?void 0:e.toCore();if(o(this,c,"f")&&o(this,c,"f").kind()===m.DatumKind.DataHash)r.datumHash=o(this,c,"f").asDataHash();if(o(this,l,"f"))r.scriptReference=o(this,l,"f").toCore();return r}static fromCore(e){const t=p.Address.fromString(e.address);if(!t)throw new v.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,w.Value.fromCore(e.value));if(e.datum)r.setDatum(m.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(m.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(y.Script.fromCore(e.scriptReference));return r}address(){return o(this,n,"f")}amount(){return o(this,d,"f")}datum(){return o(this,c,"f")}setDatum(e){a(this,c,e,"f")}scriptRef(){return o(this,l,"f")}setScriptRef(e){a(this,l,e,"f")}isBabbageOutput(){const e=new h.CborReader(this.toCbor());return e.peekState()===h.CborReaderState.StartMap}constructor(e,t){i.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);a(this,n,e,"f");a(this,d,t,"f")}}t.TransactionOutput=TransactionOutput;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,i=new WeakSet,f=function _TransactionOutput_getMapSize(){let e=t.REQUIRED_FIELDS_COUNT;if(o(this,c,"f"))++e;if(o(this,l,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.multiAssetsToTokenMap=t.tokenMapToMultiAsset=t.sortCanonically=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};t.sortCanonically=sortCanonically;const tokenMapToMultiAsset=e=>{const r=new Map;const a=new Map([...e.entries()].sort(t.sortCanonically));for(const[o,i]of a.entries()){const n=s.AssetId.getPolicyId(o);const d=s.AssetId.getAssetName(o);if(!r.has(n))r.set(n,new Map);r.get(n).set(d,i)}return r};t.tokenMapToMultiAsset=tokenMapToMultiAsset;const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,a]of e.entries()){for(const[o,i]of a.entries()){const n=s.AssetId.fromParts(r,o);t.set(n,i)}}return t};t.multiAssetsToTokenMap=multiAssetsToTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Value=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");const f=2;class Value{toCbor(){if(o(this,d,"f"))return o(this,d,"f");const e=new c.CborWriter;if(!o(this,n,"f")||o(this,n,"f").size<=0)e.writeInt(o(this,i,"f"));else{e.writeStartArray(f);e.writeInt(o(this,i,"f"));const t=(0,u.tokenMapToMultiAsset)(o(this,n,"f"));const r=new Map([...t.entries()].sort(u.sortCanonically));e.writeStartMap(r.size);for(const[a,l]of r.entries()){e.writeByteString(s.from(a,"hex"));const p=new Map([...l.entries()].sort(u.sortCanonically));e.writeStartMap(p.size);for(const[h,m]of p.entries()){e.writeByteString(s.from(h,"hex"));e.writeInt(m)}}}return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.peekState()===c.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const o=t.readStartArray();if(o!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${o} elements`);const i=t.readUInt();const n=new Map;t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const p=l.HexBlob.fromBytes(t.readByteString());if(!n.has(p))n.set(p,new Map);t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const h=s.from(t.readByteString()).toString("hex");const m=t.readUInt();n.get(p).set(h,m)}t.readEndMap()}t.readEndMap();const v=new Map([...(0,u.multiAssetsToTokenMap)(n)].sort(u.sortCanonically));const _=new Value(i,v);a(_,d,e,"f");return _}toCore(){return{assets:o(this,n,"f"),coins:o(this,i,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return o(this,i,"f")}setCoin(e){a(this,i,e,"f");a(this,d,void 0,"f")}multiasset(){return o(this,n,"f")}setMultiasset(e){a(this,n,(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(e).entries()].sort(u.sortCanonically))),"f");a(this,d,void 0,"f")}constructor(e,t){i.set(this,0n);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t?(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(t).entries()].sort(u.sortCanonically))):void 0,"f")}}t.Value=Value;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Voter=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=2;class Voter{toCbor(){if(o(this,d,"f"))return o(this,d,"f");const e=new c.CborWriter;e.writeStartArray(h);e.writeInt(o(this,i,"f"));e.writeByteString(s.from(o(this,n,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new c.CborReader(e);const s=r.readStartArray();if(s!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${s} elements`);const o=Number(r.readInt());const i=u.HexBlob.fromBytes(r.readByteString());switch(o){case f.VoterKind.ConstitutionalCommitteeKeyHash:case f.VoterKind.DrepKeyHash:case f.VoterKind.StakePoolKeyHash:t={hash:i,type:l.CredentialType.KeyHash};break;case f.VoterKind.ConstitutionalCommitteeScriptHash:case f.VoterKind.DRepScriptHash:t={hash:i,type:l.CredentialType.ScriptHash};break;default:throw new u.InvalidStateError(`Unexpected kind value: ${o}`)}const n=new Voter(o,t);a(n,d,e,"f");return n}toCore(){switch(o(this,i,"f")){case f.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:p.VoterType.ccHotKeyHash,credential:{hash:o(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:p.VoterType.ccHotScriptHash,credential:{hash:o(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.DrepKeyHash:return{__typename:p.VoterType.dRepKeyHash,credential:{hash:o(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.DRepScriptHash:return{__typename:p.VoterType.dRepScriptHash,credential:{hash:o(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.StakePoolKeyHash:return{__typename:p.VoterType.stakePoolKeyHash,credential:{hash:o(this,n,"f").hash,type:l.CredentialType.KeyHash}};default:throw new u.InvalidStateError(`Unexpected kind value: ${o(this,i,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case p.VoterType.ccHotKeyHash:case p.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case p.VoterType.dRepKeyHash:case p.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case p.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new u.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.ConstitutionalCommitteeKeyHash:f.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.DrepKeyHash:f.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(f.VoterKind.StakePoolKeyHash,{hash:e,type:l.CredentialType.KeyHash})}kind(){return o(this,i,"f")}toConstitutionalCommitteeHotCred(){if(o(this,i,"f")===f.VoterKind.ConstitutionalCommitteeKeyHash||o(this,i,"f")===f.VoterKind.ConstitutionalCommitteeScriptHash)return o(this,n,"f");return}toDrepCred(){if(o(this,i,"f")===f.VoterKind.DrepKeyHash||o(this,i,"f")===f.VoterKind.DRepScriptHash)return o(this,n,"f");return}toStakingPoolKeyHash(){if(o(this,i,"f")===f.VoterKind.StakePoolKeyHash)return o(this,n,"f").hash;return}equals(e){return o(this,i,"f")===o(e,i,"f")&&o(this,n,"f").type===o(e,n,"f").type&&o(this,n,"f").hash===o(e,n,"f").hash}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f")}}t.Voter=Voter;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VoterKind=void 0;var r;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(r=t.VoterKind||(t.VoterKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedure=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class VotingProcedure{toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new c.CborWriter;e.writeStartArray(f);e.writeInt(a(this,o,"f"));a(this,i,"f")?e.writeEncodedValue((0,u.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);t.readStartArray();const r=Number(t.readInt());let a;if(t.peekState()===c.CborReaderState.Null){t.readNull();a=void 0}else{a=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()))}const o=new VotingProcedure(r,a);s(o,n,e,"f");return o}toCore(){return{anchor:a(this,i,"f")?a(this,i,"f").toCore():null,vote:a(this,o,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?d.Anchor.fromCore(e.anchor):void 0)}vote(){return a(this,o,"f")}setVote(e){s(this,o,e,"f");s(this,n,void 0,"f")}anchor(){return a(this,i,"f")}setAnchor(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.VotingProcedure=VotingProcedure;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedures=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class VotingProcedures{toCbor(){if(s(this,i,"f"))return s(this,i,"f");const e=new n.CborWriter;const t=this.getVoters();if(0===t.length)throw new c.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const a=this.getGovernanceActionIdsByVoter(r);if(0===a.length)throw new c.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,f.hexToBytes)(r.toCbor()));e.writeStartMap(a.length);for(const o of a){e.writeEncodedValue((0,f.hexToBytes)(o.toCbor()));const d=this.get(r,o);if(!d)throw new c.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,f.hexToBytes)(d.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const s=l.Voter.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const o=d.GovernanceActionId.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const f=u.VotingProcedure.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,o,f)}t.readEndMap()}t.readEndMap();a(r,i,e,"f");return r}toCore(){return s(this,o,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;a(t,o,e.map(e=>{const t=l.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:d.GovernanceActionId.fromCore(e.actionId),votingProcedure:u.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const n=s(this,o,"f").find(t=>t.voter.equals(e));if(!n){s(this,o,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const d=n.votes.find(e=>e.actionId.equals(t));if(d)throw new c.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");n.votes.push({actionId:t,votingProcedure:r});a(this,i,void 0,"f")}get(e,t){const r=s(this,o,"f").find(t=>t.voter.equals(e));if(!r)return;const a=r.votes.find(e=>e.actionId.equals(t));if(!a)return;return a.votingProcedure}getVoters(){return s(this,o,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=s(this,o,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){o.set(this,[]);i.set(this,void 0)}}t.VotingProcedures=VotingProcedures;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.TransactionUnspentOutput=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class TransactionUnspentOutput{toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new d.CborWriter;e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(a(this,o,"f").toCbor()));e.writeEncodedValue((0,u.hexToBytes)(a(this,i,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=l.TransactionInput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const o=l.TransactionOutput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const i=new TransactionUnspentOutput(a,o);s(i,n,e,"f");return i}toCore(){return[a(this,o,"f").toCore(),a(this,i,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(l.TransactionInput.fromCore(e[0]),l.TransactionOutput.fromCore(e[1]))}input(){return a(this,o,"f")}setInput(e){s(this,o,e,"f");s(this,n,void 0,"f")}output(){return a(this,i,"f")}setOutput(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.TransactionUnspentOutput=TransactionUnspentOutput;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BootstrapWitness=void 0;const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=4;const h=(0,l.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new u.CborWriter;if(a(this,c,"f"))return a(this,c,"f");if(a(this,n,"f").length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${a(this,n,"f").length/2} bytes long`);e.writeStartArray(p);e.writeByteString((0,f.hexToBytes)(a(this,o,"f")));e.writeByteString((0,f.hexToBytes)(a(this,i,"f")));e.writeByteString((0,f.hexToBytes)(a(this,n,"f")));e.writeByteString((0,f.hexToBytes)(a(this,d,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new u.CborReader(e);const r=t.readStartArray();if(r!==p)throw new l.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=l.HexBlob.fromBytes(t.readByteString());const o=l.HexBlob.fromBytes(t.readByteString());const i=l.HexBlob.fromBytes(t.readByteString());const n=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new BootstrapWitness(a,o,i,n);s(d,c,e,"f");return d}toCore(){return{addressAttributes:l.Base64Blob.fromBytes((0,f.hexToBytes)(a(this,d,"f"))),chainCode:a(this,n,"f"),key:a(this,o,"f"),signature:a(this,i,"f")}}static fromCore(e){if(!e.chainCode)throw new l.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?l.HexBlob.fromBase64(e.addressAttributes):h)}vkey(){return a(this,o,"f")}setVkey(e){s(this,o,e,"f");s(this,c,void 0,"f")}signature(){return a(this,i,"f")}setSignature(e){s(this,i,e,"f");s(this,c,void 0,"f")}chainCode(){return a(this,n,"f")}setChainCode(e){if(e.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);s(this,n,e,"f");s(this,c,void 0,"f")}attributes(){return a(this,d,"f")}setAttributes(e){s(this,d,e,"f");s(this,c,void 0,"f")}constructor(e,t,r,a){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f");s(this,n,r,"f");s(this,d,a,"f")}}t.BootstrapWitness=BootstrapWitness;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p;Object.defineProperty(t,"__esModule",{value:true});t.Redeemer=void 0;const h=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const P=4;const S=32;class Redeemer{toCbor(){const e=new m.CborWriter;if(d(this,p,"f"))return d(this,p,"f");e.writeStartArray(P);e.writeInt(d(this,c,"f"));e.writeInt(d(this,l,"f"));e.writeEncodedValue((0,b.hexToBytes)(d(this,u,"f").toCbor()));e.writeEncodedValue((0,b.hexToBytes)(d(this,f,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(r!==P)throw new _.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const a=t.readUInt();const o=y.PlutusData.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const i=v.ExUnits.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const d=new Redeemer(s,a,o,i);n(d,p,e,"f");return d}toCore(){let e;switch(d(this,c,"f")){case g.RedeemerTag.Spend:e=w.RedeemerPurpose.spend;break;case g.RedeemerTag.Mint:e=w.RedeemerPurpose.mint;break;case g.RedeemerTag.Cert:e=w.RedeemerPurpose.certificate;break;case g.RedeemerTag.Reward:e=w.RedeemerPurpose.withdrawal;break;case g.RedeemerTag.Voting:e=w.RedeemerPurpose.vote;break;case g.RedeemerTag.Proposing:e=w.RedeemerPurpose.propose;break;default:throw new _.InvalidStateError(`Invalid redeemer type ${d(this,c,"f")}`)}return{data:d(this,u,"f").toCore(),executionUnits:d(this,f,"f").toCore(),index:Number(d(this,l,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case w.RedeemerPurpose.spend:t=g.RedeemerTag.Spend;break;case w.RedeemerPurpose.mint:t=g.RedeemerTag.Mint;break;case w.RedeemerPurpose.certificate:t=g.RedeemerTag.Cert;break;case w.RedeemerPurpose.withdrawal:t=g.RedeemerTag.Reward;break;case w.RedeemerPurpose.vote:t=g.RedeemerTag.Voting;break;case w.RedeemerPurpose.propose:t=g.RedeemerTag.Proposing;break;default:throw new _.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),y.PlutusData.fromCore(e.data),v.ExUnits.fromCore(e.executionUnits))}tag(){return d(this,c,"f")}setTag(e){n(this,c,e,"f");n(this,p,void 0,"f")}index(){return d(this,l,"f")}setIndex(e){n(this,l,e,"f");n(this,p,void 0,"f")}data(){return d(this,u,"f")}setData(e){n(this,u,e,"f");n(this,p,void 0,"f")}exUnits(){return d(this,f,"f")}setExUnits(e){n(this,f,e,"f");n(this,p,void 0,"f")}hash(){const e=h.blake2b(S).update(s.from(this.toCbor(),"hex")).digest();return h.Hash32ByteBase16(_.HexBlob.fromBytes(e))}constructor(e,t,r,s){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f");n(this,f,s,"f")}}t.Redeemer=Redeemer;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedeemerTag=void 0;var r;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(r=t.RedeemerTag||(t.RedeemerTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;Object.defineProperty(t,"__esModule",{value:true});t.Redeemers=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");const m=2;const v=2;class Redeemers{toCbor(){if(o(this,n,"f"))return o(this,n,"f");const e=new d.CborWriter;if(h.inConwayEra){const t=new Map(o(this,i,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,p.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,p.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(o(this,i,"f").length);for(const a of o(this,i,"f"))e.writeEncodedValue(s.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new d.CborReader(e);if(r.peekState()===d.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==d.CborReaderState.EndMap){const s=r.readStartArray();if(s!==m)throw new l.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${m} elements, but got an array of ${s} elements`);const o=Number(r.readUInt());const i=r.readUInt();r.readEndArray();const p=r.readStartArray();if(p!==v)throw new l.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${v} elements, but got an array of ${p} elements`);const h=u.PlutusData.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));const _=c.ExUnits.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new f.Redeemer(o,i,h,_))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){t.push(f.Redeemer.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const y=new Redeemers(t);a(y,n,e,"f");return y}toCore(){return o(this,i,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>f.Redeemer.fromCore(e)))}values(){return o(this,i,"f")}setValues(e){a(this,i,[...e],"f");a(this,n,void 0,"f")}size(){return o(this,i,"f").length}constructor(e){i.set(this,void 0);n.set(this,void 0);a(this,i,[...e],"f")}}t.Redeemers=Redeemers;i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c,l,u,f,p,h,m,v,_,y,w,g;Object.defineProperty(t,"__esModule",{value:true});t.TransactionWitnessSet=void 0;const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const R=i(r("../../node_modules/lodash/uniqWith.js"));class TransactionWitnessSet{toCbor(){const e=new P.CborWriter;if(a(this,_,"f"))return a(this,_,"f");e.writeStartMap(a(this,n,"m",g).call(this));if(void 0!==a(this,c,"f")&&a(this,c,"f").size()>0){a(this,c,"f").setValues((0,R.default)(a(this,c,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(s.from(a(this,c,"f").toCbor(),"hex"))}if(void 0!==a(this,l,"f")&&a(this,l,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(s.from(a(this,l,"f").toCbor(),"hex"))}if(void 0!==a(this,u,"f")&&a(this,u,"f").size()>0){a(this,u,"f").setValues((0,R.default)(a(this,u,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(s.from(a(this,u,"f").toCbor(),"hex"))}if(void 0!==a(this,f,"f")&&a(this,f,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(s.from(a(this,f,"f").toCbor(),"hex"))}if(void 0!==a(this,p,"f")&&a(this,p,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(s.from(a(this,p,"f").toCbor(),"hex"))}if(void 0!==a(this,h,"f")&&a(this,h,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,x.hexToBytes)(a(this,h,"f").toCbor()))}if(void 0!==a(this,m,"f")&&a(this,m,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(s.from(a(this,m,"f").toCbor(),"hex"))}if(void 0!==a(this,v,"f")&&a(this,v,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(s.from(a(this,v,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new P.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==P.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:r.setVkeys(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),I.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),T.NativeScript.fromCbor));break;case 2n:r.setBootstraps(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),b.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),T.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusData.fromCbor));break;case 5n:r.setRedeemers(E.Redeemers.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),T.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),T.PlutusV3Script.fromCbor));break}}t.readEndMap();o(r,_,e,"f");return r}toCore(){var e;const t=a(this,n,"m",y).call(this);return{bootstrap:a(this,u,"f")?a(this,u,"f").toCore():void 0,datums:a(this,p,"f")?a(this,p,"f").toCore():void 0,redeemers:(null===(e=a(this,h,"f"))||void 0===e?void 0:e.size())?a(this,h,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:a(this,c,"f")?new Map(a(this,c,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(S.CborSet.fromCore([...e.signatures],I.VkeyWitness.fromCore));if(e.scripts){const r=a(TransactionWitnessSet,d,"m",w).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(E.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(S.CborSet.fromCore(e.datums,k.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(S.CborSet.fromCore(e.bootstrap,b.BootstrapWitness.fromCore));return t}setVkeys(e){o(this,c,e,"f");o(this,_,void 0,"f")}vkeys(){return a(this,c,"f")}setNativeScripts(e){o(this,l,e,"f");o(this,_,void 0,"f")}nativeScripts(){return a(this,l,"f")}setBootstraps(e){o(this,u,e,"f");o(this,_,void 0,"f")}bootstraps(){return a(this,u,"f")}setPlutusV1Scripts(e){o(this,f,e,"f");o(this,_,void 0,"f")}plutusV1Scripts(){return a(this,f,"f")}setPlutusData(e){o(this,p,e,"f");o(this,_,void 0,"f")}plutusData(){return a(this,p,"f")}setRedeemers(e){o(this,h,e,"f");o(this,_,void 0,"f")}redeemers(){return a(this,h,"f")}setPlutusV2Scripts(e){o(this,m,e,"f");o(this,_,void 0,"f")}plutusV2Scripts(){return a(this,m,"f")}setPlutusV3Scripts(e){o(this,v,e,"f");o(this,_,void 0,"f")}plutusV3Scripts(){return a(this,v,"f")}constructor(){n.add(this);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0)}}t.TransactionWitnessSet=TransactionWitnessSet;d=TransactionWitnessSet,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,n=new WeakSet,y=function _TransactionWitnessSet_getCoreScripts(){const e=a(this,f,"f")?a(this,f,"f").toCore():[];const t=a(this,m,"f")?a(this,m,"f").toCore():[];const r=a(this,v,"f")?a(this,v,"f").toCore():[];const s=a(this,l,"f")?a(this,l,"f").toCore():[];return[...e,...t,...r,...s]},w=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,a]=e.reduce(([e,t,r,s],a)=>{if(a.__type===A.ScriptType.Native)e?e.push(a):e=[a];else{switch(a.version){case A.PlutusLanguageVersion.V1:t?t.push(a):t=[a];break;case A.PlutusLanguageVersion.V2:r?r.push(a):r=[a];break;case A.PlutusLanguageVersion.V3:s?s.push(a):s=[a];break;default:throw new j.SerializationError(j.SerializationFailure.InvalidScriptType,`Script '${a}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:S.CborSet.fromCore(t,T.NativeScript.fromCore)},...r&&{plutusV1:S.CborSet.fromCore(r,T.PlutusV1Script.fromCore)},...s&&{plutusV2:S.CborSet.fromCore(s,T.PlutusV2Script.fromCore)},...a&&{plutusV3:S.CborSet.fromCore(a,T.PlutusV3Script.fromCore)}}},g=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==a(this,c,"f")&&a(this,c,"f").size()>0)++e;if(void 0!==a(this,l,"f")&&a(this,l,"f").size()>0)++e;if(void 0!==a(this,u,"f")&&a(this,u,"f").size()>0)++e;if(void 0!==a(this,f,"f")&&a(this,f,"f").size()>0)++e;if(void 0!==a(this,p,"f")&&a(this,p,"f").size()>0)++e;if(void 0!==a(this,h,"f")&&a(this,h,"f").size()>0)++e;if(void 0!==a(this,m,"f")&&a(this,m,"f").size()>0)++e;if(void 0!==a(this,v,"f")&&a(this,v,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.VkeyWitness=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=2;class VkeyWitness{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(u);e.writeByteString((0,l.hexToBytes)(a(this,o,"f")));e.writeByteString((0,l.hexToBytes)(a(this,i,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new c.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const a=c.HexBlob.fromBytes(t.readByteString());const o=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const i=new VkeyWitness(a,o);s(i,n,e,"f");return i}toCore(){return[a(this,o,"f"),a(this,i,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return a(this,o,"f")}setVkey(e){s(this,o,e,"f");s(this,n,void 0,"f")}signature(){return a(this,i,"f")}setSignature(e){s(this,i,e,"f");s(this,n,void 0,"f")}constructor(e,t){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.VkeyWitness=VkeyWitness;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.CostModel=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class CostModel{static newPlutusV1(e){return new CostModel(l.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(l.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(l.PlutusLanguageVersion.V3,e)}set(e,t){if(!a(this,o,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${a(this,i,"f")}.`);a(this,n,"f")[e]=t}get(e){if(!a(this,o,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${a(this,i,"f")}.`);return a(this,n,"f")[e]}costs(){return a(this,n,"f")}language(){return a(this,i,"f")}constructor(e,t){o.add(this);i.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,n,t,"f")}}t.CostModel=CostModel;i=new WeakMap,n=new WeakMap,o=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.Costmdls=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class Costmdls{toCbor(){const e=new n.CborWriter;if(a(this,i,"f"))return a(this,i,"f");const t=new Map([...a(this,o,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeInt(r);e.writeStartArray(s.costs().length);for(const d of s.costs())e.writeInt(d)}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const a=Number(t.readInt());const o=new Array;t.readStartArray();while(t.peekState()!==n.CborReaderState.EndArray){o.push(Number(t.readInt()))}t.readEndArray();r.set(a,new d.CostModel(a,o))}t.readEndMap();const c=new Costmdls(r);s(c,i,e,"f");return c}toCore(){const e=new Map;for(const[t,r]of a(this,o,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new d.CostModel(r,s));return new Costmdls(t)}size(){return a(this,o,"f").size}insert(e){a(this,o,"f").set(e.language(),e);s(this,i,void 0,"f")}get(e){return a(this,o,"f").get(e)}keys(){return[...a(this,o,"f").keys()]}languageViewsEncoding(){const e=new n.CborWriter;const t=new Map([...a(this,o,"f")].sort((e,t)=>{const r=e[0]===l.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===l.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,s]of t){switch(r){case l.PlutusLanguageVersion.V1:{const i=new n.CborWriter;i.writeStartArray();for(const d of s.costs())i.writeInt(d);i.writeEndArray();const u=i.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(u);break}case l.PlutusLanguageVersion.V2:case l.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(s.costs().length);for(const f of s.costs())e.writeInt(f);break;default:throw new c.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f")}}t.Costmdls=Costmdls;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l,u,f,p,h,m,v;Object.defineProperty(t,"__esModule",{value:true});t.DrepVotingThresholds=void 0;const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const g=10;class DrepVotingThresholds{toCbor(){const e=new _.CborWriter;if(o(this,v,"f"))return o(this,v,"f");e.writeStartArray(g);e.writeEncodedValue(s.from(o(this,i,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,p,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,m,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new _.CborReader(e);const r=t.readStartArray();if(r!==g)throw new y.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const o=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const i=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const n=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const d=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const c=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const l=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const u=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const f=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const p=w.UnitInterval.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const h=new DrepVotingThresholds(s,o,i,n,d,c,l,u,f,p);a(h,v,e,"f");return h}toCore(){return{committeeNoConfidence:o(this,d,"f").toCore(),committeeNormal:o(this,n,"f").toCore(),hardForkInitiation:o(this,l,"f").toCore(),motionNoConfidence:o(this,i,"f").toCore(),ppEconomicGroup:o(this,f,"f").toCore(),ppGovernanceGroup:o(this,h,"f").toCore(),ppNetworkGroup:o(this,u,"f").toCore(),ppTechnicalGroup:o(this,p,"f").toCore(),treasuryWithdrawal:o(this,m,"f").toCore(),updateConstitution:o(this,c,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(w.UnitInterval.fromCore(e.motionNoConfidence),w.UnitInterval.fromCore(e.committeeNormal),w.UnitInterval.fromCore(e.committeeNoConfidence),w.UnitInterval.fromCore(e.updateConstitution),w.UnitInterval.fromCore(e.hardForkInitiation),w.UnitInterval.fromCore(e.ppNetworkGroup),w.UnitInterval.fromCore(e.ppEconomicGroup),w.UnitInterval.fromCore(e.ppTechnicalGroup),w.UnitInterval.fromCore(e.ppGovernanceGroup),w.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){a(this,i,e,"f");a(this,v,void 0,"f")}setCommitteeNormal(e){a(this,n,e,"f");a(this,v,void 0,"f")}setCommitteeNoConfidence(e){a(this,d,e,"f");a(this,v,void 0,"f")}setUpdateConstitution(e){a(this,c,e,"f");a(this,v,void 0,"f")}setHardForkInitiation(e){a(this,l,e,"f");a(this,v,void 0,"f")}setPpNetworkGroup(e){a(this,u,e,"f");a(this,v,void 0,"f")}setPpEconomicGroup(e){a(this,f,e,"f");a(this,v,void 0,"f")}setPpTechnicalGroup(e){a(this,p,e,"f");a(this,v,void 0,"f")}setPpGovernanceGroup(e){a(this,h,e,"f");a(this,v,void 0,"f")}setTreasuryWithdrawal(e){a(this,m,e,"f");a(this,v,void 0,"f")}motionNoConfidence(){return o(this,i,"f")}committeeNormal(){return o(this,n,"f")}committeeNoConfidence(){return o(this,d,"f")}updateConstitution(){return o(this,c,"f")}hardForkInitiation(){return o(this,l,"f")}ppNetworkGroup(){return o(this,u,"f")}ppEconomicGroup(){return o(this,f,"f")}ppTechnicalGroup(){return o(this,p,"f")}ppGovernanceGroup(){return o(this,h,"f")}treasuryWithdrawal(){return o(this,m,"f")}constructor(e,t,r,s,o,_,y,w,g,b){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f");a(this,d,r,"f");a(this,c,s,"f");a(this,l,o,"f");a(this,u,_,"f");a(this,f,y,"f");a(this,p,w,"f");a(this,h,g,"f");a(this,m,b,"f")}}t.DrepVotingThresholds=DrepVotingThresholds;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.ExUnitPrices=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const p=i(r("../../node_modules/fraction.js/fraction.js"));const h=2;class ExUnitPrices{toCbor(){const e=new l.CborWriter;if(o(this,c,"f"))return o(this,c,"f");e.writeStartArray(h);e.writeEncodedValue(s.from(o(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const o=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const i=new ExUnitPrices(s,o);a(i,c,e,"f");return i}toCore(){return{memory:Number(o(this,n,"f").numerator())/Number(o(this,n,"f").denominator()),steps:Number(o(this,d,"f").numerator())/Number(o(this,d,"f").denominator())}}static fromCore(e){const t=new p.default(e.memory);const r=new p.default(e.steps);return new ExUnitPrices(new f.UnitInterval(BigInt(t.n),BigInt(t.d)),new f.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return o(this,n,"f")}setMemPrice(e){a(this,n,e,"f");a(this,c,void 0,"f")}stepsPrice(){return o(this,d,"f")}setStepsPrice(e){a(this,d,e,"f");a(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e,"f");a(this,d,t,"f")}}t.ExUnitPrices=ExUnitPrices;n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolVotingThresholds=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=5;class PoolVotingThresholds{toCbor(){const e=new f.CborWriter;if(o(this,u,"f"))return o(this,u,"f");e.writeStartArray(m);e.writeEncodedValue(s.from(o(this,i,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(o(this,l,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==m)throw new p.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=h.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const o=h.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const i=h.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const n=h.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));const d=h.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new PoolVotingThresholds(s,o,i,n,d);a(c,u,e,"f");return c}toCore(){return{committeeNoConfidence:o(this,d,"f").toCore(),committeeNormal:o(this,n,"f").toCore(),hardForkInitiation:o(this,c,"f").toCore(),motionNoConfidence:o(this,i,"f").toCore(),securityRelevantParamVotingThreshold:o(this,l,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(h.UnitInterval.fromCore(e.motionNoConfidence),h.UnitInterval.fromCore(e.committeeNormal),h.UnitInterval.fromCore(e.committeeNoConfidence),h.UnitInterval.fromCore(e.hardForkInitiation),h.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){a(this,i,e,"f");a(this,u,void 0,"f")}setCommitteeNormal(e){a(this,n,e,"f");a(this,u,void 0,"f")}setCommitteeNoConfidence(e){a(this,d,e,"f");a(this,u,void 0,"f")}setHardForkInitiation(e){a(this,c,e,"f");a(this,u,void 0,"f")}motionNoConfidence(){return o(this,i,"f")}committeeNormal(){return o(this,n,"f")}committeeNoConfidence(){return o(this,d,"f")}hardForkInitiation(){return o(this,c,"f")}securityRelevantParam(){return o(this,l,"f")}constructor(e,t,r,s,o){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);a(this,i,e,"f");a(this,n,t,"f");a(this,d,r,"f");a(this,c,s,"f");a(this,l,o,"f")}}t.PoolVotingThresholds=PoolVotingThresholds;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ProposedProtocolParameterUpdates=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js");class ProposedProtocolParameterUpdates{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");const t=new Map([...d(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeByteString(s.from(r,"hex"));e.writeEncodedValue(s.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==f.CborReaderState.EndMap){const s=u.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));const a=h.ProtocolParamUpdate.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()));r.set(s,a)}t.readEndMap();const o=new ProposedProtocolParameterUpdates(r);n(o,l,e,"f");return o}toCore(){return new Map([...d(this,c,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,h.ProtocolParamUpdate.fromCore(t)])))}size(){return d(this,c,"f").size}insert(e,t){d(this,c,"f").set(e,t)}get(e){return d(this,c,"f").get(e)}keys(){return[...d(this,c,"f").keys()]}constructor(e){c.set(this,new Map);l.set(this,void 0);n(this,c,e,"f")}}t.ProposedProtocolParameterUpdates=ProposedProtocolParameterUpdates;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x,R,M,O,B,D,N,F,H,G,V;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolParamUpdate=void 0;const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const q=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const Y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js");class ProtocolParamUpdate{toCbor(){const e=new K.CborWriter;if(a(this,G,"f"))return a(this,G,"f");e.writeStartMap(a(this,i,"m",V).call(this));if(void 0!==a(this,n,"f")){e.writeInt(0n);e.writeInt(a(this,n,"f"))}if(void 0!==a(this,d,"f")){e.writeInt(1n);e.writeInt(a(this,d,"f"))}if(void 0!==a(this,c,"f")){e.writeInt(2n);e.writeInt(a(this,c,"f"))}if(void 0!==a(this,l,"f")){e.writeInt(3n);e.writeInt(a(this,l,"f"))}if(void 0!==a(this,u,"f")){e.writeInt(4n);e.writeInt(a(this,u,"f"))}if(void 0!==a(this,f,"f")){e.writeInt(5n);e.writeInt(a(this,f,"f"))}if(void 0!==a(this,p,"f")){e.writeInt(6n);e.writeInt(a(this,p,"f"))}if(void 0!==a(this,h,"f")){e.writeInt(7n);e.writeInt(a(this,h,"f"))}if(void 0!==a(this,m,"f")){e.writeInt(8n);e.writeInt(a(this,m,"f"))}if(void 0!==a(this,v,"f")){e.writeInt(9n);e.writeEncodedValue(s.from(a(this,v,"f").toCbor(),"hex"))}if(void 0!==a(this,_,"f")){e.writeInt(10n);e.writeEncodedValue(s.from(a(this,_,"f").toCbor(),"hex"))}if(void 0!==a(this,y,"f")){e.writeInt(11n);e.writeEncodedValue(s.from(a(this,y,"f").toCbor(),"hex"))}if(void 0!==a(this,w,"f")){e.writeInt(12n);e.writeEncodedValue(s.from(a(this,w,"f").toCbor(),"hex"))}if(void 0!==a(this,g,"f"))if(0===a(this,g,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(s.from(a(this,g,"f"),"hex"))}if(void 0!==a(this,b,"f")){e.writeInt(14n);e.writeEncodedValue(s.from(a(this,b,"f").toCbor(),"hex"))}if(void 0!==a(this,P,"f")){e.writeInt(16n);e.writeInt(a(this,P,"f"))}if(void 0!==a(this,S,"f")){e.writeInt(17n);e.writeInt(a(this,S,"f"))}if(void 0!==a(this,C,"f")){e.writeInt(18n);e.writeEncodedValue(s.from(a(this,C,"f").toCbor(),"hex"))}if(void 0!==a(this,T,"f")){e.writeInt(19n);e.writeEncodedValue(s.from(a(this,T,"f").toCbor(),"hex"))}if(void 0!==a(this,k,"f")){e.writeInt(20n);e.writeEncodedValue(s.from(a(this,k,"f").toCbor(),"hex"))}if(void 0!==a(this,A,"f")){e.writeInt(21n);e.writeEncodedValue(s.from(a(this,A,"f").toCbor(),"hex"))}if(void 0!==a(this,E,"f")){e.writeInt(22n);e.writeInt(a(this,E,"f"))}if(void 0!==a(this,j,"f")){e.writeInt(23n);e.writeInt(a(this,j,"f"))}if(void 0!==a(this,I,"f")){e.writeInt(24n);e.writeInt(a(this,I,"f"))}if(void 0!==a(this,x,"f")){e.writeInt(25n);e.writeEncodedValue(s.from(a(this,x,"f").toCbor(),"hex"))}if(void 0!==a(this,R,"f")){e.writeInt(26n);e.writeEncodedValue(s.from(a(this,R,"f").toCbor(),"hex"))}if(void 0!==a(this,M,"f")){e.writeInt(27n);e.writeInt(a(this,M,"f"))}if(void 0!==a(this,O,"f")){e.writeInt(28n);e.writeInt(a(this,O,"f"))}if(void 0!==a(this,B,"f")){e.writeInt(29n);e.writeInt(a(this,B,"f"))}if(void 0!==a(this,D,"f")){e.writeInt(30n);e.writeInt(a(this,D,"f"))}if(void 0!==a(this,N,"f")){e.writeInt(31n);e.writeInt(a(this,N,"f"))}if(void 0!==a(this,F,"f")){e.writeInt(32n);e.writeInt(a(this,F,"f"))}if(void 0!==a(this,H,"f")){e.writeInt(33n);e.writeEncodedValue(s.from(a(this,H,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new K.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==K.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:o(r,n,t.readInt(),"f");break;case 1n:o(r,d,t.readInt(),"f");break;case 2n:o(r,c,Number(t.readInt()),"f");break;case 3n:o(r,l,Number(t.readInt()),"f");break;case 4n:o(r,u,Number(t.readInt()),"f");break;case 5n:o(r,f,t.readInt(),"f");break;case 6n:o(r,p,t.readInt(),"f");break;case 7n:o(r,h,Number(t.readInt()),"f");break;case 8n:o(r,m,Number(t.readInt()),"f");break;case 9n:o(r,v,$.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:o(r,_,$.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:o(r,y,$.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:o(r,w,$.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();o(r,g,"","f");t.readEndArray()}else{t.readEncodedValue();o(r,g,q.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:o(r,b,$.ProtocolVersion.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:o(r,P,t.readInt(),"f");break;case 17n:o(r,S,t.readInt(),"f");break;case 18n:o(r,C,L.Costmdls.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:o(r,T,U.ExUnitPrices.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:o(r,k,$.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:o(r,A,$.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:o(r,E,Number(t.readInt()),"f");break;case 23n:o(r,j,Number(t.readInt()),"f");break;case 24n:o(r,I,Number(t.readInt()),"f");break;case 25n:o(r,x,Y.PoolVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:o(r,R,W.DrepVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:o(r,M,Number(t.readInt()),"f");break;case 28n:o(r,O,Number(t.readInt()),"f");break;case 29n:o(r,B,Number(t.readInt()),"f");break;case 30n:o(r,D,Number(t.readInt()),"f");break;case 31n:o(r,N,Number(t.readInt()),"f");break;case 32n:o(r,F,Number(t.readInt()),"f");break;case 33n:o(r,H,$.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();o(r,G,e,"f");return r}toCore(){var e,t,r,s,o,i;const G={coinsPerUtxoByte:void 0!==a(this,S,"f")?Number(a(this,S,"f")):void 0,collateralPercentage:a(this,j,"f"),committeeTermLimit:void 0!==a(this,O,"f")?(0,z.EpochNo)(a(this,O,"f")):void 0,costModels:null===(e=a(this,C,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:a(this,N,"f"),dRepInactivityPeriod:void 0!==a(this,F,"f")?(0,z.EpochNo)(a(this,F,"f")):void 0,dRepVotingThresholds:null===(t=a(this,R,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:a(this,m,"f"),governanceActionDeposit:a(this,D,"f"),governanceActionValidityPeriod:void 0!==a(this,B,"f")?(0,z.EpochNo)(a(this,B,"f")):void 0,maxBlockBodySize:a(this,c,"f"),maxBlockHeaderSize:a(this,u,"f"),maxCollateralInputs:a(this,I,"f"),maxExecutionUnitsPerBlock:null===(r=a(this,A,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=a(this,k,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==a(this,l,"f")?Number(a(this,l,"f")):void 0,maxValueSize:a(this,E,"f"),minCommitteeSize:a(this,M,"f"),minFeeCoefficient:void 0!==a(this,n,"f")?Number(a(this,n,"f")):void 0,minFeeConstant:void 0!==a(this,d,"f")?Number(a(this,d,"f")):void 0,minFeeRefScriptCostPerByte:a(this,H,"f")?a(this,H,"f").toFloat().toString():void 0,minPoolCost:void 0!==a(this,P,"f")?Number(a(this,P,"f")):void 0,monetaryExpansion:a(this,_,"f")?a(this,_,"f").toFloat().toString():void 0,poolDeposit:void 0!==a(this,p,"f")?Number(a(this,p,"f")):void 0,poolInfluence:a(this,v,"f")?a(this,v,"f").toFloat().toString():void 0,poolRetirementEpochBound:a(this,h,"f"),poolVotingThresholds:null===(o=a(this,x,"f"))||void 0===o?void 0:o.toCore(),prices:null===(i=a(this,T,"f"))||void 0===i?void 0:i.toCore(),stakeKeyDeposit:void 0!==a(this,f,"f")?Number(a(this,f,"f")):void 0,treasuryExpansion:a(this,y,"f")?a(this,y,"f").toFloat().toString():void 0};if(a(this,w,"f"))G.decentralizationParameter=a(this,w,"f").toFloat().toString();if(void 0!==a(this,g,"f"))G.extraEntropy=a(this,g,"f");if(a(this,b,"f"))G.protocolVersion=a(this,b,"f").toCore();return G}static fromCore(e){const t=new ProtocolParamUpdate;o(t,n,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");o(t,c,e.maxBlockBodySize,"f");o(t,d,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");o(t,u,e.maxBlockHeaderSize,"f");o(t,f,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");o(t,p,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");o(t,h,e.poolRetirementEpochBound,"f");o(t,m,e.desiredNumberOfPools,"f");o(t,v,e.poolInfluence?$.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");o(t,_,e.monetaryExpansion?$.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");o(t,y,e.treasuryExpansion?$.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");o(t,P,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");o(t,E,e.maxValueSize,"f");o(t,l,e.maxTxSize,"f");o(t,j,e.collateralPercentage,"f");o(t,I,e.maxCollateralInputs,"f");o(t,C,e.costModels?L.Costmdls.fromCore(e.costModels):void 0,"f");o(t,T,e.prices?U.ExUnitPrices.fromCore(e.prices):void 0,"f");o(t,k,e.maxExecutionUnitsPerTransaction?$.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");o(t,A,e.maxExecutionUnitsPerBlock?$.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");o(t,S,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");o(t,x,e.poolVotingThresholds?Y.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");o(t,R,e.dRepVotingThresholds?W.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");o(t,M,e.minCommitteeSize,"f");o(t,O,e.committeeTermLimit,"f");o(t,B,e.governanceActionValidityPeriod,"f");o(t,D,e.governanceActionDeposit,"f");o(t,N,e.dRepDeposit,"f");o(t,F,e.dRepInactivityPeriod,"f");o(t,H,e.minFeeRefScriptCostPerByte?$.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:a}=e;if(void 0!==r||void 0!==s||a){o(t,w,a?$.UnitInterval.fromFloat(Number(a)):void 0,"f");o(t,b,r?$.ProtocolVersion.fromCore(r):void 0,"f");o(t,g,s?(0,q.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){o(this,n,e,"f")}minFeeA(){return a(this,n,"f")}setMinFeeB(e){o(this,d,e,"f");o(this,G,void 0,"f")}minFeeB(){return a(this,d,"f")}setMaxBlockBodySize(e){o(this,c,e,"f");o(this,G,void 0,"f")}maxBlockBodySize(){return a(this,c,"f")}setMaxTxSize(e){o(this,l,e,"f");o(this,G,void 0,"f")}maxTxSize(){return a(this,l,"f")}setMaxBlockHeaderSize(e){o(this,u,e,"f");o(this,G,void 0,"f")}maxBlockHeaderSize(){return a(this,u,"f")}setKeyDeposit(e){o(this,f,e,"f");o(this,G,void 0,"f")}keyDeposit(){return a(this,f,"f")}setPoolDeposit(e){o(this,p,e,"f");o(this,G,void 0,"f")}poolDeposit(){return a(this,p,"f")}setMaxEpoch(e){o(this,h,e,"f");o(this,G,void 0,"f")}maxEpoch(){return a(this,h,"f")}setNOpt(e){o(this,m,e,"f");o(this,G,void 0,"f")}nOpt(){return a(this,m,"f")}setPoolPledgeInfluence(e){o(this,v,e,"f");o(this,G,void 0,"f")}poolPledgeInfluence(){return a(this,v,"f")}setExpansionRate(e){o(this,_,e,"f");o(this,G,void 0,"f")}expansionRate(){return a(this,_,"f")}setTreasuryGrowthRate(e){o(this,y,e,"f");o(this,G,void 0,"f")}treasuryGrowthRate(){return a(this,y,"f")}setD(e){o(this,w,e,"f");o(this,G,void 0,"f")}d(){return a(this,w,"f")}setExtraEntropy(e){o(this,g,e,"f");o(this,G,void 0,"f")}extraEntropy(){return a(this,g,"f")}setProtocolVersion(e){o(this,b,e,"f");o(this,G,void 0,"f")}protocolVersion(){return a(this,b,"f")}setMinPoolCost(e){o(this,P,e,"f");o(this,G,void 0,"f")}minPoolCost(){return a(this,P,"f")}setAdaPerUtxoByte(e){o(this,S,e,"f");o(this,G,void 0,"f")}adaPerUtxoByte(){return a(this,S,"f")}setCostModels(e){o(this,C,e,"f");o(this,G,void 0,"f")}costModels(){return a(this,C,"f")}setExecutionCosts(e){o(this,T,e,"f");o(this,G,void 0,"f")}executionCosts(){return a(this,T,"f")}setMaxTxExUnits(e){o(this,k,e,"f");o(this,G,void 0,"f")}maxTxExUnits(){return a(this,k,"f")}setMaxBlockExUnits(e){o(this,A,e,"f");o(this,G,void 0,"f")}maxBlockExUnits(){return a(this,A,"f")}setMaxValueSize(e){o(this,E,e,"f");o(this,G,void 0,"f")}maxValueSize(){return a(this,E,"f")}setCollateralPercentage(e){o(this,j,e,"f");o(this,G,void 0,"f")}collateralPercentage(){return a(this,j,"f")}setMaxCollateralInputs(e){o(this,I,e,"f");o(this,G,void 0,"f")}maxCollateralInputs(){return a(this,I,"f")}setPoolVotingThresholds(e){o(this,x,e,"f");o(this,G,void 0,"f")}poolVotingThresholds(){return a(this,x,"f")}setDrepVotingThresholds(e){o(this,R,e,"f");o(this,G,void 0,"f")}drepVotingThresholds(){return a(this,R,"f")}setMinCommitteeSize(e){o(this,M,e,"f");o(this,G,void 0,"f")}minCommitteeSize(){return a(this,M,"f")}setCommitteeTermLimit(e){o(this,O,e,"f");o(this,G,void 0,"f")}committeeTermLimit(){return a(this,O,"f")}setGovernanceActionValidityPeriod(e){o(this,B,e,"f");o(this,G,void 0,"f")}governanceActionValidityPeriod(){return a(this,B,"f")}setGovernanceActionDeposit(e){o(this,D,e,"f");o(this,G,void 0,"f")}governanceActionDeposit(){return a(this,D,"f")}setDrepDeposit(e){o(this,N,e,"f");o(this,G,void 0,"f")}drepDeposit(){return a(this,N,"f")}setDrepInactivityPeriod(e){o(this,F,e,"f");o(this,G,void 0,"f")}drepInactivityPeriod(){return a(this,F,"f")}minFeeRefScriptCostPerByte(){return a(this,H,"f")}constructor(){i.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);R.set(this,void 0);M.set(this,void 0);O.set(this,void 0);B.set(this,void 0);D.set(this,void 0);N.set(this,void 0);F.set(this,void 0);H.set(this,void 0);G.set(this,void 0)}}t.ProtocolParamUpdate=ProtocolParamUpdate;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,O=new WeakMap,B=new WeakMap,D=new WeakMap,N=new WeakMap,F=new WeakMap,H=new WeakMap,G=new WeakMap,i=new WeakSet,V=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==a(this,n,"f"))++e;if(void 0!==a(this,d,"f"))++e;if(void 0!==a(this,c,"f"))++e;if(void 0!==a(this,l,"f"))++e;if(void 0!==a(this,u,"f"))++e;if(void 0!==a(this,f,"f"))++e;if(void 0!==a(this,p,"f"))++e;if(void 0!==a(this,h,"f"))++e;if(void 0!==a(this,m,"f"))++e;if(void 0!==a(this,v,"f"))++e;if(void 0!==a(this,_,"f"))++e;if(void 0!==a(this,y,"f"))++e;if(void 0!==a(this,w,"f"))++e;if(void 0!==a(this,g,"f"))++e;if(void 0!==a(this,b,"f"))++e;if(void 0!==a(this,P,"f"))++e;if(void 0!==a(this,S,"f"))++e;if(void 0!==a(this,C,"f"))++e;if(void 0!==a(this,T,"f"))++e;if(void 0!==a(this,k,"f"))++e;if(void 0!==a(this,A,"f"))++e;if(void 0!==a(this,E,"f"))++e;if(void 0!==a(this,j,"f"))++e;if(void 0!==a(this,I,"f"))++e;if(void 0!==a(this,x,"f"))++e;if(void 0!==a(this,R,"f"))++e;if(void 0!==a(this,M,"f"))++e;if(void 0!==a(this,O,"f"))++e;if(void 0!==a(this,B,"f"))++e;if(void 0!==a(this,D,"f"))++e;if(void 0!==a(this,N,"f"))++e;if(void 0!==a(this,F,"f"))++e;if(void 0!==a(this,H,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Update=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js");const p=2;class Update{toCbor(){const e=new c.CborWriter;if(o(this,d,"f"))return o(this,d,"f");e.writeStartArray(p);e.writeEncodedValue(s.from(o(this,n,"f").toCbor(),"hex"));e.writeInt(o(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==p)throw new u.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=f.ProposedProtocolParameterUpdates.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const o=t.readInt();t.readEndArray();const i=new Update(s,(0,l.EpochNo)(Number(o)));a(i,d,e,"f");return i}toCore(){return{epoch:o(this,i,"f"),proposedProtocolParameterUpdates:o(this,n,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=f.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return o(this,i,"f")}setEpoch(e){a(this,i,e,"f");a(this,d,void 0,"f")}proposedProtocolParameterUpdates(){return o(this,n,"f")}setProposedProtocolParameterUpdates(e){a(this,n,e,"f");a(this,d,void 0,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,i,t,"f");a(this,n,e,"f")}}t.Update=Update;i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/const.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HD_WALLET_CIP_ID=t.MULTISIG_CIP_ID=void 0;t.MULTISIG_CIP_ID=1854;t.HD_WALLET_CIP_ID=1852},"../../node_modules/@cardano-sdk/core/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeoutError=t.NotImplementedError=t.InvalidProtocolParametersError=t.SerializationError=t.SerializationFailure=t.HandleOwnerChangeError=t.ProviderError=t.reasonToProviderFailure=t.statusCodeMapToProviderFailure=t.providerFailureToStatusCodeMap=t.ProviderFailure=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var o;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(o=t.ProviderFailure||(t.ProviderFailure={}));t.providerFailureToStatusCodeMap={[o.BadRequest]:400,[o.Forbidden]:403,[o.NotFound]:404,[o.Conflict]:409,[o.Unhealthy]:500,[o.Unknown]:500,[o.InvalidResponse]:500,[o.NotImplemented]:500,[o.ConnectionFailure]:500,[o.ServerUnavailable]:500};t.statusCodeMapToProviderFailure=new Map(Object.entries(t.providerFailureToStatusCodeMap).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(o).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:o.Unknown;t.reasonToProviderFailure=reasonToProviderFailure;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}t.ProviderError=ProviderError;class HandleOwnerChangeError extends a.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}t.HandleOwnerChangeError=HandleOwnerChangeError;var i;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(i=t.SerializationFailure||(t.SerializationFailure={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}t.SerializationError=SerializationError;class InvalidProtocolParametersError extends a.CustomError{constructor(e){super(e)}}t.InvalidProtocolParametersError=InvalidProtocolParametersError;class NotImplementedError extends a.CustomError{constructor(e){super(`Not implemented: ${e}`)}}t.NotImplementedError=NotImplementedError;class TimeoutError extends a.CustomError{constructor(e){super(`Timeout: ${e}`)}}t.TimeoutError=TimeoutError},"../../node_modules/@cardano-sdk/core/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.Serialization=t.Cardano=t.Asset=void 0;t.Asset=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js"));t.Cardano=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js"));t.Serialization=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/const.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.calculateStabilityWindowSlotsCount=void 0;const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;t.calculateStabilityWindowSlotsCount=calculateStabilityWindowSlotsCount},"../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.coalesceValueQuantities=void 0;const i=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceValueQuantities=e=>({assets:i.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:n.BigIntMath.sum(e.map(({coins:e})=>e))});t.coalesceValueQuantities=coalesceValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setInConwayEra=t.inConwayEra=void 0;t.inConwayEra=false;const setInConwayEra=e=>t.inConwayEra=e;t.setInConwayEra=setInConwayEra},"../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.metadatum=t.util=void 0;t.util=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js"),t);t.metadatum=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.metadatumToJson=t.jsonToMetadatum=t.asMetadatumArray=t.asMetadatumMap=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};t.asMetadatumMap=asMetadatumMap;const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};t.asMetadatumArray=asMetadatumArray;const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const r=[];for(const a of e)r.push((0,t.jsonToMetadatum)(a));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const o=new Map;for(const i in e){const n=e[i];o.set((0,t.jsonToMetadatum)(i),(0,t.jsonToMetadatum)(n))}return o}}};t.jsonToMetadatum=jsonToMetadatum;const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const r=[];for(const a of e)r.push((0,t.metadatumToJson)(a));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const o={};for(const[i,n]of e.entries())o[(0,t.metadatumToJson)(i)]=(0,t.metadatumToJson)(n);return o}}};t.metadatumToJson=metadatumToJson},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.utf8ToHex=t.utf8ToBytes=t.hexToBytes=t.bytesToHex=void 0;const bytesToHex=e=>s.from(e).toString("hex");t.bytesToHex=bytesToHex;const hexToBytes=e=>s.from(e,"hex");t.hexToBytes=hexToBytes;const utf8ToBytes=e=>s.from(e,"utf8");t.utf8ToBytes=utf8ToBytes;const utf8ToHex=e=>s.from(e,"utf8").toString("hex");t.utf8ToHex=utf8ToHex},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.jsonToNativeScript=t.nativeScriptPolicyId=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const nativeScriptPolicyId=e=>(0,c.PolicyId)(n.NativeScript.fromCore(e).hash());t.nativeScriptPolicyId=nativeScriptPolicyId;const jsonToNativeScript=e=>{let r;if(!e.type){throw new l.SerializationError(l.SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":r={__type:d.ScriptType.Native,keyHash:i.Ed25519KeyHashHex(e.keyHash),kind:d.NativeScriptKind.RequireSignature};break;case"all":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAllOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[s]));break;case"any":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAnyOf,scripts:new Array};for(let a=0;a<e.scripts.length;++a)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[a]));break;case"atLeast":{const o=Number.parseInt(e.required);r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireNOf,required:o,scripts:new Array};for(let n=0;n<e.scripts.length;++n)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[n]));break}case"before":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeBefore,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;case"after":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeAfter,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;default:throw new l.SerializationError(l.SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return r};t.jsonToNativeScript=jsonToNativeScript},"../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.promiseTimeout=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const promiseTimeout=(e,t)=>{let r;return Promise.race([e,new Promise((e,a)=>r=setTimeout(()=>a(new s.TimeoutError("Failed to resolve the promise in time")),t))]).finally(()=>{if(r)clearTimeout(r)})};t.promiseTimeout=promiseTimeout},"../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.epochSlotsCalcFactory=t.epochSlotsCalc=t.createSlotEpochInfoCalc=t.createSlotTimeCalc=t.createSlotEpochCalc=t.EraSummaryError=void 0;const a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const i=s(r("../../node_modules/lodash/groupBy.js"));const n=s(r("../../node_modules/lodash/last.js"));const d=s(r("../../node_modules/lodash/memoize.js"));const c=s(r("../../node_modules/lodash/orderBy.js"));class EraSummaryError extends a.CustomError{}t.EraSummaryError=EraSummaryError;const createSlotEpochCalcImpl=e=>{const t=Object.values((0,i.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot);return e=>{const t=(0,c.default)(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let a;for(let o=0;o<t.length;o++){a=t[o];const i=t[o+1];s+=Math.floor((((null==i?void 0:i.start.slot)||e)-a.start.slot)/a.parameters.epochLength)}return{epochEraSummary:a,epochNo:s}}};t.createSlotEpochCalc=(0,d.default)(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,o.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values((0,i.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};t.createSlotTimeCalc=createSlotTimeCalc;const createSlotEpochInfoCalc=e=>{const r=(0,t.createSlotTimeCalc)(e);const s=createSlotEpochCalcImpl(e);return e=>{const{epochNo:t,epochEraSummary:a}=s(e);const i=a.start.slot+Math.floor((e-a.start.slot)/a.parameters.epochLength)*a.parameters.epochLength;const n=i+a.parameters.epochLength-1;return{epochNo:(0,o.EpochNo)(t),firstSlot:{date:r((0,o.Slot)(i)),slot:(0,o.Slot)(i)},lastSlot:{date:r((0,o.Slot)(n)),slot:(0,o.Slot)(n)}}}};t.createSlotEpochInfoCalc=createSlotEpochInfoCalc;const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let a=0;const i=t.length-1;const checkNextEraSummary=()=>a<i&&s>=t[a+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())a++};findNextEraSummary();while(r!==e){s+=t[a].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[a];return{eraSummary:n,firstSlot:(0,o.Slot)(s),lastSlot:(0,o.Slot)(s+n.parameters.epochLength-1)}};t.epochSlotsCalc=(0,d.default)(epochSlotsCalcImplementation);t.epochSlotsCalcFactory=(0,d.default)(e=>(0,d.default)(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.subtractValueQuantities=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js");const subtractValueQuantities=e=>({assets:a.util.subtractTokenMaps(e.map(({assets:e})=>e)),coins:s.BigIntMath.subtract(e.map(({coins:e})=>e))});t.subtractValueQuantities=subtractValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeSpan=t.Days=t.Hours=t.Minutes=t.Seconds=t.Milliseconds=void 0;const Milliseconds=e=>e;t.Milliseconds=Milliseconds;const Seconds=e=>e;t.Seconds=Seconds;const Minutes=e=>e;t.Minutes=Minutes;const Hours=e=>e;t.Hours=Hours;const Days=e=>e;t.Days=Days;t.Hours.toDays=e=>e/24;t.Days.toHours=e=>24*e;t.Minutes.toHours=e=>e/60;t.Hours.toMinutes=e=>60*e;t.Seconds.toMinutes=e=>e/60;t.Minutes.toSeconds=e=>60*e;t.Seconds.toMilliseconds=e=>1e3*e;t.Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(t.Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(t.Hours.toMinutes(e))))}getTotalDays(){return t.Hours.toDays(this.getTotalHours())}getTotalHours(){return t.Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return t.Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return t.Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return(0,t.Days)(Math.floor(this.getTotalDays()))}getHours(){return(0,t.Hours)(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return(0,t.Minutes)(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return(0,t.Seconds)(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return(0,t.Milliseconds)(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=(0,t.Milliseconds)(0);this.elapsed=e}}t.TimeSpan=TimeSpan},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.tokenTransferInspector=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const l=s(r("../../node_modules/lodash/uniq.js"));const coalesceByAddress=e=>{const t=e.reduce((e,t)=>{var r;if(!e.has(t.address))e.set(t.address,[]);null===(r=e.get(t.address))||void 0===r?void 0:r.push(t);return e},new Map);const r=new Map;for(const[s,a]of t)r.set(s,(0,i.coalesceValueQuantities)(a.map(e=>e.value)));return r};const initializeAddressMap=e=>new Map(e.map(e=>[e,{assets:new Map,coins:0n}]));const updateFromAddressMap=(e,t,r)=>{var s;if(r.coins<0n)e.get(t).coins=r.coins;var a;for(const[o,i]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(i<0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(o,i)}};const updateToAddressMap=(e,t,r)=>{var s;if(r.coins>0n)e.get(t).coins=r.coins;var a;for(const[o,i]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(i>0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(o,i)}};const computeNetDifferences=(e,t,r,s)=>{for(const[a,o]of e.entries()){var i;const n=null!==(i=t.get(a))&&void 0!==i?i:{assets:new Map,coins:0n};const c=(0,d.subtractValueQuantities)([n,o]);updateFromAddressMap(r,a,c);updateToAddressMap(s,a,c)}for(const[l,u]of t.entries())if(!e.has(l))updateToAddressMap(s,l,u)};const removeZeroBalanceEntries=e=>{for(const[t,r]of e.entries()){var s;if(0n===r.coins&&(null===(s=r.assets)||void 0===s?void 0:s.size)===0)e.delete(t)}};const intoTokenTransferValue=async({logger:e,assetProvider:t,timeout:r,addressMap:s})=>{const a=new Map;for(const[o,i]of s.entries()){const n=i.coins;const d=(0,l.default)(i.assets&&i.assets.size>0?[...i.assets.keys()]:[]);const u=new Map;if(d.length>0){const f=await (0,c.tryGetAssetInfos)({assetIds:d,assetProvider:t,logger:e,timeout:r});for(const p of f){var h;var m;const v=null!==(m=null===(h=i.assets)||void 0===h?void 0:h.get(p.assetId))&&void 0!==m?m:0n;u.set(p.assetId,{amount:v,assetInfo:p})}}a.set(o,{assets:u,coins:n})}return a};const tokenTransferInspector=({inputResolver:e,fromAddressAssetProvider:t,toAddressAssetProvider:r,timeout:s,logger:i})=>async d=>{let c;try{const u=await (0,n.promiseTimeout)((0,a.resolveInputs)(d.body.inputs,e),s);c=u.resolvedInputs}catch(f){if(f instanceof o.TimeoutError)i.error("Error: Inputs resolution timed out");c=[]}const p=coalesceByAddress(c);const h=coalesceByAddress(d.body.outputs);const m=(0,l.default)([...p.keys(),...h.keys()]);const v=initializeAddressMap(m);const _=initializeAddressMap(m);computeNetDifferences(p,h,v,_);removeZeroBalanceEntries(v);removeZeroBalanceEntries(_);return{fromAddress:await intoTokenTransferValue({addressMap:v,assetProvider:t,logger:i,timeout:s}),toAddress:await intoTokenTransferValue({addressMap:_,assetProvider:r,logger:i,timeout:s})}};t.tokenTransferInspector=tokenTransferInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.transactionSummaryInspector=t.getCollateral=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const getCollateral=async(e,t,r)=>{if(!e.body.collaterals||0===e.body.collaterals.length)return 0n;const s=(await (0,a.resolveInputs)(e.body.collaterals,t)).resolvedInputs.filter(e=>r.includes(e.address));const i=o.BigIntMath.sum(s.map(({value:e})=>e.coins));if(e.body.collateralReturn){if(!r.includes(e.body.collateralReturn.address))return i;var n;return null!==(n=o.BigIntMath.max([i-e.body.collateralReturn.value.coins,0n]))&&void 0!==n?n:0n}return i};t.getCollateral=getCollateral;const totalInputsValue=e=>{const t=e.resolvedInputs.map(e=>e.value);return(0,d.coalesceValueQuantities)(t)};const totalOutputsValue=e=>(0,d.coalesceValueQuantities)(e.map(e=>e.value));const mintInspectionToTokenMap=e=>new Map(e.map(e=>[s.AssetId.fromParts(e.policyId,e.assetName),e.quantity]));const getImplicitAssets=async e=>{const t=mintInspectionToTokenMap(await (0,a.assetsMintedInspector)(e));const r=mintInspectionToTokenMap(await (0,a.assetsBurnedInspector)(e));return(0,n.coalesceTokenMaps)([t,r])};const getUnaccountedFunds=async(e,t,r,s,a=new Map)=>{const o=totalInputsValue(t);const i=totalOutputsValue(e.body.outputs);o.assets=(0,n.coalesceTokenMaps)([o.assets,a]);o.coins+=r;i.coins+=s;return(0,u.subtractValueQuantities)([i,o])};const intoAssetInfoWithAmount=async({assetProvider:e,logger:t,timeout:r,tokenMap:s})=>{if(!s)return new Map;const a=s&&s.size>0?[...s.keys()]:[];const o=new Map;if(a.length>0){const i=await (0,f.tryGetAssetInfos)({assetIds:a,assetProvider:e,logger:t,timeout:r});for(const n of i){var d;const c=null!==(d=null==s?void 0:s.get(n.assetId))&&void 0!==d?d:0n;o.set(n.assetId,{amount:c,assetInfo:n})}}return o};const transactionSummaryInspector=({inputResolver:e,addresses:r,rewardAccounts:s,protocolParameters:o,assetProvider:d,dRepKeyHash:u,timeout:f,logger:p})=>async h=>{let m;try{m=await (0,l.promiseTimeout)((0,a.resolveInputs)(h.body.inputs,e),f)}catch(v){if(v instanceof i.TimeoutError)p.error("Error: Inputs resolution timed out");m={resolvedInputs:[],unresolvedInputs:h.body.inputs}}const _=h.body.fee;const y=(0,c.computeImplicitCoin)(o,{certificates:h.body.certificates,withdrawals:h.body.withdrawals},s||[],u);const w=await (0,t.getCollateral)(h,e,r);const g=y.withdrawals||0n;const b=await (0,a.totalAddressOutputsValueInspector)(r)(h);const P=await (0,a.totalAddressInputsValueInspector)(r,e)(h);const S=g+(y.reclaimDeposit||0n)-(y.deposit||0n);const C=await getImplicitAssets(h);const T={assets:(0,n.subtractTokenMaps)([b.assets,P.assets]),coins:b.coins-(P.coins+g)};return{assets:await intoAssetInfoWithAmount({assetProvider:d,logger:p,timeout:f,tokenMap:T.assets}),coins:T.coins,collateral:w,deposit:y.deposit||0n,fee:_,returnedDeposit:y.reclaimDeposit||0n,unresolved:{inputs:m.unresolvedInputs,value:await getUnaccountedFunds(h,m,S,_,C)}}};t.transactionSummaryInspector=transactionSummaryInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryGetAssetInfos=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const tryGetAssetInfos=async({assetIds:e,assetProvider:t,logger:r,timeout:o})=>{try{return await (0,a.promiseTimeout)(t.getAssets({assetIds:e,extraData:{nftMetadata:true,tokenMetadata:true}}),o)}catch(i){r.error("Error: Failed to retrieve assets",i);return e.map(e=>{const t=s.AssetId.getPolicyId(e);const r=s.AssetId.getAssetName(e);return{assetId:e,fingerprint:s.AssetFingerprint.fromParts(t,r),name:r,policyId:t,quantity:0n,supply:0n}})}};t.tryGetAssetInfos=tryGetAssetInfos},"../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createTxInspector=t.metadataInspector=t.assetsBurnedInspector=t.assetsMintedInspector=t.mintInspector=t.withdrawalInspector=t.poolRetirementInspector=t.poolRegistrationInspector=t.stakeKeyRegistrationInspector=t.stakeKeyDeregistrationInspector=t.delegationInspector=t.valueReceivedInspector=t.valueSentInspector=t.sentInspector=t.signedCertificatesInspector=t.getCertificatesByType=t.totalAddressOutputsValueInspector=t.totalAddressInputsValueInspector=t.resolveInputs=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const resolveInputs=async(e,t)=>{const r=[];const s=[];for(const a of e){const o=await t.resolveInput(a);if(o)r.push({address:o.address,index:a.index,txId:a.txId,value:o.value});else s.push(a)}return{resolvedInputs:r,unresolvedInputs:s}};t.resolveInputs=resolveInputs;const totalAddressInputsValueInspector=(e,r)=>async s=>{const{resolvedInputs:a}=await (0,t.resolveInputs)(s.body.inputs,r);const n=a.filter(t=>(0,o.isAddressWithin)(e)(t));const d=n.map(e=>e.value);return(0,i.coalesceValueQuantities)(d)};t.totalAddressInputsValueInspector=totalAddressInputsValueInspector;const totalAddressOutputsValueInspector=e=>async t=>{const r=t.body.outputs.filter(t=>(0,o.isAddressWithin)(e)(t));return(0,i.coalesceValueQuantities)(r.map(e=>e.value))};t.totalAddressOutputsValueInspector=totalAddressOutputsValueInspector;const getCertificatesByType=(e,t,r)=>{var a;if(!e.body.certificates||0===e.body.certificates.length)return[];const i=r?null===(a=e.body.certificates)||void 0===a?void 0:a.filter(e=>(0,s.isCertType)(e,r)):e.body.certificates;return i.filter(e=>{if((0,s.isCertType)(e,s.StakeCredentialCertificateTypes)){return t.some(t=>o.RewardAccount.toHash(t)===e.stakeCredential.hash)}if((0,s.isCertType)(e,[s.CertificateType.PoolRegistration]))return t.includes(e.poolParameters.rewardAccount);return false})};t.getCertificatesByType=getCertificatesByType;const signedCertificatesInspector=(e,r)=>async s=>(0,t.getCertificatesByType)(s,e,r);t.signedCertificatesInspector=signedCertificatesInspector;const sentInspector=({addresses:e,rewardAccounts:r,inputResolver:s})=>{return async a=>{const i=(null==r?void 0:r.length)?await (0,t.signedCertificatesInspector)(r)(a):[];let n=[];if(e){const{resolvedInputs:d}=await (0,t.resolveInputs)(a.body.inputs,s);const c=d.filter(t=>(0,o.isAddressWithin)(e)(t));n=c.map(e=>({address:e.address,index:e.index,txId:e.txId}))}return{certificates:i,inputs:n}}};t.sentInspector=sentInspector;const valueSentInspector=(e,r)=>async s=>{let a=new Map;if(0===(await (0,t.sentInspector)({addresses:e,inputResolver:r})(s)).inputs.length)return{coins:0n};const o=await (0,t.totalAddressOutputsValueInspector)(e)(s);const i=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([i,o]);if(n.assets)a=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:a.size>0?a:void 0,coins:n.coins<0n?0n:n.coins}};t.valueSentInspector=valueSentInspector;const valueReceivedInspector=(e,r)=>async s=>{let a=new Map;const o=await (0,t.totalAddressOutputsValueInspector)(e)(s);const i=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([o,i]);if(n.assets)a=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:a.size>0?a:void 0,coins:n.coins<0n?0n:n.coins}};t.valueReceivedInspector=valueReceivedInspector;var l;const certificateInspector=e=>{return async t=>{var r;return null!==(l=null===(r=t.body.certificates)||void 0===r?void 0:r.filter(t=>t.__typename===e))&&void 0!==l?l:[]}};t.delegationInspector=certificateInspector(s.CertificateType.StakeDelegation);t.stakeKeyDeregistrationInspector=certificateInspector(s.CertificateType.StakeDeregistration);t.stakeKeyRegistrationInspector=certificateInspector(s.CertificateType.StakeRegistration);t.poolRegistrationInspector=certificateInspector(s.CertificateType.PoolRegistration);t.poolRetirementInspector=certificateInspector(s.CertificateType.PoolRetirement);const withdrawalInspector=async e=>{var t;return(null===(t=e.body.withdrawals)||void 0===t?void 0:t.length)?a.BigIntMath.sum(e.body.withdrawals.map(({quantity:e})=>e)):0n};t.withdrawalInspector=withdrawalInspector;const mintInspector=e=>{return async t=>{var r,a;const o=[];const i=new Map;if(!t.body.mint)return o;const d=[...(null===(r=t.auxiliaryData)||void 0===r?void 0:r.scripts)||[],...(null===(a=t.witness)||void 0===a?void 0:a.scripts)||[]];for(const c of d){switch(c.__type){case s.ScriptType.Native:{const l=(0,n.nativeScriptPolicyId)(c);if(i.has(l))continue;i.set(l,c);break}case s.ScriptType.Plutus:default:}}for(const[u,f]of t.body.mint.entries()){const[p,h]=[s.AssetId.getPolicyId(u),s.AssetId.getAssetName(u)];const m={assetName:h,fingerprint:s.AssetFingerprint.fromParts(p,h),policyId:p,quantity:f,script:i.get(p)};if(e(m.quantity))o.push(m)}return o}};t.mintInspector=mintInspector;t.assetsMintedInspector=(0,t.mintInspector)(e=>e>0);t.assetsBurnedInspector=(0,t.mintInspector)(e=>e<0);var u;const metadataInspector=async e=>{var t;return null!==(u=null===(t=e.auxiliaryData)||void 0===t?void 0:t.blob)&&void 0!==u?u:new Map};t.metadataInspector=metadataInspector;const createTxInspector=e=>async t=>{const r=await Promise.all(Object.entries(e).map(async([e,r])=>{const s=await r(t);return{key:e,result:s}}));return r.reduce((e,{key:t,result:r})=>{e[t]=r;return e},{})};t.createTxInspector=createTxInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createUtxoId=void 0;const createUtxoId=(e,t)=>`${e}:${t}`;t.createUtxoId=createUtxoId},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/index.js":(e,t,r)=>{"use strict";r.d(t,{ImageMediaType:()=>a.ImageMediaType,InvalidFileError:()=>InvalidFileError,MediaType:()=>a.MediaType,NftMetadata:()=>p,Uri:()=>a.Uri});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var o=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends o.CustomError{}var i=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");const asString=e=>"string"==typeof e?e:void 0;var n=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var d=r("../../node_modules/lodash/difference.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];const isString=e=>"string"==typeof e;const l=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(asString);if(t.some(e=>void 0===e)){return}return t.join("")}return asString(e)};const mapOtherProperties=(e,t)=>{const r=d([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,i.asMetadatumMap)(e);if(!s)throw new InvalidFileError;const o=asString(s.get("name"));const n=asString(s.get("mediaType"));if(!n){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const d=metadatumToString(s.get("src"));if(!d){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,a.MediaType)(n),name:o,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,a.Uri)(d)}};const getPolicyMetadata=(e,t)=>(0,i.asMetadatumMap)(e.get(t)||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&c.from(r).toString("hex")===t)return s})());const getAssetMetadata=(e,t)=>(0,i.asMetadatumMap)(e.get(t)||e.get(c.from(t,"hex").toString("utf8"))||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&c.from(r).toString("hex")===t)return s})());const getName=(e,t,r,a,o=false)=>{const i=asString(e.get("name"));if(i)return i;if("1.0"===t){try{return s.AssetName.toUTF8(r.name,o)}catch(n){a.warn(n)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=asString(e);if(t&&l.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,o=false)=>{const d=null==t?void 0:t.get(721n);if(!d)return null;const c=(0,i.asMetadatumMap)(d);if(!c)return null;const l=getPolicyMetadata(c,e.policyId);if(!l)return null;const u=parseVersion(l.get("version"));if(!u)return null;const f=getAssetMetadata(l,e.name);if(!f)return null;const p=getName(f,u,e,r,true);const h=metadatumToString(f.get("image"));const m=s.AssetId.fromParts(e.policyId,e.name);if(o&&!p||!h){r.warn(missingFieldLogMessage(p?"image":"name",m,true));return null}const v=asString(f.get("mediaType"));const _=(0,i.asMetadatumArray)(f.get("files"));try{return{description:metadatumToString(f.get("description")),files:null==_?void 0:_.map(e=>mapFile(e,m,r)).filter(n.isNotNil),image:(0,a.Uri)(h),mediaType:v?(0,a.ImageMediaType)(v):void 0,name:p||"",otherProperties:mapOtherProperties(f,["name","image","mediaType","description","files"]),version:u}}catch(y){r.warn("Invalid CIP-25 metadata",f,y);return null}};var u=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,f.isPlutusBigInt)(e)||(0,f.isPlutusBoundedBytes)(e))return e;if((0,f.isPlutusMap)(e)){const r=fromPlutusData_mapOtherProperties((0,f.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,f.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const fromPlutusData_mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const fromPlutusData_mapFile=(e,t)=>{if(!(0,f.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:s,name:o,...i}=(0,f.tryConvertPlutusMapToUtf8Record)(e,t);const n=tryCoerce(r,a.MediaType,t);const d=tryCoerce(s,a.Uri,t);if("string"!=typeof d||"string"!=typeof n){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:n,name:asString(o),otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(i,t)),src:d}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,f.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>fromPlutusData_mapFile(e,t)).filter(n.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const a=(0,f.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!a)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return a}});const fromPlutusData=(e,t,r=false)=>{const s=(0,u.contextLogger)(t,"NftMetadata.fromPlutusData");const o=getConditionalValidators(r,s);if(!o.isValidDatumShape(e)){return null}const[i,n]=e.fields.items;if(!(0,f.isPlutusMap)(i)||!(0,f.isPlutusBigInt)(n)){s.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const d=(0,f.tryConvertPlutusMapToUtf8Record)(i,s);const{name:c,image:l,mediaType:p,description:h,files:m,...v}=d;if(!o.isNameValid(c)){return null}if("string"!=typeof l){s.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const _=tryCoerce(l,a.Uri,s);if(!_){return null}return{description:asString(h),files:mapFiles(m,s),image:_,mediaType:tryCoerce(p,a.ImageMediaType,s),name:c||"",otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(v,s)),version:n.toString()}};const p={fromMetadatum:fromMetadatum,fromPlutusData:fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js":(e,t,r)=>{"use strict";r.d(t,{ImageMediaType:()=>ImageMediaType,MediaType:()=>MediaType,Uri:()=>Uri});var s=r("../../node_modules/@biglup/is-cid/dist/esm/index.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return s.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new a.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new a.InvalidStringError('Expected media type to be "image/*"')};const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new a.InvalidStringError('Expected media type to be "*/*"')}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js":(e,t,r)=>{"use strict";r.d(t,{AssetNameLabel:()=>AssetNameLabel,AssetNameLabelNum:()=>l});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");let o=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)o=new Int32Array(o);const crc8=(e,t=0)=>{let r=Math.trunc(t);for(const s of e)r=255&o[(r^s)&255];return r};const i=crc8;var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=8;const c="0";const AssetNameLabel=e=>e;const l={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new a.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>i(Uint8Array.from(n.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const t=e[0];const r=e[7];const s=e.slice(1,5);const a=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(t,r)||isInvalidChecksum(s,a)){return null}return AssetNameLabel(Number.parseInt(s,16))};AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const a=assetNameLabelHexToNum(t);if(null===a){return null}return{content:(0,s.AssetName)(r),label:a}};AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,s.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AssetNameLabel:()=>d.AssetNameLabel,AssetNameLabelNum:()=>d.AssetNameLabelNum,ImageMediaType:()=>c.ImageMediaType,InvalidFileError:()=>c.InvalidFileError,MediaType:()=>c.MediaType,NftMetadata:()=>c.NftMetadata,Uri:()=>c.Uri,util:()=>s});var s={};r.r(s);r.d(s,{coalesceTokenMaps:()=>a.coalesceTokenMaps,getAssetNameAsText:()=>n.getAssetNameAsText,isValidHandle:()=>i.isValidHandle,removeNegativesFromTokenMap:()=>removeNegativesFromTokenMap,subtractMaps:()=>o.subtractMaps,subtractTokenMaps:()=>o.subtractTokenMaps});var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/subtractTokenMaps.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/isValidHandle.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/index.js")},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";r.d(t,{coalesceTokenMaps:()=>coalesceTokenMaps});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[a,o]of r.entries()){const i=t.get(a)||0n;t.set(a,i+o)}}if(0===t.size){return}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";r.d(t,{getAssetNameAsText:()=>getAssetNameAsText});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const getAssetNameAsText=e=>{var t;const r=s.AssetId.getAssetName(e);const i=null===(t=a.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return o.from(i||r,"hex").toString("utf8")}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/isValidHandle.js":(e,t,r)=>{"use strict";r.d(t,{isValidHandle:()=>isValidHandle});const s=new RegExp(/^[a-z0-9_.-]{1,15}$/);const a=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{a.lastIndex=0;return s.test(e)||a.test(e)||"0|0"===e}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/subtractTokenMaps.js":(e,t,r)=>{"use strict";r.d(t,{subtractMaps:()=>subtractMaps,subtractTokenMaps:()=>subtractTokenMaps});var s=r("../../node_modules/lodash/uniq.js");const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[a,o]of e.entries())if(0n!==o)r.set(a,o);return r}if(!e){const i=new Map;for(const[n,d]of t.entries())if(0n!==d)i.set(n,-d);return i}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[p,h]of t.entries()){if(e.has(p)){l.push(p);continue}if(0n!==h)c.set(p,-h)}const m=s(l);for(const v of m){const _=e.get(v);const y=t.get(v);const w=_-y;if(0n!==w)c.set(v,w)}return c};const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(subtractMaps)}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js":(e,t,r)=>{"use strict";r.d(t,{Address:()=>Address,AddressType:()=>m,CredentialType:()=>v,isAddress:()=>isAddress});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p;const h=1023;var m;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(m||(m={}));var v;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(v||(v={}));class Address{static fromBytes(e){const t=f.from(e,"hex");const r=t[0]>>4;let s;switch(r){case m.BasePaymentKeyStakeKey:case m.BasePaymentScriptStakeKey:case m.BasePaymentKeyStakeScript:case m.BasePaymentScriptStakeScript:s=a.BaseAddress.unpackParts(r,t);break;case m.PointerKey:case m.PointerScript:s=l.PointerAddress.unpackParts(r,t);break;case m.EnterpriseKey:case m.EnterpriseScript:s=i.EnterpriseAddress.unpackParts(r,t);break;case m.RewardKey:case m.RewardScript:s=u.RewardAddress.unpackParts(r,t);break;case m.Byron:s=o.ByronAddress.unpackParts(r,t);break;default:throw new n.InvalidArgumentError("data","Invalid address raw data")}return s}toBytes(){let e;switch(__classPrivateFieldGet(this,p,"f").type){case m.BasePaymentKeyStakeKey:case m.BasePaymentScriptStakeKey:case m.BasePaymentKeyStakeScript:case m.BasePaymentScriptStakeScript:e=a.BaseAddress.packParts(__classPrivateFieldGet(this,p,"f"));break;case m.PointerKey:case m.PointerScript:e=l.PointerAddress.packParts(__classPrivateFieldGet(this,p,"f"));break;case m.EnterpriseKey:case m.EnterpriseScript:e=i.EnterpriseAddress.packParts(__classPrivateFieldGet(this,p,"f"));break;case m.RewardKey:case m.RewardScript:e=u.RewardAddress.packParts(__classPrivateFieldGet(this,p,"f"));break;case m.Byron:e=o.ByronAddress.packParts(__classPrivateFieldGet(this,p,"f"));break;default:throw new Error("Invalid address")}return d.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(d.HexBlob.fromBytes(s.base58.decode(e)))}toBase58(){if(__classPrivateFieldGet(this,p,"f").type!==m.Byron)throw new Error("Only Byron addresses will be encoded in base58");return s.base58.encode(f.from(this.toBytes(),"hex"))}toBech32(){const e=s.bech32.toWords(f.from(this.toBytes(),"hex"));if(__classPrivateFieldGet(this,p,"f").type===m.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(__classPrivateFieldGet(this,p,"f").type,__classPrivateFieldGet(this,p,"f").networkId);const r=s.bech32.encode(t,e,h);return __classPrivateFieldGet(this,p,"f").type===m.RewardKey||(__classPrivateFieldGet(this,p,"f").type,m.RewardScript),r}static fromBech32(e){const{words:t}=s.bech32.decode(e,h);return Address.fromBytes(d.HexBlob.fromBytes(s.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,d.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(__classPrivateFieldGet(t,p,"f").type!==m.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return o.ByronAddress.fromAddress(this)}asReward(){return u.RewardAddress.fromAddress(this)}asPointer(){return l.PointerAddress.fromAddress(this)}asEnterprise(){return i.EnterpriseAddress.fromAddress(this)}asBase(){return a.BaseAddress.fromAddress(this)}getType(){return __classPrivateFieldGet(this,p,"f").type}getNetworkId(){if(__classPrivateFieldGet(this,p,"f").type===m.Byron){var e;if((null===(e=__classPrivateFieldGet(this,p,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return c.NetworkId.Mainnet;return c.NetworkId.Testnet}return __classPrivateFieldGet(this,p,"f").networkId}getProps(){return __classPrivateFieldGet(this,p,"f")}static getBech32Prefix(e,t){let r="";switch(e){case m.BasePaymentKeyStakeKey:case m.BasePaymentScriptStakeKey:case m.BasePaymentKeyStakeScript:case m.BasePaymentScriptStakeScript:case m.PointerKey:case m.PointerScript:case m.EnterpriseKey:case m.EnterpriseScript:r="addr";break;case m.RewardKey:case m.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){p.set(this,void 0);__classPrivateFieldSet(this,p,e,"f")}}p=new WeakMap;const isAddress=e=>Address.isValid(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js":(e,t,r)=>{"use strict";r.d(t,{BaseAddress:()=>BaseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;class BaseAddress{static fromCredentials(e,t,r){let a=s.AddressType.BasePaymentKeyStakeKey;if(t.type===s.CredentialType.ScriptHash)a|=1;if(r.type===s.CredentialType.ScriptHash)a|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:a})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakeCredential(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({delegationPart:__classPrivateFieldGet(this,l,"f"),networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return i.concat([i.from([e.type<<4|e.networkId]),i.from(e.paymentPart.hash,"hex"),i.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new o.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(i.from(t.slice(1,29)).toString("hex"));const d=(0,a.Hash28ByteBase16)(i.from(t.slice(29,57)).toString("hex"));const c=e===s.AddressType.BasePaymentKeyStakeScript||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;const l=e===s.AddressType.BasePaymentScriptStakeKey||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;return new s.Address({delegationPart:{hash:d,type:c},networkId:r,paymentPart:{hash:n,type:l},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.delegationPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js":(e,t,r)=>{"use strict";r.d(t,{ByronAddress:()=>ByronAddress,ByronAddressType:()=>m});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h;var m;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(m||(m={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:s.AddressType.Byron})}getAttributes(){return __classPrivateFieldGet(this,h,"f").attrs}getRoot(){return __classPrivateFieldGet(this,h,"f").root}getByronAddressType(){return __classPrivateFieldGet(this,h,"f").type}toAddress(){return new s.Address({byronAddressContent:__classPrivateFieldGet(this,h,"f"),type:__classPrivateFieldGet(this,p,"f")})}static fromAddress(e){return e.getProps().type===s.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:s}=e.byronAddressContent;let i=0;if(r.derivationPath)++i;if(r.magic)++i;const n=new a.CborWriter;n.writeStartArray(3);n.writeByteString(f.from(t,"hex"));n.writeStartMap(i);if(r.derivationPath){const d=new a.CborWriter().writeByteString(f.from(r.derivationPath,"hex")).encode();n.writeInt(1);n.writeByteString(d)}if(r.magic){const c=new a.CborWriter().writeInt(r.magic).encode();n.writeInt(2);n.writeByteString(c)}n.writeInt(s);const l=f.from(n.encodeAsHex(),"hex");n.reset();n.writeStartArray(2);n.writeTag(o.CborTag.EncodedCborDataItem);n.writeByteString(l);n.writeInt((0,u.crc32)(l));return n.encode()}static unpackParts(e,t){let r=new i.CborReader(c.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const a=r.readByteString();if(Number(r.readInt())!==(0,u.crc32)(a))throw new l.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new i.CborReader(c.HexBlob.fromBytes(a));r.readStartArray();const o=(0,d.Hash28ByteBase16)(f.from(r.readByteString()).toString("hex"));r.readStartMap();let p;let h;while(r.peekState()!==n.CborReaderState.EndMap){const m=r.readInt();switch(m){case 1n:{const v=r.readByteString();h=c.HexBlob.fromBytes(new i.CborReader(c.HexBlob.fromBytes(v)).readByteString());break}case 2n:{const _=r.readByteString();p=Number(new i.CborReader(c.HexBlob.fromBytes(_)).readInt());break}}}r.readEndMap();const y=Number(r.readInt());return new s.Address({byronAddressContent:{attrs:{derivationPath:h,magic:p},root:o,type:y},type:e})}constructor(e){p.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,h,e.byronAddressContent,"f");__classPrivateFieldSet(this,p,e.type,"f")}}p=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js":(e,t,r)=>{"use strict";r.d(t,{DRepID:()=>DRepID});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=1023;const c=28;const l=29;const DRepID=e=>{try{return(0,i.typedBech32)(e,["drep"],47)}catch{return(0,i.typedBech32)(e,["drep","drep_script"],45)}};DRepID.isValid=e=>{try{DRepID(e);return true}catch{return false}};DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===a.CredentialType.ScriptHash)t="drep_script";const r=s.bech32.toWords(n.from(e.hash,"hex"));return s.bech32.encode(t,r,d)};DRepID.cip129FromCredential=e=>{let t="22";if(e.type===a.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const o=s.bech32.toWords(n.from(r,"hex"));return s.bech32.encode("drep",o,d)};DRepID.toCredential=e=>{const{words:t}=s.bech32.decode(e,d);const r=s.bech32.fromWords(t);if(r.length!==c&&r.length!==l){throw new Error("Invalid DRepID payload")}if(r.length===c){const i=e.includes("drep_script");return{hash:(0,o.Hash28ByteBase16)(n.from(r).toString("hex")),type:i?a.CredentialType.ScriptHash:a.CredentialType.KeyHash}}const u=r[0];const f=r.slice(1);const p=(32&u)===32;const h=(3&u)===3;if(!p){throw new Error("Invalid governance credential type")}return{hash:(0,o.Hash28ByteBase16)(n.from(f).toString("hex")),type:h?a.CredentialType.ScriptHash:a.CredentialType.KeyHash}};DRepID.toCip105DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip105FromCredential(t)};DRepID.toCip129DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip129FromCredential(t)};DRepID.toAddress=e=>{const t=DRepID.toCredential(e);return new a.Address({paymentPart:t,type:t.type===a.CredentialType.KeyHash?a.AddressType.EnterpriseKey:a.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js":(e,t,r)=>{"use strict";r.d(t,{EnterpriseAddress:()=>EnterpriseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===s.CredentialType.ScriptHash?s.AddressType.EnterpriseScript:s.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return i.concat([i.from([e.type<<4|e.networkId]),i.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new o.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(i.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.EnterpriseScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";r.d(t,{PaymentAddress:()=>PaymentAddress,addressNetworkId:()=>addressNetworkId,inputsWithAddresses:()=>inputsWithAddresses,isAddressWithin:()=>isAddressWithin,isRewardAccount:()=>isRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const isRewardAccount=e=>{try{(0,o.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};const PaymentAddress=e=>{if(s.Address.isValid(e)){if(isRewardAccount(e)||a.DRepID.isValid(e)){throw new i.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,o.assertIsHexString)(e)}catch{throw new i.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const t=s.Address.fromBytes(o.HexBlob.fromBytes(n.from(e,"hex")));return t.getType()===s.AddressType.Byron?t.toBase58():t.toBech32()};const isAddressWithin=e=>({address:t})=>e.includes(t);const inputsWithAddresses=(e,t)=>e.body.inputs.filter(isAddressWithin(t));const addressNetworkId=e=>{const t=s.Address.fromString(e);return t.getNetworkId()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js":(e,t,r)=>{"use strict";r.d(t,{CertIndex:()=>CertIndex,PointerAddress:()=>PointerAddress,TxIndex:()=>TxIndex});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new o.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return i.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const a=e[s];r<<=7n;r|=BigInt(127&a);t=(128&a)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;const CertIndex=e=>e;class PointerAddress{static fromCredentials(e,t,r){let a=s.AddressType.PointerKey;if(t.type===s.CredentialType.ScriptHash)a&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:a})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakePointer(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),pointer:__classPrivateFieldGet(this,l,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.PointerKey:case s.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:s}=e.pointer;return i.concat([i.from([e.type<<4|e.networkId]),i.from(e.paymentPart.hash,"hex"),i.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(s)])])}static unpackParts(e,t){if(t.length<=29)throw new o.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(i.from(t.slice(1,29)).toString("hex"));let d=29;const c=i.from(t);const{value:l,bytesRead:u}=variableLengthDecode(c.subarray(d));d+=u;const{value:f,bytesRead:p}=variableLengthDecode(c.subarray(d));d+=p;const{value:h}=variableLengthDecode(c.subarray(d));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.PointerScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},pointer:{certIndex:CertIndex(Number(h)),slot:l,txIndex:TxIndex(Number(f))},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.pointer,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";r.d(t,{RewardAccount:()=>RewardAccount,createRewardAccount:()=>createRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,o.typedBech32)(e,["stake","stake_test"],47);RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;RewardAccount.fromCredential=(e,t)=>RewardAccount(i.RewardAddress.fromCredentials(t,{hash:e.hash,type:e.type}).toAddress().toBech32());RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,t)=>RewardAccount(i.RewardAddress.fromCredentials(t,{hash:(0,a.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32())},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js":(e,t,r)=>{"use strict";r.d(t,{RewardAddress:()=>RewardAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class RewardAddress{static fromCredentials(e,t){let r=s.AddressType.RewardKey;if(t.type===s.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.RewardKey:case s.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return i.concat([i.from([e.type<<4|e.networkId]),i.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new o.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(i.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.RewardScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js":(e,t,r)=>{"use strict";r.d(t,{ChainIds:()=>o,NetworkId:()=>s,NetworkMagics:()=>a});var s;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(s||(s={}));var a;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(a||(a={}));const o={Mainnet:{networkId:s.Mainnet,networkMagic:a.Mainnet},Preprod:{networkId:s.Testnet,networkMagic:a.Preprod},Preview:{networkId:s.Testnet,networkMagic:a.Preview},Sanchonet:{networkId:s.Testnet,networkMagic:a.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{Address:()=>E.Address,AddressType:()=>E.AddressType,AssetFingerprint:()=>g.AssetFingerprint,AssetId:()=>g.AssetId,AssetName:()=>g.AssetName,BaseAddress:()=>j.BaseAddress,BlockId:()=>w.BlockId,BlockNo:()=>w.BlockNo,BlockSize:()=>w.BlockSize,ByronAddress:()=>I.ByronAddress,ByronAddressType:()=>I.ByronAddressType,CertIndex:()=>O.CertIndex,CertificateType:()=>y.CertificateType,ChainIds:()=>a.ChainIds,Cip1854ExtendedAccountPublicKey:()=>A.Cip1854ExtendedAccountPublicKey,CredentialType:()=>E.CredentialType,DRepID:()=>x.DRepID,DelegationMetadataLabel:()=>v.DelegationMetadataLabel,EnterpriseAddress:()=>R.EnterpriseAddress,EpochNo:()=>w.EpochNo,ExtendedPoolStatus:()=>h,FractionUtils:()=>T.FractionUtils,GenesisDelegate:()=>w.GenesisDelegate,GovernanceActionType:()=>k.GovernanceActionType,InputSource:()=>_.InputSource,MirCertificateKind:()=>y.MirCertificateKind,MirCertificatePot:()=>y.MirCertificatePot,NativeScriptKind:()=>P.NativeScriptKind,NetworkId:()=>a.NetworkId,NetworkMagics:()=>a.NetworkMagics,PaymentAddress:()=>M.PaymentAddress,PlutusLanguageVersion:()=>P.PlutusLanguageVersion,PlutusListEncoding:()=>S,PlutusMapEncoding:()=>C,PointerAddress:()=>O.PointerAddress,PolicyId:()=>g.PolicyId,PoolId:()=>m.PoolId,PoolIdHex:()=>m.PoolIdHex,PoolMdVk:()=>PoolMdVk,PostConwayStakeRegistrationCertificateTypes:()=>y.PostConwayStakeRegistrationCertificateTypes,RedeemerPurpose:()=>_.RedeemerPurpose,RegAndDeregCertificateTypes:()=>y.RegAndDeregCertificateTypes,RewardAccount:()=>B.RewardAccount,RewardAddress:()=>D.RewardAddress,ScriptType:()=>P.ScriptType,Slot:()=>w.Slot,SlotLeader:()=>w.SlotLeader,StakeCredentialCertificateTypes:()=>y.StakeCredentialCertificateTypes,StakeCredentialStatus:()=>v.StakeCredentialStatus,StakeDelegationCertificateTypes:()=>y.StakeDelegationCertificateTypes,StakePoolEpochRewards:()=>f.StakePoolEpochRewards,StakePoolStatus:()=>f.StakePoolStatus,StakeRegistrationCertificateTypes:()=>y.StakeRegistrationCertificateTypes,TransactionId:()=>_.TransactionId,TxIndex:()=>O.TxIndex,Vote:()=>k.Vote,VoteDelegationCredentialCertificateTypes:()=>y.VoteDelegationCredentialCertificateTypes,VoterType:()=>k.VoterType,VrfVkBech32:()=>w.VrfVkBech32,VrfVkHex:()=>m.VrfVkHex,addressNetworkId:()=>M.addressNetworkId,cip17FromMetadatum:()=>v.cip17FromMetadatum,computeAuxiliaryDataHash:()=>b.computeAuxiliaryDataHash,createDelegationCert:()=>y.createDelegationCert,createRewardAccount:()=>B.createRewardAccount,createStakeDeregistrationCert:()=>y.createStakeDeregistrationCert,createStakeRegistrationCert:()=>y.createStakeRegistrationCert,includesAnyCertificate:()=>y.includesAnyCertificate,inputsWithAddresses:()=>M.inputsWithAddresses,isAddress:()=>E.isAddress,isAddressWithin:()=>M.isAddressWithin,isCertType:()=>y.isCertType,isDRepAlwaysAbstain:()=>k.isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>k.isDRepAlwaysNoConfidence,isDRepCredential:()=>k.isDRepCredential,isDrepInfo:()=>k.isDrepInfo,isNativeScript:()=>P.isNativeScript,isPlutusScript:()=>P.isPlutusScript,isRewardAccount:()=>M.isRewardAccount,portfolioMetadataFromCip17:()=>v.portfolioMetadataFromCip17,stakeKeyCertificates:()=>y.stakeKeyCertificates,util:()=>s});var s={};r.r(s);r.d(s,{addressesShareAnyKey:()=>c.addressesShareAnyKey,computeImplicitCoin:()=>o.computeImplicitCoin,computeMinUtxoValue:()=>computeMinUtxoValue,estimateStakePoolAPY:()=>estimateStakePoolAPY,isAnyPlutusDataCollection:()=>l.isAnyPlutusDataCollection,isConstrPlutusData:()=>l.isConstrPlutusData,isPhase2ValidationErrTx:()=>d.isPhase2ValidationErrTx,isPlutusBigInt:()=>l.isPlutusBigInt,isPlutusBoundedBytes:()=>l.isPlutusBoundedBytes,isPlutusList:()=>l.isPlutusList,isPlutusMap:()=>l.isPlutusMap,isScriptAddress:()=>u.isScriptAddress,resolveInputValue:()=>resolveInputValue,tryConvertPlutusMapToUtf8Record:()=>l.tryConvertPlutusMapToUtf8Record});var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");const computeMinUtxoValue=e=>29n*e;var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");const n=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:s,pledge:a}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,i.Percent)(Number(s)/Number(t-a)/(r/n)*365)};const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/addressesShareAnyKey.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const PoolMdVk=e=>(0,p.typedBech32)(e,"poolmd_vk",52);var h;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(h||(h={}));var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var S;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(S||(S={}));var C;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(C||(C={}));var T=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var A=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Cip1854ExtendedAccountPublicKey.js");var E=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var I=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var M=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var O=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var B=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js")},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js":(e,t,r)=>{"use strict";r.d(t,{AssetFingerprint:()=>AssetFingerprint,AssetId:()=>AssetId,AssetName:()=>AssetName,PolicyId:()=>PolicyId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/blake2b-no-wasm/index.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/web-encoding/src/lib.mjs");var d=r("../../node_modules/buffer/index.js")["Buffer"];const AssetName=e=>{if(e.length>0){(0,o.assertIsHexString)(e);if(e.length>64){throw new i.InvalidStringError("too long")}}return e.toLowerCase()};const c=new n.TextDecoder("utf8",{fatal:true});AssetName.toUTF8=(e,t=false)=>{const r=d.from(e,"hex");try{if(t){return c.decode(r.filter(e=>e>31))}return c.decode(r)}catch(s){throw new i.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,s)}};const AssetId=e=>{const t=e.split(".").join("");(0,o.assertIsHexString)(t);if(t.length>120)throw new i.InvalidStringError("too long");if(t.length<56)throw new i.InvalidStringError("too short");return t};const PolicyId=e=>s.Hash28ByteBase16(e);AssetId.getPolicyId=e=>PolicyId(e.slice(0,56));AssetId.getAssetName=e=>AssetName(e.slice(56));AssetId.fromParts=(e,t)=>AssetId(e+t);const AssetFingerprint=e=>(0,o.typedBech32)(e,"asset",32);AssetFingerprint.fromParts=(e,t)=>{const r=d.from(e,"hex");const s=d.from(t,"hex");const i=(0,o.HexBlob)(a(20).update(new Uint8Array([...r,...s])).digest("hex"));return AssetFingerprint(o.HexBlob.toTypedBech32("asset",i))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{computeAuxiliaryDataHash:()=>computeAuxiliaryDataHash});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");const computeAuxiliaryDataHash=e=>e?(0,o.Hash32ByteBase16)(s(s.BYTES).update((0,i.hexToBytes)(a.AuxiliaryData.fromCore(e).toCbor())).digest("hex")):void 0},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js":(e,t,r)=>{"use strict";r.d(t,{BlockId:()=>BlockId,BlockNo:()=>BlockNo,BlockSize:()=>BlockSize,EpochNo:()=>EpochNo,GenesisDelegate:()=>GenesisDelegate,Slot:()=>Slot,SlotLeader:()=>SlotLeader,VrfVkBech32:()=>VrfVkBech32});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];const BlockSize=e=>e;const BlockNo=e=>e;const EpochNo=e=>e;const Slot=e=>e;const BlockId=e=>a.Hash32ByteBase16(e);const VrfVkBech32=e=>(0,o.typedBech32)(e,"vrf_vk",52);const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return a.Hash28ByteBase16(e)};const SlotLeader=e=>{try{return(0,n.PoolId)(e)}catch{try{return GenesisDelegate(e)}catch(t){throw new i.InvalidStringError("Expected either PoolId or GenesisDelegate",t)}}};VrfVkBech32.fromHex=e=>{const t=s.bech32.toWords(d.from(e,"hex"));return VrfVkBech32(s.bech32.encode("vrf_vk",t,1023))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{CertificateType:()=>i,MirCertificateKind:()=>d,MirCertificatePot:()=>n,PostConwayStakeRegistrationCertificateTypes:()=>c,RegAndDeregCertificateTypes:()=>f,StakeCredentialCertificateTypes:()=>p,StakeDelegationCertificateTypes:()=>u,StakeRegistrationCertificateTypes:()=>l,VoteDelegationCredentialCertificateTypes:()=>h,createDelegationCert:()=>createDelegationCert,createStakeDeregistrationCert:()=>createStakeDeregistrationCert,createStakeRegistrationCert:()=>createStakeRegistrationCert,includesAnyCertificate:()=>includesAnyCertificate,isCertType:()=>isCertType,stakeKeyCertificates:()=>stakeKeyCertificates});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var i;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(i||(i={}));var n;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(n||(n={}));var d;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(d||(d={}));const c=[i.Registration,i.VoteRegistrationDelegation,i.StakeRegistrationDelegation,i.StakeVoteRegistrationDelegation];const l=[i.StakeRegistration,...c];const u=[i.StakeDelegation,i.StakeVoteDelegation,i.StakeRegistrationDelegation,i.StakeVoteRegistrationDelegation];const f=[...l,i.Unregistration,i.StakeDeregistration];const p=[...f,...u,i.VoteDelegation];const h=[i.VoteDelegation,i.VoteRegistrationDelegation,i.StakeVoteDelegation,i.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);const createStakeRegistrationCert=e=>({__typename:i.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}});const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:i.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}}:{__typename:i.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}};const createDelegationCert=(e,t)=>({__typename:i.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}});const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>isCertType(e,f)?e:void 0).filter(o.isNotNil))||[]};const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Cip1854ExtendedAccountPublicKey.js":(e,t,r)=>{"use strict";r.d(t,{Cip1854ExtendedAccountPublicKey:()=>Cip1854ExtendedAccountPublicKey});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=1023;const c="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,o.assertIsBech32WithPrefix)(e,[c])}catch{throw new i.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const t=s.bech32.toWords(n.from(e,"hex"));return Cip1854ExtendedAccountPublicKey(s.bech32.encode(c,t,d))};Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=s.bech32.decode(e,d);return(0,a.Bip32PublicKeyHex)(n.from(s.bech32.fromWords(t)).toString("hex"))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";r.d(t,{DelegationMetadataLabel:()=>o,StakeCredentialStatus:()=>a,cip17FromMetadatum:()=>cip17FromMetadatum,portfolioMetadataFromCip17:()=>portfolioMetadataFromCip17});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var a;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(a||(a={}));const o=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionType:()=>s,Vote:()=>a,VoterType:()=>o,isDRepAlwaysAbstain:()=>isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>isDRepAlwaysNoConfidence,isDRepCredential:()=>isDRepCredential,isDrepInfo:()=>isDrepInfo});var s;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(s||(s={}));var a;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(a||(a={}));var o;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(o||(o={}));const isDrepInfo=e=>"id"in e&&"active"in e;const isDRepCredential=e=>"type"in e&&"hash"in e;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js":(e,t,r)=>{"use strict";r.d(t,{NativeScriptKind:()=>a,PlutusLanguageVersion:()=>o,ScriptType:()=>s,isNativeScript:()=>isNativeScript,isPlutusScript:()=>isPlutusScript});var s;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(s||(s={}));var a;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(a||(a={}));var o;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(o||(o={}));const isNativeScript=e=>e.__type===s.Native;const isPlutusScript=e=>e.__type===s.Plutus},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js":(e,t,r)=>{"use strict";r.d(t,{StakePoolEpochRewards:()=>StakePoolEpochRewards,StakePoolStatus:()=>s});var s;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(s||(s={}));class StakePoolEpochRewards{}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js":(e,t,r)=>{"use strict";r.d(t,{PoolId:()=>PoolId,PoolIdHex:()=>PoolIdHex,VrfVkHex:()=>VrfVkHex});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const i=1023;const PoolId=e=>(0,o.typedBech32)(e,"pool",45);PoolId.fromKeyHash=e=>o.HexBlob.toTypedBech32("pool",(0,o.HexBlob)(e));const PoolIdHex=e=>a.Hash28ByteBase16(e);const VrfVkHex=e=>(0,o.typedHex)(e,64);PoolId.toKeyHash=e=>{const{words:t}=s.bech32.decode(e,i);return a.Ed25519KeyHashHex(o.HexBlob.fromBytes(s.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{InputSource:()=>a,RedeemerPurpose:()=>o,TransactionId:()=>TransactionId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");const TransactionId=e=>s.Hash32ByteBase16(e);TransactionId.fromHexBlob=e=>s.Hash32ByteBase16.fromHexBlob(e);var a;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(a||(a={}));var o;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(o||(o={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js":(e,t,r)=>{"use strict";r.d(t,{FractionUtils:()=>a});var s=r("../../node_modules/fraction.js/fraction.js");const toFractionJs=e=>{if("number"==typeof e){return new s(e)}const{numerator:t,denominator:r}=e;return new s(t,r)};const a={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/addressesShareAnyKey.js":(e,t,r)=>{"use strict";r.d(t,{addressesShareAnyKey:()=>addressesShareAnyKey});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?s.Address.fromString(e):e;if(!t){throw new a.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case s.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:{const o=t.asEnterprise();return{paymentId:{credential:o.getPaymentCredential()}}}case s.AddressType.PointerKey:case s.AddressType.PointerScript:{const i=t.asPointer();return{paymentId:{credential:i.getPaymentCredential()},stakeId:{pointer:i.getStakePointer()}}}case s.AddressType.RewardKey:case s.AddressType.RewardScript:{const n=t.asReward();return{stakeId:{credential:n.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js":(e,t,r)=>{"use strict";r.d(t,{computeImplicitCoin:()=>computeImplicitCoin});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=s.RewardAccount.toNetworkId(t[0]);return t.includes(s.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let a=0n;let d=0n;const c=0===r.length;const l=new Set(r.map(e=>o.PoolId.fromKeyHash((0,n.Ed25519KeyHashHex)(s.RewardAccount.toHash(e)))));for(const u of t){switch(u.__typename){case i.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))a+=e.stakeKeyDeposit;break;case i.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))d+=e.stakeKeyDeposit;break;case i.CertificateType.PoolRegistration:if(c||r.some(e=>u.poolParameters.owners.includes(e)))a+=e.poolDeposit;break;case i.CertificateType.PoolRetirement:if(c||l.has(u.poolId))d+=e.poolDeposit;break}}return{deposit:a,reclaimDeposit:d}};const computeConwayDeposits=(e,t,r,s)=>{let o=0n;let d=0n;for(const c of e){switch(c.__typename){case i.CertificateType.Registration:case i.CertificateType.StakeRegistrationDelegation:case i.CertificateType.VoteRegistrationDelegation:case i.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))o+=c.deposit;break;case i.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))d+=c.deposit;break;case i.CertificateType.RegisterDelegateRepresentative:case i.CertificateType.UnregisterDelegateRepresentative:if(!r||c.dRepCredential.type===a.CredentialType.KeyHash&&c.dRepCredential.hash===n.Hash28ByteBase16.fromEd25519KeyHashHex(r))c.__typename===i.CertificateType.RegisterDelegateRepresentative?o+=c.deposit:d+=c.deposit;break}}if(s)for(const l of s)o+=l.deposit;return{deposit:o,reclaimDeposit:d}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],a,o)=>{if(0===r.length&&(!o||0===o.length))return{deposit:0n,reclaimDeposit:0n};const i={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(i,r,s);const d=computeConwayDeposits(r,s,a,o);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>d.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:a=[]},o,i)=>{const{deposit:n,reclaimDeposit:c}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],o,i,s);const l=!!(null==o?void 0:o.length);const u=d.BigIntMath.sum(a.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(a,o):u;return{deposit:n,input:f+c,reclaimDeposit:c,withdrawals:f}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";r.d(t,{isScriptAddress:()=>isScriptAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");const isScriptAddress=e=>{const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const a=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==a?void 0:a.type)===s.CredentialType.ScriptHash}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";r.d(t,{isPhase2ValidationErrTx:()=>isPhase2ValidationErrTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";r.d(t,{isAnyPlutusDataCollection:()=>isAnyPlutusDataCollection,isConstrPlutusData:()=>isConstrPlutusData,isPlutusBigInt:()=>isPlutusBigInt,isPlutusBoundedBytes:()=>isPlutusBoundedBytes,isPlutusList:()=>isPlutusList,isPlutusMap:()=>isPlutusMap,tryConvertPlutusMapToUtf8Record:()=>tryConvertPlutusMapToUtf8Record});var s=r("../../node_modules/web-encoding/src/lib.mjs");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);const isAnyPlutusDataCollection=e=>"object"==typeof e&&!isPlutusBoundedBytes(e);const isPlutusList=e=>isAnyPlutusDataCollection(e)&&"items"in e;const isPlutusMap=e=>isAnyPlutusDataCollection(e)&&"data"in e;const isConstrPlutusData=e=>isAnyPlutusDataCollection(e)&&"fields"in e;const isPlutusBigInt=e=>"bigint"==typeof e;const a=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!isPlutusBoundedBytes(e))return e;try{return a.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,a]of e.data.entries()){const o=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof o){t.warn("Failed to decode plutus map key",s);continue}r[o]=tryConvertPlutusDataToUtf8String(a)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";r.d(t,{ChainSyncError:()=>ChainSyncError,ChainSyncErrorCode:()=>o,GeneralCardanoNodeError:()=>GeneralCardanoNodeError,GeneralCardanoNodeErrorCode:()=>a,StateQueryError:()=>StateQueryError,StateQueryErrorCode:()=>i,TxSubmissionError:()=>TxSubmissionError,TxSubmissionErrorCode:()=>n});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(a||(a={}));var o;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(o||(o={}));var i;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(i||(i={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n||(n={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}class GeneralCardanoNodeError extends CardanoNodeError{}class ChainSyncError extends CardanoNodeError{}class TxSubmissionError extends CardanoNodeError{}class StateQueryError extends CardanoNodeError{}},"../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/util/cardanoNodeErrors.js":(e,t,r)=>{"use strict";r.d(t,{isCredentialAlreadyRegistered:()=>isCredentialAlreadyRegistered,isDrepAlreadyRegistered:()=>isDrepAlreadyRegistered,isDrepNotRegistered:()=>isDrepNotRegistered,isIncompleteWithdrawalsError:()=>isIncompleteWithdrawalsError,isProviderError:()=>isProviderError,isUnknownCredential:()=>isUnknownCredential,isUnknownOutputReferences:()=>isUnknownOutputReferences,isValueNotConservedError:()=>isValueNotConservedError});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,o.isProductionEnvironment)())(0,i.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,o.isProductionEnvironment)())(0,i.stripStackTrace)(t);return t}return null};const n=asSpecificCardanoNodeError(s.TxSubmissionError);const d=asSpecificCardanoNodeError(s.ChainSyncError);const c=asSpecificCardanoNodeError(s.StateQueryError);const l=asSpecificCardanoNodeError(s.GeneralCardanoNodeError);const asCardanoNodeError=e=>l(e)||n(e)||c(e)||d(e)||new GeneralCardanoNodeError(GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');const u=new Set(Object.values(s.StateQueryErrorCode));const f=new Set(Object.values(s.GeneralCardanoNodeErrorCode));const p=new Set(Object.values(s.TxSubmissionErrorCode));const h=new Set(Object.values(s.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&h.has(e);const isTxSubmissionErrorCode=e=>"number"==typeof e&&p.has(e);const isStateQueryErrorCode=e=>"number"==typeof e&&u.has(e);const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&f.has(e);const asChainSyncErrorCode=e=>isChainSyncErrorCode(e)?e:null;const asStateQueryErrorCode=e=>isStateQueryErrorCode(e)?e:null;const asGeneralCardanoNodeErrorCode=e=>isGeneralCardanoNodeErrorCode(e)?e:null;const asTxSubmissionErrorCode=e=>isTxSubmissionErrorCode(e)?e:null;const isProviderError=e=>e instanceof a.ProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof TxSubmissionError&&e.code===TxSubmissionErrorCode.OutsideOfValidityInterval;const isValueNotConservedError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.ValueNotConserved;const isIncompleteWithdrawalsError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.IncompleteWithdrawals;const isUnknownOutputReferences=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.CredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepAlreadyRegistered;const isUnknownCredential=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownCredential;const isDrepNotRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepNotRegistered},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{ALONZO_AUX_TAG:()=>E,AuxiliaryData:()=>AuxiliaryData,SHELLEY_ERA_FIELDS_COUNT:()=>A});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,_,y,w,g,b,P,S,C,T,k;const A=2;const E=259;class AuxiliaryData{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");const e=new s.CborWriter;const t=__classPrivateFieldGet(this,v,"m",C).call(this);if(1===t&&void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").metadata().size>0)e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));else if(t===A&&void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").metadata().size>0&&void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0){e.writeStartArray(t);e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));e.writeStartArray(__classPrivateFieldGet(this,w,"f").length);for(const r of __classPrivateFieldGet(this,w,"f"))e.writeEncodedValue((0,m.hexToBytes)(r.toCbor()))}else{e.writeTag(E);e.writeStartMap(t);if(void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0){e.writeInt(1n);e.writeStartArray(__classPrivateFieldGet(this,w,"f").length);for(const a of __classPrivateFieldGet(this,w,"f"))e.writeEncodedValue((0,m.hexToBytes)(a.toCbor()))}if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0){e.writeInt(2n);e.writeStartArray(__classPrivateFieldGet(this,g,"f").length);for(const o of __classPrivateFieldGet(this,g,"f"))e.writeEncodedValue((0,m.hexToBytes)(o.toCbor()))}if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0){e.writeInt(3n);e.writeStartArray(__classPrivateFieldGet(this,b,"f").length);for(const i of __classPrivateFieldGet(this,b,"f"))e.writeEncodedValue((0,m.hexToBytes)(i.toCbor()))}if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0){e.writeInt(4n);e.writeStartArray(__classPrivateFieldGet(this,P,"f").length);for(const n of __classPrivateFieldGet(this,P,"f"))e.writeEncodedValue((0,m.hexToBytes)(n.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new AuxiliaryData;const s=t.peekState();if(s===o.CborReaderState.StartMap)__classPrivateFieldSet(r,y,i.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");else if(s===o.CborReaderState.Tag){const p=t.readTag();if(p!==E){throw new d.InvalidArgumentError("cbor",`Expected tag '${E}', but got ${p}.`)}t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const h=t.readInt();switch(h){case 0n:__classPrivateFieldSet(r,y,i.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 1n:r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:r.setPlutusV1Scripts(new Array);t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){r.plutusV1Scripts().push(l.PlutusV1Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 3n:r.setPlutusV2Scripts(new Array);t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){r.plutusV2Scripts().push(u.PlutusV2Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 4n:r.setPlutusV3Scripts(new Array);t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){r.plutusV3Scripts().push(f.PlutusV3Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break}}t.readEndMap()}else{t.readStartArray();__classPrivateFieldSet(r,y,i.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray()}__classPrivateFieldSet(r,S,e,"f");return r}toCore(){const e=__classPrivateFieldGet(this,v,"m",T).call(this);const t={blob:__classPrivateFieldGet(this,y,"f")?__classPrivateFieldGet(this,y,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(i.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=__classPrivateFieldGet(AuxiliaryData,_,"m",k).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return __classPrivateFieldGet(this,y,"f")}setMetadata(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,w,"f")}setNativeScripts(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,g,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,b,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,P,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}constructor(){v.add(this);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0)}}_=AuxiliaryData,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,v=new WeakSet,C=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").metadata().size>0)++e;if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0)++e;return e},T=function _AuxiliaryData_getCoreScripts(){const e=__classPrivateFieldGet(this,g,"f")?__classPrivateFieldGet(this,g,"f").map(e=>e.toCore()):[];const t=__classPrivateFieldGet(this,b,"f")?__classPrivateFieldGet(this,b,"f").map(e=>e.toCore()):[];const r=__classPrivateFieldGet(this,P,"f")?__classPrivateFieldGet(this,P,"f").map(e=>e.toCore()):[];const s=__classPrivateFieldGet(this,w,"f")?__classPrivateFieldGet(this,w,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...s]},k=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case p.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(c.NativeScript.fromCore(r));break;case p.ScriptType.Plutus:if(r.version===p.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(l.PlutusV1Script.fromCore(r))}else if(r.version===p.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(u.PlutusV2Script.fromCore(r))}else if(r.version===p.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(f.PlutusV3Script.fromCore(r))}break;default:throw new h.SerializationError(h.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":(e,t,r)=>{"use strict";r.d(t,{GeneralTransactionMetadata:()=>GeneralTransactionMetadata});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class GeneralTransactionMetadata{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartMap(__classPrivateFieldGet(this,c,"f").size);for(const[t,r]of __classPrivateFieldGet(this,c,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new a.CborReader(e);r.readStartMap();while(r.peekState()!==o.CborReaderState.EndMap){const s=r.readInt();const d=n.TransactionMetadatum.fromCbor(i.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,d)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...__classPrivateFieldGet(this,c,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],n.TransactionMetadatum.fromCore(e[1])])))}metadata(){return __classPrivateFieldGet(this,c,"f")}setMetadata(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){if(__classPrivateFieldGet(this,l,"f")===__classPrivateFieldGet(e,l,"f"))return true;if(__classPrivateFieldGet(this,c,"f").size!==__classPrivateFieldGet(e,c,"f").size)return false;const t=[...__classPrivateFieldGet(this,c,"f").entries()];const r=[...__classPrivateFieldGet(e,c,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,c,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumList:()=>MetadatumList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l;class MetadatumList{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const t of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(t.toCbor()));if(__classPrivateFieldGet(this,l,"f"))e.writeEndArray();return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new a.CborReader(e);const s=r.readStartArray();if(null===s)__classPrivateFieldSet(t,l,true,"f");while(r.peekState()!==o.CborReaderState.EndArray){t.add(n.TransactionMetadatum.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array);l.set(this,false)}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumMap:()=>MetadatumMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var l,u;class MetadatumMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new a.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==o.CborReaderState.EndMap){const i=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const n=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(i,n)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new n.MetadatumList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatum:()=>TransactionMetadatum});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var h,m,v,_,y,w,g;const b=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?p.from(e,"utf8").length:e.length;if(t>64)throw new l.SerializationError(l.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");let e;switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Map:e=__classPrivateFieldGet(this,h,"f").toCbor();break;case u.TransactionMetadatumKind.List:e=__classPrivateFieldGet(this,m,"f").toCbor();break;case u.TransactionMetadatumKind.Bytes:{const t=new s.CborWriter;check64Length(__classPrivateFieldGet(this,_,"f"));t.writeByteString(__classPrivateFieldGet(this,_,"f"));e=(0,f.bytesToHex)(t.encode());break}case u.TransactionMetadatumKind.Text:{const r=new s.CborWriter;check64Length(__classPrivateFieldGet(this,y,"f"));r.writeTextString(__classPrivateFieldGet(this,y,"f"));e=(0,f.bytesToHex)(r.encode());break}case u.TransactionMetadatumKind.Integer:{const a=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f")>=0&&__classPrivateFieldGet(this,v,"f")<=b||__classPrivateFieldGet(this,v,"f")<0&&__classPrivateFieldGet(this,v,"f")>=-1n-b)a.writeInt(__classPrivateFieldGet(this,v,"f"));else a.writeBigInteger(__classPrivateFieldGet(this,v,"f"));e=(0,f.bytesToHex)(a.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new a.CborReader(e);const s=r.peekState();switch(s){case o.CborReaderState.Tag:{const l=r.peekTag();switch(l){case i.CborTag.UnsignedBigNum:{r.readTag();const f=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(f),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break}case i.CborTag.NegativeBigNum:{r.readTag();const p=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(p)*-1n,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break}}break}case o.CborReaderState.NegativeInteger:case o.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,v,r.readInt(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break;case o.CborReaderState.StartIndefiniteLengthByteString:case o.CborReaderState.ByteString:__classPrivateFieldSet(t,_,r.readByteString(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Bytes,"f");break;case o.CborReaderState.StartIndefiniteLengthTextString:case o.CborReaderState.TextString:__classPrivateFieldSet(t,y,r.readTextString(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Text,"f");break;case o.CborReaderState.StartArray:__classPrivateFieldSet(t,m,d.MetadatumList.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.List,"f");break;case o.CborReaderState.StartMap:__classPrivateFieldSet(t,h,c.MetadatumMap.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,g,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Bytes:return new Uint8Array(__classPrivateFieldGet(this,_,"f"));case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,y,"f");case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f");case u.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(__classPrivateFieldGet(this,m,"f"));case u.TransactionMetadatumKind.Map:{const e=__classPrivateFieldGet(this,h,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const a=r.get(s);t.set(a.toCore(),e.get(a).toCore())}return t}default:throw new l.NotImplementedError(`TransactionMetadatum mapping for kind ${__classPrivateFieldGet(this,w,"f")}`)}}static fromCore(e){if(null===e)throw new l.SerializationError(l.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new l.SerializationError(l.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new d.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new c.MetadatumMap;for(const[a,o]of e.entries())s.insert(TransactionMetadatum.fromCore(a),TransactionMetadatum.fromCore(o));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Text,"f");return t}getKind(){return __classPrivateFieldGet(this,w,"f")}asMap(){return __classPrivateFieldGet(this,h,"f")}asList(){return __classPrivateFieldGet(this,m,"f")}asInteger(){return __classPrivateFieldGet(this,v,"f")}asBytes(){return __classPrivateFieldGet(this,_,"f")}asText(){return __classPrivateFieldGet(this,y,"f")}equals(e){let t=false;switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Bytes:if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(e,_,"f")){return __classPrivateFieldGet(this,_,"f").length===__classPrivateFieldGet(e,_,"f").length&&__classPrivateFieldGet(this,_,"f").every((t,r)=>t===__classPrivateFieldGet(e,_,"f")[r])}return false;case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f")===__classPrivateFieldGet(e,v,"f");case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,y,"f")===__classPrivateFieldGet(e,y,"f");case u.TransactionMetadatumKind.List:if(__classPrivateFieldGet(this,m,"f")&&__classPrivateFieldGet(e,m,"f")){return __classPrivateFieldGet(this,m,"f").equals(__classPrivateFieldGet(e,m,"f"))}return false;case u.TransactionMetadatumKind.Map:if(__classPrivateFieldGet(this,h,"f")&&__classPrivateFieldGet(e,h,"f")){return __classPrivateFieldGet(this,h,"f").equals(__classPrivateFieldGet(e,h,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,u.TransactionMetadatumKind.Map);g.set(this,void 0)}}h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatumKind:()=>s});var s;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js":(e,t,r)=>{"use strict";r.d(t,{CborAdditionalInfo:()=>s});var s;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js":(e,t,r)=>{"use strict";r.d(t,{CborInitialByte:()=>CborInitialByte});var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;class CborInitialByte{CborInitialByte(e,t){__classPrivateFieldSet(this,s,e<<5|t,"f")}static from(e){const t=new CborInitialByte;__classPrivateFieldSet(t,s,e,"f");return t}getInitialByte(){return __classPrivateFieldGet(this,s,"f")}getMajorType(){return __classPrivateFieldGet(this,s,"f")>>5}getAdditionalInfo(){return __classPrivateFieldGet(this,s,"f")&CborInitialByte.AdditionalInformationMask}constructor(){s.set(this,void 0)}}s=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js":(e,t,r)=>{"use strict";r.d(t,{CborMajorType:()=>s});var s;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js":(e,t,r)=>{"use strict";r.d(t,{CborReader:()=>CborReader});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x,R,M,O,B;const D="Unexpected end of buffer";class CborReader{peekState(){if(__classPrivateFieldGet(this,_,"f")===n.CborReaderState.Undefined)__classPrivateFieldSet(this,_,__classPrivateFieldGet(this,l,"m",E).call(this),"f");return __classPrivateFieldGet(this,_,"f")}getBytesRemaining(){return __classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,p,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=__classPrivateFieldGet(this,p,"f");let t=0;do{t=__classPrivateFieldGet(this,l,"m",B).call(this,t)}while(t>0)return __classPrivateFieldGet(this,f,"f").slice(e,__classPrivateFieldGet(this,p,"f"))}readStartArray(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Array);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.Array);return null}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:a}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",k).call(this,a);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.Array,r);return r}readEndArray(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",T).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",T).call(this)}}readInt(){const e=__classPrivateFieldGet(this,l,"m",x).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",T).call(this);return e.signedInt}readUInt(){const e=__classPrivateFieldGet(this,l,"m",I).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",T).call(this);return e.unsignedInt}readDouble(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Simple);let t;const r=__classPrivateFieldGet(this,l,"m",C).call(this);switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional16BitData:__classPrivateFieldGet(this,l,"m",A).call(this,3);t=(0,d.decodeHalf)(r.slice(1));__classPrivateFieldGet(this,l,"m",k).call(this,3);__classPrivateFieldGet(this,l,"m",T).call(this);return t;case s.CborAdditionalInfo.Additional32BitData:__classPrivateFieldGet(this,l,"m",A).call(this,5);t=c.from(r).readFloatBE(1);__classPrivateFieldGet(this,l,"m",k).call(this,5);__classPrivateFieldGet(this,l,"m",T).call(this);return t;case s.CborAdditionalInfo.Additional64BitData:__classPrivateFieldGet(this,l,"m",A).call(this,9);t=c.from(r).readDoubleBE(1);__classPrivateFieldGet(this,l,"m",k).call(this,9);__classPrivateFieldGet(this,l,"m",T).call(this);return t;default:throw new a.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Simple);if((e.getInitialByte()&o.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",T).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",A).call(this,2);const t=__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,p,"f")+1];__classPrivateFieldGet(this,l,"m",k).call(this,2);__classPrivateFieldGet(this,l,"m",T).call(this);return t}throw new a.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.NegativeInteger);const t=__classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));__classPrivateFieldGet(this,l,"m",k).call(this,t.bytesRead);__classPrivateFieldGet(this,l,"m",T).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Map);if(t.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.Map);e=null}else{const r=__classPrivateFieldGet(this,l,"m",C).call(this);const o=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,t,r);if(2*o.length>r.length-o.bytesRead)throw new a.CborContentException("Definite length exceeds buffer size");__classPrivateFieldGet(this,l,"m",k).call(this,o.bytesRead);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.Map,2*o.length);e=o.length}__classPrivateFieldGet(this,v,"f").currentKeyOffset=__classPrivateFieldGet(this,p,"f");return e}readEndMap(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);if(__classPrivateFieldGet(this,v,"f").itemsRead%2!==0)throw new a.CborContentException("Key missing value");__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",T).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",T).call(this)}}readBoolean(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalTrue&&t!==s.CborAdditionalInfo.AdditionalFalse)throw new a.CborContentException("Not a boolean encoding");const r=t===s.CborAdditionalInfo.AdditionalTrue;__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",T).call(this);return r}readNull(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalNull)throw new a.CborContentException("Not a null encoding");__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",T).call(this)}readStartIndefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.ByteString);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new a.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",T).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,1)}readByteString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",R).call(this,i.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",k).call(this,r);__classPrivateFieldGet(this,l,"m",T).call(this);return t}const a=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:o,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,e,a);__classPrivateFieldGet(this,l,"m",A).call(this,n+o);__classPrivateFieldGet(this,l,"m",k).call(this,n+o);__classPrivateFieldGet(this,l,"m",T).call(this);return a.slice(n,n+o)}readDefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new a.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:o}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",A).call(this,o+r);__classPrivateFieldGet(this,l,"m",k).call(this,o+r);__classPrivateFieldGet(this,l,"m",T).call(this);return t.slice(o,o+r)}readStartIndefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new a.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",k).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,i.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,i.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",T).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,1)}readTextString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",R).call(this,i.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",k).call(this,r);__classPrivateFieldGet(this,l,"m",T).call(this);return c.from(t).toString("utf8")}const a=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:o,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,e,a);__classPrivateFieldGet(this,l,"m",A).call(this,n+o);__classPrivateFieldGet(this,l,"m",k).call(this,n+o);__classPrivateFieldGet(this,l,"m",T).call(this);return c.from(a.slice(n,n+o)).toString("utf8")}readDefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new a.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:o}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",A).call(this,o+r);__classPrivateFieldGet(this,l,"m",k).call(this,o+r);__classPrivateFieldGet(this,l,"m",T).call(this);return c.from(t.slice(o,o+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=__classPrivateFieldGet(this,l,"m",M).call(this);__classPrivateFieldGet(this,l,"m",k).call(this,t);__classPrivateFieldSet(this,m,true,"f");return e}peekTag(){const{tag:e}=__classPrivateFieldGet(this,l,"m",M).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new a.CborContentException(D)}}static mapSimpleValueDataToReaderState(e){switch(e){case s.CborAdditionalInfo.AdditionalNull:return n.CborReaderState.Null;case s.CborAdditionalInfo.AdditionalFalse:case s.CborAdditionalInfo.AdditionalTrue:return n.CborReaderState.Boolean;case s.CborAdditionalInfo.Additional16BitData:return n.CborReaderState.HalfPrecisionFloat;case s.CborAdditionalInfo.Additional32BitData:return n.CborReaderState.SinglePrecisionFloat;case s.CborAdditionalInfo.Additional64BitData:return n.CborReaderState.DoublePrecisionFloat;default:return n.CborReaderState.SimpleValue}}constructor(e){l.add(this);f.set(this,void 0);p.set(this,0);h.set(this,new Array);m.set(this,false);v.set(this,void 0);_.set(this,n.CborReaderState.Undefined);__classPrivateFieldSet(this,f,new Uint8Array(c.from(e,"hex")),"f");__classPrivateFieldSet(this,v,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}u=CborReader,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,l=new WeakSet,y=function _CborReader_peekInitialByte(e){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0)throw new a.CborInvalidOperationException("No more data items to read");if(__classPrivateFieldGet(this,p,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,p,"f")>0)throw new a.CborInvalidOperationException("End of root-level. No more data items to read");throw new a.CborContentException(D)}const t=o.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,p,"f")]);switch(__classPrivateFieldGet(this,v,"f").type){case i.CborMajorType.ByteString:case i.CborMajorType.Utf8String:if(t.getInitialByte()===o.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===__classPrivateFieldGet(this,v,"f").type&&t.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength){break}throw new a.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new a.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},w=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=o.CborInitialByte.from(e[0]);if(r.getInitialByte()!==o.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new a.CborContentException("Indefinite length string contains invalid data item");return r},g=function _CborReader_validateNextByteIsBreakByte(){const e=__classPrivateFieldGet(this,l,"m",y).call(this);if(e.getInitialByte()!==o.CborInitialByte.IndefiniteLengthBreakByte)throw new a.CborInvalidOperationException("Not at end of indefinite length data item")},b=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:__classPrivateFieldGet(this,v,"f").currentKeyOffset,definiteLength:__classPrivateFieldGet(this,v,"f").definiteLength,frameOffset:__classPrivateFieldGet(this,v,"f").frameOffset,itemsRead:__classPrivateFieldGet(this,v,"f").itemsRead,type:__classPrivateFieldGet(this,v,"f").type};__classPrivateFieldGet(this,h,"f").push(r);__classPrivateFieldGet(this,v,"f").type=e;__classPrivateFieldGet(this,v,"f").definiteLength=t;__classPrivateFieldGet(this,v,"f").itemsRead=0;__classPrivateFieldGet(this,v,"f").frameOffset=__classPrivateFieldGet(this,p,"f");__classPrivateFieldSet(this,m,false,"f");__classPrivateFieldGet(this,v,"f").currentKeyOffset=null},P=function _CborReader_popDataItem(e){if(null===__classPrivateFieldGet(this,v,"f").type||__classPrivateFieldGet(this,h,"f").length<=0)throw new a.CborInvalidOperationException("Is at root context");if(e!==__classPrivateFieldGet(this,v,"f").type)throw new a.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${__classPrivateFieldGet(this,v,"f").type}`);if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead>0)throw new a.CborInvalidOperationException("Not at end of definite length data item");if(__classPrivateFieldGet(this,m,"f"))throw new a.CborContentException("Tag not followed by value");const t=__classPrivateFieldGet(this,h,"f").pop();__classPrivateFieldGet(this,l,"m",S).call(this,t)},S=function _CborReader_restoreStackFrame(e){__classPrivateFieldGet(this,v,"f").type=e.type;__classPrivateFieldGet(this,v,"f").frameOffset=e.frameOffset;__classPrivateFieldGet(this,v,"f").definiteLength=e.definiteLength;__classPrivateFieldGet(this,v,"f").itemsRead=e.itemsRead;__classPrivateFieldGet(this,v,"f").currentKeyOffset=e.currentKeyOffset;__classPrivateFieldSet(this,_,n.CborReaderState.Undefined,"f")},C=function _CborReader_getRemainingBytes(){return __classPrivateFieldGet(this,f,"f").slice(__classPrivateFieldGet(this,p,"f"))},T=function _CborReader_advanceDataItemCounters(){++__classPrivateFieldGet(this,v,"f").itemsRead;__classPrivateFieldSet(this,m,false,"f")},k=function _CborReader_advanceBuffer(e){if(__classPrivateFieldGet(this,p,"f")+e>__classPrivateFieldGet(this,f,"f").length)throw new a.CborContentException("Buffer offset out of bounds");__classPrivateFieldSet(this,p,__classPrivateFieldGet(this,p,"f")+e,"f");__classPrivateFieldSet(this,_,n.CborReaderState.Undefined,"f")},A=function _CborReader_ensureReadCapacity(e){if(__classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,p,"f")<e){throw new a.CborContentException(D)}},E=function _CborReader_peekStateCore(){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0){if(null===__classPrivateFieldGet(this,v,"f").type)return n.CborReaderState.Finished;switch(__classPrivateFieldGet(this,v,"f").type){case i.CborMajorType.Array:return n.CborReaderState.EndArray;case i.CborMajorType.Map:return n.CborReaderState.EndMap;default:throw new a.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(__classPrivateFieldGet(this,p,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength){return n.CborReaderState.Finished}throw new a.CborInvalidOperationException(D)}const e=o.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,p,"f")]);if(e.getInitialByte()===o.CborInitialByte.IndefiniteLengthBreakByte){if(__classPrivateFieldGet(this,m,"f")){throw new a.CborContentException("Tag not followed by value")}if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case null:throw new a.CborContentException("Unexpected break byte");case i.CborMajorType.ByteString:return n.CborReaderState.EndIndefiniteLengthByteString;case i.CborMajorType.Utf8String:return n.CborReaderState.EndIndefiniteLengthTextString;case i.CborMajorType.Array:return n.CborReaderState.EndArray;case i.CborMajorType.Map:if(__classPrivateFieldGet(this,v,"f").itemsRead%2===0)return n.CborReaderState.EndMap;throw new a.CborContentException("Key missing value");default:throw new a.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new a.CborContentException("Unexpected break byte")}}if(null!==__classPrivateFieldGet(this,v,"f").type&&null!==__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case i.CborMajorType.ByteString:case i.CborMajorType.Utf8String:if(e.getMajorType()!==__classPrivateFieldGet(this,v,"f").type){throw new a.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case i.CborMajorType.UnsignedInteger:return n.CborReaderState.UnsignedInteger;case i.CborMajorType.NegativeInteger:return n.CborReaderState.NegativeInteger;case i.CborMajorType.ByteString:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthByteString:n.CborReaderState.ByteString;case i.CborMajorType.Utf8String:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthTextString:n.CborReaderState.TextString;case i.CborMajorType.Array:return n.CborReaderState.StartArray;case i.CborMajorType.Map:return n.CborReaderState.StartMap;case i.CborMajorType.Tag:return n.CborReaderState.Tag;case i.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new a.CborContentException("Invalid CBOR major type.")}},j=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=__classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},I=function _CborReader_peekUnsignedInteger(){const e=__classPrivateFieldGet(this,l,"m",y).call(this);switch(e.getMajorType()){case i.CborMajorType.UnsignedInteger:return __classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));case i.CborMajorType.NegativeInteger:throw new a.CborContentException("Integer overflow");default:throw new a.CborInvalidOperationException(`Reader type mismatch, expected ${i.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},x=function _CborReader_peekSignedInteger(){const e=__classPrivateFieldGet(this,l,"m",y).call(this);switch(e.getMajorType()){case i.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case i.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:o}=__classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:o,signedInt:BigInt(-1)-s}}default:throw new a.CborInvalidOperationException(`Reader type mismatch, expected ${i.CborMajorType.UnsignedInteger} or ${i.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},R=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=__classPrivateFieldGet(this,l,"m",C).call(this);let r=c.from([]);let s=0;let a=1;let i=__classPrivateFieldGet(CborReader,u,"m",w).call(CborReader,t.slice(a),e);while(i.getInitialByte()!==o.CborInitialByte.IndefiniteLengthBreakByte){const{length:n,bytesRead:d}=__classPrivateFieldGet(CborReader,u,"m",j).call(CborReader,i,t.slice(a));const f=d+Number(n);r=c.concat([r,t.slice(a+(f-n),a+f)]);a+=f;i=__classPrivateFieldGet(CborReader,u,"m",w).call(CborReader,t.slice(a),e)}s=a+1;return{encodingLength:s,val:new Uint8Array(r)}},M=function _CborReader_peekTagCore(){const e=__classPrivateFieldGet(this,l,"m",y).call(this,i.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",O).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,tag:Number(t)}},O=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&o.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case s.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=c.from(t.slice(1));const i=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(i)}}case s.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const n=c.from(t.slice(1));const d=n.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(d)}}case s.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const l=c.from(t.slice(1,9));let u=BigInt(0);for(const f of l)u=(u<<BigInt(8))+BigInt(f);return{bytesRead:9,unsignedInt:u}}default:throw new a.CborContentException("Invalid integer encoding")}},B=function _CborReader_skipNextNode(e){let t;let r=e;while((t=__classPrivateFieldGet(this,l,"m",E).call(this))===n.CborReaderState.Tag)this.readTag();switch(t){case n.CborReaderState.UnsignedInteger:this.readUInt();break;case n.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case n.CborReaderState.ByteString:this.readByteString();break;case n.CborReaderState.TextString:this.readTextString();break;case n.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case n.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case n.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case n.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case n.CborReaderState.StartArray:this.readStartArray();r++;break;case n.CborReaderState.EndArray:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case n.CborReaderState.StartMap:this.readStartMap();r++;break;case n.CborReaderState.EndMap:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case n.CborReaderState.HalfPrecisionFloat:case n.CborReaderState.SinglePrecisionFloat:case n.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case n.CborReaderState.Null:case n.CborReaderState.Boolean:case n.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js":(e,t,r)=>{"use strict";r.d(t,{CborReaderState:()=>s});var s;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js":(e,t,r)=>{"use strict";r.d(t,{CborTag:()=>s});var s;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js":(e,t,r)=>{"use strict";r.d(t,{CborWriter:()=>CborWriter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d,c,l,u,f,p;const h=BigInt(-1);const m=BigInt("0x100000000");const v=24;const _=25;const y=26;const w=27;const g=244;const b=245;const P=246;const S=247;const C=159;const T=191;const k=249;const A=250;const E=251;const j=n.from("ffc00000","hex");const I=n.from("fff0000000000000","hex");const x=n.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=o.CborTag.UnsignedBigNum;if(e<0){e=-e+h;t=o.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const s=n.from(r,"hex");this.writeTag(t);__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.ByteString,s.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),s]),"f");return this}writeBoolean(e){__classPrivateFieldGet(this,d,"m",u).call(this,e?b:g);return this}writeByteString(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.ByteString,e.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeTextString(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Utf8String,n.from(e,"utf8").length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),n.from(e,"utf8")]),"f");return this}writeEncodedValue(e){__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Array,e);else __classPrivateFieldGet(this,d,"m",u).call(this,C);return this}writeEndArray(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Map,e);else __classPrivateFieldGet(this,d,"m",u).call(this,T);return this}writeEndMap(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else __classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,E);this.writeEncodedValue(I);return this}if(e===Number.POSITIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,E);this.writeEncodedValue(x);return this}if(Number.isNaN(e)){__classPrivateFieldGet(this,d,"m",u).call(this,A);this.writeEncodedValue(j);return this}try{t=(0,i.encodeHalf)(e);__classPrivateFieldGet(this,d,"m",u).call(this,k);this.writeEncodedValue(t)}catch{const r=n.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){__classPrivateFieldGet(this,d,"m",u).call(this,A);this.writeEncodedValue(r.valueOf())}else{const s=n.allocUnsafe(8);s.writeFloatBE(e,0);__classPrivateFieldGet(this,d,"m",u).call(this,E);this.writeEncodedValue(s.valueOf())}}return this}writeNull(){__classPrivateFieldGet(this,d,"m",u).call(this,P);return this}writeUndefined(){__classPrivateFieldGet(this,d,"m",u).call(this,S);return this}writeTag(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Tag,e);return this}encodeAsHex(){return __classPrivateFieldGet(this,c,"f").toString("hex")}encode(){return new Uint8Array(__classPrivateFieldGet(this,c,"f"))}reset(){__classPrivateFieldSet(this,c,n.from([]),"f")}constructor(){d.add(this);c.set(this,n.from([]))}}c=new WeakMap,d=new WeakSet,l=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)__classPrivateFieldGet(this,d,"m",u).call(this,r|Number(t));else if(t<256){__classPrivateFieldGet(this,d,"m",u).call(this,r|v);__classPrivateFieldGet(this,d,"m",u).call(this,Number(t))}else if(t<65536){__classPrivateFieldGet(this,d,"m",u).call(this,r|_);__classPrivateFieldGet(this,d,"m",f).call(this,Number(t))}else if(t<4294967296){__classPrivateFieldGet(this,d,"m",u).call(this,r|y);__classPrivateFieldGet(this,d,"m",p).call(this,Number(t))}else{__classPrivateFieldGet(this,d,"m",u).call(this,r|w);__classPrivateFieldGet(this,d,"m",p).call(this,Number(BigInt(t)/m));__classPrivateFieldGet(this,d,"m",p).call(this,Number(BigInt(t)%m))}},u=function _CborWriter_pushUInt8(e){const t=n.allocUnsafe(1);t.writeUInt8(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},f=function _CborWriter_pushUInt16(e){const t=n.allocUnsafe(2);t.writeUInt16BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},p=function _CborWriter_pushUInt32(e){const t=n.allocUnsafe(4);t.writeUInt32BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";r.d(t,{decodeHalf:()=>decodeHalf,encodeHalf:()=>encodeHalf});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const o="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let a=0;a<r;a++)s*=Math.pow(2,Math.floor((t+a)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let a;a=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-a:a};const encodeHalf=e=>{const t=a.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new s.LossOfPrecisionException(o)}let i=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)i+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new s.LossOfPrecisionException(o)}i+=d+8388608>>126-n}else{throw new s.LossOfPrecisionException(o)}const c=new Uint8Array(2);c[0]=i>>>8&255;c[1]=255&i;return c}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";r.d(t,{CborContentException:()=>CborContentException,CborInvalidOperationException:()=>CborInvalidOperationException,LossOfPrecisionException:()=>LossOfPrecisionException});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}class CborContentException extends s.CustomError{constructor(e){super(e)}}class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js":(e,t,r)=>{"use strict";r.d(t,{AuthCommitteeHot:()=>AuthCommitteeHot});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class AuthCommitteeHot{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(i.CertificateKind.AuthCommitteeHot);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.AuthCommitteeHot)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.AuthCommitteeHot}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readStartArray();if(f!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const m=Number(t.readInt());const v=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const _=new AuthCommitteeHot({hash:u,type:l},{hash:v,type:m});__classPrivateFieldSet(_,p,e,"f");return _}toCore(){return{__typename:n.CertificateType.AuthorizeCommitteeHot,coldCredential:__classPrivateFieldGet(this,u,"f"),hotCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return __classPrivateFieldGet(this,u,"f")}hotCredential(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{Certificate:()=>Certificate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var k,A,E,j,I,x,R,M,O,B,D,N,F,H,G,V,K,L,W,z,U;class Certificate{toCbor(){if(__classPrivateFieldGet(this,U,"f"))return __classPrivateFieldGet(this,U,"f");let e;switch(__classPrivateFieldGet(this,k,"f")){case o.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,M,"f").toCbor();break;case o.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,R,"f").toCbor();break;case o.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,x,"f").toCbor();break;case o.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,I,"f").toCbor();break;case o.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,j,"f").toCbor();break;case o.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,E,"f").toCbor();break;case o.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,A,"f").toCbor();break;case o.CertificateKind.Registration:e=__classPrivateFieldGet(this,O,"f").toCbor();break;case o.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,B,"f").toCbor();break;case o.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCbor();break;case o.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,N,"f").toCbor();break;case o.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,F,"f").toCbor();break;case o.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCbor();break;case o.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCbor();break;case o.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,V,"f").toCbor();break;case o.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,K,"f").toCbor();break;case o.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,L,"f").toCbor();break;case o.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,W,"f").toCbor();break;case o.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,z,"f").toCbor();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,k,"f")}`)}return e}static fromCbor(e){let t;const r=new a.CborReader(e);r.readStartArray();const i=Number(r.readInt());switch(i){case o.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(_.StakeRegistration.fromCbor(e));break;case o.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCbor(e));break;case o.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(m.StakeDelegation.fromCbor(e));break;case o.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCbor(e));break;case o.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCbor(e));break;case o.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCbor(e));break;case o.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCbor(e));break;case o.CertificateKind.Registration:t=Certificate.newRegistrationCert(p.Registration.fromCbor(e));break;case o.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCbor(e));break;case o.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCbor(e));break;case o.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(w.StakeVoteDelegation.fromCbor(e));break;case o.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(y.StakeRegistrationDelegation.fromCbor(e));break;case o.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(T.VoteRegistrationDelegation.fromCbor(e));break;case o.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCbor(e));break;case o.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCbor(e));break;case o.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(h.ResignCommitteeCold.fromCbor(e));break;case o.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCbor(e));break;case o.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCbor(e));break;case o.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new d.InvalidStateError(`Unexpected kind value: ${i}`)}__classPrivateFieldSet(t,U,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,k,"f")){case o.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,M,"f").toCore();break;case o.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,R,"f").toCore();break;case o.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,x,"f").toCore();break;case o.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,I,"f").toCore();break;case o.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,j,"f").toCore();break;case o.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,E,"f").toCore();break;case o.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,A,"f").toCore();break;case o.CertificateKind.Registration:e=__classPrivateFieldGet(this,O,"f").toCore();break;case o.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,B,"f").toCore();break;case o.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCore();break;case o.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,N,"f").toCore();break;case o.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,F,"f").toCore();break;case o.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCore();break;case o.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCore();break;case o.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,V,"f").toCore();break;case o.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,K,"f").toCore();break;case o.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,L,"f").toCore();break;case o.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,W,"f").toCore();break;case o.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,z,"f").toCore();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,k,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case i.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(_.StakeRegistration.fromCore(e));break;case i.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCore(e));break;case i.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(m.StakeDelegation.fromCore(e));break;case i.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCore(e));break;case i.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCore(e));break;case i.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCore(e));break;case i.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCore(e));break;case i.CertificateType.Registration:t=Certificate.newRegistrationCert(p.Registration.fromCore(e));break;case i.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCore(e));break;case i.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCore(e));break;case i.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(w.StakeVoteDelegation.fromCore(e));break;case i.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(y.StakeRegistrationDelegation.fromCore(e));break;case i.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(T.VoteRegistrationDelegation.fromCore(e));break;case i.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCore(e));break;case i.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCore(e));break;case i.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(h.ResignCommitteeCold.fromCore(e));break;case i.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCore(e));break;case i.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCore(e));break;case i.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCore(e));break;default:throw new d.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,M,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;__classPrivateFieldSet(t,R,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,x,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,j,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;__classPrivateFieldSet(t,I,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,A,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;__classPrivateFieldSet(t,E,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,O,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,B,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,D,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,N,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,F,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,H,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,G,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;__classPrivateFieldSet(t,V,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;__classPrivateFieldSet(t,K,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,L,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,W,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,z,e,"f");__classPrivateFieldSet(t,k,o.CertificateKind.UpdateDrep,"f");return t}kind(){return __classPrivateFieldGet(this,k,"f")}asStakeRegistration(){return __classPrivateFieldGet(this,M,"f")}asStakeDeregistration(){return __classPrivateFieldGet(this,R,"f")}asStakeDelegation(){return __classPrivateFieldGet(this,x,"f")}asPoolRegistration(){return __classPrivateFieldGet(this,j,"f")}asPoolRetirement(){return __classPrivateFieldGet(this,I,"f")}asGenesisKeyDelegation(){return __classPrivateFieldGet(this,A,"f")}asMoveInstantaneousRewardsCert(){return __classPrivateFieldGet(this,E,"f")}asRegistrationCert(){return __classPrivateFieldGet(this,O,"f")}asUnregistrationCert(){return __classPrivateFieldGet(this,B,"f")}asVoteDelegationCert(){return __classPrivateFieldGet(this,D,"f")}asStakeVoteDelegationCert(){return __classPrivateFieldGet(this,N,"f")}asStakeRegistrationDelegationCert(){return __classPrivateFieldGet(this,F,"f")}asVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,H,"f")}asStakeVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,G,"f")}asAuthCommitteeHotCert(){return __classPrivateFieldGet(this,V,"f")}asResignCommitteeColdCert(){return __classPrivateFieldGet(this,K,"f")}asRegisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,L,"f")}asUnregisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,W,"f")}asUpdateDelegateRepresentativeCert(){return __classPrivateFieldGet(this,z,"f")}constructor(){k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);R.set(this,void 0);M.set(this,void 0);O.set(this,void 0);B.set(this,void 0);D.set(this,void 0);N.set(this,void 0);F.set(this,void 0);H.set(this,void 0);G.set(this,void 0);V.set(this,void 0);K.set(this,void 0);L.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0)}}k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,O=new WeakMap,B=new WeakMap,D=new WeakMap,N=new WeakMap,F=new WeakMap,H=new WeakMap,G=new WeakMap,V=new WeakMap,K=new WeakMap,L=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js":(e,t,r)=>{"use strict";r.d(t,{CertificateKind:()=>s});var s;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js":(e,t,r)=>{"use strict";r.d(t,{DRep:()=>DRep});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;class DRep{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===n.DRepKind.KeyHash||r===n.DRepKind.ScriptHash){const a=s.Hash28ByteBase16(d.HexBlob.fromBytes(t.readByteString()));if(r===n.DRepKind.KeyHash){return DRep.newKeyHash(a)}return DRep.newScriptHash(a)}t.readEndArray();if(r===n.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash)return __classPrivateFieldGet(this,u,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,c.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,c.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===i.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(n.DRepKind.KeyHash,{hash:e,type:i.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(n.DRepKind.ScriptHash,{hash:e,type:i.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(n.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(n.DRepKind.NoConfidence,void 0)}kind(){return __classPrivateFieldGet(this,f,"f")}toKeyHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.KeyHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.ScriptHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,e,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js":(e,t,r)=>{"use strict";r.d(t,{DRepKind:()=>s});var s;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js":(e,t,r)=>{"use strict";r.d(t,{GenesisKeyDelegation:()=>GenesisKeyDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p,h;const m=4;class GenesisKeyDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(i.CertificateKind.GenesisKeyDelegation);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,p,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.GenesisKeyDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.GenesisKeyDelegation}, but got ${a}`);const n=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const l=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const u=s.Hash32ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=new GenesisKeyDelegation(n,l,u);__classPrivateFieldSet(f,h,e,"f");return f}toCore(){return{__typename:n.CertificateType.GenesisKeyDelegation,genesisDelegateHash:__classPrivateFieldGet(this,f,"f"),genesisHash:__classPrivateFieldGet(this,u,"f"),vrfKeyHash:__classPrivateFieldGet(this,p,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return __classPrivateFieldGet(this,u,"f")}setGenesisHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}genesisDelegateHash(){return __classPrivateFieldGet(this,f,"f")}setGenesisDelegateHash(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,p,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t,r){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f");__classPrivateFieldSet(this,p,r,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousReward:()=>MoveInstantaneousReward});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var p,h,m,v;const _=2;class MoveInstantaneousReward{toCbor(){if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");let e;switch(__classPrivateFieldGet(this,m,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,p,"f").toCbor();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,h,"f").toCbor();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,m,"f")}`)}const t=new s.CborWriter;t.writeStartArray(_);t.writeInt(i.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(f.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);let r=t.readStartArray();if(r!==_)throw new n.InvalidArgumentError("cbor",`Expected elements size ${_}, but got ${r}`);const s=Number(t.readInt());if(s!==i.CertificateKind.MoveInstantaneousRewards)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const f=d.HexBlob.fromBytes(t.readEncodedValue());const y=new a.CborReader(f);r=y.readStartArray();if(r!==_)throw new n.InvalidArgumentError("cbor",`Expected elements size ${_}, but got ${r}`);const w=new MoveInstantaneousReward;y.readInt();if(y.peekState()===o.CborReaderState.UnsignedInteger){__classPrivateFieldSet(w,p,l.MoveInstantaneousRewardToOtherPot.fromCbor(f),"f");__classPrivateFieldSet(w,m,c.MirCertificateKind.ToOtherPot,"f")}else if(y.peekState()===o.CborReaderState.StartArray||y.peekState()===o.CborReaderState.StartMap){__classPrivateFieldSet(w,h,u.MoveInstantaneousRewardToStakeCreds.fromCbor(f),"f");__classPrivateFieldSet(w,m,c.MirCertificateKind.ToStakeCreds,"f")}else{throw new n.InvalidArgumentError("cbor","Invalid CBOR string")}__classPrivateFieldSet(w,v,e,"f");return w}toCore(){let e;switch(__classPrivateFieldGet(this,m,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,p,"f").toCore();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,h,"f").toCore();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,m,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case c.MirCertificateKind.ToOtherPot:__classPrivateFieldSet(t,p,l.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");__classPrivateFieldSet(t,m,c.MirCertificateKind.ToOtherPot,"f");break;case c.MirCertificateKind.ToStakeCreds:__classPrivateFieldSet(t,h,u.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");__classPrivateFieldSet(t,m,c.MirCertificateKind.ToStakeCreds,"f");break;default:throw new n.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,m,c.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,m,c.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return __classPrivateFieldGet(this,m,"f")}asToOtherPot(){return __classPrivateFieldGet(this,p,"f")}asToStakeCreds(){return __classPrivateFieldGet(this,h,"f")}constructor(){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0)}}p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToOtherPot:()=>MoveInstantaneousRewardToOtherPot});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(__classPrivateFieldGet(this,n,"f")===o.MirCertificatePot.Reserves?0:1);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());const n=t.readInt();if(s<0||s>1)throw new i.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${s}`);const d=new MoveInstantaneousRewardToOtherPot(0===s?o.MirCertificatePot.Reserves:o.MirCertificatePot.Treasury,n);__classPrivateFieldSet(d,c,e,"f");return d}toCore(){return{__typename:o.CertificateType.MIR,kind:o.MirCertificateKind.ToOtherPot,pot:__classPrivateFieldGet(this,n,"f"),quantity:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){if(e.kind!==o.MirCertificateKind.ToOtherPot)throw new i.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new i.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return __classPrivateFieldGet(this,n,"f")}setPot(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}getAmount(){return __classPrivateFieldGet(this,d,"f")}setAmount(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToStakeCreds:()=>MoveInstantaneousRewardToStakeCreds});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f")===n.MirCertificatePot.Reserves?0:1);const t=new Map([...__classPrivateFieldGet(this,f,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeStartArray(h);e.writeInt(r.type);e.writeByteString(l.from(r.hash,"hex"));e.writeInt(s)}return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a<0||a>1)throw new d.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${a} elements`);t.readStartMap();const l=new Map;while(t.peekState()!==i.CborReaderState.EndMap){t.readStartArray();const u=Number(t.readInt());if(u<0||u>1)throw new d.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${u}`);const f=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const m=t.readInt();l.set({hash:f,type:u},m)}t.readEndMap();const v=new MoveInstantaneousRewardToStakeCreds(0===a?n.MirCertificatePot.Reserves:n.MirCertificatePot.Treasury,l);__classPrivateFieldSet(v,p,e,"f");return v}toCore(){if(0===__classPrivateFieldGet(this,f,"f").size)throw new d.InvalidStateError("The credential map is empty.");const[[e,t]]=__classPrivateFieldGet(this,f,"f");return{__typename:n.CertificateType.MIR,kind:n.MirCertificateKind.ToStakeCreds,pot:__classPrivateFieldGet(this,u,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==n.MirCertificateKind.ToStakeCreds)throw new d.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new d.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return __classPrivateFieldGet(this,u,"f")}setPot(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}getStakeCreds(){return __classPrivateFieldGet(this,f,"f")}setStakeCreds(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js":(e,t,r)=>{"use strict";r.d(t,{PoolMetadata:()=>PoolMetadata});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=64;const p=2;class PoolMetadata{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(p);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new PoolMetadata(a,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{hash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}poolMetadataHash(){return __classPrivateFieldGet(this,l,"f")}setPoolMetadataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>f)throw new i.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js":(e,t,r)=>{"use strict";r.d(t,{PoolParams:()=>PoolParams});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var _=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var y,w,g,b,P,S,C,T,k,A;class PoolParams{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,A,"f"))return __classPrivateFieldGet(this,A,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(_.from(__classPrivateFieldGet(this,y,"f"),"hex"));e.writeByteString(_.from(__classPrivateFieldGet(this,w,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,g,"f"));e.writeInt(__classPrivateFieldGet(this,b,"f"));e.writeEncodedValue(_.from(__classPrivateFieldGet(this,P,"f").toCbor(),"hex"));e.writeByteString(_.from(__classPrivateFieldGet(this,S,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(_.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"));e.writeStartArray(__classPrivateFieldGet(this,T,"f").length);for(const t of __classPrivateFieldGet(this,T,"f"))e.writeEncodedValue(_.from(t.toCbor(),"hex"));if(__classPrivateFieldGet(this,k,"f"))e.writeEncodedValue(_.from(__classPrivateFieldGet(this,k,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new l.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);__classPrivateFieldSet(s,A,e,"f");return s}static fromFlattenedCbor(e){const t=s.Ed25519KeyHashHex(u.HexBlob.fromBytes(e.readByteString()));const r=(0,f.VrfVkHex)(u.HexBlob.fromBytes(e.readByteString()));const o=e.readInt();const i=e.readInt();const l=m.UnitInterval.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));const v=a.Address.fromBytes(u.HexBlob.fromBytes(e.readByteString())).asReward();const _=new Array;let y;const w=d.CborSet.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()),c.Hash.fromCbor);e.readStartArray();while(e.peekState()!==n.CborReaderState.EndArray)_.push(h.Relay.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==n.CborReaderState.Null)y=p.PoolMetadata.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,o,i,l,v,w,_,y)}toCore(){const e=__classPrivateFieldGet(this,S,"f").toAddress();const t={cost:__classPrivateFieldGet(this,b,"f"),id:f.PoolId.fromKeyHash(__classPrivateFieldGet(this,y,"f")),margin:__classPrivateFieldGet(this,P,"f").toCore(),owners:__classPrivateFieldGet(this,C,"f").toCore().map(t=>(0,v.createRewardAccount)(t,e.getNetworkId())),pledge:__classPrivateFieldGet(this,g,"f"),relays:__classPrivateFieldGet(this,T,"f").map(e=>e.toCore()),rewardAccount:__classPrivateFieldGet(this,S,"f").toAddress().toBech32(),vrf:__classPrivateFieldGet(this,w,"f")};if(__classPrivateFieldGet(this,k,"f"))t.metadataJson=__classPrivateFieldGet(this,k,"f").toCore();return t}static fromCore(e){return new PoolParams(f.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,m.UnitInterval.fromCore(e.margin),a.Address.fromBech32(e.rewardAccount).asReward(),d.CborSet.fromCore(e.owners.map(e=>s.Ed25519KeyHashHex(a.Address.fromBech32(e).asReward().getPaymentCredential().hash)),c.Hash.fromCore),e.relays.map(e=>h.Relay.fromCore(e)),e.metadataJson?p.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return __classPrivateFieldGet(this,y,"f")}setOperator(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,w,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}pledge(){return __classPrivateFieldGet(this,g,"f")}setPledge(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}cost(){return __classPrivateFieldGet(this,b,"f")}setCost(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}margin(){return __classPrivateFieldGet(this,P,"f")}setMargin(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}rewardAccount(){return __classPrivateFieldGet(this,S,"f")}setRewardAccount(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}poolOwners(){return __classPrivateFieldGet(this,C,"f")}setPoolOwners(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}relays(){return __classPrivateFieldGet(this,T,"f")}setRelays(e){__classPrivateFieldSet(this,T,[...e],"f");__classPrivateFieldSet(this,A,void 0,"f")}poolMetadata(){return __classPrivateFieldGet(this,k,"f")}setPoolMetadata(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,A,void 0,"f")}constructor(e,t,r,s,a,o,i,n,d){y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,w,t,"f");__classPrivateFieldSet(this,g,r,"f");__classPrivateFieldSet(this,b,s,"f");__classPrivateFieldSet(this,P,a,"f");__classPrivateFieldSet(this,S,o,"f");__classPrivateFieldSet(this,C,i,"f");__classPrivateFieldSet(this,T,n,"f");__classPrivateFieldSet(this,k,d,"f")}}y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":(e,t,r)=>{"use strict";r.d(t,{MultiHostName:()=>MultiHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n;const d=2;const c=2;const l=64;class MultiHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,n,"f"))return __classPrivateFieldGet(this,n,"f");e.writeStartArray(d);e.writeInt(c);e.writeTextString(__classPrivateFieldGet(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==d)throw new o.InvalidArgumentError("cbor",`Expected an array of ${d} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c)throw new o.InvalidArgumentError("cbor",`Expected MultiHostName id ${c}, but got ${s}`);const i=t.readTextString();const l=new MultiHostName(i);__classPrivateFieldSet(l,n,e,"f");return l}toCore(){return{__typename:"RelayByNameMultihost",dnsName:__classPrivateFieldGet(this,i,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return __classPrivateFieldGet(this,i,"f")}setDnsName(e){if(e.length>l)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,n,void 0,"f")}constructor(e){i.set(this,void 0);n.set(this,void 0);if(e.length>l)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,i,e,"f")}}i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js":(e,t,r)=>{"use strict";r.d(t,{Relay:()=>Relay,RelayKind:()=>p});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d,c,l,u,f;var p;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(p||(p={}));class Relay{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");let e;switch(__classPrivateFieldGet(this,u,"f")){case p.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCbor();break;case p.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCbor();break;case p.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCbor();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCbor(e){let t;const r=new s.CborReader(e);r.readStartArray();const d=Number(r.readInt());switch(d){case p.SingleHostAddress:t=Relay.newSingleHostAddr(i.SingleHostAddr.fromCbor(e));break;case p.SingleHostDnsName:t=Relay.newSingleHostName(n.SingleHostName.fromCbor(e));break;case p.MultiHostDnsName:t=Relay.newMultiHostName(o.MultiHostName.fromCbor(e));break;default:throw new a.InvalidStateError(`Unexpected kind value: ${d}`)}__classPrivateFieldSet(t,f,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,u,"f")){case p.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCore();break;case p.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCore();break;case p.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCore();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(i.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(n.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(o.MultiHostName.fromCore(e));break;default:throw new a.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;__classPrivateFieldSet(t,d,e,"f");__classPrivateFieldSet(t,u,p.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;__classPrivateFieldSet(t,c,e,"f");__classPrivateFieldSet(t,u,p.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;__classPrivateFieldSet(t,l,e,"f");__classPrivateFieldSet(t,u,p.MultiHostDnsName,"f");return t}kind(){return __classPrivateFieldGet(this,u,"f")}asSingleHostAddr(){return __classPrivateFieldGet(this,d,"f")}asSingleHostName(){return __classPrivateFieldGet(this,c,"f")}asMultiHostName(){return __classPrivateFieldGet(this,l,"f")}constructor(){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostAddr:()=>SingleHostAddr});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/ip-address/dist/ip-address.js");const ipV4StringToByteArray=e=>{if(!n.Address4.isValid(e))throw new i.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};const byteArrayToIpV4String=e=>{if(4!==e.length)throw new i.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};const ipV6StringToByteArray=e=>{if(!n.Address6.isValid(e))throw new i.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new n.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};const byteArrayToIPv6String=e=>{const t=n.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u;const f=4;const p=0;class SingleHostAddr{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(p);__classPrivateFieldGet(this,d,"f")?e.writeInt(__classPrivateFieldGet(this,d,"f")):e.writeNull();__classPrivateFieldGet(this,c,"f")?e.writeByteString(ipV4StringToByteArray(__classPrivateFieldGet(this,c,"f"))):e.writeNull();__classPrivateFieldGet(this,l,"f")?e.writeByteString(ipV6StringToByteArray(__classPrivateFieldGet(this,l,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==f)throw new i.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p)throw new i.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${p}, but got ${s}`);let n;let d;let c;if(t.peekState()===o.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}if(t.peekState()===o.CborReaderState.Null){t.readNull();d=void 0}else{d=byteArrayToIpV4String(t.readByteString())}if(t.peekState()===o.CborReaderState.Null){t.readNull();c=void 0}else{c=byteArrayToIPv6String(t.readByteString())}const l=new SingleHostAddr(n?Number(n):void 0,d,c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__typename:"RelayByAddress",ipv4:__classPrivateFieldGet(this,c,"f"),ipv6:__classPrivateFieldGet(this,l,"f"),port:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return __classPrivateFieldGet(this,d,"f")}setPort(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv4(){return __classPrivateFieldGet(this,c,"f")}setIpv4(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv6(){return __classPrivateFieldGet(this,l,"f")}setIpv6(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t,r){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostName:()=>SingleHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(u);__classPrivateFieldGet(this,n,"f")?e.writeInt(__classPrivateFieldGet(this,n,"f")):e.writeNull();e.writeTextString(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new i.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u)throw new i.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${s}`);let n;if(t.peekState()===o.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}const d=t.readTextString();const f=new SingleHostName(d,n?Number(n):void 0);__classPrivateFieldSet(f,c,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:__classPrivateFieldGet(this,d,"f"),port:__classPrivateFieldGet(this,n,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return __classPrivateFieldGet(this,n,"f")}setPort(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}dnsName(){return __classPrivateFieldGet(this,d,"f")}setDnsName(e){if(e.length>f)throw new i.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,t,"f");if(e.length>f)throw new i.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js":(e,t,r)=>{"use strict";r.d(t,{PoolRegistration:()=>PoolRegistration});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;const u=d.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeInt(o.CertificateKind.PoolRegistration);return __classPrivateFieldGet(this,c,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new n.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==o.CertificateKind.PoolRegistration)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.PoolRegistration}, but got ${s}`);const i=d.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(i);__classPrivateFieldSet(c,l,e,"f");return c}toCore(){return{__typename:i.CertificateType.PoolRegistration,poolParameters:__classPrivateFieldGet(this,c,"f").toCore()}}static fromCore(e){return new PoolRegistration(d.PoolParams.fromCore(e.poolParameters))}poolParameters(){return __classPrivateFieldGet(this,c,"f")}setPoolParameters(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js":(e,t,r)=>{"use strict";r.d(t,{PoolRetirement:()=>PoolRetirement});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m;const v=3;class PoolRetirement{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(v);e.writeInt(i.CertificateKind.PoolRetirement);e.writeByteString(f.from(__classPrivateFieldGet(this,p,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,h,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.PoolRetirement)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.PoolRetirement}, but got ${a}`);const n=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const u=t.readInt();t.readEndArray();const f=new PoolRetirement(n,(0,d.EpochNo)(Number(u)));__classPrivateFieldSet(f,m,e,"f");return f}toCore(){return{__typename:n.CertificateType.PoolRetirement,epoch:__classPrivateFieldGet(this,h,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,p,"f"))}}static fromCore(e){return new PoolRetirement(u.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return __classPrivateFieldGet(this,p,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}epoch(){return __classPrivateFieldGet(this,h,"f")}setEpoch(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}constructor(e,t){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,t,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{RegisterDelegateRepresentative:()=>RegisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,v,_;const y=2;class RegisterDelegateRepresentative{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(4);e.writeInt(d.CertificateKind.DrepRegistration);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(p.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,m,"f"));if(__classPrivateFieldGet(this,v,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(4!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const o=Number(t.readInt());if(o!==d.CertificateKind.DrepRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.DrepRegistration}, but got ${o}`);const c=t.readStartArray();if(c!==y)throw new l.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const p=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=t.readInt();let m;if(t.peekState()===n.CborReaderState.Null)t.readNull();else m=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const v=new RegisterDelegateRepresentative({hash:p,type:f},h,m);__classPrivateFieldSet(v,_,e,"f");return v}toCore(){return{__typename:c.CertificateType.RegisterDelegateRepresentative,anchor:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,h,"f"),deposit:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,h,"f")}deposit(){return __classPrivateFieldGet(this,m,"f")}anchor(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,v,r,"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js":(e,t,r)=>{"use strict";r.d(t,{Registration:()=>Registration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class Registration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(i.CertificateKind.Registration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.Registration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.Registration}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const m=new Registration({hash:u,type:l},f);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.Registration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js":(e,t,r)=>{"use strict";r.d(t,{ResignCommitteeCold:()=>ResignCommitteeCold});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,v;const _=2;class ResignCommitteeCold{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.ResignCommitteeCold);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(p.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));if(__classPrivateFieldGet(this,m,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const o=Number(t.readInt());if(o!==d.CertificateKind.ResignCommitteeCold)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.ResignCommitteeCold}, but got ${o}`);const c=t.readStartArray();if(c!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const p=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let h;if(t.peekState()===n.CborReaderState.Null)t.readNull();else h=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new ResignCommitteeCold({hash:p,type:f},h);__classPrivateFieldSet(m,v,e,"f");return m}toCore(){return{__typename:c.CertificateType.ResignCommitteeCold,anchor:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,coldCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return __classPrivateFieldGet(this,h,"f")}anchor(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeDelegation:()=>StakeDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,p,h;const m=3;const v=2;class StakeDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(i.CertificateKind.StakeDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,p,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=new StakeDelegation({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.StakeDelegation,poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,p,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}setStakeCredential(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}poolKeyHash(){return __classPrivateFieldGet(this,p,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,t,"f")}}f=new WeakMap,p=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeDeregistration:()=>StakeDeregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=2;class StakeDeregistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeInt(i.CertificateKind.StakeDeregistration);e.writeStartArray(p);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeDeregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeDeregistration}, but got ${a}`);const n=t.readStartArray();if(n!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const h=new StakeDeregistration({hash:u,type:l});__classPrivateFieldSet(h,f,e,"f");return h}toCore(){return{__typename:n.CertificateType.StakeDeregistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistration:()=>StakeRegistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=2;class StakeRegistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeInt(i.CertificateKind.StakeRegistration);e.writeStartArray(p);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeRegistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeRegistration}, but got ${a}`);const n=t.readStartArray();if(n!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const h=new StakeRegistration({hash:u,type:l});__classPrivateFieldSet(h,f,e,"f");return h}toCore(){return{__typename:n.CertificateType.StakeRegistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistrationDelegation:()=>StakeRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,p,h,m;const v=2;class StakeRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(4);e.writeInt(i.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,p,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,h,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(4!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeRegistrationDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));const p=t.readInt();t.readEndArray();const h=new StakeRegistrationDelegation({hash:u,type:l},p,f);__classPrivateFieldSet(h,m,e,"f");return h}toCore(){return{__typename:n.CertificateType.StakeRegistrationDelegation,deposit:__classPrivateFieldGet(this,h,"f"),poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,p,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}deposit(){return __classPrivateFieldGet(this,h,"f")}poolKeyHash(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r){f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,t,"f");__classPrivateFieldSet(this,p,r,"f")}}f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteDelegation:()=>StakeVoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,v,_;const y=2;class StakeVoteDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(4);e.writeInt(i.CertificateKind.StakeVoteDelegation);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(p.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeByteString(p.from(__classPrivateFieldGet(this,m,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeVoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeVoteDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==y)throw new c.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new StakeVoteDelegation({hash:f,type:u},h,p);__classPrivateFieldSet(m,_,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeVoteDelegation,dRep:__classPrivateFieldGet(this,v,"f").toCore(),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,m,"f")),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}drep(){return __classPrivateFieldGet(this,v,"f")}poolKeyHash(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,v,t,"f");__classPrivateFieldSet(this,m,r,"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteRegistrationDelegation:()=>StakeVoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,v,_,y;const w=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");e.writeStartArray(5);e.writeInt(i.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(w);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(p.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeByteString(p.from(__classPrivateFieldGet(this,v,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,_,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(5!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.StakeVoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.StakeVoteRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==w)throw new c.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const m=t.readInt();t.readEndArray();const v=new StakeVoteRegistrationDelegation({hash:f,type:u},m,h,p);__classPrivateFieldSet(v,y,e,"f");return v}toCore(){return{__typename:n.CertificateType.StakeVoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,m,"f").toCore(),deposit:__classPrivateFieldGet(this,_,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,v,"f")),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}deposit(){return __classPrivateFieldGet(this,_,"f")}dRep(){return __classPrivateFieldGet(this,m,"f")}poolKeyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r,s){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,_,t,"f");__classPrivateFieldSet(this,m,r,"f");__classPrivateFieldSet(this,v,s,"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UnregisterDelegateRepresentative:()=>UnregisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class UnregisterDelegateRepresentative{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(i.CertificateKind.DrepUnregistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.DrepUnregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.DrepUnregistration}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const m=new UnregisterDelegateRepresentative({hash:u,type:l},f);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.UnregisterDelegateRepresentative,dRepCredential:__classPrivateFieldGet(this,u,"f"),deposit:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return __classPrivateFieldGet(this,u,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js":(e,t,r)=>{"use strict";r.d(t,{Unregistration:()=>Unregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class Unregistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(i.CertificateKind.Unregistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.Unregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.Unregistration}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const m=new Unregistration({hash:u,type:l},f);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.Unregistration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UpdateDelegateRepresentative:()=>UpdateDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,v;const _=2;class UpdateDelegateRepresentative{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.UpdateDrep);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(p.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));if(__classPrivateFieldGet(this,m,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const o=Number(t.readInt());if(o!==d.CertificateKind.UpdateDrep)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.UpdateDrep}, but got ${o}`);const c=t.readStartArray();if(c!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const p=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let h;if(t.peekState()===n.CborReaderState.Null)t.readNull();else h=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new UpdateDelegateRepresentative({hash:p,type:f},h);__classPrivateFieldSet(m,v,e,"f");return m}toCore(){return{__typename:c.CertificateType.UpdateDelegateRepresentative,anchor:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,h,"f")}anchor(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteDelegation:()=>VoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m;const v=2;class VoteDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(3);e.writeInt(i.CertificateKind.VoteDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,p,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,p,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.VoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.VoteDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const h=new VoteDelegation({hash:f,type:u},p);__classPrivateFieldSet(h,m,e,"f");return h}toCore(){return{__typename:n.CertificateType.VoteDelegation,dRep:__classPrivateFieldGet(this,h,"f").toCore(),stakeCredential:__classPrivateFieldGet(this,p,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,p,"f")}dRep(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,t,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteRegistrationDelegation:()=>VoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m,v;const _=2;class VoteRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(4);e.writeInt(i.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,p,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,p,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,m,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==i.CertificateKind.VoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.VoteRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==_)throw new c.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const h=t.readInt();t.readEndArray();const m=new VoteRegistrationDelegation({hash:f,type:u},h,p);__classPrivateFieldSet(m,v,e,"f");return m}toCore(){return{__typename:n.CertificateType.VoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,h,"f").toCore(),deposit:__classPrivateFieldGet(this,m,"f"),stakeCredential:__classPrivateFieldGet(this,p,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,p,"f")}deposit(){return __classPrivateFieldGet(this,m,"f")}dRep(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t,r){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,h,r,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js":(e,t,r)=>{"use strict";r.d(t,{Anchor:()=>Anchor});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;const p=128;class Anchor{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==f)throw new i.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new Anchor(a,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{dataHash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}dataHash(){return __classPrivateFieldGet(this,l,"f")}setDataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>p)throw new i.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js":(e,t,r)=>{"use strict";r.d(t,{CborSet:()=>CborSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class CborSet{static fromCbor(e,t){const r=new s.CborReader(e);const i=new CborSet([]);if(r.peekState()===a.CborReaderState.Tag&&r.peekTag()===o.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==a.CborReaderState.EndArray){__classPrivateFieldGet(i,l,"f").push(t(n.HexBlob.fromBytes(r.readEncodedValue())))}__classPrivateFieldSet(i,u,e,"f");return i}toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new i.CborWriter;if(d.inConwayEra)e.writeTag(o.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(c.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return __classPrivateFieldGet(this,l,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return __classPrivateFieldGet(this,l,"f")}setValues(e){__classPrivateFieldSet(this,l,[...e],"f");__classPrivateFieldSet(this,u,void 0,"f")}size(){return __classPrivateFieldGet(this,l,"f").length}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,[...e],"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js":(e,t,r)=>{"use strict";r.d(t,{Credential:()=>Credential});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;const c=2;class Credential{toCbor(){const e=new s.CborWriter;e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,d,"f").type);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);if(t.readStartArray()!==c)throw new o.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=i.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...__classPrivateFieldGet(this,d,"f")}}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js":(e,t,r)=>{"use strict";r.d(t,{Datum:()=>Datum,DatumKind:()=>h,isDatumHash:()=>isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;const p=2;const isDatumHash=e=>null!==e&&"string"==typeof e;var h;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(h||(h={}));class Datum{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeInt(__classPrivateFieldGet(this,c,"f"));if(__classPrivateFieldGet(this,c,"f")===h.DataHash)e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex").valueOf());else e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new o.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let d;let c;switch(s){case h.DataHash:d=i.HexBlob.fromBytes(t.readByteString());break;case h.InlineData:c=n.PlutusData.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new o.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const l=new Datum(d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){let e;switch(__classPrivateFieldGet(this,c,"f")){case h.DataHash:e=__classPrivateFieldGet(this,l,"f");break;case h.InlineData:e=__classPrivateFieldGet(this,u,"f").toCore();break;default:throw new o.InvalidStateError(`Unexpected datum kind ${__classPrivateFieldGet(this,c,"f")}`)}return e}static fromCore(e){if(isDatumHash(e))return new Datum(e);return new Datum(void 0,n.PlutusData.fromCore(e))}kind(){return __classPrivateFieldGet(this,c,"f")}asDataHash(){return __classPrivateFieldGet(this,l,"f")}asInlineData(){return __classPrivateFieldGet(this,u,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);if(e&&t)throw new o.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new o.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)__classPrivateFieldSet(this,c,h.DataHash,"f");if(t)__classPrivateFieldSet(this,c,h.InlineData,"f");__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js":(e,t,r)=>{"use strict";r.d(t,{ExUnits:()=>ExUnits});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;const c=2;class ExUnits{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,i,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new o.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=t.readUInt();const i=t.readUInt();t.readEndArray();const n=new ExUnits(s,i);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{memory:Number(__classPrivateFieldGet(this,i,"f")),steps:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return __classPrivateFieldGet(this,i,"f")}setMem(e){__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}steps(){return __classPrivateFieldGet(this,n,"f")}setSteps(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}add(e){const t=__classPrivateFieldGet(this,i,"f")+__classPrivateFieldGet(e,i,"f");const r=__classPrivateFieldGet(this,n,"f")+__classPrivateFieldGet(e,n,"f");return new ExUnits(t,r)}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,n,t,"f")}}i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionId:()=>GovernanceActionId});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class GovernanceActionId{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new o.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new GovernanceActionId(i.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{actionIndex:Number(__classPrivateFieldGet(this,c,"f")),id:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){return __classPrivateFieldGet(this,c,"f")===__classPrivateFieldGet(e,c,"f")&&__classPrivateFieldGet(this,d,"f")===__classPrivateFieldGet(e,d,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js":(e,t,r)=>{"use strict";r.d(t,{Hash:()=>Hash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;class Hash{toCbor(){const e=new s.CborWriter;e.writeByteString(i.from(__classPrivateFieldGet(this,n,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);return new Hash(o.HexBlob.fromBytes(t.readByteString()))}toCore(){return __classPrivateFieldGet(this,n,"f")}static fromCore(e){return new Hash(e)}value(){return __classPrivateFieldGet(this,n,"f")}constructor(e){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f")}}n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolVersion:()=>ProtocolVersion});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d;const c=2;class ProtocolVersion{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,i,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new o.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readInt());const i=Number(t.readInt());t.readEndArray();const n=new ProtocolVersion(s,i);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{major:Number(__classPrivateFieldGet(this,i,"f")),minor:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return __classPrivateFieldGet(this,i,"f")}setMajor(e){__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}minor(){return __classPrivateFieldGet(this,n,"f")}setMinor(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}constructor(e,t){i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,n,t,"f")}}i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js":(e,t,r)=>{"use strict";r.d(t,{UnitInterval:()=>UnitInterval});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/fraction.js/fraction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new n(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeTag(a.CborTag.RationalNumber);e.writeStartArray(u);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);if(t.readTag()!==a.CborTag.RationalNumber)throw new i.InvalidArgumentError("cbor",`Expected tag ${a.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==u)throw new i.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readInt();const n=t.readInt();t.readEndArray();const d=new UnitInterval(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{denominator:Number(__classPrivateFieldGet(this,c,"f")),numerator:Number(__classPrivateFieldGet(this,d,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return __classPrivateFieldGet(this,d,"f")}setNumerator(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}denominator(){return __classPrivateFieldGet(this,c,"f")}setDenominator(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}toFloat(){return Number(__classPrivateFieldGet(this,d,"f"))/Number(__classPrivateFieldGet(this,c,"f"))}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js":(e,t,r)=>{"use strict";r.d(t,{ConstrPlutusData:()=>ConstrPlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=102n;const u=7n;class ConstrPlutusData{toCbor(){const e=new s.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(__classPrivateFieldGet(this,d,"f"));e.writeTag(Number(t));if(t!==l)e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()))}return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new a.CborReader(e);const r=t.readTag();if(r===Number(l)){t.readStartArray();const s=t.readInt();const n=t.readEncodedValue();const d=i.PlutusList.fromCbor(o.HexBlob.fromBytes(n));t.readEndArray();return new ConstrPlutusData(s,d)}const c=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const u=t.readEncodedValue();const f=i.PlutusList.fromCbor(o.HexBlob.fromBytes(u));return new ConstrPlutusData(c,f)}getAlternative(){return __classPrivateFieldGet(this,d,"f")}getData(){return __classPrivateFieldGet(this,c,"f")}equals(e){if(__classPrivateFieldGet(this,d,"f")!==__classPrivateFieldGet(e,d,"f"))return false;return __classPrivateFieldGet(this,c,"f").equals(__classPrivateFieldGet(e,c,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+u;return l}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-u+e;return l}constructor(e,t){d.set(this,0n);c.set(this,new i.PlutusList);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js":(e,t,r)=>{"use strict";r.d(t,{PlutusData:()=>PlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var a=r("../../node_modules/blake2b-no-wasm/index.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var _=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var y,w,g,b,P,S,C;const T=0xffffffffffffffffn;const k=new Uint8Array([95]);const A=64;const E=32;const j=BigInt(-1);class PlutusData{toCbor(){if(__classPrivateFieldGet(this,C,"f"))return __classPrivateFieldGet(this,C,"f");let e;switch(__classPrivateFieldGet(this,S,"f")){case p.PlutusDataKind.ConstrPlutusData:e=__classPrivateFieldGet(this,P,"f").toCbor();break;case p.PlutusDataKind.Map:e=__classPrivateFieldGet(this,y,"f").toCbor();break;case p.PlutusDataKind.List:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case p.PlutusDataKind.Bytes:{const t=new i.CborWriter;if(__classPrivateFieldGet(this,b,"f").length<=A)t.writeByteString(__classPrivateFieldGet(this,b,"f"));else{t.writeEncodedValue(k);for(let r=0;r<__classPrivateFieldGet(this,b,"f").length;r+=A){const s=__classPrivateFieldGet(this,b,"f").slice(r,r+A);t.writeByteString(s)}t.writeEndArray()}e=(0,v.bytesToHex)(t.encode());break}case p.PlutusDataKind.Integer:{const a=new i.CborWriter;if(__classPrivateFieldGet(this,g,"f")>=0&&__classPrivateFieldGet(this,g,"f")<=T||__classPrivateFieldGet(this,g,"f")<0&&__classPrivateFieldGet(this,g,"f")>=-1n-T)a.writeInt(__classPrivateFieldGet(this,g,"f"));else{const o=PlutusData.bigintToBuffer(__classPrivateFieldGet(this,g,"f"));a.writeTag(__classPrivateFieldGet(this,g,"f")<0?n.CborTag.NegativeBigNum:n.CborTag.UnsignedBigNum);if(o.length<=A)a.writeByteString(o);else{a.writeEncodedValue(k);for(let d=0;d<o.length;d+=A){const c=o.slice(d,d+A);a.writeByteString(c)}a.writeEndArray()}}e=(0,v.bytesToHex)(a.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new d.CborReader(e);const s=r.peekState();switch(s){case c.CborReaderState.Tag:{const a=r.peekTag();switch(a){case n.CborTag.UnsignedBigNum:{r.readTag();const o=r.readByteString();__classPrivateFieldSet(t,g,PlutusData.bufferToBigint(o),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Integer,"f");break}case n.CborTag.NegativeBigNum:{r.readTag();const i=r.readByteString();__classPrivateFieldSet(t,g,PlutusData.bufferToBigint(i)*-1n,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Integer,"f");break}default:__classPrivateFieldSet(t,P,l.ConstrPlutusData.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.ConstrPlutusData,"f")}break}case c.CborReaderState.NegativeInteger:case c.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,g,r.readInt(),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Integer,"f");break;case c.CborReaderState.StartIndefiniteLengthByteString:case c.CborReaderState.ByteString:__classPrivateFieldSet(t,b,r.readByteString(),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Bytes,"f");break;case c.CborReaderState.StartArray:__classPrivateFieldSet(t,w,h.PlutusList.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.List,"f");break;case c.CborReaderState.StartMap:__classPrivateFieldSet(t,y,m.PlutusMap.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,C,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,S,"f")){case p.PlutusDataKind.Bytes:return __classPrivateFieldGet(this,b,"f");case p.PlutusDataKind.ConstrPlutusData:{const e=__classPrivateFieldGet(this,P,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case p.PlutusDataKind.Integer:return __classPrivateFieldGet(this,g,"f");case p.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(__classPrivateFieldGet(this,w,"f"));case p.PlutusDataKind.Map:{const t=__classPrivateFieldGet(this,y,"f");const r=new Map;const s=t.getKeys();for(let a=0;a<s.getLength();a++){const o=s.get(a);r.set(o.toCore(),t.get(o).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new f.NotImplementedError(`PlutusData mapping for kind ${__classPrivateFieldGet(this,S,"f")}`)}}hash(){const e=a(E).update(_.from(this.toCbor(),"hex")).digest();return o.Hash32ByteBase16(u.HexBlob.fromBytes(e))}static fromCore(e){if(s.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(s.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(s.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(s.isPlutusMap(e)){const t=new m.PlutusMap;for(const[r,a]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(a));return PlutusData.newMap(t)}if(s.isConstrPlutusData(e)){const o=e.constructor;const i=new l.ConstrPlutusData(o,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(i)}throw new f.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;__classPrivateFieldSet(t,P,e,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;__classPrivateFieldSet(t,g,e,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;__classPrivateFieldSet(t,b,e,"f");__classPrivateFieldSet(t,S,p.PlutusDataKind.Bytes,"f");return t}getKind(){return __classPrivateFieldGet(this,S,"f")}asConstrPlutusData(){return __classPrivateFieldGet(this,P,"f")}asMap(){return __classPrivateFieldGet(this,y,"f")}asList(){return __classPrivateFieldGet(this,w,"f")}asInteger(){return __classPrivateFieldGet(this,g,"f")}asBoundedBytes(){return __classPrivateFieldGet(this,b,"f")}equals(e){switch(__classPrivateFieldGet(this,S,"f")){case p.PlutusDataKind.Bytes:if(__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(e,b,"f")){return __classPrivateFieldGet(this,b,"f").length===__classPrivateFieldGet(e,b,"f").length&&__classPrivateFieldGet(this,b,"f").every((t,r)=>t===__classPrivateFieldGet(e,b,"f")[r])}return false;case p.PlutusDataKind.Integer:return __classPrivateFieldGet(this,g,"f")===__classPrivateFieldGet(e,g,"f");case p.PlutusDataKind.ConstrPlutusData:if(__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(e,P,"f")){return __classPrivateFieldGet(this,P,"f").equals(__classPrivateFieldGet(e,P,"f"))}return false;case p.PlutusDataKind.List:if(__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(e,w,"f")){return __classPrivateFieldGet(this,w,"f").equals(__classPrivateFieldGet(e,w,"f"))}return false;case p.PlutusDataKind.Map:if(__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(e,y,"f")){return __classPrivateFieldGet(this,y,"f").equals(__classPrivateFieldGet(e,y,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new h.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+j;let t=e.toString(16);if(t.length%2)t=`0${t}`;return _.from(t,"hex")}constructor(){y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,p.PlutusDataKind.ConstrPlutusData);C.set(this,void 0)}}y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js":(e,t,r)=>{"use strict";r.d(t,{PlutusDataKind:()=>s});var s;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js":(e,t,r)=>{"use strict";r.d(t,{PlutusList:()=>PlutusList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;class PlutusList{toCbor(){const e=new s.CborWriter;const t=__classPrivateFieldGet(this,c,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const r of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new a.CborReader(e);r.readStartArray();while(r.peekState()!==o.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array)}}c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js":(e,t,r)=>{"use strict";r.d(t,{PlutusMap:()=>PlutusMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var l,u;class PlutusMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new a.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==o.CborReaderState.EndMap){const i=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const d=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(i,d)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new d.PlutusList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js":(e,t,r)=>{"use strict";r.d(t,{NativeScript:()=>NativeScript});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,_,y,w,g,b,P,S;const C=28;class NativeScript{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");let e;switch(__classPrivateFieldGet(this,P,"f")){case d.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case d.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,v,"f").toCbor();break;case d.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,_,"f").toCbor();break;case d.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,y,"f").toCbor();break;case d.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,b,"f").toCbor();break;case d.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,g,"f").toCbor();break;default:throw new i.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,P,"f")}`)}return e}static fromCbor(e){let t;const r=new o.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case d.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(f.ScriptPubkey.fromCbor(e));break;case d.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(c.ScriptAll.fromCbor(e));break;case d.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(l.ScriptAny.fromCbor(e));break;case d.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(u.ScriptNOfK.fromCbor(e));break;case d.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(h.TimelockStart.fromCbor(e));break;case d.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(p.TimelockExpiry.fromCbor(e));break;default:throw new i.InvalidStateError(`Unexpected kind value: ${s}`)}__classPrivateFieldSet(t,S,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,P,"f")){case d.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,w,"f").toCore();break;case d.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,v,"f").toCore();break;case d.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,_,"f").toCore();break;case d.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,y,"f").toCore();break;case d.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,b,"f").toCore();break;case d.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,g,"f").toCore();break;default:throw new i.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,P,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case d.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(f.ScriptPubkey.fromCore(e));break;case d.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(c.ScriptAll.fromCore(e));break;case d.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(l.ScriptAny.fromCore(e));break;case d.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(u.ScriptNOfK.fromCore(e));break;case d.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(h.TimelockStart.fromCore(e));break;case d.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(p.TimelockExpiry.fromCore(e));break;default:throw new i.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;const t=s(C).update(m.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}kind(){return __classPrivateFieldGet(this,P,"f")}static newScriptPubkey(e){const t=new NativeScript;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;__classPrivateFieldSet(t,b,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;__classPrivateFieldSet(t,g,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return __classPrivateFieldGet(this,w,"f")}asScriptAll(){return __classPrivateFieldGet(this,v,"f")}asScriptAny(){return __classPrivateFieldGet(this,_,"f")}asScriptNOfK(){return __classPrivateFieldGet(this,y,"f")}asTimelockStart(){return __classPrivateFieldGet(this,b,"f")}asTimelockExpiry(){return __classPrivateFieldGet(this,g,"f")}constructor(){v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0)}}v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAll:()=>ScriptAll});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=2;class ScriptAll{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeInt(c.NativeScriptKind.RequireAllOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAllOf)throw new i.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAll(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAllOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAny:()=>ScriptAny});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=2;class ScriptAny{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeInt(c.NativeScriptKind.RequireAnyOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAnyOf)throw new i.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAny(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAnyOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js":(e,t,r)=>{"use strict";r.d(t,{ScriptNOfK:()=>ScriptNOfK});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=3;class ScriptNOfK{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(h);e.writeInt(c.NativeScriptKind.RequireNOf);e.writeInt(__classPrivateFieldGet(this,f,"f"));e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireNOf)throw new i.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireNOf}, but got kind ${s}`);const l=t.readInt();const u=new Array;t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray)u.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const f=new ScriptNOfK(u,Number(l));__classPrivateFieldSet(f,p,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireNOf,required:__classPrivateFieldGet(this,f,"f"),scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>d.NativeScript.fromCore(e)),e.required)}required(){return __classPrivateFieldGet(this,f,"f")}setRequired(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js":(e,t,r)=>{"use strict";r.d(t,{ScriptPubkey:()=>ScriptPubkey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=2;class ScriptPubkey{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(d.NativeScriptKind.RequireSignature);e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==f)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.NativeScriptKind.RequireSignature)throw new i.InvalidArgumentError("cbor",`Expected kind ${d.NativeScriptKind.RequireSignature}, but got kind ${a}`);const c=s.Ed25519KeyHashHex(n.HexBlob.fromBytes(t.readByteString()));const l=new ScriptPubkey(c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__type:d.ScriptType.Native,keyHash:__classPrivateFieldGet(this,l,"f"),kind:d.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return __classPrivateFieldGet(this,l,"f")}setKeyHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js":(e,t,r)=>{"use strict";r.d(t,{TimelockExpiry:()=>TimelockExpiry});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockExpiry{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(i.NativeScriptKind.RequireTimeBefore);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==i.NativeScriptKind.RequireTimeBefore)throw new o.InvalidArgumentError("cbor",`Expected kind ${i.NativeScriptKind.RequireTimeBefore}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockExpiry(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:i.ScriptType.Native,kind:i.NativeScriptKind.RequireTimeBefore,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js":(e,t,r)=>{"use strict";r.d(t,{TimelockStart:()=>TimelockStart});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockStart{toCbor(){if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");const e=new s.CborWriter;e.writeStartArray(l);e.writeInt(i.NativeScriptKind.RequireTimeAfter);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==i.NativeScriptKind.RequireTimeAfter)throw new o.InvalidArgumentError("cbor",`Expected kind ${i.NativeScriptKind.RequireTimeAfter}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockStart(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:i.ScriptType.Native,kind:i.NativeScriptKind.RequireTimeAfter,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV1Script:()=>PlutusV1Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=28;class PlutusV1Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new o.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V1)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;const t=s(p).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV2Script:()=>PlutusV2Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=28;class PlutusV2Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new o.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V2)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;const t=s(p).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV3Script:()=>PlutusV3Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const p=28;class PlutusV3Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new o.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V3)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;const t=s(p).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js":(e,t,r)=>{"use strict";r.d(t,{Script:()=>Script});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var f;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(f||(f={}));var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var h,m,v,_,y,w;const g=2;class Script{toCbor(){if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");const e=new s.CborWriter;let t;switch(__classPrivateFieldGet(this,y,"f")){case f.Native:t=__classPrivateFieldGet(this,h,"f").toCbor();break;case f.PlutusV1:t=__classPrivateFieldGet(this,m,"f").toCbor();break;case f.PlutusV2:t=__classPrivateFieldGet(this,v,"f").toCbor();break;case f.PlutusV3:t=__classPrivateFieldGet(this,_,"f").toCbor();break;default:throw new o.InvalidStateError(`Unexpected language value: ${__classPrivateFieldGet(this,y,"f")}`)}e.writeStartArray(g);e.writeInt(__classPrivateFieldGet(this,y,"f"));e.writeEncodedValue(p.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new a.CborReader(e);r.readStartArray();const s=Number(r.readInt());const d=i.HexBlob.fromBytes(r.readEncodedValue());switch(s){case f.Native:t=Script.newNativeScript(n.NativeScript.fromCbor(d));break;case f.PlutusV1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCbor(d));break;case f.PlutusV2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCbor(d));break;case f.PlutusV3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCbor(d));break;default:throw new o.InvalidStateError(`Unexpected language value: ${s}`)}__classPrivateFieldSet(t,w,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,y,"f")){case f.Native:e=__classPrivateFieldGet(this,h,"f").toCore();break;case f.PlutusV1:e=__classPrivateFieldGet(this,m,"f").toCore();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").toCore();break;case f.PlutusV3:e=__classPrivateFieldGet(this,_,"f").toCore();break;default:throw new o.InvalidStateError(`Unexpected language: ${__classPrivateFieldGet(this,y,"f")}`)}return e}static fromCore(e){let t;if((0,d.isNativeScript)(e))t=Script.newNativeScript(n.NativeScript.fromCore(e));else{switch(e.version){case d.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCore(e));break;case d.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCore(e));break;case d.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCore(e));break;default:throw new o.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return __classPrivateFieldGet(this,y,"f")}static newNativeScript(e){const t=new Script;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,y,f.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,y,f.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,y,f.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,y,f.PlutusV3,"f");return t}asNative(){return __classPrivateFieldGet(this,h,"f")}asPlutusV1(){return __classPrivateFieldGet(this,m,"f")}asPlutusV2(){return __classPrivateFieldGet(this,v,"f")}asPlutusV3(){return __classPrivateFieldGet(this,_,"f")}hash(){let e;switch(__classPrivateFieldGet(this,y,"f")){case f.Native:e=__classPrivateFieldGet(this,h,"f").hash();break;case f.PlutusV1:e=__classPrivateFieldGet(this,m,"f").hash();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").hash();break;case f.PlutusV3:e=__classPrivateFieldGet(this,_,"f").hash();break;default:throw new o.InvalidStateError(`Unexpected script language ${__classPrivateFieldGet(this,y,"f")}`)}return e}constructor(){h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0)}}h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{Transaction:()=>Transaction,TxBodyCBOR:()=>TxBodyCBOR,TxCBOR:()=>TxCBOR,deserializeTx:()=>deserializeTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,p,h,m,v;const _=4;class Transaction{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(_);e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor()));e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));e.writeBoolean(__classPrivateFieldGet(this,m,"f"));if(__classPrivateFieldGet(this,h,"f"))e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();const a=t.readEncodedValue();const l=d.TransactionBody.fromCbor(n.HexBlob.fromBytes(a));const u=c.TransactionWitnessSet.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));let f=true;if(r===_)f=t.readBoolean();let p;if(t.peekState()!==i.CborReaderState.Null)p=s.AuxiliaryData.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const h=new Transaction(l,u,p);__classPrivateFieldSet(h,m,f,"f");__classPrivateFieldSet(h,v,e,"f");return h}toCore(){const e={body:__classPrivateFieldGet(this,f,"f").toCore(),id:this.getId(),isValid:__classPrivateFieldGet(this,m,"f"),witness:__classPrivateFieldGet(this,p,"f").toCore()};if(__classPrivateFieldGet(this,h,"f"))e.auxiliaryData=__classPrivateFieldGet(this,h,"f").toCore();return e}static fromCore(e){const t=new Transaction(d.TransactionBody.fromCore(e.body),c.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?s.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return d.TransactionBody.fromCbor(__classPrivateFieldGet(this,f,"f").toCbor())}setBody(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}witnessSet(){return c.TransactionWitnessSet.fromCbor(__classPrivateFieldGet(this,p,"f").toCbor())}setWitnessSet(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}isValid(){return __classPrivateFieldGet(this,m,"f")}setIsValid(e){__classPrivateFieldSet(this,v,void 0,"f");__classPrivateFieldSet(this,m,e,"f")}auxiliaryData(){if(__classPrivateFieldGet(this,h,"f")){return s.AuxiliaryData.fromCbor(__classPrivateFieldGet(this,h,"f").toCbor())}return}setAuxiliaryData(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}getId(){return __classPrivateFieldGet(this,f,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,true);v.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,h,r,"f")}}f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap;const TxCBOR=e=>(0,n.HexBlob)(e);TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,n.HexBlob)(e);TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();const deserializeTx=e=>{const t=e instanceof u?e.toString("hex"):e instanceof Uint8Array?u.from(e).toString("hex"):e;const r=Transaction.fromCbor(TxCBOR(t));return r.toCore()};TxCBOR.deserialize=e=>deserializeTx(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js":(e,t,r)=>{"use strict";r.d(t,{Constitution:()=>Constitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const p=2;class Constitution{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor()));__classPrivateFieldGet(this,u,"f")?e.writeByteString((0,c.hexToBytes)(__classPrivateFieldGet(this,u,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==p)throw new n.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=s.Anchor.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));let c;if(t.peekState()===i.CborReaderState.Null)t.readNull();else c=d.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new Constitution(a,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f").toCore(),scriptHash:__classPrivateFieldGet(this,u,"f")?__classPrivateFieldGet(this,u,"f"):null}}static fromCore(e){return new Constitution(s.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}scriptHash(){return __classPrivateFieldGet(this,u,"f")}setScriptHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionKind:()=>s});var s;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":(e,t,r)=>{"use strict";r.d(t,{HardForkInitiationAction:()=>HardForkInitiationAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m;const v=3;class HardForkInitiationAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(v);e.writeInt(n.GovernanceActionKind.HardForkInitiation);__classPrivateFieldGet(this,h,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.HardForkInitiation)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.HardForkInitiation} but got ${s}`);let d;if(t.peekState()===o.CborReaderState.Null)t.readNull();else d=i.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolVersion.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const p=new HardForkInitiationAction(f,d);__classPrivateFieldSet(p,m,e,"f");return p}toCore(){return{__typename:d.GovernanceActionType.hard_fork_initiation_action,governanceActionId:__classPrivateFieldGet(this,h,"f")?__classPrivateFieldGet(this,h,"f").toCore():null,protocolVersion:__classPrivateFieldGet(this,p,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(u.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?i.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,h,"f")}protocolVersion(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,t,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":(e,t,r)=>{"use strict";r.d(t,{InfoAction:()=>InfoAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d;const c=1;class InfoAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(o.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==o.GovernanceActionKind.Info)throw new n.InvalidArgumentError("cbor",`Expected action kind, expected ${o.GovernanceActionKind.Info} but got ${s}`);const i=new InfoAction;__classPrivateFieldSet(i,d,e,"f");return i}toCore(){return{__typename:i.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){d.set(this,void 0)}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":(e,t,r)=>{"use strict";r.d(t,{NewConstitution:()=>NewConstitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m;const v=3;class NewConstitution{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(v);e.writeInt(d.GovernanceActionKind.NewConstitution);__classPrivateFieldGet(this,h,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==v)throw new l.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.NewConstitution)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.NewConstitution} but got ${s}`);let c;if(t.peekState()===o.CborReaderState.Null)t.readNull();else c=n.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const f=i.Constitution.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const p=new NewConstitution(f,c);__classPrivateFieldSet(p,m,e,"f");return p}toCore(){return{__typename:c.GovernanceActionType.new_constitution,constitution:__classPrivateFieldGet(this,p,"f").toCore(),governanceActionId:__classPrivateFieldGet(this,h,"f")?__classPrivateFieldGet(this,h,"f").toCore():null}}static fromCore(e){return new NewConstitution(i.Constitution.fromCore(e.constitution),null!==e.governanceActionId?n.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,h,"f")}constitution(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,t,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":(e,t,r)=>{"use strict";r.d(t,{NoConfidence:()=>NoConfidence});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,p;const h=2;class NoConfidence{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(h);e.writeInt(n.GovernanceActionKind.NoConfidence);__classPrivateFieldGet(this,f,"f")?e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new c.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.NoConfidence)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.NoConfidence}  but got ${s}`);let d;if(t.peekState()===o.CborReaderState.Null)t.readNull();else d=i.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const u=new NoConfidence(d);__classPrivateFieldSet(u,p,e,"f");return u}toCore(){return{__typename:d.GovernanceActionType.no_confidence,governanceActionId:__classPrivateFieldGet(this,f,"f")?__classPrivateFieldGet(this,f,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?i.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,f,"f")}constructor(e){f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,f,e,"f")}}f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":(e,t,r)=>{"use strict";r.d(t,{ParameterChangeAction:()=>ParameterChangeAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m,v;const _=4;class ParameterChangeAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(_);e.writeInt(n.GovernanceActionKind.ParameterChange);__classPrivateFieldGet(this,h,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));__classPrivateFieldGet(this,m,"f")?e.writeByteString((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==_)throw new c.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.ParameterChange)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.ParameterChange} but got ${s}`);let d;if(t.peekState()===o.CborReaderState.Null)t.readNull();else d=i.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolParamUpdate.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let p;if(t.peekState()===o.CborReaderState.Null)t.readNull();else p=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const h=new ParameterChangeAction(f,d,p);__classPrivateFieldSet(h,v,e,"f");return h}toCore(){return{__typename:d.GovernanceActionType.parameter_change_action,governanceActionId:__classPrivateFieldGet(this,h,"f")?__classPrivateFieldGet(this,h,"f").toCore():null,policyHash:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f"):null,protocolParamUpdate:__classPrivateFieldGet(this,p,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(u.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?i.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return __classPrivateFieldGet(this,h,"f")}protocolParamUpdate(){return __classPrivateFieldGet(this,p,"f")}policyHash(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t,r){p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,h,t,"f");__classPrivateFieldSet(this,m,r,"f")}}p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":(e,t,r)=>{"use strict";r.d(t,{ProposalProcedure:()=>ProposalProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var b=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var P,S,C,T,k,A,E,j,I,x,R,M;const O=4;class ProposalProcedure{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,M,"f"))return __classPrivateFieldGet(this,M,"f");let t;switch(__classPrivateFieldGet(this,j,"f")){case d.GovernanceActionKind.ParameterChange:t=__classPrivateFieldGet(this,P,"f").toCbor();break;case d.GovernanceActionKind.HardForkInitiation:t=__classPrivateFieldGet(this,S,"f").toCbor();break;case d.GovernanceActionKind.TreasuryWithdrawals:t=__classPrivateFieldGet(this,C,"f").toCbor();break;case d.GovernanceActionKind.NoConfidence:t=__classPrivateFieldGet(this,T,"f").toCbor();break;case d.GovernanceActionKind.UpdateCommittee:t=__classPrivateFieldGet(this,k,"f").toCbor();break;case d.GovernanceActionKind.NewConstitution:t=__classPrivateFieldGet(this,A,"f").toCbor();break;case d.GovernanceActionKind.Info:t=__classPrivateFieldGet(this,E,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}e.writeStartArray(O);e.writeInt(__classPrivateFieldGet(this,I,"f"));const r=s.RewardAddress.fromAddress(a.Address.fromBech32(__classPrivateFieldGet(this,x,"f")));if(!r){throw new _.SerializationError(_.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${__classPrivateFieldGet(this,x,"f")}`)}e.writeByteString(b.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,g.hexToBytes)(t));e.writeEncodedValue((0,g.hexToBytes)(__classPrivateFieldGet(this,R,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new n.CborReader(e);r.readStartArray();const s=r.readInt();const i=a.Address.fromBytes(f.HexBlob.fromBytes(r.readByteString())).toBech32();const c=f.HexBlob.fromBytes(r.readEncodedValue());const _=o.Anchor.fromCbor(f.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const g=new n.CborReader(c);g.readStartArray();let b;const P=Number(g.readInt());switch(P){case d.GovernanceActionKind.ParameterChange:b=v.ParameterChangeAction.fromCbor(c);t=ProposalProcedure.newParameterChangeAction(s,i,_,b);break;case d.GovernanceActionKind.HardForkInitiation:b=l.HardForkInitiationAction.fromCbor(c);t=ProposalProcedure.newHardForkInitiationAction(s,i,_,b);break;case d.GovernanceActionKind.TreasuryWithdrawals:b=y.TreasuryWithdrawalsAction.fromCbor(c);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,i,_,b);break;case d.GovernanceActionKind.NoConfidence:b=m.NoConfidence.fromCbor(c);t=ProposalProcedure.newNoConfidence(s,i,_,b);break;case d.GovernanceActionKind.UpdateCommittee:b=w.UpdateCommittee.fromCbor(c);t=ProposalProcedure.newUpdateCommittee(s,i,_,b);break;case d.GovernanceActionKind.NewConstitution:b=h.NewConstitution.fromCbor(c);t=ProposalProcedure.newNewConstitution(s,i,_,b);break;case d.GovernanceActionKind.Info:b=p.InfoAction.fromCbor(c);t=ProposalProcedure.newInfoAction(s,i,_,b);break;default:throw new u.InvalidStateError(`Unexpected kind value: ${P}`)}__classPrivateFieldSet(t,M,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,j,"f")){case d.GovernanceActionKind.ParameterChange:e=__classPrivateFieldGet(this,P,"f").toCore();break;case d.GovernanceActionKind.HardForkInitiation:e=__classPrivateFieldGet(this,S,"f").toCore();break;case d.GovernanceActionKind.TreasuryWithdrawals:e=__classPrivateFieldGet(this,C,"f").toCore();break;case d.GovernanceActionKind.NoConfidence:e=__classPrivateFieldGet(this,T,"f").toCore();break;case d.GovernanceActionKind.UpdateCommittee:e=__classPrivateFieldGet(this,k,"f").toCore();break;case d.GovernanceActionKind.NewConstitution:e=__classPrivateFieldGet(this,A,"f").toCore();break;case d.GovernanceActionKind.Info:e=__classPrivateFieldGet(this,E,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}return{anchor:__classPrivateFieldGet(this,R,"f").toCore(),deposit:__classPrivateFieldGet(this,I,"f"),governanceAction:e,rewardAccount:__classPrivateFieldGet(this,x,"f")}}static fromCore(e){let t;let r;const s=o.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case c.GovernanceActionType.parameter_change_action:t=v.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.hard_fork_initiation_action:t=l.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.treasury_withdrawals_action:t=y.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.no_confidence:t=m.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.update_committee:t=w.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.new_constitution:t=h.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.info_action:t=p.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new u.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.ParameterChange,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,P,s,"f");return a}static newHardForkInitiationAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.HardForkInitiation,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,S,s,"f");return a}static newTreasuryWithdrawalsAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.TreasuryWithdrawals,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,C,s,"f");return a}static newNoConfidence(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.NoConfidence,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,T,s,"f");return a}static newUpdateCommittee(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.UpdateCommittee,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,k,s,"f");return a}static newNewConstitution(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.NewConstitution,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,A,s,"f");return a}static newInfoAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,j,d.GovernanceActionKind.Info,"f");__classPrivateFieldSet(a,I,e,"f");__classPrivateFieldSet(a,x,t,"f");__classPrivateFieldSet(a,R,r,"f");__classPrivateFieldSet(a,E,s,"f");return a}kind(){return __classPrivateFieldGet(this,j,"f")}deposit(){return __classPrivateFieldGet(this,I,"f")}rewardAccount(){return __classPrivateFieldGet(this,x,"f")}anchor(){return __classPrivateFieldGet(this,R,"f")}getParameterChangeAction(){return __classPrivateFieldGet(this,P,"f")}getHardForkInitiationAction(){return __classPrivateFieldGet(this,S,"f")}getTreasuryWithdrawalsAction(){return __classPrivateFieldGet(this,C,"f")}getNoConfidence(){return __classPrivateFieldGet(this,T,"f")}getUpdateCommittee(){return __classPrivateFieldGet(this,k,"f")}getNewConstitution(){return __classPrivateFieldGet(this,A,"f")}getInfoAction(){return __classPrivateFieldGet(this,E,"f")}constructor(){P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);R.set(this,void 0);M.set(this,void 0)}}P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":(e,t,r)=>{"use strict";r.d(t,{TreasuryWithdrawalsAction:()=>TreasuryWithdrawalsAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,v,_;const y=3;class TreasuryWithdrawalsAction{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(y);e.writeInt(d.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...__classPrivateFieldGet(this,m,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,i]of t){const n=s.RewardAddress.fromAddress(a.Address.fromBech32(r));if(!n){throw new f.SerializationError(f.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(h.from(n.toAddress().toBytes(),"hex"));e.writeInt(i)}__classPrivateFieldGet(this,v,"f")?e.writeByteString((0,p.hexToBytes)(__classPrivateFieldGet(this,v,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==y)throw new l.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.TreasuryWithdrawals)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const o=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const c=a.Address.fromBytes(u.HexBlob.fromBytes(t.readByteString())).toBech32();const f=t.readInt();o.set(c,f)}t.readEndMap();let p;if(t.peekState()===n.CborReaderState.Null)t.readNull();else p=u.HexBlob.fromBytes(t.readByteString());t.readEndArray();const h=new TreasuryWithdrawalsAction(o,p);__classPrivateFieldSet(h,_,e,"f");return h}toCore(){const e=new Set([...__classPrivateFieldGet(this,m,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:c.GovernanceActionType.treasury_withdrawals_action,policyHash:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return __classPrivateFieldGet(this,m,"f")}policyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t){m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,t,"f")}}m=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":(e,t,r)=>{"use strict";r.d(t,{UpdateCommittee:()=>UpdateCommittee});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,_,y,w,g;const b=5;const P=2;const S=0;const C=1;class UpdateCommittee{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");e.writeStartArray(b);e.writeInt(f.GovernanceActionKind.UpdateCommittee);__classPrivateFieldGet(this,v,"f")?e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));e.writeStartMap(__classPrivateFieldGet(this,y,"f").length);for(const t of __classPrivateFieldGet(this,y,"f")){e.writeStartArray(P);e.writeInt(t[S].type);e.writeByteString((0,m.hexToBytes)(t[S].hash));e.writeInt(t[C])}e.writeEncodedValue((0,m.hexToBytes)(__classPrivateFieldGet(this,w,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==b)throw new p.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==f.GovernanceActionKind.UpdateCommittee)throw new p.InvalidArgumentError("cbor",`Expected action kind, expected ${f.GovernanceActionKind.UpdateCommittee} but got ${s}`);let c;if(t.peekState()===o.CborReaderState.Null)t.readNull();else c=u.GovernanceActionId.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const l=i.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),n.Credential.fromCbor);t.readStartMap();const m=[];while(t.peekState()!==o.CborReaderState.EndMap){if(t.readStartArray()!==P)throw new p.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const v=Number(t.readUInt());const _=h.HexBlob.fromBytes(t.readByteString());t.readEndArray();const y=Number(t.readUInt());m.push([{hash:_,type:v},y])}t.readEndMap();const w=d.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const S=new UpdateCommittee(l,m,w,c);__classPrivateFieldSet(S,g,e,"f");return S}toCore(){return{__typename:c.GovernanceActionType.update_committee,governanceActionId:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,membersToBeAdded:new Set(__classPrivateFieldGet(this,y,"f").map(e=>({coldCredential:e[S],epoch:(0,l.EpochNo)(e[C])}))),membersToBeRemoved:new Set(__classPrivateFieldGet(this,_,"f").toCore()),newQuorumThreshold:__classPrivateFieldGet(this,w,"f").toCore()}}static fromCore(e){return new UpdateCommittee(i.CborSet.fromCore([...e.membersToBeRemoved],n.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),d.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?u.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,v,"f")}membersToBeRemoved(){return __classPrivateFieldGet(this,_,"f").toCore()}membersToBeAdded(){return __classPrivateFieldGet(this,y,"f")}newQuorum(){return __classPrivateFieldGet(this,w,"f")}constructor(e,t,r,s){v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,y,t,"f");__classPrivateFieldSet(this,w,r,"f");__classPrivateFieldSet(this,v,s,"f")}}v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js":(e,t,r)=>{"use strict";r.d(t,{TransactionBody:()=>TransactionBody});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var C=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var T,k,A,E,j,I,x,R,M,O,B,D,N,F,H,G,V,K,L,W,z,U,$,q;class TransactionBody{toCbor(){var e;const t=new i.CborWriter;if(__classPrivateFieldGet(this,$,"f"))return __classPrivateFieldGet(this,$,"f");t.writeStartMap(__classPrivateFieldGet(this,T,"m",q).call(this));if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,k,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").length>0){t.writeInt(1n);t.writeStartArray(__classPrivateFieldGet(this,A,"f").length);for(const r of __classPrivateFieldGet(this,A,"f"))t.writeEncodedValue(C.from(r.toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,E,"f")){t.writeInt(2n);t.writeInt(__classPrivateFieldGet(this,E,"f"))}if(void 0!==__classPrivateFieldGet(this,j,"f")){t.writeInt(3n);t.writeInt(__classPrivateFieldGet(this,j,"f"))}if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,I,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size>0){t.writeInt(5n);const s=new Map;for(const[n,d]of __classPrivateFieldGet(this,x,"f")){const c=a.RewardAddress.fromAddress(o.Address.fromBech32(n));if(!c){throw new m.SerializationError(m.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${n}`)}const l=c.toAddress().toBytes();s.set(l,d)}const u=[...s].sort((e,t)=>e>t?1:-1);t.writeStartMap(u.length);for(const[f,p]of u){t.writeByteString(C.from(f,"hex"));t.writeInt(p)}}if(void 0!==__classPrivateFieldGet(this,R,"f")){t.writeInt(6n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,R,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,M,"f")){t.writeInt(7n);t.writeByteString(C.from(__classPrivateFieldGet(this,M,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,O,"f")){t.writeInt(8n);t.writeInt(__classPrivateFieldGet(this,O,"f"))}if(void 0!==__classPrivateFieldGet(this,B,"f")&&__classPrivateFieldGet(this,B,"f").size>0){t.writeInt(9n);const h=(0,S.tokenMapToMultiAsset)(__classPrivateFieldGet(this,B,"f"));t.writeStartMap(h.size);const v=new Map([...h.entries()].sort(S.sortCanonically));for(const[_,y]of v.entries()){t.writeByteString(C.from(_,"hex"));const w=new Map([...y.entries()].sort(S.sortCanonically));t.writeStartMap(w.size);for(const[g,b]of w.entries()){t.writeByteString(C.from(g,"hex"));t.writeInt(b)}}}if(void 0!==__classPrivateFieldGet(this,D,"f")){t.writeInt(11n);t.writeByteString(C.from(__classPrivateFieldGet(this,D,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,N,"f")&&__classPrivateFieldGet(this,N,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,N,"f").toCbor()))}if((null===(e=__classPrivateFieldGet(this,F,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,F,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,F,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,H,"f")){t.writeInt(15n);t.writeInt(__classPrivateFieldGet(this,H,"f"))}if(void 0!==__classPrivateFieldGet(this,G,"f")){t.writeInt(16n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,G,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,V,"f")){t.writeInt(17n);t.writeInt(__classPrivateFieldGet(this,V,"f"))}if(void 0!==__classPrivateFieldGet(this,K,"f")&&__classPrivateFieldGet(this,K,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,K,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,L,"f")){t.writeInt(19n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,L,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,W,"f")&&__classPrivateFieldGet(this,W,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,W,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,z,"f")){t.writeInt(21n);t.writeInt(__classPrivateFieldGet(this,z,"f"))}if(void 0!==__classPrivateFieldGet(this,U,"f")){t.writeInt(22n);t.writeInt(__classPrivateFieldGet(this,U,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=l.CborSet.fromCore([],y.TransactionInput.fromCore);const s=new Array;const a=0n;const i=new TransactionBody(r,s,a);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const c=t.readInt();switch(c){case 0n:{const m=t.readEncodedValue();i.setInputs(l.CborSet.fromCbor(p.HexBlob.fromBytes(m),y.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray){i.outputs().push(w.TransactionOutput.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:i.setFee(t.readInt());break;case 3n:i.setTtl((0,v.Slot)(Number(t.readInt())));break;case 4n:i.setCerts(l.CborSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()),f.Certificate.fromCbor));break;case 5n:t.readStartMap();i.setWithdrawals(new Map);while(t.peekState()!==d.CborReaderState.EndMap){const _=o.Address.fromBytes(p.HexBlob.fromBytes(t.readByteString())).toBech32();const P=t.readInt();i.withdrawals().set(_,P)}t.readEndMap();break;case 6n:i.setUpdate(g.Update.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:i.setAuxiliaryDataHash(p.HexBlob.fromBytes(t.readByteString()));break;case 8n:i.setValidityStartInterval((0,v.Slot)(Number(t.readInt())));break;case 9n:{const T=new Map;t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const k=p.HexBlob.fromBytes(t.readByteString());if(!T.has(k))T.set(k,new Map);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const A=C.from(t.readByteString()).toString("hex");const E=t.readInt();T.get(k).set(A,E)}t.readEndMap()}t.readEndMap();i.setMint((0,S.multiAssetsToTokenMap)(T));break}case 11n:i.setScriptDataHash(p.HexBlob.fromBytes(t.readByteString()));break;case 13n:i.setCollateral(l.CborSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()),y.TransactionInput.fromCbor));break;case 14n:i.setRequiredSigners(l.CborSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()),u.Hash.fromCbor));break;case 15n:i.setNetworkId(Number(t.readInt()));break;case 16n:i.setCollateralReturn(w.TransactionOutput.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:i.setTotalCollateral(t.readInt());break;case 18n:i.setReferenceInputs(l.CborSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()),y.TransactionInput.fromCbor));break;case 19n:i.setVotingProcedures(b.VotingProcedures.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:i.setProposalProcedures(l.CborSet.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue()),h.ProposalProcedure.fromCbor));break;case 21n:i.setCurrentTreasuryValue(t.readInt());break;case 22n:i.setDonation(t.readInt());break}}t.readEndMap();__classPrivateFieldSet(i,$,e,"f");return i}toCore(){var e,t,r,s,a,o;return{auxiliaryDataHash:__classPrivateFieldGet(this,M,"f"),certificates:(null===(e=__classPrivateFieldGet(this,I,"f"))||void 0===e?void 0:e.values())?__classPrivateFieldGet(this,I,"f").toCore():void 0,collateralReturn:null===(t=__classPrivateFieldGet(this,G,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=__classPrivateFieldGet(this,N,"f"))||void 0===r?void 0:r.values())?__classPrivateFieldGet(this,N,"f").toCore():void 0,donation:__classPrivateFieldGet(this,U,"f"),fee:__classPrivateFieldGet(this,E,"f"),inputs:__classPrivateFieldGet(this,k,"f").toCore(),mint:__classPrivateFieldGet(this,B,"f"),networkId:__classPrivateFieldGet(this,H,"f"),outputs:__classPrivateFieldGet(this,A,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=__classPrivateFieldGet(this,W,"f"))||void 0===s?void 0:s.values())?__classPrivateFieldGet(this,W,"f").toCore():void 0,referenceInputs:(null===(a=__classPrivateFieldGet(this,K,"f"))||void 0===a?void 0:a.size())?__classPrivateFieldGet(this,K,"f").toCore():void 0,requiredExtraSignatures:null===(o=__classPrivateFieldGet(this,F,"f"))||void 0===o?void 0:o.toCore(),scriptIntegrityHash:__classPrivateFieldGet(this,D,"f"),totalCollateral:__classPrivateFieldGet(this,V,"f"),treasuryValue:__classPrivateFieldGet(this,z,"f"),update:__classPrivateFieldGet(this,R,"f")?__classPrivateFieldGet(this,R,"f").toCore():void 0,validityInterval:__classPrivateFieldGet(this,j,"f")||void 0!==__classPrivateFieldGet(this,O,"f")?{invalidBefore:__classPrivateFieldGet(this,O,"f"),invalidHereafter:__classPrivateFieldGet(this,j,"f")}:void 0,votingProcedures:__classPrivateFieldGet(this,L,"f")?__classPrivateFieldGet(this,L,"f").toCore():void 0,withdrawals:__classPrivateFieldGet(this,x,"f")?[...__classPrivateFieldGet(this,x,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(l.CborSet.fromCore(e.inputs,y.TransactionInput.fromCore),e.outputs.map(e=>w.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(l.CborSet.fromCore(e.certificates,f.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(w.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(l.CborSet.fromCore(e.collaterals,y.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(l.CborSet.fromCore(e.referenceInputs,y.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(l.CborSet.fromCore(e.requiredExtraSignatures,u.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(g.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures(b.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(l.CborSet.fromCore(e.proposalProcedures,h.ProposalProcedure.fromCore));return t}setInputs(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}inputs(){return __classPrivateFieldGet(this,k,"f")}setOutputs(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}outputs(){return __classPrivateFieldGet(this,A,"f")}setFee(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}fee(){return __classPrivateFieldGet(this,E,"f")}setTtl(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}ttl(){return __classPrivateFieldGet(this,j,"f")}setCerts(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}certs(){return __classPrivateFieldGet(this,I,"f")}setWithdrawals(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}withdrawals(){return __classPrivateFieldGet(this,x,"f")}setUpdate(e){__classPrivateFieldSet(this,R,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}update(){return __classPrivateFieldGet(this,R,"f")}setAuxiliaryDataHash(e){__classPrivateFieldSet(this,M,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}auxiliaryDataHash(){return __classPrivateFieldGet(this,M,"f")}setValidityStartInterval(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}validityStartInterval(){return __classPrivateFieldGet(this,O,"f")}setMint(e){__classPrivateFieldSet(this,B,(0,S.multiAssetsToTokenMap)(new Map([...(0,S.tokenMapToMultiAsset)(e).entries()].sort(S.sortCanonically))),"f");__classPrivateFieldSet(this,$,void 0,"f")}mint(){return __classPrivateFieldGet(this,B,"f")}setScriptDataHash(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}scriptDataHash(){return __classPrivateFieldGet(this,D,"f")}setCollateral(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}collateral(){return __classPrivateFieldGet(this,N,"f")}setRequiredSigners(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}requiredSigners(){return __classPrivateFieldGet(this,F,"f")}setNetworkId(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}networkId(){return __classPrivateFieldGet(this,H,"f")}setCollateralReturn(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}collateralReturn(){return __classPrivateFieldGet(this,G,"f")}setTotalCollateral(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}totalCollateral(){return __classPrivateFieldGet(this,V,"f")}setReferenceInputs(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}referenceInputs(){return __classPrivateFieldGet(this,K,"f")}setVotingProcedures(e){__classPrivateFieldSet(this,L,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}votingProcedures(){return __classPrivateFieldGet(this,L,"f")}setProposalProcedures(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}proposalProcedures(){return __classPrivateFieldGet(this,W,"f")}setCurrentTreasuryValue(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}currentTreasuryValue(){return __classPrivateFieldGet(this,z,"f")}setDonation(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}donation(){return __classPrivateFieldGet(this,U,"f")}hash(){const e=s(s.BYTES).update((0,P.hexToBytes)(this.toCbor())).digest();return _.TransactionId.fromHexBlob(p.HexBlob.fromBytes(e))}hasTaggedSets(){const e=new n.CborReader(__classPrivateFieldGet(this,k,"f").toCbor());return e.peekState()===d.CborReaderState.Tag&&e.peekTag()===c.CborTag.Set}hasBabbageOutput(){if(0===__classPrivateFieldGet(this,A,"f").length)return false;const e=new n.CborReader(__classPrivateFieldGet(this,A,"f")[0].toCbor());return e.peekState()===d.CborReaderState.StartMap}constructor(e,t,r,s){T.add(this);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);R.set(this,void 0);M.set(this,void 0);O.set(this,void 0);B.set(this,void 0);D.set(this,void 0);N.set(this,void 0);F.set(this,void 0);H.set(this,void 0);G.set(this,void 0);V.set(this,void 0);K.set(this,void 0);L.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,A,t,"f");__classPrivateFieldSet(this,E,r,"f");__classPrivateFieldSet(this,j,s,"f")}}k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,O=new WeakMap,B=new WeakMap,D=new WeakMap,N=new WeakMap,F=new WeakMap,H=new WeakMap,G=new WeakMap,V=new WeakMap,K=new WeakMap,L=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,T=new WeakSet,q=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").length>0)++t;if(void 0!==__classPrivateFieldGet(this,E,"f"))++t;if(void 0!==__classPrivateFieldGet(this,j,"f"))++t;if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,R,"f"))++t;if(void 0!==__classPrivateFieldGet(this,M,"f"))++t;if(void 0!==__classPrivateFieldGet(this,O,"f"))++t;if(void 0!==__classPrivateFieldGet(this,B,"f")&&__classPrivateFieldGet(this,B,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,D,"f"))++t;if(void 0!==__classPrivateFieldGet(this,N,"f")&&__classPrivateFieldGet(this,N,"f").size()>0)++t;if((null===(e=__classPrivateFieldGet(this,F,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,F,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,H,"f"))++t;if(void 0!==__classPrivateFieldGet(this,G,"f"))++t;if(void 0!==__classPrivateFieldGet(this,V,"f"))++t;if(void 0!==__classPrivateFieldGet(this,K,"f")&&__classPrivateFieldGet(this,K,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,L,"f"))++t;if(void 0!==__classPrivateFieldGet(this,W,"f")&&__classPrivateFieldGet(this,W,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,z,"f"))++t;if(void 0!==__classPrivateFieldGet(this,U,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js":(e,t,r)=>{"use strict";r.d(t,{TransactionInput:()=>TransactionInput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class TransactionInput{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new o.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new TransactionInput(i.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{index:Number(__classPrivateFieldGet(this,c,"f")),txId:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js":(e,t,r)=>{"use strict";r.d(t,{REQUIRED_FIELDS_COUNT:()=>P,TransactionOutput:()=>TransactionOutput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,v,_,y,w,g,b;const P=2;class TransactionOutput{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");const e=new a.CborWriter;const t=__classPrivateFieldGet(this,m,"m",b).call(this);if(t===P||3===t&&void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").kind()===d.DatumKind.DataHash){e.writeStartArray(t);e.writeByteString(h.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeEncodedValue(h.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,y,"f"))e.writeByteString(h.from(__classPrivateFieldGet(this,y,"f").asDataHash(),"hex"))}else{e.writeStartMap(t);e.writeInt(0n);e.writeByteString(h.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(h.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,y,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,y,"f").kind());switch(__classPrivateFieldGet(this,y,"f").kind()){case d.DatumKind.DataHash:e.writeByteString(h.from(__classPrivateFieldGet(this,y,"f").asDataHash(),"hex"));break;case d.DatumKind.InlineData:e.writeTag(o.CborTag.EncodedCborDataItem);e.writeByteString(h.from(__classPrivateFieldGet(this,y,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(3n);e.writeTag(o.CborTag.EncodedCborDataItem);e.writeByteString(h.from(__classPrivateFieldGet(this,w,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);let r;let a;let h;let m;if(t.peekState()===n.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const v=t.readInt();switch(v){case 0n:r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));break;case 1n:a=p.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const _=new i.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));_.readStartArray();const y=Number(_.readInt());if(y===d.DatumKind.InlineData){const w=_.readTag();if(w!==o.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${o.CborTag.EncodedCborDataItem} but got ${w}`)}const b=_.readByteString();let P;let S;if(y===d.DatumKind.DataHash)P=c.HexBlob.fromBytes(b);if(y===d.DatumKind.InlineData)S=u.PlutusData.fromCbor(c.HexBlob.fromBytes(b));h=new d.Datum(P,S);break}case 3n:{const C=new i.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));const T=C.readTag();if(T!==o.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${o.CborTag.EncodedCborDataItem} but got ${T}`);const k=C.readByteString();m=f.Script.fromCbor(c.HexBlob.fromBytes(k));break}}}t.readEndMap()}else{const A=t.readStartArray();r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));a=p.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));if(3===A){const E=t.readByteString();h=d.Datum.newDataHash(c.HexBlob.fromBytes(E))}}if(!r)throw new l.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!a)throw new l.InvalidArgumentError("cbor","Transaction output does not contain a value.");const j=new TransactionOutput(r,a);if(h)j.setDatum(h);if(m)j.setScriptRef(m);__classPrivateFieldSet(j,g,e,"f");return j}toCore(){var e;const t=__classPrivateFieldGet(this,_,"f").toCore();if(!t.assets)delete t.assets;const r={address:__classPrivateFieldGet(this,v,"f").asByron()?__classPrivateFieldGet(this,v,"f").toBase58():__classPrivateFieldGet(this,v,"f").toBech32(),value:t};if(__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").kind()===d.DatumKind.InlineData)r.datum=null===(e=__classPrivateFieldGet(this,y,"f").asInlineData())||void 0===e?void 0:e.toCore();if(__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").kind()===d.DatumKind.DataHash)r.datumHash=__classPrivateFieldGet(this,y,"f").asDataHash();if(__classPrivateFieldGet(this,w,"f"))r.scriptReference=__classPrivateFieldGet(this,w,"f").toCore();return r}static fromCore(e){const t=s.Address.fromString(e.address);if(!t)throw new l.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,p.Value.fromCore(e.value));if(e.datum)r.setDatum(d.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(d.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(f.Script.fromCore(e.scriptReference));return r}address(){return __classPrivateFieldGet(this,v,"f")}amount(){return __classPrivateFieldGet(this,_,"f")}datum(){return __classPrivateFieldGet(this,y,"f")}setDatum(e){__classPrivateFieldSet(this,y,e,"f")}scriptRef(){return __classPrivateFieldGet(this,w,"f")}setScriptRef(e){__classPrivateFieldSet(this,w,e,"f")}isBabbageOutput(){const e=new i.CborReader(this.toCbor());return e.peekState()===n.CborReaderState.StartMap}constructor(e,t){m.add(this);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,_,t,"f")}}v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,m=new WeakSet,b=function _TransactionOutput_getMapSize(){let e=P;if(__classPrivateFieldGet(this,y,"f"))++e;if(__classPrivateFieldGet(this,w,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";r.d(t,{multiAssetsToTokenMap:()=>multiAssetsToTokenMap,sortCanonically:()=>sortCanonically,tokenMapToMultiAsset:()=>tokenMapToMultiAsset});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};const tokenMapToMultiAsset=e=>{const t=new Map;const r=new Map([...e.entries()].sort(sortCanonically));for(const[a,o]of r.entries()){const i=s.AssetId.getPolicyId(a);const n=s.AssetId.getAssetName(a);if(!t.has(i))t.set(i,new Map);t.get(i).set(n,o)}return t};const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,a]of e.entries()){for(const[o,i]of a.entries()){const n=s.AssetId.fromParts(r,o);t.set(n,i)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js":(e,t,r)=>{"use strict";r.d(t,{Value:()=>Value});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const p=2;class Value{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new s.CborWriter;if(!__classPrivateFieldGet(this,u,"f")||__classPrivateFieldGet(this,u,"f").size<=0)e.writeInt(__classPrivateFieldGet(this,l,"f"));else{e.writeStartArray(p);e.writeInt(__classPrivateFieldGet(this,l,"f"));const t=(0,d.tokenMapToMultiAsset)(__classPrivateFieldGet(this,u,"f"));const r=new Map([...t.entries()].sort(d.sortCanonically));e.writeStartMap(r.size);for(const[a,o]of r.entries()){e.writeByteString(c.from(a,"hex"));const i=new Map([...o.entries()].sort(d.sortCanonically));e.writeStartMap(i.size);for(const[n,h]of i.entries()){e.writeByteString(c.from(n,"hex"));e.writeInt(h)}}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);if(t.peekState()===o.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const s=t.readStartArray();if(s!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${s} elements`);const l=t.readUInt();const u=new Map;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const h=n.HexBlob.fromBytes(t.readByteString());if(!u.has(h))u.set(h,new Map);t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const m=c.from(t.readByteString()).toString("hex");const v=t.readUInt();u.get(h).set(m,v)}t.readEndMap()}t.readEndMap();const _=new Map([...(0,d.multiAssetsToTokenMap)(u)].sort(d.sortCanonically));const y=new Value(l,_);__classPrivateFieldSet(y,f,e,"f");return y}toCore(){return{assets:__classPrivateFieldGet(this,u,"f"),coins:__classPrivateFieldGet(this,l,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return __classPrivateFieldGet(this,l,"f")}setCoin(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}multiasset(){return __classPrivateFieldGet(this,u,"f")}setMultiasset(e){__classPrivateFieldSet(this,u,(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(e).entries()].sort(d.sortCanonically))),"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,0n);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t?(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(t).entries()].sort(d.sortCanonically))):void 0,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js":(e,t,r)=>{"use strict";r.d(t,{Voter:()=>Voter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,p;const h=2;class Voter{toCbor(){if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");const e=new s.CborWriter;e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new a.CborReader(e);const s=r.readStartArray();if(s!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${s} elements`);const c=Number(r.readInt());const l=n.HexBlob.fromBytes(r.readByteString());switch(c){case d.VoterKind.ConstitutionalCommitteeKeyHash:case d.VoterKind.DrepKeyHash:case d.VoterKind.StakePoolKeyHash:t={hash:l,type:o.CredentialType.KeyHash};break;case d.VoterKind.ConstitutionalCommitteeScriptHash:case d.VoterKind.DRepScriptHash:t={hash:l,type:o.CredentialType.ScriptHash};break;default:throw new i.InvalidStateError(`Unexpected kind value: ${c}`)}const u=new Voter(c,t);__classPrivateFieldSet(u,p,e,"f");return u}toCore(){switch(__classPrivateFieldGet(this,u,"f")){case d.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:c.VoterType.ccHotKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:o.CredentialType.KeyHash}};case d.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:c.VoterType.ccHotScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:o.CredentialType.ScriptHash}};case d.VoterKind.DrepKeyHash:return{__typename:c.VoterType.dRepKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:o.CredentialType.KeyHash}};case d.VoterKind.DRepScriptHash:return{__typename:c.VoterType.dRepScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:o.CredentialType.ScriptHash}};case d.VoterKind.StakePoolKeyHash:return{__typename:c.VoterType.stakePoolKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:o.CredentialType.KeyHash}};default:throw new i.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case c.VoterType.ccHotKeyHash:case c.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case c.VoterType.dRepKeyHash:case c.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case c.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new i.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===o.CredentialType.KeyHash?d.VoterKind.ConstitutionalCommitteeKeyHash:d.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===o.CredentialType.KeyHash?d.VoterKind.DrepKeyHash:d.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(d.VoterKind.StakePoolKeyHash,{hash:e,type:o.CredentialType.KeyHash})}kind(){return __classPrivateFieldGet(this,u,"f")}toConstitutionalCommitteeHotCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeScriptHash)return __classPrivateFieldGet(this,f,"f");return}toDrepCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.DrepKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.DRepScriptHash)return __classPrivateFieldGet(this,f,"f");return}toStakingPoolKeyHash(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.StakePoolKeyHash)return __classPrivateFieldGet(this,f,"f").hash;return}equals(e){return __classPrivateFieldGet(this,u,"f")===__classPrivateFieldGet(e,u,"f")&&__classPrivateFieldGet(this,f,"f").type===__classPrivateFieldGet(e,f,"f").type&&__classPrivateFieldGet(this,f,"f").hash===__classPrivateFieldGet(e,f,"f").hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t,r)=>{"use strict";r.d(t,{VoterKind:()=>s});var s;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedure:()=>VotingProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;class VotingProcedure{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new a.CborWriter;e.writeStartArray(f);e.writeInt(__classPrivateFieldGet(this,c,"f"));__classPrivateFieldGet(this,l,"f")?e.writeEncodedValue((0,d.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);t.readStartArray();const r=Number(t.readInt());let a;if(t.peekState()===i.CborReaderState.Null){t.readNull();a=void 0}else{a=s.Anchor.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()))}const d=new VotingProcedure(r,a);__classPrivateFieldSet(d,u,e,"f");return d}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f")?__classPrivateFieldGet(this,l,"f").toCore():null,vote:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?s.Anchor.fromCore(e.anchor):void 0)}vote(){return __classPrivateFieldGet(this,c,"f")}setVote(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedures:()=>VotingProcedures});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var f,p;class VotingProcedures{toCbor(){if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");const e=new s.CborWriter;const t=this.getVoters();if(0===t.length)throw new n.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const a=this.getGovernanceActionIdsByVoter(r);if(0===a.length)throw new n.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()));e.writeStartMap(a.length);for(const o of a){e.writeEncodedValue((0,u.hexToBytes)(o.toCbor()));const i=this.get(r,o);if(!i)throw new n.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,u.hexToBytes)(i.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const s=c.Voter.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const n=i.GovernanceActionId.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));const u=l.VotingProcedure.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,n,u)}t.readEndMap()}t.readEndMap();__classPrivateFieldSet(r,p,e,"f");return r}toCore(){return __classPrivateFieldGet(this,f,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;__classPrivateFieldSet(t,f,e.map(e=>{const t=c.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:i.GovernanceActionId.fromCore(e.actionId),votingProcedure:l.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const s=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!s){__classPrivateFieldGet(this,f,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const a=s.votes.find(e=>e.actionId.equals(t));if(a)throw new n.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");s.votes.push({actionId:t,votingProcedure:r});__classPrivateFieldSet(this,p,void 0,"f")}get(e,t){const r=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!r)return;const s=r.votes.find(e=>e.actionId.equals(t));if(!s)return;return s.votingProcedure}getVoters(){return __classPrivateFieldGet(this,f,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){f.set(this,[]);p.set(this,void 0)}}f=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js":(e,t,r)=>{"use strict";r.d(t,{BootstrapWitness:()=>BootstrapWitness});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;const p=4;const h=(0,s.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");if(__classPrivateFieldGet(this,l,"f").length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${__classPrivateFieldGet(this,l,"f").length/2} bytes long`);e.writeStartArray(p);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,l,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==p)throw new a.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const o=s.HexBlob.fromBytes(t.readByteString());const n=s.HexBlob.fromBytes(t.readByteString());const d=s.HexBlob.fromBytes(t.readByteString());const c=s.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new BootstrapWitness(o,n,d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{addressAttributes:s.Base64Blob.fromBytes((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f"))),chainCode:__classPrivateFieldGet(this,l,"f"),key:__classPrivateFieldGet(this,d,"f"),signature:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){if(!e.chainCode)throw new a.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?s.HexBlob.fromBase64(e.addressAttributes):h)}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}chainCode(){return __classPrivateFieldGet(this,l,"f")}setChainCode(e){if(e.length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}attributes(){return __classPrivateFieldGet(this,u,"f")}setAttributes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t,r,s){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":(e,t,r)=>{"use strict";r.d(t,{Redeemer:()=>Redeemer});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,v,_,y,w;const g=4;const b=32;class Redeemer{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");e.writeStartArray(g);e.writeInt(__classPrivateFieldGet(this,m,"f"));e.writeInt(__classPrivateFieldGet(this,v,"f"));e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==g)throw new d.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const a=t.readUInt();const o=l.PlutusData.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const u=n.ExUnits.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new Redeemer(s,a,o,u);__classPrivateFieldSet(f,w,e,"f");return f}toCore(){let e;switch(__classPrivateFieldGet(this,m,"f")){case f.RedeemerTag.Spend:e=u.RedeemerPurpose.spend;break;case f.RedeemerTag.Mint:e=u.RedeemerPurpose.mint;break;case f.RedeemerTag.Cert:e=u.RedeemerPurpose.certificate;break;case f.RedeemerTag.Reward:e=u.RedeemerPurpose.withdrawal;break;case f.RedeemerTag.Voting:e=u.RedeemerPurpose.vote;break;case f.RedeemerTag.Proposing:e=u.RedeemerPurpose.propose;break;default:throw new d.InvalidStateError(`Invalid redeemer type ${__classPrivateFieldGet(this,m,"f")}`)}return{data:__classPrivateFieldGet(this,_,"f").toCore(),executionUnits:__classPrivateFieldGet(this,y,"f").toCore(),index:Number(__classPrivateFieldGet(this,v,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case u.RedeemerPurpose.spend:t=f.RedeemerTag.Spend;break;case u.RedeemerPurpose.mint:t=f.RedeemerTag.Mint;break;case u.RedeemerPurpose.certificate:t=f.RedeemerTag.Cert;break;case u.RedeemerPurpose.withdrawal:t=f.RedeemerTag.Reward;break;case u.RedeemerPurpose.vote:t=f.RedeemerTag.Voting;break;case u.RedeemerPurpose.propose:t=f.RedeemerTag.Proposing;break;default:throw new d.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),l.PlutusData.fromCore(e.data),n.ExUnits.fromCore(e.executionUnits))}tag(){return __classPrivateFieldGet(this,m,"f")}setTag(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}index(){return __classPrivateFieldGet(this,v,"f")}setIndex(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}data(){return __classPrivateFieldGet(this,_,"f")}setData(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}exUnits(){return __classPrivateFieldGet(this,y,"f")}setExUnits(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}hash(){const e=s(b).update(h.from(this.toCbor(),"hex")).digest();return a.Hash32ByteBase16(c.HexBlob.fromBytes(e))}constructor(e,t,r,s){m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,t,"f");__classPrivateFieldSet(this,_,r,"f");__classPrivateFieldSet(this,y,s,"f")}}m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t,r)=>{"use strict";r.d(t,{RedeemerTag:()=>s});var s;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":(e,t,r)=>{"use strict";r.d(t,{Redeemers:()=>Redeemers});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m;const v=2;const _=2;class Redeemers{toCbor(){if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");const e=new s.CborWriter;if(f.inConwayEra){const t=new Map(__classPrivateFieldGet(this,h,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,u.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(__classPrivateFieldGet(this,h,"f").length);for(const a of __classPrivateFieldGet(this,h,"f"))e.writeEncodedValue(p.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new a.CborReader(e);if(r.peekState()===o.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==o.CborReaderState.EndMap){const s=r.readStartArray();if(s!==v)throw new n.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${v} elements, but got an array of ${s} elements`);const u=Number(r.readUInt());const f=r.readUInt();r.readEndArray();const p=r.readStartArray();if(p!==_)throw new n.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${_} elements, but got an array of ${p} elements`);const h=c.PlutusData.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));const y=i.ExUnits.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new l.Redeemer(u,f,h,y))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==o.CborReaderState.EndArray){t.push(l.Redeemer.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const w=new Redeemers(t);__classPrivateFieldSet(w,m,e,"f");return w}toCore(){return __classPrivateFieldGet(this,h,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>l.Redeemer.fromCore(e)))}values(){return __classPrivateFieldGet(this,h,"f")}setValues(e){__classPrivateFieldSet(this,h,[...e],"f");__classPrivateFieldSet(this,m,void 0,"f")}size(){return __classPrivateFieldGet(this,h,"f").length}constructor(e){h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,h,[...e],"f")}}h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":(e,t,r)=>{"use strict";r.d(t,{TransactionWitnessSet:()=>TransactionWitnessSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var w=r("../../node_modules/lodash/uniqWith.js");var g=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var b,P,S,C,T,k,A,E,j,I,x,R,M,O;class TransactionWitnessSet{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,x,"f"))return __classPrivateFieldGet(this,x,"f");e.writeStartMap(__classPrivateFieldGet(this,b,"m",O).call(this));if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0){__classPrivateFieldGet(this,S,"f").setValues(w(__classPrivateFieldGet(this,S,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,S,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0){__classPrivateFieldGet(this,T,"f").setValues(w(__classPrivateFieldGet(this,T,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,T,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,k,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,A,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,y.hexToBytes)(__classPrivateFieldGet(this,E,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,I,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const a=t.readInt();switch(a){case 0n:r.setVkeys(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),_.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),c.NativeScript.fromCbor));break;case 2n:r.setBootstraps(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),s.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),l.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),p.PlutusData.fromCbor));break;case 5n:r.setRedeemers(m.Redeemers.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),u.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),f.PlutusV3Script.fromCbor));break}}t.readEndMap();__classPrivateFieldSet(r,x,e,"f");return r}toCore(){var e;const t=__classPrivateFieldGet(this,b,"m",R).call(this);return{bootstrap:__classPrivateFieldGet(this,T,"f")?__classPrivateFieldGet(this,T,"f").toCore():void 0,datums:__classPrivateFieldGet(this,A,"f")?__classPrivateFieldGet(this,A,"f").toCore():void 0,redeemers:(null===(e=__classPrivateFieldGet(this,E,"f"))||void 0===e?void 0:e.size())?__classPrivateFieldGet(this,E,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:__classPrivateFieldGet(this,S,"f")?new Map(__classPrivateFieldGet(this,S,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(n.CborSet.fromCore([...e.signatures],_.VkeyWitness.fromCore));if(e.scripts){const r=__classPrivateFieldGet(TransactionWitnessSet,P,"m",M).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(m.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(n.CborSet.fromCore(e.datums,p.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(n.CborSet.fromCore(e.bootstrap,s.BootstrapWitness.fromCore));return t}setVkeys(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}vkeys(){return __classPrivateFieldGet(this,S,"f")}setNativeScripts(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,C,"f")}setBootstraps(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}bootstraps(){return __classPrivateFieldGet(this,T,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,k,"f")}setPlutusData(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}plutusData(){return __classPrivateFieldGet(this,A,"f")}setRedeemers(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}redeemers(){return __classPrivateFieldGet(this,E,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,j,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,I,"f")}constructor(){b.add(this);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0)}}P=TransactionWitnessSet,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,b=new WeakSet,R=function _TransactionWitnessSet_getCoreScripts(){const e=__classPrivateFieldGet(this,k,"f")?__classPrivateFieldGet(this,k,"f").toCore():[];const t=__classPrivateFieldGet(this,j,"f")?__classPrivateFieldGet(this,j,"f").toCore():[];const r=__classPrivateFieldGet(this,I,"f")?__classPrivateFieldGet(this,I,"f").toCore():[];const s=__classPrivateFieldGet(this,C,"f")?__classPrivateFieldGet(this,C,"f").toCore():[];return[...e,...t,...r,...s]},M=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,a]=e.reduce(([e,t,r,s],a)=>{if(a.__type===h.ScriptType.Native)e?e.push(a):e=[a];else{switch(a.version){case h.PlutusLanguageVersion.V1:t?t.push(a):t=[a];break;case h.PlutusLanguageVersion.V2:r?r.push(a):r=[a];break;case h.PlutusLanguageVersion.V3:s?s.push(a):s=[a];break;default:throw new v.SerializationError(v.SerializationFailure.InvalidScriptType,`Script '${a}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:n.CborSet.fromCore(t,c.NativeScript.fromCore)},...r&&{plutusV1:n.CborSet.fromCore(r,l.PlutusV1Script.fromCore)},...s&&{plutusV2:n.CborSet.fromCore(s,u.PlutusV2Script.fromCore)},...a&&{plutusV3:n.CborSet.fromCore(a,f.PlutusV3Script.fromCore)}}},O=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js":(e,t,r)=>{"use strict";r.d(t,{VkeyWitness:()=>VkeyWitness});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class VkeyWitness{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new o.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=i.HexBlob.fromBytes(t.readByteString());const n=i.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new VkeyWitness(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return[__classPrivateFieldGet(this,d,"f"),__classPrivateFieldGet(this,c,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js":(e,t,r)=>{"use strict";r.d(t,{CostModel:()=>CostModel});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;class CostModel{static newPlutusV1(e){return new CostModel(a.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(a.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(a.PlutusLanguageVersion.V3,e)}set(e,t){if(!__classPrivateFieldGet(this,o,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,i,"f")}.`);__classPrivateFieldGet(this,n,"f")[e]=t}get(e){if(!__classPrivateFieldGet(this,o,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,i,"f")}.`);return __classPrivateFieldGet(this,n,"f")[e]}costs(){return __classPrivateFieldGet(this,n,"f")}language(){return __classPrivateFieldGet(this,i,"f")}constructor(e,t){o.add(this);i.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,n,t,"f")}}i=new WeakMap,n=new WeakMap,o=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js":(e,t,r)=>{"use strict";r.d(t,{Costmdls:()=>Costmdls});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class Costmdls{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeInt(r);e.writeStartArray(a.costs().length);for(const o of a.costs())e.writeInt(o)}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==o.CborReaderState.EndMap){const s=Number(t.readInt());const n=new Array;t.readStartArray();while(t.peekState()!==o.CborReaderState.EndArray){n.push(Number(t.readInt()))}t.readEndArray();r.set(s,new i.CostModel(s,n))}t.readEndMap();const d=new Costmdls(r);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){const e=new Map;for(const[t,r]of __classPrivateFieldGet(this,c,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new i.CostModel(r,s));return new Costmdls(t)}size(){return __classPrivateFieldGet(this,c,"f").size}insert(e){__classPrivateFieldGet(this,c,"f").set(e.language(),e);__classPrivateFieldSet(this,l,void 0,"f")}get(e){return __classPrivateFieldGet(this,c,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,c,"f").keys()]}languageViewsEncoding(){const e=new s.CborWriter;const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>{const r=e[0]===d.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===d.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,a]of t){switch(r){case d.PlutusLanguageVersion.V1:{const o=new s.CborWriter;o.writeStartArray();for(const i of a.costs())o.writeInt(i);o.writeEndArray();const l=o.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(l);break}case d.PlutusLanguageVersion.V2:case d.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(a.costs().length);for(const u of a.costs())e.writeInt(u);break;default:throw new n.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{DrepVotingThresholds:()=>DrepVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p,h,m,v,_,y,w;const g=10;class DrepVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");e.writeStartArray(g);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,p,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,m,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,v,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,y,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==g)throw new o.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const f=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const p=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const h=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const m=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const v=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const _=new DrepVotingThresholds(s,d,c,l,u,f,p,h,m,v);__classPrivateFieldSet(_,w,e,"f");return _}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,p,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),ppEconomicGroup:__classPrivateFieldGet(this,m,"f").toCore(),ppGovernanceGroup:__classPrivateFieldGet(this,_,"f").toCore(),ppNetworkGroup:__classPrivateFieldGet(this,h,"f").toCore(),ppTechnicalGroup:__classPrivateFieldGet(this,v,"f").toCore(),treasuryWithdrawal:__classPrivateFieldGet(this,y,"f").toCore(),updateConstitution:__classPrivateFieldGet(this,f,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.updateConstitution),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.ppNetworkGroup),n.UnitInterval.fromCore(e.ppEconomicGroup),n.UnitInterval.fromCore(e.ppTechnicalGroup),n.UnitInterval.fromCore(e.ppGovernanceGroup),n.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setUpdateConstitution(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpNetworkGroup(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpEconomicGroup(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpTechnicalGroup(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpGovernanceGroup(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setTreasuryWithdrawal(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}updateConstitution(){return __classPrivateFieldGet(this,f,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,p,"f")}ppNetworkGroup(){return __classPrivateFieldGet(this,h,"f")}ppEconomicGroup(){return __classPrivateFieldGet(this,m,"f")}ppTechnicalGroup(){return __classPrivateFieldGet(this,v,"f")}ppGovernanceGroup(){return __classPrivateFieldGet(this,_,"f")}treasuryWithdrawal(){return __classPrivateFieldGet(this,y,"f")}constructor(e,t,r,s,a,o,i,n,d,g){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,p,a,"f");__classPrivateFieldSet(this,h,o,"f");__classPrivateFieldSet(this,m,i,"f");__classPrivateFieldSet(this,v,n,"f");__classPrivateFieldSet(this,_,d,"f");__classPrivateFieldSet(this,y,g,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js":(e,t,r)=>{"use strict";r.d(t,{ExUnitPrices:()=>ExUnitPrices});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/fraction.js/fraction.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const p=2;class ExUnitPrices{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new o.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ExUnitPrices(s,d);__classPrivateFieldSet(c,f,e,"f");return c}toCore(){return{memory:Number(__classPrivateFieldGet(this,l,"f").numerator())/Number(__classPrivateFieldGet(this,l,"f").denominator()),steps:Number(__classPrivateFieldGet(this,u,"f").numerator())/Number(__classPrivateFieldGet(this,u,"f").denominator())}}static fromCore(e){const t=new d(e.memory);const r=new d(e.steps);return new ExUnitPrices(new n.UnitInterval(BigInt(t.n),BigInt(t.d)),new n.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return __classPrivateFieldGet(this,l,"f")}setMemPrice(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}stepsPrice(){return __classPrivateFieldGet(this,u,"f")}setStepsPrice(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{PoolVotingThresholds:()=>PoolVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,p,h;const m=5;class PoolVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,p,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==m)throw new o.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(i.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new PoolVotingThresholds(s,d,c,l,u);__classPrivateFieldSet(f,h,e,"f");return f}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,f,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),securityRelevantParamVotingThreshold:__classPrivateFieldGet(this,p,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,f,"f")}securityRelevantParam(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r,s,a){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,p,a,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js":(e,t,r)=>{"use strict";r.d(t,{ProposedProtocolParameterUpdates:()=>ProposedProtocolParameterUpdates});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class ProposedProtocolParameterUpdates{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const t=new Map([...__classPrivateFieldGet(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeByteString(c.from(r,"hex"));e.writeEncodedValue(c.from(s.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const a=s.Hash28ByteBase16(n.HexBlob.fromBytes(t.readByteString()));const c=d.ProtocolParamUpdate.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));r.set(a,c)}t.readEndMap();const l=new ProposedProtocolParameterUpdates(r);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return new Map([...__classPrivateFieldGet(this,l,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,d.ProtocolParamUpdate.fromCore(t)])))}size(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){return __classPrivateFieldGet(this,l,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,l,"f").keys()]}constructor(e){l.set(this,new Map);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolParamUpdate:()=>ProtocolParamUpdate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x,R,M,O,B,D,N,F,H,G,V,K,L,W,z,U,$,q,Y,Q,X;class ProtocolParamUpdate{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,Q,"f"))return __classPrivateFieldGet(this,Q,"f");e.writeStartMap(__classPrivateFieldGet(this,v,"m",X).call(this));if(void 0!==__classPrivateFieldGet(this,_,"f")){e.writeInt(0n);e.writeInt(__classPrivateFieldGet(this,_,"f"))}if(void 0!==__classPrivateFieldGet(this,y,"f")){e.writeInt(1n);e.writeInt(__classPrivateFieldGet(this,y,"f"))}if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(2n);e.writeInt(__classPrivateFieldGet(this,w,"f"))}if(void 0!==__classPrivateFieldGet(this,g,"f")){e.writeInt(3n);e.writeInt(__classPrivateFieldGet(this,g,"f"))}if(void 0!==__classPrivateFieldGet(this,b,"f")){e.writeInt(4n);e.writeInt(__classPrivateFieldGet(this,b,"f"))}if(void 0!==__classPrivateFieldGet(this,P,"f")){e.writeInt(5n);e.writeInt(__classPrivateFieldGet(this,P,"f"))}if(void 0!==__classPrivateFieldGet(this,S,"f")){e.writeInt(6n);e.writeInt(__classPrivateFieldGet(this,S,"f"))}if(void 0!==__classPrivateFieldGet(this,C,"f")){e.writeInt(7n);e.writeInt(__classPrivateFieldGet(this,C,"f"))}if(void 0!==__classPrivateFieldGet(this,T,"f")){e.writeInt(8n);e.writeInt(__classPrivateFieldGet(this,T,"f"))}if(void 0!==__classPrivateFieldGet(this,k,"f")){e.writeInt(9n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,k,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f")){e.writeInt(10n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,A,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,E,"f")){e.writeInt(11n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,E,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,j,"f")){e.writeInt(12n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,I,"f"))if(0===__classPrivateFieldGet(this,I,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(m.from(__classPrivateFieldGet(this,I,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")){e.writeInt(14n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,x,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,R,"f")){e.writeInt(16n);e.writeInt(__classPrivateFieldGet(this,R,"f"))}if(void 0!==__classPrivateFieldGet(this,M,"f")){e.writeInt(17n);e.writeInt(__classPrivateFieldGet(this,M,"f"))}if(void 0!==__classPrivateFieldGet(this,O,"f")){e.writeInt(18n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,O,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,B,"f")){e.writeInt(19n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,B,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,D,"f")){e.writeInt(20n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,D,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,N,"f")){e.writeInt(21n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,N,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,F,"f")){e.writeInt(22n);e.writeInt(__classPrivateFieldGet(this,F,"f"))}if(void 0!==__classPrivateFieldGet(this,H,"f")){e.writeInt(23n);e.writeInt(__classPrivateFieldGet(this,H,"f"))}if(void 0!==__classPrivateFieldGet(this,G,"f")){e.writeInt(24n);e.writeInt(__classPrivateFieldGet(this,G,"f"))}if(void 0!==__classPrivateFieldGet(this,V,"f")){e.writeInt(25n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,V,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,K,"f")){e.writeInt(26n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,K,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,L,"f")){e.writeInt(27n);e.writeInt(__classPrivateFieldGet(this,L,"f"))}if(void 0!==__classPrivateFieldGet(this,W,"f")){e.writeInt(28n);e.writeInt(__classPrivateFieldGet(this,W,"f"))}if(void 0!==__classPrivateFieldGet(this,z,"f")){e.writeInt(29n);e.writeInt(__classPrivateFieldGet(this,z,"f"))}if(void 0!==__classPrivateFieldGet(this,U,"f")){e.writeInt(30n);e.writeInt(__classPrivateFieldGet(this,U,"f"))}if(void 0!==__classPrivateFieldGet(this,$,"f")){e.writeInt(31n);e.writeInt(__classPrivateFieldGet(this,$,"f"))}if(void 0!==__classPrivateFieldGet(this,q,"f")){e.writeInt(32n);e.writeInt(__classPrivateFieldGet(this,q,"f"))}if(void 0!==__classPrivateFieldGet(this,Y,"f")){e.writeInt(33n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,Y,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:__classPrivateFieldSet(r,_,t.readInt(),"f");break;case 1n:__classPrivateFieldSet(r,y,t.readInt(),"f");break;case 2n:__classPrivateFieldSet(r,w,Number(t.readInt()),"f");break;case 3n:__classPrivateFieldSet(r,g,Number(t.readInt()),"f");break;case 4n:__classPrivateFieldSet(r,b,Number(t.readInt()),"f");break;case 5n:__classPrivateFieldSet(r,P,t.readInt(),"f");break;case 6n:__classPrivateFieldSet(r,S,t.readInt(),"f");break;case 7n:__classPrivateFieldSet(r,C,Number(t.readInt()),"f");break;case 8n:__classPrivateFieldSet(r,T,Number(t.readInt()),"f");break;case 9n:__classPrivateFieldSet(r,k,l.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:__classPrivateFieldSet(r,A,l.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:__classPrivateFieldSet(r,E,l.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:__classPrivateFieldSet(r,j,l.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();__classPrivateFieldSet(r,I,"","f");t.readEndArray()}else{t.readEncodedValue();__classPrivateFieldSet(r,I,p.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:__classPrivateFieldSet(r,x,u.ProtocolVersion.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:__classPrivateFieldSet(r,R,t.readInt(),"f");break;case 17n:__classPrivateFieldSet(r,M,t.readInt(),"f");break;case 18n:__classPrivateFieldSet(r,O,i.Costmdls.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:__classPrivateFieldSet(r,B,c.ExUnitPrices.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:__classPrivateFieldSet(r,D,f.ExUnits.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:__classPrivateFieldSet(r,N,f.ExUnits.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:__classPrivateFieldSet(r,F,Number(t.readInt()),"f");break;case 23n:__classPrivateFieldSet(r,H,Number(t.readInt()),"f");break;case 24n:__classPrivateFieldSet(r,G,Number(t.readInt()),"f");break;case 25n:__classPrivateFieldSet(r,V,h.PoolVotingThresholds.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:__classPrivateFieldSet(r,K,n.DrepVotingThresholds.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:__classPrivateFieldSet(r,L,Number(t.readInt()),"f");break;case 28n:__classPrivateFieldSet(r,W,Number(t.readInt()),"f");break;case 29n:__classPrivateFieldSet(r,z,Number(t.readInt()),"f");break;case 30n:__classPrivateFieldSet(r,U,Number(t.readInt()),"f");break;case 31n:__classPrivateFieldSet(r,$,Number(t.readInt()),"f");break;case 32n:__classPrivateFieldSet(r,q,Number(t.readInt()),"f");break;case 33n:__classPrivateFieldSet(r,Y,l.UnitInterval.fromCbor(p.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();__classPrivateFieldSet(r,Q,e,"f");return r}toCore(){var e,t,r,s,a,o;const i={coinsPerUtxoByte:void 0!==__classPrivateFieldGet(this,M,"f")?Number(__classPrivateFieldGet(this,M,"f")):void 0,collateralPercentage:__classPrivateFieldGet(this,H,"f"),committeeTermLimit:void 0!==__classPrivateFieldGet(this,W,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,W,"f")):void 0,costModels:null===(e=__classPrivateFieldGet(this,O,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:__classPrivateFieldGet(this,$,"f"),dRepInactivityPeriod:void 0!==__classPrivateFieldGet(this,q,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,q,"f")):void 0,dRepVotingThresholds:null===(t=__classPrivateFieldGet(this,K,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:__classPrivateFieldGet(this,T,"f"),governanceActionDeposit:__classPrivateFieldGet(this,U,"f"),governanceActionValidityPeriod:void 0!==__classPrivateFieldGet(this,z,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,z,"f")):void 0,maxBlockBodySize:__classPrivateFieldGet(this,w,"f"),maxBlockHeaderSize:__classPrivateFieldGet(this,b,"f"),maxCollateralInputs:__classPrivateFieldGet(this,G,"f"),maxExecutionUnitsPerBlock:null===(r=__classPrivateFieldGet(this,N,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=__classPrivateFieldGet(this,D,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==__classPrivateFieldGet(this,g,"f")?Number(__classPrivateFieldGet(this,g,"f")):void 0,maxValueSize:__classPrivateFieldGet(this,F,"f"),minCommitteeSize:__classPrivateFieldGet(this,L,"f"),minFeeCoefficient:void 0!==__classPrivateFieldGet(this,_,"f")?Number(__classPrivateFieldGet(this,_,"f")):void 0,minFeeConstant:void 0!==__classPrivateFieldGet(this,y,"f")?Number(__classPrivateFieldGet(this,y,"f")):void 0,minFeeRefScriptCostPerByte:__classPrivateFieldGet(this,Y,"f")?__classPrivateFieldGet(this,Y,"f").toFloat().toString():void 0,minPoolCost:void 0!==__classPrivateFieldGet(this,R,"f")?Number(__classPrivateFieldGet(this,R,"f")):void 0,monetaryExpansion:__classPrivateFieldGet(this,A,"f")?__classPrivateFieldGet(this,A,"f").toFloat().toString():void 0,poolDeposit:void 0!==__classPrivateFieldGet(this,S,"f")?Number(__classPrivateFieldGet(this,S,"f")):void 0,poolInfluence:__classPrivateFieldGet(this,k,"f")?__classPrivateFieldGet(this,k,"f").toFloat().toString():void 0,poolRetirementEpochBound:__classPrivateFieldGet(this,C,"f"),poolVotingThresholds:null===(a=__classPrivateFieldGet(this,V,"f"))||void 0===a?void 0:a.toCore(),prices:null===(o=__classPrivateFieldGet(this,B,"f"))||void 0===o?void 0:o.toCore(),stakeKeyDeposit:void 0!==__classPrivateFieldGet(this,P,"f")?Number(__classPrivateFieldGet(this,P,"f")):void 0,treasuryExpansion:__classPrivateFieldGet(this,E,"f")?__classPrivateFieldGet(this,E,"f").toFloat().toString():void 0};if(__classPrivateFieldGet(this,j,"f"))i.decentralizationParameter=__classPrivateFieldGet(this,j,"f").toFloat().toString();if(void 0!==__classPrivateFieldGet(this,I,"f"))i.extraEntropy=__classPrivateFieldGet(this,I,"f");if(__classPrivateFieldGet(this,x,"f"))i.protocolVersion=__classPrivateFieldGet(this,x,"f").toCore();return i}static fromCore(e){const t=new ProtocolParamUpdate;__classPrivateFieldSet(t,_,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");__classPrivateFieldSet(t,w,e.maxBlockBodySize,"f");__classPrivateFieldSet(t,y,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");__classPrivateFieldSet(t,b,e.maxBlockHeaderSize,"f");__classPrivateFieldSet(t,P,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");__classPrivateFieldSet(t,S,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");__classPrivateFieldSet(t,C,e.poolRetirementEpochBound,"f");__classPrivateFieldSet(t,T,e.desiredNumberOfPools,"f");__classPrivateFieldSet(t,k,e.poolInfluence?l.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");__classPrivateFieldSet(t,A,e.monetaryExpansion?l.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");__classPrivateFieldSet(t,E,e.treasuryExpansion?l.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");__classPrivateFieldSet(t,R,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");__classPrivateFieldSet(t,F,e.maxValueSize,"f");__classPrivateFieldSet(t,g,e.maxTxSize,"f");__classPrivateFieldSet(t,H,e.collateralPercentage,"f");__classPrivateFieldSet(t,G,e.maxCollateralInputs,"f");__classPrivateFieldSet(t,O,e.costModels?i.Costmdls.fromCore(e.costModels):void 0,"f");__classPrivateFieldSet(t,B,e.prices?c.ExUnitPrices.fromCore(e.prices):void 0,"f");__classPrivateFieldSet(t,D,e.maxExecutionUnitsPerTransaction?f.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");__classPrivateFieldSet(t,N,e.maxExecutionUnitsPerBlock?f.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");__classPrivateFieldSet(t,M,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");__classPrivateFieldSet(t,V,e.poolVotingThresholds?h.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");__classPrivateFieldSet(t,K,e.dRepVotingThresholds?n.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");__classPrivateFieldSet(t,L,e.minCommitteeSize,"f");__classPrivateFieldSet(t,W,e.committeeTermLimit,"f");__classPrivateFieldSet(t,z,e.governanceActionValidityPeriod,"f");__classPrivateFieldSet(t,U,e.governanceActionDeposit,"f");__classPrivateFieldSet(t,$,e.dRepDeposit,"f");__classPrivateFieldSet(t,q,e.dRepInactivityPeriod,"f");__classPrivateFieldSet(t,Y,e.minFeeRefScriptCostPerByte?l.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:a}=e;if(void 0!==r||void 0!==s||a){__classPrivateFieldSet(t,j,a?l.UnitInterval.fromFloat(Number(a)):void 0,"f");__classPrivateFieldSet(t,x,r?u.ProtocolVersion.fromCore(r):void 0,"f");__classPrivateFieldSet(t,I,s?(0,p.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){__classPrivateFieldSet(this,_,e,"f")}minFeeA(){return __classPrivateFieldGet(this,_,"f")}setMinFeeB(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minFeeB(){return __classPrivateFieldGet(this,y,"f")}setMaxBlockBodySize(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockBodySize(){return __classPrivateFieldGet(this,w,"f")}setMaxTxSize(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxSize(){return __classPrivateFieldGet(this,g,"f")}setMaxBlockHeaderSize(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockHeaderSize(){return __classPrivateFieldGet(this,b,"f")}setKeyDeposit(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}keyDeposit(){return __classPrivateFieldGet(this,P,"f")}setPoolDeposit(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolDeposit(){return __classPrivateFieldGet(this,S,"f")}setMaxEpoch(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxEpoch(){return __classPrivateFieldGet(this,C,"f")}setNOpt(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}nOpt(){return __classPrivateFieldGet(this,T,"f")}setPoolPledgeInfluence(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolPledgeInfluence(){return __classPrivateFieldGet(this,k,"f")}setExpansionRate(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}expansionRate(){return __classPrivateFieldGet(this,A,"f")}setTreasuryGrowthRate(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}treasuryGrowthRate(){return __classPrivateFieldGet(this,E,"f")}setD(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}d(){return __classPrivateFieldGet(this,j,"f")}setExtraEntropy(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}extraEntropy(){return __classPrivateFieldGet(this,I,"f")}setProtocolVersion(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}protocolVersion(){return __classPrivateFieldGet(this,x,"f")}setMinPoolCost(e){__classPrivateFieldSet(this,R,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minPoolCost(){return __classPrivateFieldGet(this,R,"f")}setAdaPerUtxoByte(e){__classPrivateFieldSet(this,M,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}adaPerUtxoByte(){return __classPrivateFieldGet(this,M,"f")}setCostModels(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}costModels(){return __classPrivateFieldGet(this,O,"f")}setExecutionCosts(e){__classPrivateFieldSet(this,B,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}executionCosts(){return __classPrivateFieldGet(this,B,"f")}setMaxTxExUnits(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxExUnits(){return __classPrivateFieldGet(this,D,"f")}setMaxBlockExUnits(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockExUnits(){return __classPrivateFieldGet(this,N,"f")}setMaxValueSize(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxValueSize(){return __classPrivateFieldGet(this,F,"f")}setCollateralPercentage(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}collateralPercentage(){return __classPrivateFieldGet(this,H,"f")}setMaxCollateralInputs(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxCollateralInputs(){return __classPrivateFieldGet(this,G,"f")}setPoolVotingThresholds(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolVotingThresholds(){return __classPrivateFieldGet(this,V,"f")}setDrepVotingThresholds(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepVotingThresholds(){return __classPrivateFieldGet(this,K,"f")}setMinCommitteeSize(e){__classPrivateFieldSet(this,L,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minCommitteeSize(){return __classPrivateFieldGet(this,L,"f")}setCommitteeTermLimit(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}committeeTermLimit(){return __classPrivateFieldGet(this,W,"f")}setGovernanceActionValidityPeriod(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionValidityPeriod(){return __classPrivateFieldGet(this,z,"f")}setGovernanceActionDeposit(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionDeposit(){return __classPrivateFieldGet(this,U,"f")}setDrepDeposit(e){__classPrivateFieldSet(this,$,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepDeposit(){return __classPrivateFieldGet(this,$,"f")}setDrepInactivityPeriod(e){__classPrivateFieldSet(this,q,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepInactivityPeriod(){return __classPrivateFieldGet(this,q,"f")}minFeeRefScriptCostPerByte(){return __classPrivateFieldGet(this,Y,"f")}constructor(){v.add(this);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);A.set(this,void 0);E.set(this,void 0);j.set(this,void 0);I.set(this,void 0);x.set(this,void 0);R.set(this,void 0);M.set(this,void 0);O.set(this,void 0);B.set(this,void 0);D.set(this,void 0);N.set(this,void 0);F.set(this,void 0);H.set(this,void 0);G.set(this,void 0);V.set(this,void 0);K.set(this,void 0);L.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);q.set(this,void 0);Y.set(this,void 0);Q.set(this,void 0)}}_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,x=new WeakMap,R=new WeakMap,M=new WeakMap,O=new WeakMap,B=new WeakMap,D=new WeakMap,N=new WeakMap,F=new WeakMap,H=new WeakMap,G=new WeakMap,V=new WeakMap,K=new WeakMap,L=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,q=new WeakMap,Y=new WeakMap,Q=new WeakMap,v=new WeakSet,X=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,_,"f"))++e;if(void 0!==__classPrivateFieldGet(this,y,"f"))++e;if(void 0!==__classPrivateFieldGet(this,w,"f"))++e;if(void 0!==__classPrivateFieldGet(this,g,"f"))++e;if(void 0!==__classPrivateFieldGet(this,b,"f"))++e;if(void 0!==__classPrivateFieldGet(this,P,"f"))++e;if(void 0!==__classPrivateFieldGet(this,S,"f"))++e;if(void 0!==__classPrivateFieldGet(this,C,"f"))++e;if(void 0!==__classPrivateFieldGet(this,T,"f"))++e;if(void 0!==__classPrivateFieldGet(this,k,"f"))++e;if(void 0!==__classPrivateFieldGet(this,A,"f"))++e;if(void 0!==__classPrivateFieldGet(this,E,"f"))++e;if(void 0!==__classPrivateFieldGet(this,j,"f"))++e;if(void 0!==__classPrivateFieldGet(this,I,"f"))++e;if(void 0!==__classPrivateFieldGet(this,x,"f"))++e;if(void 0!==__classPrivateFieldGet(this,R,"f"))++e;if(void 0!==__classPrivateFieldGet(this,M,"f"))++e;if(void 0!==__classPrivateFieldGet(this,O,"f"))++e;if(void 0!==__classPrivateFieldGet(this,B,"f"))++e;if(void 0!==__classPrivateFieldGet(this,D,"f"))++e;if(void 0!==__classPrivateFieldGet(this,N,"f"))++e;if(void 0!==__classPrivateFieldGet(this,F,"f"))++e;if(void 0!==__classPrivateFieldGet(this,H,"f"))++e;if(void 0!==__classPrivateFieldGet(this,G,"f"))++e;if(void 0!==__classPrivateFieldGet(this,V,"f"))++e;if(void 0!==__classPrivateFieldGet(this,K,"f"))++e;if(void 0!==__classPrivateFieldGet(this,L,"f"))++e;if(void 0!==__classPrivateFieldGet(this,W,"f"))++e;if(void 0!==__classPrivateFieldGet(this,z,"f"))++e;if(void 0!==__classPrivateFieldGet(this,U,"f"))++e;if(void 0!==__classPrivateFieldGet(this,$,"f"))++e;if(void 0!==__classPrivateFieldGet(this,q,"f"))++e;if(void 0!==__classPrivateFieldGet(this,Y,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js":(e,t,r)=>{"use strict";r.d(t,{Update:()=>Update});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const p=2;class Update{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(p);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeInt(__classPrivateFieldGet(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=d.ProposedProtocolParameterUpdates.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new Update(s,(0,o.EpochNo)(Number(c)));__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{epoch:__classPrivateFieldGet(this,l,"f"),proposedProtocolParameterUpdates:__classPrivateFieldGet(this,u,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=d.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return __classPrivateFieldGet(this,l,"f")}setEpoch(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}proposedProtocolParameterUpdates(){return __classPrivateFieldGet(this,u,"f")}setProposedProtocolParameterUpdates(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,e,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{ALONZO_AUX_TAG:()=>e8.ALONZO_AUX_TAG,Anchor:()=>w.Anchor,AuthCommitteeHot:()=>ec.AuthCommitteeHot,AuxiliaryData:()=>e8.AuxiliaryData,BootstrapWitness:()=>eZ.BootstrapWitness,CborAdditionalInfo:()=>j.CborAdditionalInfo,CborContentException:()=>N.CborContentException,CborInitialByte:()=>I.CborInitialByte,CborInvalidOperationException:()=>N.CborInvalidOperationException,CborMajorType:()=>x.CborMajorType,CborReader:()=>R.CborReader,CborReaderState:()=>M.CborReaderState,CborSet:()=>b.CborSet,CborSimpleValue:()=>O,CborTag:()=>B.CborTag,CborWriter:()=>D.CborWriter,Certificate:()=>F.Certificate,Committee:()=>Committee,Constitution:()=>eG.Constitution,ConstrPlutusData:()=>C.ConstrPlutusData,CostModel:()=>em.CostModel,Costmdls:()=>eh.Costmdls,Credential:()=>S.Credential,DRep:()=>et.DRep,DRepKind:()=>ee.DRepKind,Datum:()=>y.Datum,DatumKind:()=>y.DatumKind,DrepVotingThresholds:()=>eg.DrepVotingThresholds,ExUnitPrices:()=>ew.ExUnitPrices,ExUnits:()=>v.ExUnits,GeneralTransactionMetadata:()=>e4.GeneralTransactionMetadata,GenesisKeyDelegation:()=>H.GenesisKeyDelegation,GovernanceActionId:()=>g.GovernanceActionId,GovernanceActionKind:()=>eY.GovernanceActionKind,HardForkInitiationAction:()=>eV.HardForkInitiationAction,Hash:()=>P.Hash,InfoAction:()=>eK.InfoAction,LossOfPrecisionException:()=>N.LossOfPrecisionException,MetadatumList:()=>e2.MetadatumList,MetadatumMap:()=>e3.MetadatumMap,MoveInstantaneousReward:()=>X.MoveInstantaneousReward,MoveInstantaneousRewardToOtherPot:()=>Z.MoveInstantaneousRewardToOtherPot,MoveInstantaneousRewardToStakeCreds:()=>J.MoveInstantaneousRewardToStakeCreds,MultiHostName:()=>$.MultiHostName,NativeScript:()=>o.NativeScript,NewConstitution:()=>eL.NewConstitution,NoConfidence:()=>eW.NoConfidence,ParameterChangeAction:()=>ez.ParameterChangeAction,PlutusData:()=>T.PlutusData,PlutusDataKind:()=>k.PlutusDataKind,PlutusList:()=>A.PlutusList,PlutusMap:()=>E.PlutusMap,PlutusV1Script:()=>f.PlutusV1Script,PlutusV2Script:()=>p.PlutusV2Script,PlutusV3Script:()=>h.PlutusV3Script,PoolMetadata:()=>z.PoolMetadata,PoolParams:()=>U.PoolParams,PoolRegistration:()=>G.PoolRegistration,PoolRetirement:()=>V.PoolRetirement,PoolVotingThresholds:()=>eb.PoolVotingThresholds,ProposalProcedure:()=>eq.ProposalProcedure,ProposedProtocolParameterUpdates:()=>ev.ProposedProtocolParameterUpdates,ProtocolParamUpdate:()=>e_.ProtocolParamUpdate,ProtocolVersion:()=>_.ProtocolVersion,REQUIRED_FIELDS_COUNT:()=>eC.REQUIRED_FIELDS_COUNT,Redeemer:()=>eX.Redeemer,RedeemerTag:()=>eQ.RedeemerTag,Redeemers:()=>eJ.Redeemers,RegisterDelegateRepresentative:()=>eu.RegisterDelegateRepresentative,Registration:()=>er.Registration,Relay:()=>Y.Relay,RelayKind:()=>Y.RelayKind,ResignCommitteeCold:()=>el.ResignCommitteeCold,SHELLEY_ERA_FIELDS_COUNT:()=>e8.SHELLEY_ERA_FIELDS_COUNT,Script:()=>a.Script,ScriptAll:()=>i.ScriptAll,ScriptAny:()=>n.ScriptAny,ScriptNOfK:()=>d.ScriptNOfK,ScriptPubkey:()=>c.ScriptPubkey,SingleHostAddr:()=>Q.SingleHostAddr,SingleHostName:()=>q.SingleHostName,StakeDelegation:()=>K.StakeDelegation,StakeDeregistration:()=>L.StakeDeregistration,StakeRegistration:()=>W.StakeRegistration,StakeRegistrationDelegation:()=>ei.StakeRegistrationDelegation,StakeVoteDelegation:()=>eo.StakeVoteDelegation,StakeVoteRegistrationDelegation:()=>ed.StakeVoteRegistrationDelegation,TimelockExpiry:()=>l.TimelockExpiry,TimelockStart:()=>u.TimelockStart,Transaction:()=>s.Transaction,TransactionBody:()=>eP.TransactionBody,TransactionInput:()=>eS.TransactionInput,TransactionMetadatum:()=>e5.TransactionMetadatum,TransactionMetadatumKind:()=>e6.TransactionMetadatumKind,TransactionOutput:()=>eC.TransactionOutput,TransactionUnspentOutput:()=>TransactionUnspentOutput,TransactionWitnessSet:()=>e0.TransactionWitnessSet,TreasuryWithdrawalsAction:()=>eU.TreasuryWithdrawalsAction,TxBodyCBOR:()=>s.TxBodyCBOR,TxCBOR:()=>s.TxCBOR,UnitInterval:()=>m.UnitInterval,UnregisterDelegateRepresentative:()=>ef.UnregisterDelegateRepresentative,Unregistration:()=>es.Unregistration,Update:()=>ey.Update,UpdateCommittee:()=>e$.UpdateCommittee,UpdateDelegateRepresentative:()=>ep.UpdateDelegateRepresentative,Value:()=>eT.Value,VkeyWitness:()=>e1.VkeyWitness,VoteDelegation:()=>ea.VoteDelegation,VoteRegistrationDelegation:()=>en.VoteRegistrationDelegation,Voter:()=>eA.Voter,VoterKind:()=>ek.VoterKind,VotingProcedure:()=>eE.VotingProcedure,VotingProcedures:()=>ej.VotingProcedures,deserializeTx:()=>s.deserializeTx,isDatumHash:()=>y.isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var A=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var E=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var I=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var M=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var O;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(O||(O={}));var B=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var N=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var F=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var H=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var G=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var V=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var K=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var L=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var W=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var U=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var $=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var Y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var Q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var X=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var J=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var Z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var ee=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var et=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var er=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var es=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var ea=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var eo=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var ei=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var en=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var ed=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var ec=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var el=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var eu=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var ef=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var ep=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var eh=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var em=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var ev=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var e_=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var ey=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var ew=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var eg=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var eb=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var eP=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var eS=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var eC=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var eT=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var ek=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var eA=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var eE=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var ej=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var eI=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var ex=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var eR=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var eM,eO,eB;const eD=2;const eN=2;const eF=0;const eH=1;class Committee{toCbor(){const e=new D.CborWriter;if(__classPrivateFieldGet(this,eB,"f"))return __classPrivateFieldGet(this,eB,"f");if(0===__classPrivateFieldGet(this,eO,"f").length)throw new eI.InvalidStateError("There must be at least one Committee member");e.writeStartArray(eD);e.writeStartMap(__classPrivateFieldGet(this,eO,"f").length);for(const t of __classPrivateFieldGet(this,eO,"f")){e.writeStartArray(eN);e.writeInt(t[eF].type);e.writeByteString((0,eR.hexToBytes)(t[eF].hash));e.writeInt(t[eH])}e.writeEncodedValue((0,eR.hexToBytes)(__classPrivateFieldGet(this,eM,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new R.CborReader(e);const r=t.readStartArray();if(r!==eD)throw new eI.InvalidArgumentError("cbor",`Expected an array of ${eD} elements, but got an array of ${r} elements`);t.readStartMap();const s=[];while(t.peekState()!==M.CborReaderState.EndMap){if(t.readStartArray()!==eN)throw new eI.InvalidArgumentError("cbor",`Expected an array of ${eN} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());const o=ex.HexBlob.fromBytes(t.readByteString());t.readEndArray();const i=Number(t.readUInt());s.push([{hash:o,type:a},i])}t.readEndMap();const n=m.UnitInterval.fromCbor(ex.HexBlob.fromBytes(t.readEncodedValue()));const d=new Committee(n);for(const c of s)d.addMember(c[eF],c[eH]);__classPrivateFieldSet(d,eB,e,"f");return d}toCore(){if(0===__classPrivateFieldGet(this,eO,"f").length)throw new eI.InvalidStateError("There must be at least one Committee member");const e=__classPrivateFieldGet(this,eO,"f").map(e=>({coldCredential:e[eF],epoch:e[eH]}));return{members:e,quorumThreshold:__classPrivateFieldGet(this,eM,"f").toCore()}}static fromCore(e){const t=new Committee(m.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return __classPrivateFieldGet(this,eO,"f").map(e=>e[0])}quorumThreshold(){return __classPrivateFieldGet(this,eM,"f")}addMember(e,t){const r=__classPrivateFieldGet(this,eO,"f").find(t=>t[eF].type===e.type&&t[eF].hash===e.hash);if(r)throw new eI.InvalidArgumentError("committeeColdCredential","The given credential is already present");__classPrivateFieldGet(this,eO,"f").push([e,t])}getMemberEpoch(e){const t=__classPrivateFieldGet(this,eO,"f").find(t=>t[eF].type===e.type&&t[eF].hash===e.hash);if(t)return t[eH];return}constructor(e){eM.set(this,void 0);eO.set(this,[]);eB.set(this,void 0);__classPrivateFieldSet(this,eM,e,"f")}}eM=new WeakMap,eO=new WeakMap,eB=new WeakMap;var eG=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var eV=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var eK=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var eL=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var eW=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var ez=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var eU=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var e$=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var eq=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var eY=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var eQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var eX=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var eJ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var eZ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var e0=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var e1=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var e2=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var e3=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var e5=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var e6=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var e4=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var e8=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var TransactionUnspentOutput_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var TransactionUnspentOutput_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var e9,e7,te;const tt=2;class TransactionUnspentOutput{toCbor(){if(TransactionUnspentOutput_classPrivateFieldGet(this,te,"f"))return TransactionUnspentOutput_classPrivateFieldGet(this,te,"f");const e=new D.CborWriter;e.writeStartArray(tt);e.writeEncodedValue((0,eR.hexToBytes)(TransactionUnspentOutput_classPrivateFieldGet(this,e9,"f").toCbor()));e.writeEncodedValue((0,eR.hexToBytes)(TransactionUnspentOutput_classPrivateFieldGet(this,e7,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new R.CborReader(e);const r=t.readStartArray();if(r!==tt)throw new eI.InvalidArgumentError("cbor",`Expected an array of ${tt} elements, but got an array of ${r} elements`);const s=eS.TransactionInput.fromCbor(ex.HexBlob.fromBytes(t.readEncodedValue()));const a=eC.TransactionOutput.fromCbor(ex.HexBlob.fromBytes(t.readEncodedValue()));const o=new TransactionUnspentOutput(s,a);TransactionUnspentOutput_classPrivateFieldSet(o,te,e,"f");return o}toCore(){return[TransactionUnspentOutput_classPrivateFieldGet(this,e9,"f").toCore(),TransactionUnspentOutput_classPrivateFieldGet(this,e7,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(eS.TransactionInput.fromCore(e[0]),eC.TransactionOutput.fromCore(e[1]))}input(){return TransactionUnspentOutput_classPrivateFieldGet(this,e9,"f")}setInput(e){TransactionUnspentOutput_classPrivateFieldSet(this,e9,e,"f");TransactionUnspentOutput_classPrivateFieldSet(this,te,void 0,"f")}output(){return TransactionUnspentOutput_classPrivateFieldGet(this,e7,"f")}setOutput(e){TransactionUnspentOutput_classPrivateFieldSet(this,e7,e,"f");TransactionUnspentOutput_classPrivateFieldSet(this,te,void 0,"f")}constructor(e,t){e9.set(this,void 0);e7.set(this,void 0);te.set(this,void 0);TransactionUnspentOutput_classPrivateFieldSet(this,e9,e,"f");TransactionUnspentOutput_classPrivateFieldSet(this,e7,t,"f")}}e9=new WeakMap,e7=new WeakMap,te=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{InvalidProtocolParametersError:()=>InvalidProtocolParametersError,NotImplementedError:()=>NotImplementedError,ProviderError:()=>ProviderError,ProviderFailure:()=>o,SerializationError:()=>SerializationError,SerializationFailure:()=>d,TimeoutError:()=>TimeoutError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var o;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(o||(o={}));const i={[o.BadRequest]:400,[o.Forbidden]:403,[o.NotFound]:404,[o.Conflict]:409,[o.Unhealthy]:500,[o.Unknown]:500,[o.InvalidResponse]:500,[o.NotImplemented]:500,[o.ConnectionFailure]:500,[o.ServerUnavailable]:500};const n=new Map(Object.entries(i).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(o).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:o.Unknown;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}class HandleOwnerChangeError extends a.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}var d;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(d||(d={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}class InvalidProtocolParametersError extends a.CustomError{constructor(e){super(e)}}class NotImplementedError extends a.CustomError{constructor(e){super(`Not implemented: ${e}`)}}class TimeoutError extends a.CustomError{constructor(e){super(`Timeout: ${e}`)}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js":(e,t,r)=>{"use strict";r.d(t,{coalesceValueQuantities:()=>coalesceValueQuantities});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const coalesceValueQuantities=e=>({assets:s.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:a.BigIntMath.sum(e.map(({coins:e})=>e))})},"../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js":(e,t,r)=>{"use strict";r.d(t,{inConwayEra:()=>s});let s=false;const setInConwayEra=e=>s=e},"../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js":(e,t,r)=>{"use strict";r.d(t,{asMetadatumArray:()=>asMetadatumArray,asMetadatumMap:()=>asMetadatumMap,jsonToMetadatum:()=>jsonToMetadatum,metadatumToJson:()=>metadatumToJson});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(jsonToMetadatum(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const a=new Map;for(const o in e){const i=e[o];a.set(jsonToMetadatum(o),jsonToMetadatum(i))}return a}}};const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(metadatumToJson(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const a={};for(const[o,i]of e.entries())a[metadatumToJson(o)]=metadatumToJson(i);return a}}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js":(e,t,r)=>{"use strict";r.d(t,{bytesToHex:()=>bytesToHex,hexToBytes:()=>hexToBytes});var s=r("../../node_modules/buffer/index.js")["Buffer"];const bytesToHex=e=>s.from(e).toString("hex");const hexToBytes=e=>s.from(e,"hex");const utf8ToBytes=e=>s.from(e,"utf8");const utf8ToHex=e=>s.from(e,"utf8").toString("hex")},"../../node_modules/@cardano-sdk/core/dist/esm/util/nativeScript.js":(e,t,r)=>{"use strict";r.d(t,{nativeScriptPolicyId:()=>nativeScriptPolicyId});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const nativeScriptPolicyId=e=>(0,a.PolicyId)(s.NativeScript.fromCore(e).hash());const jsonToNativeScript=e=>{let t;if(!e.type){throw new SerializationError(SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":t={__type:ScriptType.Native,keyHash:Crypto.Ed25519KeyHashHex(e.keyHash),kind:NativeScriptKind.RequireSignature};break;case"all":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAllOf,scripts:new Array};for(let r=0;r<e.scripts.length;++r)t.scripts.push(jsonToNativeScript(e.scripts[r]));break;case"any":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAnyOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)t.scripts.push(jsonToNativeScript(e.scripts[s]));break;case"atLeast":{const a=Number.parseInt(e.required);t={__type:ScriptType.Native,kind:NativeScriptKind.RequireNOf,required:a,scripts:new Array};for(let o=0;o<e.scripts.length;++o)t.scripts.push(jsonToNativeScript(e.scripts[o]));break}case"before":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeBefore,slot:Slot(Number.parseInt(e.slot))};break;case"after":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeAfter,slot:Slot(Number.parseInt(e.slot))};break;default:throw new SerializationError(SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/util/promiseTimeout.js":(e,t,r)=>{"use strict";r.d(t,{promiseTimeout:()=>promiseTimeout});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");const promiseTimeout=(e,t)=>{let r;return Promise.race([e,new Promise((e,a)=>r=setTimeout(()=>a(new s.TimeoutError("Failed to resolve the promise in time")),t))]).finally(()=>{if(r)clearTimeout(r)})}},"../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js":(e,t,r)=>{"use strict";r.d(t,{createSlotEpochCalc:()=>c,createSlotEpochInfoCalc:()=>createSlotEpochInfoCalc,createSlotTimeCalc:()=>createSlotTimeCalc,epochSlotsCalc:()=>l});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var o=r("../../node_modules/lodash/groupBy.js");var i=r("../../node_modules/lodash/last.js");var n=r("../../node_modules/lodash/memoize.js");var d=r("../../node_modules/lodash/orderBy.js");class EraSummaryError extends s.CustomError{}const createSlotEpochCalcImpl=e=>{const t=Object.values(o(e,"start.slot")).map(i);const r=d(t,({start:e})=>e.slot);return e=>{const t=d(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let a;for(let o=0;o<t.length;o++){a=t[o];const i=t[o+1];s+=Math.floor((((null==i?void 0:i.start.slot)||e)-a.start.slot)/a.parameters.epochLength)}return{epochEraSummary:a,epochNo:s}}};const c=n(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,a.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values(o(e,"start.slot")).map(i);const r=d(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};const createSlotEpochInfoCalc=e=>{const t=createSlotTimeCalc(e);const r=createSlotEpochCalcImpl(e);return e=>{const{epochNo:s,epochEraSummary:o}=r(e);const i=o.start.slot+Math.floor((e-o.start.slot)/o.parameters.epochLength)*o.parameters.epochLength;const n=i+o.parameters.epochLength-1;return{epochNo:(0,a.EpochNo)(s),firstSlot:{date:t((0,a.Slot)(i)),slot:(0,a.Slot)(i)},lastSlot:{date:t((0,a.Slot)(n)),slot:(0,a.Slot)(n)}}}};const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let o=0;const i=t.length-1;const checkNextEraSummary=()=>o<i&&s>=t[o+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())o++};findNextEraSummary();while(r!==e){s+=t[o].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[o];return{eraSummary:n,firstSlot:(0,a.Slot)(s),lastSlot:(0,a.Slot)(s+n.parameters.epochLength-1)}};const l=n(epochSlotsCalcImplementation);const u=n(e=>n(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/esm/util/subtractValueQuantities.js":(e,t,r)=>{"use strict";r.d(t,{subtractValueQuantities:()=>subtractValueQuantities});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/subtractTokenMaps.js");const subtractValueQuantities=e=>({assets:a.subtractTokenMaps(e.map(({assets:e})=>e)),coins:s.BigIntMath.subtract(e.map(({coins:e})=>e))})},"../../node_modules/@cardano-sdk/core/dist/esm/util/time.js":(e,t,r)=>{"use strict";r.d(t,{Milliseconds:()=>Milliseconds,Seconds:()=>Seconds});const Milliseconds=e=>e;const Seconds=e=>e;const Minutes=e=>e;const Hours=e=>e;const Days=e=>e;Hours.toDays=e=>e/24;Days.toHours=e=>24*e;Minutes.toHours=e=>e/60;Hours.toMinutes=e=>60*e;Seconds.toMinutes=e=>e/60;Minutes.toSeconds=e=>60*e;Seconds.toMilliseconds=e=>1e3*e;Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(Hours.toMinutes(e))))}getTotalDays(){return Hours.toDays(this.getTotalHours())}getTotalHours(){return Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return Days(Math.floor(this.getTotalDays()))}getHours(){return Hours(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return Minutes(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return Seconds(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return Milliseconds(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=Milliseconds(0);this.elapsed=e}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/tokenTransferInspector.js":(e,t,r)=>{"use strict";r.d(t,{tokenTransferInspector:()=>tokenTransferInspector});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/txInspector.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/util/promiseTimeout.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/subtractValueQuantities.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/tryGetAssetInfos.js");var c=r("../../node_modules/lodash/uniq.js");const coalesceByAddress=e=>{const t=e.reduce((e,t)=>{var r;if(!e.has(t.address))e.set(t.address,[]);null===(r=e.get(t.address))||void 0===r?void 0:r.push(t);return e},new Map);const r=new Map;for(const[s,a]of t)r.set(s,(0,o.coalesceValueQuantities)(a.map(e=>e.value)));return r};const initializeAddressMap=e=>new Map(e.map(e=>[e,{assets:new Map,coins:0n}]));const updateFromAddressMap=(e,t,r)=>{var s;if(r.coins<0n)e.get(t).coins=r.coins;var a;for(const[o,i]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(i<0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(o,i)}};const updateToAddressMap=(e,t,r)=>{var s;if(r.coins>0n)e.get(t).coins=r.coins;var a;for(const[o,i]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(i>0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(o,i)}};const computeNetDifferences=(e,t,r,s)=>{for(const[a,o]of e.entries()){var i;const d=null!==(i=t.get(a))&&void 0!==i?i:{assets:new Map,coins:0n};const c=(0,n.subtractValueQuantities)([d,o]);updateFromAddressMap(r,a,c);updateToAddressMap(s,a,c)}for(const[l,u]of t.entries())if(!e.has(l))updateToAddressMap(s,l,u)};const removeZeroBalanceEntries=e=>{for(const[t,r]of e.entries()){var s;if(0n===r.coins&&(null===(s=r.assets)||void 0===s?void 0:s.size)===0)e.delete(t)}};const intoTokenTransferValue=async({logger:e,assetProvider:t,timeout:r,addressMap:s})=>{const a=new Map;for(const[o,i]of s.entries()){const n=i.coins;const l=c(i.assets&&i.assets.size>0?[...i.assets.keys()]:[]);const u=new Map;if(l.length>0){const f=await (0,d.tryGetAssetInfos)({assetIds:l,assetProvider:t,logger:e,timeout:r});for(const p of f){var h;var m;const v=null!==(m=null===(h=i.assets)||void 0===h?void 0:h.get(p.assetId))&&void 0!==m?m:0n;u.set(p.assetId,{amount:v,assetInfo:p})}}a.set(o,{assets:u,coins:n})}return a};const tokenTransferInspector=({inputResolver:e,fromAddressAssetProvider:t,toAddressAssetProvider:r,timeout:o,logger:n})=>async d=>{let l;try{const u=await (0,i.promiseTimeout)((0,s.resolveInputs)(d.body.inputs,e),o);l=u.resolvedInputs}catch(f){if(f instanceof a.TimeoutError)n.error("Error: Inputs resolution timed out");l=[]}const p=coalesceByAddress(l);const h=coalesceByAddress(d.body.outputs);const m=c([...p.keys(),...h.keys()]);const v=initializeAddressMap(m);const _=initializeAddressMap(m);computeNetDifferences(p,h,v,_);removeZeroBalanceEntries(v);removeZeroBalanceEntries(_);return{fromAddress:await intoTokenTransferValue({addressMap:v,assetProvider:t,logger:n,timeout:o}),toAddress:await intoTokenTransferValue({addressMap:_,assetProvider:r,logger:n,timeout:o})}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/transactionSummaryInspector.js":(e,t,r)=>{"use strict";r.d(t,{getCollateral:()=>getCollateral,transactionSummaryInspector:()=>transactionSummaryInspector});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/util/txInspector.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/subtractTokenMaps.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/promiseTimeout.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/subtractValueQuantities.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/tryGetAssetInfos.js");const getCollateral=async(e,t,r)=>{if(!e.body.collaterals||0===e.body.collaterals.length)return 0n;const s=(await (0,a.resolveInputs)(e.body.collaterals,t)).resolvedInputs.filter(e=>r.includes(e.address));const i=o.BigIntMath.sum(s.map(({value:e})=>e.coins));if(e.body.collateralReturn){if(!r.includes(e.body.collateralReturn.address))return i;var n;return null!==(n=o.BigIntMath.max([i-e.body.collateralReturn.value.coins,0n]))&&void 0!==n?n:0n}return i};const totalInputsValue=e=>{const t=e.resolvedInputs.map(e=>e.value);return(0,c.coalesceValueQuantities)(t)};const totalOutputsValue=e=>(0,c.coalesceValueQuantities)(e.map(e=>e.value));const mintInspectionToTokenMap=e=>new Map(e.map(e=>[s.AssetId.fromParts(e.policyId,e.assetName),e.quantity]));const getImplicitAssets=async e=>{const t=mintInspectionToTokenMap(await (0,a.assetsMintedInspector)(e));const r=mintInspectionToTokenMap(await (0,a.assetsBurnedInspector)(e));return(0,n.coalesceTokenMaps)([t,r])};const getUnaccountedFunds=async(e,t,r,s,a=new Map)=>{const o=totalInputsValue(t);const i=totalOutputsValue(e.body.outputs);o.assets=(0,n.coalesceTokenMaps)([o.assets,a]);o.coins+=r;i.coins+=s;return(0,f.subtractValueQuantities)([i,o])};const intoAssetInfoWithAmount=async({assetProvider:e,logger:t,timeout:r,tokenMap:s})=>{if(!s)return new Map;const a=s&&s.size>0?[...s.keys()]:[];const o=new Map;if(a.length>0){const i=await (0,p.tryGetAssetInfos)({assetIds:a,assetProvider:e,logger:t,timeout:r});for(const n of i){var d;const c=null!==(d=null==s?void 0:s.get(n.assetId))&&void 0!==d?d:0n;o.set(n.assetId,{amount:c,assetInfo:n})}}return o};const transactionSummaryInspector=({inputResolver:e,addresses:t,rewardAccounts:r,protocolParameters:s,assetProvider:o,dRepKeyHash:n,timeout:c,logger:f})=>async p=>{let h;try{h=await (0,u.promiseTimeout)((0,a.resolveInputs)(p.body.inputs,e),c)}catch(m){if(m instanceof i.TimeoutError)f.error("Error: Inputs resolution timed out");h={resolvedInputs:[],unresolvedInputs:p.body.inputs}}const v=p.body.fee;const _=(0,l.computeImplicitCoin)(s,{certificates:p.body.certificates,withdrawals:p.body.withdrawals},r||[],n);const y=await getCollateral(p,e,t);const w=_.withdrawals||0n;const g=await (0,a.totalAddressOutputsValueInspector)(t)(p);const b=await (0,a.totalAddressInputsValueInspector)(t,e)(p);const P=w+(_.reclaimDeposit||0n)-(_.deposit||0n);const S=await getImplicitAssets(p);const C={assets:(0,d.subtractTokenMaps)([g.assets,b.assets]),coins:g.coins-(b.coins+w)};return{assets:await intoAssetInfoWithAmount({assetProvider:o,logger:f,timeout:c,tokenMap:C.assets}),coins:C.coins,collateral:y,deposit:_.deposit||0n,fee:v,returnedDeposit:_.reclaimDeposit||0n,unresolved:{inputs:h.unresolvedInputs,value:await getUnaccountedFunds(p,h,P,v,S)}}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/tryGetAssetInfos.js":(e,t,r)=>{"use strict";r.d(t,{tryGetAssetInfos:()=>tryGetAssetInfos});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/util/promiseTimeout.js");const tryGetAssetInfos=async({assetIds:e,assetProvider:t,logger:r,timeout:o})=>{try{return await (0,a.promiseTimeout)(t.getAssets({assetIds:e,extraData:{nftMetadata:true,tokenMetadata:true}}),o)}catch(i){r.error("Error: Failed to retrieve assets",i);return e.map(e=>{const t=s.AssetId.getPolicyId(e);const r=s.AssetId.getAssetName(e);return{assetId:e,fingerprint:s.AssetFingerprint.fromParts(t,r),name:r,policyId:t,quantity:0n,supply:0n}})}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/txInspector.js":(e,t,r)=>{"use strict";r.d(t,{assetsBurnedInspector:()=>y,assetsMintedInspector:()=>_,createTxInspector:()=>createTxInspector,delegationInspector:()=>f,resolveInputs:()=>resolveInputs,sentInspector:()=>sentInspector,stakeKeyDeregistrationInspector:()=>p,stakeKeyRegistrationInspector:()=>h,totalAddressInputsValueInspector:()=>totalAddressInputsValueInspector,totalAddressOutputsValueInspector:()=>totalAddressOutputsValueInspector,withdrawalInspector:()=>withdrawalInspector});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/util/nativeScript.js");const resolveInputs=async(e,t)=>{const r=[];const s=[];for(const a of e){const o=await t.resolveInput(a);if(o)r.push({address:o.address,index:a.index,txId:a.txId,value:o.value});else s.push(a)}return{resolvedInputs:r,unresolvedInputs:s}};const totalAddressInputsValueInspector=(e,t)=>async r=>{const{resolvedInputs:s}=await resolveInputs(r.body.inputs,t);const a=s.filter(t=>(0,n.isAddressWithin)(e)(t));const o=a.map(e=>e.value);return(0,c.coalesceValueQuantities)(o)};const totalAddressOutputsValueInspector=e=>async t=>{const r=t.body.outputs.filter(t=>(0,n.isAddressWithin)(e)(t));return(0,c.coalesceValueQuantities)(r.map(e=>e.value))};const getCertificatesByType=(e,t,r)=>{var a;if(!e.body.certificates||0===e.body.certificates.length)return[];const o=r?null===(a=e.body.certificates)||void 0===a?void 0:a.filter(e=>(0,s.isCertType)(e,r)):e.body.certificates;return o.filter(e=>{if((0,s.isCertType)(e,s.StakeCredentialCertificateTypes)){return t.some(t=>d.RewardAccount.toHash(t)===e.stakeCredential.hash)}if((0,s.isCertType)(e,[s.CertificateType.PoolRegistration]))return t.includes(e.poolParameters.rewardAccount);return false})};const signedCertificatesInspector=(e,t)=>async r=>getCertificatesByType(r,e,t);const sentInspector=({addresses:e,rewardAccounts:t,inputResolver:r})=>{return async s=>{const a=(null==t?void 0:t.length)?await signedCertificatesInspector(t)(s):[];let o=[];if(e){const{resolvedInputs:i}=await resolveInputs(s.body.inputs,r);const d=i.filter(t=>(0,n.isAddressWithin)(e)(t));o=d.map(e=>({address:e.address,index:e.index,txId:e.txId}))}return{certificates:a,inputs:o}}};const valueSentInspector=(e,t)=>async r=>{let s=new Map;if(0===(await sentInspector({addresses:e,inputResolver:t})(r)).inputs.length)return{coins:0n};const a=await totalAddressOutputsValueInspector(e)(r);const o=await totalAddressInputsValueInspector(e,t)(r);const i=subtractValueQuantities([o,a]);if(i.assets)s=removeNegativesFromTokenMap(i.assets);return{assets:s.size>0?s:void 0,coins:i.coins<0n?0n:i.coins}};const valueReceivedInspector=(e,t)=>async r=>{let s=new Map;const a=await totalAddressOutputsValueInspector(e)(r);const o=await totalAddressInputsValueInspector(e,t)(r);const i=subtractValueQuantities([a,o]);if(i.assets)s=removeNegativesFromTokenMap(i.assets);return{assets:s.size>0?s:void 0,coins:i.coins<0n?0n:i.coins}};var u;const certificateInspector=e=>{return async t=>{var r;return null!==(u=null===(r=t.body.certificates)||void 0===r?void 0:r.filter(t=>t.__typename===e))&&void 0!==u?u:[]}};const f=certificateInspector(s.CertificateType.StakeDelegation);const p=certificateInspector(s.CertificateType.StakeDeregistration);const h=certificateInspector(s.CertificateType.StakeRegistration);const m=certificateInspector(s.CertificateType.PoolRegistration);const v=certificateInspector(s.CertificateType.PoolRetirement);const withdrawalInspector=async e=>{var t;return(null===(t=e.body.withdrawals)||void 0===t?void 0:t.length)?i.BigIntMath.sum(e.body.withdrawals.map(({quantity:e})=>e)):0n};const mintInspector=e=>{return async t=>{var r,s;const i=[];const n=new Map;if(!t.body.mint)return i;const d=[...(null===(r=t.auxiliaryData)||void 0===r?void 0:r.scripts)||[],...(null===(s=t.witness)||void 0===s?void 0:s.scripts)||[]];for(const c of d){switch(c.__type){case a.ScriptType.Native:{const u=(0,l.nativeScriptPolicyId)(c);if(n.has(u))continue;n.set(u,c);break}case a.ScriptType.Plutus:default:}}for(const[f,p]of t.body.mint.entries()){const[h,m]=[o.AssetId.getPolicyId(f),o.AssetId.getAssetName(f)];const v={assetName:m,fingerprint:o.AssetFingerprint.fromParts(h,m),policyId:h,quantity:p,script:n.get(h)};if(e(v.quantity))i.push(v)}return i}};const _=mintInspector(e=>e>0);const y=mintInspector(e=>e<0);var w;const metadataInspector=async e=>{var t;return null!==(w=null===(t=e.auxiliaryData)||void 0===t?void 0:t.blob)&&void 0!==w?w:new Map};const createTxInspector=e=>async t=>{const r=await Promise.all(Object.entries(e).map(async([e,r])=>{const s=await r(t);return{key:e,result:s}}));return r.reduce((e,{key:t,result:r})=>{e[t]=r;return e},{})}},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js":(e,t,r)=>{"use strict";r.d(t,{base58:()=>l,bech32:()=>_});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let a=r.length;if(a*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;a>0&&r[a-1]===t;a--)if(!((a-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,a)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const a=[];const o=Array.from(e);o.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let i=0;let n=true;for(let d=s;d<o.length;d++){const c=o[d];const l=t*i+c;if(!Number.isSafeInteger(l)||t*i/t!==i||l-c!==t*i){throw new Error("convertRadix: carry overflow")}i=l%r;o[d]=Math.floor(l/r);if(!Number.isSafeInteger(o[d])||o[d]*r+i!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(o[d])n=false;else s=d}a.push(i);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)a.push(0);return a.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let a=0;let o=0;const i=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);a=a<<t|d;if(o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);o+=t;for(;o>=r;o-=r)n.push((a>>o-r&i)>>>0);a&=2**o-1}a=a<<r-o&i;if(!s&&o>=t)throw new Error("Excess padding");if(!s&&a)throw new Error(`Non-zero padding: ${a}`);if(s&&o>0)n.push(a>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const a=new Uint8Array(r.length+e);a.set(r);a.set(s,r.length);return a},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const a=t(s).slice(0,e);const o=r.slice(-e);for(let i=0;i<e;i++)if(a[i]!==o[i])throw new Error("Invalid checksum");return s}}}const s={alphabet,chain,checksum,radix,radix2,join,padding};const a=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));const o=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));const i=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));const n=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const d=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));const c=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));const l=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const u=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");const f=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const p=[0,2,3,5,6,7,9,10,11];const h={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=l.encode(s).padStart(p[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11);const a=p.indexOf(s.length);const o=l.decode(s);for(let i=0;i<o.length-a;i++)if(0!==o[i])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-a)))}return Uint8Array.from(t)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),l);const m=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const v=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<v.length;s++)if((t>>s&1)===1)r^=v[s];return r}function bechChecksum(e,t,r=1){const s=e.length;let a=1;for(let o=0;o<s;o++){const i=e.charCodeAt(o);if(i<33||i>126)throw new Error(`Invalid prefix (${e})`);a=bech32Polymod(a)^i>>5}a=bech32Polymod(a);for(let n=0;n<s;n++)a=bech32Polymod(a)^31&e.charCodeAt(n);for(let d of t)a=bech32Polymod(a)^d;for(let c=0;c<6;c++)a=bech32Polymod(a);a^=r;return m.encode(convertRadix2([a%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const s=r.decode;const a=r.encode;const o=unsafeWrapper(s);function encode(e,r,s=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const a=e.length+7+r.length;if(false!==s&&a>s)throw new TypeError(`Length ${a} exceeds limit ${s}`);e=e.toLowerCase();return`${e}1${m.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=s;const a=e.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,a);const i=e.slice(a+1);if(i.length<6)throw new Error("Data must be at least 6 characters long");const n=m.decode(i).slice(0,-6);const d=bechChecksum(o,n,t);if(!i.endsWith(d))throw new Error(`Invalid checksum in ${e}: expected "${d}"`);return{prefix:o,words:n}}const i=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:s(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:i,fromWords:s,fromWordsUnsafe:o,toWords:a}}const _=genBech32("bech32");const y=genBech32("bech32m");const w={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};const g=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const b={utf8:w,hex:g,base16:a,base32:o,base64:d,base64url:c,base58:l,base58xmr:h};const P=null;const bytesToString=(e,t)=>{if("string"!=typeof e||!b.hasOwnProperty(e))throw new TypeError(P);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return b[e].encode(t)};const S=null;const stringToBytes=(e,t)=>{if(!b.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return b[e].decode(t)};const C=null},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js":(e,t)=>{"use strict";/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ Object.defineProperty(t,"__esModule",{value:true});t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}t.assertNumber=assertNumber;function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let a=r.length;if(a*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;a>0&&r[a-1]===t;a--)if(!((a-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,a)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const a=[];const o=Array.from(e);o.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let i=0;let n=true;for(let d=s;d<o.length;d++){const c=o[d];const l=t*i+c;if(!Number.isSafeInteger(l)||t*i/t!==i||l-c!==t*i){throw new Error("convertRadix: carry overflow")}i=l%r;o[d]=Math.floor(l/r);if(!Number.isSafeInteger(o[d])||o[d]*r+i!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(o[d])n=false;else s=d}a.push(i);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)a.push(0);return a.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let a=0;let o=0;const i=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);a=a<<t|d;if(o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);o+=t;for(;o>=r;o-=r)n.push((a>>o-r&i)>>>0);a&=2**o-1}a=a<<r-o&i;if(!s&&o>=t)throw new Error("Excess padding");if(!s&&a)throw new Error(`Non-zero padding: ${a}`);if(s&&o>0)n.push(a>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const a=new Uint8Array(r.length+e);a.set(r);a.set(s,r.length);return a},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const a=t(s).slice(0,e);const o=r.slice(-e);for(let i=0;i<e;i++)if(a[i]!==o[i])throw new Error("Invalid checksum");return s}}}t.utils={alphabet,chain,checksum,radix,radix2,join,padding};t.base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));t.base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));t.base32hex=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));t.base32crockford=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));t.base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));t.base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));t.base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");t.base58flickr=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");t.base58xrp=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const r=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let s="";for(let a=0;a<e.length;a+=8){const o=e.subarray(a,a+8);s+=t.base58.encode(o).padStart(r[o.length],"1")}return s},decode(e){let s=[];for(let a=0;a<e.length;a+=11){const o=e.slice(a,a+11);const i=r.indexOf(o.length);const n=t.base58.decode(o);for(let d=0;d<n.length-i;d++)if(0!==n[d])throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(n.slice(n.length-i)))}return Uint8Array.from(s)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),t.base58);t.base58check=base58check;const s=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const a=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<a.length;s++)if((t>>s&1)===1)r^=a[s];return r}function bechChecksum(e,t,r=1){const a=e.length;let o=1;for(let i=0;i<a;i++){const n=e.charCodeAt(i);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);o=bech32Polymod(o)^n>>5}o=bech32Polymod(o);for(let d=0;d<a;d++)o=bech32Polymod(o)^31&e.charCodeAt(d);for(let c of t)o=bech32Polymod(o)^c;for(let l=0;l<6;l++)o=bech32Polymod(o);o^=r;return s.encode(convertRadix2([o%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const a=r.decode;const o=r.encode;const i=unsafeWrapper(a);function encode(e,r,a=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const o=e.length+7+r.length;if(false!==a&&o>a)throw new TypeError(`Length ${o} exceeds limit ${a}`);e=e.toLowerCase();return`${e}1${s.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=a;const o=e.lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o);const n=e.slice(o+1);if(n.length<6)throw new Error("Data must be at least 6 characters long");const d=s.decode(n).slice(0,-6);const c=bechChecksum(i,d,t);if(!n.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:d}}const n=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:a(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:n,fromWords:a,fromWordsUnsafe:i,toWords:o}}t.bech32=genBech32("bech32");t.bech32m=genBech32("bech32m");t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};t.hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const o={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr};const i=`Invalid encoding type. Available types: ${Object.keys(o).join(", ")}`;const bytesToString=(e,t)=>{if("string"!=typeof e||!o.hasOwnProperty(e))throw new TypeError(i);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return o[e].encode(t)};t.bytesToString=bytesToString;t.str=t.bytesToString;const stringToBytes=(e,t)=>{if(!o.hasOwnProperty(e))throw new TypeError(i);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return o[e].decode(t)};t.stringToBytes=stringToBytes;t.bytes=t.stringToBytes},"../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.derivePublic=t.derivePrivate=void 0;const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js");const n=a(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,a)=>{const o=s.allocUnsafe(69);o.writeUInt32LE(e,65);t.copy(o,1);r.copy(o,33);o[0]=0;const i=n.default.crypto_auth_hmacsha512(o,a);o[0]=1;const d=n.default.crypto_auth_hmacsha512(o,a);return{ccMac:d,zMac:i}};const deriveSoft=(e,t,r)=>{const a=s.allocUnsafe(37);a.writeUInt32LE(e,33);const o=s.from(n.default.crypto_scalarmult_ed25519_base_noclamp(t));o.copy(a,1);a[0]=2;const i=n.default.crypto_auth_hmacsha512(a,r);a[0]=3;const d=n.default.crypto_auth_hmacsha512(a,r);return{ccMac:d,zMac:i}};const pointOfTrunc28Mul8=e=>{const t=(0,i.add28Mul8)(new Uint8Array(32).fill(0),e);return n.default.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const o=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,a,o):deriveSoft(t,r,o);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,i.add28Mul8)(r,l);const p=(0,i.add256bits)(a,u);return s.concat([f,p,c])};t.derivePrivate=derivePrivate;const derivePublic=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const i=s.allocUnsafe(37);i.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new o.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(i,1);i[0]=2;const d=n.default.crypto_auth_hmacsha512(i,a);i[0]=3;const c=n.default.crypto_auth_hmacsha512(i,a);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return s.concat([n.default.crypto_core_ed25519_add(f,r),l])};t.derivePublic=derivePublic},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PrivateKey=t.BIP32_ED25519_PRIVATE_KEY_LENGTH=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const p=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js");const h=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=r("../../node_modules/pbkdf2/browser.js");const _=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const y=0;const w=32;const g=4096;const b=96;const P="sha512";const S=64;const C=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(y,w);t.BIP32_ED25519_PRIVATE_KEY_LENGTH=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,v.pbkdf2Sync)(t,e,g,b,P);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==t.BIP32_ED25519_PRIVATE_KEY_LENGTH)throw new m.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(s.from(e,"hex"))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return h.Ed25519PrivateKey.fromExtendedBytes(d(this,l,"f").slice(0,h.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(d(this,l,"f").slice(0,h.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=_.default.crypto_scalarmult_ed25519_base_noclamp(e);return p.Bip32PublicKey.fromBytes(s.concat([t,d(this,l,"f").slice(S,S+C)]))}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PrivateKeyHex)(s.from(d(this,l,"f")).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PrivateKey=Bip32PrivateKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PublicKey=t.BIP32_ED25519_PUBLIC_KEY_LENGTH=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const p=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));t.BIP32_ED25519_PUBLIC_KEY_LENGTH=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==t.BIP32_ED25519_PUBLIC_KEY_LENGTH)throw new h.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(s.from(e,"hex"))}toRawKey(){return p.Ed25519PublicKey.fromBytes(d(this,l,"f").slice(0,p.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PublicKeyHex)(s.from(d(this,l,"f")).toString("hex"))}hash(){const e=m.default.crypto_generichash(f.BIP32_PUBLIC_KEY_HASH_LENGTH,d(this,l,"f"));return(0,f.Bip32PublicKeyHashHex)(s.from(e).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PublicKey=Bip32PublicKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.le32=t.add256bits=t.add28Mul8=void 0;const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<28;a++){const o=e[a]+(t[a]<<3)+r;s[a]=255&o;r=o>>8}for(let i=28;i<32;i++){const n=e[i]+r;s[i]=255&n;r=n>>8}return s};t.add28Mul8=add28Mul8;const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<32;a++){const o=e[a]+t[a]+r;s[a]=o;r=o>>8}return s};t.add256bits=add256bits;const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255]);t.le32=le32},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519KeyHash=t.ED25519_PUBLIC_KEY_HASH_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_PUBLIC_KEY_HASH_LENGTH=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==t.ED25519_PUBLIC_KEY_HASH_LENGTH)throw new d.InvalidArgumentError("hash",`Hash should be ${t.ED25519_PUBLIC_KEY_HASH_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(s.from(e,"hex"))}bytes(){return o(this,i,"f")}hex(){return(0,n.Ed25519KeyHashHex)(s.from(o(this,i,"f")).toString("hex"))}constructor(e){i.set(this,void 0);a(this,i,e,"f")}}t.Ed25519KeyHash=Ed25519KeyHash;i=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PrivateKey=t.Ed25519PrivateKeyType=t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=i(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const p=0;const h=32;const m=32;const v=32;t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=32;t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=64;const extendedScalar=e=>e.slice(p,h);const extendedIv=e=>e.slice(m,m+v);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const a=f.default.crypto_scalarmult_ed25519_base_noclamp(r);const o=f.default.crypto_core_ed25519_scalar_reduce(f.default.crypto_hash_sha512(s.concat([extendedIv(e),t])));const i=f.default.crypto_scalarmult_ed25519_base_noclamp(o);let n=f.default.crypto_hash_sha512(s.concat([i,a,t]));n=f.default.crypto_core_ed25519_scalar_reduce(n);return s.concat([i,f.default.crypto_core_ed25519_scalar_add(f.default.crypto_core_ed25519_scalar_mul(n,r),o)])};var _;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(_=t.Ed25519PrivateKeyType||(t.Ed25519PrivateKeyType={}));class Ed25519PrivateKey{toPublic(){return c.Ed25519PublicKey.fromBytes(this.__type===_.Extended?f.default.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(o(this,n,"f"))):f.default.crypto_sign_seed_keypair(o(this,n,"f")).publicKey)}sign(e){return l.Ed25519Signature.fromBytes(this.__type===_.Extended?signExtendedDetached(o(this,n,"f"),s.from(e,"hex")):f.default.crypto_sign_detached(s.from(e,"hex"),s.concat([o(this,n,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==t.NORMAL_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.NORMAL_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,_.Normal)}static fromExtendedBytes(e){if(e.length!==t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,_.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(s.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(s.from(e,"hex"))}bytes(){return o(this,n,"f")}hex(){return this.__type===_.Extended?(0,d.Ed25519PrivateExtendedKeyHex)(s.from(o(this,n,"f")).toString("hex")):(0,d.Ed25519PrivateNormalKeyHex)(s.from(o(this,n,"f")).toString("hex"))}constructor(e,t){n.set(this,void 0);a(this,n,e,"f");this.__type=t}}t.Ed25519PrivateKey=Ed25519PrivateKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PublicKey=t.ED25519_PUBLIC_KEY_LENGTH=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=i(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));t.ED25519_PUBLIC_KEY_LENGTH=32;class Ed25519PublicKey{verify(e,t){return u.default.crypto_sign_verify_detached(e.bytes(),s.from(t,"hex"),o(this,n,"f"))}static fromBytes(e){if(e.length!==t.ED25519_PUBLIC_KEY_LENGTH)throw new l.InvalidArgumentError("keyMaterial",`Key should be ${t.ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(s.from(e,"hex"))}hash(){const e=u.default.crypto_generichash(d.ED25519_PUBLIC_KEY_HASH_LENGTH,o(this,n,"f"));return d.Ed25519KeyHash.fromBytes(e)}bytes(){return o(this,n,"f")}hex(){return(0,c.Ed25519PublicKeyHex)(s.from(o(this,n,"f")).toString("hex"))}constructor(e){n.set(this,void 0);a(this,n,e,"f")}}t.Ed25519PublicKey=Ed25519PublicKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519Signature=t.ED25519_SIGNATURE_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_SIGNATURE_LENGTH=64;class Ed25519Signature{static fromBytes(e){if(e.length!==t.ED25519_SIGNATURE_LENGTH)throw new d.InvalidArgumentError("signature",`signature should be ${t.ED25519_SIGNATURE_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(s.from(e,"hex"))}bytes(){return o(this,i,"f")}hex(){return(0,n.Ed25519SignatureHex)(s.from(o(this,i,"f")).toString("hex"))}constructor(e){i.set(this,void 0);a(this,i,e,"f")}}t.Ed25519Signature=Ed25519Signature;i=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Hash28ByteBase16=t.Hash32ByteBase16=t.Bip32PublicKeyHashHex=t.Ed25519KeyHashHex=t.Ed25519PrivateNormalKeyHex=t.Ed25519PrivateExtendedKeyHex=t.Ed25519PublicKeyHex=t.Bip32PrivateKeyHex=t.Bip32PublicKeyHex=t.Ed25519SignatureHex=t.BIP32_PUBLIC_KEY_HASH_LENGTH=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.BIP32_PUBLIC_KEY_HASH_LENGTH=28;const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);t.Ed25519SignatureHex=Ed25519SignatureHex;const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);t.Bip32PublicKeyHex=Bip32PublicKeyHex;const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);t.Bip32PrivateKeyHex=Bip32PrivateKeyHex;const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,64);t.Ed25519PublicKeyHex=Ed25519PublicKeyHex;const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);t.Ed25519PrivateExtendedKeyHex=Ed25519PrivateExtendedKeyHex;const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);t.Ed25519PrivateNormalKeyHex=Ed25519PrivateNormalKeyHex;const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);t.Ed25519KeyHashHex=Ed25519KeyHashHex;const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,2*t.BIP32_PUBLIC_KEY_HASH_LENGTH);t.Bip32PublicKeyHashHex=Bip32PublicKeyHashHex;const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);t.Hash32ByteBase16=Hash32ByteBase16;t.Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);t.Hash28ByteBase16=Hash28ByteBase16;t.Hash28ByteBase16.fromEd25519KeyHashHex=e=>e},"../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ready=t.blake2b=void 0;const i=o(r("../../node_modules/blake2b-no-wasm/index.js"));t.blake2b=i.default;const n=o(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js"),t);const ready=async()=>await n.default.ready;t.ready=ready},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.CmlBip32Ed25519=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=(0,d.usingAutoFree)(r=>{const a=r.manage(o(this,i,"f").Bip32PrivateKey.from_bip39_entropy(e,s.from(t)));return a.as_bytes()});return(0,n.Bip32PrivateKeyHex)(s.from(r).toString("hex"))}getPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=e.length===c?t.manage(o(this,i,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):t.manage(o(this,i,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const a=t.manage(r.to_public()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(a).toString("hex"))})}getPubKeyHash(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(o(this,i,"f").PublicKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.hash()).to_bytes();return(0,n.Ed25519KeyHashHex)(s.from(a).toString("hex"))})}getRawPrivateKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(o(this,i,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PrivateExtendedKeyHex)(s.from(a).toString("hex"))})}getRawPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(o(this,i,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(a).toString("hex"))})}getBip32PublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(o(this,i,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_public()).as_bytes();return(0,n.Bip32PublicKeyHex)(s.from(a).toString("hex"))})}derivePrivateKey(e,t){return(0,d.usingAutoFree)(r=>{let a=r.manage(o(this,i,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));for(const d of t)a=r.manage(a.derive(d));return(0,n.Bip32PrivateKeyHex)(s.from(a.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return(0,d.usingAutoFree)(r=>{let a=r.manage(o(this,i,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));for(const d of t)a=r.manage(a.derive(d));return(0,n.Bip32PublicKeyHex)(s.from(a.as_bytes()).toString("hex"))})}sign(e,t){return(0,d.usingAutoFree)(r=>{const a=e.length===c?r.manage(o(this,i,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):r.manage(o(this,i,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const d=r.manage(a.sign(s.from(t,"hex"))).to_bytes();return(0,n.Ed25519SignatureHex)(s.from(d).toString("hex"))})}verify(e,t,r){return(0,d.usingAutoFree)(a=>{const n=a.manage(o(this,i,"f").PublicKey.from_bytes(s.from(r,"hex")));const d=a.manage(o(this,i,"f").Ed25519Signature.from_bytes(s.from(e,"hex")));return n.verify(s.from(t,"hex"),d)})}constructor(e){i.set(this,void 0);a(this,i,e,"f")}}t.CmlBip32Ed25519=CmlBip32Ed25519;i=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SodiumBip32Ed25519=void 0;const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js");const o=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const i=s(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const n=128;class SodiumBip32Ed25519{static async create(){await i.default.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return a.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===n?o.Ed25519PrivateKey.fromExtendedHex(e):o.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=o.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return a.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=a.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=a.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=a.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=a.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}sign(e,t){const r=e.length===n?o.Ed25519PrivateKey.fromExtendedHex(e):o.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=o.Ed25519PublicKey.fromHex(r);return s.verify(o.Ed25519Signature.fromHex(e),t)}constructor(){}}t.SodiumBip32Ed25519=SodiumBip32Ed25519},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js":(e,t,r)=>{"use strict";r.d(t,{derivePrivate:()=>derivePrivate,derivePublic:()=>derivePublic});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var o=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,s)=>{const a=i.allocUnsafe(69);a.writeUInt32LE(e,65);t.copy(a,1);r.copy(a,33);a[0]=0;const n=o.crypto_auth_hmacsha512(a,s);a[0]=1;const d=o.crypto_auth_hmacsha512(a,s);return{ccMac:d,zMac:n}};const deriveSoft=(e,t,r)=>{const s=i.allocUnsafe(37);s.writeUInt32LE(e,33);const a=i.from(o.crypto_scalarmult_ed25519_base_noclamp(t));a.copy(s,1);s[0]=2;const n=o.crypto_auth_hmacsha512(s,r);s[0]=3;const d=o.crypto_auth_hmacsha512(s,r);return{ccMac:d,zMac:n}};const pointOfTrunc28Mul8=e=>{const t=(0,a.add28Mul8)(new Uint8Array(32).fill(0),e);return o.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const s=e.subarray(32,64);const o=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,s,o):deriveSoft(t,r,o);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,a.add28Mul8)(r,l);const p=(0,a.add256bits)(s,u);return i.concat([f,p,c])};const derivePublic=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const n=i.allocUnsafe(37);n.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new s.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(n,1);n[0]=2;const d=o.crypto_auth_hmacsha512(n,a);n[0]=3;const c=o.crypto_auth_hmacsha512(n,a);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return i.concat([o.crypto_core_ed25519_add(f,r),l])}},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>w,Bip32PrivateKey:()=>Bip32PrivateKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/pbkdf2/browser.js");var c=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u;const f=0;const p=32;const h=4096;const m=96;const v="sha512";const _=64;const y=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(f,p);const w=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,d.pbkdf2Sync)(t,e,h,m,v);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==w)throw new n.InvalidArgumentError("key",`Key should be ${w} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(l.from(e,"hex"))}derive(e){let t=l.from(__classPrivateFieldGet(this,u,"f"));for(const r of e)t=s.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return i.Ed25519PrivateKey.fromExtendedBytes(__classPrivateFieldGet(this,u,"f").slice(0,i.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(__classPrivateFieldGet(this,u,"f").slice(0,i.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=c.crypto_scalarmult_ed25519_base_noclamp(e);return o.Bip32PublicKey.fromBytes(l.concat([t,__classPrivateFieldGet(this,u,"f").slice(_,_+y)]))}bytes(){return __classPrivateFieldGet(this,u,"f")}hex(){return(0,a.Bip32PrivateKeyHex)(l.from(__classPrivateFieldGet(this,u,"f")).toString("hex"))}constructor(e){u.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>l,Bip32PublicKey:()=>Bip32PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==l)throw new i.InvalidArgumentError("key",`Key should be ${l} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(d.from(e,"hex"))}toRawKey(){return o.Ed25519PublicKey.fromBytes(__classPrivateFieldGet(this,c,"f").slice(0,o.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=d.from(__classPrivateFieldGet(this,c,"f"));for(const r of e)t=s.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return(0,a.Bip32PublicKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}hash(){const e=n.crypto_generichash(a.BIP32_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,c,"f"));return(0,a.Bip32PublicKeyHashHex)(d.from(e).toString("hex"))}constructor(e){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js":(e,t,r)=>{"use strict";r.d(t,{add256bits:()=>add256bits,add28Mul8:()=>add28Mul8,le32:()=>le32});const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<28;a++){const o=e[a]+(t[a]<<3)+r;s[a]=255&o;r=o>>8}for(let i=28;i<32;i++){const n=e[i]+r;s[i]=255&n;r=n>>8}return s};const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<32;a++){const o=e[a]+t[a]+r;s[a]=o;r=o>>8}return s};const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_PUBLIC_KEY_HASH_LENGTH:()=>n,Ed25519KeyHash:()=>Ed25519KeyHash});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;const n=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==n)throw new a.InvalidArgumentError("hash",`Hash should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(o.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,i,"f")}hex(){return(0,s.Ed25519KeyHashHex)(o.from(__classPrivateFieldGet(this,i,"f")).toString("hex"))}constructor(e){i.set(this,void 0);__classPrivateFieldSet(this,i,e,"f")}}i=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>m,Ed25519PrivateKey:()=>Ed25519PrivateKey,Ed25519PrivateKeyType:()=>v,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>h});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=0;const u=32;const f=32;const p=32;const h=32;const m=64;const extendedScalar=e=>e.slice(l,u);const extendedIv=e=>e.slice(f,f+p);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const s=n.crypto_scalarmult_ed25519_base_noclamp(r);const a=n.crypto_core_ed25519_scalar_reduce(n.crypto_hash_sha512(d.concat([extendedIv(e),t])));const o=n.crypto_scalarmult_ed25519_base_noclamp(a);let i=n.crypto_hash_sha512(d.concat([o,s,t]));i=n.crypto_core_ed25519_scalar_reduce(i);return d.concat([o,n.crypto_core_ed25519_scalar_add(n.crypto_core_ed25519_scalar_mul(i,r),a)])};var v;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(v||(v={}));class Ed25519PrivateKey{toPublic(){return a.Ed25519PublicKey.fromBytes(this.__type===v.Extended?n.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(__classPrivateFieldGet(this,c,"f"))):n.crypto_sign_seed_keypair(__classPrivateFieldGet(this,c,"f")).publicKey)}sign(e){return o.Ed25519Signature.fromBytes(this.__type===v.Extended?signExtendedDetached(__classPrivateFieldGet(this,c,"f"),d.from(e,"hex")):n.crypto_sign_detached(d.from(e,"hex"),d.concat([__classPrivateFieldGet(this,c,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==h)throw new i.InvalidArgumentError("keyMaterial",`Key should be ${h} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Normal)}static fromExtendedBytes(e){if(e.length!==m)throw new i.InvalidArgumentError("keyMaterial",`Key should be ${m} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(d.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(d.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return this.__type===v.Extended?(0,s.Ed25519PrivateExtendedKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex")):(0,s.Ed25519PrivateNormalKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}constructor(e,t){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");this.__type=t}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_PUBLIC_KEY_LENGTH:()=>c,Ed25519PublicKey:()=>Ed25519PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;const c=32;class Ed25519PublicKey{verify(e,t){return i.crypto_sign_verify_detached(e.bytes(),n.from(t,"hex"),__classPrivateFieldGet(this,d,"f"))}static fromBytes(e){if(e.length!==c)throw new o.InvalidArgumentError("keyMaterial",`Key should be ${c} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(n.from(e,"hex"))}hash(){const e=i.crypto_generichash(s.ED25519_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,d,"f"));return s.Ed25519KeyHash.fromBytes(e)}bytes(){return __classPrivateFieldGet(this,d,"f")}hex(){return(0,a.Ed25519PublicKeyHex)(n.from(__classPrivateFieldGet(this,d,"f")).toString("hex"))}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_SIGNATURE_LENGTH:()=>n,Ed25519Signature:()=>Ed25519Signature});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;const n=64;class Ed25519Signature{static fromBytes(e){if(e.length!==n)throw new a.InvalidArgumentError("signature",`signature should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(o.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,i,"f")}hex(){return(0,s.Ed25519SignatureHex)(o.from(__classPrivateFieldGet(this,i,"f")).toString("hex"))}constructor(e){i.set(this,void 0);__classPrivateFieldSet(this,i,e,"f")}}i=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_PUBLIC_KEY_HASH_LENGTH:()=>a,Bip32PrivateKeyHex:()=>Bip32PrivateKeyHex,Bip32PublicKeyHashHex:()=>Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>Bip32PublicKeyHex,Ed25519KeyHashHex:()=>Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>Ed25519PrivateExtendedKeyHex,Ed25519PrivateNormalKeyHex:()=>Ed25519PrivateNormalKeyHex,Ed25519PublicKeyHex:()=>Ed25519PublicKeyHex,Ed25519SignatureHex:()=>Ed25519SignatureHex,Hash28ByteBase16:()=>Hash28ByteBase16,Hash32ByteBase16:()=>Hash32ByteBase16});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const a=28;const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,64);const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,2*a);const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);Hash28ByteBase16.fromEd25519KeyHashHex=e=>e},"../../node_modules/@cardano-sdk/crypto/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>o.BIP32_ED25519_PRIVATE_KEY_LENGTH,BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>i.BIP32_ED25519_PUBLIC_KEY_LENGTH,BIP32_PUBLIC_KEY_HASH_LENGTH:()=>f.BIP32_PUBLIC_KEY_HASH_LENGTH,Bip32PrivateKey:()=>o.Bip32PrivateKey,Bip32PrivateKeyHex:()=>f.Bip32PrivateKeyHex,Bip32PublicKey:()=>i.Bip32PublicKey,Bip32PublicKeyHashHex:()=>f.Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>f.Bip32PublicKeyHex,CmlBip32Ed25519:()=>CmlBip32Ed25519,ED25519_PUBLIC_KEY_HASH_LENGTH:()=>u.ED25519_PUBLIC_KEY_HASH_LENGTH,ED25519_PUBLIC_KEY_LENGTH:()=>c.ED25519_PUBLIC_KEY_LENGTH,ED25519_SIGNATURE_LENGTH:()=>l.ED25519_SIGNATURE_LENGTH,EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>d.EXTENDED_ED25519_PRIVATE_KEY_LENGTH,Ed25519KeyHash:()=>u.Ed25519KeyHash,Ed25519KeyHashHex:()=>f.Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>f.Ed25519PrivateExtendedKeyHex,Ed25519PrivateKey:()=>d.Ed25519PrivateKey,Ed25519PrivateKeyType:()=>d.Ed25519PrivateKeyType,Ed25519PrivateNormalKeyHex:()=>f.Ed25519PrivateNormalKeyHex,Ed25519PublicKey:()=>c.Ed25519PublicKey,Ed25519PublicKeyHex:()=>f.Ed25519PublicKeyHex,Ed25519Signature:()=>l.Ed25519Signature,Ed25519SignatureHex:()=>f.Ed25519SignatureHex,Hash28ByteBase16:()=>f.Hash28ByteBase16,Hash32ByteBase16:()=>f.Hash32ByteBase16,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>d.NORMAL_ED25519_PRIVATE_KEY_LENGTH,SodiumBip32Ed25519:()=>b.SodiumBip32Ed25519,add256bits:()=>n.add256bits,add28Mul8:()=>n.add28Mul8,blake2b:()=>s,le32:()=>n.le32,ready:()=>ready});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var l=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var u=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var f=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var h,m,v,_;class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(__classPrivateFieldGet(this,m,"f"))throw new Error("This scope is already disposed.");__classPrivateFieldGet(this,h,"f").push(e);return e}dispose(){if(__classPrivateFieldGet(this,m,"f"))return;for(const e of __classPrivateFieldGet(this,h,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}__classPrivateFieldSet(this,m,true,"f")}constructor(){h.set(this,[]);m.set(this,false)}}h=new WeakMap,m=new WeakMap;class AutoFree{execute(){let e;try{e=__classPrivateFieldGet(this,_,"f").call(this,__classPrivateFieldGet(this,v,"f"));if((0,p.isPromise)(e)){return e.then(e=>{__classPrivateFieldGet(this,v,"f").dispose();return e}).catch(e=>{__classPrivateFieldGet(this,v,"f").dispose();throw e})}__classPrivateFieldGet(this,v,"f").dispose();return e}catch(t){__classPrivateFieldGet(this,v,"f").dispose();throw t}}constructor(e){v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,v,new ManagedFreeableScope,"f")}}v=new WeakMap,_=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute();var y=r("../../node_modules/buffer/index.js")["Buffer"];var CmlBip32Ed25519_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var CmlBip32Ed25519_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var w;const g=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=usingAutoFree(r=>{const s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PrivateKey.from_bip39_entropy(e,y.from(t)));return s.as_bytes()});return(0,f.Bip32PrivateKeyHex)(y.from(r).toString("hex"))}getPublicKey(e){return usingAutoFree(t=>{const r=e.length===g?t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PrivateKey.from_extended_bytes(y.from(e,"hex"))):t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PrivateKey.from_normal_bytes(y.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Ed25519PublicKeyHex)(y.from(s).toString("hex"))})}getPubKeyHash(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PublicKey.from_bytes(y.from(e,"hex")));const s=t.manage(r.hash()).to_bytes();return(0,f.Ed25519KeyHashHex)(y.from(s).toString("hex"))})}getRawPrivateKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PrivateKey.from_bytes(y.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PrivateExtendedKeyHex)(y.from(s).toString("hex"))})}getRawPublicKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PublicKey.from_bytes(y.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PublicKeyHex)(y.from(s).toString("hex"))})}getBip32PublicKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PrivateKey.from_bytes(y.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Bip32PublicKeyHex)(y.from(s).toString("hex"))})}derivePrivateKey(e,t){return usingAutoFree(r=>{let s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PrivateKey.from_bytes(y.from(e,"hex")));for(const a of t)s=r.manage(s.derive(a));return(0,f.Bip32PrivateKeyHex)(y.from(s.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return usingAutoFree(r=>{let s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Bip32PublicKey.from_bytes(y.from(e,"hex")));for(const a of t)s=r.manage(s.derive(a));return(0,f.Bip32PublicKeyHex)(y.from(s.as_bytes()).toString("hex"))})}sign(e,t){return usingAutoFree(r=>{const s=e.length===g?r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PrivateKey.from_extended_bytes(y.from(e,"hex"))):r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PrivateKey.from_normal_bytes(y.from(e,"hex")));const a=r.manage(s.sign(y.from(t,"hex"))).to_bytes();return(0,f.Ed25519SignatureHex)(y.from(a).toString("hex"))})}verify(e,t,r){return usingAutoFree(s=>{const a=s.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").PublicKey.from_bytes(y.from(r,"hex")));const o=s.manage(CmlBip32Ed25519_classPrivateFieldGet(this,w,"f").Ed25519Signature.from_bytes(y.from(e,"hex")));return a.verify(y.from(t,"hex"),o)})}constructor(e){w.set(this,void 0);CmlBip32Ed25519_classPrivateFieldSet(this,w,e,"f")}}w=new WeakMap;var b=r("../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js");const ready=async()=>await a.ready},"../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js":(e,t,r)=>{"use strict";r.d(t,{SodiumBip32Ed25519:()=>SodiumBip32Ed25519});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var d=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");const c=128;class SodiumBip32Ed25519{static async create(){await d.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return s.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===c?o.Ed25519PrivateKey.fromExtendedHex(e):o.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=i.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return s.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=a.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=s.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=s.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=a.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}sign(e,t){const r=e.length===c?o.Ed25519PrivateKey.fromExtendedHex(e):o.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=i.Ed25519PublicKey.fromHex(r);return s.verify(n.Ed25519Signature.fromHex(e),t)}constructor(){}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/PersistentAuthenticator.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c,l;Object.defineProperty(t,"__esModule",{value:true});t.PersistentAuthenticator=void 0;const u=r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/util.js");class PersistentAuthenticator{async requestAccess(e){const t=(0,u.senderOrigin)(e);if(!t){a(this,d,"f").warn("Invalid sender url",e);return false}const r=await a(this,c,"f");if(r.includes(t)){return true}try{const s=await a(this,i,"f").call(this,e);if(s){const n=[...r,t];if(await a(this,o,"m",l).call(this,n)){a(this,d,"f").info("[Authenticator] added",t);return true}}}catch(f){a(this,d,"f").error("[Authenticator] requestAccess failed",f)}return false}async revokeAccess(e){const t=(0,u.senderOrigin)(e);if(!t){a(this,d,"f").warn("Invalid sender url",e);return false}const r=await a(this,c,"f");const s=r.indexOf(t);if(s>=0){const i=[...r.slice(0,s),...r.slice(s+1)];if(await a(this,o,"m",l).call(this,i)){a(this,d,"f").info("[Authenticator] revoked access for",t);return true}}else{a(this,d,"f").warn("[Authenticator] attempted to revoke access for unknown origin",t)}return false}async haveAccess(e){const t=(0,u.senderOrigin)(e);if(!t)return false;const r=await a(this,c,"f");return r.includes(t)}async clear(){await a(this,o,"m",l).call(this,[])}constructor({requestAccess:e},{logger:t,storage:r}){o.add(this);i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,i,e,"f");s(this,n,r,"f");s(this,d,t,"f");s(this,c,r.get(),"f")}}t.PersistentAuthenticator=PersistentAuthenticator;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,o=new WeakSet,l=async function _PersistentAuthenticator_store(e){try{await a(this,n,"f").set(e);s(this,c,Promise.resolve(e),"f");return true}catch(t){a(this,d,"f").error("[Authenticator] storage.set failed",t);return false}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/PersistentAuthenticatorStorage.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createPersistentAuthenticatorStorage=void 0;const createPersistentAuthenticatorStorage=(e,t)=>{return{async get(){const r=await t.get(e);return(null==r?void 0:r[e])||[]},async set(r){await t.set({[e]:r})}}};t.createPersistentAuthenticatorStorage=createPersistentAuthenticatorStorage},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/PersistentAuthenticator.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/PersistentAuthenticatorStorage.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/types.js"),t)},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/Cip30Wallet.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.Cip30Wallet=t.WalletApiMethodNames=t.CipMethodsMapping=void 0;const p=r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/index.js");t.CipMethodsMapping={30:["getNetworkId","getUtxos","getCollateral","getBalance","getExtensions","getUsedAddresses","getUnusedAddresses","getChangeAddress","getRewardAddresses","signTx","signData","submitTx"],95:["getRegisteredPubStakeKeys","getUnregisteredPubStakeKeys","getPubDRepKey","signData"],142:["getNetworkMagic"]};t.WalletApiMethodNames=Object.values(t.CipMethodsMapping).flat();class Cip30Wallet{async isEnabled(){return a(this,d,"f").haveAccess()}async enable(e){a(this,o,"m",l).call(this,null==e?void 0:e.extensions);if(await a(this,d,"f").requestAccess()){var t;a(this,i,"f").debug(`${location.origin} has been granted access to wallet api`);const r=null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.filter(({cip:e})=>this.supportedExtensions.some(({cip:t})=>t===e));return a(this,o,"m",f).call(this,r)}a(this,i,"f").debug(`${location.origin} not authorized to access wallet api`);throw new p.ApiError(p.APIErrorCode.Refused,"wallet not authorized.")}constructor(e,{api:t,authenticator:r,logger:a}){o.add(this);this.apiVersion="0.1.0";this.supportedExtensions=[{cip:95},{cip:142}];i.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);this.icon=e.icon;this.name=e.walletName;s(this,n,t,"f");s(this,i,a,"f");s(this,d,r,"f");s(this,c,e.cip30ApiDeviations,"f");this.enable=this.enable.bind(this);this.isEnabled=this.isEnabled.bind(this);if(e.supportedExtensions)this.supportedExtensions=e.supportedExtensions}}t.Cip30Wallet=Cip30Wallet;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,o=new WeakSet,l=function _Cip30Wallet_validateExtensions(e=[]){if(!Array.isArray(e)||e.some(e=>!e||"object"!=typeof e||!e.cip||Number.isNaN(Number(e.cip)))){a(this,i,"f").debug(`Invalid extensions: ${e}`);throw new p.ApiError(p.APIErrorCode.InvalidRequest,`invalid extensions ${e}`)}},u=async function _Cip30Wallet_wrapGetCollateral(e){var t;const r=await a(this,n,"f").getCollateral(e);return(null===(t=a(this,c,"f"))||void 0===t?void 0:t.getCollateralEmptyArray)?null!=r?r:[]:r},f=function _Cip30Wallet_wrapAndEnableApi(e){var t;const r=a(this,n,"f");const s={experimental:{getCollateral:async e=>a(this,o,"m",u).call(this,e),...(null===(t=a(this,c,"f"))||void 0===t?void 0:t.onOffDummyMethods)&&{off:()=>void 0,on:()=>void 0}},getBalance:()=>r.getBalance(),getChangeAddress:()=>r.getChangeAddress(),getCollateral:e=>a(this,o,"m",u).call(this,e),getExtensions:()=>Promise.resolve(e||[]),getNetworkId:()=>r.getNetworkId(),getRewardAddresses:()=>r.getRewardAddresses(),getUnusedAddresses:()=>r.getUnusedAddresses(),getUsedAddresses:e=>r.getUsedAddresses(e),getUtxos:(e,t)=>r.getUtxos(e,t),signData:(e,t)=>r.signData(e,t),signTx:(e,t)=>r.signTx(e,t),submitTx:e=>r.submitTx(e)};const i={cip95:{getPubDRepKey:()=>r.getPubDRepKey(),getRegisteredPubStakeKeys:()=>r.getRegisteredPubStakeKeys(),getUnregisteredPubStakeKeys:()=>r.getUnregisteredPubStakeKeys(),signData:(e,t)=>r.signData(e,t)},cip142:{getNetworkMagic:()=>r.getNetworkMagic()}};if(e){for(const d of e){const l=`cip${d.cip}`;if(i[l])s[l]=i[l]}}return s}},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/Cip30Wallet.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/types.js"),t)},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/ApiError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ApiError=t.APIErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["InvalidRequest"]=-1]="InvalidRequest";e[e["InternalError"]=-2]="InternalError";e[e["Refused"]=-3]="Refused"})(a=t.APIErrorCode||(t.APIErrorCode={}));class ApiError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}t.ApiError=ApiError},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/DataSignError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataSignError=t.DataSignErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined";e[e["InvalidFormat"]=4]="InvalidFormat"})(a=t.DataSignErrorCode||(t.DataSignErrorCode={}));class DataSignError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}t.DataSignError=DataSignError},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/PaginateError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PaginateError=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");class PaginateError extends s.CustomError{constructor(e,t){super();this.maxSize=e;this.message=t}}t.PaginateError=PaginateError},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/TxSendError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TxSendError=t.TxSendErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["Refused"]=1]="Refused";e[e["Failure"]=2]="Failure"})(a=t.TxSendErrorCode||(t.TxSendErrorCode={}));class TxSendError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}t.TxSendError=TxSendError},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/TxSignError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TxSignError=t.TxSignErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["UserDeclined"]=2]="UserDeclined"})(a=t.TxSignErrorCode||(t.TxSignErrorCode={}));class TxSignError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}t.TxSignError=TxSignError},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/ApiError.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/DataSignError.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/PaginateError.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/TxSendError.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/TxSignError.js"),t)},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/errors/index.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/WalletApi/index.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/AuthenticatorApi/index.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/injectGlobal.js"),t);a(r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/util.js"),t)},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/injectGlobal.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.injectGlobal=void 0;const injectGlobal=(e,t,r,s)=>{s=null!=s?s:t.name;if(e.cardano)r.debug({module:"injectWindow",wallet:{apiVersion:t.apiVersion,icon:t.icon,name:t.name}},"Cardano global scope exists");else{r.debug({module:"injectWindow",wallet:{apiVersion:t.apiVersion,icon:t.icon,name:t.name}},"Creating cardano global scope");e.cardano={}}e.cardano[s]=e.cardano[s]||t;r.debug({module:"injectWindow",wallet:{apiVersion:t.apiVersion,icon:t.icon,name:t.name},windowCardano:e.cardano},"Injected")};t.injectGlobal=injectGlobal},"../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.senderOrigin=void 0;const senderOrigin=e=>{try{const{origin:t}=new URL((null==e?void 0:e.url)||"throw");return t}catch{return null}};t.senderOrigin=senderOrigin},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{senderOrigin:()=>senderOrigin});const senderOrigin=e=>{try{const{origin:t}=new URL((null==e?void 0:e.url)||"throw");return t}catch{return null}}},"../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/LedgerKeyAgent.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.LedgerKeyAgent=void 0;const u=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=i(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const p=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const v=r("../../node_modules/node-hid/nodehid.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib/webusb.js");const w=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js");const g=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/index.js");const b=c(r("../../node_modules/@ledgerhq/hw-transport-node-hid-noevents/lib-es/TransportNodeHid.js"));const P=i(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const S=c(r("../../node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js"));const C=S.default.default?S.default.default:S.default;const T=P.default.default?P.default.default:P.default;const isUsbDevice=e=>"undefined"!=typeof USBDevice&&e instanceof USBDevice;const isDeviceAlreadyOpenError=e=>{if("object"!=typeof e)return false;const t=e.innerError;if("object"!=typeof t)return false;return 11===t.code||"string"==typeof t.message&&t.message.includes("cannot open device with path")};const k="Cannot communicate with Ledger Cardano App";const transportTypedError=e=>new m.errors.TransportError("Ledger transport failed",e);const hasRegistrationOrRetirementCerts=e=>{if(!e)return false;return e.some(e=>e.type===P.CertificateType.STAKE_POOL_RETIREMENT)||e.some(e=>e.type===P.CertificateType.STAKE_POOL_REGISTRATION)};const stakeCredentialCert=e=>e.type===P.CertificateType.STAKE_REGISTRATION||e.type===P.CertificateType.STAKE_DEREGISTRATION||e.type===P.CertificateType.STAKE_DELEGATION;const A="establishDeviceConnection";const parseEstablishDeviceConnectionSecondParam=(e,t)=>{let r;let s;const a=e===m.CommunicationType.Node&&t instanceof v.HID||e===m.CommunicationType.Web&&isUsbDevice(t);const o=e===m.CommunicationType.Node&&"string"==typeof t;if(a)r=t;else if(o)s=t;else if(void 0!==t){throw new Error(`Invalid arguments of the '${A}' method`)}return{device:r,nodeHidDevicePath:s}};const containsOnlyScriptHashCreds=e=>{var t;const r=!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!(0,_.areNumbersEqualInConstantTime)(e.stakeCredential.type,P.CredentialParamsType.SCRIPT_HASH)));if(e.certificates){for(const s of e.certificates){if(!stakeCredentialCert(s))return false;const a=s.params;if(!(0,_.areNumbersEqualInConstantTime)(a.stakeCredential.type,P.CredentialParamsType.SCRIPT_HASH))return false}}return r};const isMultiSig=e=>{const t=false;const r=!e.inputs.some(e=>null!==e.path);const s=!e.outputs.some(e=>e.destination.type!==P.TxOutputDestinationType.THIRD_PARTY);if(r&&s&&!e.collateralInputs&&!e.requiredSigners&&!hasRegistrationOrRetirementCerts(e.certificates)&&containsOnlyScriptHashCreds(e)){return true}return t};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=(e,t,r,s,a)=>{const o=e.startsWith("stake");if(o){const i=t.find(({rewardAccount:t})=>t===e);if(!i)throw new m.cip8.Cip30DataSignError(m.cip8.Cip30DataSignErrorCode.ProofGeneration,"Unknown reward address");const n=m.util.accountKeyDerivationPathToBip32Path(r,i.stakeKeyDerivationPath||m.util.STAKE_KEY_DERIVATION_PATH,s);return{addressFieldType:P.MessageAddressFieldType.ADDRESS,addressParams:{params:{stakingPath:n},type:P.AddressType.REWARD_KEY},signingPath:n}}if(isPaymentAddress(e)){var d;const c=h.Cardano.Address.fromString(e);if((null==c?void 0:c.getType())===h.Cardano.AddressType.EnterpriseKey&&(null===(d=null==c?void 0:c.getProps().paymentPart)||void 0===d?void 0:d.hash)===u.Hash28ByteBase16.fromEd25519KeyHashHex(a)){const l=m.util.accountKeyDerivationPathToBip32Path(r,m.util.DREP_KEY_DERIVATION_PATH,s);return{addressFieldType:P.MessageAddressFieldType.KEY_HASH,signingPath:l}}}const f=t.find(({address:t})=>t===e);if(!f){throw new m.cip8.Cip30DataSignError(m.cip8.Cip30DataSignErrorCode.ProofGeneration,"Unknown address")}if(f.rewardAccount){const p=m.util.accountKeyDerivationPathToBip32Path(r,{index:f.index,role:f.type},s);const v=m.util.accountKeyDerivationPathToBip32Path(r,f.stakeKeyDerivationPath||{index:0,role:m.KeyRole.Stake},s);return{addressFieldType:P.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:p,stakingPath:v},type:P.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},signingPath:p}}const _=m.util.accountKeyDerivationPathToBip32Path(r,{index:f.index,role:f.type},s);return{addressFieldType:P.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:_},type:P.AddressType.ENTERPRISE_KEY},signingPath:_}};const E=[m.util.accountKeyDerivationPathToBip32Path(0,{index:0,role:m.KeyRole.External},m.KeyPurpose.MULTI_SIG)];class LedgerKeyAgent extends m.KeyAgentBase{static async findConnectionByCommunicationTypeAndDevicePath(e,t,r){var s;const a=null===(s=this.deviceConnections)||void 0===s?void 0:s.find(s=>{const a=e===s.communicationType;if(s.communicationType===m.CommunicationType.Web){return a&&r===s.device}if(s.communicationType===m.CommunicationType.Node){return a&&r===s.device&&t===s.nodeHidDevicePath}});if(!a)return null;try{await this.testConnection(a.deviceConnection)}catch(o){if(o instanceof m.errors.TransportError&&o.message.includes(k)){this.deviceConnections=this.deviceConnections.filter(e=>e!==a);return null}throw o}return a.deviceConnection}static async getHidDeviceList(e){try{return e===m.CommunicationType.Node?b.default.list():C.list()}catch(t){throw new m.errors.TransportError("Cannot fetch device list",t)}}static attachDisconnectionCleanupHandler(e){const onDisconnect=async()=>{e.off("disconnect",onDisconnect);this.deviceConnections=this.deviceConnections.filter(({deviceConnection:t})=>t.transport!==e);try{await e.close()}catch(t){if(t instanceof Error&&t.message.includes("The device was disconnected."))return;throw new m.errors.TransportError("Failed to close transport after device disconnection",t)}};e.on("disconnect",onDisconnect)}static async openTransportForDevice({communicationType:e,device:t}){let r;try{if(e===m.CommunicationType.Node&&t instanceof v.HID)r=new b.default(t);else if(e===m.CommunicationType.Web&&isUsbDevice(t))r=await C.open(t);else{throw new m.errors.TransportError(`Invalid device object provided for communication type ${e}`)}}catch(s){throw new m.errors.TransportError("Failed to open a transport for a given device",s)}this.attachDisconnectionCleanupHandler(r);return r}static async createTransport({communicationType:e,nodeHidDevicePath:t=""}){let r;try{r=e===m.CommunicationType.Node?await b.default.open(t):await C.open(await (0,y.getFirstLedgerDevice)())}catch(s){throw new m.errors.TransportError("Creating transport failed",s)}this.attachDisconnectionCleanupHandler(r);return r}static async testConnection(e){try{await e.getVersion()}catch(t){throw new m.errors.TransportError(k,t)}}static async createDeviceConnection(e){const t=new T(e);await this.testConnection(t);return t}static rememberConnection({communicationType:e,device:t,deviceConnection:r,nodeHidDevicePath:s}){this.deviceConnections.push({deviceConnection:r,...e===m.CommunicationType.Node?{communicationType:e,...t instanceof v.HID&&{device:t},...void 0!==s&&{nodeHidDevicePath:s}}:{communicationType:e,...isUsbDevice(t)&&{device:t}}})}static async [(l=new WeakMap,A)](e,t){const{device:r,nodeHidDevicePath:s}=parseEstablishDeviceConnectionSecondParam(e,t);const a=await this.findConnectionByCommunicationTypeAndDevicePath(e,s,r);if(a)return a;let o;try{o=r?await LedgerKeyAgent.openTransportForDevice({communicationType:e,device:r}):await LedgerKeyAgent.createTransport({communicationType:e,nodeHidDevicePath:s});if(!o||!o.deviceModel){throw new m.errors.TransportError("Missing transport")}const i=await LedgerKeyAgent.createDeviceConnection(o);this.rememberConnection({communicationType:e,device:r,deviceConnection:i,nodeHidDevicePath:s});return i}catch(n){if(isDeviceAlreadyOpenError(n)){throw new m.errors.TransportError("Connection already established",n)}if(o)void o.close();throw new m.errors.TransportError("Establishing device connection failed",n)}}static async checkDeviceConnection(e,t){try{if(!t){return await LedgerKeyAgent.establishDeviceConnection(e)}return await LedgerKeyAgent.createDeviceConnection(t.transport)}catch(r){if("DisconnectedDeviceDuringOperation"===r.name){return await LedgerKeyAgent.establishDeviceConnection(e)}throw r}}static async getXpub({deviceConnection:e,communicationType:t,accountIndex:r,purpose:s}){try{const a=await LedgerKeyAgent.checkDeviceConnection(t,e);const o=`${s}'/${m.CardanoKeyConst.COIN_TYPE}'/${r}'`;const i=await a.getExtendedPublicKey({path:(0,w.str_to_path)(o)});const n=`${i.publicKeyHex}${i.chainCodeHex}`;return u.Bip32PublicKeyHex(n)}catch(d){if(28169===d.code){throw new m.errors.AuthenticationError("Failed to export extended account public key",d)}throw transportTypedError(d)}}static async getAppVersion(e,t){const r=await LedgerKeyAgent.checkDeviceConnection(e,t);return await r.getVersion()}static async createWithDevice({chainId:e,accountIndex:t=0,communicationType:r,deviceConnection:s,purpose:a=m.KeyPurpose.STANDARD},o){const i=await LedgerKeyAgent.getHidDeviceList(r);const n=await (s?LedgerKeyAgent.checkDeviceConnection(r,s):LedgerKeyAgent.establishDeviceConnection(r,i[0]));const d=await LedgerKeyAgent.getXpub({accountIndex:t,communicationType:r,deviceConnection:n,purpose:a});return new LedgerKeyAgent({accountIndex:t,chainId:e,communicationType:r,deviceConnection:n,extendedAccountPublicKey:d,purpose:a},o)}static isKeyHashOrScriptHashVoter(e){return!!(null==e?void 0:e.some(e=>{switch(e.voter.type){case P.VoterType.COMMITTEE_KEY_HASH:case P.VoterType.COMMITTEE_SCRIPT_HASH:case P.VoterType.DREP_KEY_HASH:case P.VoterType.DREP_SCRIPT_HASH:case P.VoterType.STAKE_POOL_KEY_HASH:return true;default:return false}}))}static getSigningMode(e){if(e.certificates){for(const t of e.certificates){if(t.type===P.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolOwners.some(e=>e.type===P.PoolOwnerType.DEVICE_OWNED))return P.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER;if(t.type===P.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolKey.type===P.PoolKeyType.DEVICE_OWNED)return P.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR}}if(e.collateralInputs||LedgerKeyAgent.isKeyHashOrScriptHashVoter(e.votingProcedures)){return P.TransactionSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return P.TransactionSigningMode.MULTISIG_TRANSACTION}return P.TransactionSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r}){try{var s;const a=e.toCore();const o=e.hash();const i=await this.derivePublicKey(m.util.DREP_KEY_DERIVATION_PATH);const n=(await u.Ed25519PublicKey.fromHex(i).hash()).hex();const c=e.outputs().map(e=>e.isBabbageOutput()?f.TxOutputFormat.MAP_BABBAGE:f.TxOutputFormat.ARRAY_LEGACY);const p=(null===(s=e.collateralReturn())||void 0===s?void 0:s.isBabbageOutput())?f.TxOutputFormat.MAP_BABBAGE:f.TxOutputFormat.ARRAY_LEGACY;const h=await (0,g.toLedgerTx)(a,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:p,dRepKeyHashHex:n,knownAddresses:t,outputsFormat:c,txInKeyPathMap:r});const v=await LedgerKeyAgent.checkDeviceConnection(d(this,l,"f"),this.deviceConnection);const y=LedgerKeyAgent.getSigningMode(h);const w=await v.signTransaction({options:{tagCborSets:e.hasTaggedSets()},signingMode:y,tx:h,...y===P.TransactionSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessPaths:E}});if(!(0,_.areStringsEqualInConstantTime)(w.txHashHex,o)){throw new m.errors.HwMappingError("Ledger computed a different transaction id")}return new Map(await Promise.all(w.witnesses.map(async e=>{const t=await this.derivePublicKey({index:e.path[m.Cip1852PathLevelIndexes.INDEX],role:e.path[m.Cip1852PathLevelIndexes.ROLE]});const r=u.Ed25519SignatureHex(e.witnessSignatureHex);return[t,r]})))}catch(b){if(28169===b.code){throw new m.errors.AuthenticationError("Transaction signing aborted",b)}throw transportTypedError(b)}}async signCip8Data(e){try{const t=await this.derivePublicKey(m.util.DREP_KEY_DERIVATION_PATH);const r=(await u.Ed25519PublicKey.fromHex(t).hash()).hex();const{signingPath:a,addressParams:o,addressFieldType:i}=getDerivationPath(e.signWith,e.knownAddresses,this.accountIndex,this.purpose,r);const n=i===P.MessageAddressFieldType.ADDRESS&&o?{address:o,addressFieldType:P.MessageAddressFieldType.ADDRESS,hashPayload:false,messageHex:e.payload,network:{networkId:this.chainId.networkId,protocolMagic:this.chainId.networkMagic},preferHexDisplay:false,signingPath:a}:{addressFieldType:P.MessageAddressFieldType.KEY_HASH,hashPayload:false,messageHex:e.payload,preferHexDisplay:false,signingPath:a};const c=await LedgerKeyAgent.checkDeviceConnection(d(this,l,"f"),this.deviceConnection);const f=await c.signMessage(n);const v=h.util.hexToBytes((0,_.HexBlob)(f.addressFieldHex));const y=p.HeaderMap.new();y.set_algorithm_id(p.Label.from_algorithm_id(p.AlgorithmId.EdDSA));y.set_header(m.cip8.CoseLabel.address,p.CBORValue.new_bytes(v));const w=p.COSESign1Builder.new(p.Headers.new(p.ProtectedHeaderMap.new(y),p.HeaderMap.new()),h.util.hexToBytes(e.payload),false);const g=w.build(s.from(f.signatureHex,"hex"));const b=m.cip8.createCoseKey(v,u.Ed25519PublicKeyHex(f.signingPublicKeyHex));return{key:h.util.bytesToHex(b.to_bytes()),signature:h.util.bytesToHex(g.to_bytes())}}catch(S){if(28169===S.code){throw new m.errors.AuthenticationError("Transaction signing aborted",S)}throw transportTypedError(S)}}async signBlob(){throw new h.NotImplementedError("Operation not supported!")}async exportRootPrivateKey(){throw new h.NotImplementedError("Operation not supported!")}constructor({deviceConnection:e,...t},r){super({...t,__typename:m.KeyAgentType.Ledger},r);l.set(this,void 0);this.deviceConnection=e;n(this,l,t.communicationType,"f")}}t.LedgerKeyAgent=LedgerKeyAgent;LedgerKeyAgent.deviceConnections=[]},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/index.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/LedgerKeyAgent.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/types.js"),t)},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/assets.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTokenMap=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameHex.length===t.assetNameHex.length){return e.assetNameHex>t.assetNameHex?1:-1}if(e.assetNameHex.length>t.assetNameHex.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyIdHex>t.policyIdHex?1:-1;const tokenMapToAssetGroup=e=>{const t=new Map;for(const[r,a]of e.entries()){const o=s.Cardano.AssetId.getPolicyId(r);const i=s.Cardano.AssetId.getAssetName(r);if(!t.has(o))t.set(o,new Array);t.get(o).push({amount:a,assetNameHex:i})}const n=[];for(const[d,c]of t.entries()){c.sort(compareAssetNameCanonically);n.push({policyIdHex:d,tokens:c})}n.sort(comparePolicyIdCanonically);return n};const mapTokenMap=e=>{if(!e)return null;return tokenMapToAssetGroup(e)};t.mapTokenMap=mapTokenMap},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapAuxiliaryData=void 0;const s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const toAuxiliaryData=e=>({params:{hashHex:e},type:s.TxAuxiliaryDataType.ARBITRARY_HASH});const mapAuxiliaryData=e=>e?toAuxiliaryData(e):null;t.mapAuxiliaryData=mapAuxiliaryData},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/certificates.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapCerts=t.voteDelegationCertificate=t.poolRegistrationCertificate=t.stakeDelegationCertificate=t.getKnownAddress=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=o(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const mapAnchorToParams=e=>{return{..."anchor"in e&&(null==e?void 0:e.anchor)&&{anchor:{hashHex:e.anchor.dataHash,url:e.anchor.url}}}};const credentialMapper=(e,t,r)=>{let s;switch(t){case d.Cardano.CredentialType.KeyHash:s=r?{keyPath:r,type:n.CredentialParamsType.KEY_PATH}:{keyHashHex:e.hash,type:n.CredentialParamsType.KEY_HASH};break;case d.Cardano.CredentialType.ScriptHash:default:s={scriptHashHex:e.hash,type:n.CredentialParamsType.SCRIPT_HASH}}return s};const drepParamsMapper=(e,t)=>{let r;switch(t){case d.Cardano.CredentialType.KeyHash:r={keyHashHex:e.hash,type:n.DRepParamsType.KEY_HASH};break;case d.Cardano.CredentialType.ScriptHash:default:r={scriptHashHex:e.hash,type:n.DRepParamsType.SCRIPT_HASH}}return r};const getKnownAddress=(e,t)=>{return t?null==t?void 0:t.knownAddresses.find(t=>(0,l.areStringsEqualInConstantTime)(d.Cardano.RewardAccount.toHash(t.rewardAccount),e.hash)):void 0};t.getKnownAddress=getKnownAddress;const getCredentialType=e=>{var t;const r=e?null===(t=d.Cardano.Address.fromBech32(e.rewardAccount))||void 0===t?void 0:t.asReward():null;return r?r.getPaymentCredential().type:n.CredentialParamsType.SCRIPT_HASH};const stakeCredentialMapper=(e,r)=>{const s=(0,t.getKnownAddress)(e,r);const a=getCredentialType(s);const o=c.util.stakeKeyPathFromGroupedAddress(s);return credentialMapper(e,a,o)};const getStakeAddressCertificate=(e,t)=>({params:{stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===d.Cardano.CertificateType.StakeRegistration?n.CertificateType.STAKE_REGISTRATION:n.CertificateType.STAKE_DEREGISTRATION});const getNewStakeAddressCertificate=(e,t)=>({params:{deposit:e.deposit,stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===d.Cardano.CertificateType.Registration?n.CertificateType.STAKE_REGISTRATION_CONWAY:n.CertificateType.STAKE_DEREGISTRATION_CONWAY});const stakeDelegationCertificate=(e,t)=>({params:{poolKeyHashHex:d.Cardano.PoolId.toKeyHash(e.poolId),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:n.CertificateType.STAKE_DELEGATION});t.stakeDelegationCertificate=stakeDelegationCertificate;const toPoolMetadata=e=>({metadataHashHex:e.hash,metadataUrl:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return c.util.stakeKeyPathFromGroupedAddress(r)};const poolRegistrationCertificate=(e,t)=>{const r=getPoolOperatorKeyPath(e.poolParameters.rewardAccount,t);const s=d.Cardano.RewardAccount.toHash(e.poolParameters.rewardAccount);return{params:{cost:e.poolParameters.cost,margin:e.poolParameters.margin,metadata:e.poolParameters.metadataJson?toPoolMetadata(e.poolParameters.metadataJson):void 0,pledge:e.poolParameters.pledge,poolKey:r?{params:{path:r},type:n.PoolKeyType.DEVICE_OWNED}:{params:{keyHashHex:s},type:n.PoolKeyType.THIRD_PARTY},poolOwners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=d.Cardano.RewardAccount.toHash(e);return r?{params:{stakingPath:r},type:n.PoolOwnerType.DEVICE_OWNED}:{params:{stakingKeyHashHex:s},type:n.PoolOwnerType.THIRD_PARTY}}),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{params:{ipv4:e.ipv4,ipv6:e.ipv6,portNumber:e.port},type:0};case"RelayByName":return{params:{dnsName:e.hostname,portNumber:e.port},type:1};case"RelayByNameMultihost":return{params:{dnsName:e.dnsName},type:1}}}),rewardAccount:r?{params:{path:r},type:n.PoolRewardAccountType.DEVICE_OWNED}:{params:{rewardAccountHex:d.Cardano.Address.fromBech32(e.poolParameters.rewardAccount).toBytes()},type:n.PoolRewardAccountType.THIRD_PARTY},vrfKeyHashHex:e.poolParameters.vrf},type:n.CertificateType.STAKE_POOL_REGISTRATION}};t.poolRegistrationCertificate=poolRegistrationCertificate;const poolRetirementCertificate=(e,t)=>{const r=d.Cardano.PoolId.toKeyHash(e.poolId);const s=null==t?void 0:t.knownAddresses.find(e=>(0,l.areStringsEqualInConstantTime)(d.Cardano.RewardAccount.toHash(e.rewardAccount),r));const a=c.util.stakeKeyPathFromGroupedAddress(s);if(!a)throw new l.InvalidArgumentError("certificate","Missing key matching pool retirement certificate.");return{params:{poolKeyPath:a,retirementEpoch:e.epoch},type:n.CertificateType.STAKE_POOL_RETIREMENT}};const checkDrepPublicKeyAgainstCredential=(e,t)=>{if(!e||e!==i.Ed25519KeyHashHex(t)){throw new l.InvalidArgumentError("certificate","dRepPublicKey does not match certificate drep credential.")}};const drepRegistrationCertificate=(e,t)=>{if(!t)throw new l.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,c.util.accountKeyDerivationPathToBip32Path(t.accountIndex,c.util.DREP_KEY_DERIVATION_PATH)),deposit:e.deposit};return{params:r,type:e.__typename===d.Cardano.CertificateType.RegisterDelegateRepresentative?n.CertificateType.DREP_REGISTRATION:n.CertificateType.DREP_DEREGISTRATION}};const updateDRepCertificate=(e,t)=>{if(!t)throw new l.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,c.util.accountKeyDerivationPathToBip32Path(t.accountIndex,c.util.DREP_KEY_DERIVATION_PATH))};return{params:r,type:n.CertificateType.DREP_UPDATE}};const drepMapper=e=>{if(d.Cardano.isDRepAlwaysAbstain(e)){return{type:n.DRepParamsType.ABSTAIN}}if(d.Cardano.isDRepAlwaysNoConfidence(e)){return{type:n.DRepParamsType.NO_CONFIDENCE}}if(d.Cardano.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>({params:{dRep:drepMapper(e.dRep),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:n.CertificateType.VOTE_DELEGATION});t.voteDelegationCertificate=voteDelegationCertificate;const toCert=(e,r)=>{switch(e.__typename){case d.Cardano.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,r);case d.Cardano.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,r);case d.Cardano.CertificateType.StakeDelegation:return(0,t.stakeDelegationCertificate)(e,r);case d.Cardano.CertificateType.PoolRegistration:return(0,t.poolRegistrationCertificate)(e,r);case d.Cardano.CertificateType.PoolRetirement:return poolRetirementCertificate(e,r);case d.Cardano.CertificateType.Registration:return getNewStakeAddressCertificate(e,r);case d.Cardano.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,r);case d.Cardano.CertificateType.VoteDelegation:return(0,t.voteDelegationCertificate)(e,r);case d.Cardano.CertificateType.RegisterDelegateRepresentative:return drepRegistrationCertificate(e,r);case d.Cardano.CertificateType.UnregisterDelegateRepresentative:return drepRegistrationCertificate(e,r);case d.Cardano.CertificateType.UpdateDelegateRepresentative:return updateDRepCertificate(e,r);default:throw new l.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>{if(!e)return null;return e.map(e=>toCert(e,t))};t.mapCerts=mapCerts},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralInputs.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapCollateralTxIns=void 0;const s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txIn.js");const mapCollateralTxIns=(e,t)=>e?(0,s.mapTxIns)(e,t):null;t.mapCollateralTxIns=mapCollateralTxIns},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralOutput.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapCollateralTxOut=void 0;const s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txOut.js");const mapCollateralTxOut=(e,t)=>e?(0,s.toTxOut)({index:0,isCollateral:true,txOut:e},t):null;t.mapCollateralTxOut=mapCollateralTxOut},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/assets.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/auxiliaryData.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/certificates.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralOutput.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralInputs.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/referenceInputs.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/requiredSigners.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/tx.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txIn.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txOut.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/withdrawals.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/votingProcedures.js"),t)},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/referenceInputs.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapReferenceInputs=void 0;const mapReferenceInputs=e=>e?e.map(e=>({outputIndex:e.index,path:null,txHashHex:e.txId.toString()})):null;t.mapReferenceInputs=mapReferenceInputs},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/requiredSigners.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapRequiredSigners=t.toRequiredSigner=void 0;const i=o(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,s;const a=null===(s=null===(r=n.Cardano.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential().hash;return!!a&&(0,d.areStringsEqualInConstantTime)(a.toString(),e)});const s=null==t?void 0:t.knownAddresses.find(t=>{const r=n.Cardano.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,d.areStringsEqualInConstantTime)(r.toString(),e)});const a=r?c.util.paymentKeyPathFromGroupedAddress(r):null;const o=s?c.util.stakeKeyPathFromGroupedAddress(s):null;if(a){return{path:a,type:i.TxRequiredSignerType.PATH}}if(o){return{path:o,type:i.TxRequiredSignerType.PATH}}return{hashHex:e,type:i.TxRequiredSignerType.HASH}};t.toRequiredSigner=toRequiredSigner;const mapRequiredSigners=(e,r)=>e?e.map(e=>(0,t.toRequiredSigner)(e,r)):null;t.mapRequiredSigners=mapRequiredSigners},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/tx.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toLedgerTx=t.LedgerTxTransformer=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/auxiliaryData.js");const o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/certificates.js");const i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralInputs.js");const n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/collateralOutput.js");const d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/referenceInputs.js");const c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/requiredSigners.js");const l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/assets.js");const u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txIn.js");const f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txOut.js");const p=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/votingProcedures.js");const h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/withdrawals.js");t.LedgerTxTransformer={auxiliaryData:({auxiliaryDataHash:e})=>(0,a.mapAuxiliaryData)(e),certificates:({certificates:e},t)=>(0,o.mapCerts)(e,t),collateralInputs:({collaterals:e},t)=>(0,i.mapCollateralTxIns)(e,t),collateralOutput:({collateralReturn:e},t)=>(0,n.mapCollateralTxOut)(e,t),donation:({donation:e})=>e,fee:({fee:e})=>e,includeNetworkId:({networkId:e})=>!!e,inputs:({inputs:e},t)=>(0,u.mapTxIns)(e,t),mint:({mint:e})=>(0,l.mapTokenMap)(e),network:(e,t)=>({networkId:t.chainId.networkId,protocolMagic:t.chainId.networkMagic}),outputs:({outputs:e},t)=>(0,f.mapTxOuts)(e,t),referenceInputs:({referenceInputs:e})=>(0,d.mapReferenceInputs)(e),requiredSigners:({requiredExtraSignatures:e},t)=>(0,c.mapRequiredSigners)(e,t),scriptDataHashHex:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},totalCollateral:({totalCollateral:e})=>e,treasury:({treasuryValue:e})=>e,ttl:({validityInterval:e})=>{return null==e?void 0:e.invalidHereafter},validityIntervalStart:({validityInterval:e})=>{return null==e?void 0:e.invalidBefore},votingProcedures:({votingProcedures:e},t)=>(0,p.mapVotingProcedures)(e,t),withdrawals:({withdrawals:e},t)=>(0,h.mapWithdrawals)(e,t)};const toLedgerTx=(e,r)=>(0,s.transformObj)(e,t.LedgerTxTransformer,r);t.toLedgerTx=toLedgerTx},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txIn.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTxIns=t.toTxIn=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const resolveKeyPath=(e,{accountIndex:t,txInKeyPathMap:r})=>{const a=r[(0,s.TxInId)(e)];if(a){return s.util.accountKeyDerivationPathToBip32Path(t,a)}return null};const toTxIn=(e,t)=>({outputIndex:e.index,path:resolveKeyPath(e,t),txHashHex:e.txId});t.toTxIn=toTxIn;const mapTxIns=(e,r)=>e.map(e=>(0,t.toTxIn)(e,r));t.mapTxIns=mapTxIns},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/txOut.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapTxOuts=t.toTxOut=void 0;const i=o(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/assets.js");const l=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const toInlineDatum=e=>({datumHex:n.Serialization.PlutusData.fromCore(e).toCbor(),type:i.DatumType.INLINE});const toDatumHash=e=>({datumHashHex:e.toString(),type:i.DatumType.HASH});const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const s=n.Cardano.util.isScriptAddress(e.address);if(r&&!s){const a=l.util.paymentKeyPathFromGroupedAddress(r);const o=l.util.stakeKeyPathFromGroupedAddress(r);if(!o)throw new d.InvalidArgumentError("txOut","Missing stake key key path.");return{params:{params:{spendingPath:a,stakingPath:o},type:i.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},type:i.TxOutputDestinationType.DEVICE_OWNED}}return{params:{addressHex:n.Cardano.Address.fromBech32(e.address).toBytes()},type:i.TxOutputDestinationType.THIRD_PARTY}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return null;return t.toCbor()};const toTxOut=(e,t)=>{const{txOut:r,index:s,isCollateral:a}=e;const o=n.Serialization.TransactionOutput.fromCore(r);const d=getScriptHex(o);const l=a?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[s];const u=l===i.TxOutputFormat.MAP_BABBAGE;var f;return{amount:r.value.coins,destination:toDestination(r,t),tokenBundle:(0,c.mapTokenMap)(r.value.assets),...u?{datum:r.datumHash?toDatumHash(r.datumHash):r.datum?toInlineDatum(r.datum):null,format:i.TxOutputFormat.MAP_BABBAGE,referenceScriptHex:d}:{datumHashHex:null!==(f=r.datumHash)&&void 0!==f?f:null,format:i.TxOutputFormat.ARRAY_LEGACY}}};t.toTxOut=toTxOut;const mapTxOuts=(e,r)=>e.map((e,s)=>(0,t.toTxOut)({index:s,isCollateral:false,txOut:e},r));t.mapTxOuts=mapTxOuts},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/votingProcedures.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapVotingProcedures=t.toVotingProcedure=t.toVotes=t.toVoteOption=t.toVoter=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=o(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const toVoter=(e,t)=>{if(!t)throw new d.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");switch(e.__typename){case"ccHotKeyHash":return{keyHashHex:e.credential.hash,type:n.VoterType.COMMITTEE_KEY_HASH};case"ccHotScriptHash":return{scriptHashHex:e.credential.hash,type:n.VoterType.COMMITTEE_SCRIPT_HASH};case"dRepKeyHash":if(!t.dRepKeyHashHex||t.dRepKeyHashHex!==i.Ed25519KeyHashHex(e.credential.hash)){throw new Error("Foreign voter drepKeyHash")}return{keyPath:c.util.accountKeyDerivationPathToBip32Path(t.accountIndex,c.util.DREP_KEY_DERIVATION_PATH),type:n.VoterType.DREP_KEY_PATH};case"dRepScriptHash":return{scriptHashHex:e.credential.hash,type:n.VoterType.DREP_SCRIPT_HASH};case"stakePoolKeyHash":return{keyHashHex:e.credential.hash,type:n.VoterType.STAKE_POOL_KEY_HASH};default:throw new Error("Unsupported voter type")}};t.toVoter=toVoter;const toVoteOption=e=>{switch(e){case 0:return n.VoteOption.NO;case 1:return n.VoteOption.YES;case 2:return n.VoteOption.ABSTAIN;default:throw new Error("Unsupported vote type")}};t.toVoteOption=toVoteOption;const toVotes=e=>e.map(e=>({govActionId:{govActionIndex:e.actionId.actionIndex,txHashHex:e.actionId.id},votingProcedure:{...e.votingProcedure.anchor&&{anchor:{hashHex:e.votingProcedure.anchor.dataHash,url:e.votingProcedure.anchor.url}},vote:(0,t.toVoteOption)(e.votingProcedure.vote)}}));t.toVotes=toVotes;const toVotingProcedure=(e,r)=>({voter:(0,t.toVoter)(e.voter,r),votes:(0,t.toVotes)(e.votes)});t.toVotingProcedure=toVotingProcedure;const mapVotingProcedures=(e,r)=>e?e.map(e=>(0,t.toVotingProcedure)(e,r)):null;t.mapVotingProcedures=mapVotingProcedures},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/transformers/withdrawals.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapWithdrawals=t.toWithdrawal=void 0;const i=o(r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const resolveKeyPath=(e,t)=>{if(!t)return null;const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());if(r&&r.stakeKeyDerivationPath){return[d.util.harden(d.CardanoKeyConst.PURPOSE),d.util.harden(d.CardanoKeyConst.COIN_TYPE),d.util.harden(r.accountIndex),r.stakeKeyDerivationPath.role,r.stakeKeyDerivationPath.index]}return null};const toWithdrawal=(e,t)=>{const r=n.Cardano.Address.fromString(e.stakeAddress);const s=null==r?void 0:r.asReward();if(!s)throw new c.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let a;if((0,c.areNumbersEqualInConstantTime)(s.getPaymentCredential().type,n.Cardano.CredentialType.KeyHash)){const o=resolveKeyPath(s,null==t?void 0:t.knownAddresses);a=o?{amount:e.quantity,stakeCredential:{keyPath:o,type:i.CredentialParamsType.KEY_PATH}}:{amount:e.quantity,stakeCredential:{keyHashHex:s.getPaymentCredential().hash.toString(),type:i.CredentialParamsType.KEY_HASH}}}else{a={amount:e.quantity,stakeCredential:{scriptHashHex:s.getPaymentCredential().hash.toString(),type:i.CredentialParamsType.SCRIPT_HASH}}}return a};t.toWithdrawal=toWithdrawal;const mapWithdrawals=(e,r)=>{if(!e)return null;e.sort((e,t)=>{var r,s;const a=null===(r=n.Cardano.Address.fromString(e.stakeAddress))||void 0===r?void 0:r.asReward();const o=null===(s=n.Cardano.Address.fromString(t.stakeAddress))||void 0===s?void 0:s.asReward();if(!a||!o)throw new c.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");return a.toAddress().toBytes()>o.toAddress().toBytes()?1:-1});return e.map(e=>(0,t.toWithdrawal)(e,r))};t.mapWithdrawals=mapWithdrawals},"../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeviceType=void 0;var r;(function(e){e["Ledger"]="Ledger"})(r=t.DeviceType||(t.DeviceType={}))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{LedgerKeyAgent:()=>LedgerKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var o=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var _=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var y=r("../../node_modules/node-hid/nodehid.js");var w=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var g=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var b=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib/webusb.js");var P=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js");var S=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var C=r("../../node_modules/@ledgerhq/hw-transport-node-hid-noevents/lib-es/TransportNodeHid.js");var T=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js");var k=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var A;const E=T["default"]["default"]?T["default"]["default"]:T["default"];const j=o["default"]?o["default"]:o;const isUsbDevice=e=>"undefined"!=typeof USBDevice&&e instanceof USBDevice;const isDeviceAlreadyOpenError=e=>{if("object"!=typeof e)return false;const t=e.innerError;if("object"!=typeof t)return false;return 11===t.code||"string"==typeof t.message&&t.message.includes("cannot open device with path")};const I="Cannot communicate with Ledger Cardano App";const transportTypedError=e=>new l.TransportError("Ledger transport failed",e);const hasRegistrationOrRetirementCerts=e=>{if(!e)return false;return e.some(e=>e.type===o.CertificateType.STAKE_POOL_RETIREMENT)||e.some(e=>e.type===o.CertificateType.STAKE_POOL_REGISTRATION)};const stakeCredentialCert=e=>e.type===o.CertificateType.STAKE_REGISTRATION||e.type===o.CertificateType.STAKE_DEREGISTRATION||e.type===o.CertificateType.STAKE_DELEGATION;const x="establishDeviceConnection";const parseEstablishDeviceConnectionSecondParam=(e,t)=>{let r;let s;const a=e===u.CommunicationType.Node&&t instanceof y.HID||e===u.CommunicationType.Web&&isUsbDevice(t);const o=e===u.CommunicationType.Node&&"string"==typeof t;if(a)r=t;else if(o)s=t;else if(void 0!==t){throw new Error(`Invalid arguments of the '${x}' method`)}return{device:r,nodeHidDevicePath:s}};const containsOnlyScriptHashCreds=e=>{var t;const r=!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!(0,w.areNumbersEqualInConstantTime)(e.stakeCredential.type,o.CredentialParamsType.SCRIPT_HASH)));if(e.certificates){for(const s of e.certificates){if(!stakeCredentialCert(s))return false;const a=s.params;if(!(0,w.areNumbersEqualInConstantTime)(a.stakeCredential.type,o.CredentialParamsType.SCRIPT_HASH))return false}}return r};const isMultiSig=e=>{const t=false;const r=!e.inputs.some(e=>null!==e.path);const s=!e.outputs.some(e=>e.destination.type!==o.TxOutputDestinationType.THIRD_PARTY);if(r&&s&&!e.collateralInputs&&!e.requiredSigners&&!hasRegistrationOrRetirementCerts(e.certificates)&&containsOnlyScriptHashCreds(e)){return true}return t};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=(e,t,r,a,i)=>{const d=e.startsWith("stake");if(d){const c=t.find(({rewardAccount:t})=>t===e);if(!c)throw new f.Cip30DataSignError(f.Cip30DataSignErrorCode.ProofGeneration,"Unknown reward address");const l=p.accountKeyDerivationPathToBip32Path(r,c.stakeKeyDerivationPath||p.STAKE_KEY_DERIVATION_PATH,a);return{addressFieldType:o.MessageAddressFieldType.ADDRESS,addressParams:{params:{stakingPath:l},type:o.AddressType.REWARD_KEY},signingPath:l}}if(isPaymentAddress(e)){var h;const m=n.Address.fromString(e);if((null==m?void 0:m.getType())===n.AddressType.EnterpriseKey&&(null===(h=null==m?void 0:m.getProps().paymentPart)||void 0===h?void 0:h.hash)===s.Hash28ByteBase16.fromEd25519KeyHashHex(i)){const v=p.accountKeyDerivationPathToBip32Path(r,p.DREP_KEY_DERIVATION_PATH,a);return{addressFieldType:o.MessageAddressFieldType.KEY_HASH,signingPath:v}}}const _=t.find(({address:t})=>t===e);if(!_){throw new f.Cip30DataSignError(f.Cip30DataSignErrorCode.ProofGeneration,"Unknown address")}if(_.rewardAccount){const y=p.accountKeyDerivationPathToBip32Path(r,{index:_.index,role:_.type},a);const w=p.accountKeyDerivationPathToBip32Path(r,_.stakeKeyDerivationPath||{index:0,role:u.KeyRole.Stake},a);return{addressFieldType:o.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:y,stakingPath:w},type:o.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},signingPath:y}}const g=p.accountKeyDerivationPathToBip32Path(r,{index:_.index,role:_.type},a);return{addressFieldType:o.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:g},type:o.AddressType.ENTERPRISE_KEY},signingPath:g}};const R=[p.accountKeyDerivationPathToBip32Path(0,{index:0,role:u.KeyRole.External},u.KeyPurpose.MULTI_SIG)];class LedgerKeyAgent extends h.KeyAgentBase{static async findConnectionByCommunicationTypeAndDevicePath(e,t,r){var s;const a=null===(s=this.deviceConnections)||void 0===s?void 0:s.find(s=>{const a=e===s.communicationType;if(s.communicationType===u.CommunicationType.Web){return a&&r===s.device}if(s.communicationType===u.CommunicationType.Node){return a&&r===s.device&&t===s.nodeHidDevicePath}});if(!a)return null;try{await this.testConnection(a.deviceConnection)}catch(o){if(o instanceof l.TransportError&&o.message.includes(I)){this.deviceConnections=this.deviceConnections.filter(e=>e!==a);return null}throw o}return a.deviceConnection}static async getHidDeviceList(e){try{return e===u.CommunicationType.Node?C["default"].list():E.list()}catch(t){throw new l.TransportError("Cannot fetch device list",t)}}static attachDisconnectionCleanupHandler(e){const onDisconnect=async()=>{e.off("disconnect",onDisconnect);this.deviceConnections=this.deviceConnections.filter(({deviceConnection:t})=>t.transport!==e);try{await e.close()}catch(t){if(t instanceof Error&&t.message.includes("The device was disconnected."))return;throw new l.TransportError("Failed to close transport after device disconnection",t)}};e.on("disconnect",onDisconnect)}static async openTransportForDevice({communicationType:e,device:t}){let r;try{if(e===u.CommunicationType.Node&&t instanceof y.HID)r=new C["default"](t);else if(e===u.CommunicationType.Web&&isUsbDevice(t))r=await E.open(t);else{throw new l.TransportError(`Invalid device object provided for communication type ${e}`)}}catch(s){throw new l.TransportError("Failed to open a transport for a given device",s)}this.attachDisconnectionCleanupHandler(r);return r}static async createTransport({communicationType:e,nodeHidDevicePath:t=""}){let r;try{r=e===u.CommunicationType.Node?await C["default"].open(t):await E.open(await (0,b.getFirstLedgerDevice)())}catch(s){throw new l.TransportError("Creating transport failed",s)}this.attachDisconnectionCleanupHandler(r);return r}static async testConnection(e){try{await e.getVersion()}catch(t){throw new l.TransportError(I,t)}}static async createDeviceConnection(e){const t=new j(e);await this.testConnection(t);return t}static rememberConnection({communicationType:e,device:t,deviceConnection:r,nodeHidDevicePath:s}){this.deviceConnections.push({deviceConnection:r,...e===u.CommunicationType.Node?{communicationType:e,...t instanceof y.HID&&{device:t},...void 0!==s&&{nodeHidDevicePath:s}}:{communicationType:e,...isUsbDevice(t)&&{device:t}}})}static async [(A=new WeakMap,x)](e,t){const{device:r,nodeHidDevicePath:s}=parseEstablishDeviceConnectionSecondParam(e,t);const a=await this.findConnectionByCommunicationTypeAndDevicePath(e,s,r);if(a)return a;let o;try{o=r?await LedgerKeyAgent.openTransportForDevice({communicationType:e,device:r}):await LedgerKeyAgent.createTransport({communicationType:e,nodeHidDevicePath:s});if(!o||!o.deviceModel){throw new l.TransportError("Missing transport")}const i=await LedgerKeyAgent.createDeviceConnection(o);this.rememberConnection({communicationType:e,device:r,deviceConnection:i,nodeHidDevicePath:s});return i}catch(n){if(isDeviceAlreadyOpenError(n)){throw new l.TransportError("Connection already established",n)}if(o)void o.close();throw new l.TransportError("Establishing device connection failed",n)}}static async checkDeviceConnection(e,t){try{if(!t){return await LedgerKeyAgent.establishDeviceConnection(e)}return await LedgerKeyAgent.createDeviceConnection(t.transport)}catch(r){if("DisconnectedDeviceDuringOperation"===r.name){return await LedgerKeyAgent.establishDeviceConnection(e)}throw r}}static async getXpub({deviceConnection:e,communicationType:t,accountIndex:r,purpose:a}){try{const o=await LedgerKeyAgent.checkDeviceConnection(t,e);const i=`${a}'/${u.CardanoKeyConst.COIN_TYPE}'/${r}'`;const n=await o.getExtendedPublicKey({path:(0,P.str_to_path)(i)});const d=`${n.publicKeyHex}${n.chainCodeHex}`;return s.Bip32PublicKeyHex(d)}catch(c){if(28169===c.code){throw new m.AuthenticationError("Failed to export extended account public key",c)}throw transportTypedError(c)}}static async getAppVersion(e,t){const r=await LedgerKeyAgent.checkDeviceConnection(e,t);return await r.getVersion()}static async createWithDevice({chainId:e,accountIndex:t=0,communicationType:r,deviceConnection:s,purpose:a=u.KeyPurpose.STANDARD},o){const i=await LedgerKeyAgent.getHidDeviceList(r);const n=await (s?LedgerKeyAgent.checkDeviceConnection(r,s):LedgerKeyAgent.establishDeviceConnection(r,i[0]));const d=await LedgerKeyAgent.getXpub({accountIndex:t,communicationType:r,deviceConnection:n,purpose:a});return new LedgerKeyAgent({accountIndex:t,chainId:e,communicationType:r,deviceConnection:n,extendedAccountPublicKey:d,purpose:a},o)}static isKeyHashOrScriptHashVoter(e){return!!(null==e?void 0:e.some(e=>{switch(e.voter.type){case o.VoterType.COMMITTEE_KEY_HASH:case o.VoterType.COMMITTEE_SCRIPT_HASH:case o.VoterType.DREP_KEY_HASH:case o.VoterType.DREP_SCRIPT_HASH:case o.VoterType.STAKE_POOL_KEY_HASH:return true;default:return false}}))}static getSigningMode(e){if(e.certificates){for(const t of e.certificates){if(t.type===o.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolOwners.some(e=>e.type===o.PoolOwnerType.DEVICE_OWNED))return o.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER;if(t.type===o.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolKey.type===o.PoolKeyType.DEVICE_OWNED)return o.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR}}if(e.collateralInputs||LedgerKeyAgent.isKeyHashOrScriptHashVoter(e.votingProcedures)){return o.TransactionSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return o.TransactionSigningMode.MULTISIG_TRANSACTION}return o.TransactionSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r}){try{var i;const n=e.toCore();const d=e.hash();const c=await this.derivePublicKey(p.DREP_KEY_DERIVATION_PATH);const l=(await a.Ed25519PublicKey.fromHex(c).hash()).hex();const f=e.outputs().map(e=>e.isBabbageOutput()?o.TxOutputFormat.MAP_BABBAGE:o.TxOutputFormat.ARRAY_LEGACY);const h=(null===(i=e.collateralReturn())||void 0===i?void 0:i.isBabbageOutput())?o.TxOutputFormat.MAP_BABBAGE:o.TxOutputFormat.ARRAY_LEGACY;const _=await (0,S.toLedgerTx)(n,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:h,dRepKeyHashHex:l,knownAddresses:t,outputsFormat:f,txInKeyPathMap:r});const y=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,A,"f"),this.deviceConnection);const g=LedgerKeyAgent.getSigningMode(_);const b=await y.signTransaction({options:{tagCborSets:e.hasTaggedSets()},signingMode:g,tx:_,...g===o.TransactionSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessPaths:R}});if(!(0,w.areStringsEqualInConstantTime)(b.txHashHex,d)){throw new v.HwMappingError("Ledger computed a different transaction id")}return new Map(await Promise.all(b.witnesses.map(async e=>{const t=await this.derivePublicKey({index:e.path[u.Cip1852PathLevelIndexes.INDEX],role:e.path[u.Cip1852PathLevelIndexes.ROLE]});const r=s.Ed25519SignatureHex(e.witnessSignatureHex);return[t,r]})))}catch(P){if(28169===P.code){throw new m.AuthenticationError("Transaction signing aborted",P)}throw transportTypedError(P)}}async signCip8Data(e){try{const t=await this.derivePublicKey(p.DREP_KEY_DERIVATION_PATH);const r=(await a.Ed25519PublicKey.fromHex(t).hash()).hex();const{signingPath:n,addressParams:c,addressFieldType:l}=getDerivationPath(e.signWith,e.knownAddresses,this.accountIndex,this.purpose,r);const u=l===o.MessageAddressFieldType.ADDRESS&&c?{address:c,addressFieldType:o.MessageAddressFieldType.ADDRESS,hashPayload:false,messageHex:e.payload,network:{networkId:this.chainId.networkId,protocolMagic:this.chainId.networkMagic},preferHexDisplay:false,signingPath:n}:{addressFieldType:o.MessageAddressFieldType.KEY_HASH,hashPayload:false,messageHex:e.payload,preferHexDisplay:false,signingPath:n};const h=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,A,"f"),this.deviceConnection);const v=await h.signMessage(u);const y=d.hexToBytes((0,g.HexBlob)(v.addressFieldHex));const w=i.HeaderMap.new();w.set_algorithm_id(i.Label.from_algorithm_id(i.AlgorithmId.EdDSA));w.set_header(_.CoseLabel.address,i.CBORValue.new_bytes(y));const b=i.COSESign1Builder.new(i.Headers.new(i.ProtectedHeaderMap.new(w),i.HeaderMap.new()),d.hexToBytes(e.payload),false);const P=b.build(k.from(v.signatureHex,"hex"));const S=f.createCoseKey(y,s.Ed25519PublicKeyHex(v.signingPublicKeyHex));return{key:d.bytesToHex(S.to_bytes()),signature:d.bytesToHex(P.to_bytes())}}catch(C){if(28169===C.code){throw new m.AuthenticationError("Transaction signing aborted",C)}throw transportTypedError(C)}}async signBlob(){throw new c.NotImplementedError("Operation not supported!")}async exportRootPrivateKey(){throw new c.NotImplementedError("Operation not supported!")}constructor({deviceConnection:e,...t},r){super({...t,__typename:u.KeyAgentType.Ledger},r);A.set(this,void 0);this.deviceConnection=e;__classPrivateFieldSet(this,A,t.communicationType,"f")}}LedgerKeyAgent.deviceConnections=[]},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{DeviceType:()=>v,LedgerKeyAgent:()=>m.LedgerKeyAgent,LedgerTxTransformer:()=>l.LedgerTxTransformer,getKnownAddress:()=>o.getKnownAddress,mapAuxiliaryData:()=>a.mapAuxiliaryData,mapCerts:()=>o.mapCerts,mapCollateralTxIns:()=>n.mapCollateralTxIns,mapCollateralTxOut:()=>i.mapCollateralTxOut,mapReferenceInputs:()=>d.mapReferenceInputs,mapRequiredSigners:()=>c.mapRequiredSigners,mapTokenMap:()=>s.mapTokenMap,mapTxIns:()=>u.mapTxIns,mapTxOuts:()=>f.mapTxOuts,mapVotingProcedures:()=>h.mapVotingProcedures,mapWithdrawals:()=>p.mapWithdrawals,poolRegistrationCertificate:()=>o.poolRegistrationCertificate,stakeDelegationCertificate:()=>o.stakeDelegationCertificate,toLedgerTx:()=>l.toLedgerTx,toRequiredSigner:()=>c.toRequiredSigner,toTxIn:()=>u.toTxIn,toTxOut:()=>f.toTxOut,toVoteOption:()=>h.toVoteOption,toVoter:()=>h.toVoter,toVotes:()=>h.toVotes,toVotingProcedure:()=>h.toVotingProcedure,toWithdrawal:()=>p.toWithdrawal,voteDelegationCertificate:()=>o.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var p=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var m=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js");var v;(function(e){e["Ledger"]="Ledger"})(v||(v={}))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameHex.length===t.assetNameHex.length){return e.assetNameHex>t.assetNameHex?1:-1}if(e.assetNameHex.length>t.assetNameHex.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyIdHex>t.policyIdHex?1:-1;const tokenMapToAssetGroup=e=>{const t=new Map;for(const[r,a]of e.entries()){const o=s.AssetId.getPolicyId(r);const i=s.AssetId.getAssetName(r);if(!t.has(o))t.set(o,new Array);t.get(o).push({amount:a,assetNameHex:i})}const n=[];for(const[d,c]of t.entries()){c.sort(compareAssetNameCanonically);n.push({policyIdHex:d,tokens:c})}n.sort(comparePolicyIdCanonically);return n};const mapTokenMap=e=>{if(!e)return null;return tokenMapToAssetGroup(e)}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const toAuxiliaryData=e=>({params:{hashHex:e},type:s.TxAuxiliaryDataType.ARBITRARY_HASH});const mapAuxiliaryData=e=>e?toAuxiliaryData(e):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getKnownAddress:()=>getKnownAddress,mapCerts:()=>mapCerts,poolRegistrationCertificate:()=>poolRegistrationCertificate,stakeDelegationCertificate:()=>stakeDelegationCertificate,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const mapAnchorToParams=e=>{return{..."anchor"in e&&(null==e?void 0:e.anchor)&&{anchor:{hashHex:e.anchor.dataHash,url:e.anchor.url}}}};const credentialMapper=(e,t,r)=>{let s;switch(t){case o.CredentialType.KeyHash:s=r?{keyPath:r,type:a.CredentialParamsType.KEY_PATH}:{keyHashHex:e.hash,type:a.CredentialParamsType.KEY_HASH};break;case o.CredentialType.ScriptHash:default:s={scriptHashHex:e.hash,type:a.CredentialParamsType.SCRIPT_HASH}}return s};const drepParamsMapper=(e,t)=>{let r;switch(t){case o.CredentialType.KeyHash:r={keyHashHex:e.hash,type:a.DRepParamsType.KEY_HASH};break;case o.CredentialType.ScriptHash:default:r={scriptHashHex:e.hash,type:a.DRepParamsType.SCRIPT_HASH}}return r};const getKnownAddress=(e,t)=>{return t?null==t?void 0:t.knownAddresses.find(t=>(0,u.areStringsEqualInConstantTime)(i.RewardAccount.toHash(t.rewardAccount),e.hash)):void 0};const getCredentialType=e=>{var t;const r=e?null===(t=o.Address.fromBech32(e.rewardAccount))||void 0===t?void 0:t.asReward():null;return r?r.getPaymentCredential().type:a.CredentialParamsType.SCRIPT_HASH};const stakeCredentialMapper=(e,t)=>{const r=getKnownAddress(e,t);const s=getCredentialType(r);const a=l.stakeKeyPathFromGroupedAddress(r);return credentialMapper(e,s,a)};const getStakeAddressCertificate=(e,t)=>({params:{stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.StakeRegistration?a.CertificateType.STAKE_REGISTRATION:a.CertificateType.STAKE_DEREGISTRATION});const getNewStakeAddressCertificate=(e,t)=>({params:{deposit:e.deposit,stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.Registration?a.CertificateType.STAKE_REGISTRATION_CONWAY:a.CertificateType.STAKE_DEREGISTRATION_CONWAY});const stakeDelegationCertificate=(e,t)=>({params:{poolKeyHashHex:d.PoolId.toKeyHash(e.poolId),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:a.CertificateType.STAKE_DELEGATION});const toPoolMetadata=e=>({metadataHashHex:e.hash,metadataUrl:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return l.stakeKeyPathFromGroupedAddress(r)};const poolRegistrationCertificate=(e,t)=>{const r=getPoolOperatorKeyPath(e.poolParameters.rewardAccount,t);const s=i.RewardAccount.toHash(e.poolParameters.rewardAccount);return{params:{cost:e.poolParameters.cost,margin:e.poolParameters.margin,metadata:e.poolParameters.metadataJson?toPoolMetadata(e.poolParameters.metadataJson):void 0,pledge:e.poolParameters.pledge,poolKey:r?{params:{path:r},type:a.PoolKeyType.DEVICE_OWNED}:{params:{keyHashHex:s},type:a.PoolKeyType.THIRD_PARTY},poolOwners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=i.RewardAccount.toHash(e);return r?{params:{stakingPath:r},type:a.PoolOwnerType.DEVICE_OWNED}:{params:{stakingKeyHashHex:s},type:a.PoolOwnerType.THIRD_PARTY}}),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{params:{ipv4:e.ipv4,ipv6:e.ipv6,portNumber:e.port},type:0};case"RelayByName":return{params:{dnsName:e.hostname,portNumber:e.port},type:1};case"RelayByNameMultihost":return{params:{dnsName:e.dnsName},type:1}}}),rewardAccount:r?{params:{path:r},type:a.PoolRewardAccountType.DEVICE_OWNED}:{params:{rewardAccountHex:o.Address.fromBech32(e.poolParameters.rewardAccount).toBytes()},type:a.PoolRewardAccountType.THIRD_PARTY},vrfKeyHashHex:e.poolParameters.vrf},type:a.CertificateType.STAKE_POOL_REGISTRATION}};const poolRetirementCertificate=(e,t)=>{const r=d.PoolId.toKeyHash(e.poolId);const s=null==t?void 0:t.knownAddresses.find(e=>(0,u.areStringsEqualInConstantTime)(i.RewardAccount.toHash(e.rewardAccount),r));const o=l.stakeKeyPathFromGroupedAddress(s);if(!o)throw new f.InvalidArgumentError("certificate","Missing key matching pool retirement certificate.");return{params:{poolKeyPath:o,retirementEpoch:e.epoch},type:a.CertificateType.STAKE_POOL_RETIREMENT}};const checkDrepPublicKeyAgainstCredential=(e,t)=>{if(!e||e!==s.Ed25519KeyHashHex(t)){throw new f.InvalidArgumentError("certificate","dRepPublicKey does not match certificate drep credential.")}};const drepRegistrationCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH)),deposit:e.deposit};return{params:r,type:e.__typename===n.CertificateType.RegisterDelegateRepresentative?a.CertificateType.DREP_REGISTRATION:a.CertificateType.DREP_DEREGISTRATION}};const updateDRepCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH))};return{params:r,type:a.CertificateType.DREP_UPDATE}};const drepMapper=e=>{if(c.isDRepAlwaysAbstain(e)){return{type:a.DRepParamsType.ABSTAIN}}if(c.isDRepAlwaysNoConfidence(e)){return{type:a.DRepParamsType.NO_CONFIDENCE}}if(c.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>({params:{dRep:drepMapper(e.dRep),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:a.CertificateType.VOTE_DELEGATION});const toCert=(e,t)=>{switch(e.__typename){case n.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDelegation:return stakeDelegationCertificate(e,t);case n.CertificateType.PoolRegistration:return poolRegistrationCertificate(e,t);case n.CertificateType.PoolRetirement:return poolRetirementCertificate(e,t);case n.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);case n.CertificateType.RegisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UnregisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UpdateDelegateRepresentative:return updateDRepCertificate(e,t);default:throw new f.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>{if(!e)return null;return e.map(e=>toCert(e,t))}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxIns:()=>mapCollateralTxIns});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");const mapCollateralTxIns=(e,t)=>e?(0,s.mapTxIns)(e,t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxOut:()=>mapCollateralTxOut});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");const mapCollateralTxOut=(e,t)=>e?(0,s.toTxOut)({index:0,isCollateral:true,txOut:e},t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapReferenceInputs:()=>mapReferenceInputs});const mapReferenceInputs=e=>e?e.map(e=>({outputIndex:e.index,path:null,txHashHex:e.txId.toString()})):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,s;const o=null===(s=null===(r=a.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential().hash;return!!o&&(0,i.areStringsEqualInConstantTime)(o.toString(),e)});const d=null==t?void 0:t.knownAddresses.find(t=>{const r=o.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,i.areStringsEqualInConstantTime)(r.toString(),e)});const c=r?n.paymentKeyPathFromGroupedAddress(r):null;const l=d?n.stakeKeyPathFromGroupedAddress(d):null;if(c){return{path:c,type:s.TxRequiredSignerType.PATH}}if(l){return{path:l,type:s.TxRequiredSignerType.PATH}}return{hashHex:e,type:s.TxRequiredSignerType.HASH}};const mapRequiredSigners=(e,t)=>e?e.map(e=>toRequiredSigner(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js":(e,t,r)=>{"use strict";r.d(t,{LedgerTxTransformer:()=>m,toLedgerTx:()=>toLedgerTx});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var p=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");const m={auxiliaryData:({auxiliaryDataHash:e})=>(0,a.mapAuxiliaryData)(e),certificates:({certificates:e},t)=>(0,o.mapCerts)(e,t),collateralInputs:({collaterals:e},t)=>(0,i.mapCollateralTxIns)(e,t),collateralOutput:({collateralReturn:e},t)=>(0,n.mapCollateralTxOut)(e,t),donation:({donation:e})=>e,fee:({fee:e})=>e,includeNetworkId:({networkId:e})=>!!e,inputs:({inputs:e},t)=>(0,u.mapTxIns)(e,t),mint:({mint:e})=>(0,l.mapTokenMap)(e),network:(e,t)=>({networkId:t.chainId.networkId,protocolMagic:t.chainId.networkMagic}),outputs:({outputs:e},t)=>(0,f.mapTxOuts)(e,t),referenceInputs:({referenceInputs:e})=>(0,d.mapReferenceInputs)(e),requiredSigners:({requiredExtraSignatures:e},t)=>(0,c.mapRequiredSigners)(e,t),scriptDataHashHex:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},totalCollateral:({totalCollateral:e})=>e,treasury:({treasuryValue:e})=>e,ttl:({validityInterval:e})=>{return null==e?void 0:e.invalidHereafter},validityIntervalStart:({validityInterval:e})=>{return null==e?void 0:e.invalidBefore},votingProcedures:({votingProcedures:e},t)=>(0,p.mapVotingProcedures)(e,t),withdrawals:({withdrawals:e},t)=>(0,h.mapWithdrawals)(e,t)};const toLedgerTx=(e,t)=>(0,s.transformObj)(e,m,t)},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTxIn:()=>toTxIn});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolveKeyPath=(e,{accountIndex:t,txInKeyPathMap:r})=>{const o=r[(0,s.TxInId)(e)];if(o){return a.accountKeyDerivationPathToBip32Path(t,o)}return null};const toTxIn=(e,t)=>({outputIndex:e.index,path:resolveKeyPath(e,t),txHashHex:e.txId});const mapTxIns=(e,t)=>e.map(e=>toTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toInlineDatum=e=>({datumHex:a.PlutusData.fromCore(e).toCbor(),type:s.DatumType.INLINE});const toDatumHash=e=>({datumHashHex:e.toString(),type:s.DatumType.HASH});const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const a=o.isScriptAddress(e.address);if(r&&!a){const n=l.paymentKeyPathFromGroupedAddress(r);const c=l.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing stake key key path.");return{params:{params:{spendingPath:n,stakingPath:c},type:s.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},type:s.TxOutputDestinationType.DEVICE_OWNED}}return{params:{addressHex:i.Address.fromBech32(e.address).toBytes()},type:s.TxOutputDestinationType.THIRD_PARTY}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return null;return t.toCbor()};const toTxOut=(e,t)=>{const{txOut:r,index:a,isCollateral:o}=e;const i=n.TransactionOutput.fromCore(r);const d=getScriptHex(i);const l=o?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[a];const u=l===s.TxOutputFormat.MAP_BABBAGE;var f;return{amount:r.value.coins,destination:toDestination(r,t),tokenBundle:(0,c.mapTokenMap)(r.value.assets),...u?{datum:r.datumHash?toDatumHash(r.datumHash):r.datum?toInlineDatum(r.datum):null,format:s.TxOutputFormat.MAP_BABBAGE,referenceScriptHex:d}:{datumHashHex:null!==(f=r.datumHash)&&void 0!==f?f:null,format:s.TxOutputFormat.ARRAY_LEGACY}}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{mapVotingProcedures:()=>mapVotingProcedures,toVoteOption:()=>toVoteOption,toVoter:()=>toVoter,toVotes:()=>toVotes,toVotingProcedure:()=>toVotingProcedure});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toVoter=(e,t)=>{if(!t)throw new o.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");switch(e.__typename){case"ccHotKeyHash":return{keyHashHex:e.credential.hash,type:a.VoterType.COMMITTEE_KEY_HASH};case"ccHotScriptHash":return{scriptHashHex:e.credential.hash,type:a.VoterType.COMMITTEE_SCRIPT_HASH};case"dRepKeyHash":if(!t.dRepKeyHashHex||t.dRepKeyHashHex!==s.Ed25519KeyHashHex(e.credential.hash)){throw new Error("Foreign voter drepKeyHash")}return{keyPath:i.accountKeyDerivationPathToBip32Path(t.accountIndex,i.DREP_KEY_DERIVATION_PATH),type:a.VoterType.DREP_KEY_PATH};case"dRepScriptHash":return{scriptHashHex:e.credential.hash,type:a.VoterType.DREP_SCRIPT_HASH};case"stakePoolKeyHash":return{keyHashHex:e.credential.hash,type:a.VoterType.STAKE_POOL_KEY_HASH};default:throw new Error("Unsupported voter type")}};const toVoteOption=e=>{switch(e){case 0:return a.VoteOption.NO;case 1:return a.VoteOption.YES;case 2:return a.VoteOption.ABSTAIN;default:throw new Error("Unsupported vote type")}};const toVotes=e=>e.map(e=>({govActionId:{govActionIndex:e.actionId.actionIndex,txHashHex:e.actionId.id},votingProcedure:{...e.votingProcedure.anchor&&{anchor:{hashHex:e.votingProcedure.anchor.dataHash,url:e.votingProcedure.anchor.url}},vote:toVoteOption(e.votingProcedure.vote)}}));const toVotingProcedure=(e,t)=>({voter:toVoter(e.voter,t),votes:toVotes(e.votes)});const mapVotingProcedures=(e,t)=>e?e.map(e=>toVotingProcedure(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toWithdrawal:()=>toWithdrawal});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const resolveKeyPath=(e,t)=>{if(!t)return null;const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());if(r&&r.stakeKeyDerivationPath){return[o.harden(i.CardanoKeyConst.PURPOSE),o.harden(i.CardanoKeyConst.COIN_TYPE),o.harden(r.accountIndex),r.stakeKeyDerivationPath.role,r.stakeKeyDerivationPath.index]}return null};const toWithdrawal=(e,t)=>{const r=a.Address.fromString(e.stakeAddress);const o=null==r?void 0:r.asReward();if(!o)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let i;if((0,d.areNumbersEqualInConstantTime)(o.getPaymentCredential().type,a.CredentialType.KeyHash)){const c=resolveKeyPath(o,null==t?void 0:t.knownAddresses);i=c?{amount:e.quantity,stakeCredential:{keyPath:c,type:s.CredentialParamsType.KEY_PATH}}:{amount:e.quantity,stakeCredential:{keyHashHex:o.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.KEY_HASH}}}else{i={amount:e.quantity,stakeCredential:{scriptHashHex:o.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.SCRIPT_HASH}}}return i};const mapWithdrawals=(e,t)=>{if(!e)return null;e.sort((e,t)=>{var r,s;const o=null===(r=a.Address.fromString(e.stakeAddress))||void 0===r?void 0:r.asReward();const i=null===(s=a.Address.fromString(t.stakeAddress))||void 0===s?void 0:s.asReward();if(!o||!i)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");return o.toAddress().toBytes()>i.toAddress().toBytes()?1:-1});return e.map(e=>toWithdrawal(e,t))}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/TrezorKeyAgent.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var c;Object.defineProperty(t,"__esModule",{value:true});t.TrezorKeyAgent=void 0;const l=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const u=o(r("../../node_modules/@trezor/connect/lib/index-browser.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/tx.js");const v=d(r("../../node_modules/@trezor/connect-web/lib/index.js"));const _=u.default;const y=v.default.default?v.default.default:v.default;const transportTypedError=e=>new p.errors.AuthenticationError("Trezor transport failed",new p.errors.TransportError("Trezor transport failed",e));const getTrezorConnect=e=>e===p.CommunicationType.Node?_:y;const stakeCredentialCert=e=>e===u.PROTO.CardanoCertificateType.STAKE_REGISTRATION||e===u.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION||e===u.PROTO.CardanoCertificateType.STAKE_DELEGATION;const containsOnlyScriptHashCredentials=e=>{var t;if(e.certificates){for(const r of e.certificates)if(!stakeCredentialCert(r.type)||!r.scriptHash)return false}return!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!e.scriptHash))};const w=[p.util.accountKeyDerivationPathToBip32Path(0,{index:0,role:p.KeyRole.External},p.KeyPurpose.MULTI_SIG)];const isMultiSig=e=>{const t=!e.inputs.some(e=>e.path);const r=!e.outputs.some(e=>"addressParameters"in e);return t&&r&&!e.collateralInputs&&!e.collateralReturn&&!e.totalCollateral&&!e.referenceInputs&&containsOnlyScriptHashCredentials(e)};class TrezorKeyAgent extends p.KeyAgentBase{static async initializeTrezorTransport({manifest:e,communicationType:t,silentMode:r=false,lazyLoad:s=false,shouldHandlePassphrase:a=false}){const o=getTrezorConnect(t);try{await o.init({lazyLoad:t!==p.CommunicationType.Node&&s,manifest:e,popup:t!==p.CommunicationType.Node&&!r});if(a)o.on(u.UI_EVENT,e=>{if(e.type===u.UI.REQUEST_PASSPHRASE&&e.payload.device)o.uiResponse({payload:{passphraseOnDevice:true,save:true,value:""},type:u.UI.RECEIVE_PASSPHRASE})});return true}catch(i){if("Init_AlreadyInitialized"===i.code)return true;throw transportTypedError(i)}}static async checkDeviceConnection(e){const t=getTrezorConnect(e);try{const r=await t.getFeatures();if(!r.success){throw new p.errors.TransportError("Failed to get device",r.payload)}return r.payload}catch(s){throw transportTypedError(s)}}static async getXpub({accountIndex:e,communicationType:t,purpose:r}){try{await TrezorKeyAgent.checkDeviceConnection(t);const s=`m/${r}'/${p.CardanoKeyConst.COIN_TYPE}'/${e}'`;const a=getTrezorConnect(t);const o=await a.cardanoGetPublicKey({path:s,showOnTrezor:true});if(!o.success){throw new p.errors.TransportError("Failed to export extended account public key",o.payload)}return l.Bip32PublicKeyHex(o.payload.publicKey)}catch(i){throw transportTypedError(i)}}static async createWithDevice({chainId:e,accountIndex:t=0,trezorConfig:r,purpose:s=p.KeyPurpose.STANDARD},a){const o=await TrezorKeyAgent.initializeTrezorTransport(r);const i=await TrezorKeyAgent.getXpub({accountIndex:t,communicationType:r.communicationType,purpose:s});return new TrezorKeyAgent({accountIndex:t,chainId:e,extendedAccountPublicKey:i,isTrezorInitialized:o,purpose:s,trezorConfig:r},a)}static matchSigningMode(e){if(e.certificates){for(const t of e.certificates){var r;if(t.type===u.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION&&(null===(r=t.poolParameters)||void 0===r?void 0:r.owners.some(e=>e.stakingKeyPath)))return u.PROTO.CardanoTxSigningMode.POOL_REGISTRATION_AS_OWNER}}if(e.collateralInputs||e.collateralReturn||e.totalCollateral||e.referenceInputs){return u.PROTO.CardanoTxSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return u.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION}return u.PROTO.CardanoTxSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r,scripts:s}){try{var a;await this.isTrezorInitialized;const o=e.toCore();const i=e.hash();const d=e.outputs().map(e=>e.isBabbageOutput()?u.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:u.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY);const f=(null===(a=e.collateralReturn())||void 0===a?void 0:a.isBabbageOutput())?u.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:u.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY;const v=await (0,m.txToTrezor)(o,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:f,knownAddresses:t,outputsFormat:d,tagCborSets:e.hasTaggedSets(),txInKeyPathMap:r});const _=TrezorKeyAgent.matchSigningMode(v);const y=getTrezorConnect(n(this,c,"f"));const g=await y.cardanoSignTransaction({...v,..._===u.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessRequests:w},signingMode:_});const b=await Promise.all(p.util.ownSignatureKeyPaths(o,t,r,void 0,s).map(e=>this.derivePublicKey(e)));if(!g.success){throw new p.errors.TransportError("Failed to export extended account public key",g.payload)}const P=g.payload;if(!(0,h.areStringsEqualInConstantTime)(P.hash,i)){throw new p.errors.HwMappingError("Trezor computed a different transaction id")}return new Map(await Promise.all(P.witnesses.filter(e=>b.includes(l.Ed25519PublicKeyHex(e.pubKey))).map(async e=>{const t=l.Ed25519PublicKeyHex(e.pubKey);const r=l.Ed25519SignatureHex(e.signature);return[t,r]})))}catch(S){if("Failure_ActionCancelled"===S.innerError.code){throw new p.errors.AuthenticationError("Transaction signing aborted",S)}throw transportTypedError(S)}}async signBlob(){throw new f.NotImplementedError("signBlob")}async signCip8Data(){throw new f.NotImplementedError("signCip8Data")}async exportRootPrivateKey(){throw new f.NotImplementedError("Operation not supported!")}constructor({isTrezorInitialized:e,...t},r){super({...t,__typename:p.KeyAgentType.Trezor},r);c.set(this,void 0);if(!e)this.isTrezorInitialized=TrezorKeyAgent.initializeTrezorTransport(t.trezorConfig);i(this,c,t.trezorConfig.communicationType,"f")}}t.TrezorKeyAgent=TrezorKeyAgent;c=new WeakMap},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/index.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/TrezorKeyAgent.js"),t)},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/additionalWitnessRequests.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.mapAdditionalWitnessRequests=void 0;const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/keyPaths.js");const i=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const n=s(r("../../node_modules/lodash/isArray.js"));const d=s(r("../../node_modules/lodash/uniq.js"));const mapAdditionalWitnessRequests=(e,t)=>{var r;const s=(0,d.default)(e.map(e=>(0,o.resolvePaymentKeyPathForTxIn)(e,t)).filter(a.isNotNil).filter(n.default));const c=[...s];if(null==t?void 0:null===(r=t.knownAddresses)||void 0===r?void 0:r.length){const l=i.util.stakeKeyPathFromGroupedAddress(t.knownAddresses[0]);if(l)c.push(l)}return c};t.mapAdditionalWitnessRequests=mapAdditionalWitnessRequests},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/assets.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTokenMap=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameBytes.length===t.assetNameBytes.length){return e.assetNameBytes>t.assetNameBytes?1:-1}if(e.assetNameBytes.length>t.assetNameBytes.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyId>t.policyId?1:-1;const tokenMapToAssetGroup=(e,t)=>{const r=new Map;for(const[a,o]of e.entries()){const i=s.Cardano.AssetId.getPolicyId(a);const n=s.Cardano.AssetId.getAssetName(a);if(!r.has(i))r.set(i,[]);r.get(i).push({assetNameBytes:n,...t?{mintAmount:o.toString()}:{amount:o.toString()}})}const d=[];for(const[c,l]of r.entries()){l.sort(compareAssetNameCanonically);d.push({policyId:c,tokenAmounts:l})}d.sort(comparePolicyIdCanonically);return d};const mapTokenMap=(e,t=false)=>e?tokenMapToAssetGroup(e,t):void 0;t.mapTokenMap=mapTokenMap},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/auxiliaryData.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapAuxiliaryData=void 0;const mapAuxiliaryData=e=>({cVoteRegistrationParameters:void 0,hash:e});t.mapAuxiliaryData=mapAuxiliaryData},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/certificates.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapCerts=t.getPoolRegistrationCertificate=t.voteDelegationCertificate=t.getNewStakeAddressCertificate=t.getStakeDelegationCertificate=t.getStakeAddressCertificate=void 0;const i=o(r("../../node_modules/@trezor/connect/lib/index-browser.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const getCertCredentials=(e,t)=>{var r;const s=null==t?void 0:t.find(t=>(0,c.areStringsEqualInConstantTime)(n.Cardano.RewardAccount.toHash(t.rewardAccount),e));const a=s?null===(r=n.Cardano.Address.fromBech32(s.rewardAccount))||void 0===r?void 0:r.asReward():null;if(!!a&&(0,c.areNumbersEqualInConstantTime)(null==a?void 0:a.getPaymentCredential().type,n.Cardano.CredentialType.KeyHash)){const o=d.util.stakeKeyPathFromGroupedAddress(s);return o?{path:o}:{keyHash:e}}return{scriptHash:e}};const toPoolMetadata=e=>({hash:e.hash,url:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return d.util.stakeKeyPathFromGroupedAddress(r)};const getStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const s=e.__typename===n.Cardano.CertificateType.StakeRegistration?i.PROTO.CardanoCertificateType.STAKE_REGISTRATION:i.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION;return{dRep:void 0,deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:s}};t.getStakeAddressCertificate=getStakeAddressCertificate;const getStakeDelegationCertificate=(e,t)=>{const r=n.Cardano.PoolId.toKeyHash(e.poolId);const s=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:void 0,deposit:void 0,keyHash:s.keyHash,path:s.path,pool:r,poolParameters:void 0,scriptHash:s.scriptHash,type:i.PROTO.CardanoCertificateType.STAKE_DELEGATION}};t.getStakeDelegationCertificate=getStakeDelegationCertificate;const getNewStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const s=e.__typename===n.Cardano.CertificateType.Registration?i.PROTO.CardanoCertificateType.STAKE_REGISTRATION_CONWAY:i.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION_CONWAY;return{dRep:void 0,deposit:e.deposit.toString(),keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:s}};t.getNewStakeAddressCertificate=getNewStakeAddressCertificate;const drepParamsMapper=(e,t)=>{let r;switch(t){case n.Cardano.CredentialType.KeyHash:r={keyHash:e.hash,type:i.PROTO.CardanoDRepType.KEY_HASH};break;case n.Cardano.CredentialType.ScriptHash:default:r={scriptHash:e.hash,type:i.PROTO.CardanoDRepType.SCRIPT_HASH}}return r};const drepMapper=e=>{if(n.Cardano.isDRepAlwaysAbstain(e)){return{type:i.PROTO.CardanoDRepType.ABSTAIN}}if(n.Cardano.isDRepAlwaysNoConfidence(e)){return{type:i.PROTO.CardanoDRepType.NO_CONFIDENCE}}if(n.Cardano.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:drepMapper(e.dRep),deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:i.PROTO.CardanoCertificateType.VOTE_DELEGATION}};t.voteDelegationCertificate=voteDelegationCertificate;const getPoolRegistrationCertificate=(e,t)=>{if(!e.poolParameters.metadataJson)throw new c.InvalidArgumentError("certificate","Missing pool registration pool metadata.");return{dRep:void 0,deposit:void 0,keyHash:void 0,path:void 0,pool:void 0,poolParameters:{cost:e.poolParameters.cost.toString(),margin:{denominator:e.poolParameters.margin.denominator.toString(),numerator:e.poolParameters.margin.numerator.toString()},metadata:toPoolMetadata(e.poolParameters.metadataJson),owners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=n.Cardano.RewardAccount.toHash(e);return r?{stakingKeyPath:r}:{stakingKeyHash:s}}),pledge:e.poolParameters.pledge.toString(),poolId:n.Cardano.PoolId.toKeyHash(e.poolParameters.id),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{ipv4Address:e.ipv4,ipv6Address:e.ipv6,port:e.port,type:i.PROTO.CardanoPoolRelayType.SINGLE_HOST_IP};case"RelayByName":return{hostName:e.hostname,port:e.port,type:i.PROTO.CardanoPoolRelayType.SINGLE_HOST_NAME};case"RelayByNameMultihost":return{hostName:e.dnsName,type:i.PROTO.CardanoPoolRelayType.MULTIPLE_HOST_NAME};default:throw new c.InvalidArgumentError("certificate","Unknown relay type.")}}),rewardAccount:e.poolParameters.rewardAccount,vrfKeyHash:e.poolParameters.vrf},scriptHash:void 0,type:i.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION}};t.getPoolRegistrationCertificate=getPoolRegistrationCertificate;const toCert=(e,r)=>{switch(e.__typename){case n.Cardano.CertificateType.StakeRegistration:return(0,t.getStakeAddressCertificate)(e,r);case n.Cardano.CertificateType.StakeDeregistration:return(0,t.getStakeAddressCertificate)(e,r);case n.Cardano.CertificateType.StakeDelegation:return(0,t.getStakeDelegationCertificate)(e,r);case n.Cardano.CertificateType.PoolRegistration:return(0,t.getPoolRegistrationCertificate)(e,r);case n.Cardano.CertificateType.Registration:return(0,t.getNewStakeAddressCertificate)(e,r);case n.Cardano.CertificateType.Unregistration:return(0,t.getNewStakeAddressCertificate)(e,r);case n.Cardano.CertificateType.VoteDelegation:return(0,t.voteDelegationCertificate)(e,r);default:throw new c.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>e.map(e=>toCert(e,t));t.mapCerts=mapCerts},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/keyPaths.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/txIn.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/txOut.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/withdrawals.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/certificates.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/auxiliaryData.js"),t);a(r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/requiredSigners.js"),t)},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/keyPaths.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveStakeKeyPath=t.resolvePaymentKeyPathForTxIn=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const resolvePaymentKeyPathForTxIn=(e,t)=>{if(!t)return;const r=null==t?void 0:t.txInKeyPathMap[(0,s.TxInId)(e)];if(r){return s.util.accountKeyDerivationPathToBip32Path(t.accountIndex,r)}};t.resolvePaymentKeyPathForTxIn=resolvePaymentKeyPathForTxIn;const resolveStakeKeyPath=(e,t)=>{const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());return s.util.stakeKeyPathFromGroupedAddress(r)};t.resolveStakeKeyPath=resolveStakeKeyPath},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/requiredSigners.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapRequiredSigners=t.toRequiredSigner=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,o;const i=null===(o=null===(r=s.Cardano.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===o?void 0:o.getPaymentCredential().hash;return!!i&&(0,a.areStringsEqualInConstantTime)(i.toString(),e)});const i=null==t?void 0:t.knownAddresses.find(t=>{const r=s.Cardano.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,a.areStringsEqualInConstantTime)(r.toString(),e)});const n=r?o.util.paymentKeyPathFromGroupedAddress(r):null;const d=i?o.util.stakeKeyPathFromGroupedAddress(i):null;if(n){return{keyHash:void 0,keyPath:n}}if(d){return{keyHash:void 0,keyPath:d}}return{keyHash:e,keyPath:void 0}};t.toRequiredSigner=toRequiredSigner;const mapRequiredSigners=(e,r)=>e.map(e=>(0,t.toRequiredSigner)(e,r));t.mapRequiredSigners=mapRequiredSigners},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/tx.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.txToTrezor=t.trezorTxTransformer=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/additionalWitnessRequests.js");const o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/index.js");const i=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/assets.js");t.trezorTxTransformer={additionalWitnessRequests:({inputs:e},t)=>(0,a.mapAdditionalWitnessRequests)(e,t),auxiliaryData:({auxiliaryDataHash:e})=>e?(0,o.mapAuxiliaryData)(e):void 0,certificates:({certificates:e},t)=>e?(0,o.mapCerts)(e,t):void 0,collateralInputs:({collaterals:e},t)=>e?(0,o.mapTxIns)(e,t):void 0,collateralReturn:({collateralReturn:e},t)=>e?(0,o.toTxOut)({index:0,isCollateral:true,txOut:e},t):void 0,fee:({fee:e})=>e.toString(),inputs:({inputs:e},t)=>(0,o.mapTxIns)(e,t),mint:({mint:e})=>(0,i.mapTokenMap)(e,true),networkId:(e,t)=>t.chainId.networkId,outputs:({outputs:e},t)=>(0,o.mapTxOuts)(e,t),protocolMagic:(e,t)=>t.chainId.networkMagic,referenceInputs:({referenceInputs:e},t)=>e?(0,o.mapTxIns)(e,t):void 0,requiredSigners:({requiredExtraSignatures:e},t)=>e?(0,o.mapRequiredSigners)(e,t):void 0,scriptDataHash:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},tagCborSets:(e,t)=>t.tagCborSets,totalCollateral:({totalCollateral:e})=>{return null==e?void 0:e.toString()},ttl:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidHereafter)||void 0===t?void 0:t.toString()},validityIntervalStart:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidBefore)||void 0===t?void 0:t.toString()},withdrawals:({withdrawals:e},t)=>(0,o.mapWithdrawals)(e,t)};const txToTrezor=(e,r)=>(0,s.transformObj)(e,t.trezorTxTransformer,r);t.txToTrezor=txToTrezor},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/txIn.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTxIns=t.toTrezorTxIn=void 0;const s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/keyPaths.js");const toTrezorTxIn=(e,t)=>{const r=(0,s.resolvePaymentKeyPathForTxIn)(e,t);return{path:r,prev_hash:e.txId,prev_index:e.index}};t.toTrezorTxIn=toTrezorTxIn;const mapTxIns=(e,r)=>e.map(e=>(0,t.toTrezorTxIn)(e,r));t.mapTxIns=mapTxIns},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/txOut.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.mapTxOuts=t.toTxOut=void 0;const i=o(r("../../node_modules/@trezor/connect/lib/index-browser.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/assets.js");const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const s=n.Cardano.util.isScriptAddress(e.address);if(!r||s){return{address:e.address}}const a=d.util.paymentKeyPathFromGroupedAddress(r);const o=d.util.stakeKeyPathFromGroupedAddress(r);if(!o)throw new c.InvalidArgumentError("txOut","Missing staking key key path.");return{addressParameters:{addressType:i.PROTO.CardanoAddressType.BASE,path:a,stakingPath:o}}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return;return t.toCbor()};const getInlineDatum=e=>n.Serialization.PlutusData.fromCore(e).toCbor();const toTxOut=(e,t)=>{var r;const{txOut:s,index:a,isCollateral:o}=e;const d=n.Serialization.TransactionOutput.fromCore(s);const c=getScriptHex(d);const u=o?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[a];const f=u===i.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE;return{...toDestination(s,t),amount:s.value.coins.toString(),datumHash:null===(r=s.datumHash)||void 0===r?void 0:r.toString(),format:u,inlineDatum:f&&s.datum?getInlineDatum(s.datum):void 0,referenceScript:f?c:void 0,tokenBundle:(0,l.mapTokenMap)(s.value.assets)}};t.toTxOut=toTxOut;const mapTxOuts=(e,r)=>e.map((e,s)=>(0,t.toTxOut)({index:s,isCollateral:false,txOut:e},r));t.mapTxOuts=mapTxOuts},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/withdrawals.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapWithdrawals=t.toTrezorWithdrawal=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/transformers/keyPaths.js");const toTrezorWithdrawal=(e,t)=>{const r=s.Cardano.Address.fromString(e.stakeAddress);const i=null==r?void 0:r.asReward();if(!i)throw new a.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let n;if((0,a.areNumbersEqualInConstantTime)(i.getPaymentCredential().type,s.Cardano.CredentialType.KeyHash)){const d=(null==t?void 0:t.knownAddresses)?(0,o.resolveStakeKeyPath)(i,t.knownAddresses):null;n=d?{amount:e.quantity.toString(),keyHash:void 0,path:d,scriptHash:void 0}:{amount:e.quantity.toString(),keyHash:i.getPaymentCredential().hash.toString(),path:void 0,scriptHash:void 0}}else{n={amount:e.quantity.toString(),keyHash:void 0,path:void 0,scriptHash:i.getPaymentCredential().hash.toString()}}return n};t.toTrezorWithdrawal=toTrezorWithdrawal;const mapWithdrawals=(e,r)=>e?e.map(e=>(0,t.toTrezorWithdrawal)(e,r)):void 0;t.mapWithdrawals=mapWithdrawals},"../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{TrezorKeyAgent:()=>TrezorKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@trezor/connect/lib/index-browser.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var v=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var _=r("../../node_modules/lodash/isArray.js");var y=r("../../node_modules/lodash/uniq.js");const mapAdditionalWitnessRequests=(e,t)=>{var r;const s=y(e.map(e=>(0,v.resolvePaymentKeyPathForTxIn)(e,t)).filter(m.isNotNil).filter(_));const a=[...s];if(null==t?void 0:null===(r=t.knownAddresses)||void 0===r?void 0:r.length){const o=c.stakeKeyPathFromGroupedAddress(t.knownAddresses[0]);if(o)a.push(o)}return a};var w=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var g=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var b=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var P=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var S=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var C=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var T=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const k={additionalWitnessRequests:({inputs:e},t)=>mapAdditionalWitnessRequests(e,t),auxiliaryData:({auxiliaryDataHash:e})=>e?(0,w.mapAuxiliaryData)(e):void 0,certificates:({certificates:e},t)=>e?(0,g.mapCerts)(e,t):void 0,collateralInputs:({collaterals:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,collateralReturn:({collateralReturn:e},t)=>e?(0,P.toTxOut)({index:0,isCollateral:true,txOut:e},t):void 0,fee:({fee:e})=>e.toString(),inputs:({inputs:e},t)=>(0,b.mapTxIns)(e,t),mint:({mint:e})=>(0,T.mapTokenMap)(e,true),networkId:(e,t)=>t.chainId.networkId,outputs:({outputs:e},t)=>(0,P.mapTxOuts)(e,t),protocolMagic:(e,t)=>t.chainId.networkMagic,referenceInputs:({referenceInputs:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,requiredSigners:({requiredExtraSignatures:e},t)=>e?(0,S.mapRequiredSigners)(e,t):void 0,scriptDataHash:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},tagCborSets:(e,t)=>t.tagCborSets,totalCollateral:({totalCollateral:e})=>{return null==e?void 0:e.toString()},ttl:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidHereafter)||void 0===t?void 0:t.toString()},validityIntervalStart:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidBefore)||void 0===t?void 0:t.toString()},withdrawals:({withdrawals:e},t)=>(0,C.mapWithdrawals)(e,t)};const txToTrezor=(e,t)=>(0,h.transformObj)(e,k,t);var A=r("../../node_modules/@trezor/connect-web/lib/index.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var E;const j=a;const I=A["default"]?A["default"]:A;const transportTypedError=e=>new i.AuthenticationError("Trezor transport failed",new n.TransportError("Trezor transport failed",e));const getTrezorConnect=e=>e===d.CommunicationType.Node?j:I;const stakeCredentialCert=e=>e===a.PROTO.CardanoCertificateType.STAKE_REGISTRATION||e===a.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION||e===a.PROTO.CardanoCertificateType.STAKE_DELEGATION;const containsOnlyScriptHashCredentials=e=>{var t;if(e.certificates){for(const r of e.certificates)if(!stakeCredentialCert(r.type)||!r.scriptHash)return false}return!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!e.scriptHash))};const x=[c.accountKeyDerivationPathToBip32Path(0,{index:0,role:d.KeyRole.External},d.KeyPurpose.MULTI_SIG)];const isMultiSig=e=>{const t=!e.inputs.some(e=>e.path);const r=!e.outputs.some(e=>"addressParameters"in e);return t&&r&&!e.collateralInputs&&!e.collateralReturn&&!e.totalCollateral&&!e.referenceInputs&&containsOnlyScriptHashCredentials(e)};class TrezorKeyAgent extends l.KeyAgentBase{static async initializeTrezorTransport({manifest:e,communicationType:t,silentMode:r=false,lazyLoad:s=false,shouldHandlePassphrase:o=false}){const i=getTrezorConnect(t);try{await i.init({lazyLoad:t!==d.CommunicationType.Node&&s,manifest:e,popup:t!==d.CommunicationType.Node&&!r});if(o)i.on(a.UI_EVENT,e=>{if(e.type===a.UI.REQUEST_PASSPHRASE&&e.payload.device)i.uiResponse({payload:{passphraseOnDevice:true,save:true,value:""},type:a.UI.RECEIVE_PASSPHRASE})});return true}catch(n){if("Init_AlreadyInitialized"===n.code)return true;throw transportTypedError(n)}}static async checkDeviceConnection(e){const t=getTrezorConnect(e);try{const r=await t.getFeatures();if(!r.success){throw new n.TransportError("Failed to get device",r.payload)}return r.payload}catch(s){throw transportTypedError(s)}}static async getXpub({accountIndex:e,communicationType:t,purpose:r}){try{await TrezorKeyAgent.checkDeviceConnection(t);const a=`m/${r}'/${d.CardanoKeyConst.COIN_TYPE}'/${e}'`;const o=getTrezorConnect(t);const i=await o.cardanoGetPublicKey({path:a,showOnTrezor:true});if(!i.success){throw new n.TransportError("Failed to export extended account public key",i.payload)}return s.Bip32PublicKeyHex(i.payload.publicKey)}catch(c){throw transportTypedError(c)}}static async createWithDevice({chainId:e,accountIndex:t=0,trezorConfig:r,purpose:s=d.KeyPurpose.STANDARD},a){const o=await TrezorKeyAgent.initializeTrezorTransport(r);const i=await TrezorKeyAgent.getXpub({accountIndex:t,communicationType:r.communicationType,purpose:s});return new TrezorKeyAgent({accountIndex:t,chainId:e,extendedAccountPublicKey:i,isTrezorInitialized:o,purpose:s,trezorConfig:r},a)}static matchSigningMode(e){if(e.certificates){for(const t of e.certificates){var r;if(t.type===a.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION&&(null===(r=t.poolParameters)||void 0===r?void 0:r.owners.some(e=>e.stakingKeyPath)))return a.PROTO.CardanoTxSigningMode.POOL_REGISTRATION_AS_OWNER}}if(e.collateralInputs||e.collateralReturn||e.totalCollateral||e.referenceInputs){return a.PROTO.CardanoTxSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return a.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION}return a.PROTO.CardanoTxSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r,scripts:o}){try{var d;await this.isTrezorInitialized;const c=e.toCore();const l=e.hash();const h=e.outputs().map(e=>e.isBabbageOutput()?a.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:a.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY);const m=(null===(d=e.collateralReturn())||void 0===d?void 0:d.isBabbageOutput())?a.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:a.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY;const v=await txToTrezor(c,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:m,knownAddresses:t,outputsFormat:h,tagCborSets:e.hasTaggedSets(),txInKeyPathMap:r});const _=TrezorKeyAgent.matchSigningMode(v);const y=getTrezorConnect(__classPrivateFieldGet(this,E,"f"));const w=await y.cardanoSignTransaction({...v,..._===a.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessRequests:x},signingMode:_});const g=await Promise.all(u.ownSignatureKeyPaths(c,t,r,void 0,o).map(e=>this.derivePublicKey(e)));if(!w.success){throw new n.TransportError("Failed to export extended account public key",w.payload)}const b=w.payload;if(!(0,p.areStringsEqualInConstantTime)(b.hash,l)){throw new f.HwMappingError("Trezor computed a different transaction id")}return new Map(await Promise.all(b.witnesses.filter(e=>g.includes(s.Ed25519PublicKeyHex(e.pubKey))).map(async e=>{const t=s.Ed25519PublicKeyHex(e.pubKey);const r=s.Ed25519SignatureHex(e.signature);return[t,r]})))}catch(P){if("Failure_ActionCancelled"===P.innerError.code){throw new i.AuthenticationError("Transaction signing aborted",P)}throw transportTypedError(P)}}async signBlob(){throw new o.NotImplementedError("signBlob")}async signCip8Data(){throw new o.NotImplementedError("signCip8Data")}async exportRootPrivateKey(){throw new o.NotImplementedError("Operation not supported!")}constructor({isTrezorInitialized:e,...t},r){super({...t,__typename:d.KeyAgentType.Trezor},r);E.set(this,void 0);if(!e)this.isTrezorInitialized=TrezorKeyAgent.initializeTrezorTransport(t.trezorConfig);__classPrivateFieldSet(this,E,t.trezorConfig.communicationType,"f")}}E=new WeakMap},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{TrezorKeyAgent:()=>l.TrezorKeyAgent,getNewStakeAddressCertificate:()=>n.getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>n.getPoolRegistrationCertificate,getStakeAddressCertificate:()=>n.getStakeAddressCertificate,getStakeDelegationCertificate:()=>n.getStakeDelegationCertificate,mapAuxiliaryData:()=>d.mapAuxiliaryData,mapCerts:()=>n.mapCerts,mapRequiredSigners:()=>c.mapRequiredSigners,mapTxIns:()=>a.mapTxIns,mapTxOuts:()=>o.mapTxOuts,mapWithdrawals:()=>i.mapWithdrawals,resolvePaymentKeyPathForTxIn:()=>s.resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>s.resolveStakeKeyPath,toRequiredSigner:()=>c.toRequiredSigner,toTrezorTxIn:()=>a.toTrezorTxIn,toTrezorWithdrawal:()=>i.toTrezorWithdrawal,toTxOut:()=>o.toTxOut,voteDelegationCertificate:()=>n.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var a=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var i=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var n=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var d=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js")},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameBytes.length===t.assetNameBytes.length){return e.assetNameBytes>t.assetNameBytes?1:-1}if(e.assetNameBytes.length>t.assetNameBytes.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyId>t.policyId?1:-1;const tokenMapToAssetGroup=(e,t)=>{const r=new Map;for(const[a,o]of e.entries()){const i=s.AssetId.getPolicyId(a);const n=s.AssetId.getAssetName(a);if(!r.has(i))r.set(i,[]);r.get(i).push({assetNameBytes:n,...t?{mintAmount:o.toString()}:{amount:o.toString()}})}const d=[];for(const[c,l]of r.entries()){l.sort(compareAssetNameCanonically);d.push({policyId:c,tokenAmounts:l})}d.sort(comparePolicyIdCanonically);return d};const mapTokenMap=(e,t=false)=>e?tokenMapToAssetGroup(e,t):void 0},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});const mapAuxiliaryData=e=>({cVoteRegistrationParameters:void 0,hash:e})},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getNewStakeAddressCertificate:()=>getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>getPoolRegistrationCertificate,getStakeAddressCertificate:()=>getStakeAddressCertificate,getStakeDelegationCertificate:()=>getStakeDelegationCertificate,mapCerts:()=>mapCerts,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getCertCredentials=(e,t)=>{var r;const s=null==t?void 0:t.find(t=>(0,l.areStringsEqualInConstantTime)(a.RewardAccount.toHash(t.rewardAccount),e));const i=s?null===(r=o.Address.fromBech32(s.rewardAccount))||void 0===r?void 0:r.asReward():null;if(!!i&&(0,l.areNumbersEqualInConstantTime)(null==i?void 0:i.getPaymentCredential().type,o.CredentialType.KeyHash)){const n=c.stakeKeyPathFromGroupedAddress(s);return n?{path:n}:{keyHash:e}}return{scriptHash:e}};const toPoolMetadata=e=>({hash:e.hash,url:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return c.stakeKeyPathFromGroupedAddress(r)};const getStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const a=e.__typename===i.CertificateType.StakeRegistration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION;return{dRep:void 0,deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:a}};const getStakeDelegationCertificate=(e,t)=>{const r=n.PoolId.toKeyHash(e.poolId);const a=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:void 0,deposit:void 0,keyHash:a.keyHash,path:a.path,pool:r,poolParameters:void 0,scriptHash:a.scriptHash,type:s.PROTO.CardanoCertificateType.STAKE_DELEGATION}};const getNewStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const a=e.__typename===i.CertificateType.Registration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION_CONWAY:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION_CONWAY;return{dRep:void 0,deposit:e.deposit.toString(),keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:a}};const drepParamsMapper=(e,t)=>{let r;switch(t){case o.CredentialType.KeyHash:r={keyHash:e.hash,type:s.PROTO.CardanoDRepType.KEY_HASH};break;case o.CredentialType.ScriptHash:default:r={scriptHash:e.hash,type:s.PROTO.CardanoDRepType.SCRIPT_HASH}}return r};const drepMapper=e=>{if(d.isDRepAlwaysAbstain(e)){return{type:s.PROTO.CardanoDRepType.ABSTAIN}}if(d.isDRepAlwaysNoConfidence(e)){return{type:s.PROTO.CardanoDRepType.NO_CONFIDENCE}}if(d.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:drepMapper(e.dRep),deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:s.PROTO.CardanoCertificateType.VOTE_DELEGATION}};const getPoolRegistrationCertificate=(e,t)=>{if(!e.poolParameters.metadataJson)throw new u.InvalidArgumentError("certificate","Missing pool registration pool metadata.");return{dRep:void 0,deposit:void 0,keyHash:void 0,path:void 0,pool:void 0,poolParameters:{cost:e.poolParameters.cost.toString(),margin:{denominator:e.poolParameters.margin.denominator.toString(),numerator:e.poolParameters.margin.numerator.toString()},metadata:toPoolMetadata(e.poolParameters.metadataJson),owners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=a.RewardAccount.toHash(e);return r?{stakingKeyPath:r}:{stakingKeyHash:s}}),pledge:e.poolParameters.pledge.toString(),poolId:n.PoolId.toKeyHash(e.poolParameters.id),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{ipv4Address:e.ipv4,ipv6Address:e.ipv6,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_IP};case"RelayByName":return{hostName:e.hostname,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_NAME};case"RelayByNameMultihost":return{hostName:e.dnsName,type:s.PROTO.CardanoPoolRelayType.MULTIPLE_HOST_NAME};default:throw new u.InvalidArgumentError("certificate","Unknown relay type.")}}),rewardAccount:e.poolParameters.rewardAccount,vrfKeyHash:e.poolParameters.vrf},scriptHash:void 0,type:s.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION}};const toCert=(e,t)=>{switch(e.__typename){case i.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case i.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case i.CertificateType.StakeDelegation:return getStakeDelegationCertificate(e,t);case i.CertificateType.PoolRegistration:return getPoolRegistrationCertificate(e,t);case i.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case i.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case i.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);default:throw new u.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>e.map(e=>toCert(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js":(e,t,r)=>{"use strict";r.d(t,{resolvePaymentKeyPathForTxIn:()=>resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>resolveStakeKeyPath});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolvePaymentKeyPathForTxIn=(e,t)=>{if(!t)return;const r=null==t?void 0:t.txInKeyPathMap[(0,s.TxInId)(e)];if(r){return a.accountKeyDerivationPathToBip32Path(t.accountIndex,r)}};const resolveStakeKeyPath=(e,t)=>{const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());return a.stakeKeyPathFromGroupedAddress(r)}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,a;const i=null===(a=null===(r=s.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===a?void 0:a.getPaymentCredential().hash;return!!i&&(0,o.areStringsEqualInConstantTime)(i.toString(),e)});const n=null==t?void 0:t.knownAddresses.find(t=>{const r=a.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,o.areStringsEqualInConstantTime)(r.toString(),e)});const d=r?i.paymentKeyPathFromGroupedAddress(r):null;const c=n?i.stakeKeyPathFromGroupedAddress(n):null;if(d){return{keyHash:void 0,keyPath:d}}if(c){return{keyHash:void 0,keyPath:c}}return{keyHash:e,keyPath:void 0}};const mapRequiredSigners=(e,t)=>e.map(e=>toRequiredSigner(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTrezorTxIn:()=>toTrezorTxIn});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorTxIn=(e,t)=>{const r=(0,s.resolvePaymentKeyPathForTxIn)(e,t);return{path:r,prev_hash:e.txId,prev_index:e.index}};const mapTxIns=(e,t)=>e.map(e=>toTrezorTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const o=a.isScriptAddress(e.address);if(!r||o){return{address:e.address}}const i=n.paymentKeyPathFromGroupedAddress(r);const c=n.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing staking key key path.");return{addressParameters:{addressType:s.PROTO.CardanoAddressType.BASE,path:i,stakingPath:c}}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return;return t.toCbor()};const getInlineDatum=e=>o.PlutusData.fromCore(e).toCbor();const toTxOut=(e,t)=>{var r;const{txOut:a,index:o,isCollateral:n}=e;const d=i.TransactionOutput.fromCore(a);const l=getScriptHex(d);const u=n?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[o];const f=u===s.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE;return{...toDestination(a,t),amount:a.value.coins.toString(),datumHash:null===(r=a.datumHash)||void 0===r?void 0:r.toString(),format:u,inlineDatum:f&&a.datum?getInlineDatum(a.datum):void 0,referenceScript:f?l:void 0,tokenBundle:(0,c.mapTokenMap)(a.value.assets)}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toTrezorWithdrawal:()=>toTrezorWithdrawal});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var i=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorWithdrawal=(e,t)=>{const r=s.Address.fromString(e.stakeAddress);const n=null==r?void 0:r.asReward();if(!n)throw new a.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let d;if((0,o.areNumbersEqualInConstantTime)(n.getPaymentCredential().type,s.CredentialType.KeyHash)){const c=(null==t?void 0:t.knownAddresses)?(0,i.resolveStakeKeyPath)(n,t.knownAddresses):null;d=c?{amount:e.quantity.toString(),keyHash:void 0,path:c,scriptHash:void 0}:{amount:e.quantity.toString(),keyHash:n.getPaymentCredential().hash.toString(),path:void 0,scriptHash:void 0}}else{d={amount:e.quantity.toString(),keyHash:void 0,path:void 0,scriptHash:n.getPaymentCredential().hash.toString()}}return d};const mapWithdrawals=(e,t)=>e?e.map(e=>toTrezorWithdrawal(e,t)):void 0},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.StaticChangeAddressResolver=void 0;const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class StaticChangeAddressResolver{async resolve(e){const t=await a(this,o,"f").call(this);if(0===t.length)throw new i.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){o.set(this,void 0);s(this,o,e,"f")}}t.StaticChangeAddressResolver=StaticChangeAddressResolver;o=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.GreedyInputSelector=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const d=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const c=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js");class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:l,outputs:u,constraints:f,implicitValue:p}=e;const h=new Set([...l,...s]);const m=(0,d.toValues)([...h]);const v=(0,d.toValues)([...u]);const _=(0,d.getCoinQuantity)(m);const y=(0,d.getCoinQuantity)(v);const w=(0,i.coalesceValueQuantities)(m).assets;const g=(0,i.coalesceValueQuantities)(v).assets;const b=(null==p?void 0:null===(t=p.coin)||void 0===t?void 0:t.input)||0n;const P=(null==p?void 0:null===(r=p.coin)||void 0===r?void 0:r.deposit)||0n;const S=(null==p?void 0:p.mint)||new Map;const C=_+b;const T=y+P;const k=(0,d.addTokenMaps)(w,S);const A=C-T;const E=(0,d.subtractTokenMaps)(k,g);if(0===h.size||T>C||(0,d.hasNegativeAssetValue)(E))throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);const j=await (0,c.splitChangeAndComputeFee)(h,u,A,E,f,a(this,o,"f").getChangeAddresses,0n);const I=j.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(A-j.fee<0n)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);if(h.size>await f.computeSelectionLimit({change:I,fee:j.fee,inputs:h,outputs:u})){throw new n.InputSelectionError(n.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:I,fee:j.fee,inputs:new Set([...h].sort(d.sortUtxoByTxIn)),outputs:u}}}constructor(e){o.set(this,void 0);s(this,o,e,"f")}}t.GreedyInputSelector=GreedyInputSelector;o=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.splitChangeAndComputeFee=t.adjustOutputsForFee=t.splitChange=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=.05;const distributeAssets=(e,t,r,s)=>{const n=[...e];if(0===n.length)return n;const d=(0,a.coalesceValueQuantities)(n.map(e=>e.value)).assets;if(!d||0===d.size)return n;for(const c of n)c.value.assets=void 0;let l=0;const u=n;const f=[];while(d.size>0){const p=new Map([...d.entries()].splice(0,1));const h=l%u.length;const m={...u[h].value};m.assets=(0,i.addTokenMaps)(m.assets,p);if((0,i.isValidValue)(m,t,r,s)){u[h].value=m;d.delete([...p.keys()][0])}else{f.push(...u.splice(h,1))}if(0===u.length)throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted);++l}return[...n,...f]};const getMinUtxoAmount=e=>{const t=new s.BigNumber(.03);let r=e.toString().length-1;let a="1";while(r>0){a+="0";--r}return BigInt(new s.BigNumber(a).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const a=e.value.coins;const o=getMinUtxoAmount(a);let i=a;let n=0n;const d=new Array;const c=new s.BigNumber(2);while(i>=o){const l=BigInt(new s.BigNumber(i.toString()).dividedBy(c).toFixed(0,0));const u=i-l;if(u<=o||u<=t({address:e.address,value:{assets:e.value.assets,coins:a-n}})+r){d.push(a-n);break}n+=l;d.push(l);i-=l}return d.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,a,d,c)=>{const l=await e();const u=[...l.values()].reduce((e,t)=>e+t,0);const f=new Map([...l.entries()].map(e=>[e[0],e[1]/u]));const p=[...f.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-p)>n)throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient);const h=[...f.entries()].map(e=>({address:e[0],value:{coins:0n}}));let m=0n;const v=new s.BigNumber(t.toString());for(const _ of h){const y=new s.BigNumber(f.get(_.address));const w=BigInt(v.multipliedBy(y).toFixed(0,0));m+=w;_.value.coins=m>t?w-(m-t):w}if(m<t){const g=t-m;h[h.length-1].value.coins+=g}const b=h.flatMap(e=>splitChangeOutput(e,a,c));const P=b.sort(i.sortByCoins).filter(e=>e.value.coins>0n);if(P&&P.length>0)P[0].value.assets=r;if(!r||0===r.size)return P;return distributeAssets(P,a,d,c)};t.splitChange=splitChange;const adjustOutputsForFee=async(e,t,r,s,a,n)=>{const d=new Set([...s,...a]);const{fee:c,redeemers:l}=await t.computeMinimumCost({change:[],fee:n,inputs:r,outputs:d});if(c===e)return{change:[],fee:c,feeAccountedFor:true,redeemers:l};if(e<c)throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient);const u=[...a];u.sort(i.sortByCoins);let f=false;for(const p of u){const h=p.value.coins-c;if(h>=t.computeMinimumCoinQuantity(p)){p.value.coins=h;f=true;break}}return{change:[...u],fee:c,feeAccountedFor:f,redeemers:l}};t.adjustOutputsForFee=adjustOutputsForFee;const splitChangeAndComputeFee=async(e,r,s,a,n,d,c)=>{const l=await (0,t.splitChange)(d,s,a,n.computeMinimumCoinQuantity,n.tokenBundleSizeExceedsLimit,c);let u=await (0,t.adjustOutputsForFee)(s,n,e,r,l,c);if(u.fee>=s){const f={change:[{address:i.stubMaxSizeAddress,value:{assets:a,coins:0n}}],fee:u.fee,feeAccountedFor:true};if(f.change[0].value.coins<n.computeMinimumCoinQuantity(f.change[0]))throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted);return f}if(c<u.fee){u=await (0,t.splitChangeAndComputeFee)(e,r,s,a,n,d,u.fee);if(0===u.change.length)throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted)}for(const p of u.change)if(p.value.coins<n.computeMinimumCoinQuantity(p))throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted);if(!u.feeAccountedFor)throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted);return u};t.splitChangeAndComputeFee=splitChangeAndComputeFee},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InputSelectionError=t.InputSelectionFailure=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(a=t.InputSelectionFailure||(t.InputSelectionFailure={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}t.InputSelectionError=InputSelectionError},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/LargeFirstInputSelector.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var i,n,d,c,l,u,f,p,h;Object.defineProperty(t,"__esModule",{value:true});t.LargeFirstSelector=void 0;const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const v=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const _=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const y=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js");const w=o(r("../../node_modules/lodash/uniq.js"));const pickAdditionalLargestUtxo=({utxoRemaining:e,utxoSelected:t})=>{if(0===e.length){return{utxoRemaining:e,utxoSelected:t}}const r=e.sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));const[s,...a]=r;return{utxoRemaining:a,utxoSelected:[...t,s]}};class LargeFirstSelector{async select(e){var t;const{utxo:r,preSelectedUtxo:s,outputs:o,constraints:d,implicitValue:c}=e;const m=[...s];const y=[...r].filter(([e])=>!m.some(([t])=>t.txId===e.txId&&t.index===e.index));const w=[...m,...y];const{totalLovelaceOutput:g,outputAssets:b}=a(this,i,"m",l).call(this,new Set(w),o,c);let P=new Set(m);P=a(this,i,"m",u).call(this,b,w,[...P]);var S;P=a(this,i,"m",f).call(this,g,w,P,null!==(S=null==c?void 0:null===(t=c.coin)||void 0===t?void 0:t.input)&&void 0!==S?S:0n);const{finalSelection:C,fee:T,change:k}=await a(this,i,"m",h).call(this,P,o,w,b,d,a(this,n,"f").changeAddressResolver,c);const A=await d.computeSelectionLimit({change:k,fee:T,inputs:C,outputs:o});if(C.size>A)throw new _.InputSelectionError(_.InputSelectionFailure.MaximumInputCountExceeded);return{remainingUTxO:a(this,i,"m",p).call(this,[...r],C),selection:{change:k,fee:T,inputs:new Set([...C].sort(v.sortUtxoByTxIn)),outputs:o}}}constructor(e){i.add(this);n.set(this,void 0);s(this,n,e,"f")}}t.LargeFirstSelector=LargeFirstSelector;n=new WeakMap,i=new WeakSet,d=function _LargeFirstSelector_aggregateLovelace(e,t,r){var s,a;const o=(0,v.getCoinQuantity)(e);const i=(0,v.getCoinQuantity)(t);var n;const d=null!==(n=null==r?void 0:null===(s=r.coin)||void 0===s?void 0:s.input)&&void 0!==n?n:0n;var c;const l=null!==(c=null==r?void 0:null===(a=r.coin)||void 0===a?void 0:a.deposit)&&void 0!==c?c:0n;return{totalIn:o+d,totalOut:i+l}},c=function _LargeFirstSelector_aggregateAssets(e,t,r){var s;const a=null!==(s=(0,m.coalesceValueQuantities)(t).assets)&&void 0!==s?s:new Map;const o=(0,m.coalesceValueQuantities)(e).assets;var i;const n=null!==(i=null==r?void 0:r.mint)&&void 0!==i?i:new Map;const d=new Map;const c=new Map;for(const[l,u]of n)(u>0n?d:c).set(l,u>0n?u:-u);let f=(0,v.addTokenMaps)(a,c);var p;f=null!==(p=(0,v.subtractTokenMaps)(f,d))&&void 0!==p?p:new Map;var h;const _=null!==(h=(0,v.addTokenMaps)(o,d))&&void 0!==h?h:new Map;return{available:_,required:f}},l=function _LargeFirstSelector_computeNetImplicitSelectionValues(e,t,r){const s=(0,v.toValues)([...e]);const o=(0,v.toValues)([...t]);const{totalIn:n,totalOut:l}=a(this,i,"m",d).call(this,s,o,r);const{required:u,available:f}=a(this,i,"m",c).call(this,s,o,r);const p=n-l;const h=(0,v.subtractTokenMaps)(f,u);if(0===e.size||p<0n||(0,v.hasNegativeAssetValue)(h))throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);return{outputAssets:u,totalLovelaceInput:n,totalLovelaceOutput:l}},u=function _LargeFirstSelector_selectAssets(e,t,r){const s=new Set(r);for(const[a,o]of e){var i;const n=t.filter(([e,t])=>{var r;return(null!==(i=null===(r=t.value.assets)||void 0===r?void 0:r.get(a))&&void 0!==i?i:0n)>0n}).sort(([,e],[,t])=>(0,v.sortByAssetQuantity)(a)(e,t));let d=0n;for(const c of n){var l;s.add(c);var u;d+=null!==(u=null===(l=c[1].value.assets)||void 0===l?void 0:l.get(a))&&void 0!==u?u:0n;if(d>=o)break}if(d<o)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient)}return s},f=function _LargeFirstSelector_selectLovelace(e,t,r,s){const a=new Set(r);const o=new Set([...r].map(([e])=>e));const i=t.filter(([e])=>!o.has(e)).sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));let n=(0,v.getCoinQuantity)((0,v.toValues)([...a]))+s;for(const d of i){if(n>=e)break;a.add(d);n+=d[1].value.coins}if(0===a.size){if(0===i.length)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);a.add(i[0])}if(n<e)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);return a},p=function _LargeFirstSelector_computeRemainingUtxo(e,t){const r=new Set([...t].map(([e])=>e));return new Set(e.filter(([e])=>!r.has(e)))},h=async function _LargeFirstSelector_expandUtxosUntilFeeCovered(e,t,r,s,a,o,i){var n,d,c,l;const u=[...e];const f=r.filter(t=>!e.has(t)).sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));const p=(0,v.toValues)([...t]);const h=v.stubMaxSizeAddress;const m={deposit:(null==i?void 0:null===(n=i.coin)||void 0===n?void 0:n.deposit)||0n,input:(null==i?void 0:null===(d=i.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==i?void 0:null===(c=i.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==i?void 0:null===(l=i.coin)||void 0===l?void 0:l.withdrawals)||0n};const _=(null==i?void 0:i.mint)||new Map;const g=(0,w.default)([...s.keys(),..._.keys()]);const{implicitTokensInput:b,implicitTokensSpend:P}=(0,v.mintToImplicitTokens)(_);const S={input:e=>b.get(e)||0n,spend:e=>P.get(e)||0n};const{change:C,fee:T,inputs:k}=await (0,y.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:a.computeMinimumCoinQuantity,estimateTxCosts:(e,r)=>a.computeMinimumCost({change:r.map(e=>({address:h,value:e})),fee:v.MAX_U64,inputs:new Set(e),outputs:t}),implicitValue:{implicitCoin:m,implicitTokens:S},outputValues:p,pickAdditionalUtxo:pickAdditionalLargestUtxo,tokenBundleSizeExceedsLimit:a.tokenBundleSizeExceedsLimit,uniqueTxAssetIDs:g,utxoSelection:{utxoRemaining:f,utxoSelected:u}});if(0===C.length){return{change:[],fee:T,finalSelection:new Set(k)}}const A=C.map(e=>({address:h,value:e}));const E=await o.resolve({change:A,fee:T,inputs:new Set(k),outputs:t});return{change:E,fee:T,finalSelection:new Set(k)}}},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/LargeFirstInputSelector.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinRandomImprove=t.createPickAdditionalRandomUtxo=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js");const createPickAdditionalRandomUtxo=e=>({utxoRemaining:t,utxoSelected:r})=>{const s=t.filter(([e,{value:t}])=>!t.assets);const a=s.length>0?s:t;const o=Math.floor(e()*a.length);const i=[...r,a[o]];const n=t.indexOf(a[o]);const d=[...t.slice(0,n),...t.slice(n+1)];return{utxoRemaining:d,utxoSelected:i}};t.createPickAdditionalRandomUtxo=createPickAdditionalRandomUtxo;const roundRobinRandomImprove=({changeAddressResolver:e,random:r=Math.random})=>({select:async({preSelectedUtxo:n,utxo:d,outputs:c,constraints:{computeMinimumCost:l,computeSelectionLimit:u,computeMinimumCoinQuantity:f,tokenBundleSizeExceedsLimit:p},implicitValue:h={}})=>{const m=a.stubMaxSizeAddress;const{requiredUtxo:v,utxo:_,outputs:y,uniqueTxAssetIDs:w,implicitValue:g}=(0,a.preProcessArgs)(n,d,c,m,h);(0,a.assertIsBalanceSufficient)(w,v,_,y,g);const b=(0,i.roundRobinSelection)({changeAddress:m,implicitValue:g,outputs:y,random:r,requiredUtxo:v,uniqueTxAssetIDs:w,utxo:_});const P=await (0,o.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:f,estimateTxCosts:(e,t)=>l({change:t.map(e=>({address:m,value:e})),fee:a.MAX_U64,inputs:new Set(e),outputs:c}),implicitValue:g,outputValues:(0,a.toValues)(y),pickAdditionalUtxo:(0,t.createPickAdditionalRandomUtxo)(r),tokenBundleSizeExceedsLimit:p,uniqueTxAssetIDs:w,utxoSelection:b});const S=new Set(P.inputs);const C={change:P.change.map(e=>({address:m,value:e})),fee:P.fee,inputs:S,outputs:c};C.change=await e.resolve(C);if(P.inputs.length>await u({change:C.change,fee:C.fee,inputs:S,outputs:c})){throw new s.InputSelectionError(s.InputSelectionFailure.MaximumInputCountExceeded)}C.inputs=new Set([...C.inputs].sort(a.sortUtxoByTxIn));return{redeemers:P.redeemers,remainingUTxO:new Set(P.remainingUTxO),selection:C}}});t.roundRobinRandomImprove=roundRobinRandomImprove},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinSelection=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const improvesSelection=(e,t,r,a)=>{const o=a(e);if(o<r)return true;const i=o+a([t]);const n=2n*r;const d=s.BigIntMath.abs(n-i);const c=s.BigIntMath.abs(n-o);if(d<c)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,a.assetQuantitySelector)(e);const o=s.input(e);const i=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,a.toValues)(e))+o,minimumTarget:r((0,a.toValues)(t))+i}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,a.getCoinQuantity)((0,a.toValues)(e))+r.input,minimumTarget:(0,a.getCoinQuantity)((0,a.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:a,implicitValue:o})=>{const i=e;const n=[...t];const d=listTokensWithin(s,r,o);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const p=l(n);if(p.length>0){const h=Math.floor(a()*p.length);const m=p[h];if(improvesSelection(i,m,u,f)){i.push(m);n.splice(n.indexOf(m),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===i.length){i.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:i}};t.roundRobinSelection=roundRobinSelection},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeChangeAndAdjustForFee=t.coalesceChangeBundlesForMinCoinRequirement=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=s(r("../../node_modules/lodash/minBy.js"));const d=s(r("../../node_modules/lodash/orderBy.js"));const c=s(r("../../node_modules/lodash/pick.js"));const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:a}}]of e)if(a){const o=[...a.keys()].filter(e=>!t.includes(e));for(const i of o){const n=a.get(i);if(0n===n)continue;const d=r.get(i)||[];r.set(i,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const a=[...t];for(const o of s.keys()){const i=(0,d.default)(s.get(o),e=>e,"desc");if(0===a.length)a.push({coins:0n});while(i.length>a.length){const n=i.pop();i[i.length-1]+=n}for(const[c,l]of i.entries()){var u;const f=a[c];const p=(null===(u=f.assets)||void 0===u?void 0:u.entries())||[];a.splice(c,1,{assets:new Map([...p,[o,l]]),coins:f.coins})}}return a};const createBundlePerOutput=(e,t,r,s)=>{let a=0n;const o=new Map;const i=e.map(e=>{const i=t>0n?r*e.coins/t:0n;a+=i;if(!e.assets){return{coins:i}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const p=f*c/l;o.set(d,(o.get(d)||0n)+p);n.set(d,p)}return{assets:n,coins:i}});return{bundles:i,totalAssetsBundled:o,totalCoinBundled:a}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=(0,n.default)(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:a},o)=>{const n=new Map;const d=(0,i.toValues)(e);for(const c of r)n.set(c,{requested:(0,i.assetQuantitySelector)(c)(t)+a.spend(c),selected:(0,i.assetQuantitySelector)(c)(d)+a.input(c)});const l=(0,i.getCoinQuantity)(d)+s.input;const u=(0,i.getCoinQuantity)(t)+o+s.deposit;const f=l-u;const{totalCoinBundled:p,bundles:h,totalAssetsBundled:m}=createBundlePerOutput(t,u,f,n);const v=f-p;if(v>0)if(0===h.length)h.push({coins:v});else h[0].coins+=v;for(const _ of r){const y=n.get(_);const w=m.get(_)||0n;const g=y.selected-y.requested-w;if(g>0n){var b;const P=(null===(b=h.find(({assets:e})=>{return null==e?void 0:e.has(_)}))||void 0===b?void 0:b.assets)||smallestBundleTokenMap(h);const S=P.get(_)||0n;P.set(_,S+g)}}return h};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const s=r.splice(t,1)[0];if(0===r.length)return[s];const o=r.splice(-1,1)[0];const i=(0,a.coalesceValueQuantities)([s,o]);r=[...r,i];r=(0,d.default)(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=(0,d.default)(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:i.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let a=false;while(s.length>1&&!a){a=true;for(let o=s.length-1;o>=0;--o){const n=satisfiesMinCoinRequirement(s[o]);a=a&&n;if(!n){s=mergeWithSmallestBundle(s,o);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};t.coalesceChangeBundlesForMinCoinRequirement=coalesceChangeBundlesForMinCoinRequirement;const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const a of e){const{assets:n,coins:d}=a;if(!n||0===n.size||!r(n)){s.push({assets:n,coins:d});continue}const c=[];let l={assets:new Map,coins:0n};for(const[u,f]of n.entries()){l.assets.set(u,f);if(r(l.assets)&&l.assets.size>1){l.assets.delete(u);c.push(l);l={assets:new Map([[u,f]]),coins:0n}}}c.push(l);let p=0n;for(const h of c){const m=t({address:i.stubMaxSizeAddress,value:h});h.coins=m;p+=m}if(d<p){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted)}c[0].coins+=d-p;s.push(...c)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:r,uniqueTxAssetIDs:s,implicitValue:a,computeMinimumCoinQuantity:o,tokenBundleSizeExceedsLimit:i,fee:n=0n})=>{const d=computeRequestedAssetChangeBundles(e.utxoSelected,r,s,a,n);const c=redistributeLeftoverAssets(e.utxoSelected,d,s);const l=(0,t.coalesceChangeBundlesForMinCoinRequirement)(c,o);if(!l){return false}const u=splitChangeIfTokenBundlesSizeExceedsLimit(l,o,i);return{changeBundles:u,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:r,estimateTxCosts:s,outputValues:a,uniqueTxAssetIDs:n,implicitValue:d,pickAdditionalUtxo:l,utxoSelection:u})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=i=>{if(i.utxoRemaining.length>0){return(0,t.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:e,estimateTxCosts:s,implicitValue:d,outputValues:a,pickAdditionalUtxo:l,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:l(i)})}throw new o.InputSelectionError(o.InputSelectionFailure.UtxoFullyDepleted)};const f=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:d,outputValues:a,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:u});if(!f)return recomputeChangeAndAdjustForFeeWithExtraUtxo(u);const p=await s(f.utxoSelected,validateChangeBundles(f.changeBundles,r));const h=(0,i.getCoinQuantity)(a)+p.fee+d.implicitCoin.deposit;const m=(0,i.getCoinQuantity)((0,i.toValues)(f.utxoSelected))+d.implicitCoin.input;if(h>m){if(0===f.utxoRemaining.length){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const v=computeChangeBundles({computeMinimumCoinQuantity:e,fee:p.fee,implicitValue:d,outputValues:a,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:(0,c.default)(f,["utxoRemaining","utxoSelected"])});if(!v){return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const{changeBundles:_,utxoSelected:y,utxoRemaining:w}=v;return{change:validateChangeBundles(_,r),fee:p.fee,inputs:y,redeemers:p.redeemers,remainingUTxO:w}};t.computeChangeAndAdjustForFee=computeChangeAndAdjustForFee},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.sortUtxoByTxIn=t.sortTxIn=void 0;a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/index.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js"),t);var o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");Object.defineProperty(t,"sortTxIn",{enumerable:true,get:function(){return o.sortTxIn}});Object.defineProperty(t,"sortUtxoByTxIn",{enumerable:true,get:function(){return o.sortUtxoByTxIn}})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.sortByAssetQuantity=t.isValidValue=t.hasNegativeAssetValue=t.addTokenMaps=t.subtractTokenMaps=t.sortByCoins=t.assertIsBalanceSufficient=t.assertIsCoinBalanceSufficient=t.getCoinQuantity=t.assetQuantitySelector=t.toValues=t.preProcessArgs=t.mintToImplicitTokens=t.sortUtxoByTxIn=t.sortTxIn=t.stubMaxSizeAddress=t.MAX_U64=void 0;const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const n=s(r("../../node_modules/lodash/uniq.js"));t.MAX_U64=0xffffffffffffffffn;t.stubMaxSizeAddress=o.Cardano.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};t.sortTxIn=sortTxIn;const sortUtxoByTxIn=(e,r)=>(0,t.sortTxIn)(e[0],r[0]);t.sortUtxoByTxIn=sortUtxoByTxIn;const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};t.mintToImplicitTokens=mintToImplicitTokens;const preProcessArgs=(e,r,s,a,o)=>{var i,d,c,l;const u=[...s];const f={deposit:(null==o?void 0:null===(i=o.coin)||void 0===i?void 0:i.deposit)||0n,input:(null==o?void 0:null===(d=o.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==o?void 0:null===(c=o.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==o?void 0:null===(l=o.coin)||void 0===l?void 0:l.withdrawals)||0n};const p=(null==o?void 0:o.mint)||new Map;const{implicitTokensInput:h,implicitTokensSpend:m}=(0,t.mintToImplicitTokens)(p);const v={input:e=>h.get(e)||0n,spend:e=>m.get(e)||0n};const _=(0,n.default)(u.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const y=(0,n.default)([..._,...p.keys()]);return{changeAddress:a,implicitValue:{implicitCoin:f,implicitTokens:v},outputs:u,requiredUtxo:[...e],uniqueTxAssetIDs:y,utxo:[...r]}};t.preProcessArgs=preProcessArgs;const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}t.toValues=toValues;const assetQuantitySelector=e=>{return t=>{return a.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};t.assetQuantitySelector=assetQuantitySelector;const getCoinQuantity=e=>a.BigIntMath.sum(e.map(({coins:e})=>e));t.getCoinQuantity=getCoinQuantity;const assertIsCoinBalanceSufficient=(e,r,s)=>{const a=(0,t.getCoinQuantity)(e);const o=(0,t.getCoinQuantity)(r);if(o+s.deposit>a+s.input){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}};t.assertIsCoinBalanceSufficient=assertIsCoinBalanceSufficient;const assertIsBalanceSufficient=(e,r,s,a,{implicitCoin:o,implicitTokens:n})=>{if(r.length+s.length===0){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}const d=[...toValues(s),...toValues(r)];const c=toValues(a);for(const l of e){const u=(0,t.assetQuantitySelector)(l);const f=u(d);const p=u(c);if(p+n.spend(l)>f+n.input(l)){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}}(0,t.assertIsCoinBalanceSufficient)(d,c,o)};t.assertIsBalanceSufficient=assertIsBalanceSufficient;const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};t.sortByCoins=sortByCoins;const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const o=new Map;for(const[i,d]of t.entries())if(0n!==d)o.set(i,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[p,h]of t.entries()){if(e.has(p)){l.push(p);continue}if(0n!==h)c.set(p,-h)}const m=(0,n.default)(l);for(const v of m){const _=e.get(v);const y=t.get(v);const w=_-y;if(0n!==w)c.set(v,w)}return c};t.subtractTokenMaps=subtractTokenMaps;const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[a,o]of e.entries()){if(t.has(a)){s.push(a);continue}if(0n!==o)r.set(a,o)}for(const[i,d]of t.entries()){if(e.has(i)){s.push(i);continue}if(0n!==d)r.set(i,d)}const c=(0,n.default)(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};t.addTokenMaps=addTokenMaps;const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};t.hasNegativeAssetValue=hasNegativeAssetValue;const isValidValue=(e,r,s,a)=>{let o=e.coins-a>=r({address:t.stubMaxSizeAddress,value:e});if(e.assets)o=o&&!s(e.assets);return o};t.isValidValue=isValidValue;const sortByAssetQuantity=e=>{return(t,r)=>{var s,a;var o;const i=null!==(o=null===(s=t.value.assets)||void 0===s?void 0:s.get(e))&&void 0!==o?o:0n;var n;const d=null!==(n=null===(a=r.value.assets)||void 0===a?void 0:a.get(e))&&void 0!==n?n:0n;if(i>d)return -1;if(i<d)return 1;return 0}};t.sortByAssetQuantity=sortByAssetQuantity},"../../node_modules/@cardano-sdk/input-selection/dist/esm/ChangeAddress/StaticChangeAddressResolver.js":(e,t,r)=>{"use strict";r.d(t,{StaticChangeAddressResolver:()=>StaticChangeAddressResolver});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;class StaticChangeAddressResolver{async resolve(e){const t=await __classPrivateFieldGet(this,a,"f").call(this);if(0===t.length)throw new s.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){a.set(this,void 0);__classPrivateFieldSet(this,a,e,"f")}}a=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js":(e,t,r)=>{"use strict";r.d(t,{InputSelectionError:()=>InputSelectionError,InputSelectionFailure:()=>a});var s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(a||(a={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}},"../../node_modules/@cardano-sdk/input-selection/dist/esm/RoundRobinRandomImprove/index.js":(e,t,r)=>{"use strict";r.d(t,{roundRobinRandomImprove:()=>roundRobinRandomImprove});var s=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var a=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var o=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/change.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const improvesSelection=(e,t,r,s)=>{const a=s(e);if(a<r)return true;const o=a+s([t]);const n=2n*r;const d=i.BigIntMath.abs(n-o);const c=i.BigIntMath.abs(n-a);if(d<c)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,a.assetQuantitySelector)(e);const o=s.input(e);const i=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,a.toValues)(e))+o,minimumTarget:r((0,a.toValues)(t))+i}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,a.getCoinQuantity)((0,a.toValues)(e))+r.input,minimumTarget:(0,a.getCoinQuantity)((0,a.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:a,implicitValue:o})=>{const i=e;const n=[...t];const d=listTokensWithin(s,r,o);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const p=l(n);if(p.length>0){const h=Math.floor(a()*p.length);const m=p[h];if(improvesSelection(i,m,u,f)){i.push(m);n.splice(n.indexOf(m),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===i.length){i.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:i}};const createPickAdditionalRandomUtxo=e=>({utxoRemaining:t,utxoSelected:r})=>{const s=t.filter(([e,{value:t}])=>!t.assets);const a=s.length>0?s:t;const o=Math.floor(e()*a.length);const i=[...r,a[o]];const n=t.indexOf(a[o]);const d=[...t.slice(0,n),...t.slice(n+1)];return{utxoRemaining:d,utxoSelected:i}};const roundRobinRandomImprove=({changeAddressResolver:e,random:t=Math.random})=>({select:async({preSelectedUtxo:r,utxo:i,outputs:n,constraints:{computeMinimumCost:d,computeSelectionLimit:c,computeMinimumCoinQuantity:l,tokenBundleSizeExceedsLimit:u},implicitValue:f={}})=>{const p=a.stubMaxSizeAddress;const{requiredUtxo:h,utxo:m,outputs:v,uniqueTxAssetIDs:_,implicitValue:y}=(0,a.preProcessArgs)(r,i,n,p,f);(0,a.assertIsBalanceSufficient)(_,h,m,v,y);const w=roundRobinSelection({changeAddress:p,implicitValue:y,outputs:v,random:t,requiredUtxo:h,uniqueTxAssetIDs:_,utxo:m});const g=await (0,o.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:l,estimateTxCosts:(e,t)=>d({change:t.map(e=>({address:p,value:e})),fee:a.MAX_U64,inputs:new Set(e),outputs:n}),implicitValue:y,outputValues:(0,a.toValues)(v),pickAdditionalUtxo:createPickAdditionalRandomUtxo(t),tokenBundleSizeExceedsLimit:u,uniqueTxAssetIDs:_,utxoSelection:w});const b=new Set(g.inputs);const P={change:g.change.map(e=>({address:p,value:e})),fee:g.fee,inputs:b,outputs:n};P.change=await e.resolve(P);if(g.inputs.length>await c({change:P.change,fee:P.fee,inputs:b,outputs:n})){throw new s.InputSelectionError(s.InputSelectionFailure.MaximumInputCountExceeded)}P.inputs=new Set([...P.inputs].sort(a.sortUtxoByTxIn));return{redeemers:g.redeemers,remainingUTxO:new Set(g.remainingUTxO),selection:P}}})},"../../node_modules/@cardano-sdk/input-selection/dist/esm/change.js":(e,t,r)=>{"use strict";r.d(t,{computeChangeAndAdjustForFee:()=>computeChangeAndAdjustForFee});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var a=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var o=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var i=r("../../node_modules/lodash/minBy.js");var n=r("../../node_modules/lodash/orderBy.js");var d=r("../../node_modules/lodash/pick.js");const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:a}}]of e)if(a){const o=[...a.keys()].filter(e=>!t.includes(e));for(const i of o){const n=a.get(i);if(0n===n)continue;const d=r.get(i)||[];r.set(i,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const a=[...t];for(const o of s.keys()){const i=n(s.get(o),e=>e,"desc");if(0===a.length)a.push({coins:0n});while(i.length>a.length){const d=i.pop();i[i.length-1]+=d}for(const[c,l]of i.entries()){var u;const f=a[c];const p=(null===(u=f.assets)||void 0===u?void 0:u.entries())||[];a.splice(c,1,{assets:new Map([...p,[o,l]]),coins:f.coins})}}return a};const createBundlePerOutput=(e,t,r,s)=>{let a=0n;const o=new Map;const i=e.map(e=>{const i=t>0n?r*e.coins/t:0n;a+=i;if(!e.assets){return{coins:i}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const p=f*c/l;o.set(d,(o.get(d)||0n)+p);n.set(d,p)}return{assets:n,coins:i}});return{bundles:i,totalAssetsBundled:o,totalCoinBundled:a}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=i(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:a},i)=>{const n=new Map;const d=(0,o.toValues)(e);for(const c of r)n.set(c,{requested:(0,o.assetQuantitySelector)(c)(t)+a.spend(c),selected:(0,o.assetQuantitySelector)(c)(d)+a.input(c)});const l=(0,o.getCoinQuantity)(d)+s.input;const u=(0,o.getCoinQuantity)(t)+i+s.deposit;const f=l-u;const{totalCoinBundled:p,bundles:h,totalAssetsBundled:m}=createBundlePerOutput(t,u,f,n);const v=f-p;if(v>0)if(0===h.length)h.push({coins:v});else h[0].coins+=v;for(const _ of r){const y=n.get(_);const w=m.get(_)||0n;const g=y.selected-y.requested-w;if(g>0n){var b;const P=(null===(b=h.find(({assets:e})=>{return null==e?void 0:e.has(_)}))||void 0===b?void 0:b.assets)||smallestBundleTokenMap(h);const S=P.get(_)||0n;P.set(_,S+g)}}return h};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const a=r.splice(t,1)[0];if(0===r.length)return[a];const o=r.splice(-1,1)[0];const i=(0,s.coalesceValueQuantities)([a,o]);r=[...r,i];r=n(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=n(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:o.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let a=false;while(s.length>1&&!a){a=true;for(let i=s.length-1;i>=0;--i){const d=satisfiesMinCoinRequirement(s[i]);a=a&&d;if(!d){s=mergeWithSmallestBundle(s,i);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const i of e){const{assets:n,coins:d}=i;if(!n||0===n.size||!r(n)){s.push({assets:n,coins:d});continue}const c=[];let l={assets:new Map,coins:0n};for(const[u,f]of n.entries()){l.assets.set(u,f);if(r(l.assets)&&l.assets.size>1){l.assets.delete(u);c.push(l);l={assets:new Map([[u,f]]),coins:0n}}}c.push(l);let p=0n;for(const h of c){const m=t({address:o.stubMaxSizeAddress,value:h});h.coins=m;p+=m}if(d<p){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)}c[0].coins+=d-p;s.push(...c)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:t,uniqueTxAssetIDs:r,implicitValue:s,computeMinimumCoinQuantity:a,tokenBundleSizeExceedsLimit:o,fee:i=0n})=>{const n=computeRequestedAssetChangeBundles(e.utxoSelected,t,r,s,i);const d=redistributeLeftoverAssets(e.utxoSelected,n,r);const c=coalesceChangeBundlesForMinCoinRequirement(d,a);if(!c){return false}const l=splitChangeIfTokenBundlesSizeExceedsLimit(c,a,o);return{changeBundles:l,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:t,estimateTxCosts:r,outputValues:s,uniqueTxAssetIDs:i,implicitValue:n,pickAdditionalUtxo:c,utxoSelection:l})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=o=>{if(o.utxoRemaining.length>0){return computeChangeAndAdjustForFee({computeMinimumCoinQuantity:e,estimateTxCosts:r,implicitValue:n,outputValues:s,pickAdditionalUtxo:c,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:c(o)})}throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)};const u=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:n,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:l});if(!u)return recomputeChangeAndAdjustForFeeWithExtraUtxo(l);const f=await r(u.utxoSelected,validateChangeBundles(u.changeBundles,t));const p=(0,o.getCoinQuantity)(s)+f.fee+n.implicitCoin.deposit;const h=(0,o.getCoinQuantity)((0,o.toValues)(u.utxoSelected))+n.implicitCoin.input;if(p>h){if(0===u.utxoRemaining.length){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(u)}const m=computeChangeBundles({computeMinimumCoinQuantity:e,fee:f.fee,implicitValue:n,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:d(u,["utxoRemaining","utxoSelected"])});if(!m){return recomputeChangeAndAdjustForFeeWithExtraUtxo(u)}const{changeBundles:v,utxoSelected:_,utxoRemaining:y}=m;return{change:validateChangeBundles(v,t),fee:f.fee,inputs:_,redeemers:f.redeemers,remainingUTxO:y}}},"../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{MAX_U64:()=>n,addTokenMaps:()=>addTokenMaps,assertIsBalanceSufficient:()=>assertIsBalanceSufficient,assetQuantitySelector:()=>assetQuantitySelector,getCoinQuantity:()=>getCoinQuantity,hasNegativeAssetValue:()=>hasNegativeAssetValue,isValidValue:()=>isValidValue,mintToImplicitTokens:()=>mintToImplicitTokens,preProcessArgs:()=>preProcessArgs,sortByAssetQuantity:()=>sortByAssetQuantity,sortByCoins:()=>sortByCoins,sortTxIn:()=>sortTxIn,sortUtxoByTxIn:()=>sortUtxoByTxIn,stubMaxSizeAddress:()=>d,subtractTokenMaps:()=>subtractTokenMaps,toValues:()=>toValues});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var o=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var i=r("../../node_modules/lodash/uniq.js");const n=0xffffffffffffffffn;const d=a.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};const sortUtxoByTxIn=(e,t)=>sortTxIn(e[0],t[0]);const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};const preProcessArgs=(e,t,r,s,a)=>{var o,n,d,c;const l=[...r];const u={deposit:(null==a?void 0:null===(o=a.coin)||void 0===o?void 0:o.deposit)||0n,input:(null==a?void 0:null===(n=a.coin)||void 0===n?void 0:n.input)||0n,reclaimDeposit:(null==a?void 0:null===(d=a.coin)||void 0===d?void 0:d.reclaimDeposit)||0n,withdrawals:(null==a?void 0:null===(c=a.coin)||void 0===c?void 0:c.withdrawals)||0n};const f=(null==a?void 0:a.mint)||new Map;const{implicitTokensInput:p,implicitTokensSpend:h}=mintToImplicitTokens(f);const m={input:e=>p.get(e)||0n,spend:e=>h.get(e)||0n};const v=i(l.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const _=i([...v,...f.keys()]);return{changeAddress:s,implicitValue:{implicitCoin:u,implicitTokens:m},outputs:l,requiredUtxo:[...e],uniqueTxAssetIDs:_,utxo:[...t]}};const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}const assetQuantitySelector=e=>{return t=>{return s.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};const getCoinQuantity=e=>s.BigIntMath.sum(e.map(({coins:e})=>e));const assertIsCoinBalanceSufficient=(e,t,r)=>{const s=getCoinQuantity(e);const a=getCoinQuantity(t);if(a+r.deposit>s+r.input){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}};const assertIsBalanceSufficient=(e,t,r,s,{implicitCoin:a,implicitTokens:i})=>{if(t.length+r.length===0){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}const n=[...toValues(r),...toValues(t)];const d=toValues(s);for(const c of e){const l=assetQuantitySelector(c);const u=l(n);const f=l(d);if(f+i.spend(c)>u+i.input(c)){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}}assertIsCoinBalanceSufficient(n,d,a)};const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const o=new Map;for(const[n,d]of t.entries())if(0n!==d)o.set(n,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[p,h]of t.entries()){if(e.has(p)){l.push(p);continue}if(0n!==h)c.set(p,-h)}const m=i(l);for(const v of m){const _=e.get(v);const y=t.get(v);const w=_-y;if(0n!==w)c.set(v,w)}return c};const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[a,o]of e.entries()){if(t.has(a)){s.push(a);continue}if(0n!==o)r.set(a,o)}for(const[n,d]of t.entries()){if(e.has(n)){s.push(n);continue}if(0n!==d)r.set(n,d)}const c=i(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};const isValidValue=(e,t,r,s)=>{let a=e.coins-s>=t({address:d,value:e});if(e.assets)a=a&&!r(e.assets);return a};const sortByAssetQuantity=e=>{return(t,r)=>{var s,a;var o;const i=null!==(o=null===(s=t.value.assets)||void 0===s?void 0:s.get(e))&&void 0!==o?o:0n;var n;const d=null!==(n=null===(a=r.value.assets)||void 0===a?void 0:a.get(e))&&void 0!==n?n:0n;if(i>d)return -1;if(i<d)return 1;return 0}}},"../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js":function(e,t,r){var s;(function(a){"use strict";var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,d=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,f=14,p=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,v=1e9;function clone(e){var t,r,s,a=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},o=new BigNumber(1),_=20,y=4,w=-7,g=21,b=-1e7,P=1e7,S=false,C=1,T=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",E=true;function BigNumber(e,t){var a,o,n,c,u,h,m,v,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>P)w.c=w.e=null;else if(e.e<b)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((h="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,u=e;u>=10;u/=10,c++);if(c>P)w.c=w.e=null;else{w.e=c;w.c=[e]}return}v=String(e)}else{if(!i.test(v=String(e)))return s(w,v,h);w.s=45==v.charCodeAt(0)?(v=v.slice(1),-1):1}if((c=v.indexOf("."))>-1)v=v.replace(".","");if((u=v.search(/e/i))>0){if(c<0)c=u;c+=+v.slice(u+1);v=v.substring(0,u)}else if(c<0)c=v.length}else{intCheck(t,2,A.length,"Base");if(10==t&&E){w=new BigNumber(e);return round(w,_+w.e+1,y)}v=String(e);if(h="number"==typeof e){if(0*e!=0)return s(w,v,h,t);w.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(l+e)}}else{w.s=45===v.charCodeAt(0)?(v=v.slice(1),-1):1}a=A.slice(0,t);c=u=0;for(m=v.length;u<m;u++)if(a.indexOf(o=v.charAt(u))<0){if("."==o){if(u>c){c=m;continue}}else if(!n){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){n=true;u=-1;c=0;continue}}return s(w,String(e),h,t)}h=false;v=r(v,t,10,w.s);if((c=v.indexOf("."))>-1)v=v.replace(".","");else c=v.length}for(u=0;48===v.charCodeAt(u);u++);for(m=v.length;48===v.charCodeAt(--m););if(v=v.slice(u,++m)){m-=u;if(h&&BigNumber.DEBUG&&m>15&&(e>p||e!==d(e))){throw Error(l+w.s*e)}if((c=c-u-1)>P)w.c=w.e=null;else if(c<b)w.c=[w.e=0];else{w.e=c;w.c=[];u=(c+1)%f;if(c<0)u+=f;if(u<m){if(u)w.c.push(+v.slice(0,u));for(m-=f;u<m;)w.c.push(+v.slice(u,u+=f));u=f-(v=v.slice(u)).length}else{u-=m}for(;u--;v+="0");w.c.push(+v)}}else{w.c=[w.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,v,t);_=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);y=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,0,t);intCheck(r[1],0,v,t);w=r[0];g=r[1]}else{intCheck(r,-v,v,t);w=-(g=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,-1,t);intCheck(r[1],1,v,t);b=r[0];P=r[1]}else{intCheck(r,-v,v,t);if(r)b=-(P=r<0?-r:r);else{throw Error(c+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=r;else{S=!r;throw Error(c+"crypto unavailable")}else S=r;else{throw Error(c+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);C=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,v,t);T=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)k=r;else throw Error(c+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(c+t+" invalid: "+r)}E="0123456789"==r.slice(0,10);A=r}}else{throw Error(c+"Object expected: "+e)}return{DECIMAL_PLACES:_,ROUNDING_MODE:y,EXPONENTIAL_AT:[w,g],RANGE:[b,P],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:T,FORMAT:k,ALPHABET:A}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===o||-1===o)&&a>=-v&&a<=v&&a===d(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%f;if(t<1)t+=f;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=u||r!==d(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===o||1===o||-1===o)){return true}throw Error(c+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,a.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,a.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return d(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,a,i,l,u=0,p=[],m=new BigNumber(o);if(null==e)e=_;else intCheck(e,0,v);i=n(e/f);if(S)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(i*=2));for(;u<i;){l=131072*r[u]+(r[u+1]>>>11);if(l>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[u]=s[0];r[u+1]=s[1]}else{p.push(l%1e14);u+=2}}u=i/2}else if(crypto.randomBytes){r=crypto.randomBytes(i*=7);for(;u<i;){l=(31&r[u])*281474976710656+1099511627776*r[u+1]+4294967296*r[u+2]+16777216*r[u+3]+(r[u+4]<<16)+(r[u+5]<<8)+r[u+6];if(l>=9e15)crypto.randomBytes(7).copy(r,u);else{p.push(l%1e14);u+=7}}u=i/7}else{S=false;throw Error(c+"crypto unavailable")}if(!S){for(;u<i;){l=t();if(l<9e15)p[u++]=l%1e14}}i=p[--u];e%=f;if(i&&e){l=h[f-e];p[u]=d(i/l)*l}for(;0===p[u];p.pop(),u--);if(u<0)p=[a=0];else{for(a=-1;0===p[0];p.splice(0,1),a-=f);for(u=1,l=p[0];l>=10;l/=10,u++);if(u<f)a-=f-u}m.e=a;m.c=p;return m}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,o=[0],i,n=0,d=e.length;for(;n<d;){for(i=o.length;i--;o[i]*=t);o[0]+=s.indexOf(e.charAt(n++));for(a=0;a<o.length;a++)if(o[a]>r-1){if(null==o[a+1])o[a+1]=0;o[a+1]+=o[a]/r|0;o[a]%=r}}return o.reverse()}return function(r,s,a,o,i){var n,d,c,l,u,f,p,h,m=r.indexOf("."),v=_,w=y;if(m>=0){l=T;T=0;r=r.replace(".","");h=new BigNumber(s);f=h.pow(r.length-m);T=l;h.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,a,e);h.e=h.c.length}p=toBaseOut(r,s,a,i?(n=A,e):(n=e,A));c=l=p.length;for(;0==p[--l];p.pop());if(!p[0])return n.charAt(0);if(m<0)--c;else{f.c=p;f.e=c;f.s=o;f=t(f,h,v,w,a);p=f.c;u=f.r;c=f.e}d=c+v+1;m=p[d];l=a/2;u=u||d<0||null!=p[d+1];u=w<4?(null!=m||u)&&(0==w||w==(f.s<0?3:2)):m>l||m==l&&(4==w||u||6==w&&1&p[d-1]||w==(f.s<0?8:7));if(d<1||!p[0])r=u?toFixedPoint(n.charAt(1),-v,n.charAt(0)):n.charAt(0);else{p.length=d;if(u){for(--a;++p[--d]>a;){p[d]=0;if(!d){++c;p=[1].concat(p)}}}for(l=p.length;!p[--l];);for(m=0,r="";m<=l;r+=n.charAt(p[m++]));r=toFixedPoint(r,c,n.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,o,i,n=0,d=e.length,c=t%m,l=t/m|0;for(e=e.slice();d--;){o=e[d]%m;i=e[d]/m|0;s=l*o+i*c;a=c*o+s%m*m+n;n=(a/r|0)+(s/m|0)+l*i;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,o;if(r!=s)o=r>s?1:-1;else{for(a=o=0;a<r;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}}return o}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var o,i,n,c,l,p,h,m,v,_,y,w,g,b,P,S,C,T=e.s==t.s?1:-1,k=e.c,A=t.c;if(!k||!k[0]||!A||!A[0]){return new BigNumber(e.s&&t.s&&(k?!A||k[0]!=A[0]:A)?k&&0==k[0]||!A?0*T:T/0:NaN)}m=new BigNumber(T);v=m.c=[];i=e.e-t.e;T=r+i+1;if(!a){a=u;i=bitFloor(e.e/f)-bitFloor(t.e/f);T=T/f|0}for(n=0;A[n]==(k[n]||0);n++);if(A[n]>(k[n]||0))i--;if(T<0){v.push(1);c=true}else{b=k.length;S=A.length;n=0;T+=2;l=d(a/(A[0]+1));if(l>1){A=multiply(A,l,a);k=multiply(k,l,a);S=A.length;b=k.length}g=S;_=k.slice(0,S);y=_.length;for(;y<S;_[y++]=0);C=A.slice();C=[0].concat(C);P=A[0];if(A[1]>=a/2)P++;do{l=0;o=compare(A,_,S,y);if(o<0){w=_[0];if(S!=y)w=w*a+(_[1]||0);l=d(w/P);if(l>1){if(l>=a)l=a-1;p=multiply(A,l,a);h=p.length;y=_.length;while(1==compare(p,_,h,y)){l--;subtract(p,S<h?C:A,h,a);h=p.length;o=1}}else{if(0==l)o=l=1;p=A.slice();h=p.length}if(h<y)p=[0].concat(p);subtract(_,p,y,a);y=_.length;if(-1==o){while(compare(A,_,S,y)<1){l++;subtract(_,S<y?C:A,y,a);y=_.length}}}else if(0===o){l++;_=[0]}v[n++]=l;if(_[0])_[y++]=k[g]||0;else{_=[k[g]];y=1}}while((g++<b||null!=_[0])&&T--)c=null!=_[0];if(!v[0])v.splice(0,1)}if(a==u){for(n=1,T=v[0];T>=10;T/=10,n++);round(m,r+(m.e=n+i*f-1)+1,s,c)}else{m.e=i;m.r=+c}return m}}();function format(e,t,r,s){var a,o,i,n,d;if(null==r)r=y;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];i=e.e;if(null==t){d=coeffToString(e.c);d=1==s||2==s&&(i<=w||i>=g)?toExponential(d,i):toFixedPoint(d,i,"0")}else{e=round(new BigNumber(e),t,r);o=e.e;d=coeffToString(e.c);n=d.length;if(1==s||2==s&&(t<=o||o<=w)){for(;n<t;d+="0",n++);d=toExponential(d,o)}else{t-=i;d=toFixedPoint(d,o,"0");if(o+1>n){if(--t>0)for(d+=".";t--;d+="0");}else{t+=o-n;if(t>0){if(o+1==n)d+=".";for(;t--;d+="0");}}}}return e.s<0&&a?"-"+d:d}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*f-1)>P)e.c=e.e=null;else if(r<b)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,i,n,d){var l,u=n?i:i.replace(a,"");if(s.test(u))o.s=isNaN(u)?null:u<0?-1:1;else{if(!n){u=u.replace(e,function(e,t,r){l="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=l?e:t});if(d){l=d;u=u.replace(t,"$1").replace(r,"0.$1")}if(i!=u)return new BigNumber(u,l)}if(BigNumber.DEBUG){throw Error(c+"Not a"+(d?" base "+d:"")+" number: "+i)}o.s=null}o.c=o.e=null}}();function round(e,t,r,s){var a,o,i,c,l,p,m,v=e.c,_=h;if(v){e:{for(a=1,c=v[0];c>=10;c/=10,a++);o=t-a;if(o<0){o+=f;i=t;l=v[p=0];m=l/_[a-i-1]%10|0}else{p=n((o+1)/f);if(p>=v.length)if(s){for(;v.length<=p;v.push(0));l=m=0;a=1;o%=f;i=o-f+1}else{break e}else{l=c=v[p];for(a=1;c>=10;c/=10,a++);o%=f;i=o-f+a;m=i<0?0:l/_[a-i-1]%10|0}}s=s||t<0||null!=v[p+1]||(i<0?l:l%_[a-i-1]);s=r<4?(m||s)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||s||6==r&&(o>0?i>0?l/_[a-i]:0:v[p-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(s){t-=e.e+1;v[0]=_[(f-t%f)%f];e.e=-t||0}else{v[0]=e.e=0}return e}if(0==o){v.length=p;c=1;p--}else{v.length=p+1;c=_[f-o];v[p]=i>0?d(l/_[a-i]%_[i])*c:0}if(s){for(;;){if(0==p){for(o=1,i=v[0];i>=10;i/=10,o++);i=v[0]+=c;for(c=1;i>=10;i/=10,c++);if(o!=c){e.e++;if(v[0]==u)v[0]=1}break}v[p]+=c;if(v[p]!=u)break;v[p--]=0;c=1}}for(o=v.length;0===v[--o];v.pop());}if(e.e>P)e.c=e.e=null;else if(e.e<b)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=w||r>=g?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}a.absoluteValue=a.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};a.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};a.decimalPlaces=a.dp=function(e,t){var r,s,a,o=this;if(null!=e){intCheck(e,0,v);if(null==t)t=y;else intCheck(t,0,8);return round(new BigNumber(o),e+o.e+1,t)}if(!(r=o.c))return null;s=((a=r.length-1)-bitFloor(this.e/f))*f;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};a.dividedBy=a.div=function(e,r){return t(this,new BigNumber(e,r),_,y)};a.dividedToIntegerBy=a.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};a.exponentiatedBy=a.pow=function(e,t){var r,s,a,i,l,u,p,h,m,v=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(c+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);u=e.e>14;if(!v.c||!v.c[0]||1==v.c[0]&&!v.e&&1==v.c.length||!e.c||!e.c[0]){m=new BigNumber(Math.pow(+valueOf(v),u?e.s*(2-isOdd(e)):+valueOf(e)));return t?m.mod(t):m}p=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!p&&v.isInteger()&&t.isInteger();if(s)v=v.mod(t)}else if(e.e>9&&(v.e>0||v.e<-1||(0==v.e?v.c[0]>1||u&&v.c[1]>=24e7:v.c[0]<8e13||u&&v.c[0]<=9999975e7))){i=(v.s<0&&isOdd(e),-0);if(v.e>-1)i=1/i;return new BigNumber(p?1/i:i)}else if(T)i=n(T/f+2);if(u){r=new BigNumber(.5);if(p)e.s=1;h=isOdd(e)}else{a=Math.abs(+valueOf(e));h=a%2}m=new BigNumber(o);for(;;){if(h){m=m.times(v);if(!m.c)break;if(i){if(m.c.length>i)m.c.length=i}else if(s)m=m.mod(t)}if(a){a=d(a/2);if(0===a)break;h=a%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)h=isOdd(e);else{a=+valueOf(e);if(0===a)break;h=a%2}}v=v.times(v);if(i){if(v.c&&v.c.length>i)v.c.length=i}else if(s)v=v.mod(t)}if(s)return m;if(p)m=o.div(m);return t?m.mod(t):i?round(m,T,y,l):m};a.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=y;else intCheck(e,0,8);return round(t,t.e+1,e)};a.isEqualTo=a.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};a.isFinite=function(){return!!this.c};a.isGreaterThan=a.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isInteger=function(){return!!this.c&&bitFloor(this.e/f)>this.c.length-2};a.isLessThan=a.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};a.isLessThanOrEqualTo=a.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isNaN=function(){return!this.s};a.isNegative=function(){return this.s<0};a.isPositive=function(){return this.s>0};a.isZero=function(){return!!this.c&&0==this.c[0]};a.minus=function(e,t){var r,s,a,o,i=this,n=i.s;e=new BigNumber(e,t);t=e.s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return i.plus(e)}var d=i.e/f,c=e.e/f,l=i.c,p=e.c;if(!d||!c){if(!l||!p)return l?(e.s=-t,e):new BigNumber(p?i:NaN);if(!l[0]||!p[0]){return p[0]?(e.s=-t,e):new BigNumber(l[0]?i:-0)}}d=bitFloor(d);c=bitFloor(c);l=l.slice();if(n=d-c){if(o=n<0){n=-n;a=l}else{c=d;a=p}a.reverse();for(t=n;t--;a.push(0));a.reverse()}else{s=(o=(n=l.length)<(t=p.length))?n:t;for(n=t=0;t<s;t++)if(l[t]!=p[t]){o=l[t]<p[t];break}}if(o){a=l;l=p;p=a;e.s=-e.s}t=(s=p.length)-(r=l.length);if(t>0)for(;t--;l[r++]=0);t=u-1;for(;s>n;){if(l[--s]<p[s]){for(r=s;r&&!l[--r];l[r]=t);--l[r];l[s]+=u}l[s]-=p[s]}for(;0==l[0];l.splice(0,1),--c);if(!l[0]){e.s=3==y?-1:1;e.c=[e.e=0];return e}return normalise(e,l,c)};a.modulo=a.mod=function(e,r){var s,a,o=this;e=new BigNumber(e,r);if(o.c&&e.s&&(!e.c||e.c[0])){if(!e.c||o.c&&!o.c[0]){return new BigNumber(o)}}else{return new BigNumber(NaN)}if(9==C){a=e.s;e.s=1;s=t(o,e,0,3);e.s=a;s.s*=a}else{s=t(o,e,0,C)}e=o.minus(s.times(e));if(!e.c[0]&&1==C)e.s=o.s;return e};a.multipliedBy=a.times=function(e,t){var r,s,a,o,i,n,d,c,l,p,h,v,_,y,w,g=this,b=g.c,P=(e=new BigNumber(e,t)).c;if(!b||!P||!b[0]||!P[0]){if(g.s&&e.s&&(!b||b[0]||P)&&(!P||P[0]||b)){e.s*=g.s;if(b&&P){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(g.e/f)+bitFloor(e.e/f);e.s*=g.s;d=b.length;p=P.length;if(d<p){_=b;b=P;P=_;a=d;d=p;p=a}for(a=d+p,_=[];a--;_.push(0));y=u;w=m;for(a=p;--a>=0;){r=0;h=P[a]%w;v=P[a]/w|0;for(i=d,o=a+i;o>a;){c=b[--i]%w;l=b[i]/w|0;n=v*c+l*h;c=h*c+n%w*w+_[o]+r;r=(c/y|0)+(n/w|0)+v*l;_[o--]=c%y}_[o]=r}if(r)++s;else _.splice(0,1);return normalise(e,_,s)};a.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};a.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var o=s.e/f,i=e.e/f,n=s.c,d=e.c;if(!o||!i){if(!n||!d)return new BigNumber(a/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*a)}o=bitFloor(o);i=bitFloor(i);n=n.slice();if(a=o-i){if(a>0){i=o;r=d}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=d.length;if(a-t<0){r=d;d=n;n=r;t=a}for(a=0;t;){a=(n[--t]=n[t]+d[t]+a)/u|0;n[t]=u===n[t]?0:n[t]%u}if(a){n=[a].concat(n);++i}return normalise(e,n,i)};a.precision=a.sd=function(e,t){var r,s,a,o=this;if(null!=e&&!!e!==e){intCheck(e,1,v);if(null==t)t=y;else intCheck(t,0,8);return round(new BigNumber(o),e,t)}if(!(r=o.c))return null;a=r.length-1;s=a*f+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&o.e+1>s)s=o.e+1;return s};a.shiftedBy=function(e){intCheck(e,-p,p);return this.times("1e"+e)};a.squareRoot=a.sqrt=function(){var e,r,s,a,o,i=this,n=i.c,d=i.s,c=i.e,l=_+4,u=new BigNumber("0.5");if(1!==d||!n||!n[0]){return new BigNumber(!d||d<0&&(!n||n[0])?NaN:n?i:1/0)}d=Math.sqrt(+valueOf(i));if(0==d||d==1/0){r=coeffToString(n);if((r.length+c)%2==0)r+="0";d=Math.sqrt(+r);c=bitFloor((c+1)/2)-(c<0||c%2);if(d==1/0)r="5e"+c;else{r=d.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}s=new BigNumber(r)}else{s=new BigNumber(d+"")}if(s.c[0]){c=s.e;d=c+l;if(d<3)d=0;for(;;){o=s;s=u.times(o.plus(t(i,o,l,1)));if(coeffToString(o.c).slice(0,d)===(r=coeffToString(s.c)).slice(0,d)){if(s.e<c)--d;r=r.slice(d-3,d+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+_+2,1);e=!s.times(s).eq(i)}break}if(!a){round(o,o.e+_+2,0);if(o.times(o).eq(i)){s=o;break}}l+=4;d+=4;a=1}}}return round(s,s.e+_+1,y,e)};a.toExponential=function(e,t){if(null!=e){intCheck(e,0,v);e++}return format(this,e,t,1)};a.toFixed=function(e,t){if(null!=e){intCheck(e,0,v);e=e+this.e+1}return format(this,e,t)};a.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=k}else if("object"!=typeof r){throw Error(c+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var o,i=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,l=r.groupSeparator||"",u=i[0],f=i[1],p=a.s<0,h=p?u.slice(1):u,m=h.length;if(d){o=n;n=d;d=o;m-=o}if(n>0&&m>0){o=m%n||n;u=h.substr(0,o);for(;o<m;o+=n)u+=l+h.substr(o,n);if(d>0)u+=l+h.slice(o);if(p)u="-"+u}s=f?u+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):u}return(r.prefix||"")+s+(r.suffix||"")};a.toFraction=function(e){var r,s,a,i,n,d,l,u,p,m,v,_,w=this,g=w.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(o)){throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!g)return new BigNumber(w);r=new BigNumber(o);p=s=new BigNumber(o);a=u=new BigNumber(o);_=coeffToString(g);n=r.e=_.length-w.e-1;r.c[0]=h[(d=n%f)<0?f+d:d];e=!e||l.comparedTo(r)>0?n>0?r:p:l;d=P;P=1/0;l=new BigNumber(_);u.c[0]=0;for(;;){m=t(l,r,0,1);i=s.plus(m.times(a));if(1==i.comparedTo(e))break;s=a;a=i;p=u.plus(m.times(i=p));u=i;r=l.minus(m.times(i=r));l=i}i=t(e.minus(s),a,0,1);u=u.plus(i.times(p));s=s.plus(i.times(a));u.s=p.s=w.s;n*=2;v=t(p,a,n,y).minus(w).abs().comparedTo(t(u,s,n,y).minus(w).abs())<1?[p,a]:[u,s];P=d;return v};a.toNumber=function(){return+valueOf(this)};a.toPrecision=function(e,t){if(null!=e)intCheck(e,1,v);return format(this,e,t,2)};a.toString=function(e){var t,s=this,a=s.s,o=s.e;if(null===o)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=o<=w||o>=g?toExponential(coeffToString(s.c),o):toFixedPoint(coeffToString(s.c),o,"0");else if(10===e&&E){s=round(new BigNumber(s),_+o+1,y);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,A.length,"Base");t=r(toFixedPoint(coeffToString(s.c),o,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};a.valueOf=a.toJSON=function(){return valueOf(this)};a._isBigNumber=true;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,o=e[0]+"";for(;s<a;){t=e[s++]+"";r=f-t.length;for(;r--;t="0"+t);o+=t}for(a=o.length;48===o.charCodeAt(--a););return o.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,o=t.c,i=e.s,n=t.s,d=e.e,c=t.e;if(!i||!n)return null;r=a&&!a[0];s=o&&!o[0];if(r||s)return r?s?0:-n:i;if(i!=n)return i;r=i<0;s=d==c;if(!a||!o)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=o.length)?d:c;for(i=0;i<n;i++)if(a[i]!=o[i])return a[i]>o[i]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==d(e)){throw Error(c+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/f)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}o=clone();o["default"]=o.BigNumber=o;if(true)s=(function(){return o}).call(t,r,t,e),void 0!==s&&(e.exports=s)})(this)},"../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Bip32Account=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");class Bip32Account{async derivePublicKey(e){const t=await this.extendedAccountPublicKey.derive([e.role,e.index]);return t.toRawKey()}async deriveAddress(e,t){const r={index:t,role:n.KeyRole.Stake};const s=await this.derivePublicKey({index:e.index,role:Number(e.type)});const a=await s.hash();const o=await this.derivePublicKey(r);const i=await o.hash();const l={hash:(0,c.Hash28ByteBase16)(i.hex()),type:d.Cardano.CredentialType.KeyHash};const u=d.Cardano.BaseAddress.fromCredentials(this.chainId.networkId,{hash:(0,c.Hash28ByteBase16)(a.hex()),type:d.Cardano.CredentialType.KeyHash},l).toAddress();const f=d.Cardano.RewardAddress.fromCredentials(this.chainId.networkId,l).toAddress();return{accountIndex:this.accountIndex,address:d.Cardano.PaymentAddress(u.toBech32()),networkId:this.chainId.networkId,rewardAccount:d.Cardano.RewardAccount(f.toBech32()),stakeKeyDerivationPath:r,...e}}static async fromAsyncKeyAgent(e){return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()})}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r}){this.extendedAccountPublicKey=i.Bip32PublicKey.fromHex(e);this.chainId=t;this.accountIndex=r}}t.Bip32Account=Bip32Account},"../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.InMemoryKeyAgent=void 0;const p=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));const m=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const v=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js");const _=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");const y=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js");const w=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js");const g=c(r("../../node_modules/lodash/uniqBy.js"));const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new h.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends y.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await d(this,l,"m",f).call(this);const a=await (0,_.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const o=await this.bip32Ed25519.derivePrivateKey(a,[t,e]);const i=await this.bip32Ed25519.getRawPrivateKey(o);const n=await this.bip32Ed25519.sign(i,r);const c=await this.bip32Ed25519.getPublicKey(i);return{publicKey:c,signature:n}}async signCip8Data(e){return await (0,v.cip30signData)(this,e)}async exportRootPrivateKey(){return await d(this,l,"m",f).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:a="",accountIndex:o=0,purpose:i=m.KeyPurpose.STANDARD},n){const d=(0,_.joinMnemonicWords)(r);const c=(0,_.validateMnemonic)(d);if(!c)throw new h.InvalidMnemonicError;const l=s.from((0,_.mnemonicWordsToEntropy)(r),"hex");const u=n.bip32Ed25519.fromBip39Entropy(l,a);const f=await getPassphraseRethrowTypedError(t);const p=await (0,w.emip3encrypt)(s.from(u,"hex"),f);const v=await (0,_.deriveAccountPrivateKey)({accountIndex:o,bip32Ed25519:n.bip32Ed25519,purpose:i,rootPrivateKey:u});const y=await n.bip32Ed25519.getBip32PublicKey(v);return new InMemoryKeyAgent({accountIndex:o,chainId:e,encryptedRootPrivateKeyBytes:[...p],extendedAccountPublicKey:y,getPassphrase:t,purpose:i},n)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:s},{additionalKeyPaths:a=[]}={}){const o=e.hash();const i=e.toCore();const n=(await p.Ed25519PublicKey.fromHex(await this.derivePublicKey(_.DREP_KEY_DERIVATION_PATH)).hash()).hex();const d=(0,_.ownSignatureKeyPaths)(i,r,t,n,s);const c=(0,g.default)([...d,...a],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(c.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},o);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,_.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:m.KeyAgentType.InMemory},r);l.add(this);u.set(this,void 0);n(this,u,e,"f")}}t.InMemoryKeyAgent=InMemoryKeyAgent;u=new WeakMap,l=new WeakSet,f=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>d(this,u,"f").call(this,e));let r;try{r=await (0,w.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(a){throw new h.AuthenticationError("Failed to decrypt root private key",a)}return p.Bip32PrivateKeyHex(s.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentBase=void 0;const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js");class KeyAgentBase{get serializableData(){return a(this,o,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return a(this,i,"f")}get purpose(){return this.serializableData.purpose||d.KeyPurpose.STANDARD}async deriveAddress(e,t){return a(this,n,"f").deriveAddress(e,t)}async derivePublicKey(e){return(await a(this,n,"f").derivePublicKey(e)).hex()}constructor(e,{bip32Ed25519:t}){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f");s(this,n,new c.Bip32Account(e),"f")}}t.KeyAgentBase=KeyAgentBase;o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.cip30signData=t.createCoseKey=t.getAddressBytes=t.Cip30DataSignError=t.Cip30DataSignErrorCode=void 0;const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js");const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");var p;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(p=t.Cip30DataSignErrorCode||(t.Cip30DataSignErrorCode={}));class Cip30DataSignError extends l.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}t.Cip30DataSignError=Cip30DataSignError;const getAddressBytes=e=>{const t=c.Cardano.Address.fromString(e);if(!t){throw new Cip30DataSignError(p.AddressNotPK,"Invalid address")}return s.from(t.toBytes(),"hex")};t.getAddressBytes=getAddressBytes;const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const s=e.startsWith("stake");if(s){const a=t.find(({rewardAccount:t})=>t===e);if(!a)throw new Cip30DataSignError(p.ProofGeneration,"Unknown reward address");return a.stakeKeyDerivationPath||f.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var o;const i=c.Cardano.Address.fromString(e);if((null==i?void 0:i.getType())===c.Cardano.AddressType.EnterpriseKey&&(null===(o=null==i?void 0:i.getProps().paymentPart)||void 0===o?void 0:o.hash)===n.Hash28ByteBase16.fromEd25519KeyHashHex(r)){return f.DREP_KEY_DERIVATION_PATH}}const d=t.find(({address:t})=>t===e);if(!d){throw new Cip30DataSignError(p.ProofGeneration,"Unknown address")}return{index:d.index,role:d.type}};const createSigStructureHeaders=e=>{const t=d.HeaderMap.new();t.set_key_id(e);t.set_header(u.CoseLabel.address,d.CBORValue.new_bytes(e));t.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,c.util.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(p.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=d.COSEKey.new(d.Label.from_key_type(d.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));r.set_header(u.CoseLabel.crv,d.CBORValue.from_label(d.Label.from_curve_type(d.CurveType.Ed25519)));r.set_header(u.CoseLabel.x,d.CBORValue.new_bytes(s.from(t,"hex")));return r};t.createCoseKey=createCoseKey;const cip30signData=async(e,{knownAddresses:r,signWith:a,payload:o})=>{const i=(await n.Ed25519PublicKey.fromHex(await e.derivePublicKey(f.DREP_KEY_DERIVATION_PATH)).hash()).hex();const l=(0,t.getAddressBytes)(a);const u=await getDerivationPath(a,r,i);const p=d.COSESign1Builder.new(d.Headers.new(d.ProtectedHeaderMap.new(createSigStructureHeaders(l)),d.HeaderMap.new()),s.from(o,"hex"),false);const h=p.make_data_to_sign();const{signature:m,publicKey:v}=await signSigStructure(e,u,h);const _=p.build(s.from(m,"hex"));const y=(0,t.createCoseKey)(l,v);return{key:c.util.bytesToHex(y.to_bytes()),signature:c.util.bytesToHex(_.to_bytes())}};t.cip30signData=cip30signData},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CoseLabel=void 0;const s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");t.CoseLabel={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.emip3decrypt=t.emip3encrypt=t.createPbkdf2Key=void 0;const o=r("../../node_modules/pbkdf2/browser.js");const i=a(r("../../node_modules/chacha/browser.js"));const n=a(r("../../node_modules/get-random-values/index.js"));const d=32;const c=12;const l=19162;const u=32;const f=16;const p=s.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,s)=>(0,o.pbkdf2)(e,t,l,d,"sha512",(e,t)=>{if(e)return s(e);r(t)}));t.createPbkdf2Key=createPbkdf2Key;const emip3encrypt=async(e,r)=>{const a=new Uint8Array(u);(0,n.default)(a);const o=await (0,t.createPbkdf2Key)(r,a);const d=new Uint8Array(c);(0,n.default)(d);const l=i.default.createCipher(o,s.from(d));l.setAAD(p,{plaintextLength:e.length});const f=l.update(e);const h=l.final();const m=l.getAuthTag();return s.concat([a,d,m,f,h])};t.emip3encrypt=emip3encrypt;const emip3decrypt=async(e,r)=>{const a=e.slice(0,u);const o=e.slice(u,u+c);const n=e.slice(u+c,u+c+f);const d=e.slice(u+c+f);const l=await (0,t.createPbkdf2Key)(r,a);const h=i.default.createDecipher(l,s.from(o));h.setAuthTag(s.from(n));h.setAAD(p);return s.concat([h.update(s.from(d)),h.final()])};t.emip3decrypt=emip3decrypt},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthenticationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.AuthenticationError=AuthenticationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HwMappingError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.HwMappingError=HwMappingError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidMnemonicError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}t.InvalidMnemonicError=InvalidMnemonicError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidSerializableDataError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends s.CustomError{constructor(e){super(formatMessage(e))}}t.InvalidSerializableDataError=InvalidSerializableDataError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProofGenerationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.ProofGenerationError=ProofGenerationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransportError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.TransportError=TransportError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.cip8=t.util=t.errors=void 0;t.errors=o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js"),t);t.util=o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js"));i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js"),t);t.cip8=o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js"));i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TxInId=t.CommunicationType=t.DeviceType=t.AddressType=t.KeyPurpose=t.KeyRole=t.KeyAgentType=t.Cip1852PathLevelIndexes=t.CardanoKeyConst=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");var a;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(a=t.CardanoKeyConst||(t.CardanoKeyConst={}));var o;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(o=t.Cip1852PathLevelIndexes||(t.Cip1852PathLevelIndexes={}));var i;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(i=t.KeyAgentType||(t.KeyAgentType={}));var n;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(n=t.KeyRole||(t.KeyRole={}));var d;(function(e){e[e["STANDARD"]=s.HD_WALLET_CIP_ID]="STANDARD";e[e["MULTI_SIG"]=s.MULTISIG_CIP_ID]="MULTI_SIG"})(d=t.KeyPurpose||(t.KeyPurpose={}));var c;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(c=t.AddressType||(t.AddressType={}));var l;(function(e){e["Ledger"]="Ledger"})(l=t.DeviceType||(t.DeviceType={}));var u;(function(e){e["Web"]="web";e["Node"]="node"})(u=t.CommunicationType||(t.CommunicationType={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`;t.TxInId=TxInId},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentTransactionSigner=void 0;const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js");const d=1;class KeyAgentTransactionSigner{async sign(e){const t=await a(this,o,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[a(this,i,"f")]});if(t.size!==d)throw new n.ProofGenerationError(`Invalid number of signatures. Expected ${d} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){o.set(this,void 0);i.set(this,void 0);s(this,o,e,"f");s(this,i,t,"f")}}t.KeyAgentTransactionSigner=KeyAgentTransactionSigner;o=new WeakMap,i=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.validateMnemonic=t.mnemonicWordsToEntropy=t.entropyToMnemonicWords=t.joinMnemonicWords=t.generateMnemonicWords=t.mnemonicToWords=void 0;const i=o(r("../../node_modules/bip39/src/index.js"));const mnemonicToWords=e=>e.split(" ");t.mnemonicToWords=mnemonicToWords;const generateMnemonicWords=(e=256)=>(0,t.mnemonicToWords)(i.generateMnemonic(e));t.generateMnemonicWords=generateMnemonicWords;const joinMnemonicWords=e=>e.join(" ");t.joinMnemonicWords=joinMnemonicWords;const entropyToMnemonicWords=e=>(0,t.mnemonicToWords)(i.entropyToMnemonic(e));t.entropyToMnemonicWords=entropyToMnemonicWords;const mnemonicWordsToEntropy=e=>i.mnemonicToEntropy((0,t.joinMnemonicWords)(e));t.mnemonicWordsToEntropy=mnemonicWordsToEntropy;t.validateMnemonic=i.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createAsyncKeyAgent=void 0;const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}};t.createAsyncKeyAgent=createAsyncKeyAgent},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.createBip32Ed25519Witnesser=t.Bip32Ed25519Witnesser=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js");class Bip32Ed25519Witnesser{async witness(e,t,r){var s,d;const c=e.toCore();const l=e.getId();const u=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,n.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:c.body}):await Bip32Ed25519Witnesser.getSignatures(a(this,o,"f"),e.body(),t,r);const f={auxiliaryData:c.auxiliaryData,body:c.body,id:l,isValid:e.isValid(),witness:{...c.witness,signatures:new Map([...u.entries(),...(null===(s=c.witness)||void 0===s?void 0:null===(d=s.signatures)||void 0===d?void 0:d.entries())||[]])}};var p;return{cbor:i.Serialization.TxCBOR.serialize(f),context:{handleResolutions:null!==(p=t.handleResolutions)&&void 0!==p?p:[]},tx:f}}async signData(e){return a(this,o,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const a=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const o of null==s?void 0:s.extraSigners){const i=await o.sign(t);a.set(i.pubKey,i.signature)}}return a}constructor(e){o.set(this,void 0);s(this,o,e,"f")}}t.Bip32Ed25519Witnesser=Bip32Ed25519Witnesser;o=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e);t.createBip32Ed25519Witnesser=createBip32Ed25519Witnesser},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureStakeKeys=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:a,paymentKeyIndex:o=0})=>{const i=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));a.debug(`Stake keys requested: ${r}; got ${i.size}`);const n=[];for(let d=0;i.size<r;d++)if(!i.has(d)){const c=await e.deriveAddress({index:o,type:s.AddressType.External},d);n.push(c);a.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);i.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...i.values()]}};t.ensureStakeKeys=ensureStakeKeys},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.stakeKeyPathFromGroupedAddress=t.paymentKeyPathFromGroupedAddress=t.accountKeyDerivationPathToBip32Path=t.deriveAccountPrivateKey=t.toEd25519KeyPair=t.DREP_KEY_DERIVATION_PATH=t.STAKE_KEY_DERIVATION_PATH=t.harden=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const harden=e=>2147483648+e;t.harden=harden;t.STAKE_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.Stake};t.DREP_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});t.toEd25519KeyPair=toEd25519KeyPair;const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:r,bip32Ed25519:a,purpose:o=s.KeyPurpose.STANDARD})=>await a.derivePrivateKey(e,[(0,t.harden)(o),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(r)]);t.deriveAccountPrivateKey=deriveAccountPrivateKey;const accountKeyDerivationPathToBip32Path=(e,{index:r,role:a},o=s.CardanoKeyConst.PURPOSE)=>[(0,t.harden)(o),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e),a,r];t.accountKeyDerivationPathToBip32Path=accountKeyDerivationPathToBip32Path;const paymentKeyPathFromGroupedAddress=e=>[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.type,e.index];t.paymentKeyPathFromGroupedAddress=paymentKeyPathFromGroupedAddress;const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]};t.stakeKeyPathFromGroupedAddress=stakeKeyPathFromGroupedAddress},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js":function(e,t,r){"use strict";var s,a,o,i;var n=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r)}d(t,e);return t};var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ownSignatureKeyPaths=t.createTxInKeyPathMap=t.getDRepCredentialKeyPaths=t.getVotingProcedureKeyPaths=t.checkStakeCredentialCertificates=void 0;const u=c(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=l(r("../../node_modules/lodash/isEqual.js"));const _=l(r("../../node_modules/lodash/uniqBy.js"));const y=l(r("../../node_modules/lodash/uniqWith.js"));const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const a=t.find(e=>e.rewardAccount===s.stakeAddress);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case p.Cardano.CertificateType.VoteDelegation:case p.Cardano.CertificateType.StakeVoteDelegation:case p.Cardano.CertificateType.StakeRegistrationDelegation:case p.Cardano.CertificateType.VoteRegistrationDelegation:case p.Cardano.CertificateType.StakeVoteRegistrationDelegation:case p.Cardano.CertificateType.Registration:case p.Cardano.CertificateType.Unregistration:case p.Cardano.CertificateType.StakeDeregistration:case p.Cardano.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===p.Cardano.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===p.Cardano.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const a=t.find(e=>e.rewardAccount===s);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===p.Cardano.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===p.Cardano.CertificateType.MIR)if(e.kind===p.Cardano.MirCertificateKind.ToStakeCreds){const s=t.find(t=>u.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const n of t){const d=checkStakeKeyHashCertificate(n,e);(s=r).requiresForeignSignatures||(s.requiresForeignSignatures=d.requiresForeignSignatures);r.derivationPaths.push(...d.derivationPaths);const c=checkPoolRegistrationCertificate(n,e);(a=r).requiresForeignSignatures||(a.requiresForeignSignatures=c.requiresForeignSignatures);r.derivationPaths.push(...c.derivationPaths);const l=checkPoolRetirementCertificate(n,e);(o=r).requiresForeignSignatures||(o.requiresForeignSignatures=l.requiresForeignSignatures);r.derivationPaths.push(...l.derivationPaths);const u=checkMirCertificate(n,e);(i=r).requiresForeignSignatures||(i.requiresForeignSignatures=u.requiresForeignSignatures);r.derivationPaths.push(...u.derivationPaths)}r.derivationPaths=(0,y.default)(r.derivationPaths,v.default);return r};t.checkStakeCredentialCertificates=checkStakeCredentialCertificates;const getSignersData=e=>(0,_.default)(e,"rewardAccount").map(e=>{const t=p.Cardano.RewardAccount.toHash(e.rewardAccount);const r=p.Cardano.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,r)=>{let s=false;const a=[];const o=getSignersData(e);const i=checkWithdrawals(r,o);s||(s=i.requiresForeignSignatures);a.push(...i.derivationPaths);const n=(0,t.checkStakeCredentialCertificates)(o,r);s||(s=n.requiresForeignSignatures);a.push(...n.derivationPaths);return{derivationPaths:new Set(a),requiresForeignSignatures:s}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const s={derivationPaths:[],requiresForeignSignatures:false};const a=getSignersData(e);for(const{voter:o}of r.votingProcedures||[]){switch(o.__typename){case p.Cardano.VoterType.dRepKeyHash:if(t&&o.credential.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(t))s.derivationPaths.push(h.DREP_KEY_DERIVATION_PATH);else s.requiresForeignSignatures=true;break;case p.Cardano.VoterType.stakePoolKeyHash:{const i=a.find(e=>u.Hash28ByteBase16.fromEd25519KeyHashHex(e.stakeKeyHash)===o.credential.hash);if(i)s.derivationPaths.push(i.derivationPath);else s.requiresForeignSignatures=true;break}default:s.requiresForeignSignatures=true;break}}return s};t.getVotingProcedureKeyPaths=getVotingProcedureKeyPaths;const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const a of e){var o,i;const n=null===(i=null===(o=p.Cardano.Address.fromBech32(a.address))||void 0===o?void 0:o.asBase())||void 0===i?void 0:i.getPaymentCredential().hash;const d=p.Cardano.RewardAccount.toHash(a.rewardAccount);if(n&&n.toString()===s)r.push({index:a.index,role:Number(a.type)});if(d&&a.stakeKeyDerivationPath&&d.toString()===s)r.push(a.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&p.Cardano.RewardAccount.toHash(e.rewardAccount)===u.Hash28ByteBase16.fromEd25519KeyHashHex(t)?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,s;const a=null===(s=null===(r=p.Cardano.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential();if((null==a?void 0:a.type)===p.Cardano.CredentialType.ScriptHash&&a.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(t))return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false};if((null==a?void 0:a.type)===p.Cardano.CredentialType.ScriptHash){return{derivationPaths:[{index:e.index,role:f.KeyRole.External}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=checkStakeCredential(s,e.keyHash);r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!p.Cardano.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case p.Cardano.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case p.Cardano.NativeScriptKind.RequireAllOf:case p.Cardano.NativeScriptKind.RequireAnyOf:case p.Cardano.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case p.Cardano.NativeScriptKind.RequireTimeBefore:case p.Cardano.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t.certificates||[])if(s.__typename===p.Cardano.CertificateType.UnregisterDelegateRepresentative||s.__typename===p.Cardano.CertificateType.UpdateDelegateRepresentative||s.__typename===p.Cardano.CertificateType.RegisterDelegateRepresentative)if(s.dRepCredential.type!==p.Cardano.CredentialType.ScriptHash&&e&&s.dRepCredential.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(e))r.derivationPaths=[h.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};t.getDRepCredentialKeyPaths=getDRepCredentialKeyPaths;const createTxInKeyPathMap=async(e,t,r)=>{const s={};const a=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(a.map(async e=>{const a=await r.resolveInput(e);if(!a)return;const o=t.find(({address:e})=>e===a.address);if(!o)return;s[(0,f.TxInId)(e)]={index:o.index,role:Number(o.type)}}));return s};t.createTxInKeyPathMap=createTxInKeyPathMap;const ownSignatureKeyPaths=(e,r,s,a,o)=>{const i=Object.values(s).filter(m.isNotNil);return(0,y.default)([...i,...getStakeCredentialKeyPaths(r,e).derivationPaths,...(0,t.getDRepCredentialKeyPaths)({dRepKeyHash:a,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(r,e.requiredExtraSignatures),...(0,t.getVotingProcedureKeyPaths)({dRepKeyHash:a,groupedAddresses:r,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(r,o).derivationPaths],v.default)};t.ownSignatureKeyPaths=ownSignatureKeyPaths},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.stubSignTransaction=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js");const l=i(r("../../node_modules/lodash/uniqWith.js"));const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>n.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:s,scripts:a},signTransactionOptions:{extraSigners:o,additionalKeyPaths:i=[]}={}})=>{const u=n.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=(0,l.default)([...(0,c.ownSignatureKeyPaths)(e,t,r,s,a),...i],d.deepEquals);const p=f.length+((null==o?void 0:o.length)||0);const h=new Map;for(let m=0;m<p;++m)h.set(randomPublicKey(),u);return h};t.stubSignTransaction=stubSignTransaction},"../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Account:()=>Bip32Account});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var l=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");class Bip32Account{async derivePublicKey(e){const t=await this.extendedAccountPublicKey.derive([e.role,e.index]);return t.toRawKey()}async deriveAddress(e,t){const r={index:t,role:a.KeyRole.Stake};const s=await this.derivePublicKey({index:e.index,role:Number(e.type)});const u=await s.hash();const f=await this.derivePublicKey(r);const p=await f.hash();const h={hash:(0,l.Hash28ByteBase16)(p.hex()),type:o.CredentialType.KeyHash};const m=i.BaseAddress.fromCredentials(this.chainId.networkId,{hash:(0,l.Hash28ByteBase16)(u.hex()),type:o.CredentialType.KeyHash},h).toAddress();const v=n.RewardAddress.fromCredentials(this.chainId.networkId,h).toAddress();return{accountIndex:this.accountIndex,address:d.PaymentAddress(m.toBech32()),networkId:this.chainId.networkId,rewardAccount:c.RewardAccount(v.toBech32()),stakeKeyDerivationPath:r,...e}}static async fromAsyncKeyAgent(e){return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()})}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r}){this.extendedAccountPublicKey=s.Bip32PublicKey.fromHex(e);this.chainId=t;this.accountIndex=r}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyAgent:()=>InMemoryKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var h=r("../../node_modules/lodash/uniqBy.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,_,y;const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new o.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends f.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await __classPrivateFieldGet(this,v,"m",y).call(this);const a=await (0,c.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const o=await this.bip32Ed25519.derivePrivateKey(a,[t,e]);const i=await this.bip32Ed25519.getRawPrivateKey(o);const n=await this.bip32Ed25519.sign(i,r);const d=await this.bip32Ed25519.getPublicKey(i);return{publicKey:d,signature:n}}async signCip8Data(e){return await (0,d.cip30signData)(this,e)}async exportRootPrivateKey(){return await __classPrivateFieldGet(this,v,"m",y).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:s="",accountIndex:a=0,purpose:o=n.KeyPurpose.STANDARD},d){const u=(0,l.joinMnemonicWords)(r);const f=(0,l.validateMnemonic)(u);if(!f)throw new i.InvalidMnemonicError;const h=m.from((0,l.mnemonicWordsToEntropy)(r),"hex");const v=d.bip32Ed25519.fromBip39Entropy(h,s);const _=await getPassphraseRethrowTypedError(t);const y=await (0,p.emip3encrypt)(m.from(v,"hex"),_);const w=await (0,c.deriveAccountPrivateKey)({accountIndex:a,bip32Ed25519:d.bip32Ed25519,purpose:o,rootPrivateKey:v});const g=await d.bip32Ed25519.getBip32PublicKey(w);return new InMemoryKeyAgent({accountIndex:a,chainId:e,encryptedRootPrivateKeyBytes:[...y],extendedAccountPublicKey:g,getPassphrase:t,purpose:o},d)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:a},{additionalKeyPaths:o=[]}={}){const i=e.hash();const n=e.toCore();const d=(await s.Ed25519PublicKey.fromHex(await this.derivePublicKey(c.DREP_KEY_DERIVATION_PATH)).hash()).hex();const l=(0,u.ownSignatureKeyPaths)(n,r,t,d,a);const f=h([...l,...o],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(f.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},i);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,c.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:n.KeyAgentType.InMemory},r);v.add(this);_.set(this,void 0);__classPrivateFieldSet(this,_,e,"f")}}_=new WeakMap,v=new WeakSet,y=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>__classPrivateFieldGet(this,_,"f").call(this,e));let r;try{r=await (0,p.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(s){throw new o.AuthenticationError("Failed to decrypt root private key",s)}return a.Bip32PrivateKeyHex(m.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js":(e,t,r)=>{"use strict";r.d(t,{KeyAgentBase:()=>KeyAgentBase});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n;class KeyAgentBase{get serializableData(){return __classPrivateFieldGet(this,o,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return __classPrivateFieldGet(this,i,"f")}get purpose(){return this.serializableData.purpose||s.KeyPurpose.STANDARD}async deriveAddress(e,t){return __classPrivateFieldGet(this,n,"f").deriveAddress(e,t)}async derivePublicKey(e){return(await __classPrivateFieldGet(this,n,"f").derivePublicKey(e)).hex()}constructor(e,{bip32Ed25519:t}){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,i,t,"f");__classPrivateFieldSet(this,n,new a.Bip32Account(e),"f")}}o=new WeakMap,i=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js":(e,t,r)=>{"use strict";r.d(t,{Cip30DataSignError:()=>Cip30DataSignError,Cip30DataSignErrorCode:()=>f,cip30signData:()=>cip30signData,createCoseKey:()=>createCoseKey,getAddressBytes:()=>getAddressBytes});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var o=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var f;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(f||(f={}));class Cip30DataSignError extends d.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}const getAddressBytes=e=>{const t=i.Address.fromString(e);if(!t){throw new Cip30DataSignError(f.AddressNotPK,"Invalid address")}return u.from(t.toBytes(),"hex")};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const a=e.startsWith("stake");if(a){const o=t.find(({rewardAccount:t})=>t===e);if(!o)throw new Cip30DataSignError(f.ProofGeneration,"Unknown reward address");return o.stakeKeyDerivationPath||l.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var n;const d=i.Address.fromString(e);if((null==d?void 0:d.getType())===i.AddressType.EnterpriseKey&&(null===(n=null==d?void 0:d.getProps().paymentPart)||void 0===n?void 0:n.hash)===s.Hash28ByteBase16.fromEd25519KeyHashHex(r)){return l.DREP_KEY_DERIVATION_PATH}}const c=t.find(({address:t})=>t===e);if(!c){throw new Cip30DataSignError(f.ProofGeneration,"Unknown address")}return{index:c.index,role:c.type}};const createSigStructureHeaders=e=>{const t=o.HeaderMap.new();t.set_key_id(e);t.set_header(c.CoseLabel.address,o.CBORValue.new_bytes(e));t.set_algorithm_id(o.Label.from_algorithm_id(o.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,n.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(f.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=o.COSEKey.new(o.Label.from_key_type(o.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(o.Label.from_algorithm_id(o.AlgorithmId.EdDSA));r.set_header(c.CoseLabel.crv,o.CBORValue.from_label(o.Label.from_curve_type(o.CurveType.Ed25519)));r.set_header(c.CoseLabel.x,o.CBORValue.new_bytes(u.from(t,"hex")));return r};const cip30signData=async(e,{knownAddresses:t,signWith:r,payload:s})=>{const i=(await a.Ed25519PublicKey.fromHex(await e.derivePublicKey(l.DREP_KEY_DERIVATION_PATH)).hash()).hex();const d=getAddressBytes(r);const c=await getDerivationPath(r,t,i);const f=o.COSESign1Builder.new(o.Headers.new(o.ProtectedHeaderMap.new(createSigStructureHeaders(d)),o.HeaderMap.new()),u.from(s,"hex"),false);const p=f.make_data_to_sign();const{signature:h,publicKey:m}=await signSigStructure(e,c,p);const v=f.build(u.from(h,"hex"));const _=createCoseKey(d,m);return{key:n.bytesToHex(_.to_bytes()),signature:n.bytesToHex(v.to_bytes())}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js":(e,t,r)=>{"use strict";r.d(t,{CoseLabel:()=>a});var s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");const a={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js":(e,t,r)=>{"use strict";r.d(t,{createPbkdf2Key:()=>createPbkdf2Key,emip3decrypt:()=>emip3decrypt,emip3encrypt:()=>emip3encrypt});var s=r("../../node_modules/pbkdf2/browser.js");var a=r("../../node_modules/chacha/browser.js");var o=r("../../node_modules/get-random-values/index.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const n=32;const d=12;const c=19162;const l=32;const u=16;const f=i.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,a)=>(0,s.pbkdf2)(e,t,c,n,"sha512",(e,t)=>{if(e)return a(e);r(t)}));const emip3encrypt=async(e,t)=>{const r=new Uint8Array(l);o(r);const s=await createPbkdf2Key(t,r);const n=new Uint8Array(d);o(n);const c=a.createCipher(s,i.from(n));c.setAAD(f,{plaintextLength:e.length});const u=c.update(e);const p=c.final();const h=c.getAuthTag();return i.concat([r,n,h,u,p])};const emip3decrypt=async(e,t)=>{const r=e.slice(0,l);const s=e.slice(l,l+d);const o=e.slice(l+d,l+d+u);const n=e.slice(l+d+u);const c=await createPbkdf2Key(t,r);const p=a.createDecipher(c,i.from(s));p.setAuthTag(i.from(o));p.setAAD(f);return i.concat([p.update(i.from(n)),p.final()])}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js":(e,t,r)=>{"use strict";r.d(t,{AuthenticationError:()=>AuthenticationError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js":(e,t,r)=>{"use strict";r.d(t,{HwMappingError:()=>HwMappingError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";r.d(t,{InvalidMnemonicError:()=>InvalidMnemonicError});var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/ProofGenerationError.js":(e,t,r)=>{"use strict";r.d(t,{ProofGenerationError:()=>ProofGenerationError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js":(e,t,r)=>{"use strict";r.d(t,{TransportError:()=>TransportError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AddressType:()=>T.AddressType,Bip32Account:()=>E.Bip32Account,CardanoKeyConst:()=>T.CardanoKeyConst,Cip1852PathLevelIndexes:()=>T.Cip1852PathLevelIndexes,CommunicationType:()=>T.CommunicationType,DeviceType:()=>T.DeviceType,InMemoryKeyAgent:()=>p.InMemoryKeyAgent,KeyAgentBase:()=>f.KeyAgentBase,KeyAgentType:()=>T.KeyAgentType,KeyPurpose:()=>T.KeyPurpose,KeyRole:()=>T.KeyRole,TxInId:()=>T.TxInId,cip8:()=>o,createPbkdf2Key:()=>C.createPbkdf2Key,emip3decrypt:()=>C.emip3decrypt,emip3encrypt:()=>C.emip3encrypt,errors:()=>s,util:()=>a});var s={};r.r(s);r.d(s,{AuthenticationError:()=>i.AuthenticationError,HwMappingError:()=>l.HwMappingError,InvalidMnemonicError:()=>n.InvalidMnemonicError,InvalidSerializableDataError:()=>InvalidSerializableDataError,ProofGenerationError:()=>u.ProofGenerationError,TransportError:()=>c.TransportError});var a={};r.r(a);r.d(a,{Bip32Ed25519Witnesser:()=>S.Bip32Ed25519Witnesser,DREP_KEY_DERIVATION_PATH:()=>v.DREP_KEY_DERIVATION_PATH,KeyAgentTransactionSigner:()=>KeyAgentTransactionSigner,STAKE_KEY_DERIVATION_PATH:()=>v.STAKE_KEY_DERIVATION_PATH,accountKeyDerivationPathToBip32Path:()=>v.accountKeyDerivationPathToBip32Path,checkStakeCredentialCertificates:()=>_.checkStakeCredentialCertificates,createAsyncKeyAgent:()=>m.createAsyncKeyAgent,createBip32Ed25519Witnesser:()=>S.createBip32Ed25519Witnesser,createTxInKeyPathMap:()=>_.createTxInKeyPathMap,deriveAccountPrivateKey:()=>v.deriveAccountPrivateKey,ensureStakeKeys:()=>P.ensureStakeKeys,entropyToMnemonicWords:()=>h.entropyToMnemonicWords,generateMnemonicWords:()=>h.generateMnemonicWords,getDRepCredentialKeyPaths:()=>_.getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>_.getVotingProcedureKeyPaths,harden:()=>v.harden,joinMnemonicWords:()=>h.joinMnemonicWords,mnemonicToWords:()=>h.mnemonicToWords,mnemonicWordsToEntropy:()=>h.mnemonicWordsToEntropy,ownSignatureKeyPaths:()=>_.ownSignatureKeyPaths,paymentKeyPathFromGroupedAddress:()=>v.paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>v.stakeKeyPathFromGroupedAddress,stubSignTransaction:()=>y.stubSignTransaction,toEd25519KeyPair:()=>v.toEd25519KeyPair,validateMnemonic:()=>h.validateMnemonic});var o={};r.r(o);r.d(o,{Cip30DataSignError:()=>k.Cip30DataSignError,Cip30DataSignErrorCode:()=>k.Cip30DataSignErrorCode,CoseLabel:()=>A.CoseLabel,cip30signData:()=>k.cip30signData,createCoseKey:()=>k.createCoseKey,getAddressBytes:()=>k.getAddressBytes});var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var d=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends d.CustomError{constructor(e){super(formatMessage(e))}}var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/ProofGenerationError.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var _=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var y=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var w,g;const b=1;class KeyAgentTransactionSigner{async sign(e){const t=await __classPrivateFieldGet(this,w,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[__classPrivateFieldGet(this,g,"f")]});if(t.size!==b)throw new u.ProofGenerationError(`Invalid number of signatures. Expected ${b} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,g,t,"f")}}w=new WeakMap,g=new WeakMap;var P=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var S=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js");var C=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var T=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var k=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var A=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var E=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js")},"../../node_modules/@cardano-sdk/key-management/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{AddressType:()=>l,CardanoKeyConst:()=>o,Cip1852PathLevelIndexes:()=>i,CommunicationType:()=>f,DeviceType:()=>u,KeyAgentType:()=>n,KeyPurpose:()=>c,KeyRole:()=>d,TxInId:()=>TxInId});const s=1854;const a=1852;var o;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(o||(o={}));var i;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(i||(i={}));var n;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(n||(n={}));var d;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(d||(d={}));var c;(function(e){e[e["STANDARD"]=a]="STANDARD";e[e["MULTI_SIG"]=s]="MULTI_SIG"})(c||(c={}));var l;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(l||(l={}));var u;(function(e){e["Ledger"]="Ledger"})(u||(u={}));var f;(function(e){e["Web"]="web";e["Node"]="node"})(f||(f={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js":(e,t,r)=>{"use strict";r.d(t,{entropyToMnemonicWords:()=>entropyToMnemonicWords,generateMnemonicWords:()=>generateMnemonicWords,joinMnemonicWords:()=>joinMnemonicWords,mnemonicToWords:()=>mnemonicToWords,mnemonicWordsToEntropy:()=>mnemonicWordsToEntropy,validateMnemonic:()=>a});var s=r("../../node_modules/bip39/src/index.js");const mnemonicToWords=e=>e.split(" ");const generateMnemonicWords=(e=256)=>mnemonicToWords(s.generateMnemonic(e));const joinMnemonicWords=e=>e.join(" ");const entropyToMnemonicWords=e=>mnemonicToWords(s.entropyToMnemonic(e));const mnemonicWordsToEntropy=e=>s.mnemonicToEntropy(joinMnemonicWords(e));const a=s.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{createAsyncKeyAgent:()=>createAsyncKeyAgent});const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Ed25519Witnesser:()=>Bip32Ed25519Witnesser,createBip32Ed25519Witnesser:()=>createBip32Ed25519Witnesser});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;class Bip32Ed25519Witnesser{async witness(e,t,r){var i,n;const d=e.toCore();const c=e.getId();const l=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,a.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:d.body}):await Bip32Ed25519Witnesser.getSignatures(__classPrivateFieldGet(this,o,"f"),e.body(),t,r);const u={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:e.isValid(),witness:{...d.witness,signatures:new Map([...l.entries(),...(null===(i=d.witness)||void 0===i?void 0:null===(n=i.signatures)||void 0===n?void 0:n.entries())||[]])}};var f;return{cbor:s.TxCBOR.serialize(u),context:{handleResolutions:null!==(f=t.handleResolutions)&&void 0!==f?f:[]},tx:u}}async signData(e){return __classPrivateFieldGet(this,o,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const a=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const o of null==s?void 0:s.extraSigners){const i=await o.sign(t);a.set(i.pubKey,i.signature)}}return a}constructor(e){o.set(this,void 0);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e)},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";r.d(t,{ensureStakeKeys:()=>ensureStakeKeys});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:a,paymentKeyIndex:o=0})=>{const i=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));a.debug(`Stake keys requested: ${r}; got ${i.size}`);const n=[];for(let d=0;i.size<r;d++)if(!i.has(d)){const c=await e.deriveAddress({index:o,type:s.AddressType.External},d);n.push(c);a.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);i.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...i.values()]}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js":(e,t,r)=>{"use strict";r.d(t,{DREP_KEY_DERIVATION_PATH:()=>o,STAKE_KEY_DERIVATION_PATH:()=>a,accountKeyDerivationPathToBip32Path:()=>accountKeyDerivationPathToBip32Path,deriveAccountPrivateKey:()=>deriveAccountPrivateKey,harden:()=>harden,paymentKeyPathFromGroupedAddress:()=>paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>stakeKeyPathFromGroupedAddress,toEd25519KeyPair:()=>toEd25519KeyPair});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const harden=e=>2147483648+e;const a={index:0,role:s.KeyRole.Stake};const o={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:t,bip32Ed25519:r,purpose:a=s.KeyPurpose.STANDARD})=>await r.derivePrivateKey(e,[harden(a),harden(s.CardanoKeyConst.COIN_TYPE),harden(t)]);const accountKeyDerivationPathToBip32Path=(e,{index:t,role:r},a=s.CardanoKeyConst.PURPOSE)=>[harden(a),harden(s.CardanoKeyConst.COIN_TYPE),harden(e),r,t];const paymentKeyPathFromGroupedAddress=e=>[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.type,e.index];const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js":(e,t,r)=>{"use strict";r.d(t,{checkStakeCredentialCertificates:()=>checkStakeCredentialCertificates,createTxInKeyPathMap:()=>createTxInKeyPathMap,getDRepCredentialKeyPaths:()=>getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>getVotingProcedureKeyPaths,ownSignatureKeyPaths:()=>ownSignatureKeyPaths});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var p=r("../../node_modules/lodash/isEqual.js");var h=r("../../node_modules/lodash/uniqBy.js");var m=r("../../node_modules/lodash/uniqWith.js");var v,_,y,w;const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const a=t.find(e=>e.rewardAccount===s.stakeAddress);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case o.CertificateType.VoteDelegation:case o.CertificateType.StakeVoteDelegation:case o.CertificateType.StakeRegistrationDelegation:case o.CertificateType.VoteRegistrationDelegation:case o.CertificateType.StakeVoteRegistrationDelegation:case o.CertificateType.Registration:case o.CertificateType.Unregistration:case o.CertificateType.StakeDeregistration:case o.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===i.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===o.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const a=t.find(e=>e.rewardAccount===s);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===o.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===o.CertificateType.MIR)if(e.kind===o.MirCertificateKind.ToStakeCreds){const a=t.find(t=>s.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const s of t){const a=checkStakeKeyHashCertificate(s,e);(v=r).requiresForeignSignatures||(v.requiresForeignSignatures=a.requiresForeignSignatures);r.derivationPaths.push(...a.derivationPaths);const o=checkPoolRegistrationCertificate(s,e);(_=r).requiresForeignSignatures||(_.requiresForeignSignatures=o.requiresForeignSignatures);r.derivationPaths.push(...o.derivationPaths);const i=checkPoolRetirementCertificate(s,e);(y=r).requiresForeignSignatures||(y.requiresForeignSignatures=i.requiresForeignSignatures);r.derivationPaths.push(...i.derivationPaths);const n=checkMirCertificate(s,e);(w=r).requiresForeignSignatures||(w.requiresForeignSignatures=n.requiresForeignSignatures);r.derivationPaths.push(...n.derivationPaths)}r.derivationPaths=m(r.derivationPaths,p);return r};const getSignersData=e=>h(e,"rewardAccount").map(e=>{const t=n.RewardAccount.toHash(e.rewardAccount);const r=d.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,t)=>{let r=false;const s=[];const a=getSignersData(e);const o=checkWithdrawals(t,a);r||(r=o.requiresForeignSignatures);s.push(...o.derivationPaths);const i=checkStakeCredentialCertificates(a,t);r||(r=i.requiresForeignSignatures);s.push(...i.derivationPaths);return{derivationPaths:new Set(s),requiresForeignSignatures:r}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const a={derivationPaths:[],requiresForeignSignatures:false};const o=getSignersData(e);for(const{voter:i}of r.votingProcedures||[]){switch(i.__typename){case c.VoterType.dRepKeyHash:if(t&&i.credential.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(t))a.derivationPaths.push(u.DREP_KEY_DERIVATION_PATH);else a.requiresForeignSignatures=true;break;case c.VoterType.stakePoolKeyHash:{const n=o.find(e=>s.Hash28ByteBase16.fromEd25519KeyHashHex(e.stakeKeyHash)===i.credential.hash);if(n)a.derivationPaths.push(n.derivationPath);else a.requiresForeignSignatures=true;break}default:a.requiresForeignSignatures=true;break}}return a};const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const a of e){var o,d;const c=null===(d=null===(o=i.Address.fromBech32(a.address))||void 0===o?void 0:o.asBase())||void 0===d?void 0:d.getPaymentCredential().hash;const l=n.RewardAccount.toHash(a.rewardAccount);if(c&&c.toString()===s)r.push({index:a.index,role:Number(a.type)});if(l&&a.stakeKeyDerivationPath&&l.toString()===s)r.push(a.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&n.RewardAccount.toHash(e.rewardAccount)===s.Hash28ByteBase16.fromEd25519KeyHashHex(t)?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,o;const n=null===(o=null===(r=i.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===o?void 0:o.getPaymentCredential();if((null==n?void 0:n.type)===i.CredentialType.ScriptHash&&n.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(t))return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false};if((null==n?void 0:n.type)===i.CredentialType.ScriptHash){return{derivationPaths:[{index:e.index,role:a.KeyRole.External}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=checkStakeCredential(s,e.keyHash);r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!l.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case l.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case l.NativeScriptKind.RequireAllOf:case l.NativeScriptKind.RequireAnyOf:case l.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case l.NativeScriptKind.RequireTimeBefore:case l.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const a of t.certificates||[])if(a.__typename===o.CertificateType.UnregisterDelegateRepresentative||a.__typename===o.CertificateType.UpdateDelegateRepresentative||a.__typename===o.CertificateType.RegisterDelegateRepresentative)if(a.dRepCredential.type!==i.CredentialType.ScriptHash&&e&&a.dRepCredential.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(e))r.derivationPaths=[u.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};const createTxInKeyPathMap=async(e,t,r)=>{const s={};const o=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(o.map(async e=>{const o=await r.resolveInput(e);if(!o)return;const i=t.find(({address:e})=>e===o.address);if(!i)return;s[(0,a.TxInId)(e)]={index:i.index,role:Number(i.type)}}));return s};const ownSignatureKeyPaths=(e,t,r,s,a)=>{const o=Object.values(r).filter(f.isNotNil);return m([...o,...getStakeCredentialKeyPaths(t,e).derivationPaths,...getDRepCredentialKeyPaths({dRepKeyHash:s,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(t,e.requiredExtraSignatures),...getVotingProcedureKeyPaths({dRepKeyHash:s,groupedAddresses:t,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(t,a).derivationPaths],p)}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js":(e,t,r)=>{"use strict";r.d(t,{stubSignTransaction:()=>stubSignTransaction});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var i=r("../../node_modules/lodash/uniqWith.js");const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>s.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:n,scripts:d},signTransactionOptions:{extraSigners:c,additionalKeyPaths:l=[]}={}})=>{const u=s.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=i([...(0,o.ownSignatureKeyPaths)(e,t,r,n,d),...l],a.deepEquals);const p=f.length+((null==c?void 0:c.length)||0);const h=new Map;for(let m=0;m<p;++m)h.set(randomPublicKey(),u);return h}},"../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeScriptDataHash=void 0;const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new d.Serialization.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(s.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const a=new d.Serialization.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){a.writeEncodedValue(u);a.writeEncodedValue(getCborEncodedArray(r));a.writeEncodedValue(u)}else{if(!t||0===t.length)return;a.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)a.writeEncodedValue(getCborEncodedArray(r));a.writeEncodedValue(s.from(e.languageViewsEncoding(),"hex"))}return c.Hash32ByteBase16.fromHexBlob(l.HexBlob.fromBytes(n.blake2b(n.blake2b.BYTES).update(a.encode()).digest()))};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const a=new d.Serialization.Costmdls;for(const o of t){const i=e.get(o);if(i)a.insert(new d.Serialization.CostModel(o,i))}return hashScriptData(a,null==r?void 0:r.map(e=>d.Serialization.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>d.Serialization.PlutusData.fromCore(e)))};t.computeScriptDataHash=computeScriptDataHash},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=t.includeChangeAndInputs=t.createPreInputSelectionTxBody=void 0;const i=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js");const c=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js");const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:s,collaterals:a,collateralReturn:o,mint:i,scriptIntegrityHash:d,referenceInputs:c,requiredExtraSignatures:l,outputs:u})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?n.Cardano.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:i,outputs:u||[],referenceInputs:c?[...c]:void 0,requiredExtraSignatures:l,scriptIntegrityHash:d,validityInterval:s,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==a?void 0:a.size)&&{collaterals:[...a]},collateralReturn:o}}};t.createPreInputSelectionTxBody=createPreInputSelectionTxBody;const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:s})=>{const a={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&s){const o=(0,c.getDefaultCostModelsForVersions)([...r]);a.scriptIntegrityHash=(0,d.computeScriptDataHash)(o,[...r],s.redeemers,s.datums)}const l=n.Serialization.TransactionBody.fromCore(a);return{body:a,hash:n.Cardano.TransactionId.fromHexBlob(n.util.bytesToHex(i.blake2b(i.blake2b.BYTES).update(n.util.hexToBytes(l.toCbor())).digest()))}};t.includeChangeAndInputs=includeChangeAndInputs;const createTransactionInternals=e=>{const{txBody:r}=(0,t.createPreInputSelectionTxBody)({...e});return(0,t.includeChangeAndInputs)({bodyPreInputSelection:r,inputSelection:e.inputSelection})};t.createTransactionInternals=createTransactionInternals},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureValidityInterval=t.calcTimeOffsetSlotNumber=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=(0,s.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>s.Cardano.Slot(e+t*r);t.calcTimeOffsetSlotNumber=calcTimeOffsetSlotNumber;const ensureValidityInterval=(e,{slotLength:r},s)=>({invalidHereafter:(0,t.calcTimeOffsetSlotNumber)(e,a,r),...s});t.ensureValidityInterval=ensureValidityInterval},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.minFee=t.minAdaRequired=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=160;const serializeBigInt=e=>{const t=new a.Serialization.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>a.Serialization.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>s.from(a.Serialization.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const o=25600;const i=1.2;let n=0;var d;const c=[...e.body.inputs,...null!==(d=e.body.referenceInputs)&&void 0!==d?d:[]];for(const l of c){const u=t.find(e=>e[0].txId===l.txId&&e[0].index===l.index);if(u&&u[1].scriptReference)n+=a.Serialization.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(n>0){f+=Math.ceil(Math.min(o,n)*s);n=Math.max(n-o,0);s*=i}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const a=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(a);const o=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(o.steps*t.steps+o.memory*t.memory))+a};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let a=false;while(!a){const i=s-r;const n=BigInt(serializeTxOutputSize(e)+o+i)*t;const d=serializeBigInt(n.toString()).length;a=s===d;s=d}const c=s-r;return BigInt(serializeTxOutputSize(e)+o+c)*t};t.minAdaRequired=minAdaRequired;const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);t.minFee=minFee},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=void 0;var o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");Object.defineProperty(t,"createTransactionInternals",{enumerable:true,get:function(){return o.createTransactionInternals}});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.defaultSelectionConstraints=t.computeSelectionLimit=t.tokenBundleSizeExceedsLimit=t.computeMinimumCoinQuantity=t.computeMinimumCost=t.MAX_U64=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js");t.MAX_U64=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const s=[];const o={[a.Cardano.RedeemerPurpose.spend]:t.spend,[a.Cardano.RedeemerPurpose.mint]:t.mint,[a.Cardano.RedeemerPurpose.certificate]:t.certificate,[a.Cardano.RedeemerPurpose.withdrawal]:t.withdrawal,[a.Cardano.RedeemerPurpose.propose]:t.propose,[a.Cardano.RedeemerPurpose.vote]:t.vote};for(const i of e){const n=o[i.purpose];if(!n)throw new Error(`No redeemers found for ${i.purpose} purpose`);let d;if(i.purpose===a.Cardano.RedeemerPurpose.spend){const c=r[i.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===i.index);if(!d)throw new Error(`Known Redeemer not found for index ${i.index}`)}s.push({...d,executionUnits:i.budget})}return s};const reorgRedeemers=(e,t,r)=>{let s=[];if(t.redeemers){s=t.redeemers.filter(e=>e.purpose!==a.Cardano.RedeemerPurpose.spend);if(e.spend){for(const[o,i]of e.spend){const n=r.findIndex(e=>o===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${o}`);i.index=n;s.push({...i})}}}return s};const computeMinimumCost=(e,t,r,s)=>async a=>{const n=await t(a);const d=[...a.inputs];const c=d.map(e=>e[0]).sort(o.sortTxIn);if(n.witness&&n.witness.redeemers&&n.witness.redeemers.length>0){n.witness.redeemers=reorgRedeemers(s,n.witness,c);n.witness.redeemers=updateRedeemers(await r.evaluate(n,d),s,c)}return{fee:(0,i.minFee)(n,d,e),redeemers:n.witness.redeemers}};t.computeMinimumCost=computeMinimumCost;const computeMinimumCoinQuantity=e=>t=>(0,i.minAdaRequired)(t,BigInt(e));t.computeMinimumCoinQuantity=computeMinimumCoinQuantity;const tokenBundleSizeExceedsLimit=e=>r=>{if(!r){return false}const s=new a.Serialization.Value(t.MAX_U64);s.setMultiasset(r);return s.toCbor().length/2>e};t.tokenBundleSizeExceedsLimit=tokenBundleSizeExceedsLimit;const getTxSize=e=>s.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const o=getTxSize(a.Serialization.Transaction.fromCore(s));if(o<=e){return r.inputs.size}return r.inputs.size-1};t.computeSelectionLimit=computeSelectionLimit;const defaultSelectionConstraints=({protocolParameters:e,buildTx:r,redeemersByType:s,txEvaluator:o})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new a.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:(0,t.computeMinimumCoinQuantity)(e.coinsPerUtxoByte),computeMinimumCost:(0,t.computeMinimumCost)(e,r,o,s),computeSelectionLimit:(0,t.computeSelectionLimit)(e.maxTxSize,r),tokenBundleSizeExceedsLimit:(0,t.tokenBundleSizeExceedsLimit)(e.maxValueSize)}};t.defaultSelectionConstraints=defaultSelectionConstraints},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createOutputValidator=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const createOutputValidator=({protocolParameters:e})=>{const validateValue=async(t,r)=>{const{coinsPerUtxoByte:i,maxValueSize:n}=r||await e();const d=a.Cardano.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const c={address:d,value:t};const l=!!t.assets&&[...t.assets.values()].some(e=>e<=0);if(l){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:l,tokenBundleSizeExceedsLimit:false}}const u=BigInt((0,o.computeMinimumCoinQuantity)(i)(c));return{coinMissing:s.BigIntMath.max([u-t.coins,0n]),minimumCoin:u,negativeAssetQty:l,tokenBundleSizeExceedsLimit:(0,o.tokenBundleSizeExceedsLimit)(n)(t.assets)}};const validateValues=async t=>{const r=await e();const s=new Map;for(const a of t)s.set(a,await validateValue(a,r));return s};const validateOutput=async(e,t)=>validateValue(e.value,t);return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const a of t)s.set(a,await validateOutput(a,r));return s},validateValue,validateValues}};t.createOutputValidator=createOutputValidator},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.GreedyTxEvaluator=void 0;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await s(this,a,"f").call(this);const{witness:o}=e;if(!o||!o.redeemers)return[];const i=[];for(const n of o.redeemers)i.push({budget:r,index:n.index,purpose:n.purpose});return i}constructor(e){a.set(this,void 0);r(this,a,e,"f")}}t.GreedyTxEvaluator=GreedyTxEvaluator;a=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TxOutputBuilder=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new l.OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new l.OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new l.OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(a(this,o,"f"))){throw new l.OutputValidationMissingRequiredError(a(this,o,"f"))}a(this,n,"f").debug("toTxOut result:",a(this,o,"f"));return{...a(this,o,"f")}}async inspect(){return a(this,o,"f")}value(e){s(this,o,{...a(this,o,"f"),value:{...e}},"f");return this}coin(e){var t;s(this,o,{...a(this,o,"f"),value:{...null===(t=a(this,o,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;s(this,o,{...a(this,o,"f"),value:{...null===(t=a(this,o,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const i=new Map(null===(r=a(this,o,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?i.delete(e):i.set(e,t);return this.assets(i)}address(e){s(this,o,{...a(this,o,"f"),address:e},"f");return this}datum(e){c.Serialization.isDatumHash(e)?s(this,o,{...a(this,o,"f"),datumHash:e},"f"):s(this,o,{...a(this,o,"f"),datum:e},"f");return this}scriptReference(e){if(!c.Cardano.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");s(this,o,{...a(this,o,"f"),scriptReference:e},"f");return this}handle(e){if(!a(this,d,"f")){throw new l.InvalidConfigurationError(l.TxOutputFailure.MissingHandleProviderError)}s(this,o,{...a(this,o,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(a(this,o,"f").handle&&a(this,d,"f")){const t=await a(this,d,"f").resolveHandles({handles:[a(this,o,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new l.HandleNotFoundError(a(this,o,"f"))}}const r=toOutputValidationError(e,await a(this,i,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:a}){o.set(this,void 0);i.set(this,void 0);n.set(this,void 0);d.set(this,null);s(this,o,{...t},"f");s(this,i,e,"f");s(this,n,r,"f");if(a)s(this,d,a,"f")}}t.TxOutputBuilder=TxOutputBuilder;o=new WeakMap,i=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T,k,A,E,j,I,x,R,M,O,B,D,N;Object.defineProperty(t,"__esModule",{value:true});t.GenericTxBuilder=void 0;const F=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const G=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const V=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const K=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const L=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js");const W=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js");const z=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const U=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js");const $=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js");const q=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js");const Y=r("../../node_modules/rxjs/dist/esm5/index.js");const Q=r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js");const X=o(r("../../node_modules/lodash/omit.js"));const J=o(r("../../node_modules/lodash/uniq.js"));const Z="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:o},inputSelection:n}=await a(this,i,"m",l).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:n,ownAddresses:t,witness:o}}async sign(){return a(this,d,"f").sign(await a(this,i,"m",l).call(this))}constructor({builder:e,signer:t}){i.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,c,e,"f");s(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,i=new WeakSet,l=async function _LazyTxSigner_build(){return s(this,n,a(this,n,"f")||await a(this,c,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;a(this,b,"f").set(t,e);return this}if(!a(this,E,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,E,"f").push(e);return this}addInput(e,t){if(t){a(this,u,"m",N).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;a(this,g,"f").set(r,e);return this}if(!a(this,A,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,A,"f").push(e);return this}addDatum(e){const t=H.Serialization.PlutusData.fromCore(e).hash();a(this,C,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)s(this,y,[...a(this,y,"f"),e.handleResolution],"f");const t=(0,X.default)(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;s(this,y,a(this,y,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,z.deepEquals)(t,e))};return this}buildOutput(e){return new L.TxOutputBuilder({handleProvider:a(this,_,"f"),logger:(0,z.contextLogger)(a(this,v,"f"),"outputBuilder"),outputValidator:a(this,p,"f"),txOut:e})}delegateFirstStakeCredential(e){s(this,w,e,"f");return this}delegatePortfolio(e){if(!a(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;s(this,h,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:H.Cardano.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(H.Cardano.DelegationMetadataLabel,H.metadatum.jsonToMetadatum(H.Cardano.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[H.Cardano.DelegationMetadataLabel,H.metadatum.jsonToMetadatum(H.Cardano.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){s(this,I,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{a(this,v,"f").debug("Building");try{const e=a(this,f,"f").bip32Account?await a(this,u,"m",O).call(this):await a(this,u,"m",M).call(this);await a(this,u,"m",x).call(this);(0,W.validateValidityInterval)(await a(this,f,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await a(this,f,"f").txBuilderProviders.addresses.get();const r=(await a(this,f,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===H.Cardano.StakeCredentialStatus.Registered||e.credentialStatus===H.Cardano.StakeCredentialStatus.Registering);const s=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const o=this.partialExtraSigners&&[...this.partialExtraSigners];const i=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:o};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=H.Cardano.computeAuxiliaryDataHash(this.partialAuxiliaryData);const n={...a(this,f,"f")};const d=void 0!==a(this,h,"f")||void 0!==a(this,w,"f");let c=false;if(a(this,f,"f").bip32Account&&d&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const l=await a(this,f,"f").bip32Account.deriveAddress({index:0,type:F.AddressType.External},0);e.set(l.rewardAccount,1)}n.inputSelector=(0,W.createGreedyInputSelector)(e,t);c=true}await Promise.all(a(this,A,"f").map(e=>a(this,u,"m",D).call(this,e,a(this,g,"f"))));await Promise.all(a(this,E,"f").map(e=>a(this,u,"m",D).call(this,e,a(this,b,"f"))));await Promise.all(a(this,j,"f").map(e=>a(this,u,"m",B).call(this,e)));const p=await (0,W.buildWitness)(a(this,P,"f"),a(this,S,"f"),a(this,C,"f"),a(this,T,"f"),a(this,k,"f"),a(this,f,"f").txBuilderProviders);const _=[...a(this,P,"f").values()].some(e=>H.Cardano.isPlutusScript(e));const{collaterals:R,collateralReturn:N}=_?await (0,W.computeCollateral)(a(this,f,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const G=new Set;for(const V of a(this,P,"f").values())if(H.Cardano.isPlutusScript(V))G.add(V.version);const L={auxiliaryData:s,certificates:this.partialTxBody.certificates,collateralReturn:N,collaterals:R,customizeCb:a(this,I,"f"),handleResolutions:a(this,y,"f"),inputs:new Set(a(this,g,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:a(this,k,"f"),referenceInputs:new Set([...a(this,b,"f").values()].map(e=>e[0])),scriptIntegrityHash:_?Z:void 0,scriptVersions:G,signingOptions:i,txEvaluator:a(this,m,"f"),witness:p};let z;try{z=await (0,q.initializeTx)(L,n)}catch(U){if(c||!(U instanceof K.InputSelectionError)||U.failure===K.InputSelectionFailure.UtxoBalanceInsufficient){throw U}n.inputSelector=new K.LargeFirstSelector({changeAddressResolver:new K.StaticChangeAddressResolver(async()=>t)});a(this,v,"f").warn(`Building attempt failed with ${U.failure}, retrying with large first selector`);z=await (0,q.initializeTx)(L,n)}const{body:$,hash:Y,inputSelection:Q,redeemers:X}=z;p.redeemers=X;return{ctx:{auxiliaryData:s,ownAddresses:t,signingContext:{handleResolutions:a(this,y,"f"),knownAddresses:t,txInKeyPathMap:await F.util.createTxInKeyPathMap($,t,a(this,f,"f").inputResolver)},signingOptions:{...i,extraSigners:o},witness:p},inputSelection:Q,tx:{body:$,hash:Y}}}catch(J){a(this,v,"f").debug("Transaction build error",J);if(Array.isArray(J))throw J[0];throw J}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new H.Serialization.Transaction(H.Serialization.TransactionBody.fromCore(e.body),H.Serialization.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?H.Serialization.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const o={...t.signingOptions,stubSign:false};const i=t.signingContext;return a(this,f,"f").witnesser.witness(s,i,o)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){u.add(this);this.partialTxBody={};f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);g.set(this,new Map);b.set(this,new Map);P.set(this,new Map);S.set(this,new Set);C.set(this,new Map);T.set(this,new Set);k.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});A.set(this,new Array);E.set(this,new Array);j.set(this,new Array);I.set(this,void 0);s(this,p,e.outputValidator||(0,U.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");s(this,f,e,"f");s(this,v,e.logger,"f");s(this,_,e.handleProvider,"f");s(this,y,[],"f");var t;s(this,m,null!==(t=e.txEvaluator)&&void 0!==t?t:new V.GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}t.GenericTxBuilder=GenericTxBuilder;f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,I=new WeakMap,u=new WeakSet,x=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},R=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(a(this,h,"f")){const r=await a(this,f,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await F.util.ensureStakeKeys({bip32Account:e,count:a(this,h,"f").length,knownAddresses:r,logger:(0,z.contextLogger)(a(this,v,"f"),"getOrCreateRewardAccounts")});await a(this,f,"f").txBuilderProviders.addresses.add(...s);t=(0,J.default)([...r,...s]).map(({rewardAccount:e})=>e)}const o=(0,Q.poll)({logger:(0,z.contextLogger)(a(this,v,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:a(this,f,"f").txBuilderProviders.rewardAccounts});try{return await (0,Y.lastValueFrom)(o)}catch{throw new G.OutOfSyncRewardAccounts(t)}},M=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===a(this,w,"f")){return Promise.resolve(t)}const r=await a(this,f,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const o=null===(e=H.Cardano.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!o){throw new Error(`Invalid credential ${o}.`)}if(null===a(this,w,"f"))if(s.credentialStatus===H.Cardano.StakeCredentialStatus.Unregistered)a(this,v,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:H.Cardano.CertificateType.StakeDeregistration,stakeCredential:o});else{if(s.credentialStatus!==H.Cardano.StakeCredentialStatus.Unregistered)a(this,v,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:H.Cardano.CertificateType.StakeRegistration,stakeCredential:o});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:H.Cardano.CertificateType.StakeDelegation,poolId:a(this,w,"f"),stakeCredential:o})}return t},O=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!a(this,h,"f")){return e}if(!a(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await a(this,u,"m",R).call(this,a(this,f,"f").bip32Account);const r=a(this,h,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();a(this,v,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===H.Cardano.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=a(this,h,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,a(this,h,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const o=t.filter(e=>{var t,r;return e.credentialStatus===H.Cardano.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=a(this,h,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(W.sortRewardAccountsDelegatedFirst).reverse();if(r.length>o.length){throw new G.InsufficientRewardAccounts(r.map(({id:e})=>e),o.map(({address:e})=>e))}const i=[];while(r.length>0&&o.length>0){const{id:n,weight:d}=r.pop();const c=o.pop();a(this,v,"f").debug(`Building delegation certificate for ${n} ${c}`);if(c.credentialStatus!==H.Cardano.StakeCredentialStatus.Registered)i.push(H.Cardano.createStakeRegistrationCert(c.address));i.push(H.Cardano.createDelegationCert(c.address,n));e.set(c.address,d)}(0,$.ensureNoDeRegistrationsWithRewardsLocked)(o);a(this,v,"f").debug(`De-registering ${o.length} stake keys`);for(const l of o)if(l.credentialStatus===H.Cardano.StakeCredentialStatus.Registered)i.push(H.Cardano.createStakeDeregistrationCert(l.address,H.inConwayEra?l.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:i};return e},B=async function _GenericTxBuilder_resolveDatum(e){if(a(this,C,"f").has(e))return;if(!a(this,f,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await a(this,f,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);a(this,C,"f").set(e,t)},D=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await a(this,f,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const o=H.Serialization.Script.fromCore(s.scriptReference).hash();a(this,P,"f").set(o,s.scriptReference);a(this,S,"f").add(o)}const i=s.datum;if(i)if(H.Serialization.isDatumHash(i)){if(!a(this,C,"f").has(i))a(this,j,"f").push(i)}else{const n=H.Serialization.PlutusData.fromCore(i).hash();a(this,C,"f").set(n,i);a(this,T,"f").add(n)}t.set(r,[{...e,address:s.address},s])},N=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;a(this,g,"f").set(r,e);if(e[1].datum){const s=H.Serialization.PlutusData.fromCore(e[1].datum).hash();a(this,C,"f").set(s,e[1].datum);a(this,T,"f").add(s)}if(e[1].datumHash)a(this,j,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!a(this,A,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,A,"f").push(e)}if(t.script){const o=H.Serialization.Script.fromCore(t.script).hash();a(this,P,"f").set(o,t.script)}if(t.redeemer){var i;null===(i=a(this,k,"f").spend)||void 0===i?void 0:i.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:H.Cardano.RedeemerPurpose.spend})}if(t.datum)if(H.Serialization.isDatumHash(t.datum)){if(!a(this,C,"f").has(t.datum))a(this,j,"f").push(t.datum)}else{const n=H.Serialization.PlutusData.fromCore(t.datum).hash();a(this,C,"f").set(n,t.datum)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDefaultCostModelsForVersions=t.buildCostModels=t.plutusV3CostModel=t.plutusV2CostModel=t.plutusV1CostModel=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");t.plutusV1CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:s.Cardano.PlutusLanguageVersion.V1};t.plutusV2CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:s.Cardano.PlutusLanguageVersion.V2};t.plutusV3CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:s.Cardano.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new s.Serialization.Costmdls;for(const r of e){const a=new s.Serialization.CostModel(r.version,r.prices);t.insert(a)}return t.toCore()};t.buildCostModels=buildCostModels;const getDefaultCostModelsForVersions=e=>{const r=[...new Set(e)];const a=r.map(e=>{switch(e){case s.Cardano.PlutusLanguageVersion.V1:return t.plutusV1CostModel;case s.Cardano.PlutusLanguageVersion.V2:return t.plutusV2CostModel;case s.Cardano.PlutusLanguageVersion.V3:return t.plutusV3CostModel;default:throw new Error("Invalid plutus language")}});return(0,t.buildCostModels)(a)};t.getDefaultCostModelsForVersions=getDefaultCostModelsForVersions},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureNoDeRegistrationsWithRewardsLocked=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const a=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!(0,a.hasCorrectVoteDelegation)(e));if(t.length>0){throw new s.DeRegistrationsWithRewardsLocked(t)}};t.ensureNoDeRegistrationsWithRewardsLocked=ensureNoDeRegistrationsWithRewardsLocked},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.hasCorrectVoteDelegation=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!s.Cardano.isDrepInfo(t)||t.active)};t.hasCorrectVoteDelegation=hasCorrectVoteDelegation},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeTx=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");const c=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const dRepPublicKeyHash=async e=>e&&(await (await e.derivePublicKey(s.util.DREP_KEY_DERIVATION_PATH)).hash()).hex();const u=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=u)||(0,l.hasCorrectVoteDelegation)(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:l,bip32Account:u,witnesser:f,logger:p})=>{var h;const[m,v,_,y,w,g]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var b;const P=null!==(b=e.txEvaluator)&&void 0!==b?b:new o.GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:(0,n.roundRobinRandomImprove)({changeAddressResolver:new n.StaticChangeAddressResolver(async()=>g)});const{txBody:S,auxiliaryData:C}=(0,d.createPreInputSelectionTxBody)({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:(0,c.ensureValidityInterval)(m.slot,v,null===(h=e.options)||void 0===h?void 0:h.validityInterval),withdrawals:getWithdrawals(y,_.protocolVersion)});const T=e.customizeCb?e.customizeCb({txBody:S}):S;var k;const A=(0,i.defaultSelectionConstraints)({buildTx:async t=>{var r;p.debug("Building TX for selection constraints",t);if(null===(r=T.withdrawals)||void 0===r?void 0:r.length)p.debug("Adding rewards withdrawal in the transaction",T.withdrawals);const o=(0,d.includeChangeAndInputs)({bodyPreInputSelection:T,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const i=await dRepPublicKeyHash(u);const n=new a.Serialization.Transaction(a.Serialization.TransactionBody.fromCore(o.body),a.Serialization.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),C?a.Serialization.AuxiliaryData.fromCore(C):void 0);var c;const h={...i&&{dRepKeyHashHex:i},handleResolutions:null!==(c=e.handleResolutions)&&void 0!==c?c:[],knownAddresses:g,txInKeyPathMap:await s.util.createTxInKeyPathMap(o.body,g,l)};const m={...e.signingOptions,stubSign:true};const{tx:v}=await f.witness(n,h,m);return v},protocolParameters:_,redeemersByType:null!==(k=e.redeemersByType)&&void 0!==k?k:{},txEvaluator:P});const E=a.Cardano.util.computeImplicitCoin(_,{certificates:T.certificates,proposalProcedures:T.proposalProcedures,withdrawals:T.withdrawals});const{selection:j,redeemers:I}=await r.select({constraints:A,implicitValue:{coin:E,mint:T.mint},outputs:new Set(T.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(w)});const x={...e.witness,redeemers:I};const{body:R,hash:M}=(0,d.includeChangeAndInputs)({bodyPreInputSelection:T,inputSelection:j,scriptVersions:e.scriptVersions,witness:x});return{body:R,hash:M,inputSelection:j,redeemers:I}};t.initializeTx=initializeTx},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidHereafterError=t.OutputValidationNegativeAssetQtyError=t.OutputValidationTokenBundleSizeError=t.OutputValidationMinimumCoinError=t.OutputValidationMissingRequiredError=t.OutOfSyncRewardAccounts=t.DeRegistrationsWithRewardsLocked=t.InsufficientRewardAccounts=t.HandleNotFoundError=t.InvalidConfigurationError=t.TxValidityIntervalFailure=t.TxOutputFailure=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var o;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(o=t.TxOutputFailure||(t.TxOutputFailure={}));var i;(function(e){e["Expired"]="Transaction expired"})(i=t.TxValidityIntervalFailure||(t.TxValidityIntervalFailure={}));class InvalidConfigurationError extends a.CustomError{constructor(e){super(e);this.message=e}}t.InvalidConfigurationError=InvalidConfigurationError;class HandleNotFoundError extends a.CustomError{constructor(e){super(o.HandleNotFound);this.txOut=e}}t.HandleNotFoundError=HandleNotFoundError;class InsufficientRewardAccounts extends a.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}t.InsufficientRewardAccounts=InsufficientRewardAccounts;class DeRegistrationsWithRewardsLocked extends a.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=s.Cardano.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}t.DeRegistrationsWithRewardsLocked=DeRegistrationsWithRewardsLocked;class OutOfSyncRewardAccounts extends a.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}t.OutOfSyncRewardAccounts=OutOfSyncRewardAccounts;class OutputValidationMissingRequiredError extends a.CustomError{constructor(e){super(o.MissingRequiredFields);this.txOut=e}}t.OutputValidationMissingRequiredError=OutputValidationMissingRequiredError;class OutputValidationMinimumCoinError extends a.CustomError{constructor(e,t){super(o.MinimumCoin);this.txOut=e;this.outputValidation=t}}t.OutputValidationMinimumCoinError=OutputValidationMinimumCoinError;class OutputValidationTokenBundleSizeError extends a.CustomError{constructor(e,t){super(o.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}t.OutputValidationTokenBundleSizeError=OutputValidationTokenBundleSizeError;class OutputValidationNegativeAssetQtyError extends a.CustomError{constructor(e,t){super(o.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}t.OutputValidationNegativeAssetQtyError=OutputValidationNegativeAssetQtyError;class InvalidHereafterError extends a.CustomError{constructor(){super(i.Expired)}}t.InvalidHereafterError=InvalidHereafterError},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeCollateral=t.buildWitness=t.validateValidityInterval=t.buildRedeemers=t.sortRewardAccountsDelegatedFirst=t.createGreedyInputSelector=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const n=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const d=s(r("../../node_modules/lodash/minBy.js"));const c=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=(0,d.default)(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new o.GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};t.createGreedyInputSelector=createGreedyInputSelector;const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===a.Cardano.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};t.sortRewardAccountsDelegatedFirst=sortRewardAccountsDelegatedFirst;const buildRedeemers=(e,t)=>{const r=[];var s,a,o,i,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(a=e.vote)&&void 0!==a?a:[],...null!==(o=e.propose)&&void 0!==o?o:[],...null!==(i=e.certificate)&&void 0!==i?i:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};t.buildRedeemers=buildRedeemers;const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new i.InvalidHereafterError}};t.validateValidityInterval=validateValidityInterval;const buildWitness=async(e,r,s,a,o,i)=>{const n={signatures:new Map};if(s){n.datums=[];for(const[d,c]of s)if(!a.has(d))n.datums.push(c)}if(e){n.scripts=[];for(const[l,u]of e)if(!r.has(l))n.scripts.push(u)}const{maxExecutionUnitsPerTransaction:f}=await i.protocolParameters();if(o)n.redeemers=(0,t.buildRedeemers)(o,f);return n};t.buildWitness=buildWitness;const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:o}=await e.protocolParameters();let i=0n;for(const d of t){r.push(d);i+=d[1].value.coins;if(i>c){const l=r[0][1].address;const u=r.map(e=>e[1].value);const f=(0,a.coalesceValueQuantities)(u);const p={...f};p.coins-=c;const h={address:l,value:p};if(isValidValue(h,(0,n.computeMinimumCoinQuantity)(s),(0,n.tokenBundleSizeExceedsLimit)(o))){return{collateralReturn:h,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};t.computeCollateral=computeCollateral},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toTxMetadata=t.validateMessage=t.MessageValidationError=t.MessageValidationFailure=t.METADATUM_LABEL=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.METADATUM_LABEL=674n;const o=64;var i;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(i=t.MessageValidationFailure||(t.MessageValidationFailure={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,o+1))}`);super(`The provided message array contains validation errors | ${t}`)}}t.MessageValidationError=MessageValidationError;const validateMessage=e=>{if("string"!=typeof e)return{failure:i.wrongType,valid:false};if(a.StringUtils.byteSize(e)>o)return{failure:i.oversize,valid:false};return{valid:true}};t.validateMessage=validateMessage;const toTxMetadata=e=>{const r="string"==typeof e?a.StringUtils.chunkByBytes(e,o):e.messages;const s=new Map;for(const i of r){const n=(0,t.validateMessage)(i);if(!n.valid)s.set(i,n)}if(s.size>0)throw new MessageValidationError(s);return new Map([[t.METADATUM_LABEL,new Map([["msg",r]])]])};t.toTxMetadata=toTxMetadata},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CIP20=void 0;t.CIP20=o(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js"))},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";r.d(t,{computeMinimumCoinQuantity:()=>computeMinimumCoinQuantity,defaultSelectionConstraints:()=>defaultSelectionConstraints,tokenBundleSizeExceedsLimit:()=>tokenBundleSizeExceedsLimit});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];const f=160;const serializeBigInt=e=>{const t=new d.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>c.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>u.from(o.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const a=25600;const o=1.2;let i=0;var n;const d=[...e.body.inputs,...null!==(n=e.body.referenceInputs)&&void 0!==n?n:[]];for(const c of d){const u=t.find(e=>e[0].txId===c.txId&&e[0].index===c.index);if(u&&u[1].scriptReference)i+=l.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(i>0){f+=Math.ceil(Math.min(a,i)*s);i=Math.max(i-a,0);s*=o}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const a=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(a);const o=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(o.steps*t.steps+o.memory*t.memory))+a};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let a=false;while(!a){const o=s-r;const i=BigInt(serializeTxOutputSize(e)+f+o)*t;const n=serializeBigInt(i.toString()).length;a=s===n;s=n}const d=s-r;return BigInt(serializeTxOutputSize(e)+f+d)*t};const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);var p=r("../../node_modules/buffer/index.js")["Buffer"];const h=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const a=[];const o={[s.RedeemerPurpose.spend]:t.spend,[s.RedeemerPurpose.mint]:t.mint,[s.RedeemerPurpose.certificate]:t.certificate,[s.RedeemerPurpose.withdrawal]:t.withdrawal,[s.RedeemerPurpose.propose]:t.propose,[s.RedeemerPurpose.vote]:t.vote};for(const i of e){const n=o[i.purpose];if(!n)throw new Error(`No redeemers found for ${i.purpose} purpose`);let d;if(i.purpose===s.RedeemerPurpose.spend){const c=r[i.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===i.index);if(!d)throw new Error(`Known Redeemer not found for index ${i.index}`)}a.push({...d,executionUnits:i.budget})}return a};const reorgRedeemers=(e,t,r)=>{let a=[];if(t.redeemers){a=t.redeemers.filter(e=>e.purpose!==s.RedeemerPurpose.spend);if(e.spend){for(const[o,i]of e.spend){const n=r.findIndex(e=>o===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${o}`);i.index=n;a.push({...i})}}}return a};const computeMinimumCost=(e,t,r,s)=>async a=>{const o=await t(a);const i=[...a.inputs];const d=i.map(e=>e[0]).sort(n.sortTxIn);if(o.witness&&o.witness.redeemers&&o.witness.redeemers.length>0){o.witness.redeemers=reorgRedeemers(s,o.witness,d);o.witness.redeemers=updateRedeemers(await r.evaluate(o,i),s,d)}return{fee:minFee(o,i,e),redeemers:o.witness.redeemers}};const computeMinimumCoinQuantity=e=>t=>minAdaRequired(t,BigInt(e));const tokenBundleSizeExceedsLimit=e=>t=>{if(!t){return false}const r=new a.Value(h);r.setMultiasset(t);return r.toCbor().length/2>e};const getTxSize=e=>p.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const a=getTxSize(o.Transaction.fromCore(s));if(a<=e){return r.inputs.size}return r.inputs.size-1};const defaultSelectionConstraints=({protocolParameters:e,buildTx:t,redeemersByType:r,txEvaluator:s})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new i.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:computeMinimumCoinQuantity(e.coinsPerUtxoByte),computeMinimumCost:computeMinimumCost(e,t,s,r),computeSelectionLimit:computeSelectionLimit(e.maxTxSize,t),tokenBundleSizeExceedsLimit:tokenBundleSizeExceedsLimit(e.maxValueSize)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js":(e,t,r)=>{"use strict";r.d(t,{createOutputValidator:()=>createOutputValidator});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var o=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");const createOutputValidator=({protocolParameters:e})=>{const validateValue=async(t,r)=>{const{coinsPerUtxoByte:i,maxValueSize:n}=r||await e();const d=a.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const c={address:d,value:t};const l=!!t.assets&&[...t.assets.values()].some(e=>e<=0);if(l){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:l,tokenBundleSizeExceedsLimit:false}}const u=BigInt((0,o.computeMinimumCoinQuantity)(i)(c));return{coinMissing:s.BigIntMath.max([u-t.coins,0n]),minimumCoin:u,negativeAssetQty:l,tokenBundleSizeExceedsLimit:(0,o.tokenBundleSizeExceedsLimit)(n)(t.assets)}};const validateValues=async t=>{const r=await e();const s=new Map;for(const a of t)s.set(a,await validateValue(a,r));return s};const validateOutput=async(e,t)=>validateValue(e.value,t);return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const a of t)s.set(a,await validateOutput(a,r));return s},validateValue,validateValues}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/GreedyTxEvaluator.js":(e,t,r)=>{"use strict";r.d(t,{GreedyTxEvaluator:()=>GreedyTxEvaluator});var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await __classPrivateFieldGet(this,s,"f").call(this);const{witness:a}=e;if(!a||!a.redeemers)return[];const o=[];for(const i of a.redeemers)o.push({budget:r,index:i.index,purpose:i.purpose});return o}constructor(e){s.set(this,void 0);__classPrivateFieldSet(this,s,e,"f")}}s=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/TxBuilder.js":(e,t,r)=>{"use strict";r.d(t,{GenericTxBuilder:()=>GenericTxBuilder});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var P=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/types.js");var S=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/GreedyTxEvaluator.js");var C=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var k=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var A=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/change.js");var E=r("../../node_modules/lodash/uniq.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var j,I,x,R,M,O,B,D,N;const pickAdditionalLargestUtxo=({utxoRemaining:e,utxoSelected:t})=>{if(0===e.length){return{utxoRemaining:e,utxoSelected:t}}const r=e.sort(([,e],[,t])=>(0,k.sortByCoins)(e,t));const[s,...a]=r;return{utxoRemaining:a,utxoSelected:[...t,s]}};class LargeFirstSelector{async select(e){var t;const{utxo:r,preSelectedUtxo:s,outputs:a,constraints:o,implicitValue:i}=e;const n=[...s];const d=[...r].filter(([e])=>!n.some(([t])=>t.txId===e.txId&&t.index===e.index));const c=[...n,...d];const{totalLovelaceOutput:l,outputAssets:u}=__classPrivateFieldGet(this,j,"m",M).call(this,new Set(c),a,i);let f=new Set(n);f=__classPrivateFieldGet(this,j,"m",O).call(this,u,c,[...f]);var p;f=__classPrivateFieldGet(this,j,"m",B).call(this,l,c,f,null!==(p=null==i?void 0:null===(t=i.coin)||void 0===t?void 0:t.input)&&void 0!==p?p:0n);const{finalSelection:h,fee:m,change:v}=await __classPrivateFieldGet(this,j,"m",N).call(this,f,a,c,u,o,__classPrivateFieldGet(this,I,"f").changeAddressResolver,i);const _=await o.computeSelectionLimit({change:v,fee:m,inputs:h,outputs:a});if(h.size>_)throw new C.InputSelectionError(C.InputSelectionFailure.MaximumInputCountExceeded);return{remainingUTxO:__classPrivateFieldGet(this,j,"m",D).call(this,[...r],h),selection:{change:v,fee:m,inputs:new Set([...h].sort(k.sortUtxoByTxIn)),outputs:a}}}constructor(e){j.add(this);I.set(this,void 0);__classPrivateFieldSet(this,I,e,"f")}}I=new WeakMap,j=new WeakSet,x=function _LargeFirstSelector_aggregateLovelace(e,t,r){var s,a;const o=(0,k.getCoinQuantity)(e);const i=(0,k.getCoinQuantity)(t);var n;const d=null!==(n=null==r?void 0:null===(s=r.coin)||void 0===s?void 0:s.input)&&void 0!==n?n:0n;var c;const l=null!==(c=null==r?void 0:null===(a=r.coin)||void 0===a?void 0:a.deposit)&&void 0!==c?c:0n;return{totalIn:o+d,totalOut:i+l}},R=function _LargeFirstSelector_aggregateAssets(e,t,r){var s;const a=null!==(s=(0,T.coalesceValueQuantities)(t).assets)&&void 0!==s?s:new Map;const o=(0,T.coalesceValueQuantities)(e).assets;var i;const n=null!==(i=null==r?void 0:r.mint)&&void 0!==i?i:new Map;const d=new Map;const c=new Map;for(const[l,u]of n)(u>0n?d:c).set(l,u>0n?u:-u);let f=(0,k.addTokenMaps)(a,c);var p;f=null!==(p=(0,k.subtractTokenMaps)(f,d))&&void 0!==p?p:new Map;var h;const m=null!==(h=(0,k.addTokenMaps)(o,d))&&void 0!==h?h:new Map;return{available:m,required:f}},M=function _LargeFirstSelector_computeNetImplicitSelectionValues(e,t,r){const s=(0,k.toValues)([...e]);const a=(0,k.toValues)([...t]);const{totalIn:o,totalOut:i}=__classPrivateFieldGet(this,j,"m",x).call(this,s,a,r);const{required:n,available:d}=__classPrivateFieldGet(this,j,"m",R).call(this,s,a,r);const c=o-i;const l=(0,k.subtractTokenMaps)(d,n);if(0===e.size||c<0n||(0,k.hasNegativeAssetValue)(l))throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);return{outputAssets:n,totalLovelaceInput:o,totalLovelaceOutput:i}},O=function _LargeFirstSelector_selectAssets(e,t,r){const s=new Set(r);for(const[a,o]of e){var i;const n=t.filter(([e,t])=>{var r;return(null!==(i=null===(r=t.value.assets)||void 0===r?void 0:r.get(a))&&void 0!==i?i:0n)>0n}).sort(([,e],[,t])=>(0,k.sortByAssetQuantity)(a)(e,t));let d=0n;for(const c of n){var l;s.add(c);var u;d+=null!==(u=null===(l=c[1].value.assets)||void 0===l?void 0:l.get(a))&&void 0!==u?u:0n;if(d>=o)break}if(d<o)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient)}return s},B=function _LargeFirstSelector_selectLovelace(e,t,r,s){const a=new Set(r);const o=new Set([...r].map(([e])=>e));const i=t.filter(([e])=>!o.has(e)).sort(([,e],[,t])=>(0,k.sortByCoins)(e,t));let n=(0,k.getCoinQuantity)((0,k.toValues)([...a]))+s;for(const d of i){if(n>=e)break;a.add(d);n+=d[1].value.coins}if(0===a.size){if(0===i.length)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);a.add(i[0])}if(n<e)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);return a},D=function _LargeFirstSelector_computeRemainingUtxo(e,t){const r=new Set([...t].map(([e])=>e));return new Set(e.filter(([e])=>!r.has(e)))},N=async function _LargeFirstSelector_expandUtxosUntilFeeCovered(e,t,r,s,a,o,i){var n,d,c,l;const u=[...e];const f=r.filter(t=>!e.has(t)).sort(([,e],[,t])=>(0,k.sortByCoins)(e,t));const p=(0,k.toValues)([...t]);const h=k.stubMaxSizeAddress;const m={deposit:(null==i?void 0:null===(n=i.coin)||void 0===n?void 0:n.deposit)||0n,input:(null==i?void 0:null===(d=i.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==i?void 0:null===(c=i.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==i?void 0:null===(l=i.coin)||void 0===l?void 0:l.withdrawals)||0n};const v=(null==i?void 0:i.mint)||new Map;const _=E([...s.keys(),...v.keys()]);const{implicitTokensInput:y,implicitTokensSpend:w}=(0,k.mintToImplicitTokens)(v);const g={input:e=>y.get(e)||0n,spend:e=>w.get(e)||0n};const{change:b,fee:P,inputs:S}=await (0,A.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:a.computeMinimumCoinQuantity,estimateTxCosts:(e,r)=>a.computeMinimumCost({change:r.map(e=>({address:h,value:e})),fee:k.MAX_U64,inputs:new Set(e),outputs:t}),implicitValue:{implicitCoin:m,implicitTokens:g},outputValues:p,pickAdditionalUtxo:pickAdditionalLargestUtxo,tokenBundleSizeExceedsLimit:a.tokenBundleSizeExceedsLimit,uniqueTxAssetIDs:_,utxoSelection:{utxoRemaining:f,utxoSelected:u}});if(0===b.length){return{change:[],fee:P,finalSelection:new Set(S)}}const C=b.map(e=>({address:h,value:e}));const T=await o.resolve({change:C,fee:P,inputs:new Set(S),outputs:t});return{change:T,fee:P,finalSelection:new Set(S)}};var F=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/ChangeAddress/StaticChangeAddressResolver.js");var OutputBuilder_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var OutputBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var H,G,V,K;const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new P.OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new P.OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new P.OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(OutputBuilder_classPrivateFieldGet(this,H,"f"))){throw new P.OutputValidationMissingRequiredError(OutputBuilder_classPrivateFieldGet(this,H,"f"))}OutputBuilder_classPrivateFieldGet(this,V,"f").debug("toTxOut result:",OutputBuilder_classPrivateFieldGet(this,H,"f"));return{...OutputBuilder_classPrivateFieldGet(this,H,"f")}}async inspect(){return OutputBuilder_classPrivateFieldGet(this,H,"f")}value(e){OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),value:{...e}},"f");return this}coin(e){var t;OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,H,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,H,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const a=new Map(null===(r=OutputBuilder_classPrivateFieldGet(this,H,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?a.delete(e):a.set(e,t);return this.assets(a)}address(e){OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),address:e},"f");return this}datum(e){g.isDatumHash(e)?OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),datumHash:e},"f"):OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),datum:e},"f");return this}scriptReference(e){if(!u.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),scriptReference:e},"f");return this}handle(e){if(!OutputBuilder_classPrivateFieldGet(this,K,"f")){throw new P.InvalidConfigurationError(P.TxOutputFailure.MissingHandleProviderError)}OutputBuilder_classPrivateFieldSet(this,H,{...OutputBuilder_classPrivateFieldGet(this,H,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(OutputBuilder_classPrivateFieldGet(this,H,"f").handle&&OutputBuilder_classPrivateFieldGet(this,K,"f")){const t=await OutputBuilder_classPrivateFieldGet(this,K,"f").resolveHandles({handles:[OutputBuilder_classPrivateFieldGet(this,H,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new P.HandleNotFoundError(OutputBuilder_classPrivateFieldGet(this,H,"f"))}}const r=toOutputValidationError(e,await OutputBuilder_classPrivateFieldGet(this,G,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:s}){H.set(this,void 0);G.set(this,void 0);V.set(this,void 0);K.set(this,null);OutputBuilder_classPrivateFieldSet(this,H,{...t},"f");OutputBuilder_classPrivateFieldSet(this,G,e,"f");OutputBuilder_classPrivateFieldSet(this,V,r,"f");if(s)OutputBuilder_classPrivateFieldSet(this,K,s,"f")}}H=new WeakMap,G=new WeakMap,V=new WeakMap,K=new WeakMap;var L=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,W=Math.ceil,z=Math.floor,U="[BigNumber Error] ",$=U+"Number primitive has more than 15 significant digits: ",q=1e14,Y=14,Q=9007199254740991,X=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],J=1e7,Z=1e9;function clone(e){var t,r,s,a=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},o=new BigNumber(1),i=20,n=4,d=-7,c=21,l=-1e7,u=1e7,f=false,p=1,h=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",_=true;function BigNumber(e,t){var a,o,d,c,f,p,h,m,y=this;if(!(y instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){y.s=e.s;if(!e.c||e.e>u)y.c=y.e=null;else if(e.e<l)y.c=[y.e=0];else{y.e=e.e;y.c=e.c.slice()}return}if((p="number"==typeof e)&&0*e==0){y.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,f=e;f>=10;f/=10,c++);if(c>u)y.c=y.e=null;else{y.e=c;y.c=[e]}return}m=String(e)}else{if(!L.test(m=String(e)))return s(y,m,p);y.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}if((c=m.indexOf("."))>-1)m=m.replace(".","");if((f=m.search(/e/i))>0){if(c<0)c=f;c+=+m.slice(f+1);m=m.substring(0,f)}else if(c<0)c=m.length}else{intCheck(t,2,v.length,"Base");if(10==t&&_){y=new BigNumber(e);return round(y,i+y.e+1,n)}m=String(e);if(p="number"==typeof e){if(0*e!=0)return s(y,m,p,t);y.s=1/e<0?(m=m.slice(1),-1):1;if(BigNumber.DEBUG&&m.replace(/^0\.0*|\./,"").length>15){throw Error($+e)}}else{y.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1}a=v.slice(0,t);c=f=0;for(h=m.length;f<h;f++)if(a.indexOf(o=m.charAt(f))<0){if("."==o){if(f>c){c=h;continue}}else if(!d){if(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase())){d=true;f=-1;c=0;continue}}return s(y,String(e),p,t)}p=false;m=r(m,t,10,y.s);if((c=m.indexOf("."))>-1)m=m.replace(".","");else c=m.length}for(f=0;48===m.charCodeAt(f);f++);for(h=m.length;48===m.charCodeAt(--h););if(m=m.slice(f,++h)){h-=f;if(p&&BigNumber.DEBUG&&h>15&&(e>Q||e!==z(e))){throw Error($+y.s*e)}if((c=c-f-1)>u)y.c=y.e=null;else if(c<l)y.c=[y.e=0];else{y.e=c;y.c=[];f=(c+1)%Y;if(c<0)f+=Y;if(f<h){if(f)y.c.push(+m.slice(0,f));for(h-=Y;f<h;)y.c.push(+m.slice(f,f+=Y));f=Y-(m=m.slice(f)).length}else{f-=h}for(;f--;m+="0");y.c.push(+m)}}else{y.c=[y.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,Z,t);i=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);n=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-Z,0,t);intCheck(r[1],0,Z,t);d=r[0];c=r[1]}else{intCheck(r,-Z,Z,t);d=-(c=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-Z,-1,t);intCheck(r[1],1,Z,t);l=r[0];u=r[1]}else{intCheck(r,-Z,Z,t);if(r)l=-(u=r<0?-r:r);else{throw Error(U+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=r;else{f=!r;throw Error(U+"crypto unavailable")}else f=r;else{throw Error(U+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);p=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,Z,t);h=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)m=r;else throw Error(U+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(U+t+" invalid: "+r)}_="0123456789"==r.slice(0,10);v=r}}else{throw Error(U+"Object expected: "+e)}return{DECIMAL_PLACES:i,ROUNDING_MODE:n,EXPONENTIAL_AT:[d,c],RANGE:[l,u],CRYPTO:f,MODULO_MODE:p,POW_PRECISION:h,FORMAT:m,ALPHABET:v}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===o||-1===o)&&a>=-Z&&a<=Z&&a===z(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%Y;if(t<1)t+=Y;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=q||r!==z(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===o||1===o||-1===o)){return true}throw Error(U+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,a.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,a.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return z(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,a,n,d,c=0,l=[],u=new BigNumber(o);if(null==e)e=i;else intCheck(e,0,Z);n=W(e/Y);if(f)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(n*=2));for(;c<n;){d=131072*r[c]+(r[c+1]>>>11);if(d>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[c]=s[0];r[c+1]=s[1]}else{l.push(d%1e14);c+=2}}c=n/2}else if(crypto.randomBytes){r=crypto.randomBytes(n*=7);for(;c<n;){d=(31&r[c])*281474976710656+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6];if(d>=9e15)crypto.randomBytes(7).copy(r,c);else{l.push(d%1e14);c+=7}}c=n/7}else{f=false;throw Error(U+"crypto unavailable")}if(!f){for(;c<n;){d=t();if(d<9e15)l[c++]=d%1e14}}n=l[--c];e%=Y;if(n&&e){d=X[Y-e];l[c]=z(n/d)*d}for(;0===l[c];l.pop(),c--);if(c<0)l=[a=0];else{for(a=-1;0===l[0];l.splice(0,1),a-=Y);for(c=1,d=l[0];d>=10;d/=10,c++);if(c<Y)a-=Y-c}u.e=a;u.c=l;return u}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,o=[0],i,n=0,d=e.length;for(;n<d;){for(i=o.length;i--;o[i]*=t);o[0]+=s.indexOf(e.charAt(n++));for(a=0;a<o.length;a++)if(o[a]>r-1){if(null==o[a+1])o[a+1]=0;o[a+1]+=o[a]/r|0;o[a]%=r}}return o.reverse()}return function(r,s,a,o,d){var c,l,u,f,p,m,_,y,w=r.indexOf("."),g=i,b=n;if(w>=0){f=h;h=0;r=r.replace(".","");y=new BigNumber(s);m=y.pow(r.length-w);h=f;y.c=toBaseOut(toFixedPoint(coeffToString(m.c),m.e,"0"),10,a,e);y.e=y.c.length}_=toBaseOut(r,s,a,d?(c=v,e):(c=e,v));u=f=_.length;for(;0==_[--f];_.pop());if(!_[0])return c.charAt(0);if(w<0)--u;else{m.c=_;m.e=u;m.s=o;m=t(m,y,g,b,a);_=m.c;p=m.r;u=m.e}l=u+g+1;w=_[l];f=a/2;p=p||l<0||null!=_[l+1];p=b<4?(null!=w||p)&&(0==b||b==(m.s<0?3:2)):w>f||w==f&&(4==b||p||6==b&&1&_[l-1]||b==(m.s<0?8:7));if(l<1||!_[0])r=p?toFixedPoint(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{_.length=l;if(p){for(--a;++_[--l]>a;){_[l]=0;if(!l){++u;_=[1].concat(_)}}}for(f=_.length;!_[--f];);for(w=0,r="";w<=f;r+=c.charAt(_[w++]));r=toFixedPoint(r,u,c.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,o,i,n=0,d=e.length,c=t%J,l=t/J|0;for(e=e.slice();d--;){o=e[d]%J;i=e[d]/J|0;s=l*o+i*c;a=c*o+s%J*J+n;n=(a/r|0)+(s/J|0)+l*i;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,o;if(r!=s)o=r>s?1:-1;else{for(a=o=0;a<r;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}}return o}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var o,i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b,P=e.s==t.s?1:-1,S=e.c,C=t.c;if(!S||!S[0]||!C||!C[0]){return new BigNumber(e.s&&t.s&&(S?!C||S[0]!=C[0]:C)?S&&0==S[0]||!C?0*P:P/0:NaN)}f=new BigNumber(P);p=f.c=[];i=e.e-t.e;P=r+i+1;if(!a){a=q;i=bitFloor(e.e/Y)-bitFloor(t.e/Y);P=P/Y|0}for(n=0;C[n]==(S[n]||0);n++);if(C[n]>(S[n]||0))i--;if(P<0){p.push(1);d=true}else{y=S.length;g=C.length;n=0;P+=2;c=z(a/(C[0]+1));if(c>1){C=multiply(C,c,a);S=multiply(S,c,a);g=C.length;y=S.length}_=g;h=S.slice(0,g);m=h.length;for(;m<g;h[m++]=0);b=C.slice();b=[0].concat(b);w=C[0];if(C[1]>=a/2)w++;do{c=0;o=compare(C,h,g,m);if(o<0){v=h[0];if(g!=m)v=v*a+(h[1]||0);c=z(v/w);if(c>1){if(c>=a)c=a-1;l=multiply(C,c,a);u=l.length;m=h.length;while(1==compare(l,h,u,m)){c--;subtract(l,g<u?b:C,u,a);u=l.length;o=1}}else{if(0==c)o=c=1;l=C.slice();u=l.length}if(u<m)l=[0].concat(l);subtract(h,l,m,a);m=h.length;if(-1==o){while(compare(C,h,g,m)<1){c++;subtract(h,g<m?b:C,m,a);m=h.length}}}else if(0===o){c++;h=[0]}p[n++]=c;if(h[0])h[m++]=S[_]||0;else{h=[S[_]];m=1}}while((_++<y||null!=h[0])&&P--)d=null!=h[0];if(!p[0])p.splice(0,1)}if(a==q){for(n=1,P=p[0];P>=10;P/=10,n++);round(f,r+(f.e=n+i*Y-1)+1,s,d)}else{f.e=i;f.r=+d}return f}}();function format(e,t,r,s){var a,o,i,l,u;if(null==r)r=n;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];i=e.e;if(null==t){u=coeffToString(e.c);u=1==s||2==s&&(i<=d||i>=c)?toExponential(u,i):toFixedPoint(u,i,"0")}else{e=round(new BigNumber(e),t,r);o=e.e;u=coeffToString(e.c);l=u.length;if(1==s||2==s&&(t<=o||o<=d)){for(;l<t;u+="0",l++);u=toExponential(u,o)}else{t-=i;u=toFixedPoint(u,o,"0");if(o+1>l){if(--t>0)for(u+=".";t--;u+="0");}else{t+=o-l;if(t>0){if(o+1==l)u+=".";for(;t--;u+="0");}}}}return e.s<0&&a?"-"+u:u}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*Y-1)>u)e.c=e.e=null;else if(r<l)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,i,n,d){var c,l=n?i:i.replace(a,"");if(s.test(l))o.s=isNaN(l)?null:l<0?-1:1;else{if(!n){l=l.replace(e,function(e,t,r){c="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=c?e:t});if(d){c=d;l=l.replace(t,"$1").replace(r,"0.$1")}if(i!=l)return new BigNumber(l,c)}if(BigNumber.DEBUG){throw Error(U+"Not a"+(d?" base "+d:"")+" number: "+i)}o.s=null}o.c=o.e=null}}();function round(e,t,r,s){var a,o,i,n,d,c,f,p=e.c,h=X;if(p){e:{for(a=1,n=p[0];n>=10;n/=10,a++);o=t-a;if(o<0){o+=Y;i=t;d=p[c=0];f=d/h[a-i-1]%10|0}else{c=W((o+1)/Y);if(c>=p.length)if(s){for(;p.length<=c;p.push(0));d=f=0;a=1;o%=Y;i=o-Y+1}else{break e}else{d=n=p[c];for(a=1;n>=10;n/=10,a++);o%=Y;i=o-Y+a;f=i<0?0:d/h[a-i-1]%10|0}}s=s||t<0||null!=p[c+1]||(i<0?d:d%h[a-i-1]);s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(o>0?i>0?d/h[a-i]:0:p[c-1])%10&1||r==(e.s<0?8:7));if(t<1||!p[0]){p.length=0;if(s){t-=e.e+1;p[0]=h[(Y-t%Y)%Y];e.e=-t||0}else{p[0]=e.e=0}return e}if(0==o){p.length=c;n=1;c--}else{p.length=c+1;n=h[Y-o];p[c]=i>0?z(d/h[a-i]%h[i])*n:0}if(s){for(;;){if(0==c){for(o=1,i=p[0];i>=10;i/=10,o++);i=p[0]+=n;for(n=1;i>=10;i/=10,n++);if(o!=n){e.e++;if(p[0]==q)p[0]=1}break}p[c]+=n;if(p[c]!=q)break;p[c--]=0;n=1}}for(o=p.length;0===p[--o];p.pop());}if(e.e>u)e.c=e.e=null;else if(e.e<l)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=d||r>=c?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}a.absoluteValue=a.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};a.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};a.decimalPlaces=a.dp=function(e,t){var r,s,a,o=this;if(null!=e){intCheck(e,0,Z);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(o),e+o.e+1,t)}if(!(r=o.c))return null;s=((a=r.length-1)-bitFloor(this.e/Y))*Y;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};a.dividedBy=a.div=function(e,r){return t(this,new BigNumber(e,r),i,n)};a.dividedToIntegerBy=a.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};a.exponentiatedBy=a.pow=function(e,t){var r,s,a,i,d,c,l,u,f,p=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(U+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);c=e.e>14;if(!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0]){f=new BigNumber(Math.pow(+valueOf(p),c?e.s*(2-isOdd(e)):+valueOf(e)));return t?f.mod(t):f}l=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!l&&p.isInteger()&&t.isInteger();if(s)p=p.mod(t)}else if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||c&&p.c[1]>=24e7:p.c[0]<8e13||c&&p.c[0]<=9999975e7))){i=(p.s<0&&isOdd(e),-0);if(p.e>-1)i=1/i;return new BigNumber(l?1/i:i)}else if(h)i=W(h/Y+2);if(c){r=new BigNumber(.5);if(l)e.s=1;u=isOdd(e)}else{a=Math.abs(+valueOf(e));u=a%2}f=new BigNumber(o);for(;;){if(u){f=f.times(p);if(!f.c)break;if(i){if(f.c.length>i)f.c.length=i}else if(s)f=f.mod(t)}if(a){a=z(a/2);if(0===a)break;u=a%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)u=isOdd(e);else{a=+valueOf(e);if(0===a)break;u=a%2}}p=p.times(p);if(i){if(p.c&&p.c.length>i)p.c.length=i}else if(s)p=p.mod(t)}if(s)return f;if(l)f=o.div(f);return t?f.mod(t):i?round(f,h,n,d):f};a.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=n;else intCheck(e,0,8);return round(t,t.e+1,e)};a.isEqualTo=a.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};a.isFinite=function(){return!!this.c};a.isGreaterThan=a.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isInteger=function(){return!!this.c&&bitFloor(this.e/Y)>this.c.length-2};a.isLessThan=a.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};a.isLessThanOrEqualTo=a.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isNaN=function(){return!this.s};a.isNegative=function(){return this.s<0};a.isPositive=function(){return this.s>0};a.isZero=function(){return!!this.c&&0==this.c[0]};a.minus=function(e,t){var r,s,a,o,i=this,d=i.s;e=new BigNumber(e,t);t=e.s;if(!d||!t)return new BigNumber(NaN);if(d!=t){e.s=-t;return i.plus(e)}var c=i.e/Y,l=e.e/Y,u=i.c,f=e.c;if(!c||!l){if(!u||!f)return u?(e.s=-t,e):new BigNumber(f?i:NaN);if(!u[0]||!f[0]){return f[0]?(e.s=-t,e):new BigNumber(u[0]?i:-0)}}c=bitFloor(c);l=bitFloor(l);u=u.slice();if(d=c-l){if(o=d<0){d=-d;a=u}else{l=c;a=f}a.reverse();for(t=d;t--;a.push(0));a.reverse()}else{s=(o=(d=u.length)<(t=f.length))?d:t;for(d=t=0;t<s;t++)if(u[t]!=f[t]){o=u[t]<f[t];break}}if(o)a=u,u=f,f=a,e.s=-e.s;t=(s=f.length)-(r=u.length);if(t>0)for(;t--;u[r++]=0);t=q-1;for(;s>d;){if(u[--s]<f[s]){for(r=s;r&&!u[--r];u[r]=t);--u[r];u[s]+=q}u[s]-=f[s]}for(;0==u[0];u.splice(0,1),--l);if(!u[0]){e.s=3==n?-1:1;e.c=[e.e=0];return e}return normalise(e,u,l)};a.modulo=a.mod=function(e,r){var s,a,o=this;e=new BigNumber(e,r);if(o.c&&e.s&&(!e.c||e.c[0])){if(!e.c||o.c&&!o.c[0]){return new BigNumber(o)}}else{return new BigNumber(NaN)}if(9==p){a=e.s;e.s=1;s=t(o,e,0,3);e.s=a;s.s*=a}else{s=t(o,e,0,p)}e=o.minus(s.times(e));if(!e.c[0]&&1==p)e.s=o.s;return e};a.multipliedBy=a.times=function(e,t){var r,s,a,o,i,n,d,c,l,u,f,p,h,m,v,_=this,y=_.c,w=(e=new BigNumber(e,t)).c;if(!y||!w||!y[0]||!w[0]){if(_.s&&e.s&&(!y||y[0]||w)&&(!w||w[0]||y)){e.s*=_.s;if(y&&w){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(_.e/Y)+bitFloor(e.e/Y);e.s*=_.s;d=y.length;u=w.length;if(d<u)h=y,y=w,w=h,a=d,d=u,u=a;for(a=d+u,h=[];a--;h.push(0));m=q;v=J;for(a=u;--a>=0;){r=0;f=w[a]%v;p=w[a]/v|0;for(i=d,o=a+i;o>a;){c=y[--i]%v;l=y[i]/v|0;n=p*c+l*f;c=f*c+n%v*v+h[o]+r;r=(c/m|0)+(n/v|0)+p*l;h[o--]=c%m}h[o]=r}if(r)++s;else h.splice(0,1);return normalise(e,h,s)};a.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};a.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var o=s.e/Y,i=e.e/Y,n=s.c,d=e.c;if(!o||!i){if(!n||!d)return new BigNumber(a/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*a)}o=bitFloor(o);i=bitFloor(i);n=n.slice();if(a=o-i){if(a>0){i=o;r=d}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=d.length;if(a-t<0)r=d,d=n,n=r,t=a;for(a=0;t;){a=(n[--t]=n[t]+d[t]+a)/q|0;n[t]=q===n[t]?0:n[t]%q}if(a){n=[a].concat(n);++i}return normalise(e,n,i)};a.precision=a.sd=function(e,t){var r,s,a,o=this;if(null!=e&&!!e!==e){intCheck(e,1,Z);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(o),e,t)}if(!(r=o.c))return null;a=r.length-1;s=a*Y+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&o.e+1>s)s=o.e+1;return s};a.shiftedBy=function(e){intCheck(e,-Q,Q);return this.times("1e"+e)};a.squareRoot=a.sqrt=function(){var e,r,s,a,o,d=this,c=d.c,l=d.s,u=d.e,f=i+4,p=new BigNumber("0.5");if(1!==l||!c||!c[0]){return new BigNumber(!l||l<0&&(!c||c[0])?NaN:c?d:1/0)}l=Math.sqrt(+valueOf(d));if(0==l||l==1/0){r=coeffToString(c);if((r.length+u)%2==0)r+="0";l=Math.sqrt(+r);u=bitFloor((u+1)/2)-(u<0||u%2);if(l==1/0)r="5e"+u;else{r=l.toExponential();r=r.slice(0,r.indexOf("e")+1)+u}s=new BigNumber(r)}else{s=new BigNumber(l+"")}if(s.c[0]){u=s.e;l=u+f;if(l<3)l=0;for(;;){o=s;s=p.times(o.plus(t(d,o,f,1)));if(coeffToString(o.c).slice(0,l)===(r=coeffToString(s.c)).slice(0,l)){if(s.e<u)--l;r=r.slice(l-3,l+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+i+2,1);e=!s.times(s).eq(d)}break}if(!a){round(o,o.e+i+2,0);if(o.times(o).eq(d)){s=o;break}}f+=4;l+=4;a=1}}}return round(s,s.e+i+1,n,e)};a.toExponential=function(e,t){if(null!=e){intCheck(e,0,Z);e++}return format(this,e,t,1)};a.toFixed=function(e,t){if(null!=e){intCheck(e,0,Z);e=e+this.e+1}return format(this,e,t)};a.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=m}else if("object"!=typeof r){throw Error(U+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var o,i=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,c=r.groupSeparator||"",l=i[0],u=i[1],f=a.s<0,p=f?l.slice(1):l,h=p.length;if(d)o=n,n=d,d=o,h-=o;if(n>0&&h>0){o=h%n||n;l=p.substr(0,o);for(;o<h;o+=n)l+=c+p.substr(o,n);if(d>0)l+=c+p.slice(o);if(f)l="-"+l}s=u?l+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?u.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):u):l}return(r.prefix||"")+s+(r.suffix||"")};a.toFraction=function(e){var r,s,a,i,d,c,l,f,p,h,m,v,_=this,y=_.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(o)){throw Error(U+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!y)return new BigNumber(_);r=new BigNumber(o);p=s=new BigNumber(o);a=f=new BigNumber(o);v=coeffToString(y);d=r.e=v.length-_.e-1;r.c[0]=X[(c=d%Y)<0?Y+c:c];e=!e||l.comparedTo(r)>0?d>0?r:p:l;c=u;u=1/0;l=new BigNumber(v);f.c[0]=0;for(;;){h=t(l,r,0,1);i=s.plus(h.times(a));if(1==i.comparedTo(e))break;s=a;a=i;p=f.plus(h.times(i=p));f=i;r=l.minus(h.times(i=r));l=i}i=t(e.minus(s),a,0,1);f=f.plus(i.times(p));s=s.plus(i.times(a));f.s=p.s=_.s;d*=2;m=t(p,a,d,n).minus(_).abs().comparedTo(t(f,s,d,n).minus(_).abs())<1?[p,a]:[f,s];u=c;return m};a.toNumber=function(){return+valueOf(this)};a.toPrecision=function(e,t){if(null!=e)intCheck(e,1,Z);return format(this,e,t,2)};a.toString=function(e){var t,s=this,a=s.s,o=s.e;if(null===o)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=o<=d||o>=c?toExponential(coeffToString(s.c),o):toFixedPoint(coeffToString(s.c),o,"0");else if(10===e&&_){s=round(new BigNumber(s),i+o+1,n);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,v.length,"Base");t=r(toFixedPoint(coeffToString(s.c),o,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};a.valueOf=a.toJSON=function(){return valueOf(this)};a._isBigNumber=true;a[Symbol.toStringTag]="BigNumber";a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,o=e[0]+"";for(;s<a;){t=e[s++]+"";r=Y-t.length;for(;r--;t="0"+t);o+=t}for(a=o.length;48===o.charCodeAt(--a););return o.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,o=t.c,i=e.s,n=t.s,d=e.e,c=t.e;if(!i||!n)return null;r=a&&!a[0];s=o&&!o[0];if(r||s)return r?s?0:-n:i;if(i!=n)return i;r=i<0;s=d==c;if(!a||!o)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=o.length)?d:c;for(i=0;i<n;i++)if(a[i]!=o[i])return a[i]>o[i]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==z(e)){throw Error(U+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/Y)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var ee=clone();const et=null;const er=.05;const distributeAssets=(e,t,r,s)=>{const a=[...e];if(0===a.length)return a;const o=(0,T.coalesceValueQuantities)(a.map(e=>e.value)).assets;if(!o||0===o.size)return a;for(const i of a)i.value.assets=void 0;let n=0;const d=a;const c=[];while(o.size>0){const l=new Map([...o.entries()].splice(0,1));const u=n%d.length;const f={...d[u].value};f.assets=(0,k.addTokenMaps)(f.assets,l);if((0,k.isValidValue)(f,t,r,s)){d[u].value=f;o.delete([...l.keys()][0])}else{c.push(...d.splice(u,1))}if(0===d.length)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoFullyDepleted);++n}return[...a,...c]};const getMinUtxoAmount=e=>{const t=new ee(.03);let r=e.toString().length-1;let s="1";while(r>0){s+="0";--r}return BigInt(new ee(s).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const s=e.value.coins;const a=getMinUtxoAmount(s);let o=s;let i=0n;const n=new Array;const d=new ee(2);while(o>=a){const c=BigInt(new ee(o.toString()).dividedBy(d).toFixed(0,0));const l=o-c;if(l<=a||l<=t({address:e.address,value:{assets:e.value.assets,coins:s-i}})+r){n.push(s-i);break}i+=c;n.push(c);o-=c}return n.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,s,a,o)=>{const i=await e();const n=[...i.values()].reduce((e,t)=>e+t,0);const d=new Map([...i.entries()].map(e=>[e[0],e[1]/n]));const c=[...d.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-c)>er)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);const l=[...d.entries()].map(e=>({address:e[0],value:{coins:0n}}));let u=0n;const f=new ee(t.toString());for(const p of l){const h=new ee(d.get(p.address));const m=BigInt(f.multipliedBy(h).toFixed(0,0));u+=m;p.value.coins=u>t?m-(u-t):m}if(u<t){const v=t-u;l[l.length-1].value.coins+=v}const _=l.flatMap(e=>splitChangeOutput(e,s,o));const y=_.sort(k.sortByCoins).filter(e=>e.value.coins>0n);if(y&&y.length>0)y[0].value.assets=r;if(!r||0===r.size)return y;return distributeAssets(y,s,a,o)};const adjustOutputsForFee=async(e,t,r,s,a,o)=>{const i=new Set([...s,...a]);const{fee:n,redeemers:d}=await t.computeMinimumCost({change:[],fee:o,inputs:r,outputs:i});if(n===e)return{change:[],fee:n,feeAccountedFor:true,redeemers:d};if(e<n)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);const c=[...a];c.sort(k.sortByCoins);let l=false;for(const u of c){const f=u.value.coins-n;if(f>=t.computeMinimumCoinQuantity(u)){u.value.coins=f;l=true;break}}return{change:[...c],fee:n,feeAccountedFor:l,redeemers:d}};const splitChangeAndComputeFee=async(e,t,r,s,a,o,i)=>{const n=await splitChange(o,r,s,a.computeMinimumCoinQuantity,a.tokenBundleSizeExceedsLimit,i);let d=await adjustOutputsForFee(r,a,e,t,n,i);if(d.fee>=r){const c={change:[{address:k.stubMaxSizeAddress,value:{assets:s,coins:0n}}],fee:d.fee,feeAccountedFor:true};if(c.change[0].value.coins<a.computeMinimumCoinQuantity(c.change[0]))throw new C.InputSelectionError(C.InputSelectionFailure.UtxoFullyDepleted);return c}if(i<d.fee){d=await splitChangeAndComputeFee(e,t,r,s,a,o,d.fee);if(0===d.change.length)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoFullyDepleted)}for(const l of d.change)if(l.value.coins<a.computeMinimumCoinQuantity(l))throw new C.InputSelectionError(C.InputSelectionFailure.UtxoFullyDepleted);if(!d.feeAccountedFor)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoFullyDepleted);return d};var GreedyInputSelector_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var GreedyInputSelector_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var es;class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:a,outputs:o,constraints:i,implicitValue:n}=e;const d=new Set([...a,...s]);const c=(0,k.toValues)([...d]);const l=(0,k.toValues)([...o]);const u=(0,k.getCoinQuantity)(c);const f=(0,k.getCoinQuantity)(l);const p=(0,T.coalesceValueQuantities)(c).assets;const h=(0,T.coalesceValueQuantities)(l).assets;const m=(null==n?void 0:null===(t=n.coin)||void 0===t?void 0:t.input)||0n;const v=(null==n?void 0:null===(r=n.coin)||void 0===r?void 0:r.deposit)||0n;const _=(null==n?void 0:n.mint)||new Map;const y=u+m;const w=f+v;const g=(0,k.addTokenMaps)(p,_);const b=y-w;const P=(0,k.subtractTokenMaps)(g,h);if(0===d.size||w>y||(0,k.hasNegativeAssetValue)(P))throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);const S=await splitChangeAndComputeFee(d,o,b,P,i,GreedyInputSelector_classPrivateFieldGet(this,es,"f").getChangeAddresses,0n);const A=S.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(b-S.fee<0n)throw new C.InputSelectionError(C.InputSelectionFailure.UtxoBalanceInsufficient);if(d.size>await i.computeSelectionLimit({change:A,fee:S.fee,inputs:d,outputs:o})){throw new C.InputSelectionError(C.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:A,fee:S.fee,inputs:new Set([...d].sort(k.sortUtxoByTxIn)),outputs:o}}}constructor(e){es.set(this,void 0);GreedyInputSelector_classPrivateFieldSet(this,es,e,"f")}}es=new WeakMap;var ea=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");var eo=r("../../node_modules/lodash/minBy.js");const ei=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=eo(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===d.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};const buildRedeemers=(e,t)=>{const r=[];var s,a,o,i,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(a=e.vote)&&void 0!==a?a:[],...null!==(o=e.propose)&&void 0!==o?o:[],...null!==(i=e.certificate)&&void 0!==i?i:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new P.InvalidHereafterError}};const buildWitness=async(e,t,r,s,a,o)=>{const i={signatures:new Map};if(r){i.datums=[];for(const[n,d]of r)if(!s.has(n))i.datums.push(d)}if(e){i.scripts=[];for(const[c,l]of e)if(!t.has(c))i.scripts.push(l)}const{maxExecutionUnitsPerTransaction:u}=await o.protocolParameters();if(a)i.redeemers=buildRedeemers(a,u);return i};const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:a}=await e.protocolParameters();let o=0n;for(const i of t){r.push(i);o+=i[1].value.coins;if(o>ei){const n=r[0][1].address;const d=r.map(e=>e[1].value);const c=(0,T.coalesceValueQuantities)(d);const l={...c};l.coins-=ei;const u={address:n,value:l};if(isValidValue(u,(0,ea.computeMinimumCoinQuantity)(s),(0,ea.tokenBundleSizeExceedsLimit)(a))){return{collateralReturn:u,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};var en=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var ed=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var ec=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");var el=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/hasCorrectVoteDelegation.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!(0,el.hasCorrectVoteDelegation)(e));if(t.length>0){throw new P.DeRegistrationsWithRewardsLocked(t)}};var eu=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/initializeTx.js");var ef=r("../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");var ep=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var eh=r("../../node_modules/lodash/omit.js");var TxBuilder_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var TxBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var em,ev,e_,ey,ew,eg,eb,eP,eS,eC,eT,ek,eA,eE,ej,eI,ex,eR,eM,eO,eB,eD,eN,eF,eH,eG,eV,eK,eL,eW,ez,eU;const e$="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:a},inputSelection:o}=await TxBuilder_classPrivateFieldGet(this,em,"m",ew).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:o,ownAddresses:t,witness:a}}async sign(){return TxBuilder_classPrivateFieldGet(this,e_,"f").sign(await TxBuilder_classPrivateFieldGet(this,em,"m",ew).call(this))}constructor({builder:e,signer:t}){em.add(this);ev.set(this,void 0);e_.set(this,void 0);ey.set(this,void 0);TxBuilder_classPrivateFieldSet(this,ey,e,"f");TxBuilder_classPrivateFieldSet(this,e_,t,"f")}}ev=new WeakMap,e_=new WeakMap,ey=new WeakMap,em=new WeakSet,ew=async function _LazyTxSigner_build(){return TxBuilder_classPrivateFieldSet(this,ev,TxBuilder_classPrivateFieldGet(this,ev,"f")||await TxBuilder_classPrivateFieldGet(this,ey,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,eI,"f").set(t,e);return this}if(!TxBuilder_classPrivateFieldGet(this,eN,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,eN,"f").push(e);return this}addInput(e,t){if(t){TxBuilder_classPrivateFieldGet(this,eg,"m",eU).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,ej,"f").set(r,e);return this}if(!TxBuilder_classPrivateFieldGet(this,eD,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,eD,"f").push(e);return this}addDatum(e){const t=i.PlutusData.fromCore(e).hash();TxBuilder_classPrivateFieldGet(this,eM,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)TxBuilder_classPrivateFieldSet(this,eA,[...TxBuilder_classPrivateFieldGet(this,eA,"f"),e.handleResolution],"f");const t=eh(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;TxBuilder_classPrivateFieldSet(this,eA,TxBuilder_classPrivateFieldGet(this,eA,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,en.deepEquals)(t,e))};return this}buildOutput(e){return new TxOutputBuilder({handleProvider:TxBuilder_classPrivateFieldGet(this,ek,"f"),logger:(0,ed.contextLogger)(TxBuilder_classPrivateFieldGet(this,eT,"f"),"outputBuilder"),outputValidator:TxBuilder_classPrivateFieldGet(this,eP,"f"),txOut:e})}delegateFirstStakeCredential(e){TxBuilder_classPrivateFieldSet(this,eE,e,"f");return this}delegatePortfolio(e){if(!TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;TxBuilder_classPrivateFieldSet(this,eS,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:n.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(d.DelegationMetadataLabel,c.jsonToMetadatum(d.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[d.DelegationMetadataLabel,c.jsonToMetadatum(d.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){TxBuilder_classPrivateFieldSet(this,eH,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{TxBuilder_classPrivateFieldGet(this,eT,"f").debug("Building");try{const e=TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account?await TxBuilder_classPrivateFieldGet(this,eg,"m",eL).call(this):await TxBuilder_classPrivateFieldGet(this,eg,"m",eK).call(this);await TxBuilder_classPrivateFieldGet(this,eg,"m",eG).call(this);validateValidityInterval(await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.addresses.get();const r=(await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===d.StakeCredentialStatus.Registered||e.credentialStatus===d.StakeCredentialStatus.Registering);const o=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const i=this.partialExtraSigners&&[...this.partialExtraSigners];const n=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:i};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=l.computeAuxiliaryDataHash(this.partialAuxiliaryData);const c={...TxBuilder_classPrivateFieldGet(this,eb,"f")};const f=void 0!==TxBuilder_classPrivateFieldGet(this,eS,"f")||void 0!==TxBuilder_classPrivateFieldGet(this,eE,"f");let p=false;if(TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account&&f&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const h=await TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account.deriveAddress({index:0,type:s.AddressType.External},0);e.set(h.rewardAccount,1)}c.inputSelector=createGreedyInputSelector(e,t);p=true}await Promise.all(TxBuilder_classPrivateFieldGet(this,eD,"f").map(e=>TxBuilder_classPrivateFieldGet(this,eg,"m",ez).call(this,e,TxBuilder_classPrivateFieldGet(this,ej,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,eN,"f").map(e=>TxBuilder_classPrivateFieldGet(this,eg,"m",ez).call(this,e,TxBuilder_classPrivateFieldGet(this,eI,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,eF,"f").map(e=>TxBuilder_classPrivateFieldGet(this,eg,"m",eW).call(this,e)));const m=await buildWitness(TxBuilder_classPrivateFieldGet(this,ex,"f"),TxBuilder_classPrivateFieldGet(this,eR,"f"),TxBuilder_classPrivateFieldGet(this,eM,"f"),TxBuilder_classPrivateFieldGet(this,eO,"f"),TxBuilder_classPrivateFieldGet(this,eB,"f"),TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders);const v=[...TxBuilder_classPrivateFieldGet(this,ex,"f").values()].some(e=>u.isPlutusScript(e));const{collaterals:_,collateralReturn:y}=v?await computeCollateral(TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const w=new Set;for(const g of TxBuilder_classPrivateFieldGet(this,ex,"f").values())if(u.isPlutusScript(g))w.add(g.version);const b={auxiliaryData:o,certificates:this.partialTxBody.certificates,collateralReturn:y,collaterals:_,customizeCb:TxBuilder_classPrivateFieldGet(this,eH,"f"),handleResolutions:TxBuilder_classPrivateFieldGet(this,eA,"f"),inputs:new Set(TxBuilder_classPrivateFieldGet(this,ej,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:TxBuilder_classPrivateFieldGet(this,eB,"f"),referenceInputs:new Set([...TxBuilder_classPrivateFieldGet(this,eI,"f").values()].map(e=>e[0])),scriptIntegrityHash:v?e$:void 0,scriptVersions:w,signingOptions:n,txEvaluator:TxBuilder_classPrivateFieldGet(this,eC,"f"),witness:m};let P;try{P=await (0,eu.initializeTx)(b,c)}catch(S){if(p||!(S instanceof C.InputSelectionError)||S.failure===C.InputSelectionFailure.UtxoBalanceInsufficient){throw S}c.inputSelector=new LargeFirstSelector({changeAddressResolver:new F.StaticChangeAddressResolver(async()=>t)});TxBuilder_classPrivateFieldGet(this,eT,"f").warn(`Building attempt failed with ${S.failure}, retrying with large first selector`);P=await (0,eu.initializeTx)(b,c)}const{body:T,hash:k,inputSelection:A,redeemers:E}=P;m.redeemers=E;return{ctx:{auxiliaryData:o,ownAddresses:t,signingContext:{handleResolutions:TxBuilder_classPrivateFieldGet(this,eA,"f"),knownAddresses:t,txInKeyPathMap:await a.createTxInKeyPathMap(T,t,TxBuilder_classPrivateFieldGet(this,eb,"f").inputResolver)},signingOptions:{...n,extraSigners:i},witness:m},inputSelection:A,tx:{body:T,hash:k}}}catch(j){TxBuilder_classPrivateFieldGet(this,eT,"f").debug("Transaction build error",j);if(Array.isArray(j))throw j[0];throw j}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new f.Transaction(p.TransactionBody.fromCore(e.body),h.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?m.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const a={...t.signingOptions,stubSign:false};const o=t.signingContext;return TxBuilder_classPrivateFieldGet(this,eb,"f").witnesser.witness(s,o,a)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){eg.add(this);this.partialTxBody={};eb.set(this,void 0);eP.set(this,void 0);eS.set(this,void 0);eC.set(this,void 0);eT.set(this,void 0);ek.set(this,void 0);eA.set(this,void 0);eE.set(this,void 0);ej.set(this,new Map);eI.set(this,new Map);ex.set(this,new Map);eR.set(this,new Set);eM.set(this,new Map);eO.set(this,new Set);eB.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});eD.set(this,new Array);eN.set(this,new Array);eF.set(this,new Array);eH.set(this,void 0);TxBuilder_classPrivateFieldSet(this,eP,e.outputValidator||(0,ec.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");TxBuilder_classPrivateFieldSet(this,eb,e,"f");TxBuilder_classPrivateFieldSet(this,eT,e.logger,"f");TxBuilder_classPrivateFieldSet(this,ek,e.handleProvider,"f");TxBuilder_classPrivateFieldSet(this,eA,[],"f");var t;TxBuilder_classPrivateFieldSet(this,eC,null!==(t=e.txEvaluator)&&void 0!==t?t:new S.GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}eb=new WeakMap,eP=new WeakMap,eS=new WeakMap,eC=new WeakMap,eT=new WeakMap,ek=new WeakMap,eA=new WeakMap,eE=new WeakMap,ej=new WeakMap,eI=new WeakMap,ex=new WeakMap,eR=new WeakMap,eM=new WeakMap,eO=new WeakMap,eB=new WeakMap,eD=new WeakMap,eN=new WeakMap,eF=new WeakMap,eH=new WeakMap,eg=new WeakSet,eG=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},eV=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(TxBuilder_classPrivateFieldGet(this,eS,"f")){const r=await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await o.ensureStakeKeys({bip32Account:e,count:TxBuilder_classPrivateFieldGet(this,eS,"f").length,knownAddresses:r,logger:(0,ed.contextLogger)(TxBuilder_classPrivateFieldGet(this,eT,"f"),"getOrCreateRewardAccounts")});await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.addresses.add(...s);t=E([...r,...s]).map(({rewardAccount:e})=>e)}const a=(0,ep.poll)({logger:(0,ed.contextLogger)(TxBuilder_classPrivateFieldGet(this,eT,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.rewardAccounts});try{return await (0,ef.lastValueFrom)(a)}catch{throw new P.OutOfSyncRewardAccounts(t)}},eK=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===TxBuilder_classPrivateFieldGet(this,eE,"f")){return Promise.resolve(t)}const r=await TxBuilder_classPrivateFieldGet(this,eb,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const a=null===(e=v.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!a){throw new Error(`Invalid credential ${a}.`)}if(null===TxBuilder_classPrivateFieldGet(this,eE,"f"))if(s.credentialStatus===d.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,eT,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:_.CertificateType.StakeDeregistration,stakeCredential:a});else{if(s.credentialStatus!==d.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,eT,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:_.CertificateType.StakeRegistration,stakeCredential:a});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:_.CertificateType.StakeDelegation,poolId:TxBuilder_classPrivateFieldGet(this,eE,"f"),stakeCredential:a})}return t},eL=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!TxBuilder_classPrivateFieldGet(this,eS,"f")){return e}if(!TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await TxBuilder_classPrivateFieldGet(this,eg,"m",eV).call(this,TxBuilder_classPrivateFieldGet(this,eb,"f").bip32Account);const r=TxBuilder_classPrivateFieldGet(this,eS,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();TxBuilder_classPrivateFieldGet(this,eT,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===d.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=TxBuilder_classPrivateFieldGet(this,eS,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,TxBuilder_classPrivateFieldGet(this,eS,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const a=t.filter(e=>{var t,r;return e.credentialStatus===d.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=TxBuilder_classPrivateFieldGet(this,eS,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(sortRewardAccountsDelegatedFirst).reverse();if(r.length>a.length){throw new P.InsufficientRewardAccounts(r.map(({id:e})=>e),a.map(({address:e})=>e))}const o=[];while(r.length>0&&a.length>0){const{id:i,weight:n}=r.pop();const c=a.pop();TxBuilder_classPrivateFieldGet(this,eT,"f").debug(`Building delegation certificate for ${i} ${c}`);if(c.credentialStatus!==d.StakeCredentialStatus.Registered)o.push(_.createStakeRegistrationCert(c.address));o.push(_.createDelegationCert(c.address,i));e.set(c.address,n)}ensureNoDeRegistrationsWithRewardsLocked(a);TxBuilder_classPrivateFieldGet(this,eT,"f").debug(`De-registering ${a.length} stake keys`);for(const l of a)if(l.credentialStatus===d.StakeCredentialStatus.Registered)o.push(_.createStakeDeregistrationCert(l.address,y.inConwayEra?l.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:o};return e},eW=async function _GenericTxBuilder_resolveDatum(e){if(TxBuilder_classPrivateFieldGet(this,eM,"f").has(e))return;if(!TxBuilder_classPrivateFieldGet(this,eb,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await TxBuilder_classPrivateFieldGet(this,eb,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);TxBuilder_classPrivateFieldGet(this,eM,"f").set(e,t)},ez=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await TxBuilder_classPrivateFieldGet(this,eb,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const a=w.Script.fromCore(s.scriptReference).hash();TxBuilder_classPrivateFieldGet(this,ex,"f").set(a,s.scriptReference);TxBuilder_classPrivateFieldGet(this,eR,"f").add(a)}const o=s.datum;if(o)if(g.isDatumHash(o)){if(!TxBuilder_classPrivateFieldGet(this,eM,"f").has(o))TxBuilder_classPrivateFieldGet(this,eF,"f").push(o)}else{const n=i.PlutusData.fromCore(o).hash();TxBuilder_classPrivateFieldGet(this,eM,"f").set(n,o);TxBuilder_classPrivateFieldGet(this,eO,"f").add(n)}t.set(r,[{...e,address:s.address},s])},eU=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,ej,"f").set(r,e);if(e[1].datum){const s=i.PlutusData.fromCore(e[1].datum).hash();TxBuilder_classPrivateFieldGet(this,eM,"f").set(s,e[1].datum);TxBuilder_classPrivateFieldGet(this,eO,"f").add(s)}if(e[1].datumHash)TxBuilder_classPrivateFieldGet(this,eF,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!TxBuilder_classPrivateFieldGet(this,eD,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,eD,"f").push(e)}if(t.script){const a=w.Script.fromCore(t.script).hash();TxBuilder_classPrivateFieldGet(this,ex,"f").set(a,t.script)}if(t.redeemer){var o;null===(o=TxBuilder_classPrivateFieldGet(this,eB,"f").spend)||void 0===o?void 0:o.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:b.RedeemerPurpose.spend})}if(t.datum)if(g.isDatumHash(t.datum)){if(!TxBuilder_classPrivateFieldGet(this,eM,"f").has(t.datum))TxBuilder_classPrivateFieldGet(this,eF,"f").push(t.datum)}else{const n=i.PlutusData.fromCore(t.datum).hash();TxBuilder_classPrivateFieldGet(this,eM,"f").set(n,t.datum)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/hasCorrectVoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{hasCorrectVoteDelegation:()=>hasCorrectVoteDelegation});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!s.isDrepInfo(t)||t.active)}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/initializeTx.js":(e,t,r)=>{"use strict";r.d(t,{initializeTx:()=>initializeTx});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var l=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/GreedyTxEvaluator.js");var u=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");var f=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/RoundRobinRandomImprove/index.js");var p=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/ChangeAddress/StaticChangeAddressResolver.js");var h=r("../../node_modules/blake2b-no-wasm/index.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var S=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var C=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var T=r("../../node_modules/buffer/index.js")["Buffer"];const k=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new y.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(T.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const s=new y.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){s.writeEncodedValue(k);s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(k)}else{if(!t||0===t.length)return;s.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(T.from(e.languageViewsEncoding(),"hex"))}return S.Hash32ByteBase16.fromHexBlob(C.HexBlob.fromBytes(h(h.BYTES).update(s.encode()).digest()))};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const a=new w.Costmdls;for(const o of t){const i=e.get(o);if(i)a.insert(new g.CostModel(o,i))}return hashScriptData(a,null==r?void 0:r.map(e=>b.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>P.PlutusData.fromCore(e)))};var A=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const E={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:A.PlutusLanguageVersion.V1};const j={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:A.PlutusLanguageVersion.V2};const I={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:A.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new w.Costmdls;for(const r of e){const s=new g.CostModel(r.version,r.prices);t.insert(s)}return t.toCore()};const getDefaultCostModelsForVersions=e=>{const t=[...new Set(e)];const r=t.map(e=>{switch(e){case A.PlutusLanguageVersion.V1:return E;case A.PlutusLanguageVersion.V2:return j;case A.PlutusLanguageVersion.V3:return I;default:throw new Error("Invalid plutus language")}});return buildCostModels(r)};const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:s,collaterals:a,collateralReturn:o,mint:i,scriptIntegrityHash:n,referenceInputs:d,requiredExtraSignatures:c,outputs:l})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?m.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:i,outputs:l||[],referenceInputs:d?[...d]:void 0,requiredExtraSignatures:c,scriptIntegrityHash:n,validityInterval:s,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==a?void 0:a.size)&&{collaterals:[...a]},collateralReturn:o}}};const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:s})=>{const a={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&s){const o=getDefaultCostModelsForVersions([...r]);a.scriptIntegrityHash=computeScriptDataHash(o,[...r],s.redeemers,s.datums)}const n=i.TransactionBody.fromCore(a);return{body:a,hash:v.TransactionId.fromHexBlob(_.bytesToHex(h(h.BYTES).update(_.hexToBytes(n.toCbor())).digest()))}};const createTransactionInternals=e=>{const{txBody:t}=createPreInputSelectionTxBody({...e});return includeChangeAndInputs({bodyPreInputSelection:t,inputSelection:e.inputSelection})};var x=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");const M=(0,x.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>R.Slot(e+t*r);const ensureValidityInterval=(e,{slotLength:t},r)=>({invalidHereafter:calcTimeOffsetSlotNumber(e,M,t),...r});var O=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/hasCorrectVoteDelegation.js");const dRepPublicKeyHash=async e=>e&&(await (await e.derivePublicKey(s.DREP_KEY_DERIVATION_PATH)).hash()).hex();const B=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=B)||(0,O.hasCorrectVoteDelegation)(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:s,bip32Account:h,witnesser:m,logger:v})=>{var _;const[y,w,g,b,P,S]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var C;const T=null!==(C=e.txEvaluator)&&void 0!==C?C:new l.GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:(0,f.roundRobinRandomImprove)({changeAddressResolver:new p.StaticChangeAddressResolver(async()=>S)});const{txBody:k,auxiliaryData:A}=createPreInputSelectionTxBody({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:ensureValidityInterval(y.slot,w,null===(_=e.options)||void 0===_?void 0:_.validityInterval),withdrawals:getWithdrawals(b,g.protocolVersion)});const E=e.customizeCb?e.customizeCb({txBody:k}):k;var j;const I=(0,u.defaultSelectionConstraints)({buildTx:async t=>{var r;v.debug("Building TX for selection constraints",t);if(null===(r=E.withdrawals)||void 0===r?void 0:r.length)v.debug("Adding rewards withdrawal in the transaction",E.withdrawals);const c=includeChangeAndInputs({bodyPreInputSelection:E,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const l=await dRepPublicKeyHash(h);const u=new o.Transaction(i.TransactionBody.fromCore(c.body),n.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),A?d.AuxiliaryData.fromCore(A):void 0);var f;const p={...l&&{dRepKeyHashHex:l},handleResolutions:null!==(f=e.handleResolutions)&&void 0!==f?f:[],knownAddresses:S,txInKeyPathMap:await a.createTxInKeyPathMap(c.body,S,s)};const _={...e.signingOptions,stubSign:true};const{tx:y}=await m.witness(u,p,_);return y},protocolParameters:g,redeemersByType:null!==(j=e.redeemersByType)&&void 0!==j?j:{},txEvaluator:T});const x=c.computeImplicitCoin(g,{certificates:E.certificates,proposalProcedures:E.proposalProcedures,withdrawals:E.withdrawals});const{selection:R,redeemers:M}=await r.select({constraints:I,implicitValue:{coin:x,mint:E.mint},outputs:new Set(E.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(P)});const O={...e.witness,redeemers:M};const{body:B,hash:D}=includeChangeAndInputs({bodyPreInputSelection:E,inputSelection:R,scriptVersions:e.scriptVersions,witness:O});return{body:B,hash:D,inputSelection:R,redeemers:M}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-builder/types.js":(e,t,r)=>{"use strict";r.d(t,{DeRegistrationsWithRewardsLocked:()=>DeRegistrationsWithRewardsLocked,HandleNotFoundError:()=>HandleNotFoundError,InsufficientRewardAccounts:()=>InsufficientRewardAccounts,InvalidConfigurationError:()=>InvalidConfigurationError,InvalidHereafterError:()=>InvalidHereafterError,OutOfSyncRewardAccounts:()=>OutOfSyncRewardAccounts,OutputValidationMinimumCoinError:()=>OutputValidationMinimumCoinError,OutputValidationMissingRequiredError:()=>OutputValidationMissingRequiredError,OutputValidationNegativeAssetQtyError:()=>OutputValidationNegativeAssetQtyError,OutputValidationTokenBundleSizeError:()=>OutputValidationTokenBundleSizeError,TxOutputFailure:()=>o});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var o;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(o||(o={}));var i;(function(e){e["Expired"]="Transaction expired"})(i||(i={}));class InvalidConfigurationError extends a.CustomError{constructor(e){super(e);this.message=e}}class HandleNotFoundError extends a.CustomError{constructor(e){super(o.HandleNotFound);this.txOut=e}}class InsufficientRewardAccounts extends a.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}class DeRegistrationsWithRewardsLocked extends a.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=s.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}class OutOfSyncRewardAccounts extends a.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}class OutputValidationMissingRequiredError extends a.CustomError{constructor(e){super(o.MissingRequiredFields);this.txOut=e}}class OutputValidationMinimumCoinError extends a.CustomError{constructor(e,t){super(o.MinimumCoin);this.txOut=e;this.outputValidation=t}}class OutputValidationTokenBundleSizeError extends a.CustomError{constructor(e,t){super(o.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}class OutputValidationNegativeAssetQtyError extends a.CustomError{constructor(e,t){super(o.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}class InvalidHereafterError extends a.CustomError{constructor(){super(i.Expired)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-metadata/cip20.js":(e,t,r)=>{"use strict";r.d(t,{toTxMetadata:()=>toTxMetadata});var s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const a={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,t)=>{let r=0;let s=0;const o=[];for(let i=0;i<e.length;i++){const n=i===e.length-1;const d=r+a.byteSize(e[i]);const c=n?t+1:d+a.byteSize(e[i+1]);const l=d===t||c>t||n;if(l){const u=e.slice(s,i+1);o.push(u);s=i+1;r=0}else{r=d}}return o}};const o=674n;const i=64;var n;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(n||(n={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,i+1))}`);super(`The provided message array contains validation errors | ${t}`)}}const validateMessage=e=>{if("string"!=typeof e)return{failure:n.wrongType,valid:false};if(a.byteSize(e)>i)return{failure:n.oversize,valid:false};return{valid:true}};const toTxMetadata=e=>{const t="string"==typeof e?a.chunkByBytes(e,i):e.messages;const r=new Map;for(const s of t){const n=validateMessage(s);if(!n.valid)r.set(s,n)}if(r.size>0)throw new MessageValidationError(r);return new Map([[o,new Map([["msg",t]])]])}},"../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/assetId.js":(e,t,r)=>{"use strict";r.d(t,{PXL:()=>o,TSLA:()=>a});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const a=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8254534c41");const o=s.AssetId("1ec85dcee27f2d90ec1f9a1e4ce74a667dc9be8b184463223f9c960150584c");const i=s.AssetId("a5425bd7bc4182325188af2340415827a73f845846c165d9e14c5aed556e6974");const n=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8241");const d=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8242");const c=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8243");const l=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8244");const u=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8245");const f=[a,o,i]},"../../node_modules/@cardano-sdk/util-dev/dist/esm/createStubStakePoolProvider.js":(e,t,r)=>{"use strict";r.d(t,{createStubStakePoolProvider:()=>createStubStakePoolProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var o=r("../../node_modules/delay/index.js");const i=[{hexId:s.PoolIdHex("cf12a9dcaacdc09778616d60502011a88ed4542c482f2ddd08d8ac5a"),id:s.PoolId("pool1euf2nh92ehqfw7rpd4s9qgq34z8dg4pvfqhjmhggmzk95gcd402"),metadata:{description:"Keiths Pi test pool",homepage:"",name:"Keiths PiTest",ticker:"KPIT"}},{hexId:s.PoolIdHex("4a2e3b7f4a78ff1452b91329a7673c77c98ca96dece7b55c37869502"),id:s.PoolId("pool1fghrkl620rl3g54ezv56weeuwlyce2tdannm2hphs62syf3vyyh"),metadata:{description:"VEGAS TestNet(2) ADA Pool",homepage:"https://www.ada.vegas",name:"VEGASPool",ticker:"VEGA2"}}];const createStubStakePoolProvider=(e=i,t)=>{return{healthCheck:async()=>{if(t)await o(t);return{ok:true}},queryStakePools:async r=>{var s,a;if(t)await o(t);const i=null==r?void 0:null===(s=r.filters)||void 0===s?void 0:s.identifier;const n=null==r?void 0:null===(a=r.filters)||void 0===a?void 0:a.text;const d=i?i.values:[];const c=e.filter(({id:e,metadata:t})=>{return n&&(null==t?void 0:t.name.includes(n))||n&&(null==t?void 0:t.ticker.includes(n))||d.some(r=>{return r.id&&e.includes(r.id)||r.name&&(null==t?void 0:t.name.includes(r.name))||r.ticker&&(null==t?void 0:t.ticker.includes(r.ticker))})});return{pageResults:c,totalResultCount:c.length}},stakePoolStats:async()=>{if(t)await o(t);return{qty:{activating:0,active:e.filter(e=>e.status===a.StakePoolStatus.Active).length,retired:e.filter(e=>e.status===a.StakePoolStatus.Retired).length,retiring:e.filter(e=>e.status===a.StakePoolStatus.Retiring).length}}}}}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/eraSummaries.js":(e,t,r)=>{"use strict";r.d(t,{testnetEraSummaries:()=>a});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");const a=[{parameters:{epochLength:21600,slotLength:(0,s.Milliseconds)(2e4)},start:{slot:0,time:new Date(1563999616e3)}},{parameters:{epochLength:432e3,slotLength:(0,s.Milliseconds)(1e3)},start:{slot:1598400,time:new Date(1595967616e3)}}]},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TrackerSubject=void 0;const c=r("../../node_modules/rxjs/dist/esm5/index.js");class TrackerSubject extends c.ReplaySubject{get value(){return a(this,n,"f")}next(e){s(this,n,e,"f");super.next(e)}complete(){a(this,o,"m",d).call(this);super.complete()}error(e){a(this,o,"m",d).call(this);super.error(e)}unsubscribe(){a(this,o,"m",d).call(this);super.unsubscribe()}constructor(e){super(1);o.add(this);i.set(this,void 0);n.set(this,"TRACKER_SUBJECT_NO_VALUE");s(this,i,e.subscribe(this),"f")}}t.TrackerSubject=TrackerSubject;i=new WeakMap,n=new WeakMap,o=new WeakSet,d=function _TrackerSubject_sourceUnsubscribe(){if(a(this,i,"f"))a(this,i,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.blockingWithLatestFrom=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return i=>{const n=i.pipe((0,s.share)());return(0,s.combineLatest)([n,e.pipe((0,s.startWith)(o),(0,s.takeUntil)(n.pipe((0,s.defaultIfEmpty)(null),(0,s.delay)(1),(0,s.last)())))]).pipe((0,s.mergeScan)(({buffer:e},t)=>{if(t[1]===o){return(0,s.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const a=r===t[0]?e:[...e,t[0]];return(0,s.from)(a.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,s.of)({buffer:[],output:t})},r,1),(0,s.map)(({output:e})=>e),(0,s.filter)(a.isNotNil),(0,s.distinctUntilKeyChanged)(0),(0,s.map)(([e,r])=>t(e,r)))}}t.blockingWithLatestFrom=blockingWithLatestFrom},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatAndCombineLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const startOnTrigger=(e,t)=>(0,s.concat)(e.pipe((0,s.take)(1),(0,s.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,s.of)([])}const t=[];let r=e[0].pipe((0,s.share)());t.push(r);for(const a of e.slice(1)){const o=startOnTrigger(r,a);r=o.pipe((0,s.share)());t.push(r)}return(0,s.combineLatest)(t)};t.concatAndCombineLatest=concatAndCombineLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.finalizeWithLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const finalizeWithLatest=e=>t=>{let r=null;return t.pipe((0,s.tap)(e=>r=e),(0,s.finalize)(()=>e(r)))};t.finalizeWithLatest=finalizeWithLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js"),t)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.passthrough=void 0;const passthrough=()=>e=>e;t.passthrough=passthrough},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.poll=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:n=o.strictEquals,combinator:d=s.switchMap,cancel$:c=s.NEVER,pollUntil:l=()=>true,logger:u})=>r.pipe(d(()=>(0,s.defer)(()=>(0,s.from)(e()).pipe((0,s.mergeMap)(e=>l(e)?(0,s.of)(e):(0,s.concat)((0,s.of)(e),(0,s.throwError)(()=>i))))).pipe((0,a.retryBackoff)({...t,shouldRetry:e=>{if(e===i){u.warn('"pollUntil" condition not met, will retry');return true}u.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);u.debug(`Should retry: ${r}`);return r}return true}}))),(0,s.distinctUntilChanged)(n),(0,s.takeUntil)(c));t.poll=poll},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shareRetryBackoff=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const o={initialInterval:10,maxInterval:5e3,resetOnSuccess:true};const shareRetryBackoff=(e,t)=>r=>{const i=new s.ReplaySubject(1);const n=r.subscribe(i);return new s.Observable(r=>i.pipe(t=>(0,s.defer)(()=>e(t)),(0,a.retryBackoff)({...o,...t}),(0,s.finalize)(()=>{n.unsubscribe()})).subscribe(r))};t.shareRetryBackoff=shareRetryBackoff},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toEmpty=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");t.toEmpty=(0,s.mergeMap)(()=>s.EMPTY)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js":(e,t,r)=>{"use strict";r.d(t,{TrackerSubject:()=>TrackerSubject});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,i,n;class TrackerSubject extends s.ReplaySubject{get value(){return __classPrivateFieldGet(this,i,"f")}next(e){__classPrivateFieldSet(this,i,e,"f");super.next(e)}complete(){__classPrivateFieldGet(this,a,"m",n).call(this);super.complete()}error(e){__classPrivateFieldGet(this,a,"m",n).call(this);super.error(e)}unsubscribe(){__classPrivateFieldGet(this,a,"m",n).call(this);super.unsubscribe()}constructor(e){super(1);a.add(this);o.set(this,void 0);i.set(this,"TRACKER_SUBJECT_NO_VALUE");__classPrivateFieldSet(this,o,e.subscribe(this),"f")}}o=new WeakMap,i=new WeakMap,a=new WeakSet,n=function _TrackerSubject_sourceUnsubscribe(){if(__classPrivateFieldGet(this,o,"f"))__classPrivateFieldGet(this,o,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js":(e,t,r)=>{"use strict";r.d(t,{poll:()=>poll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var p=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const m=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:v=h.strictEquals,combinator:_=a.switchMap,cancel$:y=o.NEVER,pollUntil:w=()=>true,logger:g})=>r.pipe(_(()=>(0,i.defer)(()=>(0,n.from)(e()).pipe((0,d.mergeMap)(e=>w(e)?(0,s.of)(e):(0,c.concat)((0,s.of)(e),(0,l.throwError)(()=>m))))).pipe((0,p.retryBackoff)({...t,shouldRetry:e=>{if(e===m){g.warn('"pollUntil" condition not met, will retry');return true}g.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);g.debug(`Should retry: ${r}`);return r}return true}}))),(0,u.distinctUntilChanged)(v),(0,f.takeUntil)(y))},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/toEmpty.js":(e,t,r)=>{"use strict";r.d(t,{toEmpty:()=>o});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");const o=(0,s.mergeMap)(()=>a.EMPTY)},"../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BigIntMath=void 0;t.BigIntMath={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.calcPercentages=t.Percent=void 0;const a=s(r("../../node_modules/lodash/sum.js"));const Percent=e=>e;t.Percent=Percent;const calcPercentages=(e,r=(0,a.default)(e))=>{if(0===e.length){return[]}let s=(0,a.default)(e);if(r<s)r=s;if(0===r){e=e.map(()=>1);s=(0,a.default)(e);r=s}return e.map(e=>(0,t.Percent)(e/r))};t.calcPercentages=calcPercentages},"../../node_modules/@cardano-sdk/util/dist/cjs/Range.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwIfOutsideRange=t.inRange=t.throwIfInvalidRange=t.OutsideRangeError=t.InvalidRangeError=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidRangeError extends s.CustomError{constructor(e){super();this.message=e}}t.InvalidRangeError=InvalidRangeError;class OutsideRangeError extends s.CustomError{constructor(e,{lowerBound:t,upperBound:r},s){super();this.message=`${s} - ${e} must be between ${t} and ${r}`}}t.OutsideRangeError=OutsideRangeError;const throwIfInvalidRange=({lowerBound:e,upperBound:t})=>{if(e||t){if(e===t){throw new InvalidRangeError(`Lower bound: ${e}, cannot equal upper bound ${t}`)}else if(e&&e>t){throw new InvalidRangeError(`Lower bound: ${e}, cannot be larger than upper bound: ${t}`)}}else{throw new InvalidRangeError("Must provide at least one bound")}};t.throwIfInvalidRange=throwIfInvalidRange;const inRange=(e,r)=>{(0,t.throwIfInvalidRange)(r);const{lowerBound:s,upperBound:a}=r;if(!s&&a){return e<=a}if(s&&!a){return e>=s}return e>=s&&e<=a};t.inRange=inRange;const throwIfOutsideRange=(e,r,s)=>{if(!(0,t.inRange)(e,r)){throw new OutsideRangeError(e,r,s)}};t.throwIfOutsideRange=throwIfOutsideRange},"../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RunnableModule=t.InvalidModuleState=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js");class InvalidModuleState extends s.CustomError{constructor(e,t,r){super();this.message=`${t} cannot be called unless ${e} is ${r}`}}t.InvalidModuleState=InvalidModuleState;class RunnableModule{async initialize(){this.initializeBefore();await this.initializeImpl();this.initializeAfter()}async start(){this.startBefore();await this.startImpl();this.startAfter()}async shutdown(){this.shutdownBefore();await this.shutdownImpl();this.shutdownAfter()}initializeBefore(){if(null!==this.state){throw new InvalidModuleState(this.name,"initializeBefore",null)}this.state="initializing";this.logger.debug("Initializing...")}initializeAfter(){if("initializing"!==this.state){throw new InvalidModuleState(this.name,"initializeAfter","initializing")}this.state="initialized";this.logger.debug("Initialized")}startBefore(){if("initialized"!==this.state){throw new InvalidModuleState(this.name,"start","initialized")}this.state="starting";this.logger.debug("Starting...")}startAfter(){if("starting"!==this.state){throw new InvalidModuleState(this.name,"start","starting")}this.state="running";this.logger.debug("Started")}shutdownBefore(){if("running"!==this.state){throw new InvalidModuleState(this.name,"shutdown","running")}this.state="stopping";this.logger.debug("Stopping...")}shutdownAfter(){if("stopping"!==this.state){throw new InvalidModuleState(this.name,"shutdown","stopping")}this.state="initialized";this.logger.debug("Shutdown complete")}constructor(e,t){this.state=null;this.logger=(0,a.contextLogger)(t,e);this.name=e}}t.RunnableModule=RunnableModule},"../../node_modules/@cardano-sdk/util/dist/cjs/environment.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isBackgroundProcess=t.getEnvironmentConfiguration=t.isProductionEnvironment=t.Environment=void 0;var r;(function(e){e["Production"]="production";e["Development"]="development"})(r=t.Environment||(t.Environment={}));const isProductionEnvironment=()=>"production"===r.Production;t.isProductionEnvironment=isProductionEnvironment;const getEnvironmentConfiguration=()=>(0,t.isProductionEnvironment)()?r.Production:r.Development;t.getEnvironmentConfiguration=getEnvironmentConfiguration;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background");t.isBackgroundProcess=isBackgroundProcess},"../../node_modules/@cardano-sdk/util/dist/cjs/equals.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.areStringsEqualInConstantTime=t.areNumbersEqualInConstantTime=t.sameArrayItems=t.strictEquals=t.deepEquals=void 0;const a=s(r("../../node_modules/lodash/isEqual.js"));const deepEquals=(e,t)=>(0,a.default)(e,t);t.deepEquals=deepEquals;const strictEquals=(e,t)=>e===t;t.strictEquals=strictEquals;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));t.sameArrayItems=sameArrayItems;const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;t.areNumbersEqualInConstantTime=areNumbersEqualInConstantTime;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const a=s.reduce((e,t)=>e&t,1);return 1===a};t.areStringsEqualInConstantTime=areStringsEqualInConstantTime},"../../node_modules/@cardano-sdk/util/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidStateError=t.InvalidArgumentError=t.InvalidStringError=t.ComposableError=t.stripStackTrace=t.formatErrorMessage=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");t.formatErrorMessage=formatErrorMessage;const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))(0,t.stripStackTrace)(e.innerError)};t.stripStackTrace=stripStackTrace;class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[a]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${a}${s.join(ComposableError.stackDelimiter)}`})}}t.ComposableError=ComposableError;ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}t.InvalidStringError=InvalidStringError;class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}t.InvalidArgumentError=InvalidArgumentError;class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}t.InvalidStateError=InvalidStateError},"../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.usingAutoFree=t.ManagedFreeableScope=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js");class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(s(this,i,"f"))throw new Error("This scope is already disposed.");s(this,o,"f").push(e);return e}dispose(){if(s(this,i,"f"))return;for(const e of s(this,o,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}a(this,i,true,"f")}constructor(){o.set(this,[]);i.set(this,false)}}t.ManagedFreeableScope=ManagedFreeableScope;o=new WeakMap,i=new WeakMap;class AutoFree{execute(){let e;try{e=s(this,d,"f").call(this,s(this,n,"f"));if((0,c.isPromise)(e)){return e.then(e=>{s(this,n,"f").dispose();return e}).catch(e=>{s(this,n,"f").dispose();throw e})}s(this,n,"f").dispose();return e}catch(t){s(this,n,"f").dispose();throw t}}constructor(e){n.set(this,void 0);d.set(this,void 0);a(this,d,e,"f");a(this,n,new ManagedFreeableScope,"f")}}n=new WeakMap,d=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute();t.usingAutoFree=usingAutoFree},"../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.bufferToHexString=t.hexStringToBuffer=void 0;const hexStringToBuffer=e=>s.from(e,"hex");t.hexStringToBuffer=hexStringToBuffer;const bufferToHexString=e=>e.toString("hex");t.bufferToHexString=bufferToHexString},"../../node_modules/@cardano-sdk/util/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/util/dist/cjs/equals.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/network.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/Range.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/environment.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/string.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/util.js"),t)},"../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isNotNil=void 0;const isNotNil=e=>null!=e;t.isNotNil=isNotNil},"../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPromise=void 0;const isPromise=e=>"object"==typeof e&&"function"==typeof e.then;t.isPromise=isPromise},"../../node_modules/@cardano-sdk/util/dist/cjs/logging.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.contextLogger=t.loggerMethodNames=void 0;t.loggerMethodNames=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,r,s=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const a={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],r],contextStringify:s};const o=s(a.contextArray);return{...a,...Object.fromEntries(t.loggerMethodNames.map(e=>[e,(t,...r)=>{a.baseLogger[e](o,t,...r)}]))}};t.contextLogger=contextLogger},"../../node_modules/@cardano-sdk/util/dist/cjs/network.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isConnectionError=void 0;const r=new Set(["ETIMEDOUT","ECONNRESET","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]);const s=new Set(["WebSocketClosed","ServerNotReady"]);const isConnectionError=e=>{if(!e||"object"!=typeof e)return false;if((null==e?void 0:e.name)&&s.has(e.name)||(null==e?void 0:e.code)&&r.has(e.code)){return true}return(0,t.isConnectionError)(e.innerError)};t.isConnectionError=isConnectionError},"../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.patchObject=void 0;const patchObject=(e,t)=>new Proxy(e,{get(e,r,s){const a=r in t?t[r]:e[r];return"function"==typeof a?a.bind(s):a}});t.patchObject=patchObject},"../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.castHexBlob=t.HexBlob=t.Base64Blob=t.typedHex=t.assertIsHexString=t.typedBech32=t.assertIsBech32WithPrefix=void 0;const a=r("../../node_modules/bech32/dist/index.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js");const i=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let s;try{s=a.bech32.decode(e,i)}catch(n){throw new o.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(s.prefix,t)){throw new o.InvalidStringError(`expected bech32 prefix '${t}', got '${s.prefix}''`)}if(r&&!isOneOf(s.words.length,r)){throw new o.InvalidStringError(`expected decoded length of '${r}', got '${s.words.length}'`)}};t.assertIsBech32WithPrefix=assertIsBech32WithPrefix;const typedBech32=(e,r,s)=>{(0,t.assertIsBech32WithPrefix)(e,r,s);return e};t.typedBech32=typedBech32;const assertLength=(e,t)=>{if(e&&t.length!==e){throw new o.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new o.InvalidStringError("expected hex string")}};t.assertIsHexString=assertIsHexString;const typedHex=(e,r)=>{(0,t.assertIsHexString)(e,r);return e};t.typedHex=typedHex;const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new o.InvalidStringError("expected base64 string")};t.Base64Blob=Base64Blob;t.Base64Blob.fromBytes=e=>s.from(e).toString("base64");const HexBlob=e=>(0,t.typedHex)(e);t.HexBlob=HexBlob;t.HexBlob.fromBytes=e=>s.from(e).toString("hex");t.HexBlob.fromBase64=e=>s.from(e,"base64").toString("hex");t.HexBlob.toTypedBech32=(e,t)=>a.bech32.encode(e,a.bech32.toWords(Uint8Array.from(s.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e};t.castHexBlob=castHexBlob},"../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.replaceNullsWithUndefineds=void 0;const replaceNullsWithUndefineds=e=>{const r={};for(const s of Object.keys(e)){const a=e[s];r[s]=null===a?void 0:a&&"object"==typeof a&&a.__proto__.constructor===Object?(0,t.replaceNullsWithUndefineds)(a):a}return r};t.replaceNullsWithUndefineds=replaceNullsWithUndefineds},"../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromSerializableObject=t.toSerializableObject=void 0;const o=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");const i=a(r("../../node_modules/lodash/transform.js"));const n=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const d="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const toSerializableObject=(e,r={})=>{if(n.has(typeof e))return e;const{transformationTypeKey:a=d,serializeKey:c=defaultTransformKey}=r;if(void 0===e){return{[a]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>(0,t.toSerializableObject)(e,r))}if(ArrayBuffer.isView(e)){const l=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const u=s.from(l).toString("hex");return{[a]:"Buffer",value:u}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=(0,t.toSerializableObject)(e.innerError.data);return{[a]:"Error",value:(0,o.serializeError)(e)}}if(e instanceof Date){return{[a]:"Date",value:e.getTime()}}if(e instanceof Set){return{[a]:"Set",value:[...e].map(e=>(0,t.toSerializableObject)(e,r))}}if(e instanceof Map){return{[a]:"Map",value:[...e.entries()].map(([e,s])=>[(0,t.toSerializableObject)(e,r),(0,t.toSerializableObject)(s,r)])}}return(0,i.default)(e,(e,s,a)=>{e[c(a)]=(0,t.toSerializableObject)(s,r);return e},{})}if("bigint"==typeof e)return{[a]:"bigint",value:e.toString()}};t.toSerializableObject=toSerializableObject;const fromSerializableObjectUnknown=(e,t={})=>{if(n.has(typeof e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=d,deserializeKey:a=defaultTransformKey,errorTypes:o=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(s.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(o,l))}default:return(0,i.default)(e,(e,r,s)=>{e[a(s)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t);t.fromSerializableObject=fromSerializableObject},"../../node_modules/@cardano-sdk/util/dist/cjs/string.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StringUtils=void 0;t.StringUtils={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,r)=>{let s=0;let a=0;const o=[];for(let i=0;i<e.length;i++){const n=i===e.length-1;const d=s+t.StringUtils.byteSize(e[i]);const c=n?r+1:d+t.StringUtils.byteSize(e[i+1]);const l=d===r||c>r||n;if(l){const u=e.slice(a,i+1);o.push(u);a=i+1;s=0}else{s=d}}return o}}},"../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.transformObj=void 0;const a=s(r("../../node_modules/lodash/isUndefined.js"));const o=s(r("../../node_modules/lodash/merge.js"));const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:(0,o.default)(e,{[t]:r}),{})}return e};const transformObj=async(e,r,s)=>{const o=Object.entries(r);const i=Object.create({});for(const[n,d]of o)i[n]=await ("function"==typeof d?d(e,s):(0,t.transformObj)(e,d,s));return deepOmitBy(i,a.default)};t.transformObj=transformObj},"../../node_modules/@cardano-sdk/util/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveObjectValues=void 0;const resolveObjectValues=async e=>Object.fromEntries(await Promise.all(Object.entries(e).map(([e,t])=>Promise.resolve(t).then(t=>[e,t]))));t.resolveObjectValues=resolveObjectValues},"../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js":(e,t,r)=>{"use strict";r.d(t,{BigIntMath:()=>s});const s={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/esm/Percent.js":(e,t,r)=>{"use strict";r.d(t,{Percent:()=>Percent,calcPercentages:()=>calcPercentages});var s=r("../../node_modules/lodash/sum.js");const Percent=e=>e;const calcPercentages=(e,t=s(e))=>{if(0===e.length){return[]}let r=s(e);if(t<r)t=r;if(0===t){e=e.map(()=>1);r=s(e);t=r}return e.map(e=>Percent(e/t))}},"../../node_modules/@cardano-sdk/util/dist/esm/environment.js":(e,t,r)=>{"use strict";r.d(t,{isBackgroundProcess:()=>isBackgroundProcess,isProductionEnvironment:()=>isProductionEnvironment});var s;(function(e){e["Production"]="production";e["Development"]="development"})(s||(s={}));const isProductionEnvironment=()=>"production"===s.Production;const getEnvironmentConfiguration=()=>isProductionEnvironment()?s.Production:s.Development;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background")},"../../node_modules/@cardano-sdk/util/dist/esm/equals.js":(e,t,r)=>{"use strict";r.d(t,{areNumbersEqualInConstantTime:()=>areNumbersEqualInConstantTime,areStringsEqualInConstantTime:()=>areStringsEqualInConstantTime,deepEquals:()=>deepEquals,sameArrayItems:()=>sameArrayItems,strictEquals:()=>strictEquals});var s=r("../../node_modules/lodash/isEqual.js");const deepEquals=(e,t)=>s(e,t);const strictEquals=(e,t)=>e===t;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const a=s.reduce((e,t)=>e&t,1);return 1===a}},"../../node_modules/@cardano-sdk/util/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{ComposableError:()=>ComposableError,InvalidArgumentError:()=>InvalidArgumentError,InvalidStateError:()=>InvalidStateError,InvalidStringError:()=>InvalidStringError,formatErrorMessage:()=>formatErrorMessage,stripStackTrace:()=>stripStackTrace});var s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))stripStackTrace(e.innerError)};class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[a]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${a}${s.join(ComposableError.stackDelimiter)}`})}}ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}},"../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js":(e,t,r)=>{"use strict";r.d(t,{isNotNil:()=>isNotNil});const isNotNil=e=>null!=e},"../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js":(e,t,r)=>{"use strict";r.d(t,{isPromise:()=>isPromise});const isPromise=e=>"object"==typeof e&&"function"==typeof e.then},"../../node_modules/@cardano-sdk/util/dist/esm/logging.js":(e,t,r)=>{"use strict";r.d(t,{contextLogger:()=>contextLogger});const s=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,t,r=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const a={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],t],contextStringify:r};const o=r(a.contextArray);return{...a,...Object.fromEntries(s.map(e=>[e,(t,...r)=>{a.baseLogger[e](o,t,...r)}]))}}},"../../node_modules/@cardano-sdk/util/dist/esm/primitives.js":(e,t,r)=>{"use strict";r.d(t,{Base64Blob:()=>Base64Blob,HexBlob:()=>HexBlob,assertIsBech32WithPrefix:()=>assertIsBech32WithPrefix,assertIsHexString:()=>assertIsHexString,castHexBlob:()=>castHexBlob,typedBech32:()=>typedBech32,typedHex:()=>typedHex});var s=r("../../node_modules/bech32/dist/index.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const i=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let o;try{o=s.bech32.decode(e,i)}catch(n){throw new a.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(o.prefix,t)){throw new a.InvalidStringError(`expected bech32 prefix '${t}', got '${o.prefix}''`)}if(r&&!isOneOf(o.words.length,r)){throw new a.InvalidStringError(`expected decoded length of '${r}', got '${o.words.length}'`)}};const typedBech32=(e,t,r)=>{assertIsBech32WithPrefix(e,t,r);return e};const assertLength=(e,t)=>{if(e&&t.length!==e){throw new a.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new a.InvalidStringError("expected hex string")}};const typedHex=(e,t)=>{assertIsHexString(e,t);return e};const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new a.InvalidStringError("expected base64 string")};Base64Blob.fromBytes=e=>o.from(e).toString("base64");const HexBlob=e=>typedHex(e);HexBlob.fromBytes=e=>o.from(e).toString("hex");HexBlob.fromBase64=e=>o.from(e,"base64").toString("hex");HexBlob.toTypedBech32=(e,t)=>s.bech32.encode(e,s.bech32.toWords(Uint8Array.from(o.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e}},"../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js":(e,t,r)=>{"use strict";r.d(t,{fromSerializableObject:()=>fromSerializableObject,toSerializableObject:()=>toSerializableObject});var s=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");var a=r("../../node_modules/lodash/transform.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const i=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const n="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const toSerializableObject=(e,t={})=>{if(i.has(typeof e))return e;const{transformationTypeKey:r=n,serializeKey:d=defaultTransformKey}=t;if(void 0===e){return{[r]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>toSerializableObject(e,t))}if(ArrayBuffer.isView(e)){const c=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const l=o.from(c).toString("hex");return{[r]:"Buffer",value:l}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=toSerializableObject(e.innerError.data);return{[r]:"Error",value:(0,s.serializeError)(e)}}if(e instanceof Date){return{[r]:"Date",value:e.getTime()}}if(e instanceof Set){return{[r]:"Set",value:[...e].map(e=>toSerializableObject(e,t))}}if(e instanceof Map){return{[r]:"Map",value:[...e.entries()].map(([e,r])=>[toSerializableObject(e,t),toSerializableObject(r,t)])}}return a(e,(e,r,s)=>{e[d(s)]=toSerializableObject(r,t);return e},{})}if("bigint"==typeof e)return{[r]:"bigint",value:e.toString()}};const fromSerializableObjectUnknown=(e,t={})=>{if(i.has(typeof e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=n,deserializeKey:s=defaultTransformKey,errorTypes:d=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(o.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(d,l))}default:return a(e,(e,r,a)=>{e[s(a)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t)},"../../node_modules/@cardano-sdk/util/dist/esm/transformer.js":(e,t,r)=>{"use strict";r.d(t,{transformObj:()=>transformObj});var s=r("../../node_modules/lodash/isUndefined.js");var a=r("../../node_modules/lodash/merge.js");const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:a(e,{[t]:r}),{})}return e};const transformObj=async(e,t,r)=>{const a=Object.entries(t);const o=Object.create({});for(const[i,n]of a)o[i]=await ("function"==typeof n?n(e,r):transformObj(e,n,r));return deepOmitBy(o,s)}},"../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];class NonError extends Error{constructor(e){super(NonError._prepareSuperMessage(e));Object.defineProperty(this,"name",{value:"NonError",configurable:true,writable:true});if(Error.captureStackTrace)Error.captureStackTrace(this,NonError)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const a=[{property:"name",enumerable:false},{property:"message",enumerable:false},{property:"stack",enumerable:false},{property:"code",enumerable:true}];const o=Symbol(".toJSON called");const toJSON=e=>{e[o]=true;const t=e.toJSON();delete e[o];return t};const destroyCircular=({from:e,seen:t,to_:r,forceEnumerable:i,maxDepth:n,depth:d})=>{const c=r||(Array.isArray(e)?[]:{});t.push(e);if(d>=n){return c}if("function"==typeof e.toJSON&&true!==e[o]){return toJSON(e)}for(const[l,u]of Object.entries(e)){if("function"==typeof s&&s.isBuffer(u)){c[l]="[object Buffer]";continue}if("function"==typeof u){continue}if(!u||"object"!=typeof u){c[l]=u;continue}if(!t.includes(e[l])){d++;c[l]=destroyCircular({from:e[l],seen:t.slice(),forceEnumerable:i,maxDepth:n,depth:d});continue}c[l]="[Circular]"}for(const{property:f,enumerable:p}of a)if("string"==typeof e[f])Object.defineProperty(c,f,{value:e[f],enumerable:!!i||p,configurable:true,writable:true});return c};const serializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if("object"==typeof e&&null!==e){return destroyCircular({from:e,seen:[],forceEnumerable:true,maxDepth:r,depth:0})}if("function"==typeof e){return`[Function: ${e.name||"anonymous"}]`}return e};const deserializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error){return e}if("object"==typeof e&&null!==e&&!Array.isArray(e)){const s=new Error;destroyCircular({from:e,seen:[],to_:s,maxDepth:r,depth:0});return s}return new NonError(e)};e.exports={serializeError,deserializeError}},"../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/internals.js":(e,t,r)=>{"use strict";r.d(t,{getScriptAddress:()=>getScriptAddress});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/util/nativeScript.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const getScriptAddress=(e,t,r)=>{const d=(0,a.nativeScriptPolicyId)(e);const c=(0,a.nativeScriptPolicyId)(t);const l={hash:d,type:o.CredentialType.ScriptHash};const u={hash:c,type:o.CredentialType.ScriptHash};const f=i.BaseAddress.fromCredentials(r,l,u);return{accountIndex:0,address:f.toAddress().toBech32(),index:0,networkId:r,rewardAccount:n.RewardAddress.fromCredentials(r,u).toAddress().toBech32(),type:s.AddressType.External}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/util.js":(e,t,r)=>{"use strict";r.d(t,{createPersonalWallet:()=>createPersonalWallet,isValidSharedWalletScript:()=>isValidSharedWalletScript});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/lodash/uniqBy.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i;const n=5;const addressHasTx=async(e,t)=>{const r=await t.transactionsByAddresses({addresses:[e.address],pagination:{limit:1,startAt:0}});return r.totalResultCount>0};const discoverAddresses=async(e,t,r,a)=>{let o=0;let i=0;const n=new Array;while(o<=r){const d=a(i,s.AddressType.External);const c=a(i,s.AddressType.Internal);const l=await e.deriveAddress(d.paymentKeyDerivationPath,d.stakeKeyDerivationIndex);const u=await e.deriveAddress(c.paymentKeyDerivationPath,c.stakeKeyDerivationIndex);const f=await addressHasTx(l,t);const p=await addressHasTx(u,t);if(f)n.push(l);if(p)n.push(u);if(f||p)o=0;else++o;++i}return n};class HDSequentialDiscovery{async discover(e){const t=[await e.deriveAddress({index:0,type:s.AddressType.External},0)];const r=await e.deriveAddress({index:0,type:s.AddressType.Internal},0);if(await addressHasTx(r,__classPrivateFieldGet(this,o,"f")))t.push(r);const d=await discoverAddresses(e,__classPrivateFieldGet(this,o,"f"),n,(e,t)=>({paymentKeyDerivationPath:{index:0,type:t},stakeKeyDerivationIndex:e+1}));const c=await discoverAddresses(e,__classPrivateFieldGet(this,o,"f"),__classPrivateFieldGet(this,i,"f"),(e,t)=>({paymentKeyDerivationPath:{index:e+1,type:t},stakeKeyDerivationIndex:0}));const l=a([...t,...d,...c],"address");return l.sort((e,t)=>e.index-t.index||e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index)}constructor(e,t){o.set(this,void 0);i.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,i,t,"f")}}o=new WeakMap,i=new WeakMap;var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/BaseWallet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const l=20;const isValidSharedWalletScript=e=>{switch(e.kind){case c.NativeScriptKind.RequireAllOf:case c.NativeScriptKind.RequireAnyOf:case c.NativeScriptKind.RequireNOf:return e.scripts.every(e=>e.kind===c.NativeScriptKind.RequireSignature);default:return false}};const createPersonalWallet=(e,t)=>{const r={__type:d.PublicCredentialsManagerType.BIP32_CREDENTIALS_MANAGER,addressDiscovery:t.addressDiscovery?t.addressDiscovery:new HDSequentialDiscovery(t.chainHistoryProvider,l),bip32Account:t.bip32Account};return new d.BaseWallet(e,{...t,publicCredentialsManager:r})};const createSharedWallet=(e,t)=>{if(!isValidSharedWalletScript(t.paymentScript)||!isValidSharedWalletScript(t.stakingScript))throw new Error('SharedWallet requires the scripts to be of type "RequireAllOfScript" or "RequireAnyOfScript" or "RequireAtLeastScript"');const r={__type:PublicCredentialsManagerType.SCRIPT_CREDENTIALS_MANAGER,paymentScript:t.paymentScript,stakingScript:t.stakingScript};return new BaseWallet(e,{...t,publicCredentialsManager:r})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryCollectionStore:()=>InMemoryCollectionStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var c=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l;class InMemoryCollectionStore extends d.InMemoryStore{getAll(){if(0===this.docs.length||this.destroyed)return s.EMPTY;return(0,a.of)(this.docs)}setAll(e){if(!this.destroyed){this.docs=e;return(0,a.of)(void 0).pipe((0,o.delay)(1),(0,i.tap)(()=>__classPrivateFieldGet(this,l,"f").next(this.docs)))}return s.EMPTY}destroy(){__classPrivateFieldGet(this,l,"f").complete();return super.destroy()}constructor(){super();l.set(this,new n.Subject);this.docs=[];this.observeAll=(0,c.observeAll)(this,__classPrivateFieldGet(this,l,"f"))}}l=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryDocumentStore:()=>InMemoryDocumentStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i;class InMemoryDocumentStore extends o.InMemoryStore{get(){if(!__classPrivateFieldGet(this,i,"f")||this.destroyed)return s.EMPTY;return(0,a.of)(__classPrivateFieldGet(this,i,"f"))}set(e){if(!this.destroyed){__classPrivateFieldSet(this,i,e,"f");return(0,a.of)(void 0)}return s.EMPTY}delete(){if(this.destroyed)return s.EMPTY;__classPrivateFieldSet(this,i,null,"f");return(0,a.of)(void 0)}constructor(){super(...arguments);i.set(this,null)}}i=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyValueStore:()=>InMemoryKeyValueStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");class InMemoryKeyValueStore extends o.InMemoryCollectionStore{getValues(e){if(this.destroyed||0===e.length)return s.EMPTY;const t=[];for(const r of e){var o;const i=null===(o=this.docs.find(e=>e.key===r))||void 0===o?void 0:o.value;if(!i)return s.EMPTY;t.push(i)}return(0,a.of)(t)}setValue(e,t){if(this.destroyed)return s.EMPTY;const r=this.docs.findIndex(t=>t.key===e);if(r>=0)this.docs.splice(r,1);this.docs.push({key:e,value:t});return(0,a.of)(void 0)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryStore:()=>InMemoryStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");class InMemoryStore{destroy(){this.destroyed=true;return(0,s.of)(void 0)}constructor(){this.destroyed=false}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryAddressesStore:()=>InMemoryAddressesStore,InMemoryAssetsStore:()=>InMemoryAssetsStore,InMemoryDelegationPortfolioStore:()=>InMemoryDelegationPortfolioStore,InMemoryEraSummariesStore:()=>InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>InMemoryInFlightTransactionsStore,InMemoryPolicyIdsStore:()=>InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>InMemoryStakePoolsStore,InMemoryTipStore:()=>InMemoryTipStore,InMemoryTransactionsStore:()=>InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>InMemoryVolatileTransactionsStore,createInMemoryWalletStores:()=>createInMemoryWalletStores});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");class InMemoryTipStore extends n.InMemoryDocumentStore{}class InMemoryPolicyIdsStore extends n.InMemoryDocumentStore{}class InMemoryProtocolParametersStore extends n.InMemoryDocumentStore{}class InMemoryGenesisParametersStore extends n.InMemoryDocumentStore{}class InMemoryEraSummariesStore extends n.InMemoryDocumentStore{}class InMemoryDelegationPortfolioStore extends n.InMemoryDocumentStore{}class InMemoryAssetsStore extends n.InMemoryDocumentStore{}class InMemoryAddressesStore extends n.InMemoryDocumentStore{}class InMemoryInFlightTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryVolatileTransactionsStore extends n.InMemoryDocumentStore{}class InMemorySignedTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryTransactionsStore extends i.InMemoryCollectionStore{}class InMemoryUtxoStore extends i.InMemoryCollectionStore{}class InMemoryUnspendableUtxoStore extends i.InMemoryCollectionStore{}class InMemoryRewardsHistoryStore extends d.InMemoryKeyValueStore{}class InMemoryRewardAccountInfoStore extends d.InMemoryKeyValueStore{}class InMemoryStakePoolsStore extends d.InMemoryKeyValueStore{}const createInMemoryWalletStores=()=>({addresses:new InMemoryAddressesStore,assets:new InMemoryAssetsStore,delegationPortfolio:new InMemoryDelegationPortfolioStore,destroy(){if(!this.destroyed){this.destroyed=true;return(0,s.combineLatest)([this.addresses.destroy(),this.assets.destroy(),this.genesisParameters.destroy(),this.protocolParameters.destroy(),this.eraSummaries.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy(),this.tip.destroy(),this.transactions.destroy(),this.inFlightTransactions.destroy(),this.volatileTransactions.destroy(),this.utxo.destroy(),this.policyIds.destroy()]).pipe((0,a.map)(()=>void 0))}return o.EMPTY},destroyed:false,eraSummaries:new InMemoryEraSummariesStore,genesisParameters:new InMemoryGenesisParametersStore,inFlightTransactions:new InMemoryInFlightTransactionsStore,policyIds:new InMemoryPolicyIdsStore,protocolParameters:new InMemoryProtocolParametersStore,rewardAccountInfo:new InMemoryRewardAccountInfoStore,rewardsHistory:new InMemoryRewardsHistoryStore,signedTransactions:new InMemorySignedTransactionsStore,stakePools:new InMemoryStakePoolsStore,tip:new InMemoryTipStore,transactions:new InMemoryTransactionsStore,unspendableUtxo:new InMemoryUnspendableUtxoStore,utxo:new InMemoryUtxoStore,volatileTransactions:new InMemoryVolatileTransactionsStore})},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{InMemoryAddressesStore:()=>i.InMemoryAddressesStore,InMemoryAssetsStore:()=>i.InMemoryAssetsStore,InMemoryCollectionStore:()=>a.InMemoryCollectionStore,InMemoryDelegationPortfolioStore:()=>i.InMemoryDelegationPortfolioStore,InMemoryDocumentStore:()=>s.InMemoryDocumentStore,InMemoryEraSummariesStore:()=>i.InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>i.InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>i.InMemoryInFlightTransactionsStore,InMemoryKeyValueStore:()=>o.InMemoryKeyValueStore,InMemoryPolicyIdsStore:()=>i.InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>i.InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>i.InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>i.InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>i.InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>i.InMemoryStakePoolsStore,InMemoryStakeSummaryStore:()=>InMemoryStakeSummaryStore,InMemorySupplySummaryStore:()=>InMemorySupplySummaryStore,InMemoryTipStore:()=>i.InMemoryTipStore,InMemoryTransactionsStore:()=>i.InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>i.InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>i.InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>i.InMemoryVolatileTransactionsStore,PouchDbAddressesStore:()=>PouchDbAddressesStore,PouchDbAssetsStore:()=>PouchDbAssetsStore,PouchDbCollectionStore:()=>PouchDbCollectionStore,PouchDbDelegationPortfolioStore:()=>PouchDbDelegationPortfolioStore,PouchDbDocumentStore:()=>PouchDbDocumentStore,PouchDbEraSummariesStore:()=>PouchDbEraSummariesStore,PouchDbGenesisParametersStore:()=>PouchDbGenesisParametersStore,PouchDbInFlightTransactionsStore:()=>PouchDbInFlightTransactionsStore,PouchDbKeyValueStore:()=>PouchDbKeyValueStore,PouchDbPolicyIdsStore:()=>PouchDbPolicyIdsStore,PouchDbProtocolParametersStore:()=>PouchDbProtocolParametersStore,PouchDbRewardAccountInfoStore:()=>PouchDbRewardAccountInfoStore,PouchDbRewardsHistoryStore:()=>PouchDbRewardsHistoryStore,PouchDbSignedTransactionsStore:()=>PouchDbSignedTransactionsStore,PouchDbStakePoolsStore:()=>PouchDbStakePoolsStore,PouchDbStakeSummaryStore:()=>PouchDbStakeSummaryStore,PouchDbSupplySummaryStore:()=>PouchDbSupplySummaryStore,PouchDbTipStore:()=>PouchDbTipStore,PouchDbTransactionsStore:()=>PouchDbTransactionsStore,PouchDbUtxoStore:()=>PouchDbUtxoStore,PouchDbVolatileTransactionsStore:()=>PouchDbVolatileTransactionsStore,createInMemorySupplyDistributionStores:()=>createInMemorySupplyDistributionStores,createInMemoryWalletStores:()=>i.createInMemoryWalletStores,createPouchDbSupplyDistributionStores:()=>createPouchDbSupplyDistributionStores,createPouchDbWalletStores:()=>createPouchDbWalletStores});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");class InMemoryStakeSummaryStore extends s.InMemoryDocumentStore{}class InMemorySupplySummaryStore extends s.InMemoryDocumentStore{}const createInMemorySupplyDistributionStores=()=>({destroy(){if(!this.destroyed){this.destroyed=true;return(0,n.combineLatest)([this.stake.destroy(),this.lovelaceSupply.destroy()]).pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new InMemorySupplySummaryStore,stake:new InMemoryStakeSummaryStore});var l=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var h=r("../../node_modules/lodash/omit.js");const m=["_id","_rev","_attachments","_conflicts","_revisions","_revs_info"];const v="transformed_type_";const _="transformed_key_";const y={serializeKey:e=>{if(e.startsWith("_")){return`${_}${e}`}return e},transformationTypeKey:v};const w={deserializeKey:e=>{if(e.startsWith(_)){return e.slice(_.length)}return e},transformationTypeKey:v};const toPouchDbDoc=e=>{if(Array.isArray(e)){const t=e.map(e=>(0,p.toSerializableObject)(e,y));return{[v]:"Array",value:t}}return(0,p.toSerializableObject)(e,y)};const fromPouchDbDoc=e=>{if("object"==typeof e){const t=e;if("Array"===t[v])return t.value.map(e=>(0,p.fromSerializableObject)(e,w))}return(0,p.fromSerializableObject)(e,w)};const sanitizePouchDbDoc=e=>fromPouchDbDoc(h(e,m));var g=r("../../node_modules/pouchdb/lib/index-browser.es.js");const b=100;class PouchDbStore{async clearDB(){const e=await this.fetchAllDocs();await this.db.bulkDocs(e.map(e=>({_deleted:true,_id:e.id,_rev:e.value.rev})))}destroy(){if(!this.destroyed){this.destroyed=true;return(0,u.from)(this.db.destroy())}return c.EMPTY}toPouchDbDoc(e){return toPouchDbDoc(e)}async getRev(e){const t=await this.db.get(e).catch(()=>void 0);return null==t?void 0:t._rev}async fetchAllDocs(e){const t=await this.db.allDocs({...e,limit:b});if(t&&t.rows.length>0){return[...t.rows,...await this.fetchAllDocs({...e,skip:1,startkey:t.rows[t.rows.length-1].id})]}return t.rows||[]}forcePut(e,t){if(this.destroyed)return c.EMPTY;const r=this.toPouchDbDoc(t);return(0,u.from)(this.idle=this.idle.then(async()=>{const t={_id:e,_rev:await this.getRev(e),...r};try{await this.db.put(t,{force:true})}catch(s){this.logger.warn(`PouchDbStore(${this.dbName}): failed to forcePut`,t,s)}}).catch(()=>void 0))}constructor(e,t){this.dbName=e;this.destroyed=false;this.idle=Promise.resolve();this.logger=t;this.db=new g["default"](e,{auto_compaction:true})}}var P=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var S=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var C,T;class PouchDbCollectionStore extends PouchDbStore{getAll(){if(this.destroyed)return c.EMPTY;return new l.Observable(e=>{this.fetchAllDocs({include_docs:true}).then(t=>{const r=t.map(({doc:e})=>sanitizePouchDbDoc(e));if(r.length>0)e.next(r);e.complete()}).catch(e.complete.bind(e))})}setAll(e){if(this.destroyed)return c.EMPTY;return(0,u.from)(this.idle=this.idle.then(async()=>{try{const t=e.map(e=>({...this.toPouchDbDoc(e),_id:__classPrivateFieldGet(this,C,"f").call(this,e)}));const r=await this.fetchAllDocs();const s=t.map(e=>{const t=r.find(t=>t.id===e._id);if(!t)return e;return{...e,_rev:t.value.rev}});const a=r.filter(e=>!t.some(t=>t._id===e.id));await this.db.bulkDocs(a.map(({id:e,value:{rev:t}})=>({_deleted:true,_id:e,_rev:t})));await this.db.bulkDocs(s);__classPrivateFieldGet(this,T,"f").next(e)}catch(o){this.logger.error(`PouchDbCollectionStore(${this.dbName}): failed to setAll`,e,o)}}))}destroy(){__classPrivateFieldGet(this,T,"f").complete();return super.destroy()}constructor({dbName:e,computeDocId:t},r){super(e,r);C.set(this,void 0);T.set(this,new f.Subject);this.observeAll=(0,P.observeAll)(this,__classPrivateFieldGet(this,T,"f"));__classPrivateFieldSet(this,C,null!=t?t:()=>(0,S["default"])(),"f")}}C=new WeakMap,T=new WeakMap;var PouchDbDocumentStore_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var PouchDbDocumentStore_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var k;class PouchDbDocumentStore extends PouchDbStore{get(){if(this.destroyed)return c.EMPTY;return new l.Observable(e=>{this.db.get(PouchDbDocumentStore_classPrivateFieldGet(this,k,"f")).then(t=>{e.next(sanitizePouchDbDoc(t));e.complete()}).catch(e.complete.bind(e))})}set(e){return this.forcePut(PouchDbDocumentStore_classPrivateFieldGet(this,k,"f"),e)}delete(){if(this.destroyed)return c.EMPTY;return(0,u.from)((async()=>{const e=await this.getRev(PouchDbDocumentStore_classPrivateFieldGet(this,k,"f"));if(!e){return}await this.db.remove({_id:PouchDbDocumentStore_classPrivateFieldGet(this,k,"f"),_rev:e})})())}constructor(e,t,r){super(e,r);k.set(this,void 0);PouchDbDocumentStore_classPrivateFieldSet(this,k,t,"f")}}k=new WeakMap;class PouchDbKeyValueStore extends PouchDbStore{setAll(e){if(this.destroyed)return c.EMPTY;return(0,u.from)(this.idle=this.idle.then(async()=>{try{await this.clearDB();await this.db.bulkDocs(e.map(({key:e,value:t})=>({...this.toPouchDbDoc(t),_id:e})))}catch(t){this.logger.error(`PouchDbDocumentStore(${this.dbName}): failed to setAll`,e,t)}}))}getValues(e){if(this.destroyed)return c.EMPTY;return new l.Observable(t=>{this.db.bulkGet({docs:e.map(e=>({id:e}))}).then(({results:e})=>{const r=[];for(const{docs:s}of e){if(1!==s.length||"error"in s[0]){return t.complete()}r.push(sanitizePouchDbDoc(s[0].ok))}t.next(r);t.complete()}).catch(t.complete.bind(t))})}setValue(e,t){return this.forcePut(e,t)}constructor(e,t){super(e,t)}}class PouchDbTipStore extends PouchDbDocumentStore{}class PouchDbProtocolParametersStore extends PouchDbDocumentStore{}class PouchDbGenesisParametersStore extends PouchDbDocumentStore{}class PouchDbEraSummariesStore extends PouchDbDocumentStore{}class PouchDbDelegationPortfolioStore extends PouchDbDocumentStore{}class PouchDbAssetsStore extends PouchDbDocumentStore{}class PouchDbAddressesStore extends PouchDbDocumentStore{}class PouchDbInFlightTransactionsStore extends PouchDbDocumentStore{}class PouchDbVolatileTransactionsStore extends PouchDbDocumentStore{}class PouchDbPolicyIdsStore extends PouchDbDocumentStore{}class PouchDbSignedTransactionsStore extends PouchDbDocumentStore{}class PouchDbTransactionsStore extends PouchDbCollectionStore{}class PouchDbUtxoStore extends PouchDbCollectionStore{}class PouchDbRewardsHistoryStore extends PouchDbKeyValueStore{}class PouchDbRewardAccountInfoStore extends PouchDbKeyValueStore{}class PouchDbStakePoolsStore extends PouchDbKeyValueStore{}const createPouchDbWalletStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const s=`${r}Docs`;return{addresses:new PouchDbAddressesStore(s,"addresses",t),assets:new PouchDbAssetsStore(s,"assets",t),delegationPortfolio:new PouchDbDelegationPortfolioStore(s,"delegationPortfolio",t),destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb WalletStores...");const e=this.tip.destroy();return(0,n.combineLatest)([e,this.transactions.destroy(),this.utxo.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy()]).pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,eraSummaries:new PouchDbEraSummariesStore(s,"EraSummaries",t),genesisParameters:new PouchDbGenesisParametersStore(s,"genesisParameters",t),inFlightTransactions:new PouchDbInFlightTransactionsStore(s,"transactionsInFlight_v2",t),policyIds:new PouchDbPolicyIdsStore(s,"policyIds",t),protocolParameters:new PouchDbProtocolParametersStore(s,"protocolParameters",t),rewardAccountInfo:new PouchDbRewardAccountInfoStore(`${r}RewardAccountInfo`,t),rewardsHistory:new PouchDbRewardsHistoryStore(`${r}RewardsHistory`,t),signedTransactions:new PouchDbSignedTransactionsStore(s,"signedTransactions",t),stakePools:new PouchDbStakePoolsStore(`${r}StakePools`,t),tip:new PouchDbTipStore(s,"tip",t),transactions:new PouchDbTransactionsStore({computeDocId:({blockHeader:{blockNo:e},index:t})=>(1e5*e+t).toString(),dbName:`${r}Transactions_v2`},t),unspendableUtxo:new PouchDbUtxoStore({dbName:`${r}UnspendableUtxo`},t),utxo:new PouchDbUtxoStore({dbName:`${r}Utxo_v2`},t),volatileTransactions:new PouchDbVolatileTransactionsStore(s,"volatileTransactions_v3",t)}};class PouchDbStakeSummaryStore extends PouchDbDocumentStore{}class PouchDbSupplySummaryStore extends PouchDbDocumentStore{}const createPouchDbSupplyDistributionStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const s=`${r}SupplyDistribution`;return{destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb SupplyDistributionStores...");return this.lovelaceSupply.destroy().pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new PouchDbSupplySummaryStore(s,"lovelaceSupply",t),stake:new PouchDbStakeSummaryStore(s,"stake",t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js":(e,t,r)=>{"use strict";r.d(t,{observeAll:()=>observeAll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");const observeAll=(e,t)=>()=>{if(e.destroyed)return s.EMPTY;return(0,a.race)((0,o.concat)(e.getAll().pipe((0,i.defaultIfEmpty)([])),t),t)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/AddressTracker.js":(e,t,r)=>{"use strict";r.d(t,{createAddressTracker:()=>createAddressTracker});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var m=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var v=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/sortAddresses.js");const createAddressTracker=({addressDiscovery$:e,store:t,logger:r})=>{const storeAddresses=()=>e=>e.pipe((0,s.switchMap)(e=>t.set(e).pipe((0,a.map)(()=>e))));const _=new o.Subject;const y=t.get().pipe((0,i.defaultIfEmpty)([]),(0,n.mergeMap)(t=>{if(0===t.length){r.debug("No addresses available; initiating address discovery process");return e.pipe((0,d.tap)(e=>{if(0===e.length){throw new Error("Address discovery derived 0 addresses")}}),storeAddresses())}return(0,c.of)(t)}),(0,s.switchMap)(e=>{const t=[...e];return(0,l.merge)((0,c.of)(e),_.pipe((0,a.map)(e=>{for(const s of e){if(t.some(e=>e.address===s.address)){r.warn("Address already exists",s.address);continue}t.push(s)}return[...t]}),storeAddresses())).pipe((0,u.distinctUntilChanged)(m.groupedAddressesEquals))})).pipe((0,f.shareReplay)(1));return{addAddresses:e=>{_.next(e);return y.pipe((0,p.filter)(t=>e.every(({address:e})=>t.some(({address:t})=>t===e))),(0,h.take)(1))},addresses$:y.pipe((0,a.map)(v.sortAddresses)),shutdown:_.complete.bind(_)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/AssetsTracker.js":(e,t,r)=>{"use strict";r.d(t,{createAssetsTracker:()=>createAssetsTracker});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/connect.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/buffer.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/operators/ignoreElements.js");const startOnTrigger=(e,t)=>(0,p.concat)(e.pipe((0,v.take)(1),(0,g.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,c.of)([])}const t=[];let r=e[0].pipe((0,f.share)());t.push(r);for(const s of e.slice(1)){const a=startOnTrigger(r,s);r=a.pipe((0,f.share)());t.push(r)}return(0,h.combineLatest)(t)};var b=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var P=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var S=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/TransactionsTracker.js");var C=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");var T=r("../../node_modules/lodash/chunk.js");var k=r("../../node_modules/lodash/uniq.js");const isAssetInfoComplete=e=>void 0!==e.nftMetadata&&void 0!==e.tokenMetadata;const isEveryAssetInfoComplete=e=>e.every(isAssetInfoComplete);const bufferTick=()=>e=>e.pipe((0,o.connect)(e=>e.pipe((0,i.buffer)(e.pipe((0,n.debounceTime)(1))))));const A=100;const E=864e5;const j=7*E;var I;const isInBalance=(e,t)=>{var r;return null!==(I=null===(r=t.assets)||void 0===r?void 0:r.has(e))&&void 0!==I&&I};const splitCachedAndUncachedAssets=(e,t,r)=>{const s=new Map;const a=[];const o=new Date;for(const i of r){const n=e.get(i);if(!n){a.push(i);continue}const{staleAt:d}=n;const c=!d||new Date(d)<o;const l=!isAssetInfoComplete(n)||isInBalance(i,t)&&c;if(l)a.push(i);else s.set(i,n)}return{cachedAssets:s,uncachedAssetIds:a}};const getAssetsWithCache=async(e,t,r,s,a)=>{const[o,i]=await Promise.all([(0,d.firstValueFrom)(t),(0,d.firstValueFrom)(r)]);const{cachedAssets:n,uncachedAssetIds:c}=splitCachedAndUncachedAssets(o,i,e);if(0===c.length){if(!s.stats.getAsset$.value.initialized)s.setStatInitialized(s.stats.getAsset$);return[...n.values()]}const l=await s.getAssets({assetIds:c,extraData:{nftMetadata:true,tokenMetadata:true}});const u=Date.now();const f=l.map(e=>{const t=Math.floor(2*Math.random()*E);return{...e,staleAt:new Date(u+a+t)}});return[...n.values(),...f]};const createAssetService=(e,t,r,s,a,o=j)=>i=>concatAndCombineLatest(T(i,A).map(i=>(0,C.pollProvider)({logger:a,pollUntil:isEveryAssetInfoComplete,retryBackoffConfig:s,sample:()=>getAssetsWithCache(i,t,r,e,o),trigger$:(0,c.of)(true)}))).pipe((0,l.map)(e=>e.flat()));const uniqueAssetIds=({body:{outputs:e}})=>e.flatMap(({value:{assets:e}})=>e?[...e.keys()]:[]);const flatUniqueAssetIds=e=>k(e.flatMap(uniqueAssetIds));const createAssetsTracker=({assetProvider:e,assetsCache$:t,transactionsTracker:{history$:r},balanceTracker:{utxo:{total$:o}},retryBackoffConfig:i,logger:n,maxAssetInfoCacheAge:d},{assetService:g=createAssetService(e,t,o,i,n,d)}={})=>{return new u.Observable(t=>{let i=new Map;const d=new Set;const u=r.pipe((0,f.share)());return(0,p.concat)((0,h.combineLatest)([u.pipe((0,l.map)(e=>k(e.flatMap(uniqueAssetIds)))),o.pipe((0,l.map)(e=>{var t;return[...(null===(t=e.assets)||void 0===t?void 0:t.keys())||[]]}))]).pipe((0,l.map)(([e,t])=>k([...e,...t])),(0,m.tap)(e=>n.debug(e.length>0?`Total assets: ${e.length}`:"Setting assetProvider stats as initialized")),(0,m.tap)(t=>0===t.length&&e.setStatInitialized(e.stats.getAsset$)),(0,v.take)(1)),(0,S.newTransactions$)(u).pipe(bufferTick(),(0,l.map)(flatUniqueAssetIds),(0,l.map)(e=>{const t=e.filter(e=>!d.has(e));const r=[...d.values()].filter(e=>{const t=i.get(e);return!t||!isAssetInfoComplete(t)});const o=e.map(e=>{const t=s.AssetId.getAssetName(e);const r=a.AssetNameLabel.decode(t);if((null==r?void 0:r.label)===a.AssetNameLabelNum.ReferenceNFT){return s.AssetId.fromParts(s.AssetId.getPolicyId(e),a.AssetNameLabel.encode(r.content,a.AssetNameLabelNum.UserNFT))}}).filter(b.isNotNil);return k([...t,...r,...o])}),(0,_.filter)(e=>e.length>0))).pipe((0,m.tap)(e=>{for(const t of e)d.add(t)}),(0,y.switchMap)(e=>e.length>0?g(e):(0,c.of)([])),(0,l.map)(e=>[...[...i.values()].filter(b.isNotNil),...e]),(0,w.distinctUntilChanged)(P.deepEquals),(0,m.tap)(e=>n.debug(`Got metadata for ${e.length} assets`)),(0,l.map)(e=>new Map(e.map(e=>[e.assetId,e]))),(0,m.tap)(e=>i=e)).subscribe(t)})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/BalanceTracker.js":(e,t,r)=>{"use strict";r.d(t,{createBalanceTracker:()=>createBalanceTracker,createUtxoBalanceByAddressTracker:()=>createUtxoBalanceByAddressTracker});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");const c=(0,o.map)(e=>(0,s.coalesceValueQuantities)(e.map(([e,t])=>t.value)));const computeDepositCoin=(e,t)=>(0,i.combineLatest)([t,e]).pipe((0,o.map)(([e,{stakeKeyDeposit:t}])=>BigInt(e*t)),(0,n.distinctUntilChanged)());const numRewardAccountsWithKeyStatus=(e,t)=>e.rewardAccounts$.pipe((0,o.map)(e=>e.filter(e=>t.includes(e.credentialStatus)).length));const createBalanceTracker=(e,t,r)=>({rewardAccounts:{deposit$:computeDepositCoin(e,numRewardAccountsWithKeyStatus(r,[a.StakeCredentialStatus.Registered,a.StakeCredentialStatus.Registering])),rewards$:r.rewardAccounts$.pipe((0,o.map)(e=>e.reduce((e,{rewardBalance:t})=>e+t,0n)),(0,n.distinctUntilChanged)())},utxo:{available$:t.available$.pipe(c),total$:t.total$.pipe(c),unspendable$:t.unspendable$.pipe(c)}});const filterUtxosByAddress=e=>{return t=>{return t.pipe((0,o.map)(t=>{return t.filter(([,t])=>{return!(null==e?void 0:e.length)||e.includes(t.address)})}))}};const createUtxoBalanceByAddressTracker=(e,t)=>({utxo:{available$:e.available$.pipe(filterUtxosByAddress(t),(0,n.distinctUntilChanged)(d.utxoEquals),c),total$:e.total$.pipe(filterUtxosByAddress(t),(0,n.distinctUntilChanged)(d.utxoEquals),c),unspendable$:e.unspendable$.pipe(filterUtxosByAddress(t),(0,n.distinctUntilChanged)(d.utxoEquals),c)}})},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ChangeAddress/DynamicChangeAddressResolver.js":(e,t,r)=>{"use strict";r.d(t,{DynamicChangeAddressResolver:()=>DynamicChangeAddressResolver});var s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,o=Math.floor,i="[BigNumber Error] ",n=i+"Number primitive has more than 15 significant digits: ",d=1e14,c=14,l=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function clone(e){var t,r,h,m=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},v=new BigNumber(1),_=20,y=4,w=-7,g=21,b=-1e7,P=1e7,S=false,C=1,T=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",E=true;function BigNumber(e,t){var a,i,d,u,f,p,m,v,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>P)w.c=w.e=null;else if(e.e<b)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((p="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(u=0,f=e;f>=10;f/=10,u++);if(u>P)w.c=w.e=null;else{w.e=u;w.c=[e]}return}v=String(e)}else{if(!s.test(v=String(e)))return h(w,v,p);w.s=45==v.charCodeAt(0)?(v=v.slice(1),-1):1}if((u=v.indexOf("."))>-1)v=v.replace(".","");if((f=v.search(/e/i))>0){if(u<0)u=f;u+=+v.slice(f+1);v=v.substring(0,f)}else if(u<0)u=v.length}else{intCheck(t,2,A.length,"Base");if(10==t&&E){w=new BigNumber(e);return round(w,_+w.e+1,y)}v=String(e);if(p="number"==typeof e){if(0*e!=0)return h(w,v,p,t);w.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(n+e)}}else{w.s=45===v.charCodeAt(0)?(v=v.slice(1),-1):1}a=A.slice(0,t);u=f=0;for(m=v.length;f<m;f++)if(a.indexOf(i=v.charAt(f))<0){if("."==i){if(f>u){u=m;continue}}else if(!d){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){d=true;f=-1;u=0;continue}}return h(w,String(e),p,t)}p=false;v=r(v,t,10,w.s);if((u=v.indexOf("."))>-1)v=v.replace(".","");else u=v.length}for(f=0;48===v.charCodeAt(f);f++);for(m=v.length;48===v.charCodeAt(--m););if(v=v.slice(f,++m)){m-=f;if(p&&BigNumber.DEBUG&&m>15&&(e>l||e!==o(e))){throw Error(n+w.s*e)}if((u=u-f-1)>P)w.c=w.e=null;else if(u<b)w.c=[w.e=0];else{w.e=u;w.c=[];f=(u+1)%c;if(u<0)f+=c;if(f<m){if(f)w.c.push(+v.slice(0,f));for(m-=c;f<m;)w.c.push(+v.slice(f,f+=c));f=c-(v=v.slice(f)).length}else{f-=m}for(;f--;v+="0");w.c.push(+v)}}else{w.c=[w.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,p,t);_=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);y=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-p,0,t);intCheck(r[1],0,p,t);w=r[0];g=r[1]}else{intCheck(r,-p,p,t);w=-(g=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-p,-1,t);intCheck(r[1],1,p,t);b=r[0];P=r[1]}else{intCheck(r,-p,p,t);if(r)b=-(P=r<0?-r:r);else{throw Error(i+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=r;else{S=!r;throw Error(i+"crypto unavailable")}else S=r;else{throw Error(i+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);C=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,p,t);T=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)k=r;else throw Error(i+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(i+t+" invalid: "+r)}E="0123456789"==r.slice(0,10);A=r}}else{throw Error(i+"Object expected: "+e)}return{DECIMAL_PLACES:_,ROUNDING_MODE:y,EXPONENTIAL_AT:[w,g],RANGE:[b,P],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:T,FORMAT:k,ALPHABET:A}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,n=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===n||-1===n)&&a>=-p&&a<=p&&a===o(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%c;if(t<1)t+=c;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=d||r!==o(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===n||1===n||-1===n)){return true}throw Error(i+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,m.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,m.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return o(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,n,d,l,f=0,h=[],m=new BigNumber(v);if(null==e)e=_;else intCheck(e,0,p);d=a(e/c);if(S)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(d*=2));for(;f<d;){l=131072*r[f]+(r[f+1]>>>11);if(l>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[f]=s[0];r[f+1]=s[1]}else{h.push(l%1e14);f+=2}}f=d/2}else if(crypto.randomBytes){r=crypto.randomBytes(d*=7);for(;f<d;){l=(31&r[f])*281474976710656+1099511627776*r[f+1]+4294967296*r[f+2]+16777216*r[f+3]+(r[f+4]<<16)+(r[f+5]<<8)+r[f+6];if(l>=9e15)crypto.randomBytes(7).copy(r,f);else{h.push(l%1e14);f+=7}}f=d/7}else{S=false;throw Error(i+"crypto unavailable")}if(!S){for(;f<d;){l=t();if(l<9e15)h[f++]=l%1e14}}d=h[--f];e%=c;if(d&&e){l=u[c-e];h[f]=o(d/l)*l}for(;0===h[f];h.pop(),f--);if(f<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(f=1,l=h[0];l>=10;l/=10,f++);if(f<c)n-=c-f}m.e=n;m.c=h;return m}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,o=[0],i,n=0,d=e.length;for(;n<d;){for(i=o.length;i--;o[i]*=t);o[0]+=s.indexOf(e.charAt(n++));for(a=0;a<o.length;a++)if(o[a]>r-1){if(null==o[a+1])o[a+1]=0;o[a+1]+=o[a]/r|0;o[a]%=r}}return o.reverse()}return function(r,s,a,o,i){var n,d,c,l,u,f,p,h,m=r.indexOf("."),v=_,w=y;if(m>=0){l=T;T=0;r=r.replace(".","");h=new BigNumber(s);f=h.pow(r.length-m);T=l;h.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,a,e);h.e=h.c.length}p=toBaseOut(r,s,a,i?(n=A,e):(n=e,A));c=l=p.length;for(;0==p[--l];p.pop());if(!p[0])return n.charAt(0);if(m<0)--c;else{f.c=p;f.e=c;f.s=o;f=t(f,h,v,w,a);p=f.c;u=f.r;c=f.e}d=c+v+1;m=p[d];l=a/2;u=u||d<0||null!=p[d+1];u=w<4?(null!=m||u)&&(0==w||w==(f.s<0?3:2)):m>l||m==l&&(4==w||u||6==w&&1&p[d-1]||w==(f.s<0?8:7));if(d<1||!p[0])r=u?toFixedPoint(n.charAt(1),-v,n.charAt(0)):n.charAt(0);else{p.length=d;if(u){for(--a;++p[--d]>a;){p[d]=0;if(!d){++c;p=[1].concat(p)}}}for(l=p.length;!p[--l];);for(m=0,r="";m<=l;r+=n.charAt(p[m++]));r=toFixedPoint(r,c,n.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,o,i,n=0,d=e.length,c=t%f,l=t/f|0;for(e=e.slice();d--;){o=e[d]%f;i=e[d]/f|0;s=l*o+i*c;a=c*o+s%f*f+n;n=(a/r|0)+(s/f|0)+l*i;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,o;if(r!=s)o=r>s?1:-1;else{for(a=o=0;a<r;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}}return o}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var i,n,l,u,f,p,h,m,v,_,y,w,g,b,P,S,C,T=e.s==t.s?1:-1,k=e.c,A=t.c;if(!k||!k[0]||!A||!A[0]){return new BigNumber(e.s&&t.s&&(k?!A||k[0]!=A[0]:A)?k&&0==k[0]||!A?0*T:T/0:NaN)}m=new BigNumber(T);v=m.c=[];n=e.e-t.e;T=r+n+1;if(!a){a=d;n=bitFloor(e.e/c)-bitFloor(t.e/c);T=T/c|0}for(l=0;A[l]==(k[l]||0);l++);if(A[l]>(k[l]||0))n--;if(T<0){v.push(1);u=true}else{b=k.length;S=A.length;l=0;T+=2;f=o(a/(A[0]+1));if(f>1){A=multiply(A,f,a);k=multiply(k,f,a);S=A.length;b=k.length}g=S;_=k.slice(0,S);y=_.length;for(;y<S;_[y++]=0);C=A.slice();C=[0].concat(C);P=A[0];if(A[1]>=a/2)P++;do{f=0;i=compare(A,_,S,y);if(i<0){w=_[0];if(S!=y)w=w*a+(_[1]||0);f=o(w/P);if(f>1){if(f>=a)f=a-1;p=multiply(A,f,a);h=p.length;y=_.length;while(1==compare(p,_,h,y)){f--;subtract(p,S<h?C:A,h,a);h=p.length;i=1}}else{if(0==f)i=f=1;p=A.slice();h=p.length}if(h<y)p=[0].concat(p);subtract(_,p,y,a);y=_.length;if(-1==i){while(compare(A,_,S,y)<1){f++;subtract(_,S<y?C:A,y,a);y=_.length}}}else if(0===i){f++;_=[0]}v[l++]=f;if(_[0])_[y++]=k[g]||0;else{_=[k[g]];y=1}}while((g++<b||null!=_[0])&&T--)u=null!=_[0];if(!v[0])v.splice(0,1)}if(a==d){for(l=1,T=v[0];T>=10;T/=10,l++);round(m,r+(m.e=l+n*c-1)+1,s,u)}else{m.e=n;m.r=+u}return m}}();function format(e,t,r,s){var a,o,i,n,d;if(null==r)r=y;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];i=e.e;if(null==t){d=coeffToString(e.c);d=1==s||2==s&&(i<=w||i>=g)?toExponential(d,i):toFixedPoint(d,i,"0")}else{e=round(new BigNumber(e),t,r);o=e.e;d=coeffToString(e.c);n=d.length;if(1==s||2==s&&(t<=o||o<=w)){for(;n<t;d+="0",n++);d=toExponential(d,o)}else{t-=i;d=toFixedPoint(d,o,"0");if(o+1>n){if(--t>0)for(d+=".";t--;d+="0");}else{t+=o-n;if(t>0){if(o+1==n)d+=".";for(;t--;d+="0");}}}}return e.s<0&&a?"-"+d:d}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*c-1)>P)e.c=e.e=null;else if(r<b)e.c=[e.e=0];else{e.e=r;e.c=t}return e}h=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,n,d,c){var l,u=d?n:n.replace(a,"");if(s.test(u))o.s=isNaN(u)?null:u<0?-1:1;else{if(!d){u=u.replace(e,function(e,t,r){l="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return c&&c!=l?e:t});if(c){l=c;u=u.replace(t,"$1").replace(r,"0.$1")}if(n!=u)return new BigNumber(u,l)}if(BigNumber.DEBUG){throw Error(i+"Not a"+(c?" base "+c:"")+" number: "+n)}o.s=null}o.c=o.e=null}}();function round(e,t,r,s){var i,n,l,f,p,h,m,v=e.c,_=u;if(v){e:{for(i=1,f=v[0];f>=10;f/=10,i++);n=t-i;if(n<0){n+=c;l=t;p=v[h=0];m=p/_[i-l-1]%10|0}else{h=a((n+1)/c);if(h>=v.length)if(s){for(;v.length<=h;v.push(0));p=m=0;i=1;n%=c;l=n-c+1}else{break e}else{p=f=v[h];for(i=1;f>=10;f/=10,i++);n%=c;l=n-c+i;m=l<0?0:p/_[i-l-1]%10|0}}s=s||t<0||null!=v[h+1]||(l<0?p:p%_[i-l-1]);s=r<4?(m||s)&&(0==r||r==(e.s<0?3:2)):m>5||5==m&&(4==r||s||6==r&&(n>0?l>0?p/_[i-l]:0:v[h-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(s){t-=e.e+1;v[0]=_[(c-t%c)%c];e.e=-t||0}else{v[0]=e.e=0}return e}if(0==n){v.length=h;f=1;h--}else{v.length=h+1;f=_[c-n];v[h]=l>0?o(p/_[i-l]%_[l])*f:0}if(s){for(;;){if(0==h){for(n=1,l=v[0];l>=10;l/=10,n++);l=v[0]+=f;for(f=1;l>=10;l/=10,f++);if(n!=f){e.e++;if(v[0]==d)v[0]=1}break}v[h]+=f;if(v[h]!=d)break;v[h--]=0;f=1}}for(n=v.length;0===v[--n];v.pop());}if(e.e>P)e.c=e.e=null;else if(e.e<b)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=w||r>=g?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}m.absoluteValue=m.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};m.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};m.decimalPlaces=m.dp=function(e,t){var r,s,a,o=this;if(null!=e){intCheck(e,0,p);if(null==t)t=y;else intCheck(t,0,8);return round(new BigNumber(o),e+o.e+1,t)}if(!(r=o.c))return null;s=((a=r.length-1)-bitFloor(this.e/c))*c;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};m.dividedBy=m.div=function(e,r){return t(this,new BigNumber(e,r),_,y)};m.dividedToIntegerBy=m.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};m.exponentiatedBy=m.pow=function(e,t){var r,s,n,d,l,u,f,p,h,m=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(i+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);u=e.e>14;if(!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0]){h=new BigNumber(Math.pow(+valueOf(m),u?e.s*(2-isOdd(e)):+valueOf(e)));return t?h.mod(t):h}f=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!f&&m.isInteger()&&t.isInteger();if(s)m=m.mod(t)}else if(e.e>9&&(m.e>0||m.e<-1||(0==m.e?m.c[0]>1||u&&m.c[1]>=24e7:m.c[0]<8e13||u&&m.c[0]<=9999975e7))){d=(m.s<0&&isOdd(e),-0);if(m.e>-1)d=1/d;return new BigNumber(f?1/d:d)}else if(T)d=a(T/c+2);if(u){r=new BigNumber(.5);if(f)e.s=1;p=isOdd(e)}else{n=Math.abs(+valueOf(e));p=n%2}h=new BigNumber(v);for(;;){if(p){h=h.times(m);if(!h.c)break;if(d){if(h.c.length>d)h.c.length=d}else if(s)h=h.mod(t)}if(n){n=o(n/2);if(0===n)break;p=n%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)p=isOdd(e);else{n=+valueOf(e);if(0===n)break;p=n%2}}m=m.times(m);if(d){if(m.c&&m.c.length>d)m.c.length=d}else if(s)m=m.mod(t)}if(s)return h;if(f)h=v.div(h);return t?h.mod(t):d?round(h,T,y,l):h};m.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=y;else intCheck(e,0,8);return round(t,t.e+1,e)};m.isEqualTo=m.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};m.isFinite=function(){return!!this.c};m.isGreaterThan=m.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};m.isGreaterThanOrEqualTo=m.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};m.isInteger=function(){return!!this.c&&bitFloor(this.e/c)>this.c.length-2};m.isLessThan=m.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};m.isLessThanOrEqualTo=m.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};m.isNaN=function(){return!this.s};m.isNegative=function(){return this.s<0};m.isPositive=function(){return this.s>0};m.isZero=function(){return!!this.c&&0==this.c[0]};m.minus=function(e,t){var r,s,a,o,i=this,n=i.s;e=new BigNumber(e,t);t=e.s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return i.plus(e)}var l=i.e/c,u=e.e/c,f=i.c,p=e.c;if(!l||!u){if(!f||!p)return f?(e.s=-t,e):new BigNumber(p?i:NaN);if(!f[0]||!p[0]){return p[0]?(e.s=-t,e):new BigNumber(f[0]?i:-0)}}l=bitFloor(l);u=bitFloor(u);f=f.slice();if(n=l-u){if(o=n<0){n=-n;a=f}else{u=l;a=p}a.reverse();for(t=n;t--;a.push(0));a.reverse()}else{s=(o=(n=f.length)<(t=p.length))?n:t;for(n=t=0;t<s;t++)if(f[t]!=p[t]){o=f[t]<p[t];break}}if(o)a=f,f=p,p=a,e.s=-e.s;t=(s=p.length)-(r=f.length);if(t>0)for(;t--;f[r++]=0);t=d-1;for(;s>n;){if(f[--s]<p[s]){for(r=s;r&&!f[--r];f[r]=t);--f[r];f[s]+=d}f[s]-=p[s]}for(;0==f[0];f.splice(0,1),--u);if(!f[0]){e.s=3==y?-1:1;e.c=[e.e=0];return e}return normalise(e,f,u)};m.modulo=m.mod=function(e,r){var s,a,o=this;e=new BigNumber(e,r);if(o.c&&e.s&&(!e.c||e.c[0])){if(!e.c||o.c&&!o.c[0]){return new BigNumber(o)}}else{return new BigNumber(NaN)}if(9==C){a=e.s;e.s=1;s=t(o,e,0,3);e.s=a;s.s*=a}else{s=t(o,e,0,C)}e=o.minus(s.times(e));if(!e.c[0]&&1==C)e.s=o.s;return e};m.multipliedBy=m.times=function(e,t){var r,s,a,o,i,n,l,u,p,h,m,v,_,y,w,g=this,b=g.c,P=(e=new BigNumber(e,t)).c;if(!b||!P||!b[0]||!P[0]){if(g.s&&e.s&&(!b||b[0]||P)&&(!P||P[0]||b)){e.s*=g.s;if(b&&P){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(g.e/c)+bitFloor(e.e/c);e.s*=g.s;l=b.length;h=P.length;if(l<h)_=b,b=P,P=_,a=l,l=h,h=a;for(a=l+h,_=[];a--;_.push(0));y=d;w=f;for(a=h;--a>=0;){r=0;m=P[a]%w;v=P[a]/w|0;for(i=l,o=a+i;o>a;){u=b[--i]%w;p=b[i]/w|0;n=v*u+p*m;u=m*u+n%w*w+_[o]+r;r=(u/y|0)+(n/w|0)+v*p;_[o--]=u%y}_[o]=r}if(r)++s;else _.splice(0,1);return normalise(e,_,s)};m.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};m.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var o=s.e/c,i=e.e/c,n=s.c,l=e.c;if(!o||!i){if(!n||!l)return new BigNumber(a/0);if(!n[0]||!l[0])return l[0]?e:new BigNumber(n[0]?s:0*a)}o=bitFloor(o);i=bitFloor(i);n=n.slice();if(a=o-i){if(a>0){i=o;r=l}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=l.length;if(a-t<0)r=l,l=n,n=r,t=a;for(a=0;t;){a=(n[--t]=n[t]+l[t]+a)/d|0;n[t]=d===n[t]?0:n[t]%d}if(a){n=[a].concat(n);++i}return normalise(e,n,i)};m.precision=m.sd=function(e,t){var r,s,a,o=this;if(null!=e&&!!e!==e){intCheck(e,1,p);if(null==t)t=y;else intCheck(t,0,8);return round(new BigNumber(o),e,t)}if(!(r=o.c))return null;a=r.length-1;s=a*c+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&o.e+1>s)s=o.e+1;return s};m.shiftedBy=function(e){intCheck(e,-l,l);return this.times("1e"+e)};m.squareRoot=m.sqrt=function(){var e,r,s,a,o,i=this,n=i.c,d=i.s,c=i.e,l=_+4,u=new BigNumber("0.5");if(1!==d||!n||!n[0]){return new BigNumber(!d||d<0&&(!n||n[0])?NaN:n?i:1/0)}d=Math.sqrt(+valueOf(i));if(0==d||d==1/0){r=coeffToString(n);if((r.length+c)%2==0)r+="0";d=Math.sqrt(+r);c=bitFloor((c+1)/2)-(c<0||c%2);if(d==1/0)r="5e"+c;else{r=d.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}s=new BigNumber(r)}else{s=new BigNumber(d+"")}if(s.c[0]){c=s.e;d=c+l;if(d<3)d=0;for(;;){o=s;s=u.times(o.plus(t(i,o,l,1)));if(coeffToString(o.c).slice(0,d)===(r=coeffToString(s.c)).slice(0,d)){if(s.e<c)--d;r=r.slice(d-3,d+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+_+2,1);e=!s.times(s).eq(i)}break}if(!a){round(o,o.e+_+2,0);if(o.times(o).eq(i)){s=o;break}}l+=4;d+=4;a=1}}}return round(s,s.e+_+1,y,e)};m.toExponential=function(e,t){if(null!=e){intCheck(e,0,p);e++}return format(this,e,t,1)};m.toFixed=function(e,t){if(null!=e){intCheck(e,0,p);e=e+this.e+1}return format(this,e,t)};m.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=k}else if("object"!=typeof r){throw Error(i+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var o,n=s.split("."),d=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",u=n[0],f=n[1],p=a.s<0,h=p?u.slice(1):u,m=h.length;if(c)o=d,d=c,c=o,m-=o;if(d>0&&m>0){o=m%d||d;u=h.substr(0,o);for(;o<m;o+=d)u+=l+h.substr(o,d);if(c>0)u+=l+h.slice(o);if(p)u="-"+u}s=f?u+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):u}return(r.prefix||"")+s+(r.suffix||"")};m.toFraction=function(e){var r,s,a,o,n,d,l,f,p,h,m,_,w=this,g=w.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(v)){throw Error(i+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!g)return new BigNumber(w);r=new BigNumber(v);p=s=new BigNumber(v);a=f=new BigNumber(v);_=coeffToString(g);n=r.e=_.length-w.e-1;r.c[0]=u[(d=n%c)<0?c+d:d];e=!e||l.comparedTo(r)>0?n>0?r:p:l;d=P;P=1/0;l=new BigNumber(_);f.c[0]=0;for(;;){h=t(l,r,0,1);o=s.plus(h.times(a));if(1==o.comparedTo(e))break;s=a;a=o;p=f.plus(h.times(o=p));f=o;r=l.minus(h.times(o=r));l=o}o=t(e.minus(s),a,0,1);f=f.plus(o.times(p));s=s.plus(o.times(a));f.s=p.s=w.s;n*=2;m=t(p,a,n,y).minus(w).abs().comparedTo(t(f,s,n,y).minus(w).abs())<1?[p,a]:[f,s];P=d;return m};m.toNumber=function(){return+valueOf(this)};m.toPrecision=function(e,t){if(null!=e)intCheck(e,1,p);return format(this,e,t,2)};m.toString=function(e){var t,s=this,a=s.s,o=s.e;if(null===o)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=o<=w||o>=g?toExponential(coeffToString(s.c),o):toFixedPoint(coeffToString(s.c),o,"0");else if(10===e&&E){s=round(new BigNumber(s),_+o+1,y);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,A.length,"Base");t=r(toFixedPoint(coeffToString(s.c),o,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};m.valueOf=m.toJSON=function(){return valueOf(this)};m._isBigNumber=true;m[Symbol.toStringTag]="BigNumber";m[Symbol.for("nodejs.util.inspect.custom")]=m.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,o=e[0]+"";for(;s<a;){t=e[s++]+"";r=c-t.length;for(;r--;t="0"+t);o+=t}for(a=o.length;48===o.charCodeAt(--a););return o.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,o=t.c,i=e.s,n=t.s,d=e.e,c=t.e;if(!i||!n)return null;r=a&&!a[0];s=o&&!o[0];if(r||s)return r?s?0:-n:i;if(i!=n)return i;r=i<0;s=d==c;if(!a||!o)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=o.length)?d:c;for(i=0;i<n;i++)if(a[i]!=o[i])return a[i]>o[i]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==o(e)){throw Error(i+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/c)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var h=clone();const m=null;var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var y=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var g=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/sortAddresses.js");var b=r("../../node_modules/lodash/isEqual.js");var P=r("../../node_modules/lodash/uniq.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var S,C,T,k;const getBalanceInTxOuts=e=>{let t=0n;for(const r of e)t+=r.value.coins;return t};const getSpentInInputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t[0].address)).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n);const getBalanceFromOutputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t.address)).map(e=>e.value.coins).reduce((e,t)=>e+t,0n);const getSpentFromRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=v.Address.fromString(t[0].address))||void 0===r?void 0:r.asBase();if(!s)return false;return _.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n)};const getDepositToRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=v.Address.fromString(t.address))||void 0===r?void 0:r.asBase();if(!s)return false;return _.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e.value.coins).reduce((e,t)=>e+t,0n)};const getAddressForRewardAccount=(e,t)=>e.find(e=>e.rewardAccount===t);const createBuckets=(e,t,r,s)=>{const a=new Array;const o=[...e.inputs];const i=[...e.outputs];const n=t.map(e=>e.stake).reduce((e,t)=>e+t,0n);const d=getBalanceInTxOuts(e.change);const c=getSpentInInputs(s,o)+e.fee;const l=getBalanceFromOutputs(s,i)+d;const u=n+l-c;const f=r.pools.map(e=>e.weight).reduce((e,t)=>e+t,0);const p=new Map(r.pools.map(e=>[e.id,e.weight/f]));for(const m of t){if(0===m.rewardAccounts.length)throw new y.InvalidStateError(`No reward accounts delegating to pool '${m.pool.id}'.`);const v=m.rewardAccounts[0];const _=getAddressForRewardAccount(s,v);if(!_)throw new y.InvalidStateError(`Reward account '${v}' unknown.`);const w=m.stake-getSpentFromRewardAccount(v,o)+getDepositToRewardAccount(v,i);const g=p.get(m.pool.hexId);if(void 0===g)throw new y.InvalidStateError(`Pool '${m.pool.id}' not found in the portfolio.`);a.push({address:_.address,capacity:BigInt(new h(u.toString()).multipliedBy(g).toFixed(0,0)),change:new Array,filledAmount:w})}return a};const getBucketGap=e=>{if(0n===e.capacity)return new h("0");const t=new h(e.capacity.toString());const r=new h(e.filledAmount.toString());return t.minus(r).dividedBy(t)};const pickBucket=e=>e.sort((e,t)=>{const r=getBucketGap(e);const s=getBucketGap(t);if(s.isGreaterThan(r)){return 1}if(s.isLessThan(r)){return -1}return 0})[0];const distributeChange=(e,t)=>{const r=[...t];const s=e.sort((e,t)=>{if(e.value.coins>t.value.coins){return 1}if(e.value.coins<t.value.coins){return -1}return 0});while(s.length>0){const a=pickBucket(r);const o=s.splice(0,1)[0];a.change.push(o);a.filledAmount+=o.value.coins}for(const i of r)i.change=i.change.map(e=>{e.address=i.address;return e});return r};const delegationMatchesPortfolio=(e,t)=>{const r=P(e.pools.map(e=>e.id)).sort();const s=P(t.map(e=>e.pool.hexId)).sort();return b(r,s)};class DynamicChangeAddressResolver{async resolve(e){const t=[...(await (0,w.firstValueFrom)(__classPrivateFieldGet(this,C,"f"))).values()];let r=await __classPrivateFieldGet(this,S,"f").call(this);const s=(0,g.sortAddresses)(await (0,w.firstValueFrom)(__classPrivateFieldGet(this,T,"f")));let a=[...e.change];if(0===s.length)throw new y.InvalidStateError("The wallet has no known addresses.");if(0===t.length){a=a.map(e=>{e.address=s[0].address;return e});return a}if(1===t.length){if(0===t[0].rewardAccounts.length)throw new y.InvalidStateError(`No reward accounts delegating to pool '${t[0].pool.id}'.`);const o=s.find(e=>e.rewardAccount===t[0].rewardAccounts[0]);if(!o)throw new y.InvalidStateError(`Reward account '${t[0].rewardAccounts[0]}' unknown.`);a=a.map(e=>{e.address=o.address;return e});return a}if(!r||!delegationMatchesPortfolio(r,t)){__classPrivateFieldGet(this,k,"f").warn("The portfolio doesnt match current wallet delegation.");__classPrivateFieldGet(this,k,"f").warn(`Portfolio: ${r}`);const i=t.map(e=>({id:e.pool.hexId,weight:1/t.length}));r={name:"Default Portfolio",pools:i}}const n=createBuckets(e,t,r,s);const d=distributeChange(e.change,n);a=new Array;for(const c of d)a=[...a,...c.change];return a}constructor(e,t,r,s){S.set(this,void 0);C.set(this,void 0);T.set(this,void 0);k.set(this,void 0);__classPrivateFieldSet(this,S,r,"f");__classPrivateFieldSet(this,C,t,"f");__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,k,s,"f")}}S=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/DRepRegistrationTracker.js":(e,t,r)=>{"use strict";r.d(t,{createDRepRegistrationTracker:()=>createDRepRegistrationTracker});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var c=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");const hasOwnDRepCredential=({certificate:e,dRepKeyHash:t})=>"dRepCredential"in e&&e.dRepCredential.type===a.CredentialType.KeyHash&&e.dRepCredential.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(t);const createDRepRegistrationTracker=({historyTransactions$:e,pubDRepKeyHash$:t})=>new c.TrackerSubject(t.pipe((0,i.switchMap)(t=>e.pipe((0,n.map)(e=>{if(!t)return false;const r=[...e].reverse();for(const{body:{certificates:s}}of r)if(s){for(const a of s)if(!!hasOwnDRepCredential({certificate:a,dRepKeyHash:t})){if(a.__typename===o.CertificateType.UnregisterDelegateRepresentative)return false;if(a.__typename===o.CertificateType.RegisterDelegateRepresentative)return true}}return false}))),(0,d.distinctUntilChanged)()))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/DelegationTracker/DelegationTracker.js":(e,t,r)=>{"use strict";r.d(t,{createDelegationTracker:()=>createDelegationTracker});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var P=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var S=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var C=r("../../node_modules/rxjs/dist/esm5/internal/operators/last.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeScan.js");var k=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var A=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilKeyChanged.js");var E=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const j=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return s=>{const a=s.pipe((0,b.share)());return(0,i.combineLatest)([a,e.pipe((0,g.startWith)(j),(0,P.takeUntil)(a.pipe((0,n.defaultIfEmpty)(null),(0,S.delay)(1),(0,C.last)())))]).pipe((0,T.mergeScan)(({buffer:e},t)=>{if(t[1]===j){return(0,c.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const s=r===t[0]?e:[...e,t[0]];return(0,k.from)(s.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,c.of)({buffer:[],output:t})},r,1),(0,o.map)(({output:e})=>e),(0,u.filter)(E.isNotNil),(0,A.distinctUntilKeyChanged)(0),(0,o.map)(([e,r])=>t(e,r)))}}var I=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");var x=r("../../node_modules/lodash/isEqual.js");const affectsRewardAccount=e=>{return t=>{var r,a;const o=v.RewardAccount.toHash(e);const i=s.stakeKeyCertificates(t.body.certificates).some(e=>e.stakeCredential.hash===o);const n=i||(null===(r=t.body.certificates)||void 0===r?void 0:r.some(t=>{var r;return(t.__typename===s.CertificateType.MIR||t.__typename===s.CertificateType.StakeDelegation||t.__typename===s.CertificateType.StakeVoteDelegation||t.__typename===s.CertificateType.VoteDelegation)&&(null===(r=t.stakeCredential)||void 0===r?void 0:r.hash)===o||t.__typename===s.CertificateType.PoolRegistration&&t.poolParameters.rewardAccount===e||t.__typename===s.CertificateType.PoolRetirement||(t.__typename===s.CertificateType.RegisterDelegateRepresentative||t.__typename===s.CertificateType.UnregisterDelegateRepresentative)&&t.dRepCredential.hash===o||t.__typename===s.CertificateType.StakeVoteDelegation&&t.stakeCredential.hash===o}));return n||(null===(a=t.body.withdrawals)||void 0===a?void 0:a.some(t=>t.stakeAddress===e))||false}};const createRewardAccountInfoProvider=({epoch$:e,externalTrigger$:t,rewardAccountInfoProvider:r,retryBackoffConfig:s,logger:a})=>o=>(0,I.pollProvider)({equals:x,logger:a,retryBackoffConfig:s,sample:async()=>r.rewardAccountInfo(o,await (0,_.firstValueFrom)(e)),trigger$:(0,y.merge)(e,t)});const nextRewardBalance=(e,t)=>{const r=t.some(t=>{var r;return null===(r=t.body.withdrawals)||void 0===r?void 0:r.some(t=>t.stakeAddress===e)});return r?0n:null};const nextDeposit=(e,t,r)=>{const a=v.RewardAccount.toHash(e);for(let o=t.length-1;o>=0;o--){const i=t[o].body.certificates||[];for(let n=i.length-1;n>=0;n--){const d=i[n];if(d.__typename===s.CertificateType.StakeDeregistration&&d.stakeCredential.hash===a){return 0n}if((d.__typename===s.CertificateType.StakeRegistration||d.__typename===s.CertificateType.StakeRegistrationDelegation||d.__typename===s.CertificateType.StakeVoteRegistrationDelegation)&&d.stakeCredential.hash===a){return r}}}return null};const createRewardAccountsTracker=({rewardAccountAddresses$:e,rewardAccountInfoProvider:t,store:r,newTransaction$:s,protocolParameters$:n,transactionsInFlight$:l})=>e.pipe((0,d.switchMap)(e=>(0,i.combineLatest)(e.map(e=>(0,p.concat)(r.getValues([e]).pipe((0,h.mergeMap)(e=>e.length>0?(0,c.of)(e[0]):w.EMPTY)),s.pipe((0,u.filter)(affectsRewardAccount(e)),(0,g.startWith)(null)).pipe((0,d.switchMap)(()=>t(e).pipe((0,f.tap)(t=>r.setValue(e,t).subscribe()),blockingWithLatestFrom(n),(0,d.switchMap)(([t,{stakeKeyDeposit:r}])=>l.pipe((0,o.map)(s=>{if(0===s.length)return t;const o=nextDeposit(e,s,BigInt(r));var i;return{...t,credentialStatus:"bigint"==typeof o?o>0n?a.StakeCredentialStatus.Registering:a.StakeCredentialStatus.Unregistering:t.credentialStatus,deposit:null!=o?o:t.deposit,rewardBalance:null!==(i=nextRewardBalance(e,s))&&void 0!==i?i:t.rewardBalance}}))))))).pipe((0,m.distinctUntilChanged)(x))))));var R=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var M=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var O=r("../../node_modules/lodash/flatten.js");var B=r("../../node_modules/lodash/sortBy.js");const sumRewards=e=>R.BigIntMath.sum(e.map(({rewards:e})=>e));const avgReward=e=>sumRewards(e)/BigInt(e.length);const createRewardsHistoryProvider=(e,t)=>(r,s,a,o)=>{if(s){return(0,I.pollProvider)({logger:o,retryBackoffConfig:t,sample:()=>e.rewardsHistory({epochs:{lowerBound:s},rewardAccounts:r}),trigger$:a})}e.setStatInitialized(e.stats.rewardsHistory$);return(0,c.of)(new Map)};const createRewardsHistoryTracker=(e,t,r,s,a)=>e.pipe((0,f.tap)(e=>a.debug(`Fetching rewards for ${e.length} accounts`)),(0,d.switchMap)(e=>(0,p.concat)(s.getValues(e).pipe((0,o.map)(t=>new Map(e.map((e,r)=>[e,t[r]])))),r(e,M.EpochNo(1),t,a).pipe((0,f.tap)(e=>s.setAll([...e.entries()].map(([e,t])=>({key:e,value:t})))))))).pipe((0,o.map)(e=>{const t=B(O([...e.values()]),"epoch");if(0===t.length){a.debug("No rewards found");return{all:[],avgReward:null,lastReward:null,lifetimeRewards:0n}}const r={all:t,avgReward:avgReward(t),lastReward:t[t.length-1],lifetimeRewards:sumRewards(t)};a.debug(`Rewards between epochs ${r.all[0].epoch} and ${r.all[r.all.length-1].epoch}`,`average:${r.avgReward}`,`lastRewards:${r.lastReward}`,`lifetimeRewards:${r.lifetimeRewards}`);return r}));var D=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var N=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var F=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var H=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");var G=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var V=r("../../node_modules/rxjs/dist/esm5/internal/observable/iif.js");var K=r("../../node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js");var L=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/BalanceTracker.js");var W=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var z=r("../../node_modules/lodash/groupBy.js");var U=r("../../node_modules/lodash/map.js");const createDelegationDistributionTracker=({rewardAccounts$:e,knownAddresses$:t,utxoTracker:r})=>{const s=(0,L.createUtxoBalanceByAddressTracker)(r);const n=e.pipe((0,o.map)(e=>{return e.filter(e=>{var t;return e.credentialStatus===a.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)})}));const l=n.pipe((0,G.withLatestFrom)(t),(0,o.map)(([e,t])=>e.map(e=>{const s=t.filter(t=>t.rewardAccount===e.address);return{balance:(0,L.createUtxoBalanceByAddressTracker)(r,s.map(({address:e})=>e)),delegatedAccount:e,groupedAddresses:s}})));return l.pipe((0,d.switchMap)(e=>(0,V.iif)(()=>0===e.length,(0,c.of)([]),(0,i.combineLatest)(e.map(e=>e.balance.utxo.total$.pipe((0,o.map)(t=>({percentage:(0,H.Percent)(0),pool:e.delegatedAccount.delegatee.nextNextEpoch,rewardAccounts:[e.delegatedAccount.address],stake:t.coins+e.delegatedAccount.rewardBalance}))))))),(0,o.map)(e=>U(z(e,({pool:{id:e}})=>e),e=>e.reduce((e,t)=>({...t,rewardAccounts:[...new Set([...e.rewardAccounts,...t.rewardAccounts])],stake:t.stake+e.stake||0n})))),(0,K.combineLatestWith)(s.utxo.total$,e.pipe((0,o.map)(e=>R.BigIntMath.sum(e.map(({rewardBalance:e})=>e))))),(0,o.map)(([e,t,r])=>{const s=t.coins+r;const a=(0,H.calcPercentages)(e.map(({stake:e})=>Number(e)),Number(s));return e.map((e,t)=>({...e,percentage:a[t]}))}),(0,m.distinctUntilChanged)((e,t)=>(0,D.sameArrayItems)(e,t,W.delegatedStakeEquals)),(0,o.map)(e=>new Map(e.map(e=>[e.pool.id,e]))))};const createDelegationPortfolioProvider=({rewardAccountInfoProvider:e,retryBackoffConfig:t,logger:r})=>s=>(0,I.pollProvider)({logger:r,retryBackoffConfig:t,sample:()=>e.delegationPortfolio(s)});const hasDelegationCert=e=>!!e&&e.some(e=>s.isCertType(e,[...s.RegAndDeregCertificateTypes,...s.StakeDelegationCertificateTypes]));const findDelegationPortfolioMetadata=()=>{return e=>{return e.pipe((0,o.map)(e=>{const t=[...e].reverse();let r;for(const s of t){var o,i;const n=null===(o=s.auxiliaryData)||void 0===o?void 0:null===(i=o.blob)||void 0===i?void 0:i.get(a.DelegationMetadataLabel);const d=hasDelegationCert(s.body.certificates);if(!!n||!!d){if(d&&!n){r=null;break}if(n){r=a.cip17FromMetadatum(n);break}}}return r}))}};const delegationTransactionFound=e=>void 0!==e;const createDelegationPortfolioTracker=(e,t,r,s,a)=>{const storageSet=e=>e?a.set(e).subscribe():a.delete().subscribe();return(0,i.combineLatest)([a.get().pipe((0,n.defaultIfEmpty)(null)),e]).pipe((0,d.switchMap)(([e,a])=>{if(a.length<=1){if(e)storageSet(null);return(0,c.of)(null)}const i=t.pipe(findDelegationPortfolioMetadata(),(0,l.take)(1));const n=r.pipe((0,o.map)(e=>[e]),findDelegationPortfolioMetadata(),(0,u.filter)(delegationTransactionFound),(0,f.tap)(storageSet));if(e){return(0,p.concat)((0,c.of)(e),i.pipe((0,u.filter)(delegationTransactionFound)),n)}return(0,p.concat)(i.pipe((0,h.mergeMap)(e=>{if(delegationTransactionFound(e)){return(0,c.of)(e)}return t.pipe((0,l.take)(1),(0,h.mergeMap)(e=>{if(0===e.length){return(0,c.of)(null)}return s(a[0]).pipe((0,l.take)(1))}))}),(0,f.tap)(storageSet)),n)}),(0,m.distinctUntilChanged)(D.deepEquals))};const createDelegationTracker=({rewardAccountAddresses$:e,epoch$:t,rewardsTracker:r,retryBackoffConfig:s,transactionsTracker:a,rewardAccountInfoProvider:o,knownAddresses$:i,refetchRewardAccountInfo$:n,protocolParameters$:d,utxoTracker:c,stores:l,logger:u,internals:{rewardsHistoryProvider:f=createRewardsHistoryProvider(r,s),observableRewardAccountInfoProvider:p=createRewardAccountInfoProvider({epoch$:t,externalTrigger$:n,logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:o}),delegationPortfolioProvider:h=createDelegationPortfolioProvider({logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:o})}={}})=>{const m=new F.TrackerSubject(createRewardsHistoryTracker(e,t,f,l.rewardsHistory,(0,N.contextLogger)(u,"rewardsHistory$")));const v=new F.TrackerSubject(createDelegationPortfolioTracker(e,a.history$,a.new$,h,l.delegationPortfolio));const _=new F.TrackerSubject(createRewardAccountsTracker({newTransaction$:a.new$,protocolParameters$:d,rewardAccountAddresses$:e,rewardAccountInfoProvider:p,store:l.rewardAccountInfo,transactionsInFlight$:a.outgoing.inFlight$}));const y=new F.TrackerSubject(createDelegationDistributionTracker({knownAddresses$:i,rewardAccounts$:_,utxoTracker:c}));return{distribution$:y,portfolio$:v,rewardAccounts$:_,rewardsHistory$:m,shutdown:()=>{_.complete();m.complete();v.complete();u.debug("Shutdown")}}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/DrepInfoTracker.js":(e,t,r)=>{"use strict";r.d(t,{onlyDistinctBlockRefetch:()=>onlyDistinctBlockRefetch});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/trigger.js");const createDrepInfoColdObservable=({drepProvider:e,retryBackoffConfig:t,refetchTrigger$:r,logger:s})=>a=>poll({logger:s,retryBackoffConfig:t,sample:()=>e.getDRepsInfo({ids:a}),trigger$:merge(of(true),r)});const drepsToDelegatees=e=>t=>e.map(e=>{if(!e){return}if(Cardano.isDRepCredential(e)){const r=t.find(t=>Cardano.DRepID.toCip129DRepID(t.id)===Cardano.DRepID.cip129FromCredential(e));if(!r){return}return{delegateRepresentative:r}}return{delegateRepresentative:e}});const drepsToDrepIds=e=>[...new Set(e.filter(isNotNil).filter(Cardano.isDRepCredential).map(e=>Cardano.DRepID.cip129FromCredential(e)))];const onlyDistinctBlockRefetch=(e,t)=>(0,o.distinctBlock)(e.pipe((0,s.withLatestFrom)(t),(0,a.map)(([,e])=>e))).pipe((0,a.map)(()=>void 0))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/EpochTracker.js":(e,t,r)=>{"use strict";r.d(t,{currentEpochTracker:()=>currentEpochTracker});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var n=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");const currentEpochTracker=(e,t)=>new n.TrackerSubject(t.pipe((0,a.switchMap)(t=>{const r=(0,s.createSlotEpochInfoCalc)(t);return e.pipe((0,o.map)(({slot:e})=>r(e)))}),(0,i.distinctUntilChanged)(d.epochInfoEquals)))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/HandlesTracker.js":(e,t,r)=>{"use strict";r.d(t,{createHandlesTracker:()=>createHandlesTracker});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var w=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var g=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const passthrough=()=>e=>e;var b=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var P=r("../../node_modules/lodash/uniqBy.js");const S=50;const C=5;const handleInfoEquals=(e,t)=>{var r,s;return e.assetId===t.assetId&&(null===(r=e.resolvedAt)||void 0===r?void 0:r.hash)===(null===(s=t.resolvedAt)||void 0===s?void 0:s.hash)&&(0,w.deepEquals)(e.tokenMetadata,t.tokenMetadata)&&(0,w.deepEquals)(e.nftMetadata,t.nftMetadata)};const isHydrated=e=>"image"in e&&"backgroundImage"in e&&"profilePic"in e;const hydrateHandleAsync=(e,t)=>{return async r=>{t.debug("hydrating handle",r.handle);try{const[s]=await e.resolveHandles({handles:[r.handle]});return{...r,backgroundImage:null==s?void 0:s.backgroundImage,image:null==s?void 0:s.image,profilePic:null==s?void 0:s.profilePic,resolvedAt:null==s?void 0:s.resolvedAt}}catch(a){t.error("Couldn't hydrate handle",a);throw a}}};const hydrateHandles=e=>t=>{const r={};return t.pipe((0,i.mergeMap)(t=>(0,n.from)(t).pipe((0,d.concatMap)(t=>t.handle in r?(0,c.of)(r[t.handle]):(0,l.defer)(()=>(0,n.from)(e(t))).pipe((0,b.retryBackoff)({initialInterval:S,maxRetries:C,resetOnSuccess:true}),(0,u.catchError)(()=>(0,c.of)(t)))),(0,f.tap)(e=>{if(isHydrated(e))r[e.handle]=e}),(0,p.toArray)(),t.length>0?(0,h.startWith)(t):passthrough())))};const createHandlesTracker=({assetInfo$:e,handlePolicyIds$:t,handleProvider:r,logger:n,utxo$:d},{hydrateHandle:l=hydrateHandleAsync}={})=>{return(0,m.combineLatest)([t,d,e]).pipe((0,i.mergeMap)(([e,t,r])=>{const i=t.flatMap(([t,r])=>{var o;return P([...(null===(o=r.value.assets)||void 0===o?void 0:o.keys())||[]].filter(t=>{const r=e.some(e=>t.startsWith(e));if(!r){return false}const o=s.AssetId.getAssetName(t);const i=a.AssetNameLabel.decode(o);return!i||i.label===a.AssetNameLabelNum.UserNFT}).map(e=>({handleAssetId:e,txOut:r})),({handleAssetId:e})=>e)});const d=i.map(({handleAssetId:e,txOut:t})=>{const s=r.get(e);if(!s){n.debug(`Asset info not (yet?) found for ${e}`);return null}return{...s,addresses:{cardano:t.address},cardanoAddress:t.address,handle:o.getAssetNameAsText(e),hasDatum:!!t.datum}}).filter(g.isNotNil);if(i.length>0&&0===d.length){return v.EMPTY}return(0,c.of)(d.filter(({handle:e,supply:t})=>{if(t>1n){n.warn(`Omitting handle with supply >1: ${e}`);return false}return true}))}),(0,_.distinctUntilChanged)((e,t)=>(0,w.sameArrayItems)(e,t,handleInfoEquals)),hydrateHandles(l(r,n)),(0,y.shareReplay)({bufferSize:1,refCount:true}))}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderStatusTracker.js":(e,t,r)=>{"use strict";r.d(t,{createProviderStatusTracker:()=>createProviderStatusTracker});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounce.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/interval.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/observable/timer.js");var g=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");const getDefaultProviderSyncRelevantStats=({networkInfoProvider:e,assetProvider:t,utxoProvider:r,chainHistoryProvider:a,rewardAccountInfoProvider:o,rewardsProvider:i})=>(0,s.combineLatest)([e.stats.ledgerTip$,e.stats.protocolParameters$,e.stats.genesisParameters$,e.stats.eraSummaries$,t.stats.getAsset$,r.stats.utxoByAddresses$,a.stats.transactionsByAddresses$,i.stats.rewardsHistory$,o.stats.rewardAccountInfo$]);const createProviderStatusTracker=(e,{consideredOutOfSyncAfter:t},{getProviderSyncRelevantStats:r=getDefaultProviderSyncRelevantStats}={})=>{const s=e.logger;const b=r(e).pipe((0,a.share)());const P=new g.TrackerSubject(b.pipe((0,o.map)(e=>e.some(({numCalls:e,numFailures:t,numResponses:r,didLastRequestFail:s})=>s||e>r+t)),(0,i.debounce)(e=>e?(0,n.of)(true):(0,d.interval)(1)),(0,c.distinctUntilChanged)(),(0,l.tap)(e=>s.debug(`${e?"Some":"No"} requests are pending`))));const S=b.pipe((0,u.debounceTime)(1),(0,f.skipWhile)(e=>e.some(({initialized:e})=>!e)),(0,p.take)(1),(0,l.tap)(()=>s.debug("All stats are initialized")),(0,h.mergeMap)(()=>m.EMPTY));const C=new g.TrackerSubject((0,v.concat)((0,n.of)(false),S,P.pipe((0,o.map)(e=>!e))).pipe((0,c.distinctUntilChanged)(),(0,l.tap)(e=>s.debug("isSettled",e))));const T=new g.TrackerSubject((0,v.concat)((0,n.of)(false),C.pipe((0,_.filter)(e=>e),(0,y.switchMap)(()=>(0,v.concat)((0,n.of)(true),(0,w.timer)(t).pipe((0,o.map)(()=>false)))),(0,c.distinctUntilChanged)())).pipe((0,l.tap)(e=>s.debug("isUpToDate",e))));return{isAnyRequestPending$:P,isSettled$:C,isUpToDate$:T,shutdown(){P.complete();C.complete();T.complete();s.debug("Shutdown")}}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js":(e,t,r)=>{"use strict";r.d(t,{CLEAN_FN_STATS:()=>s,ProviderTracker:()=>ProviderTracker});const s={numCalls:0,numFailures:0,numResponses:0};class ProviderTracker{async trackedCall(e,t){t.next({...t.value,numCalls:t.value.numCalls+1});try{const r=await e();const s=t.value.numResponses+1;t.next({...t.value,didLastRequestFail:false,initialized:true,numResponses:s});return r}catch(a){t.next({...t.value,didLastRequestFail:true,numFailures:t.value.numFailures+1});throw a}}setStatInitialized(e){e.next({...e.value,initialized:true})}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedAssetProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedAssetProvider:()=>TrackedAssetProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class AssetProviderStats{shutdown(){this.healthCheck$.complete();this.getAsset$.complete()}reset(){this.healthCheck$.next(a.CLEAN_FN_STATS);this.getAsset$.next(a.CLEAN_FN_STATS)}constructor(){this.healthCheck$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.getAsset$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedAssetProvider extends a.ProviderTracker{constructor(e){super();this.stats=new AssetProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.getAsset=({assetId:t,extraData:r})=>this.trackedCall(()=>e.getAsset({assetId:t,extraData:r}),this.stats.getAsset$);this.getAssets=({assetIds:t,extraData:r})=>this.trackedCall(()=>e.getAssets({assetIds:t,extraData:r}),this.stats.getAsset$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedChainHistoryProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedChainHistoryProvider:()=>TrackedChainHistoryProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class ChainHistoryProviderStats{shutdown(){this.healthCheck$.complete();this.blocksByHashes$.complete();this.transactionsByAddresses$.complete();this.transactionsByHashes$.complete()}reset(){this.healthCheck$.next(a.CLEAN_FN_STATS);this.blocksByHashes$.next(a.CLEAN_FN_STATS);this.transactionsByAddresses$.next(a.CLEAN_FN_STATS);this.transactionsByHashes$.next(a.CLEAN_FN_STATS)}constructor(){this.healthCheck$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.blocksByHashes$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.transactionsByAddresses$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.transactionsByHashes$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedChainHistoryProvider extends a.ProviderTracker{constructor(e){super();this.stats=new ChainHistoryProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.transactionsByAddresses=({addresses:t,pagination:r,blockRange:s})=>this.trackedCall(()=>e.transactionsByAddresses({addresses:t,blockRange:s,pagination:r}),this.stats.transactionsByAddresses$);this.transactionsByHashes=t=>this.trackedCall(()=>e.transactionsByHashes(t),this.stats.transactionsByHashes$);this.blocksByHashes=t=>this.trackedCall(()=>e.blocksByHashes(t),this.stats.blocksByHashes$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedRewardAccountInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedRewardAccountInfoProvider:()=>TrackedRewardAccountInfoProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class RewardAccountInfoProviderStats{shutdown(){this.healthCheck$.complete();this.rewardAccountInfo$.complete();this.delegationPortfolio$.complete()}reset(){this.healthCheck$.next(a.CLEAN_FN_STATS);this.rewardAccountInfo$.next(a.CLEAN_FN_STATS);this.delegationPortfolio$.next(a.CLEAN_FN_STATS)}constructor(){this.healthCheck$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.rewardAccountInfo$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.delegationPortfolio$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedRewardAccountInfoProvider extends a.ProviderTracker{constructor(e){super();this.stats=new RewardAccountInfoProviderStats;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardAccountInfo=(t,r)=>this.trackedCall(()=>e.rewardAccountInfo(t,r),this.stats.rewardAccountInfo$);this.delegationPortfolio=t=>this.trackedCall(()=>e.delegationPortfolio(t),this.stats.delegationPortfolio$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedRewardsProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedRewardsProvider:()=>TrackedRewardsProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class RewardsProviderStats{shutdown(){this.healthCheck$.complete();this.rewardsHistory$.complete();this.rewardAccountBalance$.complete()}reset(){this.healthCheck$.next(a.CLEAN_FN_STATS);this.rewardsHistory$.next(a.CLEAN_FN_STATS);this.rewardAccountBalance$.next(a.CLEAN_FN_STATS)}constructor(){this.healthCheck$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.rewardsHistory$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.rewardAccountBalance$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedRewardsProvider extends a.ProviderTracker{constructor(e){super();this.stats=new RewardsProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardsHistory=t=>this.trackedCall(()=>e.rewardsHistory(t),this.stats.rewardsHistory$);this.rewardAccountBalance=t=>this.trackedCall(()=>e.rewardAccountBalance(t),this.stats.rewardAccountBalance$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedTxSubmitProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedTxSubmitProvider:()=>TrackedTxSubmitProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");const o={...a.CLEAN_FN_STATS,initialized:true};class TxSubmitProviderStats{shutdown(){this.submitTx$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(o);this.submitTx$.next(o)}constructor(){this.healthCheck$=new s.BehaviorSubject(o);this.submitTx$=new s.BehaviorSubject(o)}}class TrackedTxSubmitProvider extends a.ProviderTracker{constructor(e){super();this.stats=new TxSubmitProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.submitTx=t=>this.trackedCall(()=>e.submitTx(t),this.stats.submitTx$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedUtxoProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedUtxoProvider:()=>TrackedUtxoProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class UtxoProviderStats{shutdown(){this.utxoByAddresses$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(a.CLEAN_FN_STATS);this.utxoByAddresses$.next(a.CLEAN_FN_STATS)}constructor(){this.healthCheck$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.utxoByAddresses$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedUtxoProvider extends a.ProviderTracker{constructor(e){super();this.stats=new UtxoProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.utxoByAddresses=t=>this.trackedCall(()=>e.utxoByAddresses(t),this.stats.utxoByAddresses$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/TrackedWalletNetworkInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{TrackedWalletNetworkInfoProvider:()=>TrackedWalletNetworkInfoProvider});var s=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/ProviderTracker/ProviderTracker.js");class WalletNetworkInfoProviderStats{shutdown(){this.eraSummaries$.complete();this.protocolParameters$.complete();this.genesisParameters$.complete();this.ledgerTip$.complete()}reset(){this.eraSummaries$.next(a.CLEAN_FN_STATS);this.protocolParameters$.next(a.CLEAN_FN_STATS);this.genesisParameters$.next(a.CLEAN_FN_STATS);this.ledgerTip$.next(a.CLEAN_FN_STATS)}constructor(){this.eraSummaries$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.protocolParameters$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.genesisParameters$=new s.BehaviorSubject(a.CLEAN_FN_STATS);this.ledgerTip$=new s.BehaviorSubject(a.CLEAN_FN_STATS)}}class TrackedWalletNetworkInfoProvider extends a.ProviderTracker{constructor(e){super();this.stats=new WalletNetworkInfoProviderStats;e=e;this.eraSummaries=()=>this.trackedCall(()=>e.eraSummaries(),this.stats.eraSummaries$);this.ledgerTip=()=>this.trackedCall(()=>e.ledgerTip(),this.stats.ledgerTip$);this.protocolParameters=()=>this.trackedCall(()=>e.protocolParameters(),this.stats.protocolParameters$);this.genesisParameters=()=>this.trackedCall(()=>e.genesisParameters(),this.stats.genesisParameters$)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/PublicStakeKeysTracker.js":(e,t,r)=>{"use strict";r.d(t,{createPublicStakeKeysTracker:()=>createPublicStakeKeysTracker});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/forkJoin.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var l=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const withStakeKeyDerivationPaths=e=>{return t=>{return t.pipe((0,s.switchMap)(t=>{return e.pipe((0,a.map)(e=>{return t.map(({credentialStatus:t,address:r})=>{var s;return{credentialStatus:t,stakeKeyDerivationPath:null===(s=e.find(e=>e.rewardAccount===r))||void 0===s?void 0:s.stakeKeyDerivationPath}}).filter(e=>!!e.stakeKeyDerivationPath)}))}))}};const createPublicStakeKeysTracker=({addresses$:e,rewardAccounts$:t,bip32Account:r})=>new l.TrackerSubject(t.pipe(withStakeKeyDerivationPaths(e),(0,o.mergeMap)(e=>(0,i.forkJoin)(e.map(({stakeKeyDerivationPath:e,credentialStatus:t})=>(0,n.from)(r.derivePublicKey(e)).pipe((0,a.map)(e=>({credentialStatus:t,publicStakeKey:e.hex()}))))).pipe((0,d.defaultIfEmpty)([]))),(0,c.distinctUntilChanged)(u.deepEquals)))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/SmartTxSubmitProvider.js":(e,t,r)=>{"use strict";r.d(t,{SmartTxSubmitProvider:()=>SmartTxSubmitProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/util/cardanoNodeErrors.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/connectionStatusTracker.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var m=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,_,y,w;class SmartTxSubmitProvider{submitTx(e){const{body:{validityInterval:t}}=s.deserializeTx(e.signedTransaction);const r=(0,d.combineLatest)([__classPrivateFieldGet(this,w,"f"),__classPrivateFieldGet(this,_,"f")]).pipe((0,c.tap)(([e,{slot:r}])=>{if(r>=((null==t?void 0:t.invalidHereafter)||Number.POSITIVE_INFINITY)){const s={currentSlot:r,validityInterval:{invalidBefore:null==t?void 0:t.invalidBefore,invalidHereafter:null==t?void 0:t.invalidHereafter}};throw new a.ProviderError(a.ProviderFailure.BadRequest,new o.TxSubmissionError(o.TxSubmissionErrorCode.OutsideOfValidityInterval,s,"Not submitting transaction due to validity interval"))}}),(0,l.filter)(([e,{slot:r}])=>{return e===n.ConnectionStatus.up&&r>=((null==t?void 0:t.invalidBefore)||0)}),(0,u.take)(1));return(0,f.firstValueFrom)(r.pipe((0,p.mergeMap)(()=>(0,h.from)(__classPrivateFieldGet(this,v,"f").submitTx(e))),(0,m.retryBackoff)({...__classPrivateFieldGet(this,y,"f"),shouldRetry:e=>i.isProviderError(e)&&[a.ProviderFailure.Unhealthy,a.ProviderFailure.ConnectionFailure].includes(e.reason)})))}healthCheck(){return __classPrivateFieldGet(this,v,"f").healthCheck()}constructor({retryBackoffConfig:e},{connectionStatus$:t,tip$:r,txSubmitProvider:s}){v.set(this,void 0);_.set(this,void 0);y.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,v,s,"f");__classPrivateFieldSet(this,_,r,"f");__classPrivateFieldSet(this,w,t,"f");__classPrivateFieldSet(this,y,e,"f")}}v=new WeakMap,_=new WeakMap,y=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/TipTracker.js":(e,t,r)=>{"use strict";r.d(t,{TipTracker:()=>TipTracker});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/persistentTrackerSubjects.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/connectionStatusTracker.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/auditTime.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/operators/exhaustMap.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/operators/finalize.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var P,S;const triggerOrInterval$=(e,t)=>e.pipe((0,i.timeout)({each:t,with:()=>(0,n.concat)((0,d.of)(true),triggerOrInterval$(e,t))}));class TipTracker extends s.PersistentDocumentTrackerSubject{sync(){__classPrivateFieldGet(this,S,"f").debug("Manual sync triggered");__classPrivateFieldGet(this,P,"f").next()}constructor({provider$:e,pollController$:t,minPollInterval:r,maxPollInterval:s,store:i,syncStatus:n,connectionStatus$:d,logger:C},{externalTrigger$:T=new c.Subject}={}){super((0,l.merge)((0,u.combineLatest)([triggerOrInterval$(n.isSettled$.pipe((0,f.filter)(e=>e)),s).pipe((0,p.auditTime)(r),(0,h.startWith)(null)),d,t]).pipe((0,m.tap)(([,e,t])=>{C.debug(e!==a.ConnectionStatus.down&&t?"Fetching tip...":"Skipping fetch tip")}),(0,v.exhaustMap)(([,t,r])=>t!==a.ConnectionStatus.down&&r?e.pipe((0,y.takeUntil)(T.pipe((0,m.tap)(()=>C.debug("Tip fetch canceled"))))):_.EMPTY),(0,w.distinctUntilChanged)(o.tipEquals),(0,m.tap)(e=>C.debug("Fetched new tip",e))),T.pipe((0,g.switchMap)(()=>e),(0,m.tap)(e=>C.debug("External trigger fetched tip",e)))).pipe((0,b.finalize)(()=>__classPrivateFieldGet(this,P,"f").complete())),i);P.set(this,new c.Subject);S.set(this,void 0);__classPrivateFieldSet(this,P,T,"f");__classPrivateFieldSet(this,S,C,"f")}}P=new WeakMap,S=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/TransactionReemitter.js":(e,t,r)=>{"use strict";r.d(t,{createTransactionReemitter:()=>createTransactionReemitter});const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/scan.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/observable/partition.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var m=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/types.js");var v=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var _=r("../../node_modules/lodash/pick.js");var y;(function(e){e[e["store"]=0]="store";e[e["onChain"]=1]="onChain";e[e["submitting"]=2]="submitting"})(y||(y={}));const createTransactionReemitter=({transactions:{rollback$:e,outgoing:{onChain$:t,submitting$:r,inFlight$:w}},stores:g,tipSlot$:b,maxInterval:P,genesisParameters$:S,logger:C})=>{const T=(0,a.merge)(g.volatileTransactions.get().pipe((0,o.tap)(e=>C.debug(`Store contains ${e.length} volatile transactions`)),(0,i.mergeMap)(e=>(0,n.from)(e)),(0,d.map)(e=>({source:y.store,tx:e}))),t.pipe((0,d.map)(e=>({onChain:e,source:y.onChain}))),r.pipe((0,d.map)(e=>({source:y.submitting,tx:e})))).pipe((0,i.mergeMap)(e=>S.pipe((0,d.map)(({securityParameter:e,activeSlotsCoefficient:t})=>calculateStabilityWindowSlotsCount({activeSlotsCoefficient:t,securityParameter:e})),(0,d.map)(t=>({sw:t,vt:e})))),(0,c.scan)((e,{vt:t,sw:r})=>{switch(t.source){case y.store:e=[...e,t.tx];break;case y.submitting:e=e.filter(e=>{const r=e.id===t.tx.id;if(r)C.debug(`Transaction ${t.tx.id} is being resubmitted. Remove it from volatiles`);return!r});g.volatileTransactions.set(e);break;case y.onChain:{const s=t.onChain.slot>r?t.onChain.slot-r:0;C.debug(`Removing stable transactions (slot <= ${s}), from volatiles`);C.debug(`Adding new volatile transaction ${t.onChain.id}`);e=[...e.filter(({slot:e})=>e>s),t.onChain];g.volatileTransactions.set(e);break}}return e},[]));const k=e.pipe((0,l.filter)(e=>!s.isPhase2ValidationErrTx(e)),(0,u.withLatestFrom)(T),(0,d.map)(([e,t])=>{const r=t.find(t=>t.id===e.id);if(!r){C.error(`Could not find onChain transaction with id ${e.id} that was rolled back`);return}return r}),(0,l.filter)(v.isNotNil),(0,u.withLatestFrom)(b),(0,d.map)(([e,t])=>{var r,s;const a=null===(r=e.body)||void 0===r?void 0:null===(s=r.validityInterval)||void 0===s?void 0:s.invalidHereafter;if(a&&t>a){const o={reason:m.TransactionFailure.Timeout,...e};C.error(`Rolled back transaction with id ${o.id} is no longer valid`,o.reason);return o}return e}),(0,f.share)());const[A,E]=(0,p.partition)(k,e=>void 0!==e.reason);const j=g.inFlightTransactions.get().pipe((0,d.map)(e=>e.filter(({submittedAt:e})=>!e)),(0,i.mergeMap)(e=>(0,n.from)(e)),(0,o.tap)(e=>C.debug("Reemitting in-flight tx that was never submitted",e.id)));const I=b.pipe((0,u.withLatestFrom)(S),(0,d.map)(([e,{slotLength:t}])=>e-P/(1e3*t)));const x=(0,h.combineLatest)([I,w]).pipe((0,i.mergeMap)(([e,t])=>(0,n.from)(t.filter(({submittedAt:t})=>t&&t<e))),(0,o.tap)(e=>C.debug("Reemitting unconfirmed in-flight tx",e.id,"submitted at slot",e.submittedAt)));return{failed$:A,reemit$:(0,a.merge)(E,j,x).pipe((0,d.map)(e=>_(e,["cbor","body","id","context"])))}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/TransactionsTracker.js":(e,t,r)=>{"use strict";r.d(t,{createTransactionsTracker:()=>createTransactionsTracker,newTransactions$:()=>newTransactions$});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/exhaustMap.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/partition.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var P=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var S=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeWith.js");var C=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var k=r("../../node_modules/rxjs/dist/esm5/internal/operators/scan.js");var A=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var E=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var j=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/types.js");var I=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var x=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var R=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var M=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");var O=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/trigger.js");var B=r("../../node_modules/rxjs/dist/esm5/internal/operators/groupBy.js");const newAndStoredMulticast=({new$:e,stored$:t,logger:r,storedFilterfn:s=()=>true,logStringfn:a=()=>"",groupByFn:o})=>(0,_.merge)(e.pipe((0,f.map)(e=>e)),t.pipe((0,d.tap)(e=>r.debug(a(e))),(0,f.map)(e=>e.filter(s)),(0,h.mergeMap)(e=>(0,y.from)(e)))).pipe((0,B.groupBy)(o),(0,f.map)(e=>e.pipe((0,i.share)())),(0,i.share)());var D=r("../../node_modules/lodash/chunk.js");var N=r("../../node_modules/lodash/sortBy.js");const F=25;const compareTxOrder=(e,t)=>e.blockHeader.slot-t.blockHeader.slot||e.index-t.index;const deduplicateSortedArray=(e,t)=>{if(0===e.length){return[]}const r=[e[0]];for(let s=1;s<e.length;++s)if(!t(e[s],e[s-1]))r.push(e[s]);return r};const allTransactionsByAddresses=async(e,{addresses:t,filterBy:r})=>{const s=D(t,F);let a=[];for(const o of s)if("blockRange"===r.type){let i=0;let n=[];do{n=(await e.transactionsByAddresses({addresses:o,blockRange:r.blockRange,pagination:{limit:F,startAt:i}})).pageResults;i+=F;a=[...a,...n]}while(n.length>=F)}else{const d=await e.transactionsByAddresses({addresses:o,pagination:{limit:r.limit,order:"desc",startAt:0}});a=[...a,...d.pageResults.reverse()]}return deduplicateSortedArray(a.sort(compareTxOrder),R.txEquals)};const getLastTransactionsAtBlock=(e,t)=>{const r=[];for(let s=e.length-1;s>=0;--s){const a=e[s];if(a.blockHeader.blockNo===t)r.push(a);else{break}}return r.reverse()};const revertLastBlock=(e,t,r,s,a)=>{const o=[...e];while(o.length>0){const i=o[o.length-1];if(i.blockHeader.blockNo===t){if(-1===s.findIndex(e=>e.id===i.id)){a.debug(`Transaction ${i.id} was rolled back`);r.next(i)}o.pop()}else{break}}return deduplicateSortedArray(o,R.txEquals)};const fetchInitialTransactions=async(e,t,r)=>{const s=await allTransactionsByAddresses(e,{addresses:t,filterBy:{limit:r,type:"tip"}});if(0===s.length){return[]}return s.slice(-1*r)};const findIntersectionAndUpdateTxStore=({chainHistoryProvider:e,historicalTransactionsFetchLimit:t,logger:r,store:s,retryBackoffConfig:o,tipBlockHeight$:i,rollback$:n,localTransactions:d,addresses:c})=>{return(0,M.pollProvider)({combinator:a.exhaustMap,equals:R.transactionsEquals,logger:r,retryBackoffConfig:o,sample:async()=>{let a=false;while(true){const o=d[d.length-1];o&&r.debug(`Last stored tx: ${null==o?void 0:o.id} block:${null==o?void 0:o.blockHeader.blockNo}`);const i=null==o?void 0:o.blockHeader.blockNo;const l=await (void 0===i?fetchInitialTransactions(e,c,t):allTransactionsByAddresses(e,{addresses:c,filterBy:{blockRange:{lowerBound:i},type:"blockRange"}}));r.debug(`chainHistoryProvider returned ${l.length} transactions`,void 0!==i&&`since block ${i}`);if(void 0===i){if(l.length>0){d=l;s.setAll(l)}return l}if(0===l.length){d=revertLastBlock(d,i,n,l,r);a=true;continue}const u=getLastTransactionsAtBlock(d,i);const f=l.slice(0,u.length);const p=u.length===f.length;const h=p&&u.every((e,t)=>e.id===f[t].id);if(!h){d=revertLastBlock(d,i,n,l,r);a=true;continue}const m=l.length===u.length&&u.every((e,t)=>e.id===l[t].id&&e.blockHeader.slot===l[t].blockHeader.slot);if(m){if(a)s.setAll(d)}else{for(const v of u){const _=l.find(e=>e.id===v.id);if((null==_?void 0:_.blockHeader)&&_.blockHeader.slot!==v.blockHeader.slot)v.blockHeader=_.blockHeader}d=deduplicateSortedArray([...d,...l.slice(u.length)],R.txEquals).slice(-1*t);s.setAll(d)}return d}},trigger$:i})};const createAddressTransactionsProvider=e=>{const{addresses$:t,store:r,logger:s}=e;const a=new o.Subject;const f=r.getAll().pipe((0,i.share)());return{rollback$:a.asObservable(),transactionsSource$:(0,n.concat)(f.pipe((0,d.tap)(e=>{return s.debug(`Stored history transactions count: ${(null==e?void 0:e.length)||0}`)})),(0,c.combineLatest)([t,f.pipe((0,l.defaultIfEmpty)([]))]).pipe((0,u.switchMap)(([t,r])=>findIntersectionAndUpdateTxStore({addresses:t,localTransactions:deduplicateSortedArray([...r].sort(compareTxOrder),R.txEquals),rollback$:a,...e}))))}};const createHistoricalTransactionsTrackerSubject=e=>new x.TrackerSubject(e.pipe((0,f.map)(e=>N(e,({blockHeader:{blockNo:e}})=>e,({index:e})=>e))));const newTransactions$=e=>e.pipe((0,p.take)(1),(0,f.map)(e=>e.map(({id:e})=>e)),(0,h.mergeMap)(t=>{const r=[...t];return e.pipe((0,f.map)(e=>e.filter(({id:e})=>!r.includes(e))),(0,d.tap)(e=>r.push(...e.map(({id:e})=>e))),(0,h.mergeMap)(e=>(0,n.concat)(...e.map(e=>(0,m.of)(e)))))}));const createTransactionsTracker=({tip$:e,chainHistoryProvider:t,addresses$:r,historicalTransactionsFetchLimit:a,newTransactions:{submitting$:n,pending$:c,signed$:l,failedToSubmit$:M},retryBackoffConfig:B,transactionsHistoryStore:D,inFlightTransactionsStore:N,signedTransactionsStore:F,logger:H,failedFromReemitter$:G},{transactionsSource$:V,rollback$:K}=createAddressTransactionsProvider({addresses$:r,chainHistoryProvider:t,historicalTransactionsFetchLimit:a,logger:(0,I.contextLogger)(H,"AddressTransactionsProvider"),retryBackoffConfig:B,store:D,tipBlockHeight$:(0,O.distinctBlock)(e)}))=>{const L=n.pipe((0,d.tap)(e=>H.debug(`Got new submitting transaction: ${e.id}`)),(0,i.share)());const W=new x.TrackerSubject(V);const z=createHistoricalTransactionsTrackerSubject(W).pipe((0,d.tap)(e=>{return H.debug(`History transactions count: ${(null==e?void 0:e.length)||0}`)}));const U=newTransactions$(z).pipe((0,i.share)());const[$,q]=(0,v.partition)(U,e=>s.isPhase2ValidationErrTx(e));const txOnChain$=e=>(0,_.merge)(z.pipe((0,p.take)(1),(0,h.mergeMap)(e=>(0,y.from)(e))),q).pipe((0,w.filter)(t=>t.id===e.id),(0,p.take)(1),(0,f.map)(t=>({...e,slot:t.blockHeader.slot})),(0,d.tap)(({slot:t})=>H.debug(`Transaction ${e.id} is on-chain in slot ${t}`)));const Y=newAndStoredMulticast({groupByFn:({id:e})=>e,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} in flight transactions`},logger:H,new$:L,stored$:N.get(),storedFilterfn:({submittedAt:e})=>!!e});const Q=newAndStoredMulticast({groupByFn:({tx:e})=>e.id,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} signed transactions`},logger:H,new$:l,stored$:F.get()});const X=new o.Subject;const J=Y.pipe((0,h.mergeMap)(t=>{return t.pipe((0,u.switchMap)(t=>{var r;const s=null===(r=t.body.validityInterval)||void 0===r?void 0:r.invalidHereafter;return(0,g.race)($.pipe((0,w.filter)(e=>e.id===t.id),(0,f.map)(()=>({reason:j.TransactionFailure.Phase2Validation,...t}))),K.pipe((0,f.map)(e=>e.id),(0,w.filter)(e=>t.body.inputs.some(({txId:t})=>t===e)),(0,f.map)(e=>({error:new Error(`Invalid inputs due to rolled back tx (${e}}). Try to rebuild and resubmit.`),reason:j.TransactionFailure.InvalidTransaction,...t}))),M.pipe((0,w.filter)(e=>e.id===t.id)),s?e.pipe((0,w.filter)(({slot:e})=>e>s),(0,f.map)(()=>({reason:j.TransactionFailure.Timeout,...t}))):b.NEVER).pipe((0,p.take)(1),(0,P.takeUntil)(txOnChain$(t)))}))}),(0,S.mergeWith)(G||C.EMPTY),(0,d.tap)(({id:e,reason:t})=>H.debug(`Transaction ${e} failed`,t))).subscribe(X);const txFailed$=e=>X.pipe((0,w.filter)(t=>t.id===e.id),(0,p.take)(1));const txPending$=t=>c.pipe((0,w.filter)(e=>e.id===t.id),(0,T.withLatestFrom)(e),(0,f.map)(([e,{slot:r}])=>({submittedAt:r,...t})));const Z=new x.TrackerSubject(Y.pipe((0,h.mergeMap)(e=>e.pipe((0,u.switchMap)(e=>{const t=(0,g.race)(txOnChain$(e),txFailed$(e)).pipe((0,f.map)(()=>({op:"remove",tx:e})),(0,i.share)());return(0,_.merge)((0,m.of)({op:"add",tx:e}),t,e.submittedAt?C.EMPTY:txPending$(e).pipe((0,f.map)(e=>({op:"submitted",tx:e})),(0,P.takeUntil)(t)))}))),(0,k.scan)((e,t)=>{const r=e.findIndex(e=>e.id===t.tx.id);if("add"===t.op){if(r>=0){return[...e.slice(0,r),t.tx,...e.slice(r+1)]}return[...e,t.tx]}if("remove"===t.op){return[...e.slice(0,r),...e.slice(r+1)]}return[...e.slice(0,r),t.tx,...e.slice(r+1)]},[]),(0,d.tap)(e=>N.set(e)),(0,d.tap)(e=>H.debug(`${e.length} in flight transactions`)),(0,A.startWith)([])));const ee=new x.TrackerSubject((0,_.merge)(Q.pipe((0,h.mergeMap)(e=>e),(0,f.map)(e=>({op:"add",witnessedTx:e}))),Z.pipe((0,h.mergeMap)(e=>e),(0,f.map)(e=>({id:e.id,op:"remove"}))),z.pipe((0,f.map)(e=>({inputs:e.flatMap(e=>e.body.inputs.map(e=>e)),op:"check_inputs"}))),e.pipe((0,f.map)(({slot:e})=>({op:"check_interval",slot:e})))).pipe((0,k.scan)((e,t)=>{if("add"===t.op){return[...e,t.witnessedTx]}if("remove"===t.op){return e.filter(({tx:e})=>e.id!==t.id)}if("check_interval"===t.op){return e.filter(({tx:{body:{validityInterval:{invalidHereafter:e}={}}}})=>e&&e>t.slot)}if("check_inputs"===t.op){return e.filter(({tx:e})=>{const r=e.body.inputs.some(e=>t.inputs.some(t=>(0,R.txInEquals)(e,t)));return!r})}return e},[]),(0,d.tap)(e=>F.set(e)),(0,A.startWith)([]),(0,E.distinctUntilChanged)(R.signedTxsEquals)));const et=new o.Subject;const er=Y.pipe((0,h.mergeMap)(e=>e.pipe((0,u.switchMap)(e=>txOnChain$(e).pipe((0,P.takeUntil)(txFailed$(e))))))).subscribe(et);return{history$:z,new$:U,outgoing:{failed$:X,inFlight$:Z,onChain$:et,pending$:c,signed$:ee,submitting$:L},rollback$:K,shutdown:()=>{Z.complete();er.unsubscribe();et.complete();J.unsubscribe();X.complete();H.debug("Shutdown")}}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/UtxoTracker.js":(e,t,r)=>{"use strict";r.d(t,{createUtxoTracker:()=>createUtxoTracker});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var u=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");var f=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var p=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/persistentTrackerSubjects.js");var h=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var m=r("../../node_modules/lodash/chunk.js");var v=r("../../node_modules/lodash/uniqWith.js");const _=25;const createUtxoProvider=(e,t,r,a,o)=>t.pipe((0,s.switchMap)(t=>(0,u.pollProvider)({equals:f.utxoEquals,logger:o,retryBackoffConfig:a,sample:async()=>{let r=new Array;const s=m(t,_);for(const a of s)r=[...r,...await e.utxoByAddresses({addresses:a})];return r.sort(h.sortUtxoByTxIn)},trigger$:r})));const createUtxoTracker=({utxoProvider:e,addresses$:t,stores:r,transactionsInFlight$:s,retryBackoffConfig:u,history$:h,logger:m},{utxoSource$:_=new p.PersistentCollectionTrackerSubject(()=>createUtxoProvider(e,t,h,u,m),r.utxo),unspendableUtxoSource$:y=new p.PersistentCollectionTrackerSubject(e=>e.length>0?a.NEVER:(0,o.concat)((0,i.of)([]),a.NEVER),r.unspendableUtxo)}={})=>{const w=(0,n.combineLatest)([_,s,t]).pipe((0,d.map)(([e,t,r])=>[...e.filter(([e])=>{const r=t.some(({body:{inputs:t}})=>t.some(t=>t.txId===e.txId&&t.index===e.index));r&&m.debug("OnChain UTXO is already used in in-flight transaction. Excluding from total$.",e);return!r}),...t.flatMap(({body:{outputs:e},id:s},a)=>e.filter(({address:e},o)=>r.includes(e)&&!t.some(({body:{inputs:e}},t)=>a!==t&&e.some(e=>e.txId===s&&e.index===o))).map(t=>{const r={address:t.address,index:e.indexOf(t),txId:s};m.debug("New UTXO available from in-flight transactions. Including in total$.",r);return[r,t]}))]),(0,d.map)(e=>{const t=v(e,([e],[t])=>e.txId===t.txId&&e.index===t.index);if(t.length!==e.length)m.debug("Found duplicate UTxO in",e);return t}),(0,c.distinctUntilChanged)((e,t)=>(0,f.utxoEquals)(e,t)),(0,l.shareReplay)(1));const g=(0,n.combineLatest)([w,y]).pipe((0,d.map)(([e,t])=>e.filter(([e])=>{const r=t.some(([t])=>(0,f.txInEquals)(e,t));r&&m.debug("Exclude unspendable UTXO from availble$",e);return!r})),(0,c.distinctUntilChanged)((e,t)=>(0,f.utxoEquals)(e,t)),(0,l.shareReplay)(1));return{available$:g,setUnspendable:async e=>{m.debug("setUnspendable",e);y.next(e)},shutdown:()=>{_.complete();y.complete();m.debug("Shutdown")},total$:w,unspendable$:(0,n.combineLatest)([y,w]).pipe((0,d.map)(([e,t])=>e.filter(([e])=>t.some(([t])=>(0,f.txInEquals)(t,e)))),(0,c.distinctUntilChanged)((e,t)=>(0,f.utxoEquals)(e,t)),(0,l.shareReplay)(1))}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletAssetProvider.js":(e,t,r)=>{"use strict";r.d(t,{createWalletAssetProvider:()=>createWalletAssetProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/index.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const tryCip68NftMetadata=(e,t,r,i)=>{const n=s.AssetNameLabel.decode(t);if((null==n?void 0:n.label)===s.AssetNameLabelNum.UserNFT){const d=a.AssetId.fromParts(e,s.AssetNameLabel.encode(n.content,s.AssetNameLabelNum.ReferenceNFT));for(const c of r.body.outputs){var l;if(null===(l=c.value.assets)||void 0===l?void 0:l.get(d)){return o.NftMetadata.fromPlutusData(c.datum,i)}}}return null};const getNftMetadata=(e,t,r,s)=>{let a=tryCip68NftMetadata(t,e,r,s);if(!a){var i;a=(null===(i=r.auxiliaryData)||void 0===i?void 0:i.blob)?o.NftMetadata.fromMetadatum({name:e,policyId:t},r.auxiliaryData.blob,s):null}return a};const createAssetInfo=(e,t,r,s)=>{const o=a.AssetId.getAssetName(e);const i=a.AssetId.getPolicyId(e);const n={assetId:e,fingerprint:a.AssetFingerprint.fromParts(i,o),name:o,policyId:i,quantity:t,supply:t};n.nftMetadata=getNftMetadata(o,i,r,s);return n};const getMintedAssetInfosFromTx=async(e,t)=>{const r=e.body.mint;if(!r)return null;return[...r.entries()].filter(([e,t])=>t>0).map(([r,s])=>createAssetInfo(r,s,e,t))};const fetchAssetsFromProvider=async(e,t,r)=>{const s=[];for(const a of t){try{const o=await e.getAsset({assetId:a,extraData:{nftMetadata:true,tokenMetadata:true}});s.push(o)}catch(i){r.error(i)}}return s};const createFallbackAsset=e=>{const t=a.AssetId.getAssetName(e);const r=a.AssetId.getPolicyId(e);return{assetId:e,fingerprint:a.AssetFingerprint.fromParts(r,t),name:t,policyId:r,quantity:0n,supply:0n}};const mergeAssets=(e,t,r,s)=>{return e.map(e=>{const a=t.get(e)||r.find(t=>t.assetId===e);const o=null==s?void 0:s.find(t=>t.assetId===e);if(!a&&!o){return createFallbackAsset(e)}if(!a&&o){return o}if(a&&o){a.supply+=o.supply;a.quantity=a.supply;if(o.nftMetadata)a.nftMetadata=o.nftMetadata}return a})};const createWalletAssetProvider=({assetProvider:e,assetInfo$:t,tx:r,logger:s})=>{return{async getAsset({assetId:o}){const n=r?await getMintedAssetInfosFromTx(r,s):[];const d=await (0,i.firstValueFrom)(t);let c=d.get(o);if(!c){try{c=await e.getAsset({assetId:o,extraData:{nftMetadata:true,tokenMetadata:true}})}catch(l){s.error(l)}}const u=null==n?void 0:n.find(e=>e.assetId===o);if(!c&&!u){const f=a.AssetId.getAssetName(o);const p=a.AssetId.getPolicyId(o);return{assetId:o,fingerprint:a.AssetFingerprint.fromParts(p,f),name:f,policyId:p,quantity:0n,supply:0n}}if(!c)return u;if(u){c.supply+=u.supply;if(u.nftMetadata)c.nftMetadata=u.nftMetadata}const h=r?tryCip68NftMetadata(c.policyId,c.name,r,s):null;if(h)c.nftMetadata=h;return c},async getAssets({assetIds:a}){const o=await (0,i.firstValueFrom)(t);const d=r?await getMintedAssetInfosFromTx(r,s):[];const c=a.filter(e=>!o.has(e));const l=await fetchAssetsFromProvider(e,c,s);const u=mergeAssets(a,o,l,d);const f=u.filter(n.isNotNil);if(r){for(const p of f){const h=tryCip68NftMetadata(p.policyId,p.name,r,s);if(h)p.nftMetadata=h}}return u.filter(n.isNotNil)},healthCheck(){return e.healthCheck()}}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js":(e,t,r)=>{"use strict";r.d(t,{combineInputResolvers:()=>combineInputResolvers,createInputResolver:()=>createInputResolver,createWalletUtil:()=>createWalletUtil});var s=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var a=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var i=r("../../node_modules/lodash/uniqBy.js");const createInputResolver=({utxo:e,transactions:t})=>{return{async resolveInput(r,a){const i=await (0,s.firstValueFrom)(t.history$);const n=await (0,s.firstValueFrom)(e.available$,{defaultValue:[]});const d=await (0,s.firstValueFrom)(t.outgoing.signed$,{defaultValue:[]});const c=d.flatMap(({tx:e},t)=>e.body.outputs.filter((r,s)=>{const a=d.some(({tx:{body:r}},a)=>t!==a&&r.inputs.some(t=>(0,o.txInEquals)(t,{index:s,txId:e.id})));return!a}).map(t=>{const r={address:t.address,index:e.body.outputs.indexOf(t),txId:e.id};return[r,t]}));const l=[...n,...c].find(([e])=>(0,o.txInEquals)(e,r));if(l)return l[1];if(null==a?void 0:a.hints){var u,f;const p=null==a?void 0:null===(u=a.hints)||void 0===u?void 0:null===(f=u.transactions)||void 0===f?void 0:f.find(e=>e.id===r.txId);if(p&&p.body.outputs.length>r.index){return p.body.outputs[r.index]}}const h=i.findLast(e=>e.id===r.txId);if(h&&h.body.outputs.length>r.index){return h.body.outputs[r.index]}return null}}};const createBackendInputResolver=e=>{const t=new Map;const fetchAndCacheTransaction=async r=>{if(t.has(r)){return t.get(r)}const s=await e.transactionsByHashes({ids:[r]});if(s.length>0){t.set(r,s[0]);return s[0]}return null};return{async resolveInput(e,r){var s;if((null==r?void 0:r.hints)&&(null===(s=r.hints)||void 0===s?void 0:s.transactions)){for(const a of r.hints.transactions)t.set(a.id,a)}const o=await fetchAndCacheTransaction(e.txId);if(!o)return null;return o.body.outputs.length>e.index?o.body.outputs[e.index]:null}}};const combineInputResolvers=(...e)=>({async resolveInput(t,r){for(const s of e){const a=await s.resolveInput(t,r);if(a)return a}return null}});const createWalletUtil=e=>({...(0,a.createOutputValidator)({protocolParameters:()=>(0,s.firstValueFrom)(e.protocolParameters$)}),...e.chainHistoryProvider?combineInputResolvers(createInputResolver(e),createBackendInputResolver(e.chainHistoryProvider)):createInputResolver(e)});const hasForeignInputs=({body:{inputs:e,collaterals:t=[]}},r)=>[...e,...t].some(e=>r.every(t=>!txInEquals(e,t[0])));const hasCommitteeCertificates=({certificates:e})=>(e||[]).some(e=>e.__typename===Cardano.CertificateType.AuthorizeCommitteeHot||e.__typename===Cardano.CertificateType.ResignCommitteeCold);const scriptWalletHasForeignCertificates=(e,t)=>{if(!t){return false}const r=Cardano.RewardAccount.toHash(e);for(const s of t){switch(s.__typename){case Cardano.CertificateType.Registration:case Cardano.CertificateType.StakeRegistration:case Cardano.CertificateType.GenesisKeyDelegation:continue;case Cardano.CertificateType.StakeDeregistration:case Cardano.CertificateType.StakeDelegation:case Cardano.CertificateType.Unregistration:case Cardano.CertificateType.VoteDelegation:case Cardano.CertificateType.StakeVoteDelegation:case Cardano.CertificateType.StakeRegistrationDelegation:case Cardano.CertificateType.VoteRegistrationDelegation:case Cardano.CertificateType.MIR:case Cardano.CertificateType.StakeVoteRegistrationDelegation:if(!s.stakeCredential||s.stakeCredential.type!==Cardano.CredentialType.ScriptHash||s.stakeCredential.hash!==r){return true}break;case Cardano.CertificateType.PoolRegistration:{const a=s.poolParameters.owners.find(t=>t===e);if(!a){return true}break}case Cardano.CertificateType.PoolRetirement:{const o=Cardano.PoolId.fromKeyHash(Cardano.RewardAccount.toHash(e));if(s.poolId!==o){return true}}break;case Cardano.CertificateType.RegisterDelegateRepresentative:case Cardano.CertificateType.UnregisterDelegateRepresentative:case Cardano.CertificateType.UpdateDelegateRepresentative:if(!s.dRepCredential||s.dRepCredential.type!==Cardano.CredentialType.ScriptHash||s.dRepCredential.hash!==r){return true}break;case Cardano.CertificateType.AuthorizeCommitteeHot:case Cardano.CertificateType.ResignCommitteeCold:return true}}return false};const scriptWalletHasForeignVotingProcedures=(e,t)=>{if(!t){return false}for(const r of t){switch(r.voter.__typename){case Cardano.VoterType.ccHotKeyHash:case Cardano.VoterType.ccHotScriptHash:case Cardano.VoterType.stakePoolKeyHash:case Cardano.VoterType.dRepKeyHash:return true;case Cardano.VoterType.dRepScriptHash:{const s=Cardano.RewardAccount.toHash(e);if(r.voter.credential.hash!==s){return true}}}}return false};const requiresForeignSignatures=async(e,t)=>{const r=await firstValueFrom(t.utxo.total$);const s=await firstValueFrom(t.addresses$);const a=s.some(e=>isScriptAddress(e));if(a){const o=s.map(e=>e);return hasForeignInputs(e,r)||scriptWalletHasForeignCertificates(o[0].rewardAccount,e.body.certificates)||scriptWalletHasForeignVotingProcedures(o[0].rewardAccount,e.body.votingProcedures)}const i=s.map(e=>e);const n=uniqBy(i,"rewardAccount").map(e=>{const t=Cardano.RewardAccount.toHash(e.rewardAccount);return{derivationPath:e.stakeKeyDerivationPath,poolId:Cardano.PoolId.fromKeyHash(t),rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>null!==e.derivationPath);const d=await t.governance.getPubDRepKey();const c=d?(await Crypto.Ed25519PublicKey.fromHex(d).hash()).hex():void 0;return hasForeignInputs(e,r)||KeyManagementUtil.checkStakeCredentialCertificates(n,e.body).requiresForeignSignatures||c&&KeyManagementUtil.getDRepCredentialKeyPaths({dRepKeyHash:c,txBody:e.body}).requiresForeignSignatures||c&&KeyManagementUtil.getVotingProcedureKeyPaths({dRepKeyHash:c,groupedAddresses:i,txBody:e.body}).requiresForeignSignatures||hasCommitteeCertificates(e.body)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/types.js":(e,t,r)=>{"use strict";r.d(t,{TransactionFailure:()=>s});var s;(function(e){e["InvalidTransaction"]="INVALID_TRANSACTION";e["FailedToSubmit"]="FAILED_TO_SUBMIT";e["Unknown"]="UNKNOWN";e["CannotTrack"]="CANNOT_TRACK";e["Timeout"]="TIMEOUT";e["Phase2Validation"]="PHASE_2_VALIDATION"})(s||(s={}))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/connectionStatusTracker.js":(e,t,r)=>{"use strict";r.d(t,{ConnectionStatus:()=>u,createSimpleConnectionStatusTracker:()=>createSimpleConnectionStatusTracker});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");var u;(function(e){e[e["down"]=0]="down";e[e["up"]=1]="up"})(u||(u={}));const createSimpleConnectionStatusTracker=({isNodeEnv:e=(0,l.isBackgroundProcess)(),online$:t=e?s.NEVER:(0,a.fromEvent)(window,"online"),offline$:r=e?s.NEVER:(0,a.fromEvent)(window,"offline"),initialStatus:f=!!e||navigator.onLine}={})=>(0,o.merge)(t.pipe((0,i.map)(()=>true)),r.pipe((0,i.map)(()=>false))).pipe((0,n.startWith)(f),(0,i.map)(e=>e?u.up:u.down),(0,d.distinctUntilChanged)(),(0,c.shareReplay)(1))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js":(e,t,r)=>{"use strict";r.d(t,{delegatedStakeEquals:()=>delegatedStakeEquals,epochInfoEquals:()=>epochInfoEquals,groupedAddressesEquals:()=>groupedAddressesEquals,signedTxsEquals:()=>signedTxsEquals,tipEquals:()=>tipEquals,transactionsEquals:()=>transactionsEquals,txEquals:()=>txEquals,txInEquals:()=>txInEquals,utxoEquals:()=>utxoEquals});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const tipEquals=(e,t)=>e.hash===t.hash;const txEquals=(e,t)=>e.id===t.id;const sameSortedArrayItems=(e,t,r)=>{if(e.length!==t.length)return false;for(const[s,a]of e.entries())if(!r(a,t[s])){return false}return true};const transactionsEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,txEquals)};const txInEquals=(e,t)=>e.txId===t.txId&&e.index===t.index;const utxoEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,([e],[t])=>txInEquals(e,t))};const eraSummariesEquals=(e,t)=>sameArrayItems(e,t,(e,t)=>e.start.slot===t.start.slot);const groupedAddressEquals=(e,t)=>e.address===t.address;const groupedAddressesEquals=(e,t)=>(0,s.sameArrayItems)(e,t,groupedAddressEquals);const epochInfoEquals=(e,t)=>e.epochNo===t.epochNo;const delegatedStakeEquals=(e,t)=>e.pool.id===t.pool.id&&e.stake===t.stake&&e.percentage===t.percentage;const signedTxEquals=(e,t)=>e.tx.id===t.tx.id;const signedTxsEquals=(e,t)=>(0,s.sameArrayItems)(e,t,signedTxEquals)},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/persistentTrackerSubjects.js":(e,t,r)=>{"use strict";r.d(t,{PersistentCollectionTrackerSubject:()=>PersistentCollectionTrackerSubject,PersistentDocumentTrackerSubject:()=>PersistentDocumentTrackerSubject});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var d=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");class PersistentCollectionTrackerSubject extends d.TrackerSubject{next(e){this.store&&this.store.setAll(e);super.next(e)}constructor(e,t){const r=t.getAll().pipe((0,s.defaultIfEmpty)([]));super(r.pipe((0,a.switchMap)(t=>{const r=e(t);return t.length>0?(0,o.concat)((0,i.of)(t),r):r})));this.store=t}}class PersistentDocumentTrackerSubject extends d.TrackerSubject{constructor(e,t){super((0,o.concat)(t.get(),e.pipe((0,n.tap)(t.set.bind(t)))))}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js":(e,t,r)=>{"use strict";r.d(t,{pollProvider:()=>pollProvider});var s=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");const pollProvider=e=>(0,s.poll)({...e,retryBackoffConfig:{...e.retryBackoffConfig,shouldRetry:e=>{if(e instanceof a.ProviderError){return![a.ProviderFailure.NotImplemented,a.ProviderFailure.BadRequest].includes(e.reason)}return false}}}).pipe((0,o.catchError)(e=>{if(e instanceof a.ProviderError){throw e}throw new a.ProviderError(a.ProviderFailure.Unknown,e)}))},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/sortAddresses.js":(e,t,r)=>{"use strict";r.d(t,{sortAddresses:()=>sortAddresses});const sortAddresses=e=>[...e].sort((e,t)=>{if(e.index!==t.index){return e.index-t.index}if(e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index}if(e.stakeKeyDerivationPath&&!t.stakeKeyDerivationPath){return -1}if(!e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return 1}return 0})},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/trigger.js":(e,t,r)=>{"use strict";r.d(t,{distinctBlock:()=>distinctBlock});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");const distinctBlock=e=>e.pipe((0,s.map)(({blockNo:e})=>e),(0,a.distinctUntilChanged)());const distinctEraSummaries=e=>e.pipe(map(e=>e),distinctUntilChanged(eraSummariesEquals))},"../../node_modules/@cardano-sdk/wallet/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{isKeyHashAddress:()=>isKeyHashAddress,isScriptAddress:()=>isScriptAddress,isTxBodyWithHash:()=>isTxBodyWithHash});const isScriptAddress=e=>"scripts"in e;const isKeyHashAddress=e=>!isScriptAddress(e);const isTxBodyWithHash=e=>"object"==typeof e&&"hash"in e&&"body"in e},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteAuthenticatorApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeRemoteAuthenticatorApi=t.RemoteAuthenticatorMethodNames=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/util.js");t.RemoteAuthenticatorMethodNames=["haveAccess","requestAccess","revokeAccess"];const consumeRemoteAuthenticatorApi=({walletName:e},r)=>(0,s.consumeRemoteApi)({baseChannel:(0,a.authenticatorChannel)(e),properties:Object.fromEntries(t.RemoteAuthenticatorMethodNames.map(e=>[e,s.RemoteApiPropertyType.MethodReturningPromise]))},r);t.consumeRemoteAuthenticatorApi=consumeRemoteAuthenticatorApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteWalletApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeRemoteWalletApi=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/util.js");const i=[s.ApiError,s.DataSignError,s.PaginateError,s.TxSendError,s.TxSignError];const consumeRemoteWalletApi=({walletName:e},t)=>(0,a.consumeRemoteApi)({baseChannel:(0,o.walletApiChannel)(e),errorTypes:i,properties:Object.fromEntries(s.WalletApiMethodNames.map(e=>[e,a.RemoteApiPropertyType.MethodReturningPromise]))},t);t.consumeRemoteWalletApi=consumeRemoteWalletApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/exposeAuthenticatorApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeAuthenticatorApi=t.authenticatorChannel=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteAuthenticatorApi.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/util.js");const i=r("../../node_modules/rxjs/dist/esm5/index.js");const authenticatorChannel=e=>`authenticator-${e}`;t.authenticatorChannel=authenticatorChannel;const exposeAuthenticatorApi=({walletName:e},r)=>(0,s.exposeApi)({api$:(0,i.of)(r.authenticator),baseChannel:(0,t.authenticatorChannel)(e),properties:Object.fromEntries(a.RemoteAuthenticatorMethodNames.map(e=>[e,{propType:s.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e},t)=>{if(!t)throw new Error("Unknown sender");return{args:[(0,o.cloneSender)(t)],method:e}}}}]))},r);t.exposeAuthenticatorApi=exposeAuthenticatorApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/exposeWalletApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeWalletApi=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/util.js");const i=r("../../node_modules/rxjs/dist/esm5/index.js");const exposeWalletApi=({walletName:e},t)=>(0,a.exposeApi)({api$:(0,i.of)(t.walletApi),baseChannel:(0,o.walletApiChannel)(e),properties:Object.fromEntries(s.WalletApiMethodNames.map(e=>[e,{propType:a.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e,args:t},r)=>{if(!r)throw new Error('"sender" is undefined');return{args:[{sender:(0,o.cloneSender)(r)},...t],method:e}},validate:async(e,r)=>{const a=r&&await t.authenticator.haveAccess((0,o.cloneSender)(r));if(!a){throw new s.ApiError(s.APIErrorCode.Refused,"Call cardano.{walletName}.enable() first")}}}}]))},t);t.exposeWalletApi=exposeWalletApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeContentScript.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeInjectedScript.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeBackgroundScript.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeBackgroundScript.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeBackgroundScript=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/exposeAuthenticatorApi.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/exposeWalletApi.js");const initializeBackgroundScript=(e,t)=>{const r=(0,s.exposeAuthenticatorApi)(e,t);const o=(0,a.exposeWalletApi)(e,t);return()=>{o.shutdown();r.shutdown()}};t.initializeBackgroundScript=initializeBackgroundScript},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeContentScript.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeContentScript=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteAuthenticatorApi.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteWalletApi.js");const initializeContentScript=({injectedScriptSrc:e,walletName:t},r)=>{const i=[(0,a.consumeRemoteAuthenticatorApi)({walletName:t},r),(0,o.consumeRemoteWalletApi)({walletName:t},r)];const n=(0,s.runContentScriptMessageProxy)(i,r.logger);const d=document.createElement("script");d.async=false;d.src=e;d.addEventListener("load",()=>d.remove());(document.head||document.documentElement).append(d);return n};t.initializeContentScript=initializeContentScript},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/initializeInjectedScript.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeInjectedScript=void 0;const s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteAuthenticatorApi.js");const i=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/consumeRemoteWalletApi.js");const initializeInjectedScript=(e,{logger:t})=>{const r={logger:t,runtime:a.injectedRuntime};const n=(0,o.consumeRemoteAuthenticatorApi)(e,r);const d=(0,i.consumeRemoteWalletApi)(e,r);const c=new s.Cip30Wallet(e,{api:d,authenticator:n,logger:t});(0,s.injectGlobal)(window,c,t)};t.initializeInjectedScript=initializeInjectedScript},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cloneSender=t.authenticatorChannel=t.walletApiChannel=void 0;const walletApiChannel=e=>`wallet-api-${e}`;t.walletApiChannel=walletApiChannel;const authenticatorChannel=e=>`authenticator-${e}`;t.authenticatorChannel=authenticatorChannel;const cloneSender=({frameId:e,id:t,tab:r,url:s})=>({frameId:e,id:t,tab:r?{active:r.active,attention:r.attention,audible:r.audible,autoDiscardable:r.autoDiscardable,cookieStoreId:r.cookieStoreId,discarded:r.discarded,favIconUrl:r.favIconUrl,height:r.height,hidden:r.hidden,highlighted:r.highlighted,id:r.id,incognito:r.incognito,index:r.index,isArticle:r.isArticle,isInReaderMode:r.isInReaderMode,lastAccessed:r.lastAccessed,mutedInfo:r.mutedInfo?{...r.mutedInfo}:void 0,openerTabId:r.openerTabId,pendingUrl:r.pendingUrl,pinned:r.pinned,sessionId:r.sessionId,sharingState:r.sharingState?{...r.sharingState}:void 0,status:r.status,successorTabId:r.successorTabId,title:r.title,url:r.url,width:r.width,windowId:r.windowId}:void 0,url:s});t.cloneSender=cloneSender},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.cip30=void 0;o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js"),t);o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/index.js"),t);o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/index.js"),t);o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/index.js"),t);o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/index.js"),t);t.cip30=i(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/cip30/index.js"));o(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/index.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/consumeKeyAgent.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeKeyAgent=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/util.js");const consumeKeyAgent=({walletName:e},t)=>(0,s.consumeRemoteApi)({baseChannel:(0,a.keyAgentChannel)(e),properties:a.keyAgentProperties},t);t.consumeKeyAgent=consumeKeyAgent},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/exposeKeyAgent.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeKeyAgent=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/util.js");const o=r("../../node_modules/rxjs/dist/esm5/index.js");const exposeKeyAgent=({keyAgent:e,walletName:t},r)=>(0,s.exposeApi)({api$:(0,o.of)(e),baseChannel:(0,a.keyAgentChannel)(t),properties:a.keyAgentProperties},r);t.exposeKeyAgent=exposeKeyAgent},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/exposeKeyAgent.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/consumeKeyAgent.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/util.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/keyAgent/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.keyAgentProperties=t.keyAgentChannel=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const keyAgentChannel=e=>`${e}$-keyAgent`;t.keyAgentChannel=keyAgentChannel;t.keyAgentProperties={deriveAddress:s.RemoteApiPropertyType.MethodReturningPromise,derivePublicKey:s.RemoteApiPropertyType.MethodReturningPromise,getAccountIndex:s.RemoteApiPropertyType.MethodReturningPromise,getBip32Ed25519:s.RemoteApiPropertyType.MethodReturningPromise,getChainId:s.RemoteApiPropertyType.MethodReturningPromise,getExtendedAccountPublicKey:s.RemoteApiPropertyType.MethodReturningPromise,signBlob:s.RemoteApiPropertyType.MethodReturningPromise,signCip8Data:s.RemoteApiPropertyType.MethodReturningPromise,signTransaction:s.RemoteApiPropertyType.MethodReturningPromise}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/BackgroundMessenger.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.generalizeBackgroundMessenger=t.createBackgroundMessenger=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const o=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const createBackgroundMessenger=({logger:e,runtime:t})=>{const r=new Map;const getChannel=e=>{let t=r.get(e);if(!t)r.set(e,t={message$:new s.ReplaySubject(1),ports$:new s.BehaviorSubject(new Set)});return t};const onPortMessage=(t,s)=>{e.debug(`[BackgroundMessenger(${s.name})] message`,t);const{message$:a}=r.get(s.name);a.next({data:t,port:s})};const onPortDisconnected=s=>{if(t.lastError)e.warn(`[BackgroundMessenger(${s.name})] Last runtime error`,t.lastError);s.onMessage.removeListener(onPortMessage);s.onDisconnect.removeListener(onPortDisconnected);const{ports$:a}=r.get(s.name);const o=new Set(a.value);o.delete(s);a.next(o);e.debug(`[BackgroundMessenger(${s.name})] disconnected`,s)};const onConnect=t=>{const{ports$:r}=getChannel(t.name);const s=new Set(r.value);s.add(t);t.onMessage.addListener(onPortMessage);t.onDisconnect.addListener(onPortDisconnected);r.next(s);e.debug(`[BackgroundMessenger(${t.name})] connected`)};t.onConnect.addListener(onConnect);return{getChannel,shutdown(){for(const s of[...r.keys()])this.shutdownChannel(s);t.onConnect.removeListener(onConnect);e.warn("[BackgroundMessenger] shutdown")},shutdownChannel(e){const t=r.get(e);if(!t)return;t.message$.complete();for(const s of t.ports$.value)s.disconnect();r.delete(e)}}};t.createBackgroundMessenger=createBackgroundMessenger;const generalizeBackgroundMessenger=(e,r,i)=>({channel:e,connect$:r.getChannel(e).ports$.pipe((0,s.bufferCount)(2,1),(0,s.mergeMap)(([e,t])=>{const r=[...t].filter(t=>!e.has(t));return(0,s.from)(r)})),deriveChannel(s){return(0,t.generalizeBackgroundMessenger)((0,a.deriveChannelName)(e,s),r,i)},disconnect$:r.getChannel(e).ports$.pipe((0,s.pairwise)(),(0,s.filter)(([e,t])=>e.size>t.size),(0,s.map)(([e,t])=>({disconnected:[...e].find(e=>!t.has(e)),remaining:[...t]}))),isShutdown:false,message$:r.getChannel(e).message$,postMessage:t=>{const{ports$:a}=r.getChannel(e);return a.pipe((0,s.filter)(e=>e.size>0),(0,s.first)(),(0,s.tap)(e=>{for(const r of e)r.postMessage(t)}),(0,o.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof s.EmptyError)}),(0,s.map)(()=>void 0),(0,s.catchError)(()=>{i.warn("Couldn't postMessage: messenger shutdown");return(0,s.of)(void 0)}))},shutdown(){r.shutdownChannel(e);this.isShutdown=true}});t.generalizeBackgroundMessenger=generalizeBackgroundMessenger},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/NonBackgroundMessenger.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createNonBackgroundMessenger=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const createNonBackgroundMessenger=({baseChannel:e,reconnectConfig:{initialDelay:r,maxDelay:n}={initialDelay:10,maxDelay:1e3}},{logger:d,runtime:c})=>{let l;let u=r;let f=false;const p=new s.Subject;const h=new s.BehaviorSubject(null);const m=new s.ReplaySubject(1);const connect=()=>{if("string"==typeof h.value||h.value)return;const t=c.connect({name:e});h.next(t);t.onDisconnect.addListener(onDisconnect);t.onMessage.addListener(onMessage)};const reconnect=()=>{clearTimeout(l);u=Math.min(Math.pow(u,2),n);l=setTimeout(connect,u)};const onMessage=(t,s)=>{d.debug(`[NonBackgroundMessenger(${e})] message`,t);u=r;m.next({data:t,port:s})};const onDisconnect=t=>{if(c.lastError)d.warn(`[NonBackgroundMessenger(${e})] Last runtime error`,c.lastError);p.next({disconnected:t,remaining:[]});d.debug(`[NonBackgroundMessenger(${e})] disconnected`);t.onMessage.removeListener(onMessage);t.onDisconnect.removeListener(onDisconnect);h.next(f?"shutdown":null);if(!f)reconnect()};connect();const v=h.pipe((0,s.debounceTime)(10),(0,s.filter)(o.isNotNil),(0,s.takeWhile)(e=>"string"!=typeof e));const _=new Set;return{channel:e,connect$:v,deriveChannel(s,{detached:o}={}){const i=(0,t.createNonBackgroundMessenger)({baseChannel:(0,a.deriveChannelName)(e,s),reconnectConfig:{initialDelay:r,maxDelay:n}},{logger:d,runtime:c});if(!o)_.add(i);return i},disconnect$:p,get isShutdown(){return f},message$:m,postMessage(e){return v.pipe((0,s.first)(),(0,s.tap)(t=>t.postMessage(e)),(0,i.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof s.EmptyError)}),(0,s.map)(()=>void 0),(0,s.catchError)(()=>{d.warn("Couldn't postMessage: messenger shutdown");return(0,s.of)(void 0)}))},shutdown(){f=true;const t=h.value;if("string"!=typeof t)null==t?void 0:t.disconnect();clearTimeout(l);for(const r of _.values()){r.shutdown();_.delete(r)}h.complete();p.complete();d.debug(`[NonBackgroundMessenger(${e})] shutdown`)}}};t.createNonBackgroundMessenger=createNonBackgroundMessenger},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WrongTargetError=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WrongTargetError extends s.CustomError{}t.WrongTargetError=WrongTargetError},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.consumeRemoteApi=t.exposeApi=void 0;const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/BackgroundMessenger.js");const i=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const n=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/remoteApi.js");const d=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/NonBackgroundMessenger.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/BackgroundMessenger.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/NonBackgroundMessenger.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/remoteApi.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/runContentScriptMessageProxy.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/types.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/injectedRuntime.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/errors.js"),t);const l=(0,c.isBackgroundProcess)();const u=(()=>{let e=null;return t=>e||(e=(0,o.createBackgroundMessenger)(t))})();const _backgroundExposeApi=(e,t)=>{const r=(0,o.generalizeBackgroundMessenger)(e.baseChannel,u(t),t.logger);return(0,n.exposeMessengerApi)(e,{messenger:r,...t})};const _nonBackgroundExposeApi=(e,t)=>(0,n.exposeMessengerApi)(e,{messenger:(0,d.createNonBackgroundMessenger)(e,t),...t});const _nonBackgroundConsumeRemoteApi=(e,t)=>(0,n.consumeMessengerRemoteApi)(e,{destructor:new i.FinalizationRegistryDestructor(t.logger),messenger:(0,d.createNonBackgroundMessenger)(e,t),...t});const _backgroundConsumeRemoteApi=(e,t)=>{const r=(0,o.generalizeBackgroundMessenger)(e.baseChannel,u(t),t.logger);return(0,n.consumeMessengerRemoteApi)(e,{destructor:new i.FinalizationRegistryDestructor(t.logger),messenger:r,...t})};t.exposeApi=l?_backgroundExposeApi:_nonBackgroundExposeApi;t.consumeRemoteApi=l?_backgroundConsumeRemoteApi:_nonBackgroundConsumeRemoteApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/injectedRuntime.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.injectedRuntime=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const noOp=()=>void 0;const a=new WeakMap;const connectWindow=({name:e})=>{const t={disconnect:noOp,name:e||"",onDisconnect:{addListener:noOp,removeListener:noOp},onMessage:{addListener(e){const wrappedListener=({data:r,source:a})=>{if(a!==window||!(0,s.isResponseMessage)(r))return;e(r,t)};a.set(e,wrappedListener);window.addEventListener("message",wrappedListener)},removeListener(e){const t=a.get(e);window.removeEventListener("message",t);a.delete(e)}},postMessage(e){window.postMessage(e,"*")}};return t};t.injectedRuntime={connect:connectWindow,onConnect:{addListener:noOp,removeListener:noOp}}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/remoteApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeMessengerApi=t.bindObservableChannels=t.bindFactoryMethods=t.bindNestedObjChannels=t.bindMessengerRequestHandler=t.consumeMessengerRemoteApi=t.RemoteApiShutdownError=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/types.js");const a=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");const o=r("../../node_modules/rxjs/dist/esm5/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/errors.js");const l=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const u=r("../../node_modules/uuid/dist/esm-browser/index.js");class RemoteApiShutdownError extends a.CustomError{constructor(e){super(`Remote API with channel '${e}' was shutdown: object can no longer be used.`)}}t.RemoteApiShutdownError=RemoteApiShutdownError;const consumeMethod=({propName:e,errorTypes:t},{messenger:{message$:r,channel:s,postMessage:a,disconnect$:d,connect$:u},logger:f})=>async(...p)=>{const h={messageId:(0,l.newMessageId)(),request:{args:p.map(e=>(0,i.toSerializableObject)(e)),method:e}};const m=await (0,o.firstValueFrom)((0,o.merge)(a(h).pipe((0,o.mergeMap)(()=>o.EMPTY)),r.pipe((0,o.map)(({data:e})=>(0,i.fromSerializableObject)(e,{errorTypes:[...t||[],c.WrongTargetError]})),(0,o.filter)(l.isResponseMessage),(0,o.filter)(({messageId:e})=>e===h.messageId),(0,o.map)(({response:e})=>e),(0,o.filter)(e=>!(e instanceof c.WrongTargetError))),d.pipe((0,o.filter)(e=>0===e.remaining.length),(0,o.tap)(()=>f.warn(`API disconnected before "${e}" resolved. Expecting reconnect.`)),(0,o.switchMap)(()=>u.pipe((0,o.tap)(()=>f.warn(`Reconnected. Waiting for "${e}" response...`)),(0,o.timeout)({first:(0,n.Milliseconds)(1e4),with:()=>(0,o.of)(new RemoteApiShutdownError(s))}),(0,o.mergeMap)(e=>e instanceof RemoteApiShutdownError?(0,o.of)(e):o.EMPTY))))).pipe((0,o.defaultIfEmpty)(new RemoteApiShutdownError(s))));if(m instanceof Error){throw m}return m};const consumeFactory=({method:e,apiProperties:r,errorTypes:s},{logger:a,messenger:o,destructor:n})=>(...d)=>{const c=(0,u.v4)();const f=`${e}-${c}`;const p=o.postMessage({factoryCall:{args:(0,i.toSerializableObject)(d),channel:f,method:e},messageId:(0,l.newMessageId)()}).subscribe();const h=o.deriveChannel(f,{detached:true});const m=(0,t.consumeMessengerRemoteApi)({errorTypes:s,properties:r},{destructor:n,logger:a,messenger:h});n.onGarbageCollected(m,c,()=>{if(h.isShutdown){return}h.postMessage({messageId:(0,l.newMessageId)(),subscribe:false}).subscribe(()=>{p.unsubscribe();h.shutdown()})});return m};const consumeMessengerRemoteApi=({properties:e,errorTypes:r},{logger:a,messenger:n,destructor:d})=>new Proxy({shutdown:n.shutdown},{get(c,u,f){if(u in c)return c[u];const p=e[u];const h=u.toString();if("object"==typeof p)if("propType"in p){switch(p.propType){case s.RemoteApiPropertyType.MethodReturningPromise:return f[u]=consumeMethod({errorTypes:r,options:p.requestOptions,propName:h},{logger:a,messenger:n});case s.RemoteApiPropertyType.ApiFactory:return f[u]=consumeFactory({apiProperties:p.getApiProperties(),errorTypes:r,method:h},{destructor:d,logger:a,messenger:n})}}else{return f[u]=(0,t.consumeMessengerRemoteApi)({errorTypes:r,properties:p},{destructor:d,logger:a,messenger:n.deriveChannel(h)})}else if(p===s.RemoteApiPropertyType.MethodReturningPromise){return f[u]=consumeMethod({errorTypes:r,propName:h},{logger:a,messenger:n})}else if(p===s.RemoteApiPropertyType.HotObservable){const m=n.deriveChannel(h);const v=m.message$.pipe((0,o.map)(({data:e})=>(0,i.fromSerializableObject)(e)));const _=v.pipe((0,o.filter)(l.isCompletionMessage),(0,o.filter)(({subscribe:e})=>!e),(0,o.tap)(({error:e})=>{if(e)throw e}));return f[u]=v.pipe((0,o.takeUntil)(_),(0,o.filter)(l.isEmitMessage),(0,o.map)(({emit:e})=>e),(0,o.shareReplay)(1),(0,o.filter)(l.isNotDisabledApiMsg))}},has(t,r){return r in e}});t.consumeMessengerRemoteApi=consumeMessengerRemoteApi;const bindMessengerRequestHandler=({handler:e},{logger:t,messenger:{message$:r,postMessage:s}})=>{const a=r.subscribe(async({data:r,port:a})=>{if(!(0,l.isRequestMessage)(r))return;let o;try{const n=(0,i.fromSerializableObject)(r.request);o=await e(n,a.sender)}catch(d){t.debug("[MessengerRequestHandler] Error processing message",r,d);o=d instanceof Error?d:new Error("Unknown error")}const c={messageId:r.messageId,response:(0,i.toSerializableObject)(o)};s(c).subscribe()});return{shutdown:()=>a.unsubscribe()}};t.bindMessengerRequestHandler=bindMessengerRequestHandler;const isObject=e=>"object"==typeof e&&null!==e;const hasPropType=(e,t)=>isObject(e)&&e.propType===t;const hasAnyPropType=e=>isObject(e)&&"number"==typeof e.propType;const isRemoteApiMethod=e=>hasPropType(e,s.RemoteApiPropertyType.MethodReturningPromise);const isRemoteApiFactory=e=>hasPropType(e,s.RemoteApiPropertyType.ApiFactory);const bindNestedObjChannels=({api$:e,properties:r},{messenger:s,logger:a})=>{const i=Object.entries(r).filter(([e,t])=>"object"==typeof t&&!hasAnyPropType(t)).map(([i])=>(0,t.exposeMessengerApi)({api$:e.pipe((0,o.tap)(e=>{if(e&&("object"!=typeof e[i]||(0,o.isObservable)(e[i]))){throw new n.NotImplementedError(`Trying to expose non-implemented nested object ${i}`)}}),(0,o.map)(e=>e?e[i]:e)),properties:r[i]},{logger:a,messenger:s.deriveChannel(i)}));return{shutdown:()=>{for(const e of i)e.shutdown()}}};t.bindNestedObjChannels=bindNestedObjChannels;const bindFactoryMethods=({api$:e,properties:r},{messenger:s,logger:a})=>{const n=s.message$.subscribe(async({data:n})=>{if(!(0,l.isFactoryCallMessage)(n))return;const d=r[n.factoryCall.method];if(!isRemoteApiFactory(d)){a.warn(`Invalid or missing property definition for api factory method '${n.factoryCall.method}'`);return}try{const c=(0,i.fromSerializableObject)(n.factoryCall.args);const{method:u,channel:f}=n.factoryCall;const p=s.deriveChannel(f,{detached:true});const h=(0,t.exposeMessengerApi)({api$:e.pipe((0,o.switchMap)(e=>{if(!e)return o.NEVER;const t=e[u];if("function"!=typeof t){a.warn("No api method",u);return o.EMPTY}const r=t.apply(e,c);if((0,i.isPromise)(r)){return(0,o.from)(r)}return(0,o.of)(r)})),properties:d.getApiProperties()},{logger:a,messenger:p});let m=null;const teardown=()=>{null==m?void 0:m.unsubscribe();h.shutdown()};m=p.message$.subscribe(e=>{if((0,l.isCompletionMessage)(e.data))teardown()})}catch(v){a.debug("[bindFactoryMethods] error exposing api",n,v)}});return{shutdown:()=>{n.unsubscribe()}}};t.bindFactoryMethods=bindFactoryMethods;const bindObservableChannels=({api$:e,properties:t},{messenger:r,logger:a})=>{const c=Object.entries(t).filter(([,e])=>e===s.RemoteApiPropertyType.HotObservable).map(([t])=>{const s=new d.TrackerSubject(e.pipe((0,o.tap)(e=>{if(e&&!(0,o.isObservable)(e[t])){throw new n.NotImplementedError(`Trying to expose non-implemented observable ${t}`)}}),(0,o.switchMap)(e=>e?e[t]:(0,o.of)(l.disabledApiMsg))));const c=r.deriveChannel(t);const u=c.connect$.subscribe(e=>{if(s.value!==d.TrackerSubject.NO_VALUE){try{e.postMessage((0,i.toSerializableObject)({emit:s.value,messageId:(0,l.newMessageId)()}))}catch(t){a.warn("Failed to emit initial value, port immediatelly disconnected?",t)}}});const broadcastMessage=e=>c.postMessage({messageId:(0,l.newMessageId)(),...(0,i.toSerializableObject)(e)}).subscribe();const f=s.subscribe({complete:()=>broadcastMessage({subscribe:false}),error:e=>broadcastMessage({error:e,subscribe:false}),next:e=>broadcastMessage({emit:e})});return()=>{s.complete();u.unsubscribe();f.unsubscribe()}});return{shutdown:()=>{for(const e of c)e()}}};t.bindObservableChannels=bindObservableChannels;const exposeMessengerApi=({api$:e,properties:r},a)=>{const i=new d.TrackerSubject((0,o.concat)(e,o.NEVER));const n=(0,t.bindObservableChannels)({api$:i,properties:r},a);const c=(0,t.bindNestedObjChannels)({api$:i,properties:r},a);const l=(0,t.bindFactoryMethods)({api$:i,properties:r},a);const u=(0,t.bindMessengerRequestHandler)({handler:async(e,t)=>{const a=r[e.method];if(void 0===a||a!==s.RemoteApiPropertyType.MethodReturningPromise&&!isRemoteApiMethod(a)){throw new Error(`Attempted to call a method that was not explicitly exposed: ${e.method}`)}const{validate:n=async()=>void 0,transform:d=e=>e}=isRemoteApiMethod(a)?a.requestOptions:{};await n(e,t);const{args:c,method:l}=d(e,t);const u=await (0,o.firstValueFrom)(i.pipe((0,o.filter)(e=>!!e)));const f=l in u&&u[l];if("function"!=typeof f){throw new TypeError(`No such API method: ${l}`)}return f.apply(u,c)}},a);return{shutdown:()=>{i.complete();c.shutdown();l.shutdown();n.shutdown();u.shutdown();a.messenger.shutdown()}}};t.exposeMessengerApi=exposeMessengerApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/runContentScriptMessageProxy.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.runContentScriptMessageProxy=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const runContentScriptMessageProxy=(e,t)=>{const listener=async({data:r,source:o})=>{var i;if(o!==window||!(0,s.isRequestMessage)(r))return;t.debug("[MessageProxy] from window",r);const n=null===(i=e.find(e=>"function"==typeof e[r.request.method]))||void 0===i?void 0:i[r.request.method];if(!n)return;let d;try{d=await n(...r.request.args)}catch(c){d=c}const l={messageId:r.messageId,response:(0,a.toSerializableObject)(d)};window.postMessage(l,o.origin)};window.addEventListener("message",listener);return()=>window.removeEventListener("message",listener)};t.runContentScriptMessageProxy=runContentScriptMessageProxy},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RemoteApiPropertyType=void 0;var r;(function(e){e[e["MethodReturningPromise"]=0]="MethodReturningPromise";e[e["HotObservable"]=1]="HotObservable";e[e["ApiFactory"]=2]="ApiFactory"})(r=t.RemoteApiPropertyType||(t.RemoteApiPropertyType={}))},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/util.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,i,n,d;Object.defineProperty(t,"__esModule",{value:true});t.FinalizationRegistryDestructor=t.isNotDisabledApiMsg=t.disabledApiMsg=t.deriveChannelName=t.newMessageId=t.isEmitMessage=t.isCompletionMessage=t.isResponseMessage=t.isFactoryCallMessage=t.isRequestMessage=t.isFactoryCall=t.isRequest=void 0;const c=r("../../node_modules/uuid/dist/esm-browser/index.js");const isRequestLike=e=>"object"==typeof e&&null!==e&&Array.isArray(e.args)&&"string"==typeof e.method;const isRequest=e=>isRequestLike(e)&&void 0===e.channel;t.isRequest=isRequest;const isFactoryCall=e=>isRequestLike(e)&&"string"==typeof e.channel;t.isFactoryCall=isFactoryCall;const looksLikeMessage=e=>"object"==typeof e&&null!==e&&"string"==typeof e.messageId;const isRequestMessage=e=>looksLikeMessage(e)&&(0,t.isRequest)(e.request);t.isRequestMessage=isRequestMessage;const isFactoryCallMessage=e=>looksLikeMessage(e)&&(0,t.isFactoryCall)(e.factoryCall);t.isFactoryCallMessage=isFactoryCallMessage;const isResponseMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("response");t.isResponseMessage=isResponseMessage;const isCompletionMessage=e=>looksLikeMessage(e)&&"boolean"==typeof e.subscribe;t.isCompletionMessage=isCompletionMessage;const isEmitMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("emit");t.isEmitMessage=isEmitMessage;t.newMessageId=c.v4;const deriveChannelName=(e,t)=>`${e}-${t}`;t.deriveChannelName=deriveChannelName;const isInternalMsg=e=>{return(null==e?void 0:e.remoteApiInternalMsg)!==void 0};t.disabledApiMsg={remoteApiInternalMsg:"apiObjDisabled"};const isNotDisabledApiMsg=e=>!isInternalMsg(e)||e.remoteApiInternalMsg!==t.disabledApiMsg.remoteApiInternalMsg;t.isNotDisabledApiMsg=isNotDisabledApiMsg;class FinalizationRegistryDestructor{onGarbageCollected(e,t,r){this.callbacks.set(t,r);s(this,i,"f").register(e,t)}constructor(e){o.add(this);i.set(this,void 0);n.set(this,void 0);this.callbacks=new Map;a(this,i,new FinalizationRegistry(e=>s(this,o,"m",d).call(this,e)),"f");a(this,n,e,"f")}}t.FinalizationRegistryDestructor=FinalizationRegistryDestructor;i=new WeakMap,n=new WeakMap,o=new WeakSet,d=function _FinalizationRegistryDestructor_callback(e){const t=this.callbacks.get(e);if(!t){return s(this,n,"f").error("heldValue not found in FinalizationRegistryDestructor")}this.callbacks.delete(e);t()}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/consumeObservableWallet.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeObservableWallet=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/util.js");const consumeObservableWallet=({walletName:e},t)=>(0,s.consumeRemoteApi)({baseChannel:(0,a.observableWalletChannel)(e),properties:a.observableWalletProperties},t);t.consumeObservableWallet=consumeObservableWallet},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/exposeObservableWallet.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeObservableWallet=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/util.js");const o=r("../../node_modules/rxjs/dist/esm5/index.js");const exposeObservableWallet=({wallet:e,walletName:t},r)=>(0,s.exposeApi)({api$:(0,o.of)(e),baseChannel:(0,a.observableWalletChannel)(t),properties:a.observableWalletProperties},r);t.exposeObservableWallet=exposeObservableWallet},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/exposeObservableWallet.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/consumeObservableWallet.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/util.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/observableWallet/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.walletRepositoryProperties=t.observableWalletProperties=t.txBuilderProperties=t.outputBuilderProperties=t.observableWalletChannel=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const observableWalletChannel=e=>`${e}$`;t.observableWalletChannel=observableWalletChannel;t.outputBuilderProperties={address:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},asset:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},assets:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},build:s.RemoteApiPropertyType.MethodReturningPromise,coin:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},datum:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},handle:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,value:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory}};t.txBuilderProperties={addDatum:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},addInput:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},addOutput:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},addReferenceInput:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},build:{getApiProperties:()=>({inspect:s.RemoteApiPropertyType.MethodReturningPromise,sign:s.RemoteApiPropertyType.MethodReturningPromise}),propType:s.RemoteApiPropertyType.ApiFactory},buildOutput:{getApiProperties:()=>t.outputBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},delegateFirstStakeCredential:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},delegatePortfolio:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},extraSigners:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,metadata:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},removeOutput:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},setValidityInterval:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},signingOptions:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory}};t.observableWalletProperties={addSignatures:s.RemoteApiPropertyType.MethodReturningPromise,addresses$:s.RemoteApiPropertyType.HotObservable,assetInfo$:s.RemoteApiPropertyType.HotObservable,balance:{rewardAccounts:{deposit$:s.RemoteApiPropertyType.HotObservable,rewards$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}},createTxBuilder:{getApiProperties:()=>t.txBuilderProperties,propType:s.RemoteApiPropertyType.ApiFactory},currentEpoch$:s.RemoteApiPropertyType.HotObservable,delegation:{distribution$:s.RemoteApiPropertyType.HotObservable,portfolio$:s.RemoteApiPropertyType.HotObservable,rewardAccounts$:s.RemoteApiPropertyType.HotObservable,rewardsHistory$:s.RemoteApiPropertyType.HotObservable},discoverAddresses:s.RemoteApiPropertyType.MethodReturningPromise,eraSummaries$:s.RemoteApiPropertyType.HotObservable,finalizeTx:s.RemoteApiPropertyType.MethodReturningPromise,genesisParameters$:s.RemoteApiPropertyType.HotObservable,getName:s.RemoteApiPropertyType.MethodReturningPromise,getNextUnusedAddress:s.RemoteApiPropertyType.MethodReturningPromise,governance:{getPubDRepKey:s.RemoteApiPropertyType.MethodReturningPromise,isRegisteredAsDRep$:s.RemoteApiPropertyType.HotObservable},handles$:s.RemoteApiPropertyType.HotObservable,initializeTx:s.RemoteApiPropertyType.MethodReturningPromise,protocolParameters$:s.RemoteApiPropertyType.HotObservable,publicStakeKeys$:s.RemoteApiPropertyType.HotObservable,signData:s.RemoteApiPropertyType.MethodReturningPromise,submitTx:s.RemoteApiPropertyType.MethodReturningPromise,syncStatus:{isAnyRequestPending$:s.RemoteApiPropertyType.HotObservable,isSettled$:s.RemoteApiPropertyType.HotObservable,isUpToDate$:s.RemoteApiPropertyType.HotObservable},tip$:s.RemoteApiPropertyType.HotObservable,transactions:{history$:s.RemoteApiPropertyType.HotObservable,new$:s.RemoteApiPropertyType.HotObservable,outgoing:{failed$:s.RemoteApiPropertyType.HotObservable,inFlight$:s.RemoteApiPropertyType.HotObservable,onChain$:s.RemoteApiPropertyType.HotObservable,pending$:s.RemoteApiPropertyType.HotObservable,signed$:s.RemoteApiPropertyType.HotObservable,submitting$:s.RemoteApiPropertyType.HotObservable},rollback$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,setUnspendable:s.RemoteApiPropertyType.MethodReturningPromise,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}};t.walletRepositoryProperties={addAccount:s.RemoteApiPropertyType.MethodReturningPromise,addWallet:s.RemoteApiPropertyType.MethodReturningPromise,removeAccount:s.RemoteApiPropertyType.MethodReturningPromise,removeWallet:s.RemoteApiPropertyType.MethodReturningPromise,updateAccountMetadata:s.RemoteApiPropertyType.MethodReturningPromise,updateWalletMetadata:s.RemoteApiPropertyType.MethodReturningPromise,wallets$:s.RemoteApiPropertyType.HotObservable}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/persistentCacheStorage/index.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/persistentCacheStorage/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createPersistentCacheStorage=void 0;var s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/persistentCacheStorage/persistentCacheStorage.js");Object.defineProperty(t,"createPersistentCacheStorage",{enumerable:true,get:function(){return s.createPersistentCacheStorage}})},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/storage/persistentCacheStorage/persistentCacheStorage.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createPersistentCacheStorage=t.makePersistentCacheStorageFactory=t.makeItemKey=t.makeMetadataKey=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=.1;const makeMetadataKey=e=>`${e}-metadata`;t.makeMetadataKey=makeMetadataKey;const makeItemKey=(e,t)=>`${e}-item-${t}`;t.makeItemKey=makeItemKey;const isGetBytesInUsePresent=e=>"getBytesInUse"in e;const makePersistentCacheStorageFactory=e=>({extensionLocalStorage:r,fallbackMaxCollectionItemsGuard:o,resourceName:i,quotaInBytes:n})=>{let d=Promise.resolve();const c=e();const l=(0,t.makeMetadataKey)(i);const getItemKey=e=>(0,t.makeItemKey)(i,e);const getMetadata=async()=>{const e=await r.get(l);return e[l]};const updateMetadata=async e=>{d=d.then(async()=>{const t=await getMetadata();const s=e(t);await r.set({[l]:s})});return d};const updateAccessTime=async e=>{await updateMetadata(t=>({...t,[e]:{accessTime:Date.now()}}))};const isQuotaExceeded=async()=>{const e=await getMetadata();const t=[l,...Object.keys(e)];if(isGetBytesInUsePresent(r)){const s=await r.getBytesInUse(t);return s>n}return t.length>o};const evict=async()=>{const e=await getMetadata();const t=Object.entries(e).map(([e,{accessTime:t}])=>({accessTime:t,key:e})).sort((e,t)=>e.accessTime-t.accessTime).filter((e,t,r)=>{const s=Math.abs(r.length*a);return t<s}).map(e=>e.key);await r.remove(t);await updateMetadata(e=>{for(const r of t)delete e[r];return e})};return{async get(e){const t=getItemKey(e);let a=c.get(t);if(!a){const o=await r.get(t);a=(0,s.fromSerializableObject)(o[t])}if(a)void updateAccessTime(t);return a},async set(e,t){const a=getItemKey(e);c.set(a,t);await r.set({[a]:(0,s.toSerializableObject)(t)});void(async()=>{await updateAccessTime(a);if(await isQuotaExceeded())await evict()})()}}};t.makePersistentCacheStorageFactory=makePersistentCacheStorageFactory;t.createPersistentCacheStorage=(0,t.makePersistentCacheStorageFactory)(()=>new Map)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/consumeSupplyDistributionTracker.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeSupplyDistributionTracker=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/util.js");const consumeSupplyDistributionTracker=({walletName:e},t)=>(0,s.consumeRemoteApi)({baseChannel:(0,a.supplyDistributionTrackerChannel)(e),properties:a.supplyDistributionTrackerProperties},t);t.consumeSupplyDistributionTracker=consumeSupplyDistributionTracker},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/exposeSupplyDistributionTracker.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeSupplyDistributionTracker=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/rxjs/dist/esm5/index.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/util.js");const exposeSupplyDistributionTracker=({supplyDistributionTracker:e,walletName:t},r)=>(0,s.exposeApi)({api$:(0,a.of)(e),baseChannel:(0,o.supplyDistributionTrackerChannel)(t),properties:o.supplyDistributionTrackerProperties},r);t.exposeSupplyDistributionTracker=exposeSupplyDistributionTracker},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/exposeSupplyDistributionTracker.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/consumeSupplyDistributionTracker.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/util.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/supplyDistributionTracker/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.supplyDistributionTrackerProperties=t.supplyDistributionTrackerChannel=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const supplyDistributionTrackerChannel=e=>`${e}SupplyDistributionTracker$`;t.supplyDistributionTrackerChannel=supplyDistributionTrackerChannel;t.supplyDistributionTrackerProperties={lovelaceSupply$:s.RemoteApiPropertyType.HotObservable,stake$:s.RemoteApiPropertyType.HotObservable}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/KeyAgentFactory.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createKeyAgentFactory=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/cjs/index.js");const createKeyAgentFactory=({logger:e,getBip32Ed25519:t})=>({InMemory:async r=>new s.InMemoryKeyAgent(r,{bip32Ed25519:await t(),logger:e}),Ledger:async r=>new a.LedgerKeyAgent(r,{bip32Ed25519:await t(),logger:e}),Trezor:async r=>new o.TrezorKeyAgent(r,{bip32Ed25519:await t(),logger:e})});t.createKeyAgentFactory=createKeyAgentFactory},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/SigningCoordinator.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,n,d,c,l;Object.defineProperty(t,"__esModule",{value:true});t.SigningCoordinator=void 0;const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");const p=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js");const h=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const m=r("../../node_modules/rxjs/dist/esm5/index.js");const v=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class NoRejectError extends f.CustomError{constructor(e){super();this.actualError=e}}const throwMaybeWrappedWithNoRejectError=(e,t)=>{if(null==t?void 0:t.willRetryOnFailure)throw new NoRejectError(e);throw e};const clearPassphrase=e=>{for(let t=0;t<e.length;t++)e[t]=0};const bubbleResolveReject=async(e,t,r)=>{try{const s=await e();t(s);return s}catch(a){if(a instanceof NoRejectError){throw a.actualError}r(a);throw a}};class SigningCoordinator{async signTransaction({tx:e,signContext:t,options:r},s){const a=u.Serialization.Transaction.fromCbor(e);return o(this,i,"m",l).call(this,this.transactionWitnessRequest$,{requestContext:s,signContext:t,transaction:a,walletType:s.wallet.type},e=>{o(this,c,"f").debug("Signing transaction",a.getId());return e.signTransaction(a.body(),t,r)})}async signData(e,t){return o(this,i,"m",l).call(this,this.signDataRequest$,{requestContext:t,signContext:e,walletType:t.wallet.type},t=>t.signCip8Data(e))}constructor(e,{keyAgentFactory:t,logger:r}){i.add(this);this.transactionWitnessRequest$=new m.Subject;this.signDataRequest$=new m.Subject;n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e.hwOptions,"f");a(this,d,t,"f");a(this,c,(0,_.contextLogger)(r,"SigningCoordinator"),"f")}}t.SigningCoordinator=SigningCoordinator;n=new WeakMap,d=new WeakMap,c=new WeakMap,i=new WeakSet,l=function _SigningCoordinator_signRequest(e,t,r){return new Promise((a,i)=>{if(!e.observed){return i(new v.WrongTargetError("Not expecting sign requests at this time"))}const c=t.requestContext.wallet.accounts.find(({accountIndex:e,purpose:r=h.KeyPurpose.STANDARD})=>e===t.requestContext.accountIndex&&t.requestContext.purpose===r);if(!c){return i(new h.errors.ProofGenerationError(`Account not found: index=${t.requestContext.accountIndex}, purpose=${t.requestContext.purpose}`))}const l={...t,reject:async e=>i(new h.errors.AuthenticationError(e))};e.next(t.walletType===p.WalletType.InMemory?{...l,sign:async(e,n)=>bubbleResolveReject(async()=>{const a=t.requestContext.wallet;try{const i=await r(await o(this,d,"f").InMemory({accountIndex:c.accountIndex,chainId:t.requestContext.chainId,encryptedRootPrivateKeyBytes:[...s.from(a.encryptedSecrets.rootPrivateKeyBytes,"hex")],extendedAccountPublicKey:c.extendedAccountPublicKey,getPassphrase:async()=>e,purpose:c.purpose||h.KeyPurpose.STANDARD}));clearPassphrase(e);return i}catch(l){clearPassphrase(e);return throwMaybeWrappedWithNoRejectError(l,n)}},a,i),walletType:t.walletType}:{...l,sign:async()=>bubbleResolveReject(async e=>r(t.walletType===p.WalletType.Ledger?await o(this,d,"f").Ledger({accountIndex:t.requestContext.accountIndex,chainId:t.requestContext.chainId,communicationType:o(this,n,"f").communicationType,extendedAccountPublicKey:c.extendedAccountPublicKey,purpose:c.purpose||h.KeyPurpose.STANDARD}):await o(this,d,"f").Trezor({accountIndex:t.requestContext.accountIndex,chainId:t.requestContext.chainId,extendedAccountPublicKey:c.extendedAccountPublicKey,purpose:c.purpose||h.KeyPurpose.STANDARD,trezorConfig:o(this,n,"f")})).catch(t=>throwMaybeWrappedWithNoRejectError(t,e)),a,i),walletType:t.walletType})})}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/consumeSigningCoordinatorApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.consumeSigningCoordinatorApi=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/util.js");const consumeSigningCoordinatorApi=e=>(0,s.consumeRemoteApi)({baseChannel:a.signingCoordinatorApiChannel,properties:a.signingCoordinatorApiProperties},e);t.consumeSigningCoordinatorApi=consumeSigningCoordinatorApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/exposeSigningCoordinatorApi.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exposeSigningCoordinatorApi=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const a=r("../../node_modules/rxjs/dist/esm5/index.js");const o=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/util.js");const exposeSigningCoordinatorApi=({signingCoordinator:e},t)=>(0,s.exposeApi)({api$:(0,a.of)(e),baseChannel:o.signingCoordinatorApiChannel,properties:o.signingCoordinatorApiProperties},t);t.exposeSigningCoordinatorApi=exposeSigningCoordinatorApi},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/types.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/SigningCoordinator.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/KeyAgentFactory.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/util.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/exposeSigningCoordinatorApi.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/consumeSigningCoordinatorApi.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.signingCoordinatorApiProperties=t.signingCoordinatorApiChannel=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");t.signingCoordinatorApiChannel="signingCoordinator";t.signingCoordinatorApiProperties={signData:s.RemoteApiPropertyType.MethodReturningPromise,signTransaction:s.RemoteApiPropertyType.MethodReturningPromise}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/WalletRepository.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.WalletRepository=void 0;const l=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js");const u=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const f=r("../../node_modules/rxjs/dist/esm5/index.js");const p=r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/errors.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/util.js");const cloneSplice=(e,t,r,...s)=>[...e.slice(0,t),...s,...e.slice(t+r)];const findAccount=(e,t,r,s)=>{const a=e.findIndex(e=>e.walletId===t);const o=e[a];if(!o||o.type===l.WalletType.Script)return;const i=o.accounts.findIndex(e=>{const t=e.purpose||u.KeyPurpose.STANDARD;return e.accountIndex===r&&t===s});if(i<0)return;return{account:o.accounts[i],accountIdx:i,purpose:s,wallet:o,walletIdx:a}};class WalletRepository{async addWallet(e){a(this,i,"f").debug("addWallet",e.type);const t=e.type===l.WalletType.Script?await (0,v.getWalletId)(e.paymentScript):await (()=>{var t;const r=null===(t=e.accounts[0])||void 0===t?void 0:t.extendedAccountPublicKey;if(!r){throw new h.WalletConflictError("New wallet must have at least one account")}return(0,v.getWalletId)(r)})();return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([r,s])=>{if(r.some(e=>e.walletId===t)){throw new h.WalletConflictError(`Wallet '${t}' already exists`)}if(e.type===l.WalletType.Script)a(this,o,"m",c).call(this,r,e.ownSigners);return s.setAll([...r,{...e,walletId:t}])}),(0,f.map)(()=>t)))}addAccount(e){const{walletId:t,accountIndex:r,metadata:s,extendedAccountPublicKey:c}=e;a(this,i,"f").debug("addAccount",t,r,s);const m=e.purpose||u.KeyPurpose.STANDARD;return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([a,o])=>{const i=a.findIndex(e=>e.walletId===t);if(i<0){throw new h.WalletConflictError(`Wallet '${t}' does not exist`)}const n=a[i];if(n.type===l.WalletType.Script){throw new h.WalletConflictError("addAccount for script wallets is not supported")}if(n.accounts.some(e=>{const t=e.purpose||u.KeyPurpose.STANDARD;return e.accountIndex===r&&t===m})){throw new h.WalletConflictError(`Account #${r} with purpose ${m} for wallet '${t}' already exists`)}return o.setAll(cloneSplice(a,i,1,{...n,accounts:[...n.accounts,{accountIndex:r,extendedAccountPublicKey:c,metadata:s,purpose:e.purpose}]})).pipe((0,f.map)(()=>e))})))}updateWalletMetadata(e){const{walletId:t,metadata:r}=e;a(this,i,"f").debug("updateWalletMetadata",t,r);return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([e,s])=>{const a=e.findIndex(e=>e.walletId===t);if(a>=0){return s.setAll(cloneSplice(e,a,1,{...e[a],metadata:r}))}throw new h.WalletConflictError(`Wallet not found: ${t}`)}),(0,f.map)(()=>e)))}updateAccountMetadata(e){const{walletId:t,accountIndex:r,metadata:s}=e;const c=e.purpose||u.KeyPurpose.STANDARD;a(this,i,"f").debug("updateAccountMetadata",t,r,s,c);return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([e,a])=>{const o=findAccount(e,t,r,c);if(!o){throw new h.WalletConflictError(`Account not found: ${t}/${c}/${r}`)}return a.setAll(cloneSplice(e,o.walletIdx,1,{...o.wallet,accounts:cloneSplice(o.wallet.accounts,o.accountIdx,1,{...o.account,metadata:s})}))}),(0,f.map)(()=>e)))}removeAccount(e){const{walletId:t,accountIndex:r,purpose:s}=e;const c=s||u.KeyPurpose.STANDARD;a(this,i,"f").debug("removeAccount",t,r,c);return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([e,s])=>{const a=findAccount(e,t,r,c);if(!a){throw new h.WalletConflictError(`Account '${t}/${c}/${r}' does not exist`)}const o=e.find(e=>e.type===l.WalletType.Script&&e.ownSigners.some(e=>e.walletId===t&&e.accountIndex===r&&e.purpose===c));if(o){throw new h.WalletConflictError(`Wallet '${o.walletId}' depends on account '${t}/${c}/${r}'`)}return s.setAll(cloneSplice(e,a.walletIdx,1,{...a.wallet,accounts:cloneSplice(a.wallet.accounts,a.accountIdx,1)}))}),(0,f.map)(()=>e)))}removeWallet(e){a(this,i,"f").debug("removeWallet",e);return(0,f.firstValueFrom)(a(this,o,"m",d).call(this).pipe((0,f.take)(1),(0,p.blockingWithLatestFrom)(a(this,n,"f")),(0,f.switchMap)(([t,r])=>{const s=t.findIndex(t=>t.walletId===e);if(s<0){throw new h.WalletConflictError(`Wallet '${e}' does not exist`)}const a=t.find(t=>t.type===l.WalletType.Script&&t.ownSigners.some(t=>t.walletId===e));if(a){throw new h.WalletConflictError(`Wallet '${a.walletId}' depends on wallet '${e}'`)}return r.setAll(cloneSplice(t,s,1))}),(0,f.map)(()=>e)))}constructor({logger:e,store$:t}){o.add(this);i.set(this,void 0);n.set(this,void 0);s(this,n,new p.TrackerSubject((0,f.concat)(t,f.NEVER)),"f");s(this,i,(0,m.contextLogger)(e,"WalletRepository"),"f");this.wallets$=(0,f.defer)(()=>a(this,n,"f").pipe((0,f.mergeMap)(e=>e.observeAll()))).pipe((0,f.shareReplay)(1))}}t.WalletRepository=WalletRepository;i=new WeakMap,n=new WeakMap,o=new WeakSet,d=function _WalletRepository_getWallets(){return this.wallets$.pipe((0,f.take)(1))},c=function _WalletRepository_validateOwnSigners(e,t){for(const r of t)if(!e.some(e=>e.walletId===r.walletId&&e.type!==l.WalletType.Script&&e.accounts.some(e=>e.accountIndex===r.accountIndex))){throw new h.WalletConflictError(`Wallet or account does not exist: ${r.walletId}/${r.accountIndex}`)}}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/types.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/WalletRepository.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WalletConflictError=void 0;const s=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WalletConflictError extends s.CustomError{}t.WalletConflictError=WalletConflictError},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/walletManager.types.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/util.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/walletManager.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/WalletRepository/index.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/SigningCoordinator/index.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/errors.js"),t);a(r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js"),t)},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WalletType=void 0;var r;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor";e["Script"]="Script"})(r=t.WalletType||(t.WalletType={}))},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/util.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.buildNativeScriptWitnesser=t.buildBip32Witnesser=t.getWalletId=t.getKeyAgentWalletId=t.getExtendedAccountPublicKeyWalletId=t.getScriptWalletId=t.walletManagerProperties=t.repositoryChannel=t.walletChannel=t.walletManagerChannel=void 0;const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/messaging/index.js");const f=r("../../node_modules/rxjs/dist/esm5/index.js");const p="Only native scripts of types: RequireAllOf, RequireAnyOf and RequireNOf are supported by this script witnesser";const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>n.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const isBip32Wallet=e=>e.type===c.WalletType.InMemory||e.type===c.WalletType.Ledger||e.type===c.WalletType.Trezor;const mergeArrays=(e,t,r)=>{const s=new Set(e.map(r));const a=[...e];for(const o of t){const i=r(o);if(!s.has(i)){a.push(o);s.add(i)}}return a};const mergeWitnesses=(e,t)=>{if(!t){if(!e.signatures)e.signatures=new Map;return e}var r,s;const a=new Map([...null!==(r=e.signatures)&&void 0!==r?r:[],...null!==(s=t.signatures)&&void 0!==s?s:[]]);const o=mergeArrays(e.redeemers||[],t.redeemers||[],e=>l.Serialization.Redeemer.fromCore(e).toCbor());const i=mergeArrays(e.scripts||[],t.scripts||[],e=>l.Serialization.Script.fromCore(e).toCbor());const n=mergeArrays(e.bootstrap||[],t.bootstrap||[],e=>l.Serialization.BootstrapWitness.fromCore(e).toCbor());const d=mergeArrays(e.datums||[],t.datums||[],e=>l.Serialization.PlutusData.fromCore(e).toCbor());return{bootstrap:n,datums:d,redeemers:o,scripts:i,signatures:a}};const isScriptSupported=e=>{if(!l.Cardano.isNativeScript(e))return false;switch(e.kind){case l.Cardano.NativeScriptKind.RequireAllOf:case l.Cardano.NativeScriptKind.RequireAnyOf:case l.Cardano.NativeScriptKind.RequireNOf:return true;default:return false}};const getTxWithStubWitness=async(e,t,r,s,a)=>{const o=n.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const i=e.withdrawals&&e.withdrawals.length>0?r.scripts.length:0;const d=t.scripts.length;const c=i+d+((null==s?void 0:s.length)||0);const l=new Map;for(let u=0;u<c;++u)l.set(randomPublicKey(),o);const f=mergeWitnesses({scripts:[],signatures:new Map},a);f.signatures=new Map([...f.signatures?f.signatures.entries():[],...l.entries()]);var p;f.scripts=[...null!==(p=f.scripts)&&void 0!==p?p:[],t,r];return f};const requiresStakingWitness=(e,t,r)=>{var s;const a=l.Serialization.NativeScript.fromCore(t).hash();const o=l.Cardano.RewardAccount.fromCredential({hash:a,type:l.Cardano.CredentialType.ScriptHash},r);var i;const n=null!==(i=e.withdrawals())&&void 0!==i?i:new Map;var d;const c=(null!==(d=null===(s=e.certs())||void 0===s?void 0:s.values())&&void 0!==d?d:[]).map(e=>e.toCore());if(n.size>0&&n.has(e=>e===o))return true;for(const u of c){switch(u.__typename){case l.Cardano.CertificateType.VoteDelegation:case l.Cardano.CertificateType.StakeVoteDelegation:case l.Cardano.CertificateType.StakeRegistrationDelegation:case l.Cardano.CertificateType.VoteRegistrationDelegation:case l.Cardano.CertificateType.StakeVoteRegistrationDelegation:case l.Cardano.CertificateType.Registration:case l.Cardano.CertificateType.Unregistration:case l.Cardano.CertificateType.StakeDeregistration:case l.Cardano.CertificateType.StakeDelegation:if(u.stakeCredential.type===l.Cardano.CredentialType.ScriptHash&&a===u.stakeCredential.hash)return true}}return false};const walletManagerChannel=e=>`${e}-wallet-manager`;t.walletManagerChannel=walletManagerChannel;const walletChannel=e=>`${(0,t.walletManagerChannel)(e)}-wallet`;t.walletChannel=walletChannel;const repositoryChannel=e=>`${e}-wallet-repository`;t.repositoryChannel=repositoryChannel;t.walletManagerProperties={activate:u.RemoteApiPropertyType.MethodReturningPromise,activeWalletId$:u.RemoteApiPropertyType.HotObservable,deactivate:u.RemoteApiPropertyType.MethodReturningPromise,destroyData:u.RemoteApiPropertyType.MethodReturningPromise,switchNetwork:u.RemoteApiPropertyType.MethodReturningPromise};const isScript=e=>{return(null==e?void 0:e.__type)===l.Cardano.ScriptType.Plutus||(null==e?void 0:e.__type)===l.Cardano.ScriptType.Native};const isBip32PublicKeyHex=e=>"string"==typeof e&&128===e.length&&/^[\da-f]+$/i.test(e);const getScriptWalletId=async e=>l.Serialization.Script.fromCore(e).hash().slice(0,32);t.getScriptWalletId=getScriptWalletId;const getExtendedAccountPublicKeyWalletId=async e=>n.blake2b(n.blake2b.BYTES_MIN).update(s.from(e,"hex")).digest("hex");t.getExtendedAccountPublicKeyWalletId=getExtendedAccountPublicKeyWalletId;const getKeyAgentWalletId=async e=>(0,t.getExtendedAccountPublicKeyWalletId)(await e.getExtendedAccountPublicKey());t.getKeyAgentWalletId=getKeyAgentWalletId;const getWalletId=async e=>{if(isScript(e))return(0,t.getScriptWalletId)(e);if(isBip32PublicKeyHex(e))return(0,t.getExtendedAccountPublicKeyWalletId)(e);return(0,t.getKeyAgentWalletId)(e)};t.getWalletId=getWalletId;const createScriptWitness=async(e,t,r,s,a,o,i)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(p);const n=e.ownSigners.map(e=>e.paymentScriptKeyPath);const d=e.ownSigners.map(e=>e.stakingScriptKeyPath);const c=requiresStakingWitness(a.body(),e.stakingScript,t.networkId);const l=[...n,...c?d:[]];const u=await (0,f.firstValueFrom)(s.wallets$);let h;for(const m of e.ownSigners){const v=u.find(e=>e.walletId===m.walletId);if(!v)throw new Error(`Wallet with id ${m.walletId} not found`);if(!isBip32Wallet(v))throw new Error("Only Bip32 wallets are supported");var _;const y=await r.signTransaction({options:{...i,additionalKeyPaths:[...null!==(_=null==i?void 0:i.additionalKeyPaths)&&void 0!==_?_:[],...l]},signContext:o,tx:a.toCbor()},{accountIndex:m.accountIndex,chainId:t,purpose:m.purpose,wallet:v});h=[...h?h.entries():[],...y.entries()]}return{scripts:[e.paymentScript,...c?[e.stakingScript]:[]],signatures:h?new Map(h):new Map}};const buildBip32Witnesser=(e,t,r,s,a)=>{return{signData:async t=>await s.signData(t,{accountIndex:a,chainId:r,purpose:d.KeyPurpose.STANDARD,wallet:e}),async witness(t,o,i){var n,c;const u=t.toCore();const f=t.getId();const p=(null==i?void 0:i.stubSign)!==void 0&&i.stubSign?await d.util.stubSignTransaction({context:o,signTransactionOptions:i,txBody:u.body}):await s.signTransaction({options:i,signContext:o,tx:t.toCbor()},{accountIndex:a,chainId:r,purpose:d.KeyPurpose.STANDARD,wallet:e});const h={auxiliaryData:u.auxiliaryData,body:u.body,id:f,isValid:t.isValid(),witness:{...u.witness,signatures:new Map([...p.entries(),...(null===(n=u.witness)||void 0===n?void 0:null===(c=n.signatures)||void 0===c?void 0:c.entries())||[]])}};var m;return{cbor:l.Serialization.TxCBOR.serialize(h),context:{handleResolutions:null!==(m=o.handleResolutions)&&void 0!==m?m:[]},tx:h}}}};t.buildBip32Witnesser=buildBip32Witnesser;const buildNativeScriptWitnesser=(e,t,r,s,a)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(p);return{signData:async()=>{throw new Error("signData is not supported by this witnesser")},async witness(t,o,i){if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(p);let n;const d=t.toCore();const c=t.getId();if((null==i?void 0:i.stubSign)!==void 0&&i.stubSign)n=await getTxWithStubWitness(d.body,e.paymentScript,e.stakingScript,null==i?void 0:i.extraSigners);else{n=await createScriptWitness(e,r,s,a,new l.Serialization.Transaction(l.Serialization.TransactionBody.fromCore(d.body),new l.Serialization.TransactionWitnessSet),o,i);const u=new Map;if(null==i?void 0:i.extraSigners){for(const f of null==i?void 0:i.extraSigners){const h=await f.sign(t.body());u.set(h.pubKey,h.signature)}}n.signatures=new Map([...n.signatures?n.signatures.entries():[],...u.entries()])}const m={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:t.isValid(),witness:mergeWitnesses(d.witness,n)};var v;return{cbor:l.Serialization.TxCBOR.serialize(m),context:{handleResolutions:null!==(v=o.handleResolutions)&&void 0!==v?v:[]},tx:m}}}};t.buildNativeScriptWitnesser=buildNativeScriptWitnesser},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/walletManager.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,i,n,d,c,l,u,f,p,h,m,v,_,y,w,g,b;Object.defineProperty(t,"__esModule",{value:true});t.WalletManager=t.getWalletStoreId=void 0;const P=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/types.js");const S=r("../../node_modules/rxjs/dist/esm5/index.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const T=r("../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/util.js");const k=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const isAnyBip32Wallet=e=>e.type===P.WalletType.InMemory||e.type===P.WalletType.Ledger||e.type===P.WalletType.Trezor;const getWalletStoreId=(e,t,r)=>{if(void 0!==r&&0!==r){return`${t.networkId}-${t.networkMagic}-${e}-${r}`}return`${t.networkId}-${t.networkMagic}-${e}`};t.getWalletStoreId=getWalletStoreId;class WalletManager{switchNetwork(e){if(!a(this,o,"m",w).call(this))return Promise.resolve();const t={...a(this,i,"f"),chainId:e};return this.activate(t)}async initialize(){await (0,k.ready)();const{[a(this,p,"f")]:e}=await a(this,h,"f").get(a(this,p,"f"));if(!e){this.activeWalletId$.next(null);return}return this.activate(e)}async activate(e,r){if(!r&&a(this,o,"m",m).call(this,e)){return}const{walletId:n,chainId:c,accountIndex:u}=e;const f=await (0,S.firstValueFrom)(a(this,l,"f").wallets$);const _=f.find(e=>e.walletId===n);if(!_){throw new C.InvalidArgumentError("walletId",`Wallet ${n} not found`)}a(this,o,"m",y).call(this);s(this,i,e,"f");const w=(0,t.getWalletStoreId)(n,c,u);const g=await a(this,o,"m",v).call(this,w);const P=a(this,o,"m",b).call(this,_,n,c,u);const[T]=await Promise.all([a(this,d,"f").create(e,_,{stores:g,witnesser:P}),a(this,h,"f").set({[a(this,p,"f")]:e})]);this.activeWallet$.next({observableWallet:T,props:e});this.activeWalletId$.next(e)}async deactivate(){a(this,o,"m",y).call(this);await a(this,h,"f").remove(a(this,p,"f"));this.activeWalletId$.next(null)}shutdown(){a(this,o,"m",y).call(this)}async destroyData(e,t){await a(this,o,"m",_).call(this,e,t)}constructor({name:e},{walletFactory:t,storesFactory:r,logger:a,managerStorage:m,walletRepository:v,signingCoordinatorApi:_}){o.add(this);this.activeWalletId$=new S.ReplaySubject(1);this.activeWallet$=new S.BehaviorSubject(null);i.set(this,null);n.set(this,new Map);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);p.set(this,void 0);h.set(this,void 0);s(this,l,v,"f");s(this,d,t,"f");s(this,p,`${e}-active-wallet`,"f");s(this,h,m,"f");s(this,c,r,"f");s(this,f,a,"f");s(this,u,_,"f")}}t.WalletManager=WalletManager;i=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,o=new WeakSet,m=function _WalletManager_isActive(e){var t,r,s;if(!a(this,i,"f"))return false;return(null===(t=a(this,i,"f"))||void 0===t?void 0:t.walletId)===e.walletId&&(null===(r=a(this,i,"f"))||void 0===r?void 0:r.accountIndex)===e.accountIndex&&(0,C.deepEquals)(null===(s=a(this,i,"f"))||void 0===s?void 0:s.chainId,e.chainId)},v=async function _WalletManager_getStores(e){let t=a(this,n,"f").get(e);if(!t){t=await a(this,c,"f").create({name:e});a(this,n,"f").set(e,t)}return t},_=async function _WalletManager_destroyWalletStores(e,r){var s;if((null===(s=a(this,i,"f"))||void 0===s?void 0:s.walletId)===e)throw new C.InvalidArgumentError("walletId","Cannot destroy active wallet");const d=await (0,S.firstValueFrom)(a(this,l,"f").wallets$);const c=d.flatMap(e=>{if(isAnyBip32Wallet(e)){return e.accounts.map(s=>(0,t.getWalletStoreId)(e.walletId,r,s.accountIndex))}return(0,t.getWalletStoreId)(e.walletId,r)}).filter(t=>t.includes(e));if(!c||0===c.length)return;for(const u of c){const p=await a(this,o,"m",v).call(this,u);a(this,f,"f").debug(`Destroying wallet store ${u}`);await (0,S.lastValueFrom)(p.destroy(),{defaultValue:null});a(this,n,"f").delete(u)}},y=function _WalletManager_deactivateWallet(){var e;const t=null===(e=this.activeWallet$)||void 0===e?void 0:e.getValue();a(this,o,"m",g).call(this);null==t?void 0:t.observableWallet.shutdown();s(this,i,null,"f")},w=function _WalletManager_hasActiveWallet(){return null!==a(this,i,"f")},g=function _WalletManager_stopEmittingFromActiveWallet(){a(this,o,"m",w).call(this)&&this.activeWallet$.next(null)},b=function _WalletManager_buildWitnesser(e,t,r,s){let o;switch(e.type){case P.WalletType.InMemory:case P.WalletType.Ledger:case P.WalletType.Trezor:o=(0,T.buildBip32Witnesser)(e,t,r,a(this,u,"f"),s);break;case P.WalletType.Script:default:o=(0,T.buildNativeScriptWitnesser)(e,t,r,a(this,u,"f"),a(this,l,"f"))}return o}},"../../node_modules/@cardano-sdk/web-extension/dist/cjs/walletManager/walletManager.types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js":(e,t,r)=>{"use strict";r.d(t,{createBackgroundMessenger:()=>createBackgroundMessenger,generalizeBackgroundMessenger:()=>generalizeBackgroundMessenger});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/bufferCount.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/pairwise.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var v=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var _=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createBackgroundMessenger=({logger:e,runtime:t})=>{const r=new Map;const getChannel=e=>{let t=r.get(e);if(!t)r.set(e,t={message$:new s.ReplaySubject(1),ports$:new a.BehaviorSubject(new Set)});return t};const onPortMessage=(t,s)=>{e.debug(`[BackgroundMessenger(${s.name})] message`,t);const{message$:a}=r.get(s.name);a.next({data:t,port:s})};const onPortDisconnected=s=>{if(t.lastError)e.warn(`[BackgroundMessenger(${s.name})] Last runtime error`,t.lastError);s.onMessage.removeListener(onPortMessage);s.onDisconnect.removeListener(onPortDisconnected);const{ports$:a}=r.get(s.name);const o=new Set(a.value);o.delete(s);a.next(o);e.debug(`[BackgroundMessenger(${s.name})] disconnected`,s)};const onConnect=t=>{const{ports$:r}=getChannel(t.name);const s=new Set(r.value);s.add(t);t.onMessage.addListener(onPortMessage);t.onDisconnect.addListener(onPortDisconnected);r.next(s);e.debug(`[BackgroundMessenger(${t.name})] connected`)};t.onConnect.addListener(onConnect);return{getChannel,shutdown(){for(const s of[...r.keys()])this.shutdownChannel(s);t.onConnect.removeListener(onConnect);e.warn("[BackgroundMessenger] shutdown")},shutdownChannel(e){const t=r.get(e);if(!t)return;t.message$.complete();for(const s of t.ports$.value)s.disconnect();r.delete(e)}}};const generalizeBackgroundMessenger=(e,t,r)=>({channel:e,connect$:t.getChannel(e).ports$.pipe((0,o.bufferCount)(2,1),(0,i.mergeMap)(([e,t])=>{const r=[...t].filter(t=>!e.has(t));return(0,n.from)(r)})),deriveChannel(s){return generalizeBackgroundMessenger((0,v.deriveChannelName)(e,s),t,r)},disconnect$:t.getChannel(e).ports$.pipe((0,d.pairwise)(),(0,c.filter)(([e,t])=>e.size>t.size),(0,l.map)(([e,t])=>({disconnected:[...e].find(e=>!t.has(e)),remaining:[...t]}))),isShutdown:false,message$:t.getChannel(e).message$,postMessage:s=>{const{ports$:a}=t.getChannel(e);return a.pipe((0,c.filter)(e=>e.size>0),(0,u.first)(),(0,f.tap)(e=>{for(const t of e)t.postMessage(s)}),(0,_.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof p.EmptyError)}),(0,l.map)(()=>void 0),(0,h.catchError)(()=>{r.warn("Couldn't postMessage: messenger shutdown");return(0,m.of)(void 0)}))},shutdown(){t.shutdownChannel(e);this.isShutdown=true}})},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/NonBackgroundMessenger.js":(e,t,r)=>{"use strict";r.d(t,{createNonBackgroundMessenger:()=>createNonBackgroundMessenger});var s=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var m=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var v=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var _=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createNonBackgroundMessenger=({baseChannel:e,reconnectConfig:{initialDelay:t,maxDelay:r}={initialDelay:10,maxDelay:1e3}},{logger:y,runtime:w})=>{let g;let b=t;let P=false;const S=new s.Subject;const C=new a.BehaviorSubject(null);const T=new o.ReplaySubject(1);const connect=()=>{if("string"==typeof C.value||C.value)return;const t=w.connect({name:e});C.next(t);t.onDisconnect.addListener(onDisconnect);t.onMessage.addListener(onMessage)};const reconnect=()=>{clearTimeout(g);b=Math.min(Math.pow(b,2),r);g=setTimeout(connect,b)};const onMessage=(r,s)=>{y.debug(`[NonBackgroundMessenger(${e})] message`,r);b=t;T.next({data:r,port:s})};const onDisconnect=t=>{if(w.lastError)y.warn(`[NonBackgroundMessenger(${e})] Last runtime error`,w.lastError);S.next({disconnected:t,remaining:[]});y.debug(`[NonBackgroundMessenger(${e})] disconnected`);t.onMessage.removeListener(onMessage);t.onDisconnect.removeListener(onDisconnect);C.next(P?"shutdown":null);if(!P)reconnect()};connect();const k=C.pipe((0,i.debounceTime)(10),(0,n.filter)(v.isNotNil),(0,d.takeWhile)(e=>"string"!=typeof e));const A=new Set;return{channel:e,connect$:k,deriveChannel(s,{detached:a}={}){const o=createNonBackgroundMessenger({baseChannel:(0,m.deriveChannelName)(e,s),reconnectConfig:{initialDelay:t,maxDelay:r}},{logger:y,runtime:w});if(!a)A.add(o);return o},disconnect$:S,get isShutdown(){return P},message$:T,postMessage(e){return k.pipe((0,c.first)(),(0,l.tap)(t=>t.postMessage(e)),(0,_.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof u.EmptyError)}),(0,f.map)(()=>void 0),(0,p.catchError)(()=>{y.warn("Couldn't postMessage: messenger shutdown");return(0,h.of)(void 0)}))},shutdown(){P=true;const t=C.value;if("string"!=typeof t)null==t?void 0:t.disconnect();clearTimeout(g);for(const r of A.values()){r.shutdown();A.delete(r)}C.complete();S.complete();y.debug(`[NonBackgroundMessenger(${e})] shutdown`)}}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/errors.js":(e,t,r)=>{"use strict";r.d(t,{WrongTargetError:()=>WrongTargetError});var s=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WrongTargetError extends s.CustomError{}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js":(e,t,r)=>{"use strict";r.d(t,{consumeRemoteApi:()=>u,exposeApi:()=>l});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js");var a=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var o=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/remoteApi.js");var i=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/NonBackgroundMessenger.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");const d=(0,n.isBackgroundProcess)();const c=(()=>{let e=null;return t=>e||(e=(0,s.createBackgroundMessenger)(t))})();const _backgroundExposeApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,c(t),t.logger);return(0,o.exposeMessengerApi)(e,{messenger:r,...t})};const _nonBackgroundExposeApi=(e,t)=>(0,o.exposeMessengerApi)(e,{messenger:(0,i.createNonBackgroundMessenger)(e,t),...t});const _nonBackgroundConsumeRemoteApi=(e,t)=>(0,o.consumeMessengerRemoteApi)(e,{destructor:new a.FinalizationRegistryDestructor(t.logger),messenger:(0,i.createNonBackgroundMessenger)(e,t),...t});const _backgroundConsumeRemoteApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,c(t),t.logger);return(0,o.consumeMessengerRemoteApi)(e,{destructor:new a.FinalizationRegistryDestructor(t.logger),messenger:r,...t})};const l=d?_backgroundExposeApi:_nonBackgroundExposeApi;const u=d?_backgroundConsumeRemoteApi:_nonBackgroundConsumeRemoteApi},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/remoteApi.js":(e,t,r)=>{"use strict";r.d(t,{consumeMessengerRemoteApi:()=>consumeMessengerRemoteApi,exposeMessengerApi:()=>exposeMessengerApi});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var a=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");var o=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/util/isObservable.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var P=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var S=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var k=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var A=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/errors.js");var E=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var j=r("../../node_modules/uuid/dist/esm-browser/v4.js");class RemoteApiShutdownError extends a.CustomError{constructor(e){super(`Remote API with channel '${e}' was shutdown: object can no longer be used.`)}}const consumeMethod=({propName:e,errorTypes:t},{messenger:{message$:r,channel:s,postMessage:a,disconnect$:v,connect$:_},logger:y})=>async(...w)=>{const g={messageId:(0,E.newMessageId)(),request:{args:w.map(e=>(0,P.toSerializableObject)(e)),method:e}};const b=await (0,o.firstValueFrom)((0,i.merge)(a(g).pipe((0,n.mergeMap)(()=>d.EMPTY)),r.pipe((0,c.map)(({data:e})=>(0,P.fromSerializableObject)(e,{errorTypes:[...t||[],A.WrongTargetError]})),(0,l.filter)(E.isResponseMessage),(0,l.filter)(({messageId:e})=>e===g.messageId),(0,c.map)(({response:e})=>e),(0,l.filter)(e=>!(e instanceof A.WrongTargetError))),v.pipe((0,l.filter)(e=>0===e.remaining.length),(0,u.tap)(()=>y.warn(`API disconnected before "${e}" resolved. Expecting reconnect.`)),(0,f.switchMap)(()=>_.pipe((0,u.tap)(()=>y.warn(`Reconnected. Waiting for "${e}" response...`)),(0,p.timeout)({first:(0,C.Milliseconds)(1e4),with:()=>(0,h.of)(new RemoteApiShutdownError(s))}),(0,n.mergeMap)(e=>e instanceof RemoteApiShutdownError?(0,h.of)(e):d.EMPTY))))).pipe((0,m.defaultIfEmpty)(new RemoteApiShutdownError(s))));if(b instanceof Error){throw b}return b};const consumeFactory=({method:e,apiProperties:t,errorTypes:r},{logger:s,messenger:a,destructor:o})=>(...i)=>{const n=(0,j["default"])();const d=`${e}-${n}`;const c=a.postMessage({factoryCall:{args:(0,P.toSerializableObject)(i),channel:d,method:e},messageId:(0,E.newMessageId)()}).subscribe();const l=a.deriveChannel(d,{detached:true});const u=consumeMessengerRemoteApi({errorTypes:r,properties:t},{destructor:o,logger:s,messenger:l});o.onGarbageCollected(u,n,()=>{if(l.isShutdown){return}l.postMessage({messageId:(0,E.newMessageId)(),subscribe:false}).subscribe(()=>{c.unsubscribe();l.shutdown()})});return u};const consumeMessengerRemoteApi=({properties:e,errorTypes:t},{logger:r,messenger:a,destructor:o})=>new Proxy({shutdown:a.shutdown},{get(i,n,d){if(n in i)return i[n];const f=e[n];const p=n.toString();if("object"==typeof f)if("propType"in f){switch(f.propType){case s.RemoteApiPropertyType.MethodReturningPromise:return d[n]=consumeMethod({errorTypes:t,options:f.requestOptions,propName:p},{logger:r,messenger:a});case s.RemoteApiPropertyType.ApiFactory:return d[n]=consumeFactory({apiProperties:f.getApiProperties(),errorTypes:t,method:p},{destructor:o,logger:r,messenger:a})}}else{return d[n]=consumeMessengerRemoteApi({errorTypes:t,properties:f},{destructor:o,logger:r,messenger:a.deriveChannel(p)})}else if(f===s.RemoteApiPropertyType.MethodReturningPromise){return d[n]=consumeMethod({errorTypes:t,propName:p},{logger:r,messenger:a})}else if(f===s.RemoteApiPropertyType.HotObservable){const h=a.deriveChannel(p);const m=h.message$.pipe((0,c.map)(({data:e})=>(0,P.fromSerializableObject)(e)));const y=m.pipe((0,l.filter)(E.isCompletionMessage),(0,l.filter)(({subscribe:e})=>!e),(0,u.tap)(({error:e})=>{if(e)throw e}));return d[n]=m.pipe((0,v.takeUntil)(y),(0,l.filter)(E.isEmitMessage),(0,c.map)(({emit:e})=>e),(0,_.shareReplay)(1),(0,l.filter)(E.isNotDisabledApiMsg))}},has(t,r){return r in e}});const bindMessengerRequestHandler=({handler:e},{logger:t,messenger:{message$:r,postMessage:s}})=>{const a=r.subscribe(async({data:r,port:a})=>{if(!(0,E.isRequestMessage)(r))return;let o;try{const i=(0,P.fromSerializableObject)(r.request);o=await e(i,a.sender)}catch(n){t.debug("[MessengerRequestHandler] Error processing message",r,n);o=n instanceof Error?n:new Error("Unknown error")}const d={messageId:r.messageId,response:(0,P.toSerializableObject)(o)};s(d).subscribe()});return{shutdown:()=>a.unsubscribe()}};const isObject=e=>"object"==typeof e&&null!==e;const hasPropType=(e,t)=>isObject(e)&&e.propType===t;const hasAnyPropType=e=>isObject(e)&&"number"==typeof e.propType;const isRemoteApiMethod=e=>hasPropType(e,s.RemoteApiPropertyType.MethodReturningPromise);const isRemoteApiFactory=e=>hasPropType(e,s.RemoteApiPropertyType.ApiFactory);const bindNestedObjChannels=({api$:e,properties:t},{messenger:r,logger:s})=>{const a=Object.entries(t).filter(([e,t])=>"object"==typeof t&&!hasAnyPropType(t)).map(([a])=>exposeMessengerApi({api$:e.pipe((0,u.tap)(e=>{if(e&&("object"!=typeof e[a]||(0,y.isObservable)(e[a]))){throw new T.NotImplementedError(`Trying to expose non-implemented nested object ${a}`)}}),(0,c.map)(e=>e?e[a]:e)),properties:t[a]},{logger:s,messenger:r.deriveChannel(a)}));return{shutdown:()=>{for(const e of a)e.shutdown()}}};const bindFactoryMethods=({api$:e,properties:t},{messenger:r,logger:s})=>{const a=r.message$.subscribe(async({data:a})=>{if(!(0,E.isFactoryCallMessage)(a))return;const o=t[a.factoryCall.method];if(!isRemoteApiFactory(o)){s.warn(`Invalid or missing property definition for api factory method '${a.factoryCall.method}'`);return}try{const i=(0,P.fromSerializableObject)(a.factoryCall.args);const{method:n,channel:c}=a.factoryCall;const l=r.deriveChannel(c,{detached:true});const u=exposeMessengerApi({api$:e.pipe((0,f.switchMap)(e=>{if(!e)return w.NEVER;const t=e[n];if("function"!=typeof t){s.warn("No api method",n);return d.EMPTY}const r=t.apply(e,i);if((0,S.isPromise)(r)){return(0,g.from)(r)}return(0,h.of)(r)})),properties:o.getApiProperties()},{logger:s,messenger:l});let p=null;const teardown=()=>{null==p?void 0:p.unsubscribe();u.shutdown()};p=l.message$.subscribe(e=>{if((0,E.isCompletionMessage)(e.data))teardown()})}catch(m){s.debug("[bindFactoryMethods] error exposing api",a,m)}});return{shutdown:()=>{a.unsubscribe()}}};const bindObservableChannels=({api$:e,properties:t},{messenger:r,logger:a})=>{const o=Object.entries(t).filter(([,e])=>e===s.RemoteApiPropertyType.HotObservable).map(([t])=>{const s=new k.TrackerSubject(e.pipe((0,u.tap)(e=>{if(e&&!(0,y.isObservable)(e[t])){throw new T.NotImplementedError(`Trying to expose non-implemented observable ${t}`)}}),(0,f.switchMap)(e=>e?e[t]:(0,h.of)(E.disabledApiMsg))));const o=r.deriveChannel(t);const i=o.connect$.subscribe(e=>{if(s.value!==k.TrackerSubject.NO_VALUE){try{e.postMessage((0,P.toSerializableObject)({emit:s.value,messageId:(0,E.newMessageId)()}))}catch(t){a.warn("Failed to emit initial value, port immediatelly disconnected?",t)}}});const broadcastMessage=e=>o.postMessage({messageId:(0,E.newMessageId)(),...(0,P.toSerializableObject)(e)}).subscribe();const n=s.subscribe({complete:()=>broadcastMessage({subscribe:false}),error:e=>broadcastMessage({error:e,subscribe:false}),next:e=>broadcastMessage({emit:e})});return()=>{s.complete();i.unsubscribe();n.unsubscribe()}});return{shutdown:()=>{for(const e of o)e()}}};const exposeMessengerApi=({api$:e,properties:t},r)=>{const a=new k.TrackerSubject((0,b.concat)(e,w.NEVER));const i=bindObservableChannels({api$:a,properties:t},r);const n=bindNestedObjChannels({api$:a,properties:t},r);const d=bindFactoryMethods({api$:a,properties:t},r);const c=bindMessengerRequestHandler({handler:async(e,r)=>{const i=t[e.method];if(void 0===i||i!==s.RemoteApiPropertyType.MethodReturningPromise&&!isRemoteApiMethod(i)){throw new Error(`Attempted to call a method that was not explicitly exposed: ${e.method}`)}const{validate:n=async()=>void 0,transform:d=e=>e}=isRemoteApiMethod(i)?i.requestOptions:{};await n(e,r);const{args:c,method:u}=d(e,r);const f=await (0,o.firstValueFrom)(a.pipe((0,l.filter)(e=>!!e)));const p=u in f&&f[u];if("function"!=typeof p){throw new TypeError(`No such API method: ${u}`)}return p.apply(f,c)}},r);return{shutdown:()=>{a.complete();n.shutdown();d.shutdown();i.shutdown();c.shutdown();r.messenger.shutdown()}}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js":(e,t,r)=>{"use strict";r.d(t,{RemoteApiPropertyType:()=>s});var s;(function(e){e[e["MethodReturningPromise"]=0]="MethodReturningPromise";e[e["HotObservable"]=1]="HotObservable";e[e["ApiFactory"]=2]="ApiFactory"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js":(e,t,r)=>{"use strict";r.d(t,{FinalizationRegistryDestructor:()=>FinalizationRegistryDestructor,deriveChannelName:()=>deriveChannelName,disabledApiMsg:()=>c,isCompletionMessage:()=>isCompletionMessage,isEmitMessage:()=>isEmitMessage,isFactoryCallMessage:()=>isFactoryCallMessage,isNotDisabledApiMsg:()=>isNotDisabledApiMsg,isRequestMessage:()=>isRequestMessage,isResponseMessage:()=>isResponseMessage,newMessageId:()=>d});var s=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a,o,i,n;const isRequestLike=e=>"object"==typeof e&&null!==e&&Array.isArray(e.args)&&"string"==typeof e.method;const isRequest=e=>isRequestLike(e)&&void 0===e.channel;const isFactoryCall=e=>isRequestLike(e)&&"string"==typeof e.channel;const looksLikeMessage=e=>"object"==typeof e&&null!==e&&"string"==typeof e.messageId;const isRequestMessage=e=>looksLikeMessage(e)&&isRequest(e.request);const isFactoryCallMessage=e=>looksLikeMessage(e)&&isFactoryCall(e.factoryCall);const isResponseMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("response");const isCompletionMessage=e=>looksLikeMessage(e)&&"boolean"==typeof e.subscribe;const isEmitMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("emit");const d=s["default"];const deriveChannelName=(e,t)=>`${e}-${t}`;const isInternalMsg=e=>{return(null==e?void 0:e.remoteApiInternalMsg)!==void 0};const c={remoteApiInternalMsg:"apiObjDisabled"};const isNotDisabledApiMsg=e=>!isInternalMsg(e)||e.remoteApiInternalMsg!==c.remoteApiInternalMsg;class FinalizationRegistryDestructor{onGarbageCollected(e,t,r){this.callbacks.set(t,r);__classPrivateFieldGet(this,o,"f").register(e,t)}constructor(e){a.add(this);o.set(this,void 0);i.set(this,void 0);this.callbacks=new Map;__classPrivateFieldSet(this,o,new FinalizationRegistry(e=>__classPrivateFieldGet(this,a,"m",n).call(this,e)),"f");__classPrivateFieldSet(this,i,e,"f")}}o=new WeakMap,i=new WeakMap,a=new WeakSet,n=function _FinalizationRegistryDestructor_callback(e){const t=this.callbacks.get(e);if(!t){return __classPrivateFieldGet(this,i,"f").error("heldValue not found in FinalizationRegistryDestructor")}this.callbacks.delete(e);t()}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/observableWallet/util.js":(e,t,r)=>{"use strict";r.d(t,{observableWalletProperties:()=>i,walletRepositoryProperties:()=>n});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const observableWalletChannel=e=>`${e}$`;const a={address:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},asset:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},assets:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},build:s.RemoteApiPropertyType.MethodReturningPromise,coin:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},datum:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},handle:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,value:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory}};const o={addDatum:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},addInput:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},addOutput:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},addReferenceInput:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},build:{getApiProperties:()=>({inspect:s.RemoteApiPropertyType.MethodReturningPromise,sign:s.RemoteApiPropertyType.MethodReturningPromise}),propType:s.RemoteApiPropertyType.ApiFactory},buildOutput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},delegateFirstStakeCredential:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},delegatePortfolio:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},extraSigners:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,metadata:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},removeOutput:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},setValidityInterval:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},signingOptions:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory}};const i={addSignatures:s.RemoteApiPropertyType.MethodReturningPromise,addresses$:s.RemoteApiPropertyType.HotObservable,assetInfo$:s.RemoteApiPropertyType.HotObservable,balance:{rewardAccounts:{deposit$:s.RemoteApiPropertyType.HotObservable,rewards$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}},createTxBuilder:{getApiProperties:()=>o,propType:s.RemoteApiPropertyType.ApiFactory},currentEpoch$:s.RemoteApiPropertyType.HotObservable,delegation:{distribution$:s.RemoteApiPropertyType.HotObservable,portfolio$:s.RemoteApiPropertyType.HotObservable,rewardAccounts$:s.RemoteApiPropertyType.HotObservable,rewardsHistory$:s.RemoteApiPropertyType.HotObservable},discoverAddresses:s.RemoteApiPropertyType.MethodReturningPromise,eraSummaries$:s.RemoteApiPropertyType.HotObservable,finalizeTx:s.RemoteApiPropertyType.MethodReturningPromise,genesisParameters$:s.RemoteApiPropertyType.HotObservable,getName:s.RemoteApiPropertyType.MethodReturningPromise,getNextUnusedAddress:s.RemoteApiPropertyType.MethodReturningPromise,governance:{getPubDRepKey:s.RemoteApiPropertyType.MethodReturningPromise,isRegisteredAsDRep$:s.RemoteApiPropertyType.HotObservable},handles$:s.RemoteApiPropertyType.HotObservable,initializeTx:s.RemoteApiPropertyType.MethodReturningPromise,protocolParameters$:s.RemoteApiPropertyType.HotObservable,publicStakeKeys$:s.RemoteApiPropertyType.HotObservable,signData:s.RemoteApiPropertyType.MethodReturningPromise,submitTx:s.RemoteApiPropertyType.MethodReturningPromise,syncStatus:{isAnyRequestPending$:s.RemoteApiPropertyType.HotObservable,isSettled$:s.RemoteApiPropertyType.HotObservable,isUpToDate$:s.RemoteApiPropertyType.HotObservable},tip$:s.RemoteApiPropertyType.HotObservable,transactions:{history$:s.RemoteApiPropertyType.HotObservable,new$:s.RemoteApiPropertyType.HotObservable,outgoing:{failed$:s.RemoteApiPropertyType.HotObservable,inFlight$:s.RemoteApiPropertyType.HotObservable,onChain$:s.RemoteApiPropertyType.HotObservable,pending$:s.RemoteApiPropertyType.HotObservable,signed$:s.RemoteApiPropertyType.HotObservable,submitting$:s.RemoteApiPropertyType.HotObservable},rollback$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,setUnspendable:s.RemoteApiPropertyType.MethodReturningPromise,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}};const n={addAccount:s.RemoteApiPropertyType.MethodReturningPromise,addWallet:s.RemoteApiPropertyType.MethodReturningPromise,removeAccount:s.RemoteApiPropertyType.MethodReturningPromise,removeWallet:s.RemoteApiPropertyType.MethodReturningPromise,updateAccountMetadata:s.RemoteApiPropertyType.MethodReturningPromise,updateWalletMetadata:s.RemoteApiPropertyType.MethodReturningPromise,wallets$:s.RemoteApiPropertyType.HotObservable}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/storage/persistentCacheStorage/persistentCacheStorage.js":(e,t,r)=>{"use strict";r.d(t,{createPersistentCacheStorage:()=>o});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");const a=.1;const makeMetadataKey=e=>`${e}-metadata`;const makeItemKey=(e,t)=>`${e}-item-${t}`;const isGetBytesInUsePresent=e=>"getBytesInUse"in e;const makePersistentCacheStorageFactory=e=>({extensionLocalStorage:t,fallbackMaxCollectionItemsGuard:r,resourceName:o,quotaInBytes:i})=>{let n=Promise.resolve();const d=e();const c=makeMetadataKey(o);const getItemKey=e=>makeItemKey(o,e);const getMetadata=async()=>{const e=await t.get(c);return e[c]};const updateMetadata=async e=>{n=n.then(async()=>{const r=await getMetadata();const s=e(r);await t.set({[c]:s})});return n};const updateAccessTime=async e=>{await updateMetadata(t=>({...t,[e]:{accessTime:Date.now()}}))};const isQuotaExceeded=async()=>{const e=await getMetadata();const s=[c,...Object.keys(e)];if(isGetBytesInUsePresent(t)){const a=await t.getBytesInUse(s);return a>i}return s.length>r};const evict=async()=>{const e=await getMetadata();const r=Object.entries(e).map(([e,{accessTime:t}])=>({accessTime:t,key:e})).sort((e,t)=>e.accessTime-t.accessTime).filter((e,t,r)=>{const s=Math.abs(r.length*a);return t<s}).map(e=>e.key);await t.remove(r);await updateMetadata(e=>{for(const t of r)delete e[t];return e})};return{async get(e){const r=getItemKey(e);let a=d.get(r);if(!a){const o=await t.get(r);a=(0,s.fromSerializableObject)(o[r])}if(a)void updateAccessTime(r);return a},async set(e,r){const a=getItemKey(e);d.set(a,r);await t.set({[a]:(0,s.toSerializableObject)(r)});void(async()=>{await updateAccessTime(a);if(await isQuotaExceeded())await evict()})()}}};const o=makePersistentCacheStorageFactory(()=>new Map)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/SigningCoordinator/KeyAgentFactory.js":(e,t,r)=>{"use strict";r.d(t,{createKeyAgentFactory:()=>createKeyAgentFactory});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js");const createKeyAgentFactory=({logger:e,getBip32Ed25519:t})=>({InMemory:async r=>new s.InMemoryKeyAgent(r,{bip32Ed25519:await t(),logger:e}),Ledger:async r=>new a.LedgerKeyAgent(r,{bip32Ed25519:await t(),logger:e}),Trezor:async r=>new o.TrezorKeyAgent(r,{bip32Ed25519:await t(),logger:e})})},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/SigningCoordinator/SigningCoordinator.js":(e,t,r)=>{"use strict";r.d(t,{SigningCoordinator:()=>SigningCoordinator});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");var o=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/ProofGenerationError.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var l=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,h,m,v,_;class NoRejectError extends a.CustomError{constructor(e){super();this.actualError=e}}const throwMaybeWrappedWithNoRejectError=(e,t)=>{if(null==t?void 0:t.willRetryOnFailure)throw new NoRejectError(e);throw e};const clearPassphrase=e=>{for(let t=0;t<e.length;t++)e[t]=0};const bubbleResolveReject=async(e,t,r)=>{try{const s=await e();t(s);return s}catch(a){if(a instanceof NoRejectError){throw a.actualError}r(a);throw a}};class SigningCoordinator{async signTransaction({tx:e,signContext:t,options:r},a){const o=s.Transaction.fromCbor(e);return __classPrivateFieldGet(this,p,"m",_).call(this,this.transactionWitnessRequest$,{requestContext:a,signContext:t,transaction:o,walletType:a.wallet.type},e=>{__classPrivateFieldGet(this,v,"f").debug("Signing transaction",o.getId());return e.signTransaction(o.body(),t,r)})}async signData(e,t){return __classPrivateFieldGet(this,p,"m",_).call(this,this.signDataRequest$,{requestContext:t,signContext:e,walletType:t.wallet.type},t=>t.signCip8Data(e))}constructor(e,{keyAgentFactory:t,logger:r}){p.add(this);this.transactionWitnessRequest$=new c.Subject;this.signDataRequest$=new c.Subject;h.set(this,void 0);m.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e.hwOptions,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,v,(0,u.contextLogger)(r,"SigningCoordinator"),"f")}}h=new WeakMap,m=new WeakMap,v=new WeakMap,p=new WeakSet,_=function _SigningCoordinator_signRequest(e,t,r){return new Promise((s,a)=>{if(!e.observed){return a(new l.WrongTargetError("Not expecting sign requests at this time"))}const c=t.requestContext.wallet.accounts.find(({accountIndex:e,purpose:r=i.KeyPurpose.STANDARD})=>e===t.requestContext.accountIndex&&t.requestContext.purpose===r);if(!c){return a(new n.ProofGenerationError(`Account not found: index=${t.requestContext.accountIndex}, purpose=${t.requestContext.purpose}`))}const u={...t,reject:async e=>a(new d.AuthenticationError(e))};e.next(t.walletType===o.WalletType.InMemory?{...u,sign:async(e,o)=>bubbleResolveReject(async()=>{const s=t.requestContext.wallet;try{const a=await r(await __classPrivateFieldGet(this,m,"f").InMemory({accountIndex:c.accountIndex,chainId:t.requestContext.chainId,encryptedRootPrivateKeyBytes:[...f.from(s.encryptedSecrets.rootPrivateKeyBytes,"hex")],extendedAccountPublicKey:c.extendedAccountPublicKey,getPassphrase:async()=>e,purpose:c.purpose||i.KeyPurpose.STANDARD}));clearPassphrase(e);return a}catch(n){clearPassphrase(e);return throwMaybeWrappedWithNoRejectError(n,o)}},s,a),walletType:t.walletType}:{...u,sign:async()=>bubbleResolveReject(async e=>r(t.walletType===o.WalletType.Ledger?await __classPrivateFieldGet(this,m,"f").Ledger({accountIndex:t.requestContext.accountIndex,chainId:t.requestContext.chainId,communicationType:__classPrivateFieldGet(this,h,"f").communicationType,extendedAccountPublicKey:c.extendedAccountPublicKey,purpose:c.purpose||i.KeyPurpose.STANDARD}):await __classPrivateFieldGet(this,m,"f").Trezor({accountIndex:t.requestContext.accountIndex,chainId:t.requestContext.chainId,extendedAccountPublicKey:c.extendedAccountPublicKey,purpose:c.purpose||i.KeyPurpose.STANDARD,trezorConfig:__classPrivateFieldGet(this,h,"f")})).catch(t=>throwMaybeWrappedWithNoRejectError(t,e)),s,a),walletType:t.walletType})})}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/SigningCoordinator/exposeSigningCoordinatorApi.js":(e,t,r)=>{"use strict";r.d(t,{exposeSigningCoordinatorApi:()=>exposeSigningCoordinatorApi});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var o=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const i="signingCoordinator";const n={signData:o.RemoteApiPropertyType.MethodReturningPromise,signTransaction:o.RemoteApiPropertyType.MethodReturningPromise};const exposeSigningCoordinatorApi=({signingCoordinator:e},t)=>(0,s.exposeApi)({api$:(0,a.of)(e),baseChannel:i,properties:n},t)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/errors.js":(e,t,r)=>{"use strict";r.d(t,{WalletConflictError:()=>WalletConflictError});var s=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WalletConflictError extends s.CustomError{}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js":(e,t,r)=>{"use strict";r.d(t,{WalletType:()=>s});var s;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor";e["Script"]="Script"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js":(e,t,r)=>{"use strict";r.d(t,{repositoryChannel:()=>repositoryChannel,walletChannel:()=>walletChannel,walletManagerChannel:()=>walletManagerChannel,walletManagerProperties:()=>i});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const o="Only native scripts of types: RequireAllOf, RequireAnyOf and RequireNOf are supported by this script witnesser";const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>Crypto.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const isBip32Wallet=e=>e.type===WalletType.InMemory||e.type===WalletType.Ledger||e.type===WalletType.Trezor;const mergeArrays=(e,t,r)=>{const s=new Set(e.map(r));const a=[...e];for(const o of t){const i=r(o);if(!s.has(i)){a.push(o);s.add(i)}}return a};const mergeWitnesses=(e,t)=>{if(!t){if(!e.signatures)e.signatures=new Map;return e}var r,s;const a=new Map([...null!==(r=e.signatures)&&void 0!==r?r:[],...null!==(s=t.signatures)&&void 0!==s?s:[]]);const o=mergeArrays(e.redeemers||[],t.redeemers||[],e=>Serialization.Redeemer.fromCore(e).toCbor());const i=mergeArrays(e.scripts||[],t.scripts||[],e=>Serialization.Script.fromCore(e).toCbor());const n=mergeArrays(e.bootstrap||[],t.bootstrap||[],e=>Serialization.BootstrapWitness.fromCore(e).toCbor());const d=mergeArrays(e.datums||[],t.datums||[],e=>Serialization.PlutusData.fromCore(e).toCbor());return{bootstrap:n,datums:d,redeemers:o,scripts:i,signatures:a}};const isScriptSupported=e=>{if(!Cardano.isNativeScript(e))return false;switch(e.kind){case Cardano.NativeScriptKind.RequireAllOf:case Cardano.NativeScriptKind.RequireAnyOf:case Cardano.NativeScriptKind.RequireNOf:return true;default:return false}};const getTxWithStubWitness=async(e,t,r,s,a)=>{const o=Crypto.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const i=e.withdrawals&&e.withdrawals.length>0?r.scripts.length:0;const n=t.scripts.length;const d=i+n+((null==s?void 0:s.length)||0);const c=new Map;for(let l=0;l<d;++l)c.set(randomPublicKey(),o);const u=mergeWitnesses({scripts:[],signatures:new Map},a);u.signatures=new Map([...u.signatures?u.signatures.entries():[],...c.entries()]);var f;u.scripts=[...null!==(f=u.scripts)&&void 0!==f?f:[],t,r];return u};const requiresStakingWitness=(e,t,r)=>{var s;const a=Serialization.NativeScript.fromCore(t).hash();const o=Cardano.RewardAccount.fromCredential({hash:a,type:Cardano.CredentialType.ScriptHash},r);var i;const n=null!==(i=e.withdrawals())&&void 0!==i?i:new Map;var d;const c=(null!==(d=null===(s=e.certs())||void 0===s?void 0:s.values())&&void 0!==d?d:[]).map(e=>e.toCore());if(n.size>0&&n.has(e=>e===o))return true;for(const l of c){switch(l.__typename){case Cardano.CertificateType.VoteDelegation:case Cardano.CertificateType.StakeVoteDelegation:case Cardano.CertificateType.StakeRegistrationDelegation:case Cardano.CertificateType.VoteRegistrationDelegation:case Cardano.CertificateType.StakeVoteRegistrationDelegation:case Cardano.CertificateType.Registration:case Cardano.CertificateType.Unregistration:case Cardano.CertificateType.StakeDeregistration:case Cardano.CertificateType.StakeDelegation:if(l.stakeCredential.type===Cardano.CredentialType.ScriptHash&&a===l.stakeCredential.hash)return true}}return false};const walletManagerChannel=e=>`${e}-wallet-manager`;const walletChannel=e=>`${walletManagerChannel(e)}-wallet`;const repositoryChannel=e=>`${e}-wallet-repository`;const i={activate:s.RemoteApiPropertyType.MethodReturningPromise,activeWalletId$:s.RemoteApiPropertyType.HotObservable,deactivate:s.RemoteApiPropertyType.MethodReturningPromise,destroyData:s.RemoteApiPropertyType.MethodReturningPromise,switchNetwork:s.RemoteApiPropertyType.MethodReturningPromise};const isScript=e=>{return(null==e?void 0:e.__type)===Cardano.ScriptType.Plutus||(null==e?void 0:e.__type)===Cardano.ScriptType.Native};const isBip32PublicKeyHex=e=>"string"==typeof e&&128===e.length&&/^[\da-f]+$/i.test(e);const getScriptWalletId=async e=>Serialization.Script.fromCore(e).hash().slice(0,32);const getExtendedAccountPublicKeyWalletId=async e=>Crypto.blake2b(Crypto.blake2b.BYTES_MIN).update(a.from(e,"hex")).digest("hex");const getKeyAgentWalletId=async e=>getExtendedAccountPublicKeyWalletId(await e.getExtendedAccountPublicKey());const getWalletId=async e=>{if(isScript(e))return getScriptWalletId(e);if(isBip32PublicKeyHex(e))return getExtendedAccountPublicKeyWalletId(e);return getKeyAgentWalletId(e)};const createScriptWitness=async(e,t,r,s,a,i,n)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(o);const d=e.ownSigners.map(e=>e.paymentScriptKeyPath);const c=e.ownSigners.map(e=>e.stakingScriptKeyPath);const l=requiresStakingWitness(a.body(),e.stakingScript,t.networkId);const u=[...d,...l?c:[]];const f=await firstValueFrom(s.wallets$);let p;for(const h of e.ownSigners){const m=f.find(e=>e.walletId===h.walletId);if(!m)throw new Error(`Wallet with id ${h.walletId} not found`);if(!isBip32Wallet(m))throw new Error("Only Bip32 wallets are supported");var v;const _=await r.signTransaction({options:{...n,additionalKeyPaths:[...null!==(v=null==n?void 0:n.additionalKeyPaths)&&void 0!==v?v:[],...u]},signContext:i,tx:a.toCbor()},{accountIndex:h.accountIndex,chainId:t,purpose:h.purpose,wallet:m});p=[...p?p.entries():[],..._.entries()]}return{scripts:[e.paymentScript,...l?[e.stakingScript]:[]],signatures:p?new Map(p):new Map}};const buildBip32Witnesser=(e,t,r,s,a)=>{return{signData:async t=>await s.signData(t,{accountIndex:a,chainId:r,purpose:KeyPurpose.STANDARD,wallet:e}),async witness(t,o,i){var n,d;const c=t.toCore();const l=t.getId();const u=(null==i?void 0:i.stubSign)!==void 0&&i.stubSign?await keyManagementUtil.stubSignTransaction({context:o,signTransactionOptions:i,txBody:c.body}):await s.signTransaction({options:i,signContext:o,tx:t.toCbor()},{accountIndex:a,chainId:r,purpose:KeyPurpose.STANDARD,wallet:e});const f={auxiliaryData:c.auxiliaryData,body:c.body,id:l,isValid:t.isValid(),witness:{...c.witness,signatures:new Map([...u.entries(),...(null===(n=c.witness)||void 0===n?void 0:null===(d=n.signatures)||void 0===d?void 0:d.entries())||[]])}};var p;return{cbor:Serialization.TxCBOR.serialize(f),context:{handleResolutions:null!==(p=o.handleResolutions)&&void 0!==p?p:[]},tx:f}}}};const buildNativeScriptWitnesser=(e,t,r,s,a)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(o);return{signData:async()=>{throw new Error("signData is not supported by this witnesser")},async witness(t,i,n){if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(o);let d;const c=t.toCore();const l=t.getId();if((null==n?void 0:n.stubSign)!==void 0&&n.stubSign)d=await getTxWithStubWitness(c.body,e.paymentScript,e.stakingScript,null==n?void 0:n.extraSigners);else{d=await createScriptWitness(e,r,s,a,new Serialization.Transaction(Serialization.TransactionBody.fromCore(c.body),new Serialization.TransactionWitnessSet),i,n);const u=new Map;if(null==n?void 0:n.extraSigners){for(const f of null==n?void 0:n.extraSigners){const p=await f.sign(t.body());u.set(p.pubKey,p.signature)}}d.signatures=new Map([...d.signatures?d.signatures.entries():[],...u.entries()])}const h={auxiliaryData:c.auxiliaryData,body:c.body,id:l,isValid:t.isValid(),witness:mergeWitnesses(c.witness,d)};var m;return{cbor:Serialization.TxCBOR.serialize(h),context:{handleResolutions:null!==(m=i.handleResolutions)&&void 0!==m?m:[]},tx:h}}}}},"../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),o=0,r=0;r<s;r++){for(var i=arguments[r],n=0,d=i.length;n<d;n++,o++)a[o]=i[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/call-bind/callBound.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/get-intrinsic/index.js");var a=r("../../node_modules/call-bind/index.js");var o=a(s("String.prototype.indexOf"));e.exports=function callBoundIntrinsic(e,t){var r=s(e,!!t);if("function"==typeof r&&o(e,".prototype.")>-1){return a(r)}return r}},"../../node_modules/call-bind/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/function-bind/index.js");var a=r("../../node_modules/get-intrinsic/index.js");var o=a("%Function.prototype.apply%");var i=a("%Function.prototype.call%");var n=a("%Reflect.apply%",true)||s.call(i,o);var d=a("%Object.getOwnPropertyDescriptor%",true);var c=a("%Object.defineProperty%",true);var l=a("%Math.max%");if(c){try{c({},"a",{value:1})}catch(u){c=null}}e.exports=function callBind(e){var t=n(s,i,arguments);if(d&&c){var r=d(t,"length");if(r.configurable)c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var applyBind=function applyBind(){return n(s,o,arguments)};if(c)c(e.exports,"apply",{value:applyBind});else e.exports.apply=applyBind}}]);
//# sourceMappingURL=614.js.map