(self["webpackChunk_lace_browser_extension_wallet"]=self["webpackChunk_lace_browser_extension_wallet"]||[]).push([[171],{"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/AssetInfoProvider/BlockfrostAssetProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostAssetProvider:()=>BlockfrostAssetProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var n=r("../../node_modules/lodash/omit.js");class BlockfrostAssetProvider extends i.BlockfrostProvider{mapNftMetadata(e){var t,r,a,i;const n=this.metadatumToString((null===(t=e.onchain_metadata)||void 0===t?void 0:t.image)||(null===(r=e.metadata)||void 0===r?void 0:r.logo));const d=(null===(a=e.onchain_metadata)||void 0===a?void 0:a.name)||(null===(i=e.metadata)||void 0===i?void 0:i.name);if(!n||!d)return null;try{var c,l,u,f;return{description:this.metadatumToString((null===(c=e.onchain_metadata)||void 0===c?void 0:c.description)||(null===(l=e.metadata)||void 0===l?void 0:l.description)),files:Array.isArray(null===(u=e.onchain_metadata)||void 0===u?void 0:u.files)?e.onchain_metadata.files.map(e=>{const t=e.mediaType;const r=e.name;const a=this.metadatumToString(e.src);if(!a||!t)return null;try{return{mediaType:s.MediaType(t),name:r,otherProperties:this.mapFileMetadataOtherProperties(e),src:s.Uri(a)}}catch(i){this.logger.warn("Failed to parse onchain_metadata file",e,i);return null}}).filter(o.isNotNil):void 0,image:s.Uri(n),mediaType:(null===(f=e.onchain_metadata)||void 0===f?void 0:f.mediaType)?s.ImageMediaType(e.onchain_metadata.mediaType):void 0,name:d,otherProperties:this.mapNftMetadataOtherProperties(e.onchain_metadata),version:this.mapNftMetadataVersion(e.onchain_metadata)}}catch(h){this.logger.warn("Failed to parse nft metadata",e,h);return null}}metadatumToString(e){let t;if(Array.isArray(e)){const r=e.map(e=>this.asString(e)).filter(o.isNotNil);t=r.join("")}else{t=this.asString(e)}return t}objToMetadatum(e){if("string"==typeof e)return e;if("number"==typeof e)return BigInt(e);if("object"==typeof e){if(null===e)return"";if(Array.isArray(e)){return e.map(e=>this.objToMetadatum(e))}return new Map(Object.entries(e).map(([e,t])=>[e,this.objToMetadatum(t)]))}return""}mapNftMetadataVersion(e){return"string"==typeof(null==e?void 0:e.version)?e.version:"1.0"}mapFileMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","mediaType","src"])}mapNftMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","image","description","mediaType","files","version"])}mapOtherProperties(e,t){if(!e){return}const r=Object.entries(n(e,t));if(0===r.length)return;return new Map(r.map(([e,t])=>[e,this.objToMetadatum(t)]))}mapTokenMetadata(e,t){var r,s,a,i,o,n,d,c,l;return{assetId:e,decimals:(null===(r=t.metadata)||void 0===r?void 0:r.decimals)||void 0,desc:this.metadatumToString((null===(s=t.metadata)||void 0===s?void 0:s.description)||(null===(a=t.onchain_metadata)||void 0===a?void 0:a.description)),icon:this.metadatumToString((null===(i=t.metadata)||void 0===i?void 0:i.logo)||(null===(o=t.onchain_metadata)||void 0===o?void 0:o.image)),name:(null===(n=t.metadata)||void 0===n?void 0:n.name)||(null===(d=t.onchain_metadata)||void 0===d?void 0:d.name),ticker:(null===(c=t.metadata)||void 0===c?void 0:c.ticker)||void 0,url:(null===(l=t.metadata)||void 0===l?void 0:l.url)||void 0,version:"1.0"}}async getAsset({assetId:e,extraData:t}){try{const r=await this.request(`assets/${e.toString()}`);const s=a.AssetId.getAssetName(e);const i=a.PolicyId(r.policy_id);const o=BigInt(r.quantity);return{assetId:e,fingerprint:a.AssetFingerprint(r.fingerprint),name:s,nftMetadata:(null==t?void 0:t.nftMetadata)?this.mapNftMetadata(r):null,policyId:i,quantity:o,supply:o,tokenMetadata:(null==t?void 0:t.tokenMetadata)?this.mapTokenMetadata(e,r):null}}catch(n){this.logger.error("getAsset failed",e,t);throw this.toProviderError(n)}}getAssets({assetIds:e,extraData:t}){return Promise.all(e.map(e=>this.getAsset({assetId:e,extraData:t})))}constructor(e,t){super(e,t);this.asString=e=>"string"==typeof e?e:void 0}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/ChainHistoryProvider/BlockfrostChainHistoryProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostChainHistoryProvider:()=>BlockfrostChainHistoryProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var y=r("../../node_modules/lodash/omit.js");var _=r("../../node_modules/lodash/uniq.js");var w=r("../../node_modules/buffer/index.js")["Buffer"];const g=2147483647;const compareTx=(e,t)=>e.block_height-t.block_height||e.tx_index-t.tx_index;class BlockfrostChainHistoryProvider extends s.BlockfrostProvider{async fetchRedeemers({hash:e,redeemer_count:t}){if(!t)return;return this.request(`txs/${e}/redeemers`).then(e=>e.map(({purpose:e,script_hash:t,unit_mem:r,unit_steps:s,tx_index:a})=>({data:w.from(t),executionUnits:{memory:Number.parseInt(r),steps:Number.parseInt(s)},index:a,purpose:(()=>{switch(e){case"cert":return o.RedeemerPurpose.certificate;case"reward":return o.RedeemerPurpose.withdrawal;case"mint":return o.RedeemerPurpose.mint;case"spend":return o.RedeemerPurpose.spend;default:return e}})()})))}async fetchWithdrawals({withdrawal_count:e,hash:t}){if(!e)return;return this.request(`txs/${t}/withdrawals`).then(e=>e.map(({address:e,amount:t})=>({quantity:BigInt(t),stakeAddress:n.RewardAccount(e)})))}gatherMintsFromUtxos({asset_mint_or_burn_count:e},{inputs:t,outputs:r}){if(!e)return;const s=r.flatMap(e=>e.amount);const a=t.flatMap(e=>e.amount);const i=s.filter(e=>!a.some(t=>e.unit===t.unit));return new Map(i.map(e=>[d.AssetId(e.unit),BigInt(e.quantity)]))}async fetchPoolRetireCerts(e){return this.request(`txs/${e}/pool_retires`).then(e=>e.map(({pool_id:e,retiring_epoch:t,cert_index:r})=>({__typename:c.CertificateType.PoolRetirement,cert_index:r,epoch:l.EpochNo(t),poolId:u.PoolId(e)})))}async fetchPoolUpdateCerts(e){return this.request(`txs/${e}/pool_updates`).then(e=>e.map(({pool_id:e,cert_index:t,fixed_cost:r,margin_cost:s,pledge:a,reward_account:i,vrf_key:o})=>({__typename:c.CertificateType.PoolRegistration,cert_index:t,poolId:u.PoolId(e),poolParameters:{cost:BigInt(r),id:e,margin:f.FractionUtils.toFraction(s),owners:[],pledge:BigInt(a),relays:[],rewardAccount:i,vrf:o}})))}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){return this.fetchCBOR(e).then(t=>{const r=h.Transaction.fromCbor(h.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null})}async fetchMirCerts(e){return this.request(`txs/${e}/mirs`).then(e=>e.map(({address:e,amount:t,cert_index:r,pot:s})=>({__typename:c.CertificateType.MIR,cert_index:r,kind:c.MirCertificateKind.ToStakeCreds,pot:"reserve"===s?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,quantity:BigInt(t),rewardAccount:n.RewardAccount(e)})))}async fetchStakeCerts(e){return this.request(`txs/${e}/stakes`).then(e=>e.map(({address:e,cert_index:t,registration:r})=>({__typename:r?c.CertificateType.StakeRegistration:c.CertificateType.StakeDeregistration,cert_index:t,stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:m.CredentialType.KeyHash}})))}async fetchDelegationCerts(e){return this.request(`txs/${e}/delegations`).then(e=>e.map(({address:e,pool_id:t,cert_index:r})=>({__typename:c.CertificateType.StakeDelegation,cert_index:r,poolId:u.PoolId(t),stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:m.CredentialType.KeyHash}})))}async fetchCertificates({pool_retire_count:e,pool_update_count:t,mir_cert_count:r,stake_cert_count:s,delegation_count:a,hash:i}){if(e+t+r+s+a===0)return;return Promise.all([e?this.fetchPoolRetireCerts(i):[],t?this.fetchPoolUpdateCerts(i):[],r?this.fetchMirCerts(i):[],s?this.fetchStakeCerts(i):[],a?this.fetchDelegationCerts(i):[]]).then(e=>e.flat().sort((e,t)=>t.cert_index-e.cert_index).map(e=>e))}async fetchJsonMetadataAsAuxiliaryData(e){const t=void 0;return this.request(`txs/${e}/metadata`).then(e=>{const r=(0,a.blockfrostMetadataToTxMetadata)(e);return r&&r.size>0?{blob:r}:t}).catch(e=>{if((0,a.isBlockfrostNotFoundError)(e)){return t}throw e})}async fetchEpochNo(e){const t=await this.networkInfoProvider.eraSummaries().then(p.createSlotEpochCalc);return t(e)}async fetchEpochParameters(e){return await this.request(`epochs/${e}/parameters`)}async processCertificates(e,t){if(!t)return;const r=await this.fetchEpochNo(l.Slot(e.slot));const{pool_deposit:s,key_deposit:a}=await this.fetchEpochParameters(r);return t.map(t=>{const r=y(t,"cert_index");switch(r.__typename){case c.CertificateType.PoolRegistration:{r.poolParameters.owners=[];r.poolParameters.relays=[];const i=void 0===e.deposit||""===e.deposit||"0"===e.deposit?0n:BigInt(s);delete r.poolParameters.metadataJson;return{...r,deposit:i}}case c.CertificateType.StakeRegistration:{const o=BigInt(a);return{...r,__typename:c.CertificateType.Registration,deposit:o}}case c.CertificateType.StakeDeregistration:{const n=BigInt(a);return{...r,__typename:c.CertificateType.Unregistration,deposit:n}}default:return r}})}async transactionDetailsUsingAPIs(e){const t=o.TransactionId(e.hash);const[r,s,a,i]=await Promise.all([this.fetchCertificates(e),this.fetchWithdrawals(e),this.fetchUtxos(t),this.fetchJsonMetadataAsAuxiliaryData(t)]);const{inputs:n,outputs:d,collaterals:c}=this.transactionUtxos(a);const l=this.gatherMintsFromUtxos(e,a);const u=l?new Map([...l].sort()):l;const f=e.valid_contract?o.InputSource.inputs:o.InputSource.collaterals;const h=this.mapTxBody({certificates:await this.processCertificates(e,r),collateralReturn:void 0,collaterals:c,fee:BigInt(e.fees),inputs:n,mint:u,outputs:d,proposalProcedures:void 0,validityInterval:{invalidBefore:this.parseValidityInterval(e.invalid_before),invalidHereafter:this.parseValidityInterval(e.invalid_hereafter)},votingProcedures:void 0,withdrawals:s},f);return{auxiliaryData:i,blockHeader:this.mapBlockHeader(e),body:h,id:t,index:e.index,inputSource:f,txSize:e.size,witness:this.witnessFromRedeemers(await this.fetchRedeemers(e))}}witnessFromRedeemers(e){const t=w.from("not implemented");if(e){for(const r of e)r.data=t}return{redeemers:e,signatures:new Map}}async transactionDetailsUsingCBOR(e){const t=o.TransactionId(e.hash);const r=await this.fetchDetailsFromCBOR(t);if(!r)return;const s=await this.request(`txs/${t}/utxos`);const{inputs:a,outputs:i,collaterals:n}=this.transactionUtxos(s,r);const d=e.valid_contract?o.InputSource.inputs:o.InputSource.collaterals;const c=this.mapTxBody({certificates:await this.processCertificates(e,r.body.certificates),collateralReturn:r.body.collateralReturn,collaterals:n,fee:r.body.fee,inputs:a,mint:r.body.mint?new Map([...r.body.mint].sort()):void 0,outputs:i,proposalProcedures:r.body.proposalProcedures,validityInterval:r.body.validityInterval?r.body.validityInterval:{invalidBefore:void 0,invalidHereafter:void 0},votingProcedures:r.body.votingProcedures,withdrawals:r.body.withdrawals},d);return{auxiliaryData:r.auxiliaryData,blockHeader:this.mapBlockHeader(e),body:c,id:t,index:e.index,inputSource:d,txSize:e.size,witness:this.witnessFromRedeemers(r.witness.redeemers)}}async fetchTransaction(e){try{const t=await this.request(`txs/${e.toString()}`);var r;return null!==(r=await this.transactionDetailsUsingCBOR(t))&&void 0!==r?r:await this.transactionDetailsUsingAPIs(t)}catch(s){throw this.toProviderError(s)}}transactionUtxos(e,t){const r=e.inputs.filter(e=>e.collateral).map(i.BlockfrostToCore.hydratedTxIn);const s=e.inputs.filter(e=>!e.collateral&&!e.reference).map(i.BlockfrostToCore.hydratedTxIn);const a=e.outputs.filter(e=>!e.collateral).map(e=>{const r=null==t?void 0:t.body.outputs.find(t=>t.address===e.address);return i.BlockfrostToCore.txOut(e,r)});return{collaterals:r,inputs:s,outputs:a}}async blocksByHashes({ids:e}){try{const t=await Promise.all(e.map(e=>this.request(`blocks/${e.toString()}`)));return t.map(e=>{if(!e.epoch||!e.epoch_slot||!e.height||!e.slot||!e.block_vrf){throw new v.ProviderError(v.ProviderFailure.Unknown,null,"Queried unsupported block")}return{confirmations:e.confirmations,date:new Date(1e3*e.time),epoch:l.EpochNo(e.epoch),epochSlot:e.epoch_slot,fees:BigInt(e.fees||"0"),header:{blockNo:l.BlockNo(e.height),hash:l.BlockId(e.hash),slot:l.Slot(e.slot)},nextBlock:e.next_block?l.BlockId(e.next_block):void 0,previousBlock:e.previous_block?l.BlockId(e.previous_block):void 0,size:l.BlockSize(e.size),slotLeader:l.SlotLeader(e.slot_leader),totalOutput:BigInt(e.output||"0"),txCount:e.tx_count,vrf:l.VrfVkBech32(e.block_vrf)}})}catch(r){throw this.toProviderError(r)}}async transactionsByHashes({ids:e}){return Promise.all(e.map(async e=>{const t=await this.cache.get(e);if(t)return t;try{const r=await this.fetchTransaction(e);void this.cache.set(e,r);return r}catch(s){throw this.toProviderError(s)}}))}async transactionsByAddresses({addresses:e,pagination:t,blockRange:r}){this.logger.debug(`transactionsByAddresses: ${JSON.stringify(r)} ${JSON.stringify(e)}`);try{var s;const i=null!==(s=null==r?void 0:r.lowerBound)&&void 0!==s?s:0;var n;const d=null!==(n=null==r?void 0:r.upperBound)&&void 0!==n?n:g;var c;const l=null!==(c=null==t?void 0:t.limit)&&void 0!==c?c:g;const u=await Promise.all(e.map(async e=>{return(0,a.fetchSequentially)({haveEnoughItems:(null==r?void 0:r.lowerBound)?e=>e.length>0&&e[e.length-1].block_height<r.lowerBound||e.length>=l:e=>e.length>=l,paginationOptions:t?{count:t.limit,order:t.order,page:(t.startAt+t.limit)/t.limit}:void 0,request:t=>{let s=`addresses/${e}/transactions?${t}`;if(null==r?void 0:r.lowerBound)s+=`&from=${r.lowerBound.toString()}`;if(null==r?void 0:r.upperBound)s+=`&to=${r.upperBound.toString()}`;return this.request(s)}})}));const f=u.flat(1);const h=_(f.filter(({block_height:e})=>e>=i&&e<=d).sort("desc"===t.order?(e,t)=>compareTx(t,e):compareTx).map(({tx_hash:e})=>o.TransactionId(e)));const m=await this.transactionsByHashes({ids:h});return{pageResults:m,totalResultCount:h.length}}catch(p){throw this.toProviderError(p)}}mapTxBody({collateralReturn:e,collaterals:t,fee:r,inputs:s,outputs:a,mint:i,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l,certificates:u},f){return{...f===o.InputSource.collaterals?{collateralReturn:a.length>0?a[0]:void 0,collaterals:s,fee:BigInt(0),inputs:[],outputs:[],totalCollateral:r}:{collateralReturn:null!=e?e:void 0,collaterals:t,fee:r,inputs:s,outputs:a},certificates:u,mint:i,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l}}mapBlockHeader({block:e,block_height:t,slot:r}){return{blockNo:l.BlockNo(t),hash:l.BlockId(e),slot:l.Slot(r)}}fetchUtxos(e){return this.request(`txs/${e}/utxos`)}constructor({cache:e,client:t,networkInfoProvider:r,logger:s}){super(t,s);this.parseValidityInterval=e=>l.Slot(Number.parseInt(e||""))||void 0;this.cache=e;this.networkInfoProvider=r}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/DRepProvider/BlockfrostDRepProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostDRepProvider:()=>BlockfrostDRepProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");class BlockfrostDRepProvider extends s.BlockfrostProvider{async getDRepInfo({id:e}){try{const t=a.DRepID.toCip129DRepID(e).toString();const r=await this.request(`governance/dreps/${t}`);const s=BigInt(r.amount);const o=r.active_epoch?i.EpochNo(r.active_epoch):void 0;const n=r.active;const d=r.has_script;return{active:n,activeEpoch:o,amount:s,hasScript:d,id:e}}catch(c){this.logger.error("getDRep failed",e);throw this.toProviderError(c)}}getDRepsInfo({ids:e}){return Promise.all(e.map(e=>this.getDRepInfo({id:e})))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HandleProvider/handleHttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{handleHttpProvider:()=>handleHttpProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js");const a={getPolicyIds:"/policyIds",healthCheck:"/health",resolveHandles:"/resolve"};var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js");const handleHttpProvider=e=>(0,s.createHttpProvider)({...e,apiVersion:e.apiVersion||i.apiVersion.handle,modifyData:(e,t)=>"resolveHandles"===e?{...t,check_handle:true}:{...t},paths:a,serviceSlug:"handle"})},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{createHttpProvider:()=>createHttpProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var i=r("../../node_modules/axios/lib/axios.js");const o=JSON.parse('{"version":"0.26.12"}');const isEmptyResponse=e=>""===e;const transformResponse=e=>{if(!e)return e;if("string"==typeof e)e=JSON.parse(e);return(0,a.fromSerializableObject)(e,{errorTypes:[s.ProviderError]})};const transformRequest=e=>{if(!e)return e;return JSON.stringify((0,a.toSerializableObject)(e))};const defaultModifyData=(e,t)=>({...t});const createHttpProvider=({apiVersion:e,baseUrl:t,axiosOptions:r,mapError:a,paths:n,adapter:d,logger:c,modifyData:l,serviceSlug:u})=>{const f=l||defaultModifyData;return new Proxy({},{get(l,h){const m=h;const p=n[m];if(!p)return;return async(...n)=>{try{const l={...r,adapter:d,baseURL:`${t.replace(/\/$/,"")}/v${e}/${u}`,data:f(m,n[0]),headers:{...null==r?void 0:r.headers,"Content-Type":"application/json","Version-Api":JSON.stringify(e),"Version-Software":o.version},method:"post",responseType:"json",transformRequest,transformResponse,url:p};c.debug(`Sending ${l.method} request to ${l.baseURL}${l.url} with data:`);c.debug(l.data);const h=i["default"].create(l);const v=(await h.request(l)).data;return isEmptyResponse(v)?void 0:v}catch(_){if(i["default"].isAxiosError(_)){if(_.response){const y=_.response.data;if(a)return a(y,m);throw new s.ProviderError(s.ProviderFailure.Unknown,y)}if(_.request){throw new s.ProviderError(s.ProviderFailure.ConnectionFailure,_,_.code)}}c.error(_);throw new s.ProviderError(s.ProviderFailure.Unknown,_)}}},has(e,t){return t in n}})}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/NetworkInfoProvider/BlockfrostNetworkInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostNetworkInfoProvider:()=>BlockfrostNetworkInfoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");class BlockfrostNetworkInfoProvider extends s.BlockfrostProvider{async stake(){try{const{stake:e}=await this.request("network");return{active:BigInt(e.active),live:BigInt(e.live)}}catch(t){throw this.toProviderError(t)}}async lovelaceSupply(){try{const{supply:e}=await this.request("network");return{circulating:BigInt(e.circulating),total:BigInt(e.total)}}catch(t){throw this.toProviderError(t)}}async ledgerTip(){try{const e=await this.request("blocks/latest");return a.BlockfrostToCore.blockToTip(e)}catch(t){throw this.toProviderError(t)}}async protocolParameters(){try{const e=await this.request("epochs/latest/parameters");return a.BlockfrostToCore.protocolParameters(e)}catch(t){throw this.toProviderError(t)}}async genesisParameters(){return this.request("genesis").then(e=>({activeSlotsCoefficient:e.active_slots_coefficient,epochLength:e.epoch_length,maxKesEvolutions:e.max_kes_evolutions,maxLovelaceSupply:BigInt(e.max_lovelace_supply),networkId:e.network_magic===i.NetworkMagics.Mainnet?i.NetworkId.Mainnet:i.NetworkId.Testnet,networkMagic:e.network_magic,securityParameter:e.security_param,slotLength:(0,o.Seconds)(e.slot_length||.2),slotsPerKesPeriod:e.slots_per_kes_period,systemStart:new Date(1e3*e.system_start),updateQuorum:e.update_quorum})).catch(e=>{throw this.toProviderError(e)})}async fetchEraSummaries(){try{return await this.request("network/eras")}catch(e){throw this.toProviderError(e)}}async parseEraSummaries(e,t){try{return e.map(e=>({parameters:{epochLength:e.parameters.epoch_length,slotLength:(0,o.Milliseconds)(1e3*e.parameters.slot_length)},start:{slot:e.start.slot,time:new Date(t.getTime()+1e3*e.start.time)}}))}catch(r){throw this.toProviderError(r)}}async eraSummaries(){try{const{systemStart:e}=await this.genesisParameters();const t=await this.fetchEraSummaries();return this.parseEraSummaries(t,e)}catch(r){throw this.toProviderError(r)}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardAccountInfoProvider/RewardAccountInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardAccountInfoProvider:()=>BlockfrostRewardAccountInfoProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var n=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var d=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/lodash/uniq.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v,y,_;const emptyArrayIfNotFound=e=>{if((0,n.isBlockfrostNotFoundError)(e)){return[]}throw e};class BlockfrostRewardAccountInfoProvider extends d.BlockfrostProvider{async rewardAccountInfo(e,t){const[r,[a]]=await Promise.all([await this.request(`accounts/${e}`).catch(t=>{if((0,n.isBlockfrostNotFoundError)(t)){return{active:false,active_epoch:null,controlled_amount:"0",drep_id:null,pool_id:null,reserves_sum:"0",rewards_sum:"0",stake_address:e,treasury_sum:"0",withdrawable_amount:"0",withdrawals_sum:"0"}}throw t}),this.request(`accounts/${e}/registrations?order=desc&count=1`).catch(emptyArrayIfNotFound)]);const i=await __classPrivateFieldGet(this,f,"m",p).call(this,a);const o=r.active?s.StakeCredentialStatus.Registered:(null==a?void 0:a.action)==="registered"?s.StakeCredentialStatus.Registering:void 0===i||i<=t?s.StakeCredentialStatus.Unregistered:s.StakeCredentialStatus.Unregistering;const d=BigInt(r.withdrawable_amount||"0");const[c,l,u]=await Promise.all([__classPrivateFieldGet(this,f,"m",_).call(this,e,t,i),__classPrivateFieldGet(this,f,"m",v).call(this,r),__classPrivateFieldGet(this,f,"m",y).call(this,a)]);return{address:e,credentialStatus:o,dRepDelegatee:l,delegatee:c,deposit:u,rewardBalance:d}}async delegationPortfolio(e){const t=await (0,n.fetchSequentially)({haveEnoughItems:e=>e.some(c.isNotNil),paginationOptions:{order:"desc"},request:async t=>{const r=await this.request(`accounts/${e}/delegations?${t}`).catch(emptyArrayIfNotFound);const i=[];for(const{tx_hash:o}of r){var n;const d=await this.request(`txs/${o}/metadata/cbor`).catch(emptyArrayIfNotFound);const c=null===(n=d.find(({label:e})=>"6862"===e))||void 0===n?void 0:n.metadata;if(!c){i.push(null);continue}const u=a.TransactionMetadatum.fromCbor((0,l.HexBlob)(c));try{i.push(s.cip17FromMetadatum(u.toCore()));break}catch{i.push(null)}}return i}});return t.find(c.isNotNil)||null}constructor({client:e,logger:t,stakePoolProvider:r,dRepProvider:s}){super(e,t);f.add(this);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,h,s,"f");__classPrivateFieldSet(this,m,r,"f")}}h=new WeakMap,m=new WeakMap,f=new WeakSet,p=async function _BlockfrostRewardAccountInfoProvider_getUnregisteringAtEpoch(e){if(!e||"registered"===e.action){return}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);return i.EpochNo(r.epoch)},v=async function _BlockfrostRewardAccountInfoProvider_getDrepDelegatee(e){if(!e.drep_id)return;if("drep_always_abstain"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysAbstain"}}}if("drep_always_no_confidence"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysNoConfidence"}}}const t=o.DRepID.toCip129DRepID(o.DRepID(e.drep_id));const r=await __classPrivateFieldGet(this,h,"f").getDRepInfo({id:t});return{delegateRepresentative:r}},y=async function _BlockfrostRewardAccountInfoProvider_getKeyDeposit(e){if(!e||"deregistered"===e.action){return 0n}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);const s=await this.request(`epochs/${r.epoch}/parameters`);return BigInt(s.key_deposit)},_=async function _BlockfrostRewardAccountInfoProvider_getDelegatee(e,t,r){var s,a,i;const o=await (0,n.fetchSequentially)({haveEnoughItems:e=>{var r;return(null===(r=e[e.length-1])||void 0===r?void 0:r.active_epoch)<=t},paginationOptions:{order:"desc"},request:t=>this.request(`accounts/${e}/delegations?${t}`)});const isRegisteredAt=e=>{if(!r){return true}return r>t+e||void 0};const d=[isRegisteredAt(0)&&(null===(s=o.find(({active_epoch:e})=>e<=t))||void 0===s?void 0:s.pool_id),isRegisteredAt(1)&&(null===(a=o.find(({active_epoch:e})=>e<=t+1))||void 0===a?void 0:a.pool_id),isRegisteredAt(2)&&(null===(i=o.find(({active_epoch:e})=>e<=t+2))||void 0===i?void 0:i.pool_id)];const l=u(d.filter(c.isNotNil));if(0===l.length){return}const f=await __classPrivateFieldGet(this,m,"f").queryStakePools({filters:{identifier:{values:l.map(e=>({id:e}))}},pagination:{limit:3,startAt:0}});const stakePoolMathingPoolId=e=>f.pageResults.find(t=>t.id===d[e]);return{currentEpoch:stakePoolMathingPoolId(0),nextEpoch:stakePoolMathingPoolId(1),nextNextEpoch:stakePoolMathingPoolId(2)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardsProvider/BlockfrostRewardsProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardsProvider:()=>BlockfrostRewardsProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");const stringToBigInt=e=>BigInt(e);class BlockfrostRewardsProvider extends i.BlockfrostProvider{async rewardAccountBalance({rewardAccount:e}){try{const t=await this.request(`accounts/${e.toString()}`);return BigInt(t.withdrawable_amount)}catch(r){if((0,o.isBlockfrostNotFoundError)(r)){return 0n}throw this.toProviderError(r)}}async accountRewards(e,{lowerBound:t=s.EpochNo(0),upperBound:r=s.EpochNo(Number.MAX_SAFE_INTEGER)}={}){const i=100;return(0,o.fetchSequentially)({haveEnoughItems:(e,t)=>{const s=t[t.length-1];return!s||s.epoch>=r},paginationOptions:{count:i},request:t=>this.request(`accounts/${e.toString()}/rewards?${t}`),responseTranslator:e=>e.filter(({epoch:e})=>t<=e&&e<=r).map(({epoch:e,amount:t,pool_id:r})=>({epoch:s.EpochNo(e),rewards:stringToBigInt(t),...r&&{poolId:a.PoolId(r)}}))})}async rewardsHistory({rewardAccounts:e,epochs:t}){const r=await Promise.all(e.map(e=>this.accountRewards(e,t)));return new Map(r.map((t,r)=>[e[r],t]))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/StakePoolProvider/stakePoolHttpProvider.js":(e,t,r)=>{"use strict";r.d(t,{stakePoolHttpProvider:()=>stakePoolHttpProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HttpProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js");const i={healthCheck:"/health",queryStakePools:"/search",stakePoolStats:"/stats"};const stakePoolHttpProvider=e=>(0,s.createHttpProvider)({...e,apiVersion:e.apiVersion||a.apiVersion.stakePool,paths:i,serviceSlug:"stake-pool"})},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/BlockfrostTxSubmitProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostTxSubmitProvider:()=>BlockfrostTxSubmitProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const tryParseBlockfrostTxSubmissionErrorMessage=e=>{try{var t,r,s;const a=JSON.parse(e);if("object"==typeof a&&Array.isArray(null==a?void 0:null===(t=a.contents)||void 0===t?void 0:null===(r=t.contents)||void 0===r?void 0:null===(s=r.contents)||void 0===s?void 0:s.error)){return a}}catch{return null}return null};const tryMapTxBlockfrostSubmissionError=e=>{try{const t=JSON.parse(e.detail);if("string"==typeof(null==t?void 0:t.message)){const r=tryParseBlockfrostTxSubmissionErrorMessage(t.message);if(!r){return null}const s=r.contents.contents.contents.error[0];if(s.includes("OutsideValidityIntervalUTxO")){return new a.TxSubmissionError(a.TxSubmissionErrorCode.OutsideOfValidityInterval,null,s)}const i=/ValueNotConservedUTxO.+Coin (\d+).+Coin (\d+)/.exec(s);if(i){const o=BigInt(i[1]);const n=BigInt(i[2]);const d={consumed:{coins:o},produced:{coins:n}};return new a.TxSubmissionError(a.TxSubmissionErrorCode.ValueNotConserved,d,s)}}}catch{return null}return null};class BlockfrostTxSubmitProvider extends s.BlockfrostProvider{async submitTx({signedTransaction:e}){try{await this.request("tx/submit",{body:o.from(e,"hex"),headers:{"Content-Type":"application/cbor"},method:"POST"})}catch(r){if(r instanceof i.ProviderError){const t=tryMapTxBlockfrostSubmissionError(r);if(t){throw new i.ProviderError(r.reason,t,r.detail)}}throw r}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/TxSubmitApiProvider.js":(e,t,r)=>{"use strict";r.d(t,{TxSubmitApiProvider:()=>TxSubmitApiProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const hexStringToBuffer=e=>i.from(e,"hex");const bufferToHexString=e=>e.toString("hex");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");const parseStringishError=e=>{if(/outsideofvalidity/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.OutsideOfValidityInterval,null,e)}if(/valuenotconserved/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.ValueNotConserved,null,e)}if(/nonadacollateral/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.NonAdaCollateral,null,e)}if(/incompletewithdrawals/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.IncompleteWithdrawals,null,e)}return null};const mapCardanoTxSubmitError=e=>{if("string"==typeof e){return parseStringishError(e)}if("object"==typeof e&&e){return parseStringishError(JSON.stringify(e))}return null};var n=r("../../node_modules/axios/lib/axios.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;class TxSubmitApiProvider{async submitTx({signedTransaction:e}){let t;try{t=s.Transaction.fromCbor(e).getId();__classPrivateFieldGet(this,l,"f").debug(`Submitting tx ${t} ...`);await __classPrivateFieldGet(this,d,"f").call(this,{adapter:__classPrivateFieldGet(this,f,"f"),data:hexStringToBuffer(e),headers:{"Content-Type":"application/cbor"},method:"post",url:__classPrivateFieldGet(this,u,"f")});__classPrivateFieldSet(this,c,true,"f");__classPrivateFieldGet(this,l,"f").debug(`Tx ${t} submitted`)}catch(o){__classPrivateFieldSet(this,c,false,"f");__classPrivateFieldGet(this,l,"f").error(`Tx ${t} submission error`);__classPrivateFieldGet(this,l,"f").error(o);if(n["default"].isAxiosError(o)&&o.response){const{data:r,status:i}=o.response;if("number"==typeof i&&i>=400&&i<500)__classPrivateFieldSet(this,c,true,"f");throw new a.ProviderError(a.ProviderFailure.BadRequest,mapCardanoTxSubmitError(r),"string"==typeof r?r:JSON.stringify(r))}throw new a.ProviderError(a.ProviderFailure.Unknown,o,"submitting tx")}}healthCheck(){return Promise.resolve({ok:__classPrivateFieldGet(this,c,"f")})}constructor({baseUrl:e,path:t="/api/submit/tx"},{logger:r,adapter:s}){d.set(this,void 0);c.set(this,true);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,n["default"].create({baseURL:e.origin}),"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/UtxoProvider/BlockfrostUtxoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostUtxoProvider:()=>BlockfrostUtxoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");class BlockfrostUtxoProvider extends s.BlockfrostProvider{async fetchUtxos(e,t){const r=`addresses/${e.toString()}/utxos?${t}`;const s=await this.request(r);const i=s.map(t=>this.fetchDetailsFromCBOR(t.tx_hash).then(r=>{const s=r?r.body.outputs.find(e=>e.address===t.address):void 0;return a.BlockfrostToCore.addressUtxoContent(e.toString(),t,s)}));return Promise.all(i)}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e.cbor)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){const t=await this.cache.get(e);if(t)return t;const r=await this.fetchCBOR(e).then(t=>{const r=o.Transaction.fromCbor(o.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null});if(!r){return null}void this.cache.set(e,r);return r}async utxoByAddresses({addresses:e}){try{const t=await Promise.all(e.map(async e=>(0,i.fetchSequentially)({request:async t=>await this.fetchUtxos(e,t)})));return t.flat(1)}catch(r){throw this.toProviderError(r)}}constructor({cache:e,client:t,logger:r}){super(t,r);this.cache=e}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/WebSocket.js":(e,t,r)=>{"use strict";r.d(t,{CardanoWsClient:()=>CardanoWsClient});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var m=r("../../node_modules/isomorphic-ws/browser.js");const p="not-connected";const deserializeDatum=e=>{for(const t of e.body.outputs)if(t.datum)t.datum=s.PlutusData.fromCbor(t.datum).toCore()};const deserializeMetadata=e=>{if(e.auxiliaryData)e.auxiliaryData={blob:new Map(e.auxiliaryData.map(e=>{const t=BigInt(e[0]);return[t,a.GeneralTransactionMetadata.fromCbor(e[1]).toCore().get(t)]}))}};const isEventError=e=>"object"==typeof e&&!!e&&e.error instanceof Error;const isTxRelevant=({body:{collaterals:e,collateralReturn:t,inputs:r,outputs:s},inputSource:a},o)=>a===i.InputSource.inputs?r.some(e=>o.includes(e.address))||s.some(e=>o.includes(e.address)):e.some(e=>o.includes(e.address))||t&&o.includes(t.address);const removeRolledBackTxs=(e,t)=>{let r;for(r in e)if(e[r].blockHeader.blockNo>t)delete e[r]};class WsProvider{emitHealth(e,{notRecoverable:t,overwrite:r}={}){if(this.notRecoverable)return;if(!e){this.reason=void 0;return this.healthSubject$.next({ok:true})}if(t)this.notRecoverable=true;let s;if("string"==typeof e){if(r||!this.reason)this.reason=e;s={notRecoverable:this.notRecoverable,ok:false,reason:this.reason}}else s=e;this.healthSubject$.next(s)}healthCheck(){return(0,c.firstValueFrom)(this.health$)}constructor(){this.health$=this.healthSubject$=new l.ReplaySubject(1);this.healthSubject$.next({ok:false,reason:"starting"})}}class CardanoWsClient extends WsProvider{createNetworkInfoProviderMethod(e){return async()=>{this.logger.debug(`CardanoWsClient.${e} called`);const t=await (0,c.firstValueFrom)((0,u.merge)(this.health$.pipe((0,f.filter)(({ok:e,reason:t})=>!e&&"starting"!==t)),this.networkInfo[`${e}$`]));if("ok"in t&&"reason"in t&&false===t.ok){this.logger.error(`CardanoWsClient.${e} error`,t.reason);throw new o.ProviderError(o.ProviderFailure.ConnectionFailure,void 0,t.reason)}this.logger.debug(`CardanoWsClient.${e} response:`,(0,d.toSerializableObject)(t));return t}}connect(){if("stop"!==this.status)this.status="connecting";const e=this.ws=new m["default"](this.url);e.onmessage=e=>{try{if("string"!=typeof e.data)throw new Error("Unexpected data from WebSocket ");const t=(0,d.fromSerializableObject)(JSON.parse(e.data));const{clientId:r,networkInfo:s,responseTo:a,syncing:i,transactions:o,utxos:c}=t;if(r){this.logger.info(`Connected with clientId ${this.clientId=r}`);if(i)this.emitHealth("Server is still syncing",{overwrite:true});else this.emitHealth()}if(o)for(const l of o){deserializeDatum(l);deserializeMetadata(l);this.transactions[l.id]=l;delete this.utxos[l.id];this.logger.debug("CardanoWsClient got tx",l.id,l.blockHeader)}if(c){for(const u of c)if(!this.transactions[u.id]){deserializeDatum(u);this.utxos[u.id]=u}}if(s){const{eraSummaries:f,genesisParameters:h,ledgerTip:m,lovelaceSupply:p,protocolParameters:v,stake:y}=s;if(f)this.networkInfoSubjects.eraSummaries$.next(f);if(h)this.networkInfoSubjects.genesisParameters$.next(h);if(p)this.networkInfoSubjects.lovelaceSupply$.next(p);if(v)this.networkInfoSubjects.protocolParameters$.next(v);if(y)this.networkInfoSubjects.stake$.next(y);if(m){this.logger.debug("CardanoWsClient got tip",m);removeRolledBackTxs(this.transactions,m.blockNo);removeRolledBackTxs(this.utxos,m.blockNo);this.networkInfoSubjects.ledgerTip$.next(m)}if(f&&m&&p&&v&&!r){const _=(0,n.createSlotEpochInfoCalc)(f)(m.slot);this.epochSubject$.next({epochInfo:_,eraSummaries:f,ledgerTip:m,lovelaceSupply:p,protocolParameters:v})}}if(a){const w=this.handlers.get(a);this.logger.debug("CardanoWsClient response",a);if(w){const{error:g}=t;this.handlers.delete(a);g?w(g):w(void 0,t)}}}catch(b){this.logger.error(b,"While parsing message",e.data,this.clientId)}};e.onclose=()=>{this.logger.debug("WebSocket client connection closed",this.clientId);if(this.heartbeatTimeout){clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=void 0}this.clientId=p;if("stop"===this.status)this.closeResolver();else{this.status="idle";const e=setTimeout(()=>this.connect(),1e3);if("function"==typeof e.unref)e.unref()}this.emitHealth("closed")};e.onerror=t=>{const r=t instanceof Error?t:isEventError(t)?t.error:new Error(`Unknown error: ${JSON.stringify(t)}`);this.logger.error(r,"Async error from WebSocket client",this.clientId);e.close();this.emitHealth(r.message,{overwrite:true});for(const s of this.handlers.values())s(r);this.handlers.clear();this.addresses={};this.transactions={}};e.onopen=()=>{if("stop"!==this.status)this.status="connected";this.heartbeat()}}heartbeat(){if(this.heartbeatTimeout)clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=setTimeout(()=>{try{this.request({})}catch(e){this.logger.error(e,"Error while refreshing heartbeat",this.clientId)}},this.heartbeatInterval);if("function"==typeof this.heartbeatTimeout.unref)this.heartbeatTimeout.unref()}close(){this.status="stop";this.ws.close();return this.closePromise}request(e,t){if("connected"!==this.status)return false;if(Object.keys(e).length>0)e={...e,requestId:++this.requestId};this.logger.debug("CardanoWsClient request",e);this.ws.send(JSON.stringify(e));this.heartbeat();if(e.requestId&&t)this.handlers.set(e.requestId,t);return true}transactionsByAddresses(e){const{addresses:t,blockRange:r,pagination:s}=e;return new Promise((a,i)=>{const n=(null==r?void 0:r.lowerBound)||0;const l=(null==r?void 0:r.upperBound)||Number.POSITIVE_INFINITY;const u=[];const h={addresses:u,lower:n};this.logger.debug("CardanoWsClient.transactionsByAddresses called",e);const complete=r=>{if(r){for(const o of u)delete this.addresses[o];this.logger.error("CardanoWsClient.transactionsByAddresses error",e,r);return i(r)}const c=Object.values(this.transactions).filter(({blockHeader:{blockNo:e}})=>n<=e&&e<=l).filter(e=>isTxRelevant(e,t)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);const f=(null==s?void 0:s.startAt)||0;const h=f+((null==s?void 0:s.limit)||Number.POSITIVE_INFINITY);const m=c.filter((e,t)=>f<=t&&t<h);const p={pageResults:m,totalResultCount:c.length};this.logger.debug("CardanoWsClient.transactionsByAddresses response",e,(0,d.toSerializableObject)(p));a(p)};for(const m of t){const p=this.addresses[m];let v=false;if(p){if("syncing"===p.status)return complete(new o.ProviderError(o.ProviderFailure.Conflict,null,`${m} still loading`));if(n<p.lower)v=true}else v=true;if(v){u.push(m);this.addresses[m]={lower:n,status:"syncing"}}}(0,c.firstValueFrom)(this.health$.pipe((0,f.filter)(({reason:e})=>"starting"!==e))).then(({ok:e,reason:t})=>{if(!e)return complete(new o.ProviderError(o.ProviderFailure.ConnectionFailure,void 0,t));if(0===u.length)return complete();this.deferRequest(h,e=>{if(e)return complete(new o.ProviderError(o.ProviderFailure.ConnectionFailure,e,e.message));for(const t of u)this.addresses[t].status="synced";complete()})}).catch(complete)})}deferRequest(e,t){const{requests:r,timeout:s}=this.deferredRequests;if(s)clearTimeout(s);r.push({complete:t,txsByAddresses:e});this.deferredRequests.timeout=setTimeout(()=>{this.deferredRequests={requests:[]};this.request({txsByAddresses:r.reduce((e,{txsByAddresses:{addresses:t,lower:r}})=>({addresses:[...e.addresses,...t],lower:e.lower<r?e.lower:r}),{addresses:[],lower:Number.POSITIVE_INFINITY})},e=>r.forEach(({complete:t})=>t(e)))},3)}utxoByAddresses({addresses:e}){this.logger.debug("CardanoWsClient.utxoByAddresses called",e);for(const t of e){const r=this.addresses[t];let s;if(!r){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} not loaded`);return Promise.reject(new o.ProviderError(o.ProviderFailure.NotImplemented,null,s))}if("syncing"===r.status){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} still loading`);return Promise.reject(new o.ProviderError(o.ProviderFailure.Conflict,null,s))}}const a=[];const i=[...Object.values(this.utxos),...Object.values(this.transactions)].filter(t=>isTxRelevant(t,e)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);for(let n=0;n<i.length;++n){const c=i[n];for(let l=0;l<c.body.outputs.length;++l){const u=c.body.outputs[l];if(e.includes(u.address)){let f=true;for(let h=n+1;h<i.length&&f;++h){const m=i[h];for(let p=0;p<m.body.inputs.length&&f;++p){const v=m.body.inputs[p];if(v.txId===c.id&&v.index===l)f=false}}if(f)a.push([{address:u.address,index:l,txId:c.id},u])}}}this.logger.debug("CardanoWsClient.utxoByAddresses response",(0,d.toSerializableObject)(a));return Promise.resolve(a)}constructor(e,t){super();this.clientId=p;this.addresses={};this.deferredRequests={requests:[]};this.handlers=new Map;this.requestId=0;this.status="idle";this.transactions={};this.utxos={};this.networkInfoSubjects={};this.epoch$=this.epochSubject$=new h.Subject;this.heartbeatInterval=1e3*(t.heartbeatInterval||55);this.logger=e.logger;this.url=t.url;this.closePromise=new Promise(e=>{this.closeResolver=e});this.networkInfoSubjects={eraSummaries$:new l.ReplaySubject(1),genesisParameters$:new l.ReplaySubject(1),ledgerTip$:new l.ReplaySubject(1),lovelaceSupply$:new l.ReplaySubject(1),protocolParameters$:new l.ReplaySubject(1),stake$:new l.ReplaySubject(1)};this.networkInfo=this.networkInfoSubjects;this.chainHistoryProvider={blocksByHashes:t=>e.chainHistoryProvider.blocksByHashes(t),healthCheck:()=>this.healthCheck(),transactionsByAddresses:e=>this.transactionsByAddresses(e),transactionsByHashes:t=>e.chainHistoryProvider.transactionsByHashes(t)};this.networkInfoProvider={eraSummaries:this.createNetworkInfoProviderMethod("eraSummaries"),genesisParameters:this.createNetworkInfoProviderMethod("genesisParameters"),healthCheck:()=>this.healthCheck(),ledgerTip:this.createNetworkInfoProviderMethod("ledgerTip"),lovelaceSupply:this.createNetworkInfoProviderMethod("lovelaceSupply"),protocolParameters:this.createNetworkInfoProviderMethod("protocolParameters"),stake:this.createNetworkInfoProviderMethod("stake")};this.utxoProvider={healthCheck:()=>this.healthCheck(),utxoByAddresses:e=>this.utxoByAddresses(e)};this.connect()}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostClient:()=>BlockfrostClient,BlockfrostError:()=>BlockfrostError});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}var i=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js");const tryReadResponseText=async e=>{try{return e.text()}catch{return}};class BlockfrostError extends a{constructor(e,t,r){const s=t||(null==r?void 0:r.message);super(`Blockfrost error with status '${e}': ${s}`);this.status=e;this.body=t;this.innerError=r}}class BlockfrostClient{request(e,t){return this.rateLimiter.schedule(()=>{return(0,i.firstValueFrom)((0,c.fromFetch)(`${this.baseUrl}/${e}`,{...this.requestInit,...t,headers:(null==t?void 0:t.headers)?{...this.requestInit.headers,...t.headers}:this.requestInit.headers}).pipe((0,o.switchMap)(async e=>{if(e.ok){try{return await e.json()}catch{throw new BlockfrostError(e.status,"Failed to parse json")}}throw new BlockfrostError(e.status,await tryReadResponseText(e))}),(0,n.catchError)(e=>{if(e instanceof BlockfrostError){return(0,d.throwError)(()=>e)}return(0,d.throwError)(()=>new BlockfrostError(void 0,void 0,e))})))})}constructor({apiVersion:e,projectId:t,baseUrl:r},{rateLimiter:s}){this.rateLimiter=s;this.requestInit=t?{headers:{project_id:t}}:{};this.baseUrl=e?`${r}/api/${e}`:`${r}`}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostProvider:()=>BlockfrostProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;const toProviderFailure=e=>{switch(e){case 400:return a.ProviderFailure.BadRequest;case 403:return a.ProviderFailure.Forbidden;case 404:return a.ProviderFailure.NotFound;case 402:case 418:case 425:case 429:return a.ProviderFailure.ServerUnavailable;case 500:return a.ProviderFailure.Unhealthy;default:return a.ProviderFailure.Unknown}};class BlockfrostProvider{async request(e,t){try{this.logger.debug("request",e);const r=await __classPrivateFieldGet(this,n,"f").request(e,t);this.logger.debug("response",r);return r}catch(s){(0,o.isBlockfrostNotFoundError)(s)?this.logger.debug("Blockfrost not found",s):this.logger.error(s);throw this.toProviderError(s)}}async healthCheck(){try{const e=await __classPrivateFieldGet(this,n,"f").request("health");return{ok:e.is_healthy}}catch(t){return{ok:false,reason:this.toProviderError(t).message}}}toProviderError(e){if(e instanceof a.ProviderError){return e}if(e instanceof s.BlockfrostError){return new a.ProviderError(toProviderFailure(e.status),e,e.body)}return new a.ProviderError(a.ProviderFailure.Unknown,e)}constructor(e,t){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");this.logger=(0,i.contextLogger)(t,this.constructor.name)}}n=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostToCore:()=>u});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const u={addressUtxoContent:(e,t,r)=>[u.hydratedTxIn(u.inputFromUtxo(e,t)),u.txOut(u.outputFromUtxo(e,t),r)],blockToTip:e=>({blockNo:s.BlockNo(e.height),hash:s.BlockId(e.hash),slot:s.Slot(e.slot)}),hydratedTxIn:e=>({address:a.PaymentAddress(e.address),index:e.output_index,txId:i.TransactionId(e.tx_hash)}),inputFromUtxo:(e,t)=>({address:e,amount:t.amount,output_index:t.output_index,tx_hash:t.tx_hash}),inputs:e=>e.map(e=>u.hydratedTxIn(e)),outputFromUtxo:(e,t)=>({...t,address:e,collateral:false}),outputs:e=>e.map(e=>u.txOut(e)),protocolParameters:e=>({coinsPerUtxoByte:Number(e.coins_per_utxo_word),collateralPercentage:e.collateral_percent,committeeTermLimit:s.EpochNo(0),costModels:new Map([[o.PlutusLanguageVersion.V1,Object.values(e.cost_models.PlutusV1)],[o.PlutusLanguageVersion.V2,Object.values(e.cost_models.PlutusV2)]]),dRepDeposit:e.drep_deposit?Number(e.drep_deposit):void 0,dRepInactivityPeriod:s.EpochNo(0),dRepVotingThresholds:null,desiredNumberOfPools:e.n_opt,governanceActionDeposit:e.gov_action_deposit?Number(e.gov_action_deposit):void 0,governanceActionValidityPeriod:s.EpochNo(0),maxBlockBodySize:e.max_block_size,maxBlockHeaderSize:e.max_block_header_size,maxCollateralInputs:Number(e.max_collateral_inputs),maxExecutionUnitsPerBlock:{memory:Number.parseInt(e.max_block_ex_mem),steps:Number.parseInt(e.max_block_ex_steps)},maxExecutionUnitsPerTransaction:{memory:Number.parseInt(e.max_tx_ex_mem),steps:Number.parseInt(e.max_tx_ex_steps)},maxTxSize:Number(e.max_tx_size),maxValueSize:Number(e.max_val_size),minCommitteeSize:0,minFeeCoefficient:e.min_fee_a,minFeeConstant:e.min_fee_b,minPoolCost:Number(e.min_pool_cost),monetaryExpansion:e.rho.toString(),poolDeposit:Number(e.pool_deposit),poolInfluence:e.a0.toString(),poolRetirementEpochBound:e.e_max,poolVotingThresholds:null,prices:{memory:e.price_mem,steps:e.price_step},protocolVersion:{major:e.protocol_major_ver,minor:e.protocol_minor_ver},stakeKeyDeposit:Number(e.key_deposit),treasuryExpansion:e.tau.toString()}),txOut:(e,t)=>{const r={coins:BigInt(e.amount.find(({unit:e})=>"lovelace"===e).quantity)};const s=new Map;for(const{quantity:i,unit:o}of e.amount)if("lovelace"!==o)s.set(n.AssetId(o),BigInt(i));if(s.size>0)r.assets=s;const u={address:a.PaymentAddress(e.address),value:r};if(e.inline_datum)u.datum=d.PlutusData.fromCbor((0,l.HexBlob)(e.inline_datum)).toCore();if(e.data_hash)u.datumHash=(0,c.Hash32ByteBase16)(e.data_hash);if(null==t?void 0:t.scriptReference)u.scriptReference=t.scriptReference;return u}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js":(e,t,r)=>{"use strict";r.d(t,{blockfrostMetadataToTxMetadata:()=>blockfrostMetadataToTxMetadata,fetchSequentially:()=>fetchSequentially,isBlockfrostNotFoundError:()=>isBlockfrostNotFoundError});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const a=e[s];r[s]="function"==typeof a?(...e)=>a(...e).catch(t):a;return r},{});const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(jsonToMetadatum)}return new Map(Object.keys(e).map(t=>[tryParseBigIntKey(t),jsonToMetadatum(e[t])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");const isBlockfrostNotFoundError=e=>e instanceof a.BlockfrostError&&404===e.status||e instanceof s.ProviderError&&e.reason===s.ProviderFailure.NotFound;const buildQueryString=({page:e,count:t,order:r})=>{let s="";const appendIfDefined=(e,t)=>{if(void 0!==e)s+=s?`&${t}`:t};appendIfDefined(e,`page=${e}`);appendIfDefined(t,`count=${t}`);appendIfDefined(r,`order=${r}`);return s};const fetchSequentially=async(e,t=[])=>{var r,s;const a=(null===(r=e.paginationOptions)||void 0===r?void 0:r.count)||100;const i=(null===(s=e.paginationOptions)||void 0===s?void 0:s.page)||1;try{var o,n;const d=await e.request(buildQueryString({count:a,order:null===(o=e.paginationOptions)||void 0===o?void 0:o.order,page:i}));const c=e.responseTranslator?e.responseTranslator(d):d;const l=[...t,...c];const u=null===(n=e.haveEnoughItems)||void 0===n?void 0:n.call(e,l,d);if(d.length===a&&!u){return fetchSequentially({...e,paginationOptions:{...e.paginationOptions,page:i+1}},l)}return l}catch(f){if(isBlockfrostNotFoundError(f)){return[]}throw f}};const blockfrostMetadataToTxMetadata=e=>e.reduce((e,t)=>{const{json_metadata:r,label:s}=t;if(!r||!s)return e;e.set(BigInt(s),jsonToMetadatum(r));return e},new Map)},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/version.js":(e,t,r)=>{"use strict";r.d(t,{apiVersion:()=>s});const s={assetInfo:"1.0.0",chainHistory:"3.1.0",handle:"1.0.0",networkInfo:"1.0.0",rewards:"1.0.0",root:"1.0.0",stakePool:"1.1.0",txSubmit:"2.0.0",utxo:"2.0.0"}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidFileError=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends s.CustomError{}t.InvalidFileError=InvalidFileError},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromMetadatum=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=a(r("../../node_modules/lodash/difference.js"));const isString=e=>"string"==typeof e;const f=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(c.asString);if(t.some(e=>void 0===e)){return}return t.join("")}return(0,c.asString)(e)};const mapOtherProperties=(e,t)=>{const r=(0,u.default)([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,d.asMetadatumMap)(e);if(!s)throw new n.InvalidFileError;const a=(0,c.asString)(s.get("name"));const i=(0,c.asString)(s.get("mediaType"));if(!i){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const l=metadatumToString(s.get("src"));if(!l){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,o.MediaType)(i),name:a,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,o.Uri)(l)}};const getPolicyMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||(()=>{for(const[r,a]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return a})());const getAssetMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||e.get(s.from(t,"hex").toString("utf8"))||(()=>{for(const[r,a]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return a})());const getName=(e,t,r,s,a=false)=>{const o=(0,c.asString)(e.get("name"));if(o)return o;if("1.0"===t){try{return i.AssetName.toUTF8(r.name,a)}catch(n){s.warn(n)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=(0,c.asString)(e);if(t&&f.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,s=false)=>{const a=null==t?void 0:t.get(721n);if(!a)return null;const n=(0,d.asMetadatumMap)(a);if(!n)return null;const u=getPolicyMetadata(n,e.policyId);if(!u)return null;const f=parseVersion(u.get("version"));if(!f)return null;const h=getAssetMetadata(u,e.name);if(!h)return null;const m=getName(h,f,e,r,true);const p=metadatumToString(h.get("image"));const v=i.AssetId.fromParts(e.policyId,e.name);if(s&&!m||!p){r.warn(missingFieldLogMessage(m?"image":"name",v,true));return null}const y=(0,c.asString)(h.get("mediaType"));const _=(0,d.asMetadatumArray)(h.get("files"));try{return{description:metadatumToString(h.get("description")),files:null==_?void 0:_.map(e=>mapFile(e,v,r)).filter(l.isNotNil),image:(0,o.Uri)(p),mediaType:y?(0,o.ImageMediaType)(y):void 0,name:m||"",otherProperties:mapOtherProperties(h,["name","image","mediaType","description","files"]),version:f}}catch(w){r.warn("Invalid CIP-25 metadata",h,w);return null}};t.fromMetadatum=fromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromPlutusData=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,o.isPlutusBigInt)(e)||(0,o.isPlutusBoundedBytes)(e))return e;if((0,o.isPlutusMap)(e)){const r=mapOtherProperties((0,o.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,o.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const mapFile=(e,t)=>{if(!(0,o.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:i,name:n,...d}=(0,o.tryConvertPlutusMapToUtf8Record)(e,t);const c=tryCoerce(r,s.MediaType,t);const l=tryCoerce(i,s.Uri,t);if("string"!=typeof l||"string"!=typeof c){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:c,name:(0,a.asString)(n),otherProperties:undefinedIfEmpty(mapOtherProperties(d,t)),src:l}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,o.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>mapFile(e,t)).filter(i.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const a=(0,o.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!a)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return a}});const fromPlutusData=(e,t,r=false)=>{const n=(0,i.contextLogger)(t,"NftMetadata.fromPlutusData");const d=getConditionalValidators(r,n);if(!d.isValidDatumShape(e)){return null}const[c,l]=e.fields.items;if(!(0,o.isPlutusMap)(c)||!(0,o.isPlutusBigInt)(l)){n.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const u=(0,o.tryConvertPlutusMapToUtf8Record)(c,n);const{name:f,image:h,mediaType:m,description:p,files:v,...y}=u;if(!d.isNameValid(f)){return null}if("string"!=typeof h){n.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const _=tryCoerce(h,s.Uri,n);if(!_){return null}return{description:(0,a.asString)(p),files:mapFiles(v,n),image:_,mediaType:tryCoerce(m,s.ImageMediaType,n),name:f||"",otherProperties:undefinedIfEmpty(mapOtherProperties(y,n)),version:l.toString()}};t.fromPlutusData=fromPlutusData},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.NftMetadata=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js");a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js"),t);t.NftMetadata={fromMetadatum:i.fromMetadatum,fromPlutusData:o.fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.MediaType=t.ImageMediaType=t.Uri=void 0;const o=i(r("../../node_modules/@biglup/is-cid/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return o.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new n.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};t.Uri=Uri;const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "image/*"')};t.ImageMediaType=ImageMediaType;const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "*/*"')};t.MediaType=MediaType},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asString=void 0;const asString=e=>"string"==typeof e?e:void 0;t.asString=asString},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.AssetNameLabelNum=t.AssetNameLabel=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js"));const d=8;const c="0";const AssetNameLabel=e=>e;t.AssetNameLabel=AssetNameLabel;t.AssetNameLabelNum={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new o.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>(0,n.default)(Uint8Array.from(s.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const r=e[0];const s=e[7];const a=e.slice(1,5);const i=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(r,s)||isInvalidChecksum(a,i)){return null}return(0,t.AssetNameLabel)(Number.parseInt(a,16))};t.AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const s=assetNameLabelHexToNum(t);if(null===s){return null}return{content:(0,i.AssetName)(r),label:s}};t.AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,i.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});let r=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)r=new Int32Array(r);const crc8=(e,t=0)=>{let s=Math.trunc(t);for(const a of e)s=255&r[(s^a)&255];return s};t["default"]=crc8},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;t.util=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.coalesceTokenMaps=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[a,i]of r.entries()){const o=t.get(a)||0n;t.set(a,o+i)}}if(0===t.size){return}return t};t.coalesceTokenMaps=coalesceTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.getAssetNameAsText=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js");const getAssetNameAsText=e=>{var t;const r=a.AssetId.getAssetName(e);const o=null===(t=i.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return s.from(o||r,"hex").toString("utf8")};t.getAssetNameAsText=getAssetNameAsText},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValidHandle=void 0;const r=new RegExp(/^[a-z0-9_.-]{1,15}$/);const s=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{s.lastIndex=0;return r.test(e)||s.test(e)||"0|0"===e};t.isValidHandle=isValidHandle},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.removeNegativesFromTokenMap=void 0;const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};t.removeNegativesFromTokenMap=removeNegativesFromTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.subtractTokenMaps=t.subtractMaps=void 0;const a=s(r("../../node_modules/lodash/uniq.js"));const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,i]of e.entries())if(0n!==i)r.set(s,i);return r}if(!e){const o=new Map;for(const[n,d]of t.entries())if(0n!==d)o.set(n,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=(0,a.default)(l);for(const v of p){const y=e.get(v);const _=t.get(v);const w=y-_;if(0n!==w)c.set(v,w)}return c};t.subtractMaps=subtractMaps;const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(t.subtractMaps)};t.subtractTokenMaps=subtractTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;Object.defineProperty(t,"__esModule",{value:true});t.isAddress=t.Address=t.CredentialType=t.AddressType=void 0;const l=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const _=1023;var w;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(w=t.AddressType||(t.AddressType={}));var g;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(g=t.CredentialType||(t.CredentialType={}));class Address{static fromBytes(e){const t=s.from(e,"hex");const r=t[0]>>4;let a;switch(r){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:a=u.BaseAddress.unpackParts(r,t);break;case w.PointerKey:case w.PointerScript:a=v.PointerAddress.unpackParts(r,t);break;case w.EnterpriseKey:case w.EnterpriseScript:a=h.EnterpriseAddress.unpackParts(r,t);break;case w.RewardKey:case w.RewardScript:a=y.RewardAddress.unpackParts(r,t);break;case w.Byron:a=f.ByronAddress.unpackParts(r,t);break;default:throw new m.InvalidArgumentError("data","Invalid address raw data")}return a}toBytes(){let e;switch(d(this,c,"f").type){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:e=u.BaseAddress.packParts(d(this,c,"f"));break;case w.PointerKey:case w.PointerScript:e=v.PointerAddress.packParts(d(this,c,"f"));break;case w.EnterpriseKey:case w.EnterpriseScript:e=h.EnterpriseAddress.packParts(d(this,c,"f"));break;case w.RewardKey:case w.RewardScript:e=y.RewardAddress.packParts(d(this,c,"f"));break;case w.Byron:e=f.ByronAddress.packParts(d(this,c,"f"));break;default:throw new Error("Invalid address")}return m.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(m.HexBlob.fromBytes(l.base58.decode(e)))}toBase58(){if(d(this,c,"f").type!==w.Byron)throw new Error("Only Byron addresses will be encoded in base58");return l.base58.encode(s.from(this.toBytes(),"hex"))}toBech32(){const e=l.bech32.toWords(s.from(this.toBytes(),"hex"));if(d(this,c,"f").type===w.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(d(this,c,"f").type,d(this,c,"f").networkId);const r=l.bech32.encode(t,e,_);return d(this,c,"f").type===w.RewardKey||(d(this,c,"f").type,w.RewardScript),r}static fromBech32(e){const{words:t}=l.bech32.decode(e,_);return Address.fromBytes(m.HexBlob.fromBytes(l.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,m.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(d(t,c,"f").type!==w.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return f.ByronAddress.fromAddress(this)}asReward(){return y.RewardAddress.fromAddress(this)}asPointer(){return v.PointerAddress.fromAddress(this)}asEnterprise(){return h.EnterpriseAddress.fromAddress(this)}asBase(){return u.BaseAddress.fromAddress(this)}getType(){return d(this,c,"f").type}getNetworkId(){if(d(this,c,"f").type===w.Byron){var e;if((null===(e=d(this,c,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return p.NetworkId.Mainnet;return p.NetworkId.Testnet}return d(this,c,"f").networkId}getProps(){return d(this,c,"f")}static getBech32Prefix(e,t){let r="";switch(e){case w.BasePaymentKeyStakeKey:case w.BasePaymentScriptStakeKey:case w.BasePaymentKeyStakeScript:case w.BasePaymentScriptStakeScript:case w.PointerKey:case w.PointerScript:case w.EnterpriseKey:case w.EnterpriseScript:r="addr";break;case w.RewardKey:case w.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){c.set(this,void 0);n(this,c,e,"f")}}t.Address=Address;c=new WeakMap;const isAddress=e=>Address.isValid(e);t.isAddress=isAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BaseAddress=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class BaseAddress{static fromCredentials(e,t,r){let s=l.AddressType.BasePaymentKeyStakeKey;if(t.type===l.CredentialType.ScriptHash)s|=1;if(r.type===l.CredentialType.ScriptHash)s|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:s})}getPaymentCredential(){return i(this,d,"f")}getStakeCredential(){return i(this,c,"f")}toAddress(){return new l.Address({delegationPart:i(this,c,"f"),networkId:i(this,n,"f"),paymentPart:i(this,d,"f"),type:i(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.BasePaymentKeyStakeKey:case l.AddressType.BasePaymentScriptStakeKey:case l.AddressType.BasePaymentKeyStakeScript:case l.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new f.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const a=(0,u.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));const i=(0,u.Hash28ByteBase16)(s.from(t.slice(29,57)).toString("hex"));const o=e===l.AddressType.BasePaymentKeyStakeScript||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;const n=e===l.AddressType.BasePaymentScriptStakeKey||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;return new l.Address({delegationPart:{hash:i,type:o},networkId:r,paymentPart:{hash:a,type:n},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,c,e.delegationPart,"f");a(this,o,e.type,"f")}}t.BaseAddress=BaseAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ByronAddress=t.ByronAddressType=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var h;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(h=t.ByronAddressType||(t.ByronAddressType={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:d.AddressType.Byron})}getAttributes(){return i(this,n,"f").attrs}getRoot(){return i(this,n,"f").root}getByronAddressType(){return i(this,n,"f").type}toAddress(){return new d.Address({byronAddressContent:i(this,n,"f"),type:i(this,o,"f")})}static fromAddress(e){return e.getProps().type===d.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:a}=e.byronAddressContent;let i=0;if(r.derivationPath)++i;if(r.magic)++i;const o=new c.CborWriter;o.writeStartArray(3);o.writeByteString(s.from(t,"hex"));o.writeStartMap(i);if(r.derivationPath){const n=new c.CborWriter().writeByteString(s.from(r.derivationPath,"hex")).encode();o.writeInt(1);o.writeByteString(n)}if(r.magic){const d=new c.CborWriter().writeInt(r.magic).encode();o.writeInt(2);o.writeByteString(d)}o.writeInt(a);const l=s.from(o.encodeAsHex(),"hex");o.reset();o.writeStartArray(2);o.writeTag(c.CborTag.EncodedCborDataItem);o.writeByteString(l);o.writeInt((0,f.crc32)(l));return o.encode()}static unpackParts(e,t){let r=new c.CborReader(u.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const a=r.readByteString();if(Number(r.readInt())!==(0,f.crc32)(a))throw new u.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new c.CborReader(u.HexBlob.fromBytes(a));r.readStartArray();const i=(0,l.Hash28ByteBase16)(s.from(r.readByteString()).toString("hex"));r.readStartMap();let o;let n;while(r.peekState()!==c.CborReaderState.EndMap){const h=r.readInt();switch(h){case 1n:{const m=r.readByteString();n=u.HexBlob.fromBytes(new c.CborReader(u.HexBlob.fromBytes(m)).readByteString());break}case 2n:{const p=r.readByteString();o=Number(new c.CborReader(u.HexBlob.fromBytes(p)).readInt());break}}}r.readEndMap();const v=Number(r.readInt());return new d.Address({byronAddressContent:{attrs:{derivationPath:n,magic:o},root:i,type:v},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);a(this,n,e.byronAddressContent,"f");a(this,o,e.type,"f")}}t.ByronAddress=ByronAddress;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.DRepID=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=1023;const f=28;const h=29;const DRepID=e=>{try{return(0,l.typedBech32)(e,["drep"],47)}catch{return(0,l.typedBech32)(e,["drep","drep_script"],45)}};t.DRepID=DRepID;t.DRepID.isValid=e=>{try{(0,t.DRepID)(e);return true}catch{return false}};t.DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===d.CredentialType.ScriptHash)t="drep_script";const r=n.bech32.toWords(s.from(e.hash,"hex"));return n.bech32.encode(t,r,u)};t.DRepID.cip129FromCredential=e=>{let t="22";if(e.type===d.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const a=n.bech32.toWords(s.from(r,"hex"));return n.bech32.encode("drep",a,u)};t.DRepID.toCredential=e=>{const{words:t}=n.bech32.decode(e,u);const r=n.bech32.fromWords(t);if(r.length!==f&&r.length!==h){throw new Error("Invalid DRepID payload")}if(r.length===f){const a=e.includes("drep_script");return{hash:(0,c.Hash28ByteBase16)(s.from(r).toString("hex")),type:a?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}}const i=r[0];const o=r.slice(1);const l=(32&i)===32;const m=(3&i)===3;if(!l){throw new Error("Invalid governance credential type")}return{hash:(0,c.Hash28ByteBase16)(s.from(o).toString("hex")),type:m?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}};t.DRepID.toCip105DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip105FromCredential(r)};t.DRepID.toCip129DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip129FromCredential(r)};t.DRepID.toAddress=e=>{const r=t.DRepID.toCredential(e);return new d.Address({paymentPart:r,type:r.type===d.CredentialType.KeyHash?d.AddressType.EnterpriseKey:d.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.EnterpriseAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===c.CredentialType.ScriptHash?c.AddressType.EnterpriseScript:c.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return i(this,d,"f")}toAddress(){return new c.Address({networkId:i(this,n,"f"),paymentPart:i(this,d,"f"),type:i(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.EnterpriseKey:case c.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const a=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:a,type:e===c.AddressType.EnterpriseScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,o,e.type,"f")}}t.EnterpriseAddress=EnterpriseAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.addressNetworkId=t.inputsWithAddresses=t.isAddressWithin=t.PaymentAddress=t.isRewardAccount=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const isRewardAccount=e=>{try{(0,o.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};t.isRewardAccount=isRewardAccount;const PaymentAddress=e=>{if(a.Address.isValid(e)){if((0,t.isRewardAccount)(e)||i.DRepID.isValid(e)){throw new o.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,o.assertIsHexString)(e)}catch{throw new o.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const r=a.Address.fromBytes(o.HexBlob.fromBytes(s.from(e,"hex")));return r.getType()===a.AddressType.Byron?r.toBase58():r.toBech32()};t.PaymentAddress=PaymentAddress;const isAddressWithin=e=>({address:t})=>e.includes(t);t.isAddressWithin=isAddressWithin;const inputsWithAddresses=(e,r)=>e.body.inputs.filter((0,t.isAddressWithin)(r));t.inputsWithAddresses=inputsWithAddresses;const addressNetworkId=e=>{const t=a.Address.fromString(e);return t.getNetworkId()};t.addressNetworkId=addressNetworkId},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.PointerAddress=t.CertIndex=t.TxIndex=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new f.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return s.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const a=e[s];r<<=7n;r|=BigInt(127&a);t=(128&a)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;t.TxIndex=TxIndex;const CertIndex=e=>e;t.CertIndex=CertIndex;class PointerAddress{static fromCredentials(e,t,r){let s=l.AddressType.PointerKey;if(t.type===l.CredentialType.ScriptHash)s&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:s})}getPaymentCredential(){return i(this,d,"f")}getStakePointer(){return i(this,c,"f")}toAddress(){return new l.Address({networkId:i(this,n,"f"),paymentPart:i(this,d,"f"),pointer:i(this,c,"f"),type:i(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.PointerKey:case l.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:a}=e.pointer;return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(a)])])}static unpackParts(e,r){if(r.length<=29)throw new f.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const a=15&r[0];const i=(0,u.Hash28ByteBase16)(s.from(r.slice(1,29)).toString("hex"));let o=29;const n=s.from(r);const{value:d,bytesRead:c}=variableLengthDecode(n.subarray(o));o+=c;const{value:h,bytesRead:m}=variableLengthDecode(n.subarray(o));o+=m;const{value:p}=variableLengthDecode(n.subarray(o));return new l.Address({networkId:a,paymentPart:{hash:i,type:e===l.AddressType.PointerScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash},pointer:{certIndex:(0,t.CertIndex)(Number(p)),slot:d,txIndex:(0,t.TxIndex)(Number(h))},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,c,e.pointer,"f");a(this,o,e.type,"f")}}t.PointerAddress=PointerAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createRewardAccount=t.RewardAccount=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,i.typedBech32)(e,["stake","stake_test"],47);t.RewardAccount=RewardAccount;t.RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;t.RewardAccount.fromCredential=(e,r)=>(0,t.RewardAccount)(o.RewardAddress.fromCredentials(r,{hash:e.hash,type:e.type}).toAddress().toBech32());t.RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,r)=>(0,t.RewardAccount)(o.RewardAddress.fromCredentials(r,{hash:(0,a.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32());t.createRewardAccount=createRewardAccount},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.RewardAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class RewardAddress{static fromCredentials(e,t){let r=c.AddressType.RewardKey;if(t.type===c.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return i(this,d,"f")}toAddress(){return new c.Address({networkId:i(this,n,"f"),paymentPart:i(this,d,"f"),type:i(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.RewardKey:case c.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const a=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:a,type:e===c.AddressType.RewardScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,n,e.networkId,"f");a(this,d,e.paymentPart,"f");a(this,o,e.type,"f")}}t.RewardAddress=RewardAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChainIds=t.NetworkMagics=t.NetworkId=void 0;var r;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(r=t.NetworkId||(t.NetworkId={}));var s;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(s=t.NetworkMagics||(t.NetworkMagics={}));t.ChainIds={Mainnet:{networkId:r.Mainnet,networkMagic:s.Mainnet},Preprod:{networkId:r.Testnet,networkMagic:s.Preprod},Preview:{networkId:r.Testnet,networkMagic:s.Preview},Sanchonet:{networkId:r.Testnet,networkMagic:s.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js"),t);t.util=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.AssetFingerprint=t.PolicyId=t.AssetId=t.AssetName=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/web-encoding/src/lib.js");const AssetName=e=>{if(e.length>0){(0,d.assertIsHexString)(e);if(e.length>64){throw new d.InvalidStringError("too long")}}return e.toLowerCase()};t.AssetName=AssetName;const l=new c.TextDecoder("utf8",{fatal:true});t.AssetName.toUTF8=(e,t=false)=>{const r=s.from(e,"hex");try{if(t){return l.decode(r.filter(e=>e>31))}return l.decode(r)}catch(a){throw new d.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,a)}};const AssetId=e=>{const t=e.split(".").join("");(0,d.assertIsHexString)(t);if(t.length>120)throw new d.InvalidStringError("too long");if(t.length<56)throw new d.InvalidStringError("too short");return t};t.AssetId=AssetId;const PolicyId=e=>n.Hash28ByteBase16(e);t.PolicyId=PolicyId;t.AssetId.getPolicyId=e=>(0,t.PolicyId)(e.slice(0,56));t.AssetId.getAssetName=e=>(0,t.AssetName)(e.slice(56));t.AssetId.fromParts=(e,r)=>(0,t.AssetId)(e+r);const AssetFingerprint=e=>(0,d.typedBech32)(e,"asset",32);t.AssetFingerprint=AssetFingerprint;t.AssetFingerprint.fromParts=(e,r)=>{const a=s.from(e,"hex");const i=s.from(r,"hex");const o=(0,d.HexBlob)(n.blake2b(20).update(new Uint8Array([...a,...i])).digest("hex"));return(0,t.AssetFingerprint)(d.HexBlob.toTypedBech32("asset",o))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeAuxiliaryDataHash=void 0;const o=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"));const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const computeAuxiliaryDataHash=e=>e?(0,d.Hash32ByteBase16)(o.blake2b(o.blake2b.BYTES).update((0,c.hexToBytes)(n.AuxiliaryData.fromCore(e).toCbor())).digest("hex")):void 0;t.computeAuxiliaryDataHash=computeAuxiliaryDataHash},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SlotLeader=t.GenesisDelegate=t.VrfVkBech32=t.BlockId=t.Slot=t.EpochNo=t.BlockNo=t.BlockSize=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js");const BlockSize=e=>e;t.BlockSize=BlockSize;const BlockNo=e=>e;t.BlockNo=BlockNo;const EpochNo=e=>e;t.EpochNo=EpochNo;const Slot=e=>e;t.Slot=Slot;const BlockId=e=>d.Hash32ByteBase16(e);t.BlockId=BlockId;const VrfVkBech32=e=>(0,c.typedBech32)(e,"vrf_vk",52);t.VrfVkBech32=VrfVkBech32;const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return d.Hash28ByteBase16(e)};t.GenesisDelegate=GenesisDelegate;const SlotLeader=e=>{try{return(0,l.PoolId)(e)}catch{try{return(0,t.GenesisDelegate)(e)}catch(r){throw new c.InvalidStringError("Expected either PoolId or GenesisDelegate",r)}}};t.SlotLeader=SlotLeader;t.VrfVkBech32.fromHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.VrfVkBech32)(n.bech32.encode("vrf_vk",r,1023))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.includesAnyCertificate=t.stakeKeyCertificates=t.createDelegationCert=t.createStakeDeregistrationCert=t.createStakeRegistrationCert=t.isCertType=t.VoteDelegationCredentialCertificateTypes=t.StakeCredentialCertificateTypes=t.RegAndDeregCertificateTypes=t.StakeDelegationCertificateTypes=t.StakeRegistrationCertificateTypes=t.PostConwayStakeRegistrationCertificateTypes=t.MirCertificateKind=t.MirCertificatePot=t.CertificateType=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");var i;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(i=t.CertificateType||(t.CertificateType={}));var o;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(o=t.MirCertificatePot||(t.MirCertificatePot={}));var n;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(n=t.MirCertificateKind||(t.MirCertificateKind={}));t.PostConwayStakeRegistrationCertificateTypes=[i.Registration,i.VoteRegistrationDelegation,i.StakeRegistrationDelegation,i.StakeVoteRegistrationDelegation];t.StakeRegistrationCertificateTypes=[i.StakeRegistration,...t.PostConwayStakeRegistrationCertificateTypes];t.StakeDelegationCertificateTypes=[i.StakeDelegation,i.StakeVoteDelegation,i.StakeRegistrationDelegation,i.StakeVoteRegistrationDelegation];t.RegAndDeregCertificateTypes=[...t.StakeRegistrationCertificateTypes,i.Unregistration,i.StakeDeregistration];t.StakeCredentialCertificateTypes=[...t.RegAndDeregCertificateTypes,...t.StakeDelegationCertificateTypes,i.VoteDelegation];t.VoteDelegationCredentialCertificateTypes=[i.VoteDelegation,i.VoteRegistrationDelegation,i.StakeVoteDelegation,i.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);t.isCertType=isCertType;const createStakeRegistrationCert=e=>({__typename:i.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createStakeRegistrationCert=createStakeRegistrationCert;const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:i.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}}:{__typename:i.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}};t.createStakeDeregistrationCert=createStakeDeregistrationCert;const createDelegationCert=(e,t)=>({__typename:i.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createDelegationCert=createDelegationCert;const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>(0,t.isCertType)(e,t.RegAndDeregCertificateTypes)?e:void 0).filter(a.isNotNil))||[]};t.stakeKeyCertificates=stakeKeyCertificates;const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false;t.includesAnyCertificate=includesAnyCertificate},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Cip1854ExtendedAccountPublicKey=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1023;const u="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,c.assertIsBech32WithPrefix)(e,[u])}catch{throw new c.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};t.Cip1854ExtendedAccountPublicKey=Cip1854ExtendedAccountPublicKey;t.Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.Cip1854ExtendedAccountPublicKey)(n.bech32.encode(u,r,l))};t.Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=n.bech32.decode(e,l);return(0,d.Bip32PublicKeyHex)(s.from(n.bech32.fromWords(t)).toString("hex"))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cip17FromMetadatum=t.portfolioMetadataFromCip17=t.DelegationMetadataLabel=t.StakeCredentialStatus=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");var a;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(a=t.StakeCredentialStatus||(t.StakeCredentialStatus={}));t.DelegationMetadataLabel=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};t.portfolioMetadataFromCip17=portfolioMetadataFromCip17;const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t};t.cip17FromMetadatum=cip17FromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDRepAlwaysNoConfidence=t.isDRepAlwaysAbstain=t.isDRepCredential=t.isDrepInfo=t.VoterType=t.Vote=t.GovernanceActionType=void 0;var r;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(r=t.GovernanceActionType||(t.GovernanceActionType={}));var s;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(s=t.Vote||(t.Vote={}));var a;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(a=t.VoterType||(t.VoterType={}));const isDrepInfo=e=>"id"in e&&"active"in e;t.isDrepInfo=isDrepInfo;const isDRepCredential=e=>"type"in e&&"hash"in e;t.isDRepCredential=isDRepCredential;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;t.isDRepAlwaysAbstain=isDRepAlwaysAbstain;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename;t.isDRepAlwaysNoConfidence=isDRepAlwaysNoConfidence},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusMapEncoding=t.PlutusListEncoding=void 0;var r;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(r=t.PlutusListEncoding||(t.PlutusListEncoding={}));var s;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(s=t.PlutusMapEncoding||(t.PlutusMapEncoding={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPlutusScript=t.isNativeScript=t.PlutusLanguageVersion=t.NativeScriptKind=t.ScriptType=void 0;var r;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(r=t.ScriptType||(t.ScriptType={}));var s;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(s=t.NativeScriptKind||(t.NativeScriptKind={}));var a;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(a=t.PlutusLanguageVersion||(t.PlutusLanguageVersion={}));const isNativeScript=e=>e.__type===r.Native;t.isNativeScript=isNativeScript;const isPlutusScript=e=>e.__type===r.Plutus;t.isPlutusScript=isPlutusScript},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExtendedPoolStatus=void 0;var r;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(r=t.ExtendedPoolStatus||(t.ExtendedPoolStatus={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PoolMdVk=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const PoolMdVk=e=>(0,s.typedBech32)(e,"poolmd_vk",52);t.PoolMdVk=PoolMdVk},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StakePoolEpochRewards=t.StakePoolStatus=void 0;var r;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(r=t.StakePoolStatus||(t.StakePoolStatus={}));class StakePoolEpochRewards{}t.StakePoolEpochRewards=StakePoolEpochRewards},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.VrfVkHex=t.PoolIdHex=t.PoolId=void 0;const o=i(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=1023;const PoolId=e=>(0,d.typedBech32)(e,"pool",45);t.PoolId=PoolId;t.PoolId.fromKeyHash=e=>d.HexBlob.toTypedBech32("pool",(0,d.HexBlob)(e));const PoolIdHex=e=>n.Hash28ByteBase16(e);t.PoolIdHex=PoolIdHex;const VrfVkHex=e=>(0,d.typedHex)(e,64);t.VrfVkHex=VrfVkHex;t.PoolId.toKeyHash=e=>{const{words:t}=o.bech32.decode(e,c);return n.Ed25519KeyHashHex(d.HexBlob.fromBytes(o.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.RedeemerPurpose=t.InputSource=t.TransactionId=void 0;const o=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const TransactionId=e=>o.Hash32ByteBase16(e);t.TransactionId=TransactionId;t.TransactionId.fromHexBlob=e=>o.Hash32ByteBase16.fromHexBlob(e);var n;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(n=t.InputSource||(t.InputSource={}));var d;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(d=t.RedeemerPurpose||(t.RedeemerPurpose={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.FractionUtils=void 0;const a=s(r("../../node_modules/fraction.js/fraction.js"));const toFractionJs=e=>{if("number"==typeof e){return new a.default(e)}const{numerator:t,denominator:r}=e;return new a.default(t,r)};t.FractionUtils={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addressesShareAnyKey=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?s.Address.fromString(e):e;if(!t){throw new a.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case s.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:{const i=t.asEnterprise();return{paymentId:{credential:i.getPaymentCredential()}}}case s.AddressType.PointerKey:case s.AddressType.PointerScript:{const o=t.asPointer();return{paymentId:{credential:o.getPaymentCredential()},stakeId:{pointer:o.getStakePointer()}}}case s.AddressType.RewardKey:case s.AddressType.RewardScript:{const n=t.asReward();return{stakeId:{credential:n.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)};t.addressesShareAnyKey=addressesShareAnyKey},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeImplicitCoin=void 0;const o=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"));const n=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"));const d=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=o.RewardAccount.toNetworkId(t[0]);return t.includes(o.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let s=0n;let a=0n;const i=0===r.length;const d=new Set(r.map(e=>n.PoolId.fromKeyHash((0,l.Ed25519KeyHashHex)(o.RewardAccount.toHash(e)))));for(const c of t){switch(c.__typename){case n.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,r))s+=e.stakeKeyDeposit;break;case n.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,r))a+=e.stakeKeyDeposit;break;case n.CertificateType.PoolRegistration:if(i||r.some(e=>c.poolParameters.owners.includes(e)))s+=e.poolDeposit;break;case n.CertificateType.PoolRetirement:if(i||d.has(c.poolId))a+=e.poolDeposit;break}}return{deposit:s,reclaimDeposit:a}};const computeConwayDeposits=(e,t,r,s)=>{let a=0n;let i=0n;for(const c of e){switch(c.__typename){case n.CertificateType.Registration:case n.CertificateType.StakeRegistrationDelegation:case n.CertificateType.VoteRegistrationDelegation:case n.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))a+=c.deposit;break;case n.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))i+=c.deposit;break;case n.CertificateType.RegisterDelegateRepresentative:case n.CertificateType.UnregisterDelegateRepresentative:if(!r||c.dRepCredential.type===o.CredentialType.KeyHash&&c.dRepCredential.hash===d.Hash28ByteBase16.fromEd25519KeyHashHex(r))c.__typename===n.CertificateType.RegisterDelegateRepresentative?a+=c.deposit:i+=c.deposit;break}}if(s)for(const l of s)a+=l.deposit;return{deposit:a,reclaimDeposit:i}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],a,i)=>{if(0===r.length&&(!i||0===i.length))return{deposit:0n,reclaimDeposit:0n};const o={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(o,r,s);const d=computeConwayDeposits(r,s,a,i);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>c.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:a=[]},i,o)=>{const{deposit:n,reclaimDeposit:d}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],i,o,s);const l=!!(null==i?void 0:i.length);const u=c.BigIntMath.sum(a.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(a,i):u;return{deposit:n,input:f+d,reclaimDeposit:d,withdrawals:f}};t.computeImplicitCoin=computeImplicitCoin},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.computeMinUtxoValue=void 0;const computeMinUtxoValue=e=>29n*e;t.computeMinUtxoValue=computeMinUtxoValue},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.estimateStakePoolAPY=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:i,pledge:o}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,s.Percent)(Number(i)/Number(t-o)/(r/a)*365)};t.estimateStakePoolAPY=estimateStakePoolAPY},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isScriptAddress=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const isScriptAddress=e=>{const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const a=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==a?void 0:a.type)===s.CredentialType.ScriptHash};t.isScriptAddress=isScriptAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPhase2ValidationErrTx=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals;t.isPhase2ValidationErrTx=isPhase2ValidationErrTx},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryConvertPlutusMapToUtf8Record=t.isPlutusBigInt=t.isConstrPlutusData=t.isPlutusMap=t.isPlutusList=t.isAnyPlutusDataCollection=t.isPlutusBoundedBytes=void 0;const s=r("../../node_modules/web-encoding/src/lib.js");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);t.isPlutusBoundedBytes=isPlutusBoundedBytes;const isAnyPlutusDataCollection=e=>"object"==typeof e&&!(0,t.isPlutusBoundedBytes)(e);t.isAnyPlutusDataCollection=isAnyPlutusDataCollection;const isPlutusList=e=>(0,t.isAnyPlutusDataCollection)(e)&&"items"in e;t.isPlutusList=isPlutusList;const isPlutusMap=e=>(0,t.isAnyPlutusDataCollection)(e)&&"data"in e;t.isPlutusMap=isPlutusMap;const isConstrPlutusData=e=>(0,t.isAnyPlutusDataCollection)(e)&&"fields"in e;t.isConstrPlutusData=isConstrPlutusData;const isPlutusBigInt=e=>"bigint"==typeof e;t.isPlutusBigInt=isPlutusBigInt;const a=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!(0,t.isPlutusBoundedBytes)(e))return e;try{return a.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,a]of e.data.entries()){const i=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof i){t.warn("Failed to decode plutus map key",s);continue}r[i]=tryConvertPlutusDataToUtf8String(a)}return r};t.tryConvertPlutusMapToUtf8Record=tryConvertPlutusMapToUtf8Record},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveInputValue=void 0;const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};t.resolveInputValue=resolveInputValue},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CardanoNodeUtil=void 0;i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js"),t);t.CardanoNodeUtil=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js"))},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StateQueryError=t.TxSubmissionError=t.ChainSyncError=t.GeneralCardanoNodeError=t.CardanoNodeError=t.TxSubmissionErrorCode=t.StateQueryErrorCode=t.ChainSyncErrorCode=t.GeneralCardanoNodeErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(a=t.GeneralCardanoNodeErrorCode||(t.GeneralCardanoNodeErrorCode={}));var i;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(i=t.ChainSyncErrorCode||(t.ChainSyncErrorCode={}));var o;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(o=t.StateQueryErrorCode||(t.StateQueryErrorCode={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n=t.TxSubmissionErrorCode||(t.TxSubmissionErrorCode={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}t.CardanoNodeError=CardanoNodeError;class GeneralCardanoNodeError extends CardanoNodeError{}t.GeneralCardanoNodeError=GeneralCardanoNodeError;class ChainSyncError extends CardanoNodeError{}t.ChainSyncError=ChainSyncError;class TxSubmissionError extends CardanoNodeError{}t.TxSubmissionError=TxSubmissionError;class StateQueryError extends CardanoNodeError{}t.StateQueryError=StateQueryError},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDrepNotRegistered=t.isUnknownCredential=t.isDrepAlreadyRegistered=t.isCredentialAlreadyRegistered=t.isUnknownOutputReferences=t.isIncompleteWithdrawalsError=t.isValueNotConservedError=t.isOutsideOfValidityIntervalError=t.isProviderError=t.asTxSubmissionErrorCode=t.asGeneralCardanoNodeErrorCode=t.asStateQueryErrorCode=t.asChainSyncErrorCode=t.isGeneralCardanoNodeErrorCode=t.isStateQueryErrorCode=t.isTxSubmissionErrorCode=t.isChainSyncErrorCode=t.asCardanoNodeError=t.asGeneralCardanoNodeError=t.asStateQueryError=t.asChainSyncError=t.asTxSubmissionError=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,i.isProductionEnvironment)())(0,i.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,i.isProductionEnvironment)())(0,i.stripStackTrace)(t);return t}return null};t.asTxSubmissionError=asSpecificCardanoNodeError(s.TxSubmissionError);t.asChainSyncError=asSpecificCardanoNodeError(s.ChainSyncError);t.asStateQueryError=asSpecificCardanoNodeError(s.StateQueryError);t.asGeneralCardanoNodeError=asSpecificCardanoNodeError(s.GeneralCardanoNodeError);const asCardanoNodeError=e=>(0,t.asGeneralCardanoNodeError)(e)||(0,t.asTxSubmissionError)(e)||(0,t.asStateQueryError)(e)||(0,t.asChainSyncError)(e)||new s.GeneralCardanoNodeError(s.GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');t.asCardanoNodeError=asCardanoNodeError;const o=new Set(Object.values(s.StateQueryErrorCode));const n=new Set(Object.values(s.GeneralCardanoNodeErrorCode));const d=new Set(Object.values(s.TxSubmissionErrorCode));const c=new Set(Object.values(s.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&c.has(e);t.isChainSyncErrorCode=isChainSyncErrorCode;const isTxSubmissionErrorCode=e=>"number"==typeof e&&d.has(e);t.isTxSubmissionErrorCode=isTxSubmissionErrorCode;const isStateQueryErrorCode=e=>"number"==typeof e&&o.has(e);t.isStateQueryErrorCode=isStateQueryErrorCode;const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&n.has(e);t.isGeneralCardanoNodeErrorCode=isGeneralCardanoNodeErrorCode;const asChainSyncErrorCode=e=>(0,t.isChainSyncErrorCode)(e)?e:null;t.asChainSyncErrorCode=asChainSyncErrorCode;const asStateQueryErrorCode=e=>(0,t.isStateQueryErrorCode)(e)?e:null;t.asStateQueryErrorCode=asStateQueryErrorCode;const asGeneralCardanoNodeErrorCode=e=>(0,t.isGeneralCardanoNodeErrorCode)(e)?e:null;t.asGeneralCardanoNodeErrorCode=asGeneralCardanoNodeErrorCode;const asTxSubmissionErrorCode=e=>(0,t.isTxSubmissionErrorCode)(e)?e:null;t.asTxSubmissionErrorCode=asTxSubmissionErrorCode;const isProviderError=e=>e instanceof a.ProviderError;t.isProviderError=isProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.OutsideOfValidityInterval;t.isOutsideOfValidityIntervalError=isOutsideOfValidityIntervalError;const isValueNotConservedError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.ValueNotConserved;t.isValueNotConservedError=isValueNotConservedError;const isIncompleteWithdrawalsError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.IncompleteWithdrawals;t.isIncompleteWithdrawalsError=isIncompleteWithdrawalsError;const isUnknownOutputReferences=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownOutputReferences;t.isUnknownOutputReferences=isUnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.CredentialAlreadyRegistered;t.isCredentialAlreadyRegistered=isCredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepAlreadyRegistered;t.isDrepAlreadyRegistered=isDrepAlreadyRegistered;const isUnknownCredential=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownCredential;t.isUnknownCredential=isUnknownCredential;const isDrepNotRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepNotRegistered;t.isDrepNotRegistered=isDrepNotRegistered},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toLiveStake=void 0;const toLiveStake=e=>[...e.values()].reduce((e,{stake:t})=>e+t.pool,BigInt(0));t.toLiveStake=toLiveStake},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.handleProviderPaths=void 0;t.handleProviderPaths={getPolicyIds:"/policyIds",healthCheck:"/health",resolveHandles:"/resolve"}},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SortFields=t.isPoolROSSortField=t.isPoolAPYSortField=t.isPoolMetricsSortField=t.isPoolDataSortField=t.PoolROSSortFields=t.PoolAPYSortFields=t.PoolMetricsSortFields=t.PoolDataSortFields=void 0;t.PoolDataSortFields=["cost","name","margin","pledge","ticker"];t.PoolMetricsSortFields=["blocks","liveStake","saturation"];t.PoolAPYSortFields=["apy"];t.PoolROSSortFields=["ros","lastRos"];const isPoolDataSortField=e=>t.PoolDataSortFields.includes(e);t.isPoolDataSortField=isPoolDataSortField;const isPoolMetricsSortField=e=>t.PoolMetricsSortFields.includes(e);t.isPoolMetricsSortField=isPoolMetricsSortField;const isPoolAPYSortField=e=>t.PoolAPYSortFields.includes(e);t.isPoolAPYSortField=isPoolAPYSortField;const isPoolROSSortField=e=>t.PoolROSSortFields.includes(e);t.isPoolROSSortField=isPoolROSSortField;t.SortFields=[...t.PoolDataSortFields,...t.PoolMetricsSortFields,...t.PoolAPYSortFields,...t.PoolROSSortFields]},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.ProviderUtil=void 0;i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js"),t);t.ProviderUtil=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js"));i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;Object.defineProperty(t,"__esModule",{value:true});t.ProviderFactory=void 0;class ProviderFactory{register(e,t){r(this,s,"f").set(e,t)}create(e,t,a){if(!r(this,s,"f").has(e))throw new Error(`Provider unsupported: ${e}`);return r(this,s,"f").get(e)(t,a)}getProviders(){return[...r(this,s,"f").keys()]}constructor(){s.set(this,new Map)}}t.ProviderFactory=ProviderFactory;s=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.jsonToMetadatum=t.withProviderErrors=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const a=e[s];r[s]="function"==typeof a?(...e)=>a(...e).catch(t):a;return r},{});t.withProviderErrors=withProviderErrors;const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(t.jsonToMetadatum)}return new Map(Object.keys(e).map(r=>[tryParseBigIntKey(r),(0,t.jsonToMetadatum)(e[r])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};t.jsonToMetadatum=jsonToMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o,n,d,c,l,u,f,h,m,p;Object.defineProperty(t,"__esModule",{value:true});t.AuxiliaryData=t.ALONZO_AUX_TAG=t.SHELLEY_ERA_FIELDS_COUNT=void 0;const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");t.SHELLEY_ERA_FIELDS_COUNT=2;t.ALONZO_AUX_TAG=259;class AuxiliaryData{toCbor(){if(s(this,f,"f"))return s(this,f,"f");const e=new v.CborWriter;const r=s(this,i,"m",h).call(this);if(1===r&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));else if(r===t.SHELLEY_ERA_FIELDS_COUNT&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0&&void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeStartArray(r);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));e.writeStartArray(s(this,d,"f").length);for(const a of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(a.toCbor()))}else{e.writeTag(t.ALONZO_AUX_TAG);e.writeStartMap(r);if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()))}if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeInt(1n);e.writeStartArray(s(this,d,"f").length);for(const o of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(o.toCbor()))}if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0){e.writeInt(2n);e.writeStartArray(s(this,c,"f").length);for(const m of s(this,c,"f"))e.writeEncodedValue((0,P.hexToBytes)(m.toCbor()))}if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0){e.writeInt(3n);e.writeStartArray(s(this,l,"f").length);for(const p of s(this,l,"f"))e.writeEncodedValue((0,P.hexToBytes)(p.toCbor()))}if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0){e.writeInt(4n);e.writeStartArray(s(this,u,"f").length);for(const y of s(this,u,"f"))e.writeEncodedValue((0,P.hexToBytes)(y.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const r=new v.CborReader(e);const s=new AuxiliaryData;const i=r.peekState();if(i===v.CborReaderState.StartMap)a(s,n,y.GeneralTransactionMetadata.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())),"f");else if(i===v.CborReaderState.Tag){const o=r.readTag();if(o!==t.ALONZO_AUX_TAG){throw new _.InvalidArgumentError("cbor",`Expected tag '${t.ALONZO_AUX_TAG}', but got ${o}.`)}r.readStartMap();while(r.peekState()!==v.CborReaderState.EndMap){const d=r.readInt();switch(d){case 0n:a(s,n,y.GeneralTransactionMetadata.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())),"f");break;case 1n:s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(w.NativeScript.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 2n:s.setPlutusV1Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV1Scripts().push(w.PlutusV1Script.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 3n:s.setPlutusV2Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV2Scripts().push(w.PlutusV2Script.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 4n:s.setPlutusV3Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV3Scripts().push(w.PlutusV3Script.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break}}r.readEndMap()}else{r.readStartArray();a(s,n,y.GeneralTransactionMetadata.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())),"f");s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(w.NativeScript.fromCbor(_.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}a(s,f,e,"f");return s}toCore(){const e=s(this,i,"m",m).call(this);const t={blob:s(this,n,"f")?s(this,n,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(y.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=s(AuxiliaryData,o,"m",p).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return s(this,n,"f")}setMetadata(e){a(this,n,e,"f");a(this,f,void 0,"f")}nativeScripts(){return s(this,d,"f")}setNativeScripts(e){a(this,d,e,"f");a(this,f,void 0,"f")}plutusV1Scripts(){return s(this,c,"f")}setPlutusV1Scripts(e){a(this,c,e,"f");a(this,f,void 0,"f")}plutusV2Scripts(){return s(this,l,"f")}setPlutusV2Scripts(e){a(this,l,e,"f");a(this,f,void 0,"f")}plutusV3Scripts(){return s(this,u,"f")}setPlutusV3Scripts(e){a(this,u,e,"f");a(this,f,void 0,"f")}constructor(){i.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}t.AuxiliaryData=AuxiliaryData;o=AuxiliaryData,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,i=new WeakSet,h=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)++e;if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0)++e;if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0)++e;if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0)++e;if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0)++e;return e},m=function _AuxiliaryData_getCoreScripts(){const e=s(this,c,"f")?s(this,c,"f").map(e=>e.toCore()):[];const t=s(this,l,"f")?s(this,l,"f").map(e=>e.toCore()):[];const r=s(this,u,"f")?s(this,u,"f").map(e=>e.toCore()):[];const a=s(this,d,"f")?s(this,d,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...a]},p=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case g.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(w.NativeScript.fromCore(r));break;case g.ScriptType.Plutus:if(r.version===g.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(w.PlutusV1Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(w.PlutusV2Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(w.PlutusV3Script.fromCore(r))}break;default:throw new b.SerializationError(b.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.GeneralTransactionMetadata=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class GeneralTransactionMetadata{toCbor(){if(a(this,o,"f"))return a(this,o,"f");const e=new n.CborWriter;e.writeStartMap(a(this,i,"f").size);for(const[t,r]of a(this,i,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,l.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new n.CborReader(e);r.readStartMap();while(r.peekState()!==n.CborReaderState.EndMap){const s=r.readInt();const a=c.TransactionMetadatum.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,a)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...a(this,i,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],c.TransactionMetadatum.fromCore(e[1])])))}metadata(){return a(this,i,"f")}setMetadata(e){s(this,i,e,"f");s(this,o,void 0,"f")}equals(e){if(a(this,o,"f")===a(e,o,"f"))return true;if(a(this,i,"f").size!==a(e,i,"f").size)return false;const t=[...a(this,i,"f").entries()];const r=[...a(e,i,"f").entries()];for(let s=0;s<a(this,i,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.GeneralTransactionMetadata=GeneralTransactionMetadata;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumList=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumList{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartArray();else e.writeStartArray(s(this,i,"f").length);for(const t of s(this,i,"f"))e.writeEncodedValue((0,l.hexToBytes)(t.toCbor()));if(s(this,o,"f"))e.writeEndArray();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new n.CborReader(e);const s=r.readStartArray();if(null===s)a(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndArray){t.add(c.TransactionMetadatum.fromCbor((0,l.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,i,"f").length}get(e){return s(this,i,"f")[e]}add(e){s(this,i,"f").push(e)}equals(e){if(s(this,i,"f").length!==s(e,i,"f").length)return false;for(let t=0;t<s(this,i,"f").length;++t)if(!s(this,i,"f")[t].equals(s(e,i,"f")[t]))return false;return true}constructor(){i.set(this,new Array);o.set(this,false)}}t.MetadatumList=MetadatumList;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumMap{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartMap();else e.writeStartMap(s(this,i,"f").size);for(const[t,r]of s(this,i,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,o,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)a(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const i=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(i,d)}r.readEndMap();return t}getLength(){return s(this,i,"f").size}insert(e,t){s(this,i,"f").set(e,t)}get(e){if(!s(this,i,"f"))return;const t=[...s(this,i,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new c.MetadatumList;for(const t of s(this,i,"f").keys())e.add(t);return e}equals(e){if(s(this,o,"f")!==s(e,o,"f"))return false;if(s(this,i,"f").size!==s(e,i,"f").size)return false;const t=[...s(this,i,"f").entries()];const r=[...s(e,i,"f").entries()];for(let a=0;a<s(this,i,"f").size;++a){if(!t[a][0].equals(r[a][0]))return false;if(!t[a][1].equals(r[a][1]))return false}return true}constructor(){i.set(this,new Map);o.set(this,false)}}t.MetadatumMap=MetadatumMap;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatum=void 0;const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?s.from(e,"utf8").length:e.length;if(t>64)throw new y.SerializationError(y.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(a(this,f,"f"))return a(this,f,"f");let e;switch(a(this,u,"f")){case _.TransactionMetadatumKind.Map:e=a(this,o,"f").toCbor();break;case _.TransactionMetadatumKind.List:e=a(this,n,"f").toCbor();break;case _.TransactionMetadatumKind.Bytes:{const t=new h.CborWriter;check64Length(a(this,c,"f"));t.writeByteString(a(this,c,"f"));e=(0,w.bytesToHex)(t.encode());break}case _.TransactionMetadatumKind.Text:{const r=new h.CborWriter;check64Length(a(this,l,"f"));r.writeTextString(a(this,l,"f"));e=(0,w.bytesToHex)(r.encode());break}case _.TransactionMetadatumKind.Integer:{const s=new h.CborWriter;if(a(this,d,"f")>=0&&a(this,d,"f")<=g||a(this,d,"f")<0&&a(this,d,"f")>=-1n-g)s.writeInt(a(this,d,"f"));else s.writeBigInteger(a(this,d,"f"));e=(0,w.bytesToHex)(s.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new h.CborReader(e);const s=r.peekState();switch(s){case h.CborReaderState.Tag:{const a=r.peekTag();switch(a){case h.CborTag.UnsignedBigNum:{r.readTag();const y=r.readByteString();i(t,d,TransactionMetadatum.bufferToBigint(y),"f");i(t,u,_.TransactionMetadatumKind.Integer,"f");break}case h.CborTag.NegativeBigNum:{r.readTag();const w=r.readByteString();i(t,d,TransactionMetadatum.bufferToBigint(w)*-1n,"f");i(t,u,_.TransactionMetadatumKind.Integer,"f");break}}break}case h.CborReaderState.NegativeInteger:case h.CborReaderState.UnsignedInteger:i(t,d,r.readInt(),"f");i(t,u,_.TransactionMetadatumKind.Integer,"f");break;case h.CborReaderState.StartIndefiniteLengthByteString:case h.CborReaderState.ByteString:i(t,c,r.readByteString(),"f");i(t,u,_.TransactionMetadatumKind.Bytes,"f");break;case h.CborReaderState.StartIndefiniteLengthTextString:case h.CborReaderState.TextString:i(t,l,r.readTextString(),"f");i(t,u,_.TransactionMetadatumKind.Text,"f");break;case h.CborReaderState.StartArray:i(t,n,p.MetadatumList.fromCbor(m.HexBlob.fromBytes(r.readEncodedValue())),"f");i(t,u,_.TransactionMetadatumKind.List,"f");break;case h.CborReaderState.StartMap:i(t,o,v.MetadatumMap.fromCbor(m.HexBlob.fromBytes(r.readEncodedValue())),"f");i(t,u,_.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}i(t,f,e,"f");return t}toCore(){switch(a(this,u,"f")){case _.TransactionMetadatumKind.Bytes:return new Uint8Array(a(this,c,"f"));case _.TransactionMetadatumKind.Text:return a(this,l,"f");case _.TransactionMetadatumKind.Integer:return a(this,d,"f");case _.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(a(this,n,"f"));case _.TransactionMetadatumKind.Map:{const e=a(this,o,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const i=r.get(s);t.set(i.toCore(),e.get(i).toCore())}return t}default:throw new y.NotImplementedError(`TransactionMetadatum mapping for kind ${a(this,u,"f")}`)}}static fromCore(e){if(null===e)throw new y.SerializationError(y.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new y.SerializationError(y.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new p.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new v.MetadatumMap;for(const[a,i]of e.entries())s.insert(TransactionMetadatum.fromCore(a),TransactionMetadatum.fromCore(i));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;i(t,o,e,"f");i(t,u,_.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;i(t,n,e,"f");i(t,u,_.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;i(t,d,e,"f");i(t,u,_.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;i(t,c,e,"f");i(t,u,_.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;i(t,l,e,"f");i(t,u,_.TransactionMetadatumKind.Text,"f");return t}getKind(){return a(this,u,"f")}asMap(){return a(this,o,"f")}asList(){return a(this,n,"f")}asInteger(){return a(this,d,"f")}asBytes(){return a(this,c,"f")}asText(){return a(this,l,"f")}equals(e){let t=false;switch(a(this,u,"f")){case _.TransactionMetadatumKind.Bytes:if(a(this,c,"f")&&a(e,c,"f")){return a(this,c,"f").length===a(e,c,"f").length&&a(this,c,"f").every((t,r)=>t===a(e,c,"f")[r])}return false;case _.TransactionMetadatumKind.Integer:return a(this,d,"f")===a(e,d,"f");case _.TransactionMetadatumKind.Text:return a(this,l,"f")===a(e,l,"f");case _.TransactionMetadatumKind.List:if(a(this,n,"f")&&a(e,n,"f")){return a(this,n,"f").equals(a(e,n,"f"))}return false;case _.TransactionMetadatumKind.Map:if(a(this,o,"f")&&a(e,o,"f")){return a(this,o,"f").equals(a(e,o,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,_.TransactionMetadatumKind.Map);f.set(this,void 0)}}t.TransactionMetadatum=TransactionMetadatum;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatumKind=void 0;var r;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(r=t.TransactionMetadatumKind||(t.TransactionMetadatumKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborAdditionalInfo=void 0;var r;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(r=t.CborAdditionalInfo||(t.CborAdditionalInfo={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.CborInitialByte=void 0;class CborInitialByte{CborInitialByte(e,t){r(this,a,e<<5|t,"f")}static from(e){const t=new CborInitialByte;r(t,a,e,"f");return t}getInitialByte(){return s(this,a,"f")}getMajorType(){return s(this,a,"f")>>5}getAdditionalInfo(){return s(this,a,"f")&CborInitialByte.AdditionalInformationMask}constructor(){a.set(this,void 0)}}t.CborInitialByte=CborInitialByte;a=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborMajorType=void 0;var r;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(r=t.CborMajorType||(t.CborMajorType={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I;Object.defineProperty(t,"__esModule",{value:true});t.CborReader=void 0;const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js");const F=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const G="Unexpected end of buffer";class CborReader{peekState(){if(i(this,h,"f")===D.CborReaderState.Undefined)a(this,h,i(this,o,"m",C).call(this),"f");return i(this,h,"f")}getBytesRemaining(){return i(this,d,"f").length-i(this,c,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=i(this,c,"f");let t=0;do{t=i(this,o,"m",I).call(this,t)}while(t>0)return i(this,d,"f").slice(e,i(this,c,"f"))}readStartArray(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Array);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){i(this,o,"m",P).call(this,1);i(this,o,"m",y).call(this,R.CborMajorType.Array);return null}const t=i(this,o,"m",g).call(this);const{length:r,bytesRead:s}=i(CborReader,n,"m",k).call(CborReader,e,t);i(this,o,"m",P).call(this,s);i(this,o,"m",y).call(this,R.CborMajorType.Array,r);return r}readEndArray(){if(void 0===i(this,f,"f").definiteLength){i(this,o,"m",v).call(this);i(this,o,"m",_).call(this,R.CborMajorType.Array);i(this,o,"m",b).call(this);i(this,o,"m",P).call(this,1)}else{i(this,o,"m",_).call(this,R.CborMajorType.Array);i(this,o,"m",b).call(this)}}readInt(){const e=i(this,o,"m",x).call(this);i(this,o,"m",P).call(this,e.bytesRead);i(this,o,"m",b).call(this);return e.signedInt}readUInt(){const e=i(this,o,"m",j).call(this);i(this,o,"m",P).call(this,e.bytesRead);i(this,o,"m",b).call(this);return e.unsignedInt}readDouble(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Simple);let t;const r=i(this,o,"m",g).call(this);switch(e.getAdditionalInfo()){case B.CborAdditionalInfo.Additional16BitData:i(this,o,"m",S).call(this,3);t=(0,O.decodeHalf)(r.slice(1));i(this,o,"m",P).call(this,3);i(this,o,"m",b).call(this);return t;case B.CborAdditionalInfo.Additional32BitData:i(this,o,"m",S).call(this,5);t=s.from(r).readFloatBE(1);i(this,o,"m",P).call(this,5);i(this,o,"m",b).call(this);return t;case B.CborAdditionalInfo.Additional64BitData:i(this,o,"m",S).call(this,9);t=s.from(r).readDoubleBE(1);i(this,o,"m",P).call(this,9);i(this,o,"m",b).call(this);return t;default:throw new F.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Simple);if((e.getInitialByte()&M.CborInitialByte.AdditionalInformationMask)<B.CborAdditionalInfo.Additional8BitData){i(this,o,"m",P).call(this,1);i(this,o,"m",b).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===B.CborAdditionalInfo.Additional8BitData){i(this,o,"m",S).call(this,2);const t=i(this,d,"f")[i(this,c,"f")+1];i(this,o,"m",P).call(this,2);i(this,o,"m",b).call(this);return t}throw new F.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=i(this,o,"m",m).call(this,R.CborMajorType.NegativeInteger);const t=i(CborReader,n,"m",A).call(CborReader,e,i(this,o,"m",g).call(this));i(this,o,"m",P).call(this,t.bytesRead);i(this,o,"m",b).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=i(this,o,"m",m).call(this,R.CborMajorType.Map);if(t.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){i(this,o,"m",P).call(this,1);i(this,o,"m",y).call(this,R.CborMajorType.Map);e=null}else{const r=i(this,o,"m",g).call(this);const s=i(CborReader,n,"m",k).call(CborReader,t,r);if(2*s.length>r.length-s.bytesRead)throw new F.CborContentException("Definite length exceeds buffer size");i(this,o,"m",P).call(this,s.bytesRead);i(this,o,"m",y).call(this,R.CborMajorType.Map,2*s.length);e=s.length}i(this,f,"f").currentKeyOffset=i(this,c,"f");return e}readEndMap(){if(void 0===i(this,f,"f").definiteLength){i(this,o,"m",v).call(this);if(i(this,f,"f").itemsRead%2!==0)throw new F.CborContentException("Key missing value");i(this,o,"m",_).call(this,R.CborMajorType.Map);i(this,o,"m",b).call(this);i(this,o,"m",P).call(this,1)}else{i(this,o,"m",_).call(this,R.CborMajorType.Map);i(this,o,"m",b).call(this)}}readBoolean(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==B.CborAdditionalInfo.AdditionalTrue&&t!==B.CborAdditionalInfo.AdditionalFalse)throw new F.CborContentException("Not a boolean encoding");const r=t===B.CborAdditionalInfo.AdditionalTrue;i(this,o,"m",P).call(this,1);i(this,o,"m",b).call(this);return r}readNull(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==B.CborAdditionalInfo.AdditionalNull)throw new F.CborContentException("Not a null encoding");i(this,o,"m",P).call(this,1);i(this,o,"m",b).call(this)}readStartIndefiniteLengthByteString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength)throw new F.CborInvalidOperationException("Not indefinite length string");i(this,o,"m",P).call(this,1);i(this,o,"m",y).call(this,R.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){i(this,o,"m",v).call(this);i(this,o,"m",_).call(this,R.CborMajorType.ByteString);i(this,o,"m",b).call(this);i(this,o,"m",P).call(this,1)}readByteString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=i(this,o,"m",T).call(this,R.CborMajorType.ByteString);i(this,o,"m",P).call(this,r);i(this,o,"m",b).call(this);return t}const s=i(this,o,"m",g).call(this);const{length:a,bytesRead:d}=i(CborReader,n,"m",k).call(CborReader,e,s);i(this,o,"m",S).call(this,d+a);i(this,o,"m",P).call(this,d+a);i(this,o,"m",b).call(this);return s.slice(d,d+a)}readDefiniteLengthByteString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){throw new F.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=i(this,o,"m",g).call(this);const{length:r,bytesRead:s}=i(CborReader,n,"m",k).call(CborReader,e,t);i(this,o,"m",S).call(this,s+r);i(this,o,"m",P).call(this,s+r);i(this,o,"m",b).call(this);return t.slice(s,s+r)}readStartIndefiniteLengthTextString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength)throw new F.CborInvalidOperationException("Not indefinite length string");i(this,o,"m",P).call(this,1);i(this,o,"m",y).call(this,R.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){i(this,o,"m",v).call(this);i(this,o,"m",_).call(this,R.CborMajorType.Utf8String);i(this,o,"m",b).call(this);i(this,o,"m",P).call(this,1)}readTextString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=i(this,o,"m",T).call(this,R.CborMajorType.Utf8String);i(this,o,"m",P).call(this,r);i(this,o,"m",b).call(this);return s.from(t).toString("utf8")}const a=i(this,o,"m",g).call(this);const{length:d,bytesRead:c}=i(CborReader,n,"m",k).call(CborReader,e,a);i(this,o,"m",S).call(this,c+d);i(this,o,"m",P).call(this,c+d);i(this,o,"m",b).call(this);return s.from(a.slice(c,c+d)).toString("utf8")}readDefiniteLengthTextString(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){throw new F.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=i(this,o,"m",g).call(this);const{length:r,bytesRead:a}=i(CborReader,n,"m",k).call(CborReader,e,t);i(this,o,"m",S).call(this,a+r);i(this,o,"m",P).call(this,a+r);i(this,o,"m",b).call(this);return s.from(t.slice(a,a+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=i(this,o,"m",E).call(this);i(this,o,"m",P).call(this,t);a(this,u,true,"f");return e}peekTag(){const{tag:e}=i(this,o,"m",E).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new F.CborContentException(G)}}static mapSimpleValueDataToReaderState(e){switch(e){case B.CborAdditionalInfo.AdditionalNull:return D.CborReaderState.Null;case B.CborAdditionalInfo.AdditionalFalse:case B.CborAdditionalInfo.AdditionalTrue:return D.CborReaderState.Boolean;case B.CborAdditionalInfo.Additional16BitData:return D.CborReaderState.HalfPrecisionFloat;case B.CborAdditionalInfo.Additional32BitData:return D.CborReaderState.SinglePrecisionFloat;case B.CborAdditionalInfo.Additional64BitData:return D.CborReaderState.DoublePrecisionFloat;default:return D.CborReaderState.SimpleValue}}constructor(e){o.add(this);d.set(this,void 0);c.set(this,0);l.set(this,new Array);u.set(this,false);f.set(this,void 0);h.set(this,D.CborReaderState.Undefined);a(this,d,new Uint8Array(s.from(e,"hex")),"f");a(this,f,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}t.CborReader=CborReader;n=CborReader,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,o=new WeakSet,m=function _CborReader_peekInitialByte(e){if(void 0!==i(this,f,"f").definiteLength&&i(this,f,"f").definiteLength-i(this,f,"f").itemsRead===0)throw new F.CborInvalidOperationException("No more data items to read");if(i(this,c,"f")===i(this,d,"f").length){if(null===i(this,f,"f").type&&void 0===i(this,f,"f").definiteLength&&i(this,c,"f")>0)throw new F.CborInvalidOperationException("End of root-level. No more data items to read");throw new F.CborContentException(G)}const t=M.CborInitialByte.from(i(this,d,"f")[i(this,c,"f")]);switch(i(this,f,"f").type){case R.CborMajorType.ByteString:case R.CborMajorType.Utf8String:if(t.getInitialByte()===M.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===i(this,f,"f").type&&t.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength){break}throw new F.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new F.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},p=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=M.CborInitialByte.from(e[0]);if(r.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new F.CborContentException("Indefinite length string contains invalid data item");return r},v=function _CborReader_validateNextByteIsBreakByte(){const e=i(this,o,"m",m).call(this);if(e.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte)throw new F.CborInvalidOperationException("Not at end of indefinite length data item")},y=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:i(this,f,"f").currentKeyOffset,definiteLength:i(this,f,"f").definiteLength,frameOffset:i(this,f,"f").frameOffset,itemsRead:i(this,f,"f").itemsRead,type:i(this,f,"f").type};i(this,l,"f").push(r);i(this,f,"f").type=e;i(this,f,"f").definiteLength=t;i(this,f,"f").itemsRead=0;i(this,f,"f").frameOffset=i(this,c,"f");a(this,u,false,"f");i(this,f,"f").currentKeyOffset=null},_=function _CborReader_popDataItem(e){if(null===i(this,f,"f").type||i(this,l,"f").length<=0)throw new F.CborInvalidOperationException("Is at root context");if(e!==i(this,f,"f").type)throw new F.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${i(this,f,"f").type}`);if(void 0!==i(this,f,"f").definiteLength&&i(this,f,"f").definiteLength-i(this,f,"f").itemsRead>0)throw new F.CborInvalidOperationException("Not at end of definite length data item");if(i(this,u,"f"))throw new F.CborContentException("Tag not followed by value");const t=i(this,l,"f").pop();i(this,o,"m",w).call(this,t)},w=function _CborReader_restoreStackFrame(e){i(this,f,"f").type=e.type;i(this,f,"f").frameOffset=e.frameOffset;i(this,f,"f").definiteLength=e.definiteLength;i(this,f,"f").itemsRead=e.itemsRead;i(this,f,"f").currentKeyOffset=e.currentKeyOffset;a(this,h,D.CborReaderState.Undefined,"f")},g=function _CborReader_getRemainingBytes(){return i(this,d,"f").slice(i(this,c,"f"))},b=function _CborReader_advanceDataItemCounters(){++i(this,f,"f").itemsRead;a(this,u,false,"f")},P=function _CborReader_advanceBuffer(e){if(i(this,c,"f")+e>i(this,d,"f").length)throw new F.CborContentException("Buffer offset out of bounds");a(this,c,i(this,c,"f")+e,"f");a(this,h,D.CborReaderState.Undefined,"f")},S=function _CborReader_ensureReadCapacity(e){if(i(this,d,"f").length-i(this,c,"f")<e){throw new F.CborContentException(G)}},C=function _CborReader_peekStateCore(){if(void 0!==i(this,f,"f").definiteLength&&i(this,f,"f").definiteLength-i(this,f,"f").itemsRead===0){if(null===i(this,f,"f").type)return D.CborReaderState.Finished;switch(i(this,f,"f").type){case R.CborMajorType.Array:return D.CborReaderState.EndArray;case R.CborMajorType.Map:return D.CborReaderState.EndMap;default:throw new F.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(i(this,c,"f")===i(this,d,"f").length){if(null===i(this,f,"f").type&&void 0===i(this,f,"f").definiteLength){return D.CborReaderState.Finished}throw new F.CborInvalidOperationException(G)}const e=M.CborInitialByte.from(i(this,d,"f")[i(this,c,"f")]);if(e.getInitialByte()===M.CborInitialByte.IndefiniteLengthBreakByte){if(i(this,u,"f")){throw new F.CborContentException("Tag not followed by value")}if(void 0===i(this,f,"f").definiteLength){switch(i(this,f,"f").type){case null:throw new F.CborContentException("Unexpected break byte");case R.CborMajorType.ByteString:return D.CborReaderState.EndIndefiniteLengthByteString;case R.CborMajorType.Utf8String:return D.CborReaderState.EndIndefiniteLengthTextString;case R.CborMajorType.Array:return D.CborReaderState.EndArray;case R.CborMajorType.Map:if(i(this,f,"f").itemsRead%2===0)return D.CborReaderState.EndMap;throw new F.CborContentException("Key missing value");default:throw new F.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new F.CborContentException("Unexpected break byte")}}if(null!==i(this,f,"f").type&&null!==i(this,f,"f").definiteLength){switch(i(this,f,"f").type){case R.CborMajorType.ByteString:case R.CborMajorType.Utf8String:if(e.getMajorType()!==i(this,f,"f").type){throw new F.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:return D.CborReaderState.UnsignedInteger;case R.CborMajorType.NegativeInteger:return D.CborReaderState.NegativeInteger;case R.CborMajorType.ByteString:return e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthByteString:D.CborReaderState.ByteString;case R.CborMajorType.Utf8String:return e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthTextString:D.CborReaderState.TextString;case R.CborMajorType.Array:return D.CborReaderState.StartArray;case R.CborMajorType.Map:return D.CborReaderState.StartMap;case R.CborMajorType.Tag:return D.CborReaderState.Tag;case R.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new F.CborContentException("Invalid CBOR major type.")}},k=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=i(CborReader,n,"m",A).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},j=function _CborReader_peekUnsignedInteger(){const e=i(this,o,"m",m).call(this);switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:return i(CborReader,n,"m",A).call(CborReader,e,i(this,o,"m",g).call(this));case R.CborMajorType.NegativeInteger:throw new F.CborContentException("Integer overflow");default:throw new F.CborInvalidOperationException(`Reader type mismatch, expected ${R.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},x=function _CborReader_peekSignedInteger(){const e=i(this,o,"m",m).call(this);switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=i(CborReader,n,"m",A).call(CborReader,e,i(this,o,"m",g).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case R.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:a}=i(CborReader,n,"m",A).call(CborReader,e,i(this,o,"m",g).call(this));return{bytesRead:a,signedInt:BigInt(-1)-s}}default:throw new F.CborInvalidOperationException(`Reader type mismatch, expected ${R.CborMajorType.UnsignedInteger} or ${R.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},T=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=i(this,o,"m",g).call(this);let r=s.from([]);let a=0;let d=1;let c=i(CborReader,n,"m",p).call(CborReader,t.slice(d),e);while(c.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte){const{length:l,bytesRead:u}=i(CborReader,n,"m",k).call(CborReader,c,t.slice(d));const f=u+Number(l);r=s.concat([r,t.slice(d+(f-l),d+f)]);d+=f;c=i(CborReader,n,"m",p).call(CborReader,t.slice(d),e)}a=d+1;return{encodingLength:a,val:new Uint8Array(r)}},E=function _CborReader_peekTagCore(){const e=i(this,o,"m",m).call(this,R.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=i(CborReader,n,"m",A).call(CborReader,e,i(this,o,"m",g).call(this));return{bytesRead:r,tag:Number(t)}},A=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&M.CborInitialByte.AdditionalInformationMask)<B.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case B.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case B.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=s.from(t.slice(1));const a=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(a)}}case B.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const i=s.from(t.slice(1));const o=i.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(o)}}case B.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const n=s.from(t.slice(1,9));let d=BigInt(0);for(const c of n)d=(d<<BigInt(8))+BigInt(c);return{bytesRead:9,unsignedInt:d}}default:throw new F.CborContentException("Invalid integer encoding")}},I=function _CborReader_skipNextNode(e){let t;let r=e;while((t=i(this,o,"m",C).call(this))===D.CborReaderState.Tag)this.readTag();switch(t){case D.CborReaderState.UnsignedInteger:this.readUInt();break;case D.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case D.CborReaderState.ByteString:this.readByteString();break;case D.CborReaderState.TextString:this.readTextString();break;case D.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case D.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case D.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case D.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case D.CborReaderState.StartArray:this.readStartArray();r++;break;case D.CborReaderState.EndArray:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case D.CborReaderState.StartMap:this.readStartMap();r++;break;case D.CborReaderState.EndMap:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case D.CborReaderState.HalfPrecisionFloat:case D.CborReaderState.SinglePrecisionFloat:case D.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case D.CborReaderState.Null:case D.CborReaderState.Boolean:case D.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborReaderState=void 0;var r;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(r=t.CborReaderState||(t.CborReaderState={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborSimpleValue=void 0;var r;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(r=t.CborSimpleValue||(t.CborSimpleValue={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborTag=void 0;var r;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(r=t.CborTag||(t.CborTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.CborWriter=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const v=BigInt(-1);const y=BigInt("0x100000000");const _=24;const w=25;const g=26;const b=27;const P=244;const S=245;const C=246;const k=247;const j=159;const x=191;const T=249;const E=250;const A=251;const I=s.from("ffc00000","hex");const B=s.from("fff0000000000000","hex");const F=s.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=m.CborTag.UnsignedBigNum;if(e<0){e=-e+v;t=m.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const c=s.from(r,"hex");this.writeTag(t);a(this,o,"m",d).call(this,h.CborMajorType.ByteString,c.length);i(this,n,s.concat([a(this,n,"f"),c]),"f");return this}writeBoolean(e){a(this,o,"m",c).call(this,e?S:P);return this}writeByteString(e){a(this,o,"m",d).call(this,h.CborMajorType.ByteString,e.length);i(this,n,s.concat([a(this,n,"f"),e]),"f");return this}writeTextString(e){a(this,o,"m",d).call(this,h.CborMajorType.Utf8String,s.from(e,"utf8").length);i(this,n,s.concat([a(this,n,"f"),s.from(e,"utf8")]),"f");return this}writeEncodedValue(e){i(this,n,s.concat([a(this,n,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)a(this,o,"m",d).call(this,h.CborMajorType.Array,e);else a(this,o,"m",c).call(this,j);return this}writeEndArray(){a(this,o,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)a(this,o,"m",d).call(this,h.CborMajorType.Map,e);else a(this,o,"m",c).call(this,x);return this}writeEndMap(){a(this,o,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)a(this,o,"m",d).call(this,h.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else a(this,o,"m",d).call(this,h.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){a(this,o,"m",c).call(this,A);this.writeEncodedValue(B);return this}if(e===Number.POSITIVE_INFINITY){a(this,o,"m",c).call(this,A);this.writeEncodedValue(F);return this}if(Number.isNaN(e)){a(this,o,"m",c).call(this,E);this.writeEncodedValue(I);return this}try{t=(0,p.encodeHalf)(e);a(this,o,"m",c).call(this,T);this.writeEncodedValue(t)}catch{const r=s.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){a(this,o,"m",c).call(this,E);this.writeEncodedValue(r.valueOf())}else{const i=s.allocUnsafe(8);i.writeFloatBE(e,0);a(this,o,"m",c).call(this,A);this.writeEncodedValue(i.valueOf())}}return this}writeNull(){a(this,o,"m",c).call(this,C);return this}writeUndefined(){a(this,o,"m",c).call(this,k);return this}writeTag(e){a(this,o,"m",d).call(this,h.CborMajorType.Tag,e);return this}encodeAsHex(){return a(this,n,"f").toString("hex")}encode(){return new Uint8Array(a(this,n,"f"))}reset(){i(this,n,s.from([]),"f")}constructor(){o.add(this);n.set(this,s.from([]))}}t.CborWriter=CborWriter;n=new WeakMap,o=new WeakSet,d=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)a(this,o,"m",c).call(this,r|Number(t));else if(t<256){a(this,o,"m",c).call(this,r|_);a(this,o,"m",c).call(this,Number(t))}else if(t<65536){a(this,o,"m",c).call(this,r|w);a(this,o,"m",l).call(this,Number(t))}else if(t<4294967296){a(this,o,"m",c).call(this,r|g);a(this,o,"m",u).call(this,Number(t))}else{a(this,o,"m",c).call(this,r|b);a(this,o,"m",u).call(this,Number(BigInt(t)/y));a(this,o,"m",u).call(this,Number(BigInt(t)%y))}},c=function _CborWriter_pushUInt8(e){const t=s.allocUnsafe(1);t.writeUInt8(e,0);i(this,n,s.concat([a(this,n,"f"),t]),"f")},l=function _CborWriter_pushUInt16(e){const t=s.allocUnsafe(2);t.writeUInt16BE(e,0);i(this,n,s.concat([a(this,n,"f"),t]),"f")},u=function _CborWriter_pushUInt32(e){const t=s.allocUnsafe(4);t.writeUInt32BE(e,0);i(this,n,s.concat([a(this,n,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.encodeHalf=t.decodeHalf=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const i="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let a=0;a<r;a++)s*=Math.pow(2,Math.floor((t+a)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let a;a=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-a:a};t.decodeHalf=decodeHalf;const encodeHalf=e=>{const t=s.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new a.LossOfPrecisionException(i)}let o=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)o+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new a.LossOfPrecisionException(i)}o+=d+8388608>>126-n}else{throw new a.LossOfPrecisionException(i)}const c=new Uint8Array(2);c[0]=o>>>8&255;c[1]=255&o;return c};t.encodeHalf=encodeHalf},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LossOfPrecisionException=t.CborContentException=t.CborInvalidOperationException=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}t.CborInvalidOperationException=CborInvalidOperationException;class CborContentException extends s.CustomError{constructor(e){super(e)}}t.CborContentException=CborContentException;class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}t.LossOfPrecisionException=LossOfPrecisionException},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.AuthCommitteeHot=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=2;class AuthCommitteeHot{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.AuthCommitteeHot);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeStartArray(y);e.writeInt(d(this,l,"f").type);e.writeByteString(s.from(d(this,l,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.AuthCommitteeHot)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.AuthCommitteeHot}, but got ${s}`);const a=t.readStartArray();if(a!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readStartArray();if(d!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const c=Number(t.readInt());const l=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const p=new AuthCommitteeHot({hash:o,type:i},{hash:l,type:c});n(p,u,e,"f");return p}toCore(){return{__typename:p.CertificateType.AuthorizeCommitteeHot,coldCredential:d(this,c,"f"),hotCredential:d(this,l,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return d(this,c,"f")}hotCredential(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.AuthCommitteeHot=AuthCommitteeHot;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o,n,d,c,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k;Object.defineProperty(t,"__esModule",{value:true});t.Certificate=void 0;const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js");const I=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js");const F=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js");const G=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js");const q=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js");class Certificate{toCbor(){if(s(this,k,"f"))return s(this,k,"f");let e;switch(s(this,i,"f")){case T.CertificateKind.StakeRegistration:e=s(this,f,"f").toCbor();break;case T.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCbor();break;case T.CertificateKind.StakeDelegation:e=s(this,l,"f").toCbor();break;case T.CertificateKind.PoolRetirement:e=s(this,c,"f").toCbor();break;case T.CertificateKind.PoolRegistration:e=s(this,d,"f").toCbor();break;case T.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCbor();break;case T.CertificateKind.GenesisKeyDelegation:e=s(this,o,"f").toCbor();break;case T.CertificateKind.Registration:e=s(this,h,"f").toCbor();break;case T.CertificateKind.Unregistration:e=s(this,m,"f").toCbor();break;case T.CertificateKind.VoteDelegation:e=s(this,p,"f").toCbor();break;case T.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCbor();break;case T.CertificateKind.StakeRegistrationDelegation:e=s(this,y,"f").toCbor();break;case T.CertificateKind.VoteRegistrationDelegation:e=s(this,_,"f").toCbor();break;case T.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,w,"f").toCbor();break;case T.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCbor();break;case T.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCbor();break;case T.CertificateKind.DrepRegistration:e=s(this,P,"f").toCbor();break;case T.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCbor();break;case T.CertificateKind.UpdateDrep:e=s(this,C,"f").toCbor();break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s(this,i,"f")}`)}return e}static fromCbor(e){let t;const r=new x.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case T.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(H.StakeRegistration.fromCbor(e));break;case T.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(N.StakeDeregistration.fromCbor(e));break;case T.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(G.StakeDelegation.fromCbor(e));break;case T.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(M.PoolRetirement.fromCbor(e));break;case T.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(F.PoolRegistration.fromCbor(e));break;case T.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(B.MoveInstantaneousReward.fromCbor(e));break;case T.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(A.GenesisKeyDelegation.fromCbor(e));break;case T.CertificateKind.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCbor(e));break;case T.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(U.Unregistration.fromCbor(e));break;case T.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert(L.VoteDelegation.fromCbor(e));break;case T.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(V.StakeVoteDelegation.fromCbor(e));break;case T.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(K.StakeRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(W.StakeVoteRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(j.AuthCommitteeHot.fromCbor(e));break;case T.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(O.ResignCommitteeCold.fromCbor(e));break;case T.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(R.RegisterDelegateRepresentative.fromCbor(e));break;case T.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(z.UnregisterDelegateRepresentative.fromCbor(e));break;case T.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert($.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s}`)}a(t,k,e,"f");return t}toCore(){let e;switch(s(this,i,"f")){case T.CertificateKind.StakeRegistration:e=s(this,f,"f").toCore();break;case T.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCore();break;case T.CertificateKind.StakeDelegation:e=s(this,l,"f").toCore();break;case T.CertificateKind.PoolRetirement:e=s(this,c,"f").toCore();break;case T.CertificateKind.PoolRegistration:e=s(this,d,"f").toCore();break;case T.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCore();break;case T.CertificateKind.GenesisKeyDelegation:e=s(this,o,"f").toCore();break;case T.CertificateKind.Registration:e=s(this,h,"f").toCore();break;case T.CertificateKind.Unregistration:e=s(this,m,"f").toCore();break;case T.CertificateKind.VoteDelegation:e=s(this,p,"f").toCore();break;case T.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCore();break;case T.CertificateKind.StakeRegistrationDelegation:e=s(this,y,"f").toCore();break;case T.CertificateKind.VoteRegistrationDelegation:e=s(this,_,"f").toCore();break;case T.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,w,"f").toCore();break;case T.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCore();break;case T.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCore();break;case T.CertificateKind.DrepRegistration:e=s(this,P,"f").toCore();break;case T.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCore();break;case T.CertificateKind.UpdateDrep:e=s(this,C,"f").toCore();break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s(this,i,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case E.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(H.StakeRegistration.fromCore(e));break;case E.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(N.StakeDeregistration.fromCore(e));break;case E.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(G.StakeDelegation.fromCore(e));break;case E.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(M.PoolRetirement.fromCore(e));break;case E.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(F.PoolRegistration.fromCore(e));break;case E.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(B.MoveInstantaneousReward.fromCore(e));break;case E.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(A.GenesisKeyDelegation.fromCore(e));break;case E.CertificateType.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCore(e));break;case E.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(U.Unregistration.fromCore(e));break;case E.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert(L.VoteDelegation.fromCore(e));break;case E.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(V.StakeVoteDelegation.fromCore(e));break;case E.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(K.StakeRegistrationDelegation.fromCore(e));break;case E.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCore(e));break;case E.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(W.StakeVoteRegistrationDelegation.fromCore(e));break;case E.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(j.AuthCommitteeHot.fromCore(e));break;case E.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(O.ResignCommitteeCold.fromCore(e));break;case E.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(R.RegisterDelegateRepresentative.fromCore(e));break;case E.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(z.UnregisterDelegateRepresentative.fromCore(e));break;case E.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert($.UpdateDelegateRepresentative.fromCore(e));break;default:throw new I.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;a(t,f,e,"f");a(t,i,T.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;a(t,u,e,"f");a(t,i,T.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;a(t,l,e,"f");a(t,i,T.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;a(t,d,e,"f");a(t,i,T.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;a(t,c,e,"f");a(t,i,T.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;a(t,o,e,"f");a(t,i,T.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;a(t,n,e,"f");a(t,i,T.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;a(t,h,e,"f");a(t,i,T.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;a(t,m,e,"f");a(t,i,T.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;a(t,p,e,"f");a(t,i,T.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;a(t,v,e,"f");a(t,i,T.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;a(t,y,e,"f");a(t,i,T.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;a(t,_,e,"f");a(t,i,T.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;a(t,w,e,"f");a(t,i,T.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;a(t,g,e,"f");a(t,i,T.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;a(t,b,e,"f");a(t,i,T.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;a(t,P,e,"f");a(t,i,T.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;a(t,S,e,"f");a(t,i,T.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;a(t,C,e,"f");a(t,i,T.CertificateKind.UpdateDrep,"f");return t}kind(){return s(this,i,"f")}asStakeRegistration(){return s(this,f,"f")}asStakeDeregistration(){return s(this,u,"f")}asStakeDelegation(){return s(this,l,"f")}asPoolRegistration(){return s(this,d,"f")}asPoolRetirement(){return s(this,c,"f")}asGenesisKeyDelegation(){return s(this,o,"f")}asMoveInstantaneousRewardsCert(){return s(this,n,"f")}asRegistrationCert(){return s(this,h,"f")}asUnregistrationCert(){return s(this,m,"f")}asVoteDelegationCert(){return s(this,p,"f")}asStakeVoteDelegationCert(){return s(this,v,"f")}asStakeRegistrationDelegationCert(){return s(this,y,"f")}asVoteRegistrationDelegationCert(){return s(this,_,"f")}asStakeVoteRegistrationDelegationCert(){return s(this,w,"f")}asAuthCommitteeHotCert(){return s(this,g,"f")}asResignCommitteeColdCert(){return s(this,b,"f")}asRegisterDelegateRepresentativeCert(){return s(this,P,"f")}asUnregisterDelegateRepresentativeCert(){return s(this,S,"f")}asUpdateDelegateRepresentativeCert(){return s(this,C,"f")}constructor(){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0)}}t.Certificate=Certificate;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificateKind=void 0;var r;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(r=t.CertificateKind||(t.CertificateKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.DRep=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");class DRep{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");if(d(this,l,"f")===p.DRepKind.KeyHash||d(this,l,"f")===p.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===p.DRepKind.KeyHash||r===p.DRepKind.ScriptHash){const s=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));if(r===p.DRepKind.KeyHash){return DRep.newKeyHash(s)}return DRep.newScriptHash(s)}t.readEndArray();if(r===p.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(d(this,l,"f")===p.DRepKind.KeyHash||d(this,l,"f")===p.DRepKind.ScriptHash)return d(this,c,"f");if(d(this,l,"f")===p.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,y.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,y.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===m.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(p.DRepKind.KeyHash,{hash:e,type:m.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(p.DRepKind.ScriptHash,{hash:e,type:m.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(p.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(p.DRepKind.NoConfidence,void 0)}kind(){return d(this,l,"f")}toKeyHash(){var e;if(d(this,l,"f")!==p.DRepKind.KeyHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(d(this,l,"f")!==p.DRepKind.ScriptHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,t,"f");n(this,l,e,"f")}}t.DRep=DRep;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DRepKind=void 0;var r;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(r=t.DRepKind||(t.DRepKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.GenesisKeyDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=4;class GenesisKeyDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(_);e.writeInt(p.CertificateKind.GenesisKeyDelegation);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(r!==_)throw new y.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.GenesisKeyDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.GenesisKeyDelegation}, but got ${s}`);const a=h.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));const i=h.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));const o=h.Hash32ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=new GenesisKeyDelegation(a,i,o);n(d,f,e,"f");return d}toCore(){return{__typename:v.CertificateType.GenesisKeyDelegation,genesisDelegateHash:d(this,l,"f"),genesisHash:d(this,c,"f"),vrfKeyHash:d(this,u,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return d(this,c,"f")}setGenesisHash(e){n(this,c,e,"f");n(this,f,void 0,"f")}genesisDelegateHash(){return d(this,l,"f")}setGenesisDelegateHash(e){n(this,l,e,"f");n(this,f,void 0,"f")}vrfKeyHash(){return d(this,u,"f")}setVrfKeyHash(e){n(this,u,e,"f");n(this,f,void 0,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.GenesisKeyDelegation=GenesisKeyDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousReward=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");const v=2;class MoveInstantaneousReward{toCbor(){if(a(this,c,"f"))return a(this,c,"f");let e;switch(a(this,d,"f")){case h.MirCertificateKind.ToOtherPot:e=a(this,o,"f").toCbor();break;case h.MirCertificateKind.ToStakeCreds:e=a(this,n,"f").toCbor();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${a(this,d,"f")}`)}const t=new l.CborWriter;t.writeStartArray(v);t.writeInt(u.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(s.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);let r=t.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const s=Number(t.readInt());if(s!==u.CertificateKind.MoveInstantaneousRewards)throw new f.InvalidArgumentError("cbor",`Expected certificate kind ${u.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const a=f.HexBlob.fromBytes(t.readEncodedValue());const y=new l.CborReader(a);r=y.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const _=new MoveInstantaneousReward;y.readInt();if(y.peekState()===l.CborReaderState.UnsignedInteger){i(_,o,m.MoveInstantaneousRewardToOtherPot.fromCbor(a),"f");i(_,d,h.MirCertificateKind.ToOtherPot,"f")}else if(y.peekState()===l.CborReaderState.StartArray||y.peekState()===l.CborReaderState.StartMap){i(_,n,p.MoveInstantaneousRewardToStakeCreds.fromCbor(a),"f");i(_,d,h.MirCertificateKind.ToStakeCreds,"f")}else{throw new f.InvalidArgumentError("cbor","Invalid CBOR string")}i(_,c,e,"f");return _}toCore(){let e;switch(a(this,d,"f")){case h.MirCertificateKind.ToOtherPot:e=a(this,o,"f").toCore();break;case h.MirCertificateKind.ToStakeCreds:e=a(this,n,"f").toCore();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${a(this,d,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case h.MirCertificateKind.ToOtherPot:i(t,o,m.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");i(t,d,h.MirCertificateKind.ToOtherPot,"f");break;case h.MirCertificateKind.ToStakeCreds:i(t,n,p.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");i(t,d,h.MirCertificateKind.ToStakeCreds,"f");break;default:throw new f.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;i(t,o,e,"f");i(t,d,h.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;i(t,n,e,"f");i(t,d,h.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return a(this,d,"f")}asToOtherPot(){return a(this,o,"f")}asToStakeCreds(){return a(this,n,"f")}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.MoveInstantaneousReward=MoveInstantaneousReward;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToOtherPot=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(u);e.writeInt(a(this,i,"f")===c.MirCertificatePot.Reserves?0:1);e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());const i=t.readInt();if(a<0||a>1)throw new l.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${a}`);const o=new MoveInstantaneousRewardToOtherPot(0===a?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,i);s(o,n,e,"f");return o}toCore(){return{__typename:c.CertificateType.MIR,kind:c.MirCertificateKind.ToOtherPot,pot:a(this,i,"f"),quantity:a(this,o,"f")}}static fromCore(e){if(e.kind!==c.MirCertificateKind.ToOtherPot)throw new l.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new l.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return a(this,i,"f")}setPot(e){s(this,i,e,"f");s(this,n,void 0,"f")}getAmount(){return a(this,o,"f")}setAmount(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.MoveInstantaneousRewardToOtherPot=MoveInstantaneousRewardToOtherPot;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToStakeCreds=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeInt(d(this,c,"f")===m.MirCertificatePot.Reserves?0:1);const t=new Map([...d(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeStartArray(v);e.writeInt(r.type);e.writeByteString(s.from(r.hash,"hex"));e.writeInt(a)}return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s<0||s>1)throw new p.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${s} elements`);t.readStartMap();const a=new Map;while(t.peekState()!==h.CborReaderState.EndMap){t.readStartArray();const i=Number(t.readInt());if(i<0||i>1)throw new p.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${i}`);const o=f.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();a.set({hash:o,type:i},d)}t.readEndMap();const c=new MoveInstantaneousRewardToStakeCreds(0===s?m.MirCertificatePot.Reserves:m.MirCertificatePot.Treasury,a);n(c,u,e,"f");return c}toCore(){if(0===d(this,l,"f").size)throw new p.InvalidStateError("The credential map is empty.");const[[e,t]]=d(this,l,"f");return{__typename:m.CertificateType.MIR,kind:m.MirCertificateKind.ToStakeCreds,pot:d(this,c,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==m.MirCertificateKind.ToStakeCreds)throw new p.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new p.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return d(this,c,"f")}setPot(e){n(this,c,e,"f");n(this,u,void 0,"f")}getStakeCreds(){return d(this,l,"f")}setStakeCreds(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.MoveInstantaneousRewardToStakeCreds=MoveInstantaneousRewardToStakeCreds;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolMetadata=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=64;const v=2;class PoolMetadata{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=t.readTextString();const a=f.Hash32ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const i=new PoolMetadata(s,a);n(i,u,e,"f");return i}toCore(){return{hash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolMetadataHash(){return d(this,l,"f")}setPoolMetadataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>p)throw new m.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolMetadata=PoolMetadata;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,y,_;Object.defineProperty(t,"__esModule",{value:true});t.PoolParams=void 0;const w=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const S=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js");class PoolParams{toCbor(){const e=new b.CborWriter;if(d(this,_,"f"))return d(this,_,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));e.writeInt(d(this,f,"f"));e.writeEncodedValue(s.from(d(this,h,"f").toCbor(),"hex"));e.writeByteString(s.from(d(this,m,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(s.from(d(this,p,"f").toCbor(),"hex"));e.writeStartArray(d(this,v,"f").length);for(const t of d(this,v,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));if(d(this,y,"f"))e.writeEncodedValue(s.from(d(this,y,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new b.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new S.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);n(s,_,e,"f");return s}static fromFlattenedCbor(e){const t=w.Ed25519KeyHashHex(S.HexBlob.fromBytes(e.readByteString()));const r=(0,C.VrfVkHex)(S.HexBlob.fromBytes(e.readByteString()));const s=e.readInt();const a=e.readInt();const i=x.UnitInterval.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));const o=g.Address.fromBytes(S.HexBlob.fromBytes(e.readByteString())).asReward();const n=new Array;let d;const c=P.CborSet.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()),P.Hash.fromCbor);e.readStartArray();while(e.peekState()!==b.CborReaderState.EndArray)n.push(j.Relay.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==b.CborReaderState.Null)d=k.PoolMetadata.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,s,a,i,o,c,n,d)}toCore(){const e=d(this,m,"f").toAddress();const t={cost:d(this,f,"f"),id:C.PoolId.fromKeyHash(d(this,c,"f")),margin:d(this,h,"f").toCore(),owners:d(this,p,"f").toCore().map(t=>(0,T.createRewardAccount)(t,e.getNetworkId())),pledge:d(this,u,"f"),relays:d(this,v,"f").map(e=>e.toCore()),rewardAccount:d(this,m,"f").toAddress().toBech32(),vrf:d(this,l,"f")};if(d(this,y,"f"))t.metadataJson=d(this,y,"f").toCore();return t}static fromCore(e){return new PoolParams(C.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,x.UnitInterval.fromCore(e.margin),g.Address.fromBech32(e.rewardAccount).asReward(),P.CborSet.fromCore(e.owners.map(e=>w.Ed25519KeyHashHex(g.Address.fromBech32(e).asReward().getPaymentCredential().hash)),P.Hash.fromCore),e.relays.map(e=>j.Relay.fromCore(e)),e.metadataJson?k.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return d(this,c,"f")}setOperator(e){n(this,c,e,"f");n(this,_,void 0,"f")}vrfKeyHash(){return d(this,l,"f")}setVrfKeyHash(e){n(this,l,e,"f");n(this,_,void 0,"f")}pledge(){return d(this,u,"f")}setPledge(e){n(this,u,e,"f");n(this,_,void 0,"f")}cost(){return d(this,f,"f")}setCost(e){n(this,f,e,"f");n(this,_,void 0,"f")}margin(){return d(this,h,"f")}setMargin(e){n(this,h,e,"f");n(this,_,void 0,"f")}rewardAccount(){return d(this,m,"f")}setRewardAccount(e){n(this,m,e,"f");n(this,_,void 0,"f")}poolOwners(){return d(this,p,"f")}setPoolOwners(e){n(this,p,e,"f");n(this,_,void 0,"f")}relays(){return d(this,v,"f")}setRelays(e){n(this,v,[...e],"f");n(this,_,void 0,"f")}poolMetadata(){return d(this,y,"f")}setPoolMetadata(e){n(this,y,e,"f");n(this,_,void 0,"f")}constructor(e,t,r,s,a,i,o,d,w){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f");n(this,f,s,"f");n(this,h,a,"f");n(this,m,i,"f");n(this,p,o,"f");n(this,v,d,"f");n(this,y,w,"f")}}t.PoolParams=PoolParams;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.MultiHostName=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=2;const l=2;const u=64;class MultiHostName{toCbor(){const e=new n.CborWriter;if(a(this,o,"f"))return a(this,o,"f");e.writeStartArray(c);e.writeInt(l);e.writeTextString(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==c)throw new d.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==l)throw new d.InvalidArgumentError("cbor",`Expected MultiHostName id ${l}, but got ${a}`);const i=t.readTextString();const u=new MultiHostName(i);s(u,o,e,"f");return u}toCore(){return{__typename:"RelayByNameMultihost",dnsName:a(this,i,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return a(this,i,"f")}setDnsName(e){if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,i,e,"f");s(this,o,void 0,"f")}constructor(e){i.set(this,void 0);o.set(this,void 0);if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,i,e,"f")}}t.MultiHostName=MultiHostName;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Relay=t.RelayKind=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var p;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(p=t.RelayKind||(t.RelayKind={}));class Relay{toCbor(){if(s(this,c,"f"))return s(this,c,"f");let e;switch(s(this,d,"f")){case p.SingleHostAddress:e=s(this,i,"f").toCbor();break;case p.SingleHostDnsName:e=s(this,o,"f").toCbor();break;case p.MultiHostDnsName:e=s(this,n,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCbor(e){let t;const r=new l.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case p.SingleHostAddress:t=Relay.newSingleHostAddr(h.SingleHostAddr.fromCbor(e));break;case p.SingleHostDnsName:t=Relay.newSingleHostName(m.SingleHostName.fromCbor(e));break;case p.MultiHostDnsName:t=Relay.newMultiHostName(f.MultiHostName.fromCbor(e));break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s}`)}a(t,c,e,"f");return t}toCore(){let e;switch(s(this,d,"f")){case p.SingleHostAddress:e=s(this,i,"f").toCore();break;case p.SingleHostDnsName:e=s(this,o,"f").toCore();break;case p.MultiHostDnsName:e=s(this,n,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(h.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(m.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(f.MultiHostName.fromCore(e));break;default:throw new u.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;a(t,i,e,"f");a(t,d,p.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;a(t,o,e,"f");a(t,d,p.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;a(t,n,e,"f");a(t,d,p.MultiHostDnsName,"f");return t}kind(){return s(this,d,"f")}asSingleHostAddr(){return s(this,i,"f")}asSingleHostName(){return s(this,o,"f")}asMultiHostName(){return s(this,n,"f")}constructor(){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.Relay=Relay;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostAddr=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js");const f=4;const h=0;class SingleHostAddr{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(f);e.writeInt(h);a(this,i,"f")?e.writeInt(a(this,i,"f")):e.writeNull();a(this,o,"f")?e.writeByteString((0,u.ipV4StringToByteArray)(a(this,o,"f"))):e.writeNull();a(this,n,"f")?e.writeByteString((0,u.ipV6StringToByteArray)(a(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==h)throw new l.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${h}, but got ${a}`);let i;let o;let n;if(t.peekState()===c.CborReaderState.Null){t.readNull();i=void 0}else{i=t.readInt()}if(t.peekState()===c.CborReaderState.Null){t.readNull();o=void 0}else{o=(0,u.byteArrayToIpV4String)(t.readByteString())}if(t.peekState()===c.CborReaderState.Null){t.readNull();n=void 0}else{n=(0,u.byteArrayToIPv6String)(t.readByteString())}const m=new SingleHostAddr(i?Number(i):void 0,o,n);s(m,d,e,"f");return m}toCore(){return{__typename:"RelayByAddress",ipv4:a(this,o,"f"),ipv6:a(this,n,"f"),port:a(this,i,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return a(this,i,"f")}setPort(e){s(this,i,e,"f");s(this,d,void 0,"f")}ipv4(){return a(this,o,"f")}setIpv4(e){s(this,o,e,"f");s(this,d,void 0,"f")}ipv6(){return a(this,n,"f")}setIpv6(e){s(this,n,e,"f");s(this,d,void 0,"f")}constructor(e,t,r){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f");s(this,n,r,"f")}}t.SingleHostAddr=SingleHostAddr;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostName=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(u);a(this,i,"f")?e.writeInt(a(this,i,"f")):e.writeNull();e.writeTextString(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==u)throw new c.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${a}`);let i;if(t.peekState()===d.CborReaderState.Null){t.readNull();i=void 0}else{i=t.readInt()}const o=t.readTextString();const f=new SingleHostName(o,i?Number(i):void 0);s(f,n,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:a(this,o,"f"),port:a(this,i,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return a(this,i,"f")}setPort(e){s(this,i,e,"f");s(this,n,void 0,"f")}dnsName(){return a(this,o,"f")}setDnsName(e){if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,t,"f");if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f")}}t.SingleHostName=SingleHostName;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.byteArrayToIPv6String=t.ipV6StringToByteArray=t.byteArrayToIpV4String=t.ipV4StringToByteArray=void 0;const s=r("../../node_modules/ip-address/dist/ip-address.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const ipV4StringToByteArray=e=>{if(!s.Address4.isValid(e))throw new a.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};t.ipV4StringToByteArray=ipV4StringToByteArray;const byteArrayToIpV4String=e=>{if(4!==e.length)throw new a.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};t.byteArrayToIpV4String=byteArrayToIpV4String;const ipV6StringToByteArray=e=>{if(!s.Address6.isValid(e))throw new a.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new s.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};t.ipV6StringToByteArray=ipV6StringToByteArray;const byteArrayToIPv6String=e=>{const t=s.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};t.byteArrayToIPv6String=byteArrayToIPv6String},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.PoolRegistration=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js");const f=u.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new n.CborWriter;if(a(this,o,"f"))return a(this,o,"f");e.writeStartArray(f);e.writeInt(d.CertificateKind.PoolRegistration);return a(this,i,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.CertificateKind.PoolRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.PoolRegistration}, but got ${a}`);const i=u.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(i);s(c,o,e,"f");return c}toCore(){return{__typename:c.CertificateType.PoolRegistration,poolParameters:a(this,i,"f").toCore()}}static fromCore(e){return new PoolRegistration(u.PoolParams.fromCore(e.poolParameters))}poolParameters(){return a(this,i,"f")}setPoolParameters(e){s(this,i,e,"f");s(this,o,void 0,"f")}constructor(e){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.PoolRegistration=PoolRegistration;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolRetirement=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const w=3;class PoolRetirement{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(w);e.writeInt(m.CertificateKind.PoolRetirement);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==w)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.PoolRetirement)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.PoolRetirement}, but got ${s}`);const a=f.Ed25519KeyHashHex(y.HexBlob.fromBytes(t.readByteString()));const i=t.readInt();t.readEndArray();const o=new PoolRetirement(a,(0,v.EpochNo)(Number(i)));n(o,u,e,"f");return o}toCore(){return{__typename:p.CertificateType.PoolRetirement,epoch:d(this,l,"f"),poolId:_.PoolId.fromKeyHash(d(this,c,"f"))}}static fromCore(e){return new PoolRetirement(_.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return d(this,c,"f")}setPoolKeyHash(e){n(this,c,e,"f");n(this,u,void 0,"f")}epoch(){return d(this,l,"f")}setEpoch(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolRetirement=PoolRetirement;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.RegisterDelegateRepresentative=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class RegisterDelegateRepresentative{toCbor(){const e=new p.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(v.CertificateKind.DrepRegistration);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));if(d(this,u,"f"))e.writeEncodedValue((0,w.hexToBytes)(d(this,u,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(4!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.DrepRegistration)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.DrepRegistration}, but got ${s}`);const a=t.readStartArray();if(a!==g)throw new _.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();let c;if(t.peekState()===p.CborReaderState.Null)t.readNull();else c=m.Anchor.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new RegisterDelegateRepresentative({hash:o,type:i},d,c);n(l,f,e,"f");return l}toCore(){return{__typename:y.CertificateType.RegisterDelegateRepresentative,anchor:d(this,u,"f")?d(this,u,"f").toCore():null,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?m.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}anchor(){return d(this,u,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.RegisterDelegateRepresentative=RegisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Registration=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=2;class Registration{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.Registration);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.Registration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.Registration}, but got ${s}`);const a=t.readStartArray();if(a!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Registration({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.Registration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Registration=Registration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.ResignCommitteeCold=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class ResignCommitteeCold{toCbor(){const e=new m.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(p.CertificateKind.ResignCommitteeCold);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,_.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(3!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.ResignCommitteeCold)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.ResignCommitteeCold}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===m.CborReaderState.Null)t.readNull();else d=h.Anchor.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ResignCommitteeCold({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.ResignCommitteeCold,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,coldCredential:d(this,c,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?h.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.ResignCommitteeCold=ResignCommitteeCold;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.StakeDelegation=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const _=3;const w=2;class StakeDelegation{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(_);e.writeInt(m.CertificateKind.StakeDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.StakeDelegation)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.StakeDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=f.Ed25519KeyHashHex(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new StakeDelegation({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.StakeDelegation,poolId:y.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,y.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolKeyHash(){return d(this,l,"f")}setPoolKeyHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.StakeDelegation=StakeDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeDeregistration=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeDeregistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(h.CertificateKind.StakeDeregistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.StakeDeregistration)throw new p.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.StakeDeregistration}, but got ${s}`);const a=t.readStartArray();if(a!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=u.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeDeregistration({hash:o,type:i});n(d,l,e,"f");return d}toCore(){return{__typename:m.CertificateType.StakeDeregistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeDeregistration=StakeDeregistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistration=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeRegistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(h.CertificateKind.StakeRegistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.StakeRegistration)throw new p.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.StakeRegistration}, but got ${s}`);const a=t.readStartArray();if(a!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=u.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeRegistration({hash:o,type:i});n(d,l,e,"f");return d}toCore(){return{__typename:m.CertificateType.StakeRegistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeRegistration=StakeRegistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistrationDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const w=2;class StakeRegistrationDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeRegistrationDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=h.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=h.Ed25519KeyHashHex(y.HexBlob.fromBytes(t.readByteString()));const c=t.readInt();t.readEndArray();const l=new StakeRegistrationDelegation({hash:o,type:i},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeRegistrationDelegation,deposit:d(this,u,"f"),poolId:_.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,_.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeRegistrationDelegation=StakeRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const b=2;class StakeVoteDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.StakeVoteDelegation);e.writeStartArray(b);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeEncodedValue((0,g.hexToBytes)(d(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeVoteDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeVoteDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==b)throw new _.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=h.Ed25519KeyHashHex(_.HexBlob.fromBytes(t.readByteString()));const c=y.DRep.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new StakeVoteDelegation({hash:o,type:i},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeVoteDelegation,dRep:d(this,u,"f").toCore(),poolId:w.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,y.DRep.fromCore(e.dRep),w.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}drep(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeVoteDelegation=StakeVoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteRegistrationDelegation=void 0;const m=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const P=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new p.CborWriter;if(d(this,h,"f"))return d(this,h,"f");e.writeStartArray(5);e.writeInt(v.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(P);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));e.writeEncodedValue((0,b.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(5!==r)throw new w.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.StakeVoteRegistrationDelegation)throw new w.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.StakeVoteRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==P)throw new w.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=m.Hash28ByteBase16(w.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=m.Ed25519KeyHashHex(w.HexBlob.fromBytes(t.readByteString()));const c=_.DRep.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const l=t.readInt();t.readEndArray();const u=new StakeVoteRegistrationDelegation({hash:o,type:i},l,c,d);n(u,h,e,"f");return u}toCore(){return{__typename:y.CertificateType.StakeVoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,f,"f"),poolId:g.PoolId.fromKeyHash(d(this,u,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,_.DRep.fromCore(e.dRep),g.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,f,"f")}dRep(){return d(this,l,"f")}poolKeyHash(){return d(this,u,"f")}constructor(e,t,r,s){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);n(this,c,e,"f");n(this,f,t,"f");n(this,l,r,"f");n(this,u,s,"f")}}t.StakeVoteRegistrationDelegation=StakeVoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UnregisterDelegateRepresentative=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=2;class UnregisterDelegateRepresentative{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.DrepUnregistration);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.DrepUnregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.DrepUnregistration}, but got ${s}`);const a=t.readStartArray();if(a!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new UnregisterDelegateRepresentative({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.UnregisterDelegateRepresentative,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UnregisterDelegateRepresentative=UnregisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Unregistration=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=2;class Unregistration{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.Unregistration);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.Unregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.Unregistration}, but got ${s}`);const a=t.readStartArray();if(a!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Unregistration({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.Unregistration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Unregistration=Unregistration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UpdateDelegateRepresentative=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class UpdateDelegateRepresentative{toCbor(){const e=new m.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(p.CertificateKind.UpdateDrep);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,_.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(3!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.UpdateDrep)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.UpdateDrep}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===m.CborReaderState.Null)t.readNull();else d=h.Anchor.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new UpdateDelegateRepresentative({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.UpdateDelegateRepresentative,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,dRepCredential:d(this,c,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?h.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UpdateDelegateRepresentative=UpdateDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.VoteDelegation=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=2;class VoteDelegation{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.VoteDelegation);e.writeStartArray(w);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,_.hexToBytes)(d(this,l,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.VoteDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.VoteDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==w)throw new y.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=f.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=v.DRep.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new VoteDelegation({hash:o,type:i},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.VoteDelegation,dRep:d(this,l,"f").toCore(),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,v.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}dRep(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.VoteDelegation=VoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.VoteRegistrationDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class VoteRegistrationDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,w.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.VoteRegistrationDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.VoteRegistrationDelegation}, but got ${s}`);const a=t.readStartArray();if(a!==g)throw new _.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const o=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=y.DRep.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new VoteRegistrationDelegation({hash:o,type:i},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.VoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,u,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,y.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}dRep(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.VoteRegistrationDelegation=VoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Anchor=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=2;const v=128;class Anchor{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(p);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==p)throw new m.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=t.readTextString();const a=f.Hash32ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const i=new Anchor(s,a);n(i,u,e,"f");return i}toCore(){return{dataHash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}dataHash(){return d(this,l,"f")}setDataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>v)throw new m.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.Anchor=Anchor;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.CborSet=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");class CborSet{static fromCbor(e,t){const r=new d.CborReader(e);const s=new CborSet([]);if(r.peekState()===d.CborReaderState.Tag&&r.peekTag()===d.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){i(s,o,"f").push(t(c.HexBlob.fromBytes(r.readEncodedValue())))}a(s,n,e,"f");return s}toCbor(){if(i(this,n,"f"))return i(this,n,"f");const e=new d.CborWriter;if(l.inConwayEra)e.writeTag(d.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return i(this,o,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return i(this,o,"f")}setValues(e){a(this,o,[...e],"f");a(this,n,void 0,"f")}size(){return i(this,o,"f").length}constructor(e){o.set(this,void 0);n.set(this,void 0);a(this,o,[...e],"f")}}t.CborSet=CborSet;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.Credential=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const c=2;class Credential{toCbor(){const e=new o.CborWriter;e.writeStartArray(c);e.writeInt(a(this,i,"f").type);e.writeByteString((0,d.hexToBytes)(a(this,i,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);if(t.readStartArray()!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=n.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...a(this,i,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...a(this,i,"f")}}constructor(e){i.set(this,void 0);s(this,i,e,"f")}}t.Credential=Credential;i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Datum=t.DatumKind=t.isDatumHash=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const h=2;const isDatumHash=e=>null!==e&&"string"==typeof e;t.isDatumHash=isDatumHash;var m;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(m=t.DatumKind||(t.DatumKind={}));class Datum{toCbor(){const e=new l.CborWriter;if(i(this,c,"f"))return i(this,c,"f");e.writeStartArray(h);e.writeInt(i(this,o,"f"));if(i(this,o,"f")===m.DataHash)e.writeByteString(s.from(i(this,n,"f"),"hex").valueOf());else e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let i;let o;switch(s){case m.DataHash:i=u.HexBlob.fromBytes(t.readByteString());break;case m.InlineData:o=f.PlutusData.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new u.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const n=new Datum(i,o);a(n,c,e,"f");return n}toCore(){let e;switch(i(this,o,"f")){case m.DataHash:e=i(this,n,"f");break;case m.InlineData:e=i(this,d,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected datum kind ${i(this,o,"f")}`)}return e}static fromCore(e){if((0,t.isDatumHash)(e))return new Datum(e);return new Datum(void 0,f.PlutusData.fromCore(e))}kind(){return i(this,o,"f")}asDataHash(){return i(this,n,"f")}asInlineData(){return i(this,d,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);if(e&&t)throw new u.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new u.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)a(this,o,m.DataHash,"f");if(t)a(this,o,m.InlineData,"f");a(this,n,e,"f");a(this,d,t,"f")}}t.Datum=Datum;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.ExUnits=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ExUnits{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(a(this,i,"f"));e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=t.readUInt();const i=t.readUInt();t.readEndArray();const o=new ExUnits(a,i);s(o,n,e,"f");return o}toCore(){return{memory:Number(a(this,i,"f")),steps:Number(a(this,o,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return a(this,i,"f")}setMem(e){s(this,i,e,"f");s(this,n,void 0,"f")}steps(){return a(this,o,"f")}setSteps(e){s(this,o,e,"f");s(this,n,void 0,"f")}add(e){const t=a(this,i,"f")+a(e,i,"f");const r=a(this,o,"f")+a(e,o,"f");return new ExUnits(t,r)}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.ExUnits=ExUnits;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionId=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class GovernanceActionId{toCbor(){if(i(this,d,"f"))return i(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(i(this,o,"f"),"hex"));e.writeInt(i(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const i=t.readInt();const o=new GovernanceActionId(l.HexBlob.fromBytes(s),i);a(o,d,e,"f");return o}toCore(){return{actionIndex:Number(i(this,n,"f")),id:i(this,o,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return i(this,o,"f")}setTransactionId(e){a(this,o,e,"f");a(this,d,void 0,"f")}index(){return i(this,n,"f")}setIndex(e){a(this,n,e,"f");a(this,d,void 0,"f")}equals(e){return i(this,n,"f")===i(e,n,"f")&&i(this,o,"f")===i(e,o,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f")}}t.GovernanceActionId=GovernanceActionId;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Hash=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class Hash{toCbor(){const e=new n.CborWriter;e.writeByteString(s.from(i(this,o,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);return new Hash(d.HexBlob.fromBytes(t.readByteString()))}toCore(){return i(this,o,"f")}static fromCore(e){return new Hash(e)}value(){return i(this,o,"f")}constructor(e){o.set(this,void 0);a(this,o,e,"f")}}t.Hash=Hash;o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolVersion=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ProtocolVersion{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(l);e.writeInt(a(this,i,"f"));e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const i=Number(t.readInt());t.readEndArray();const o=new ProtocolVersion(a,i);s(o,n,e,"f");return o}toCore(){return{major:Number(a(this,i,"f")),minor:Number(a(this,o,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return a(this,i,"f")}setMajor(e){s(this,i,e,"f");s(this,n,void 0,"f")}minor(){return a(this,o,"f")}setMinor(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.ProtocolVersion=ProtocolVersion;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.UnitInterval=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=i(r("../../node_modules/fraction.js/fraction.js"));const f=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new u.default(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeTag(c.CborTag.RationalNumber);e.writeStartArray(f);e.writeInt(a(this,o,"f"));e.writeInt(a(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.readTag()!==c.CborTag.RationalNumber)throw new l.InvalidArgumentError("cbor",`Expected tag ${c.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=t.readInt();const i=t.readInt();t.readEndArray();const o=new UnitInterval(a,i);s(o,d,e,"f");return o}toCore(){return{denominator:Number(a(this,n,"f")),numerator:Number(a(this,o,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return a(this,o,"f")}setNumerator(e){s(this,o,e,"f");s(this,d,void 0,"f")}denominator(){return a(this,n,"f")}setDenominator(e){s(this,n,e,"f");s(this,d,void 0,"f")}toFloat(){return Number(a(this,o,"f"))/Number(a(this,n,"f"))}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f")}}t.UnitInterval=UnitInterval;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.ConstrPlutusData=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=102n;const f=7n;class ConstrPlutusData{toCbor(){const e=new n.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(a(this,i,"f"));e.writeTag(Number(t));if(t!==u)e.writeEncodedValue((0,l.hexToBytes)(a(this,o,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(a(this,i,"f"));e.writeEncodedValue((0,l.hexToBytes)(a(this,o,"f").toCbor()))}return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new n.CborReader(e);const r=t.readTag();if(r===Number(u)){t.readStartArray();const s=t.readInt();const a=t.readEncodedValue();const i=c.PlutusList.fromCbor(d.HexBlob.fromBytes(a));t.readEndArray();return new ConstrPlutusData(s,i)}const o=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const l=t.readEncodedValue();const f=c.PlutusList.fromCbor(d.HexBlob.fromBytes(l));return new ConstrPlutusData(o,f)}getAlternative(){return a(this,i,"f")}getData(){return a(this,o,"f")}equals(e){if(a(this,i,"f")!==a(e,i,"f"))return false;return a(this,o,"f").equals(a(e,o,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+f;return u}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-f+e;return u}constructor(e,t){i.set(this,0n);o.set(this,new c.PlutusList);s(this,i,e,"f");s(this,o,t,"f")}}t.ConstrPlutusData=ConstrPlutusData;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l,u,f,h,m,p;Object.defineProperty(t,"__esModule",{value:true});t.PlutusData=void 0;const v=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"));const y=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js");const g=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const j=0xffffffffffffffffn;const x=new Uint8Array([95]);const T=64;const E=32;const A=BigInt(-1);class PlutusData{toCbor(){if(n(this,p,"f"))return n(this,p,"f");let e;switch(n(this,m,"f")){case P.PlutusDataKind.ConstrPlutusData:e=n(this,h,"f").toCbor();break;case P.PlutusDataKind.Map:e=n(this,c,"f").toCbor();break;case P.PlutusDataKind.List:e=n(this,l,"f").toCbor();break;case P.PlutusDataKind.Bytes:{const t=new _.CborWriter;if(n(this,f,"f").length<=T)t.writeByteString(n(this,f,"f"));else{t.writeEncodedValue(x);for(let r=0;r<n(this,f,"f").length;r+=T){const s=n(this,f,"f").slice(r,r+T);t.writeByteString(s)}t.writeEndArray()}e=(0,k.bytesToHex)(t.encode());break}case P.PlutusDataKind.Integer:{const a=new _.CborWriter;if(n(this,u,"f")>=0&&n(this,u,"f")<=j||n(this,u,"f")<0&&n(this,u,"f")>=-1n-j)a.writeInt(n(this,u,"f"));else{const i=PlutusData.bigintToBuffer(n(this,u,"f"));a.writeTag(n(this,u,"f")<0?_.CborTag.NegativeBigNum:_.CborTag.UnsignedBigNum);if(i.length<=T)a.writeByteString(i);else{a.writeEncodedValue(x);for(let o=0;o<i.length;o+=T){const d=i.slice(o,o+T);a.writeByteString(d)}a.writeEndArray()}}e=(0,k.bytesToHex)(a.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new _.CborReader(e);const s=r.peekState();switch(s){case _.CborReaderState.Tag:{const a=r.peekTag();switch(a){case _.CborTag.UnsignedBigNum:{r.readTag();const i=r.readByteString();d(t,u,PlutusData.bufferToBigint(i),"f");d(t,m,P.PlutusDataKind.Integer,"f");break}case _.CborTag.NegativeBigNum:{r.readTag();const o=r.readByteString();d(t,u,PlutusData.bufferToBigint(o)*-1n,"f");d(t,m,P.PlutusDataKind.Integer,"f");break}default:d(t,h,w.ConstrPlutusData.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.ConstrPlutusData,"f")}break}case _.CborReaderState.NegativeInteger:case _.CborReaderState.UnsignedInteger:d(t,u,r.readInt(),"f");d(t,m,P.PlutusDataKind.Integer,"f");break;case _.CborReaderState.StartIndefiniteLengthByteString:case _.CborReaderState.ByteString:d(t,f,r.readByteString(),"f");d(t,m,P.PlutusDataKind.Bytes,"f");break;case _.CborReaderState.StartArray:d(t,l,S.PlutusList.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.List,"f");break;case _.CborReaderState.StartMap:d(t,c,C.PlutusMap.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}d(t,p,e,"f");return t}toCore(){switch(n(this,m,"f")){case P.PlutusDataKind.Bytes:return n(this,f,"f");case P.PlutusDataKind.ConstrPlutusData:{const e=n(this,h,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case P.PlutusDataKind.Integer:return n(this,u,"f");case P.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(n(this,l,"f"));case P.PlutusDataKind.Map:{const t=n(this,c,"f");const r=new Map;const s=t.getKeys();for(let a=0;a<s.getLength();a++){const i=s.get(a);r.set(i.toCore(),t.get(i).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new b.NotImplementedError(`PlutusData mapping for kind ${n(this,m,"f")}`)}}hash(){const e=y.blake2b(E).update(s.from(this.toCbor(),"hex")).digest();return y.Hash32ByteBase16(g.HexBlob.fromBytes(e))}static fromCore(e){if(v.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(v.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(v.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(v.isPlutusMap(e)){const t=new C.PlutusMap;for(const[r,s]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(s));return PlutusData.newMap(t)}if(v.isConstrPlutusData(e)){const a=e.constructor;const i=new w.ConstrPlutusData(a,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(i)}throw new b.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;d(t,h,e,"f");d(t,m,P.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;d(t,c,e,"f");d(t,m,P.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;d(t,l,e,"f");d(t,m,P.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;d(t,u,e,"f");d(t,m,P.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;d(t,f,e,"f");d(t,m,P.PlutusDataKind.Bytes,"f");return t}getKind(){return n(this,m,"f")}asConstrPlutusData(){return n(this,h,"f")}asMap(){return n(this,c,"f")}asList(){return n(this,l,"f")}asInteger(){return n(this,u,"f")}asBoundedBytes(){return n(this,f,"f")}equals(e){switch(n(this,m,"f")){case P.PlutusDataKind.Bytes:if(n(this,f,"f")&&n(e,f,"f")){return n(this,f,"f").length===n(e,f,"f").length&&n(this,f,"f").every((t,r)=>t===n(e,f,"f")[r])}return false;case P.PlutusDataKind.Integer:return n(this,u,"f")===n(e,u,"f");case P.PlutusDataKind.ConstrPlutusData:if(n(this,h,"f")&&n(e,h,"f")){return n(this,h,"f").equals(n(e,h,"f"))}return false;case P.PlutusDataKind.List:if(n(this,l,"f")&&n(e,l,"f")){return n(this,l,"f").equals(n(e,l,"f"))}return false;case P.PlutusDataKind.Map:if(n(this,c,"f")&&n(e,c,"f")){return n(this,c,"f").equals(n(e,c,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new S.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+A;let t=e.toString(16);if(t.length%2)t=`0${t}`;return s.from(t,"hex")}constructor(){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,P.PlutusDataKind.ConstrPlutusData);p.set(this,void 0)}}t.PlutusData=PlutusData;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusDataKind=void 0;var r;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(r=t.PlutusDataKind||(t.PlutusDataKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.PlutusList=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusList{toCbor(){const e=new i.CborWriter;const t=s(this,a,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(s(this,a,"f").length);for(const r of s(this,a,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new i.CborReader(e);r.readStartArray();while(r.peekState()!==i.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,a,"f").length}get(e){return s(this,a,"f")[e]}add(e){s(this,a,"f").push(e)}equals(e){if(s(this,a,"f").length!==s(e,a,"f").length)return false;for(let t=0;t<s(this,a,"f").length;++t)if(!s(this,a,"f")[t].equals(s(e,a,"f")[t]))return false;return true}constructor(){a.set(this,new Array)}}t.PlutusList=PlutusList;a=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.PlutusMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusMap{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartMap();else e.writeStartMap(s(this,i,"f").size);for(const[t,r]of s(this,i,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,o,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)a(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const i=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(i,d)}r.readEndMap();return t}getLength(){return s(this,i,"f").size}insert(e,t){s(this,i,"f").set(e,t)}get(e){if(!s(this,i,"f"))return;const t=[...s(this,i,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new l.PlutusList;for(const t of s(this,i,"f").keys())e.add(t);return e}equals(e){if(s(this,o,"f")!==s(e,o,"f"))return false;if(s(this,i,"f").size!==s(e,i,"f").size)return false;const t=[...s(this,i,"f").entries()];const r=[...s(e,i,"f").entries()];for(let a=0;a<s(this,i,"f").size;++a){if(!t[a][0].equals(r[a][0]))return false;if(!t[a][1].equals(r[a][1]))return false}return true}constructor(){i.set(this,new Map);o.set(this,false)}}t.PlutusMap=PlutusMap;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l,u,f,h,m,p,v;Object.defineProperty(t,"__esModule",{value:true});t.NativeScript=void 0;const y=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js");const x=28;class NativeScript{toCbor(){if(n(this,v,"f"))return n(this,v,"f");let e;switch(n(this,p,"f")){case g.NativeScriptKind.RequireSignature:e=n(this,f,"f").toCbor();break;case g.NativeScriptKind.RequireAllOf:e=n(this,c,"f").toCbor();break;case g.NativeScriptKind.RequireAnyOf:e=n(this,l,"f").toCbor();break;case g.NativeScriptKind.RequireNOf:e=n(this,u,"f").toCbor();break;case g.NativeScriptKind.RequireTimeAfter:e=n(this,m,"f").toCbor();break;case g.NativeScriptKind.RequireTimeBefore:e=n(this,h,"f").toCbor();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${n(this,p,"f")}`)}return e}static fromCbor(e){let t;const r=new _.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case g.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(C.ScriptPubkey.fromCbor(e));break;case g.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(b.ScriptAll.fromCbor(e));break;case g.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(P.ScriptAny.fromCbor(e));break;case g.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(S.ScriptNOfK.fromCbor(e));break;case g.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(j.TimelockStart.fromCbor(e));break;case g.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(k.TimelockExpiry.fromCbor(e));break;default:throw new w.InvalidStateError(`Unexpected kind value: ${s}`)}d(t,v,e,"f");return t}toCore(){let e;switch(n(this,p,"f")){case g.NativeScriptKind.RequireSignature:e=n(this,f,"f").toCore();break;case g.NativeScriptKind.RequireAllOf:e=n(this,c,"f").toCore();break;case g.NativeScriptKind.RequireAnyOf:e=n(this,l,"f").toCore();break;case g.NativeScriptKind.RequireNOf:e=n(this,u,"f").toCore();break;case g.NativeScriptKind.RequireTimeAfter:e=n(this,m,"f").toCore();break;case g.NativeScriptKind.RequireTimeBefore:e=n(this,h,"f").toCore();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${n(this,p,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case g.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(C.ScriptPubkey.fromCore(e));break;case g.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(b.ScriptAll.fromCore(e));break;case g.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(P.ScriptAny.fromCore(e));break;case g.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(S.ScriptNOfK.fromCore(e));break;case g.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(j.TimelockStart.fromCore(e));break;case g.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(k.TimelockExpiry.fromCore(e));break;default:throw new w.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;const t=y.blake2b(x).update(s.from(e,"hex")).digest();return y.Hash28ByteBase16(w.HexBlob.fromBytes(t))}kind(){return n(this,p,"f")}static newScriptPubkey(e){const t=new NativeScript;d(t,f,e,"f");d(t,p,g.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;d(t,c,e,"f");d(t,p,g.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;d(t,l,e,"f");d(t,p,g.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;d(t,u,e,"f");d(t,p,g.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;d(t,m,e,"f");d(t,p,g.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;d(t,h,e,"f");d(t,p,g.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return n(this,f,"f")}asScriptAll(){return n(this,c,"f")}asScriptAny(){return n(this,l,"f")}asScriptNOfK(){return n(this,u,"f")}asTimelockStart(){return n(this,m,"f")}asTimelockExpiry(){return n(this,h,"f")}constructor(){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0)}}t.NativeScript=NativeScript;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAll=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAll{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAllOf);e.writeStartArray(i(this,o,"f").length);for(const t of i(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAllOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const i=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)i.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const o=new ScriptAll(i);a(o,n,e,"f");return o}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAllOf,scripts:i(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return i(this,o,"f")}setNativeScripts(e){a(this,o,e,"f");a(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);a(this,o,e,"f")}}t.ScriptAll=ScriptAll;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAny=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAny{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAnyOf);e.writeStartArray(i(this,o,"f").length);for(const t of i(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAnyOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const i=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)i.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const o=new ScriptAny(i);a(o,n,e,"f");return o}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAnyOf,scripts:i(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return i(this,o,"f")}setNativeScripts(e){a(this,o,e,"f");a(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);a(this,o,e,"f")}}t.ScriptAny=ScriptAny;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ScriptNOfK=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const h=3;class ScriptNOfK{toCbor(){const e=new c.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeStartArray(h);e.writeInt(f.NativeScriptKind.RequireNOf);e.writeInt(i(this,n,"f"));e.writeStartArray(i(this,o,"f").length);for(const t of i(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==h)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==f.NativeScriptKind.RequireNOf)throw new l.InvalidArgumentError("cbor",`Expected kind ${f.NativeScriptKind.RequireNOf}, but got kind ${s}`);const i=t.readInt();const o=new Array;t.readStartArray();while(t.peekState()!==c.CborReaderState.EndArray)o.push(u.NativeScript.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const n=new ScriptNOfK(o,Number(i));a(n,d,e,"f");return n}toCore(){return{__type:f.ScriptType.Native,kind:f.NativeScriptKind.RequireNOf,required:i(this,n,"f"),scripts:i(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>u.NativeScript.fromCore(e)),e.required)}required(){return i(this,n,"f")}setRequired(e){a(this,n,e,"f");a(this,d,void 0,"f")}nativeScripts(){return i(this,o,"f")}setNativeScripts(e){a(this,o,e,"f");a(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f")}}t.ScriptNOfK=ScriptNOfK;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ScriptPubkey=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=2;class ScriptPubkey{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(p);e.writeInt(m.NativeScriptKind.RequireSignature);e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.NativeScriptKind.RequireSignature)throw new h.InvalidArgumentError("cbor",`Expected kind ${m.NativeScriptKind.RequireSignature}, but got kind ${s}`);const a=u.Ed25519KeyHashHex(h.HexBlob.fromBytes(t.readByteString()));const i=new ScriptPubkey(a);n(i,l,e,"f");return i}toCore(){return{__type:m.ScriptType.Native,keyHash:d(this,c,"f"),kind:m.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return d(this,c,"f")}setKeyHash(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.ScriptPubkey=ScriptPubkey;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.TimelockExpiry=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockExpiry{toCbor(){const e=new n.CborWriter;if(a(this,o,"f"))return a(this,o,"f");e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeBefore);e.writeInt(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==c.NativeScriptKind.RequireTimeBefore)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeBefore}, but got kind ${a}`);const i=(0,l.Slot)(Number(t.readInt()));const f=new TimelockExpiry(i);s(f,o,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeBefore,slot:a(this,i,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return a(this,i,"f")}setSlot(e){s(this,i,e,"f");s(this,o,void 0,"f")}constructor(e){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.TimelockExpiry=TimelockExpiry;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.TimelockStart=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockStart{toCbor(){if(a(this,o,"f"))return a(this,o,"f");const e=new n.CborWriter;e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeAfter);e.writeInt(a(this,i,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==c.NativeScriptKind.RequireTimeAfter)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeAfter}, but got kind ${a}`);const i=(0,l.Slot)(Number(t.readInt()));const f=new TimelockStart(i);s(f,o,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeAfter,slot:a(this,i,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return a(this,i,"f")}setSlot(e){s(this,i,e,"f");s(this,o,void 0,"f")}constructor(e){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.TimelockStart=TimelockStart;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV1Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV1Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V1)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;const t=u.blake2b(p).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(h.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV1Script=PlutusV1Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV2Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV2Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V2)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;const t=u.blake2b(p).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(h.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV2Script=PlutusV2Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV3Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV3Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V3)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;const t=u.blake2b(p).update(s.from(e,"hex")).digest();return u.Hash28ByteBase16(h.HexBlob.fromBytes(t))}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV3Script=PlutusV3Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Script=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js");const _=2;class Script{toCbor(){if(a(this,u,"f"))return a(this,u,"f");const e=new f.CborWriter;let t;switch(a(this,l,"f")){case y.ScriptLanguage.Native:t=a(this,o,"f").toCbor();break;case y.ScriptLanguage.PlutusV1:t=a(this,n,"f").toCbor();break;case y.ScriptLanguage.PlutusV2:t=a(this,d,"f").toCbor();break;case y.ScriptLanguage.PlutusV3:t=a(this,c,"f").toCbor();break;default:throw new h.InvalidStateError(`Unexpected language value: ${a(this,l,"f")}`)}e.writeStartArray(_);e.writeInt(a(this,l,"f"));e.writeEncodedValue(s.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new f.CborReader(e);r.readStartArray();const s=Number(r.readInt());const a=h.HexBlob.fromBytes(r.readEncodedValue());switch(s){case y.ScriptLanguage.Native:t=Script.newNativeScript(m.NativeScript.fromCbor(a));break;case y.ScriptLanguage.PlutusV1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCbor(a));break;case y.ScriptLanguage.PlutusV2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCbor(a));break;case y.ScriptLanguage.PlutusV3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCbor(a));break;default:throw new h.InvalidStateError(`Unexpected language value: ${s}`)}i(t,u,e,"f");return t}toCore(){let e;switch(a(this,l,"f")){case y.ScriptLanguage.Native:e=a(this,o,"f").toCore();break;case y.ScriptLanguage.PlutusV1:e=a(this,n,"f").toCore();break;case y.ScriptLanguage.PlutusV2:e=a(this,d,"f").toCore();break;case y.ScriptLanguage.PlutusV3:e=a(this,c,"f").toCore();break;default:throw new h.InvalidStateError(`Unexpected language: ${a(this,l,"f")}`)}return e}static fromCore(e){let t;if((0,p.isNativeScript)(e))t=Script.newNativeScript(m.NativeScript.fromCore(e));else{switch(e.version){case p.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCore(e));break;case p.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCore(e));break;case p.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCore(e));break;default:throw new h.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return a(this,l,"f")}static newNativeScript(e){const t=new Script;i(t,o,e,"f");i(t,l,y.ScriptLanguage.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;i(t,n,e,"f");i(t,l,y.ScriptLanguage.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;i(t,d,e,"f");i(t,l,y.ScriptLanguage.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;i(t,c,e,"f");i(t,l,y.ScriptLanguage.PlutusV3,"f");return t}asNative(){return a(this,o,"f")}asPlutusV1(){return a(this,n,"f")}asPlutusV2(){return a(this,d,"f")}asPlutusV3(){return a(this,c,"f")}hash(){let e;switch(a(this,l,"f")){case y.ScriptLanguage.Native:e=a(this,o,"f").hash();break;case y.ScriptLanguage.PlutusV1:e=a(this,n,"f").hash();break;case y.ScriptLanguage.PlutusV2:e=a(this,d,"f").hash();break;case y.ScriptLanguage.PlutusV3:e=a(this,c,"f").hash();break;default:throw new h.InvalidStateError(`Unexpected script language ${a(this,l,"f")}`)}return e}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0)}}t.Script=Script;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScriptLanguage=void 0;var r;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(r=t.ScriptLanguage||(t.ScriptLanguage={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l;Object.defineProperty(t,"__esModule",{value:true});t.deserializeTx=t.TxBodyCBOR=t.TxCBOR=t.Transaction=void 0;const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const y=4;class Transaction{toCbor(){const e=new f.CborWriter;if(i(this,l,"f"))return i(this,l,"f");e.writeStartArray(y);e.writeEncodedValue((0,v.hexToBytes)(i(this,o,"f").toCbor()));e.writeEncodedValue((0,v.hexToBytes)(i(this,n,"f").toCbor()));e.writeBoolean(i(this,c,"f"));if(i(this,d,"f"))e.writeEncodedValue((0,v.hexToBytes)(i(this,d,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();const s=t.readEncodedValue();const i=m.TransactionBody.fromCbor(h.HexBlob.fromBytes(s));const o=p.TransactionWitnessSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));let n=true;if(r===y)n=t.readBoolean();let d;if(t.peekState()!==f.CborReaderState.Null)d=u.AuxiliaryData.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const v=new Transaction(i,o,d);a(v,c,n,"f");a(v,l,e,"f");return v}toCore(){const e={body:i(this,o,"f").toCore(),id:this.getId(),isValid:i(this,c,"f"),witness:i(this,n,"f").toCore()};if(i(this,d,"f"))e.auxiliaryData=i(this,d,"f").toCore();return e}static fromCore(e){const t=new Transaction(m.TransactionBody.fromCore(e.body),p.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?u.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return m.TransactionBody.fromCbor(i(this,o,"f").toCbor())}setBody(e){a(this,o,e,"f");a(this,l,void 0,"f")}witnessSet(){return p.TransactionWitnessSet.fromCbor(i(this,n,"f").toCbor())}setWitnessSet(e){a(this,n,e,"f");a(this,l,void 0,"f")}isValid(){return i(this,c,"f")}setIsValid(e){a(this,l,void 0,"f");a(this,c,e,"f")}auxiliaryData(){if(i(this,d,"f")){return u.AuxiliaryData.fromCbor(i(this,d,"f").toCbor())}return}setAuxiliaryData(e){a(this,d,e,"f");a(this,l,void 0,"f")}getId(){return i(this,o,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,true);l.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f");a(this,d,r,"f")}}t.Transaction=Transaction;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap;const TxCBOR=e=>(0,h.HexBlob)(e);t.TxCBOR=TxCBOR;t.TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,h.HexBlob)(e);t.TxBodyCBOR=TxBodyCBOR;t.TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();t.deserializeTx=e=>{const r=e instanceof s?e.toString("hex"):e instanceof Uint8Array?s.from(e).toString("hex"):e;const a=Transaction.fromCbor((0,t.TxCBOR)(r));return a.toCore()};t.TxCBOR.deserialize=e=>(0,t.deserializeTx)(e)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.Committee=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;const h=2;const m=0;const p=1;class Committee{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");if(0===a(this,o,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");e.writeStartArray(f);e.writeStartMap(a(this,o,"f").length);for(const t of a(this,o,"f")){e.writeStartArray(h);e.writeInt(t[m].type);e.writeByteString((0,u.hexToBytes)(t[m].hash));e.writeInt(t[p])}e.writeEncodedValue((0,u.hexToBytes)(a(this,i,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);t.readStartMap();const a=[];while(t.peekState()!==d.CborReaderState.EndMap){if(t.readStartArray()!==h)throw new c.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());const o=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const u=Number(t.readUInt());a.push([{hash:o,type:i},u])}t.readEndMap();const v=l.UnitInterval.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const y=new Committee(v);for(const _ of a)y.addMember(_[m],_[p]);s(y,n,e,"f");return y}toCore(){if(0===a(this,o,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");const e=a(this,o,"f").map(e=>({coldCredential:e[m],epoch:e[p]}));return{members:e,quorumThreshold:a(this,i,"f").toCore()}}static fromCore(e){const t=new Committee(l.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return a(this,o,"f").map(e=>e[0])}quorumThreshold(){return a(this,i,"f")}addMember(e,t){const r=a(this,o,"f").find(t=>t[m].type===e.type&&t[m].hash===e.hash);if(r)throw new c.InvalidArgumentError("committeeColdCredential","The given credential is already present");a(this,o,"f").push([e,t])}getMemberEpoch(e){const t=a(this,o,"f").find(t=>t[m].type===e.type&&t[m].hash===e.hash);if(t)return t[p];return}constructor(e){i.set(this,void 0);o.set(this,[]);n.set(this,void 0);s(this,i,e,"f")}}t.Committee=Committee;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.Constitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class Constitution{toCbor(){const e=new c.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(a(this,i,"f").toCbor()));a(this,o,"f")?e.writeByteString((0,u.hexToBytes)(a(this,o,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let i;if(t.peekState()===c.CborReaderState.Null)t.readNull();else i=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=new Constitution(a,i);s(o,n,e,"f");return o}toCore(){return{anchor:a(this,i,"f").toCore(),scriptHash:a(this,o,"f")?a(this,o,"f"):null}}static fromCore(e){return new Constitution(d.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return a(this,i,"f")}setAnchor(e){s(this,i,e,"f");s(this,n,void 0,"f")}scriptHash(){return a(this,o,"f")}setScriptHash(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.Constitution=Constitution;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionKind=void 0;var r;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(r=t.GovernanceActionKind||(t.GovernanceActionKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.HardForkInitiationAction=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=3;class HardForkInitiationAction{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(p);e.writeInt(l.GovernanceActionKind.HardForkInitiation);a(this,o,"f")?e.writeEncodedValue((0,m.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(a(this,i,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==p)throw new f.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==l.GovernanceActionKind.HardForkInitiation)throw new f.InvalidArgumentError("cbor",`Expected action kind, expected ${l.GovernanceActionKind.HardForkInitiation} but got ${a}`);let i;if(t.peekState()===d.CborReaderState.Null)t.readNull();else i=c.GovernanceActionId.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const o=h.ProtocolVersion.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const u=new HardForkInitiationAction(o,i);s(u,n,e,"f");return u}toCore(){return{__typename:u.GovernanceActionType.hard_fork_initiation_action,governanceActionId:a(this,o,"f")?a(this,o,"f").toCore():null,protocolVersion:a(this,i,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(h.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?c.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,o,"f")}protocolVersion(){return a(this,i,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.HardForkInitiationAction=HardForkInitiationAction;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i;Object.defineProperty(t,"__esModule",{value:true});t.InfoAction=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1;class InfoAction{toCbor(){const e=new o.CborWriter;if(s(this,i,"f"))return s(this,i,"f");e.writeStartArray(l);e.writeInt(n.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.Info)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.Info} but got ${s}`);const d=new InfoAction;a(d,i,e,"f");return d}toCore(){return{__typename:d.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){i.set(this,void 0)}}t.InfoAction=InfoAction;i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.NewConstitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=3;class NewConstitution{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(p);e.writeInt(u.GovernanceActionKind.NewConstitution);a(this,o,"f")?e.writeEncodedValue((0,m.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(a(this,i,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==u.GovernanceActionKind.NewConstitution)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.NewConstitution} but got ${a}`);let i;if(t.peekState()===d.CborReaderState.Null)t.readNull();else i=l.GovernanceActionId.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=c.Constitution.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const f=new NewConstitution(o,i);s(f,n,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.new_constitution,constitution:a(this,i,"f").toCore(),governanceActionId:a(this,o,"f")?a(this,o,"f").toCore():null}}static fromCore(e){return new NewConstitution(c.Constitution.fromCore(e.constitution),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,o,"f")}constitution(){return a(this,i,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.NewConstitution=NewConstitution;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.NoConfidence=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const h=2;class NoConfidence{toCbor(){const e=new n.CborWriter;if(a(this,o,"f"))return a(this,o,"f");e.writeStartArray(h);e.writeInt(c.GovernanceActionKind.NoConfidence);a(this,i,"f")?e.writeEncodedValue((0,f.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==c.GovernanceActionKind.NoConfidence)throw new u.InvalidArgumentError("cbor",`Expected action kind, expected ${c.GovernanceActionKind.NoConfidence}  but got ${a}`);let i;if(t.peekState()===n.CborReaderState.Null)t.readNull();else i=d.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const l=new NoConfidence(i);s(l,o,e,"f");return l}toCore(){return{__typename:l.GovernanceActionType.no_confidence,governanceActionId:a(this,i,"f")?a(this,i,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?d.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,i,"f")}constructor(e){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.NoConfidence=NoConfidence;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ParameterChangeAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=4;class ParameterChangeAction{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.ParameterChange);a(this,o,"f")?e.writeEncodedValue((0,p.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,p.hexToBytes)(a(this,i,"f").toCbor()));a(this,n,"f")?e.writeByteString((0,p.hexToBytes)(a(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==v)throw new h.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==u.GovernanceActionKind.ParameterChange)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.ParameterChange} but got ${a}`);let i;if(t.peekState()===c.CborReaderState.Null)t.readNull();else i=l.GovernanceActionId.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=m.ProtocolParamUpdate.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));let n;if(t.peekState()===c.CborReaderState.Null)t.readNull();else n=h.HexBlob.fromBytes(t.readByteString());t.readEndArray();const f=new ParameterChangeAction(o,i,n);s(f,d,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.parameter_change_action,governanceActionId:a(this,o,"f")?a(this,o,"f").toCore():null,policyHash:a(this,n,"f")?a(this,n,"f"):null,protocolParamUpdate:a(this,i,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(m.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return a(this,o,"f")}protocolParamUpdate(){return a(this,i,"f")}policyHash(){return a(this,n,"f")}constructor(e,t,r){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f");s(this,n,r,"f")}}t.ParameterChangeAction=ParameterChangeAction;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c,l,u,f,h,m,p,v,y;Object.defineProperty(t,"__esModule",{value:true});t.ProposalProcedure=void 0;const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const F=4;class ProposalProcedure{toCbor(){const e=new g.CborWriter;if(a(this,y,"f"))return a(this,y,"f");let t;switch(a(this,h,"f")){case b.GovernanceActionKind.ParameterChange:t=a(this,o,"f").toCbor();break;case b.GovernanceActionKind.HardForkInitiation:t=a(this,n,"f").toCbor();break;case b.GovernanceActionKind.TreasuryWithdrawals:t=a(this,d,"f").toCbor();break;case b.GovernanceActionKind.NoConfidence:t=a(this,c,"f").toCbor();break;case b.GovernanceActionKind.UpdateCommittee:t=a(this,l,"f").toCbor();break;case b.GovernanceActionKind.NewConstitution:t=a(this,u,"f").toCbor();break;case b.GovernanceActionKind.Info:t=a(this,f,"f").toCbor();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${a(this,h,"f")}`)}e.writeStartArray(F);e.writeInt(a(this,m,"f"));const r=_.RewardAddress.fromAddress(_.Address.fromBech32(a(this,p,"f")));if(!r){throw new E.SerializationError(E.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${a(this,p,"f")}`)}e.writeByteString(s.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,B.hexToBytes)(t));e.writeEncodedValue((0,B.hexToBytes)(a(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new g.CborReader(e);r.readStartArray();const s=r.readInt();const a=_.Address.fromBytes(C.HexBlob.fromBytes(r.readByteString())).toBech32();const o=C.HexBlob.fromBytes(r.readEncodedValue());const n=w.Anchor.fromCbor(C.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const d=new g.CborReader(o);d.readStartArray();let c;const l=Number(d.readInt());switch(l){case b.GovernanceActionKind.ParameterChange:c=T.ParameterChangeAction.fromCbor(o);t=ProposalProcedure.newParameterChangeAction(s,a,n,c);break;case b.GovernanceActionKind.HardForkInitiation:c=S.HardForkInitiationAction.fromCbor(o);t=ProposalProcedure.newHardForkInitiationAction(s,a,n,c);break;case b.GovernanceActionKind.TreasuryWithdrawals:c=A.TreasuryWithdrawalsAction.fromCbor(o);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,a,n,c);break;case b.GovernanceActionKind.NoConfidence:c=x.NoConfidence.fromCbor(o);t=ProposalProcedure.newNoConfidence(s,a,n,c);break;case b.GovernanceActionKind.UpdateCommittee:c=I.UpdateCommittee.fromCbor(o);t=ProposalProcedure.newUpdateCommittee(s,a,n,c);break;case b.GovernanceActionKind.NewConstitution:c=j.NewConstitution.fromCbor(o);t=ProposalProcedure.newNewConstitution(s,a,n,c);break;case b.GovernanceActionKind.Info:c=k.InfoAction.fromCbor(o);t=ProposalProcedure.newInfoAction(s,a,n,c);break;default:throw new C.InvalidStateError(`Unexpected kind value: ${l}`)}i(t,y,e,"f");return t}toCore(){let e;switch(a(this,h,"f")){case b.GovernanceActionKind.ParameterChange:e=a(this,o,"f").toCore();break;case b.GovernanceActionKind.HardForkInitiation:e=a(this,n,"f").toCore();break;case b.GovernanceActionKind.TreasuryWithdrawals:e=a(this,d,"f").toCore();break;case b.GovernanceActionKind.NoConfidence:e=a(this,c,"f").toCore();break;case b.GovernanceActionKind.UpdateCommittee:e=a(this,l,"f").toCore();break;case b.GovernanceActionKind.NewConstitution:e=a(this,u,"f").toCore();break;case b.GovernanceActionKind.Info:e=a(this,f,"f").toCore();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${a(this,h,"f")}`)}return{anchor:a(this,v,"f").toCore(),deposit:a(this,m,"f"),governanceAction:e,rewardAccount:a(this,p,"f")}}static fromCore(e){let t;let r;const s=w.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case P.GovernanceActionType.parameter_change_action:t=T.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.hard_fork_initiation_action:t=S.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.treasury_withdrawals_action:t=A.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.no_confidence:t=x.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.update_committee:t=I.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.new_constitution:t=j.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.info_action:t=k.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new C.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.ParameterChange,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,o,s,"f");return a}static newHardForkInitiationAction(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.HardForkInitiation,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,n,s,"f");return a}static newTreasuryWithdrawalsAction(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.TreasuryWithdrawals,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,d,s,"f");return a}static newNoConfidence(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.NoConfidence,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,c,s,"f");return a}static newUpdateCommittee(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.UpdateCommittee,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,l,s,"f");return a}static newNewConstitution(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.NewConstitution,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,u,s,"f");return a}static newInfoAction(e,t,r,s){const a=new ProposalProcedure;i(a,h,b.GovernanceActionKind.Info,"f");i(a,m,e,"f");i(a,p,t,"f");i(a,v,r,"f");i(a,f,s,"f");return a}kind(){return a(this,h,"f")}deposit(){return a(this,m,"f")}rewardAccount(){return a(this,p,"f")}anchor(){return a(this,v,"f")}getParameterChangeAction(){return a(this,o,"f")}getHardForkInitiationAction(){return a(this,n,"f")}getTreasuryWithdrawalsAction(){return a(this,d,"f")}getNoConfidence(){return a(this,c,"f")}getUpdateCommittee(){return a(this,l,"f")}getNewConstitution(){return a(this,u,"f")}getInfoAction(){return a(this,f,"f")}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0)}}t.ProposalProcedure=ProposalProcedure;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TreasuryWithdrawalsAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=3;class TreasuryWithdrawalsAction{toCbor(){const e=new l.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...i(this,o,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){const f=c.RewardAddress.fromAddress(c.Address.fromBech32(r));if(!f){throw new m.SerializationError(m.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(s.from(f.toAddress().toBytes(),"hex"));e.writeInt(a)}i(this,n,"f")?e.writeByteString((0,p.hexToBytes)(i(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==v)throw new h.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==u.GovernanceActionKind.TreasuryWithdrawals)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const i=new Map;while(t.peekState()!==l.CborReaderState.EndMap){const o=c.Address.fromBytes(h.HexBlob.fromBytes(t.readByteString())).toBech32();const n=t.readInt();i.set(o,n)}t.readEndMap();let f;if(t.peekState()===l.CborReaderState.Null)t.readNull();else f=h.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new TreasuryWithdrawalsAction(i,f);a(m,d,e,"f");return m}toCore(){const e=new Set([...i(this,o,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:f.GovernanceActionType.treasury_withdrawals_action,policyHash:i(this,n,"f")?i(this,n,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return i(this,o,"f")}policyHash(){return i(this,n,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f")}}t.TreasuryWithdrawalsAction=TreasuryWithdrawalsAction;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.UpdateCommittee=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const _=5;const w=2;const g=0;const b=1;class UpdateCommittee{toCbor(){const e=new l.CborWriter;if(a(this,c,"f"))return a(this,c,"f");e.writeStartArray(_);e.writeInt(p.GovernanceActionKind.UpdateCommittee);a(this,i,"f")?e.writeEncodedValue((0,y.hexToBytes)(a(this,i,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,y.hexToBytes)(a(this,o,"f").toCbor()));e.writeStartMap(a(this,n,"f").length);for(const t of a(this,n,"f")){e.writeStartArray(w);e.writeInt(t[g].type);e.writeByteString((0,y.hexToBytes)(t[g].hash));e.writeInt(t[b])}e.writeEncodedValue((0,y.hexToBytes)(a(this,d,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());if(a!==p.GovernanceActionKind.UpdateCommittee)throw new v.InvalidArgumentError("cbor",`Expected action kind, expected ${p.GovernanceActionKind.UpdateCommittee} but got ${a}`);let i;if(t.peekState()===l.CborReaderState.Null)t.readNull();else i=m.GovernanceActionId.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const o=u.CborSet.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()),u.Credential.fromCbor);t.readStartMap();const n=[];while(t.peekState()!==l.CborReaderState.EndMap){if(t.readStartArray()!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const d=Number(t.readUInt());const f=v.HexBlob.fromBytes(t.readByteString());t.readEndArray();const h=Number(t.readUInt());n.push([{hash:f,type:d},h])}t.readEndMap();const y=u.UnitInterval.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const g=new UpdateCommittee(o,n,y,i);s(g,c,e,"f");return g}toCore(){return{__typename:f.GovernanceActionType.update_committee,governanceActionId:a(this,i,"f")?a(this,i,"f").toCore():null,membersToBeAdded:new Set(a(this,n,"f").map(e=>({coldCredential:e[g],epoch:(0,h.EpochNo)(e[b])}))),membersToBeRemoved:new Set(a(this,o,"f").toCore()),newQuorumThreshold:a(this,d,"f").toCore()}}static fromCore(e){return new UpdateCommittee(u.CborSet.fromCore([...e.membersToBeRemoved],u.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),u.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?m.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return a(this,i,"f")}membersToBeRemoved(){return a(this,o,"f").toCore()}membersToBeAdded(){return a(this,n,"f")}newQuorum(){return a(this,d,"f")}constructor(e,t,r,a){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f");s(this,d,r,"f");s(this,i,a,"f")}}t.UpdateCommittee=UpdateCommittee;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I,B;Object.defineProperty(t,"__esModule",{value:true});t.TransactionBody=void 0;const F=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js");const G=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const q=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");class TransactionBody{toCbor(){var e;const t=new R.CborWriter;if(d(this,I,"f"))return d(this,I,"f");t.writeStartMap(d(this,c,"m",B).call(this));if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,L.hexToBytes)(d(this,l,"f").toCbor()))}if(void 0!==d(this,u,"f")&&d(this,u,"f").length>0){t.writeInt(1n);t.writeStartArray(d(this,u,"f").length);for(const r of d(this,u,"f"))t.writeEncodedValue(s.from(r.toCbor(),"hex"))}if(void 0!==d(this,f,"f")){t.writeInt(2n);t.writeInt(d(this,f,"f"))}if(void 0!==d(this,h,"f")){t.writeInt(3n);t.writeInt(d(this,h,"f"))}if(void 0!==d(this,m,"f")&&d(this,m,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,L.hexToBytes)(d(this,m,"f").toCbor()))}if(void 0!==d(this,p,"f")&&d(this,p,"f").size>0){t.writeInt(5n);const a=new Map;for(const[i,o]of d(this,p,"f")){const n=M.RewardAddress.fromAddress(M.Address.fromBech32(i));if(!n){throw new H.SerializationError(H.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${i}`)}const F=n.toAddress().toBytes();a.set(F,o)}const D=[...a].sort((e,t)=>e>t?1:-1);t.writeStartMap(D.length);for(const[O,G]of D){t.writeByteString(s.from(O,"hex"));t.writeInt(G)}}if(void 0!==d(this,v,"f")){t.writeInt(6n);t.writeEncodedValue(s.from(d(this,v,"f").toCbor(),"hex"))}if(void 0!==d(this,y,"f")){t.writeInt(7n);t.writeByteString(s.from(d(this,y,"f"),"hex"))}if(void 0!==d(this,_,"f")){t.writeInt(8n);t.writeInt(d(this,_,"f"))}if(void 0!==d(this,w,"f")&&d(this,w,"f").size>0){t.writeInt(9n);const N=(0,q.tokenMapToMultiAsset)(d(this,w,"f"));t.writeStartMap(N.size);const K=new Map([...N.entries()].sort(q.sortCanonically));for(const[V,W]of K.entries()){t.writeByteString(s.from(V,"hex"));const z=new Map([...W.entries()].sort(q.sortCanonically));t.writeStartMap(z.size);for(const[U,$]of z.entries()){t.writeByteString(s.from(U,"hex"));t.writeInt($)}}}if(void 0!==d(this,g,"f")){t.writeInt(11n);t.writeByteString(s.from(d(this,g,"f"),"hex"))}if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,L.hexToBytes)(d(this,b,"f").toCbor()))}if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,L.hexToBytes)(d(this,P,"f").toCbor()))}if(void 0!==d(this,S,"f")){t.writeInt(15n);t.writeInt(d(this,S,"f"))}if(void 0!==d(this,C,"f")){t.writeInt(16n);t.writeEncodedValue(s.from(d(this,C,"f").toCbor(),"hex"))}if(void 0!==d(this,k,"f")){t.writeInt(17n);t.writeInt(d(this,k,"f"))}if(void 0!==d(this,j,"f")&&d(this,j,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,L.hexToBytes)(d(this,j,"f").toCbor()))}if(void 0!==d(this,x,"f")){t.writeInt(19n);t.writeEncodedValue(s.from(d(this,x,"f").toCbor(),"hex"))}if(void 0!==d(this,T,"f")&&d(this,T,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,L.hexToBytes)(d(this,T,"f").toCbor()))}if(void 0!==d(this,E,"f")){t.writeInt(21n);t.writeInt(d(this,E,"f"))}if(void 0!==d(this,A,"f")){t.writeInt(22n);t.writeInt(d(this,A,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new R.CborReader(e);const r=D.CborSet.fromCore([],W.TransactionInput.fromCore);const a=new Array;const i=0n;const o=new TransactionBody(r,a,i);t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const d=t.readInt();switch(d){case 0n:{const c=t.readEncodedValue();o.setInputs(D.CborSet.fromCbor(G.HexBlob.fromBytes(c),W.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==R.CborReaderState.EndArray){o.outputs().push(z.TransactionOutput.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:o.setFee(t.readInt());break;case 3n:o.setTtl((0,K.Slot)(Number(t.readInt())));break;case 4n:o.setCerts(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),O.Certificate.fromCbor));break;case 5n:t.readStartMap();o.setWithdrawals(new Map);while(t.peekState()!==R.CborReaderState.EndMap){const l=M.Address.fromBytes(G.HexBlob.fromBytes(t.readByteString())).toBech32();const u=t.readInt();o.withdrawals().set(l,u)}t.readEndMap();break;case 6n:o.setUpdate(U.Update.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:o.setAuxiliaryDataHash(G.HexBlob.fromBytes(t.readByteString()));break;case 8n:o.setValidityStartInterval((0,K.Slot)(Number(t.readInt())));break;case 9n:{const f=new Map;t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const h=G.HexBlob.fromBytes(t.readByteString());if(!f.has(h))f.set(h,new Map);t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const m=s.from(t.readByteString()).toString("hex");const p=t.readInt();f.get(h).set(m,p)}t.readEndMap()}t.readEndMap();o.setMint((0,q.multiAssetsToTokenMap)(f));break}case 11n:o.setScriptDataHash(G.HexBlob.fromBytes(t.readByteString()));break;case 13n:o.setCollateral(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),W.TransactionInput.fromCbor));break;case 14n:o.setRequiredSigners(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),D.Hash.fromCbor));break;case 15n:o.setNetworkId(Number(t.readInt()));break;case 16n:o.setCollateralReturn(z.TransactionOutput.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:o.setTotalCollateral(t.readInt());break;case 18n:o.setReferenceInputs(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),W.TransactionInput.fromCbor));break;case 19n:o.setVotingProcedures($.VotingProcedures.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:o.setProposalProcedures(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),N.ProposalProcedure.fromCbor));break;case 21n:o.setCurrentTreasuryValue(t.readInt());break;case 22n:o.setDonation(t.readInt());break}}t.readEndMap();n(o,I,e,"f");return o}toCore(){var e,t,r,s,a,i;return{auxiliaryDataHash:d(this,y,"f"),certificates:(null===(e=d(this,m,"f"))||void 0===e?void 0:e.values())?d(this,m,"f").toCore():void 0,collateralReturn:null===(t=d(this,C,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=d(this,b,"f"))||void 0===r?void 0:r.values())?d(this,b,"f").toCore():void 0,donation:d(this,A,"f"),fee:d(this,f,"f"),inputs:d(this,l,"f").toCore(),mint:d(this,w,"f"),networkId:d(this,S,"f"),outputs:d(this,u,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=d(this,T,"f"))||void 0===s?void 0:s.values())?d(this,T,"f").toCore():void 0,referenceInputs:(null===(a=d(this,j,"f"))||void 0===a?void 0:a.size())?d(this,j,"f").toCore():void 0,requiredExtraSignatures:null===(i=d(this,P,"f"))||void 0===i?void 0:i.toCore(),scriptIntegrityHash:d(this,g,"f"),totalCollateral:d(this,k,"f"),treasuryValue:d(this,E,"f"),update:d(this,v,"f")?d(this,v,"f").toCore():void 0,validityInterval:d(this,h,"f")||void 0!==d(this,_,"f")?{invalidBefore:d(this,_,"f"),invalidHereafter:d(this,h,"f")}:void 0,votingProcedures:d(this,x,"f")?d(this,x,"f").toCore():void 0,withdrawals:d(this,p,"f")?[...d(this,p,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(D.CborSet.fromCore(e.inputs,W.TransactionInput.fromCore),e.outputs.map(e=>z.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(D.CborSet.fromCore(e.certificates,O.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(z.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(D.CborSet.fromCore(e.collaterals,W.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(D.CborSet.fromCore(e.referenceInputs,W.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(D.CborSet.fromCore(e.requiredExtraSignatures,D.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(U.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures($.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(D.CborSet.fromCore(e.proposalProcedures,N.ProposalProcedure.fromCore));return t}setInputs(e){n(this,l,e,"f");n(this,I,void 0,"f")}inputs(){return d(this,l,"f")}setOutputs(e){n(this,u,e,"f");n(this,I,void 0,"f")}outputs(){return d(this,u,"f")}setFee(e){n(this,f,e,"f");n(this,I,void 0,"f")}fee(){return d(this,f,"f")}setTtl(e){n(this,h,e,"f");n(this,I,void 0,"f")}ttl(){return d(this,h,"f")}setCerts(e){n(this,m,e,"f");n(this,I,void 0,"f")}certs(){return d(this,m,"f")}setWithdrawals(e){n(this,p,e,"f");n(this,I,void 0,"f")}withdrawals(){return d(this,p,"f")}setUpdate(e){n(this,v,e,"f");n(this,I,void 0,"f")}update(){return d(this,v,"f")}setAuxiliaryDataHash(e){n(this,y,e,"f");n(this,I,void 0,"f")}auxiliaryDataHash(){return d(this,y,"f")}setValidityStartInterval(e){n(this,_,e,"f");n(this,I,void 0,"f")}validityStartInterval(){return d(this,_,"f")}setMint(e){n(this,w,(0,q.multiAssetsToTokenMap)(new Map([...(0,q.tokenMapToMultiAsset)(e).entries()].sort(q.sortCanonically))),"f");n(this,I,void 0,"f")}mint(){return d(this,w,"f")}setScriptDataHash(e){n(this,g,e,"f");n(this,I,void 0,"f")}scriptDataHash(){return d(this,g,"f")}setCollateral(e){n(this,b,e,"f");n(this,I,void 0,"f")}collateral(){return d(this,b,"f")}setRequiredSigners(e){n(this,P,e,"f");n(this,I,void 0,"f")}requiredSigners(){return d(this,P,"f")}setNetworkId(e){n(this,S,e,"f");n(this,I,void 0,"f")}networkId(){return d(this,S,"f")}setCollateralReturn(e){n(this,C,e,"f");n(this,I,void 0,"f")}collateralReturn(){return d(this,C,"f")}setTotalCollateral(e){n(this,k,e,"f");n(this,I,void 0,"f")}totalCollateral(){return d(this,k,"f")}setReferenceInputs(e){n(this,j,e,"f");n(this,I,void 0,"f")}referenceInputs(){return d(this,j,"f")}setVotingProcedures(e){n(this,x,e,"f");n(this,I,void 0,"f")}votingProcedures(){return d(this,x,"f")}setProposalProcedures(e){n(this,T,e,"f");n(this,I,void 0,"f")}proposalProcedures(){return d(this,T,"f")}setCurrentTreasuryValue(e){n(this,E,e,"f");n(this,I,void 0,"f")}currentTreasuryValue(){return d(this,E,"f")}setDonation(e){n(this,A,e,"f");n(this,I,void 0,"f")}donation(){return d(this,A,"f")}hash(){const e=F.blake2b(F.blake2b.BYTES).update((0,L.hexToBytes)(this.toCbor())).digest();return V.TransactionId.fromHexBlob(G.HexBlob.fromBytes(e))}hasTaggedSets(){const e=new R.CborReader(d(this,l,"f").toCbor());return e.peekState()===R.CborReaderState.Tag&&e.peekTag()===R.CborTag.Set}hasBabbageOutput(){if(0===d(this,u,"f").length)return false;const e=new R.CborReader(d(this,u,"f")[0].toCbor());return e.peekState()===R.CborReaderState.StartMap}constructor(e,t,r,s){c.add(this);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);n(this,l,e,"f");n(this,u,t,"f");n(this,f,r,"f");n(this,h,s,"f")}}t.TransactionBody=TransactionBody;l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,c=new WeakSet,B=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0)++t;if(void 0!==d(this,u,"f")&&d(this,u,"f").length>0)++t;if(void 0!==d(this,f,"f"))++t;if(void 0!==d(this,h,"f"))++t;if(void 0!==d(this,m,"f")&&d(this,m,"f").size()>0)++t;if(void 0!==d(this,p,"f")&&d(this,p,"f").size>0)++t;if(void 0!==d(this,v,"f"))++t;if(void 0!==d(this,y,"f"))++t;if(void 0!==d(this,_,"f"))++t;if(void 0!==d(this,w,"f")&&d(this,w,"f").size>0)++t;if(void 0!==d(this,g,"f"))++t;if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0)++t;if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0)++t;if(void 0!==d(this,S,"f"))++t;if(void 0!==d(this,C,"f"))++t;if(void 0!==d(this,k,"f"))++t;if(void 0!==d(this,j,"f")&&d(this,j,"f").size()>0)++t;if(void 0!==d(this,x,"f"))++t;if(void 0!==d(this,T,"f")&&d(this,T,"f").size()>0)++t;if(void 0!==d(this,E,"f"))++t;if(void 0!==d(this,A,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TransactionInput=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class TransactionInput{toCbor(){if(i(this,d,"f"))return i(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(i(this,o,"f"),"hex"));e.writeInt(i(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const i=t.readInt();const o=new TransactionInput(l.HexBlob.fromBytes(s),i);a(o,d,e,"f");return o}toCore(){return{index:Number(i(this,n,"f")),txId:i(this,o,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return i(this,o,"f")}setTransactionId(e){a(this,o,e,"f");a(this,d,void 0,"f")}index(){return i(this,n,"f")}setIndex(e){a(this,n,e,"f");a(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f")}}t.TransactionInput=TransactionInput;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionOutput=t.REQUIRED_FIELDS_COUNT=void 0;const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js");t.REQUIRED_FIELDS_COUNT=2;class TransactionOutput{toCbor(){if(i(this,u,"f"))return i(this,u,"f");const e=new m.CborWriter;const r=i(this,o,"m",f).call(this);if(r===t.REQUIRED_FIELDS_COUNT||3===r&&void 0!==i(this,c,"f")&&i(this,c,"f").kind()===p.DatumKind.DataHash){e.writeStartArray(r);e.writeByteString(s.from(i(this,n,"f").toBytes(),"hex"));e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex"));if(void 0!==i(this,c,"f"))e.writeByteString(s.from(i(this,c,"f").asDataHash(),"hex"))}else{e.writeStartMap(r);e.writeInt(0n);e.writeByteString(s.from(i(this,n,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex"));if(void 0!==i(this,c,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(i(this,c,"f").kind());switch(i(this,c,"f").kind()){case p.DatumKind.DataHash:e.writeByteString(s.from(i(this,c,"f").asDataHash(),"hex"));break;case p.DatumKind.InlineData:e.writeTag(m.CborTag.EncodedCborDataItem);e.writeByteString(s.from(i(this,c,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==i(this,l,"f")){e.writeInt(3n);e.writeTag(m.CborTag.EncodedCborDataItem);e.writeByteString(s.from(i(this,l,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);let r;let s;let i;let o;if(t.peekState()===m.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==m.CborReaderState.EndMap){const n=t.readInt();switch(n){case 0n:r=h.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));break;case 1n:s=w.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const d=new m.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));d.readStartArray();const c=Number(d.readInt());if(c===p.DatumKind.InlineData){const l=d.readTag();if(l!==m.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${m.CborTag.EncodedCborDataItem} but got ${l}`)}const f=d.readByteString();let g;let b;if(c===p.DatumKind.DataHash)g=v.HexBlob.fromBytes(f);if(c===p.DatumKind.InlineData)b=y.PlutusData.fromCbor(v.HexBlob.fromBytes(f));i=new p.Datum(g,b);break}case 3n:{const P=new m.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));const S=P.readTag();if(S!==m.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${m.CborTag.EncodedCborDataItem} but got ${S}`);const C=P.readByteString();o=_.Script.fromCbor(v.HexBlob.fromBytes(C));break}}}t.readEndMap()}else{const k=t.readStartArray();r=h.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));s=w.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));if(3===k){const j=t.readByteString();i=p.Datum.newDataHash(v.HexBlob.fromBytes(j))}}if(!r)throw new v.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!s)throw new v.InvalidArgumentError("cbor","Transaction output does not contain a value.");const x=new TransactionOutput(r,s);if(i)x.setDatum(i);if(o)x.setScriptRef(o);a(x,u,e,"f");return x}toCore(){var e;const t=i(this,d,"f").toCore();if(!t.assets)delete t.assets;const r={address:i(this,n,"f").asByron()?i(this,n,"f").toBase58():i(this,n,"f").toBech32(),value:t};if(i(this,c,"f")&&i(this,c,"f").kind()===p.DatumKind.InlineData)r.datum=null===(e=i(this,c,"f").asInlineData())||void 0===e?void 0:e.toCore();if(i(this,c,"f")&&i(this,c,"f").kind()===p.DatumKind.DataHash)r.datumHash=i(this,c,"f").asDataHash();if(i(this,l,"f"))r.scriptReference=i(this,l,"f").toCore();return r}static fromCore(e){const t=h.Address.fromString(e.address);if(!t)throw new v.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,w.Value.fromCore(e.value));if(e.datum)r.setDatum(p.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(p.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(_.Script.fromCore(e.scriptReference));return r}address(){return i(this,n,"f")}amount(){return i(this,d,"f")}datum(){return i(this,c,"f")}setDatum(e){a(this,c,e,"f")}scriptRef(){return i(this,l,"f")}setScriptRef(e){a(this,l,e,"f")}isBabbageOutput(){const e=new m.CborReader(this.toCbor());return e.peekState()===m.CborReaderState.StartMap}constructor(e,t){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);a(this,n,e,"f");a(this,d,t,"f")}}t.TransactionOutput=TransactionOutput;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,o=new WeakSet,f=function _TransactionOutput_getMapSize(){let e=t.REQUIRED_FIELDS_COUNT;if(i(this,c,"f"))++e;if(i(this,l,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.multiAssetsToTokenMap=t.tokenMapToMultiAsset=t.sortCanonically=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};t.sortCanonically=sortCanonically;const tokenMapToMultiAsset=e=>{const r=new Map;const a=new Map([...e.entries()].sort(t.sortCanonically));for(const[i,o]of a.entries()){const n=s.AssetId.getPolicyId(i);const d=s.AssetId.getAssetName(i);if(!r.has(n))r.set(n,new Map);r.get(n).set(d,o)}return r};t.tokenMapToMultiAsset=tokenMapToMultiAsset;const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,a]of e.entries()){for(const[i,o]of a.entries()){const n=s.AssetId.fromParts(r,i);t.set(n,o)}}return t};t.multiAssetsToTokenMap=multiAssetsToTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Value=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");const f=2;class Value{toCbor(){if(i(this,d,"f"))return i(this,d,"f");const e=new c.CborWriter;if(!i(this,n,"f")||i(this,n,"f").size<=0)e.writeInt(i(this,o,"f"));else{e.writeStartArray(f);e.writeInt(i(this,o,"f"));const t=(0,u.tokenMapToMultiAsset)(i(this,n,"f"));const r=new Map([...t.entries()].sort(u.sortCanonically));e.writeStartMap(r.size);for(const[a,l]of r.entries()){e.writeByteString(s.from(a,"hex"));const h=new Map([...l.entries()].sort(u.sortCanonically));e.writeStartMap(h.size);for(const[m,p]of h.entries()){e.writeByteString(s.from(m,"hex"));e.writeInt(p)}}}return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.peekState()===c.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const i=t.readStartArray();if(i!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${i} elements`);const o=t.readUInt();const n=new Map;t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const h=l.HexBlob.fromBytes(t.readByteString());if(!n.has(h))n.set(h,new Map);t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const m=s.from(t.readByteString()).toString("hex");const p=t.readUInt();n.get(h).set(m,p)}t.readEndMap()}t.readEndMap();const v=new Map([...(0,u.multiAssetsToTokenMap)(n)].sort(u.sortCanonically));const y=new Value(o,v);a(y,d,e,"f");return y}toCore(){return{assets:i(this,n,"f"),coins:i(this,o,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return i(this,o,"f")}setCoin(e){a(this,o,e,"f");a(this,d,void 0,"f")}multiasset(){return i(this,n,"f")}setMultiasset(e){a(this,n,(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(e).entries()].sort(u.sortCanonically))),"f");a(this,d,void 0,"f")}constructor(e,t){o.set(this,0n);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t?(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(t).entries()].sort(u.sortCanonically))):void 0,"f")}}t.Value=Value;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Voter=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const m=2;class Voter{toCbor(){if(i(this,d,"f"))return i(this,d,"f");const e=new c.CborWriter;e.writeStartArray(m);e.writeInt(i(this,o,"f"));e.writeByteString(s.from(i(this,n,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new c.CborReader(e);const s=r.readStartArray();if(s!==m)throw new u.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${s} elements`);const i=Number(r.readInt());const o=u.HexBlob.fromBytes(r.readByteString());switch(i){case f.VoterKind.ConstitutionalCommitteeKeyHash:case f.VoterKind.DrepKeyHash:case f.VoterKind.StakePoolKeyHash:t={hash:o,type:l.CredentialType.KeyHash};break;case f.VoterKind.ConstitutionalCommitteeScriptHash:case f.VoterKind.DRepScriptHash:t={hash:o,type:l.CredentialType.ScriptHash};break;default:throw new u.InvalidStateError(`Unexpected kind value: ${i}`)}const n=new Voter(i,t);a(n,d,e,"f");return n}toCore(){switch(i(this,o,"f")){case f.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:h.VoterType.ccHotKeyHash,credential:{hash:i(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:h.VoterType.ccHotScriptHash,credential:{hash:i(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.DrepKeyHash:return{__typename:h.VoterType.dRepKeyHash,credential:{hash:i(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.DRepScriptHash:return{__typename:h.VoterType.dRepScriptHash,credential:{hash:i(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.StakePoolKeyHash:return{__typename:h.VoterType.stakePoolKeyHash,credential:{hash:i(this,n,"f").hash,type:l.CredentialType.KeyHash}};default:throw new u.InvalidStateError(`Unexpected kind value: ${i(this,o,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case h.VoterType.ccHotKeyHash:case h.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case h.VoterType.dRepKeyHash:case h.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case h.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new u.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.ConstitutionalCommitteeKeyHash:f.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.DrepKeyHash:f.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(f.VoterKind.StakePoolKeyHash,{hash:e,type:l.CredentialType.KeyHash})}kind(){return i(this,o,"f")}toConstitutionalCommitteeHotCred(){if(i(this,o,"f")===f.VoterKind.ConstitutionalCommitteeKeyHash||i(this,o,"f")===f.VoterKind.ConstitutionalCommitteeScriptHash)return i(this,n,"f");return}toDrepCred(){if(i(this,o,"f")===f.VoterKind.DrepKeyHash||i(this,o,"f")===f.VoterKind.DRepScriptHash)return i(this,n,"f");return}toStakingPoolKeyHash(){if(i(this,o,"f")===f.VoterKind.StakePoolKeyHash)return i(this,n,"f").hash;return}equals(e){return i(this,o,"f")===i(e,o,"f")&&i(this,n,"f").type===i(e,n,"f").type&&i(this,n,"f").hash===i(e,n,"f").hash}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f")}}t.Voter=Voter;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VoterKind=void 0;var r;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(r=t.VoterKind||(t.VoterKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedure=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class VotingProcedure{toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new c.CborWriter;e.writeStartArray(f);e.writeInt(a(this,i,"f"));a(this,o,"f")?e.writeEncodedValue((0,u.hexToBytes)(a(this,o,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);t.readStartArray();const r=Number(t.readInt());let a;if(t.peekState()===c.CborReaderState.Null){t.readNull();a=void 0}else{a=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()))}const i=new VotingProcedure(r,a);s(i,n,e,"f");return i}toCore(){return{anchor:a(this,o,"f")?a(this,o,"f").toCore():null,vote:a(this,i,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?d.Anchor.fromCore(e.anchor):void 0)}vote(){return a(this,i,"f")}setVote(e){s(this,i,e,"f");s(this,n,void 0,"f")}anchor(){return a(this,o,"f")}setAnchor(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.VotingProcedure=VotingProcedure;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedures=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class VotingProcedures{toCbor(){if(s(this,o,"f"))return s(this,o,"f");const e=new n.CborWriter;const t=this.getVoters();if(0===t.length)throw new c.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const a=this.getGovernanceActionIdsByVoter(r);if(0===a.length)throw new c.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,f.hexToBytes)(r.toCbor()));e.writeStartMap(a.length);for(const i of a){e.writeEncodedValue((0,f.hexToBytes)(i.toCbor()));const d=this.get(r,i);if(!d)throw new c.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,f.hexToBytes)(d.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const s=l.Voter.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const i=d.GovernanceActionId.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const f=u.VotingProcedure.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,i,f)}t.readEndMap()}t.readEndMap();a(r,o,e,"f");return r}toCore(){return s(this,i,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;a(t,i,e.map(e=>{const t=l.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:d.GovernanceActionId.fromCore(e.actionId),votingProcedure:u.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const n=s(this,i,"f").find(t=>t.voter.equals(e));if(!n){s(this,i,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const d=n.votes.find(e=>e.actionId.equals(t));if(d)throw new c.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");n.votes.push({actionId:t,votingProcedure:r});a(this,o,void 0,"f")}get(e,t){const r=s(this,i,"f").find(t=>t.voter.equals(e));if(!r)return;const a=r.votes.find(e=>e.actionId.equals(t));if(!a)return;return a.votingProcedure}getVoters(){return s(this,i,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=s(this,i,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){i.set(this,[]);o.set(this,void 0)}}t.VotingProcedures=VotingProcedures;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.TransactionUnspentOutput=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class TransactionUnspentOutput{toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new d.CborWriter;e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(a(this,i,"f").toCbor()));e.writeEncodedValue((0,u.hexToBytes)(a(this,o,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=l.TransactionInput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const i=l.TransactionOutput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const o=new TransactionUnspentOutput(a,i);s(o,n,e,"f");return o}toCore(){return[a(this,i,"f").toCore(),a(this,o,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(l.TransactionInput.fromCore(e[0]),l.TransactionOutput.fromCore(e[1]))}input(){return a(this,i,"f")}setInput(e){s(this,i,e,"f");s(this,n,void 0,"f")}output(){return a(this,o,"f")}setOutput(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.TransactionUnspentOutput=TransactionUnspentOutput;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BootstrapWitness=void 0;const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const h=4;const m=(0,l.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new u.CborWriter;if(a(this,c,"f"))return a(this,c,"f");if(a(this,n,"f").length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${a(this,n,"f").length/2} bytes long`);e.writeStartArray(h);e.writeByteString((0,f.hexToBytes)(a(this,i,"f")));e.writeByteString((0,f.hexToBytes)(a(this,o,"f")));e.writeByteString((0,f.hexToBytes)(a(this,n,"f")));e.writeByteString((0,f.hexToBytes)(a(this,d,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new u.CborReader(e);const r=t.readStartArray();if(r!==h)throw new l.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=l.HexBlob.fromBytes(t.readByteString());const i=l.HexBlob.fromBytes(t.readByteString());const o=l.HexBlob.fromBytes(t.readByteString());const n=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new BootstrapWitness(a,i,o,n);s(d,c,e,"f");return d}toCore(){return{addressAttributes:l.Base64Blob.fromBytes((0,f.hexToBytes)(a(this,d,"f"))),chainCode:a(this,n,"f"),key:a(this,i,"f"),signature:a(this,o,"f")}}static fromCore(e){if(!e.chainCode)throw new l.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?l.HexBlob.fromBase64(e.addressAttributes):m)}vkey(){return a(this,i,"f")}setVkey(e){s(this,i,e,"f");s(this,c,void 0,"f")}signature(){return a(this,o,"f")}setSignature(e){s(this,o,e,"f");s(this,c,void 0,"f")}chainCode(){return a(this,n,"f")}setChainCode(e){if(e.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);s(this,n,e,"f");s(this,c,void 0,"f")}attributes(){return a(this,d,"f")}setAttributes(e){s(this,d,e,"f");s(this,c,void 0,"f")}constructor(e,t,r,a){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f");s(this,n,r,"f");s(this,d,a,"f")}}t.BootstrapWitness=BootstrapWitness;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h;Object.defineProperty(t,"__esModule",{value:true});t.Redeemer=void 0;const m=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const P=4;const S=32;class Redeemer{toCbor(){const e=new p.CborWriter;if(d(this,h,"f"))return d(this,h,"f");e.writeStartArray(P);e.writeInt(d(this,c,"f"));e.writeInt(d(this,l,"f"));e.writeEncodedValue((0,b.hexToBytes)(d(this,u,"f").toCbor()));e.writeEncodedValue((0,b.hexToBytes)(d(this,f,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(r!==P)throw new y.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const a=t.readUInt();const i=_.PlutusData.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const o=v.ExUnits.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const d=new Redeemer(s,a,i,o);n(d,h,e,"f");return d}toCore(){let e;switch(d(this,c,"f")){case g.RedeemerTag.Spend:e=w.RedeemerPurpose.spend;break;case g.RedeemerTag.Mint:e=w.RedeemerPurpose.mint;break;case g.RedeemerTag.Cert:e=w.RedeemerPurpose.certificate;break;case g.RedeemerTag.Reward:e=w.RedeemerPurpose.withdrawal;break;case g.RedeemerTag.Voting:e=w.RedeemerPurpose.vote;break;case g.RedeemerTag.Proposing:e=w.RedeemerPurpose.propose;break;default:throw new y.InvalidStateError(`Invalid redeemer type ${d(this,c,"f")}`)}return{data:d(this,u,"f").toCore(),executionUnits:d(this,f,"f").toCore(),index:Number(d(this,l,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case w.RedeemerPurpose.spend:t=g.RedeemerTag.Spend;break;case w.RedeemerPurpose.mint:t=g.RedeemerTag.Mint;break;case w.RedeemerPurpose.certificate:t=g.RedeemerTag.Cert;break;case w.RedeemerPurpose.withdrawal:t=g.RedeemerTag.Reward;break;case w.RedeemerPurpose.vote:t=g.RedeemerTag.Voting;break;case w.RedeemerPurpose.propose:t=g.RedeemerTag.Proposing;break;default:throw new y.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),_.PlutusData.fromCore(e.data),v.ExUnits.fromCore(e.executionUnits))}tag(){return d(this,c,"f")}setTag(e){n(this,c,e,"f");n(this,h,void 0,"f")}index(){return d(this,l,"f")}setIndex(e){n(this,l,e,"f");n(this,h,void 0,"f")}data(){return d(this,u,"f")}setData(e){n(this,u,e,"f");n(this,h,void 0,"f")}exUnits(){return d(this,f,"f")}setExUnits(e){n(this,f,e,"f");n(this,h,void 0,"f")}hash(){const e=m.blake2b(S).update(s.from(this.toCbor(),"hex")).digest();return m.Hash32ByteBase16(y.HexBlob.fromBytes(e))}constructor(e,t,r,s){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f");n(this,f,s,"f")}}t.Redeemer=Redeemer;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedeemerTag=void 0;var r;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(r=t.RedeemerTag||(t.RedeemerTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.Redeemers=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");const p=2;const v=2;class Redeemers{toCbor(){if(i(this,n,"f"))return i(this,n,"f");const e=new d.CborWriter;if(m.inConwayEra){const t=new Map(i(this,o,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,h.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,h.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(i(this,o,"f").length);for(const a of i(this,o,"f"))e.writeEncodedValue(s.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new d.CborReader(e);if(r.peekState()===d.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==d.CborReaderState.EndMap){const s=r.readStartArray();if(s!==p)throw new l.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${p} elements, but got an array of ${s} elements`);const i=Number(r.readUInt());const o=r.readUInt();r.readEndArray();const h=r.readStartArray();if(h!==v)throw new l.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${v} elements, but got an array of ${h} elements`);const m=u.PlutusData.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));const y=c.ExUnits.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new f.Redeemer(i,o,m,y))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){t.push(f.Redeemer.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const _=new Redeemers(t);a(_,n,e,"f");return _}toCore(){return i(this,o,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>f.Redeemer.fromCore(e)))}values(){return i(this,o,"f")}setValues(e){a(this,o,[...e],"f");a(this,n,void 0,"f")}size(){return i(this,o,"f").length}constructor(e){o.set(this,void 0);n.set(this,void 0);a(this,o,[...e],"f")}}t.Redeemers=Redeemers;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c,l,u,f,h,m,p,v,y,_,w,g;Object.defineProperty(t,"__esModule",{value:true});t.TransactionWitnessSet=void 0;const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const B=o(r("../../node_modules/lodash/uniqWith.js"));class TransactionWitnessSet{toCbor(){const e=new P.CborWriter;if(a(this,y,"f"))return a(this,y,"f");e.writeStartMap(a(this,n,"m",g).call(this));if(void 0!==a(this,c,"f")&&a(this,c,"f").size()>0){a(this,c,"f").setValues((0,B.default)(a(this,c,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(s.from(a(this,c,"f").toCbor(),"hex"))}if(void 0!==a(this,l,"f")&&a(this,l,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(s.from(a(this,l,"f").toCbor(),"hex"))}if(void 0!==a(this,u,"f")&&a(this,u,"f").size()>0){a(this,u,"f").setValues((0,B.default)(a(this,u,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(s.from(a(this,u,"f").toCbor(),"hex"))}if(void 0!==a(this,f,"f")&&a(this,f,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(s.from(a(this,f,"f").toCbor(),"hex"))}if(void 0!==a(this,h,"f")&&a(this,h,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(s.from(a(this,h,"f").toCbor(),"hex"))}if(void 0!==a(this,m,"f")&&a(this,m,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,I.hexToBytes)(a(this,m,"f").toCbor()))}if(void 0!==a(this,p,"f")&&a(this,p,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(s.from(a(this,p,"f").toCbor(),"hex"))}if(void 0!==a(this,v,"f")&&a(this,v,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(s.from(a(this,v,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new P.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==P.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:r.setVkeys(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),A.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.NativeScript.fromCbor));break;case 2n:r.setBootstraps(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),b.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),j.PlutusData.fromCbor));break;case 5n:r.setRedeemers(T.Redeemers.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV3Script.fromCbor));break}}t.readEndMap();i(r,y,e,"f");return r}toCore(){var e;const t=a(this,n,"m",_).call(this);return{bootstrap:a(this,u,"f")?a(this,u,"f").toCore():void 0,datums:a(this,h,"f")?a(this,h,"f").toCore():void 0,redeemers:(null===(e=a(this,m,"f"))||void 0===e?void 0:e.size())?a(this,m,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:a(this,c,"f")?new Map(a(this,c,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(S.CborSet.fromCore([...e.signatures],A.VkeyWitness.fromCore));if(e.scripts){const r=a(TransactionWitnessSet,d,"m",w).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(T.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(S.CborSet.fromCore(e.datums,j.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(S.CborSet.fromCore(e.bootstrap,b.BootstrapWitness.fromCore));return t}setVkeys(e){i(this,c,e,"f");i(this,y,void 0,"f")}vkeys(){return a(this,c,"f")}setNativeScripts(e){i(this,l,e,"f");i(this,y,void 0,"f")}nativeScripts(){return a(this,l,"f")}setBootstraps(e){i(this,u,e,"f");i(this,y,void 0,"f")}bootstraps(){return a(this,u,"f")}setPlutusV1Scripts(e){i(this,f,e,"f");i(this,y,void 0,"f")}plutusV1Scripts(){return a(this,f,"f")}setPlutusData(e){i(this,h,e,"f");i(this,y,void 0,"f")}plutusData(){return a(this,h,"f")}setRedeemers(e){i(this,m,e,"f");i(this,y,void 0,"f")}redeemers(){return a(this,m,"f")}setPlutusV2Scripts(e){i(this,p,e,"f");i(this,y,void 0,"f")}plutusV2Scripts(){return a(this,p,"f")}setPlutusV3Scripts(e){i(this,v,e,"f");i(this,y,void 0,"f")}plutusV3Scripts(){return a(this,v,"f")}constructor(){n.add(this);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0)}}t.TransactionWitnessSet=TransactionWitnessSet;d=TransactionWitnessSet,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,n=new WeakSet,_=function _TransactionWitnessSet_getCoreScripts(){const e=a(this,f,"f")?a(this,f,"f").toCore():[];const t=a(this,p,"f")?a(this,p,"f").toCore():[];const r=a(this,v,"f")?a(this,v,"f").toCore():[];const s=a(this,l,"f")?a(this,l,"f").toCore():[];return[...e,...t,...r,...s]},w=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,a]=e.reduce(([e,t,r,s],a)=>{if(a.__type===x.ScriptType.Native)e?e.push(a):e=[a];else{switch(a.version){case x.PlutusLanguageVersion.V1:t?t.push(a):t=[a];break;case x.PlutusLanguageVersion.V2:r?r.push(a):r=[a];break;case x.PlutusLanguageVersion.V3:s?s.push(a):s=[a];break;default:throw new E.SerializationError(E.SerializationFailure.InvalidScriptType,`Script '${a}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:S.CborSet.fromCore(t,k.NativeScript.fromCore)},...r&&{plutusV1:S.CborSet.fromCore(r,k.PlutusV1Script.fromCore)},...s&&{plutusV2:S.CborSet.fromCore(s,k.PlutusV2Script.fromCore)},...a&&{plutusV3:S.CborSet.fromCore(a,k.PlutusV3Script.fromCore)}}},g=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==a(this,c,"f")&&a(this,c,"f").size()>0)++e;if(void 0!==a(this,l,"f")&&a(this,l,"f").size()>0)++e;if(void 0!==a(this,u,"f")&&a(this,u,"f").size()>0)++e;if(void 0!==a(this,f,"f")&&a(this,f,"f").size()>0)++e;if(void 0!==a(this,h,"f")&&a(this,h,"f").size()>0)++e;if(void 0!==a(this,m,"f")&&a(this,m,"f").size()>0)++e;if(void 0!==a(this,p,"f")&&a(this,p,"f").size()>0)++e;if(void 0!==a(this,v,"f")&&a(this,v,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.VkeyWitness=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=2;class VkeyWitness{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(u);e.writeByteString((0,l.hexToBytes)(a(this,i,"f")));e.writeByteString((0,l.hexToBytes)(a(this,o,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new c.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const a=c.HexBlob.fromBytes(t.readByteString());const i=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=new VkeyWitness(a,i);s(o,n,e,"f");return o}toCore(){return[a(this,i,"f"),a(this,o,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return a(this,i,"f")}setVkey(e){s(this,i,e,"f");s(this,n,void 0,"f")}signature(){return a(this,o,"f")}setSignature(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.VkeyWitness=VkeyWitness;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.CostModel=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class CostModel{static newPlutusV1(e){return new CostModel(l.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(l.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(l.PlutusLanguageVersion.V3,e)}set(e,t){if(!a(this,i,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${a(this,o,"f")}.`);a(this,n,"f")[e]=t}get(e){if(!a(this,i,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${a(this,o,"f")}.`);return a(this,n,"f")[e]}costs(){return a(this,n,"f")}language(){return a(this,o,"f")}constructor(e,t){i.add(this);o.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f")}}t.CostModel=CostModel;o=new WeakMap,n=new WeakMap,i=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.Costmdls=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class Costmdls{toCbor(){const e=new n.CborWriter;if(a(this,o,"f"))return a(this,o,"f");const t=new Map([...a(this,i,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeInt(r);e.writeStartArray(s.costs().length);for(const d of s.costs())e.writeInt(d)}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const a=Number(t.readInt());const i=new Array;t.readStartArray();while(t.peekState()!==n.CborReaderState.EndArray){i.push(Number(t.readInt()))}t.readEndArray();r.set(a,new d.CostModel(a,i))}t.readEndMap();const c=new Costmdls(r);s(c,o,e,"f");return c}toCore(){const e=new Map;for(const[t,r]of a(this,i,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new d.CostModel(r,s));return new Costmdls(t)}size(){return a(this,i,"f").size}insert(e){a(this,i,"f").set(e.language(),e);s(this,o,void 0,"f")}get(e){return a(this,i,"f").get(e)}keys(){return[...a(this,i,"f").keys()]}languageViewsEncoding(){const e=new n.CborWriter;const t=new Map([...a(this,i,"f")].sort((e,t)=>{const r=e[0]===l.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===l.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,s]of t){switch(r){case l.PlutusLanguageVersion.V1:{const o=new n.CborWriter;o.writeStartArray();for(const d of s.costs())o.writeInt(d);o.writeEndArray();const u=o.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(u);break}case l.PlutusLanguageVersion.V2:case l.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(s.costs().length);for(const f of s.costs())e.writeInt(f);break;default:throw new c.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f")}}t.Costmdls=Costmdls;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f,h,m,p,v;Object.defineProperty(t,"__esModule",{value:true});t.DrepVotingThresholds=void 0;const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const g=10;class DrepVotingThresholds{toCbor(){const e=new y.CborWriter;if(i(this,v,"f"))return i(this,v,"f");e.writeStartArray(g);e.writeEncodedValue(s.from(i(this,o,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,m,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,p,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new y.CborReader(e);const r=t.readStartArray();if(r!==g)throw new _.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const i=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const o=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const n=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const d=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const c=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const l=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const u=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const f=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));const h=w.UnitInterval.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new DrepVotingThresholds(s,i,o,n,d,c,l,u,f,h);a(m,v,e,"f");return m}toCore(){return{committeeNoConfidence:i(this,d,"f").toCore(),committeeNormal:i(this,n,"f").toCore(),hardForkInitiation:i(this,l,"f").toCore(),motionNoConfidence:i(this,o,"f").toCore(),ppEconomicGroup:i(this,f,"f").toCore(),ppGovernanceGroup:i(this,m,"f").toCore(),ppNetworkGroup:i(this,u,"f").toCore(),ppTechnicalGroup:i(this,h,"f").toCore(),treasuryWithdrawal:i(this,p,"f").toCore(),updateConstitution:i(this,c,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(w.UnitInterval.fromCore(e.motionNoConfidence),w.UnitInterval.fromCore(e.committeeNormal),w.UnitInterval.fromCore(e.committeeNoConfidence),w.UnitInterval.fromCore(e.updateConstitution),w.UnitInterval.fromCore(e.hardForkInitiation),w.UnitInterval.fromCore(e.ppNetworkGroup),w.UnitInterval.fromCore(e.ppEconomicGroup),w.UnitInterval.fromCore(e.ppTechnicalGroup),w.UnitInterval.fromCore(e.ppGovernanceGroup),w.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){a(this,o,e,"f");a(this,v,void 0,"f")}setCommitteeNormal(e){a(this,n,e,"f");a(this,v,void 0,"f")}setCommitteeNoConfidence(e){a(this,d,e,"f");a(this,v,void 0,"f")}setUpdateConstitution(e){a(this,c,e,"f");a(this,v,void 0,"f")}setHardForkInitiation(e){a(this,l,e,"f");a(this,v,void 0,"f")}setPpNetworkGroup(e){a(this,u,e,"f");a(this,v,void 0,"f")}setPpEconomicGroup(e){a(this,f,e,"f");a(this,v,void 0,"f")}setPpTechnicalGroup(e){a(this,h,e,"f");a(this,v,void 0,"f")}setPpGovernanceGroup(e){a(this,m,e,"f");a(this,v,void 0,"f")}setTreasuryWithdrawal(e){a(this,p,e,"f");a(this,v,void 0,"f")}motionNoConfidence(){return i(this,o,"f")}committeeNormal(){return i(this,n,"f")}committeeNoConfidence(){return i(this,d,"f")}updateConstitution(){return i(this,c,"f")}hardForkInitiation(){return i(this,l,"f")}ppNetworkGroup(){return i(this,u,"f")}ppEconomicGroup(){return i(this,f,"f")}ppTechnicalGroup(){return i(this,h,"f")}ppGovernanceGroup(){return i(this,m,"f")}treasuryWithdrawal(){return i(this,p,"f")}constructor(e,t,r,s,i,y,_,w,g,b){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f");a(this,d,r,"f");a(this,c,s,"f");a(this,l,i,"f");a(this,u,y,"f");a(this,f,_,"f");a(this,h,w,"f");a(this,m,g,"f");a(this,p,b,"f")}}t.DrepVotingThresholds=DrepVotingThresholds;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.ExUnitPrices=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const h=o(r("../../node_modules/fraction.js/fraction.js"));const m=2;class ExUnitPrices{toCbor(){const e=new l.CborWriter;if(i(this,c,"f"))return i(this,c,"f");e.writeStartArray(m);e.writeEncodedValue(s.from(i(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==m)throw new u.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const i=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const o=new ExUnitPrices(s,i);a(o,c,e,"f");return o}toCore(){return{memory:Number(i(this,n,"f").numerator())/Number(i(this,n,"f").denominator()),steps:Number(i(this,d,"f").numerator())/Number(i(this,d,"f").denominator())}}static fromCore(e){const t=new h.default(e.memory);const r=new h.default(e.steps);return new ExUnitPrices(new f.UnitInterval(BigInt(t.n),BigInt(t.d)),new f.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return i(this,n,"f")}setMemPrice(e){a(this,n,e,"f");a(this,c,void 0,"f")}stepsPrice(){return i(this,d,"f")}setStepsPrice(e){a(this,d,e,"f");a(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);a(this,n,e,"f");a(this,d,t,"f")}}t.ExUnitPrices=ExUnitPrices;n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolVotingThresholds=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const p=5;class PoolVotingThresholds{toCbor(){const e=new f.CborWriter;if(i(this,u,"f"))return i(this,u,"f");e.writeStartArray(p);e.writeEncodedValue(s.from(i(this,o,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(i(this,l,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const i=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const n=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const d=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new PoolVotingThresholds(s,i,o,n,d);a(c,u,e,"f");return c}toCore(){return{committeeNoConfidence:i(this,d,"f").toCore(),committeeNormal:i(this,n,"f").toCore(),hardForkInitiation:i(this,c,"f").toCore(),motionNoConfidence:i(this,o,"f").toCore(),securityRelevantParamVotingThreshold:i(this,l,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(m.UnitInterval.fromCore(e.motionNoConfidence),m.UnitInterval.fromCore(e.committeeNormal),m.UnitInterval.fromCore(e.committeeNoConfidence),m.UnitInterval.fromCore(e.hardForkInitiation),m.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){a(this,o,e,"f");a(this,u,void 0,"f")}setCommitteeNormal(e){a(this,n,e,"f");a(this,u,void 0,"f")}setCommitteeNoConfidence(e){a(this,d,e,"f");a(this,u,void 0,"f")}setHardForkInitiation(e){a(this,c,e,"f");a(this,u,void 0,"f")}motionNoConfidence(){return i(this,o,"f")}committeeNormal(){return i(this,n,"f")}committeeNoConfidence(){return i(this,d,"f")}hardForkInitiation(){return i(this,c,"f")}securityRelevantParam(){return i(this,l,"f")}constructor(e,t,r,s,i){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);a(this,o,e,"f");a(this,n,t,"f");a(this,d,r,"f");a(this,c,s,"f");a(this,l,i,"f")}}t.PoolVotingThresholds=PoolVotingThresholds;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ProposedProtocolParameterUpdates=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js");class ProposedProtocolParameterUpdates{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");const t=new Map([...d(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeByteString(s.from(r,"hex"));e.writeEncodedValue(s.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==f.CborReaderState.EndMap){const s=u.Hash28ByteBase16(h.HexBlob.fromBytes(t.readByteString()));const a=m.ProtocolParamUpdate.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));r.set(s,a)}t.readEndMap();const i=new ProposedProtocolParameterUpdates(r);n(i,l,e,"f");return i}toCore(){return new Map([...d(this,c,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,m.ProtocolParamUpdate.fromCore(t)])))}size(){return d(this,c,"f").size}insert(e,t){d(this,c,"f").set(e,t)}get(e){return d(this,c,"f").get(e)}keys(){return[...d(this,c,"f").keys()]}constructor(e){c.set(this,new Map);l.set(this,void 0);n(this,c,e,"f")}}t.ProposedProtocolParameterUpdates=ProposedProtocolParameterUpdates;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o,n,d,c,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolParamUpdate=void 0;const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const q=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const Y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js");class ProtocolParamUpdate{toCbor(){const e=new V.CborWriter;if(a(this,H,"f"))return a(this,H,"f");e.writeStartMap(a(this,o,"m",K).call(this));if(void 0!==a(this,n,"f")){e.writeInt(0n);e.writeInt(a(this,n,"f"))}if(void 0!==a(this,d,"f")){e.writeInt(1n);e.writeInt(a(this,d,"f"))}if(void 0!==a(this,c,"f")){e.writeInt(2n);e.writeInt(a(this,c,"f"))}if(void 0!==a(this,l,"f")){e.writeInt(3n);e.writeInt(a(this,l,"f"))}if(void 0!==a(this,u,"f")){e.writeInt(4n);e.writeInt(a(this,u,"f"))}if(void 0!==a(this,f,"f")){e.writeInt(5n);e.writeInt(a(this,f,"f"))}if(void 0!==a(this,h,"f")){e.writeInt(6n);e.writeInt(a(this,h,"f"))}if(void 0!==a(this,m,"f")){e.writeInt(7n);e.writeInt(a(this,m,"f"))}if(void 0!==a(this,p,"f")){e.writeInt(8n);e.writeInt(a(this,p,"f"))}if(void 0!==a(this,v,"f")){e.writeInt(9n);e.writeEncodedValue(s.from(a(this,v,"f").toCbor(),"hex"))}if(void 0!==a(this,y,"f")){e.writeInt(10n);e.writeEncodedValue(s.from(a(this,y,"f").toCbor(),"hex"))}if(void 0!==a(this,_,"f")){e.writeInt(11n);e.writeEncodedValue(s.from(a(this,_,"f").toCbor(),"hex"))}if(void 0!==a(this,w,"f")){e.writeInt(12n);e.writeEncodedValue(s.from(a(this,w,"f").toCbor(),"hex"))}if(void 0!==a(this,g,"f"))if(0===a(this,g,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(s.from(a(this,g,"f"),"hex"))}if(void 0!==a(this,b,"f")){e.writeInt(14n);e.writeEncodedValue(s.from(a(this,b,"f").toCbor(),"hex"))}if(void 0!==a(this,P,"f")){e.writeInt(16n);e.writeInt(a(this,P,"f"))}if(void 0!==a(this,S,"f")){e.writeInt(17n);e.writeInt(a(this,S,"f"))}if(void 0!==a(this,C,"f")){e.writeInt(18n);e.writeEncodedValue(s.from(a(this,C,"f").toCbor(),"hex"))}if(void 0!==a(this,k,"f")){e.writeInt(19n);e.writeEncodedValue(s.from(a(this,k,"f").toCbor(),"hex"))}if(void 0!==a(this,j,"f")){e.writeInt(20n);e.writeEncodedValue(s.from(a(this,j,"f").toCbor(),"hex"))}if(void 0!==a(this,x,"f")){e.writeInt(21n);e.writeEncodedValue(s.from(a(this,x,"f").toCbor(),"hex"))}if(void 0!==a(this,T,"f")){e.writeInt(22n);e.writeInt(a(this,T,"f"))}if(void 0!==a(this,E,"f")){e.writeInt(23n);e.writeInt(a(this,E,"f"))}if(void 0!==a(this,A,"f")){e.writeInt(24n);e.writeInt(a(this,A,"f"))}if(void 0!==a(this,I,"f")){e.writeInt(25n);e.writeEncodedValue(s.from(a(this,I,"f").toCbor(),"hex"))}if(void 0!==a(this,B,"f")){e.writeInt(26n);e.writeEncodedValue(s.from(a(this,B,"f").toCbor(),"hex"))}if(void 0!==a(this,F,"f")){e.writeInt(27n);e.writeInt(a(this,F,"f"))}if(void 0!==a(this,M,"f")){e.writeInt(28n);e.writeInt(a(this,M,"f"))}if(void 0!==a(this,R,"f")){e.writeInt(29n);e.writeInt(a(this,R,"f"))}if(void 0!==a(this,D,"f")){e.writeInt(30n);e.writeInt(a(this,D,"f"))}if(void 0!==a(this,O,"f")){e.writeInt(31n);e.writeInt(a(this,O,"f"))}if(void 0!==a(this,G,"f")){e.writeInt(32n);e.writeInt(a(this,G,"f"))}if(void 0!==a(this,N,"f")){e.writeInt(33n);e.writeEncodedValue(s.from(a(this,N,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new V.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==V.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:i(r,n,t.readInt(),"f");break;case 1n:i(r,d,t.readInt(),"f");break;case 2n:i(r,c,Number(t.readInt()),"f");break;case 3n:i(r,l,Number(t.readInt()),"f");break;case 4n:i(r,u,Number(t.readInt()),"f");break;case 5n:i(r,f,t.readInt(),"f");break;case 6n:i(r,h,t.readInt(),"f");break;case 7n:i(r,m,Number(t.readInt()),"f");break;case 8n:i(r,p,Number(t.readInt()),"f");break;case 9n:i(r,v,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:i(r,y,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:i(r,_,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:i(r,w,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();i(r,g,"","f");t.readEndArray()}else{t.readEncodedValue();i(r,g,q.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:i(r,b,L.ProtocolVersion.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:i(r,P,t.readInt(),"f");break;case 17n:i(r,S,t.readInt(),"f");break;case 18n:i(r,C,W.Costmdls.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:i(r,k,$.ExUnitPrices.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:i(r,j,L.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:i(r,x,L.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:i(r,T,Number(t.readInt()),"f");break;case 23n:i(r,E,Number(t.readInt()),"f");break;case 24n:i(r,A,Number(t.readInt()),"f");break;case 25n:i(r,I,Y.PoolVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:i(r,B,z.DrepVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:i(r,F,Number(t.readInt()),"f");break;case 28n:i(r,M,Number(t.readInt()),"f");break;case 29n:i(r,R,Number(t.readInt()),"f");break;case 30n:i(r,D,Number(t.readInt()),"f");break;case 31n:i(r,O,Number(t.readInt()),"f");break;case 32n:i(r,G,Number(t.readInt()),"f");break;case 33n:i(r,N,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();i(r,H,e,"f");return r}toCore(){var e,t,r,s,i,o;const H={coinsPerUtxoByte:void 0!==a(this,S,"f")?Number(a(this,S,"f")):void 0,collateralPercentage:a(this,E,"f"),committeeTermLimit:void 0!==a(this,M,"f")?(0,U.EpochNo)(a(this,M,"f")):void 0,costModels:null===(e=a(this,C,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:a(this,O,"f"),dRepInactivityPeriod:void 0!==a(this,G,"f")?(0,U.EpochNo)(a(this,G,"f")):void 0,dRepVotingThresholds:null===(t=a(this,B,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:a(this,p,"f"),governanceActionDeposit:a(this,D,"f"),governanceActionValidityPeriod:void 0!==a(this,R,"f")?(0,U.EpochNo)(a(this,R,"f")):void 0,maxBlockBodySize:a(this,c,"f"),maxBlockHeaderSize:a(this,u,"f"),maxCollateralInputs:a(this,A,"f"),maxExecutionUnitsPerBlock:null===(r=a(this,x,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=a(this,j,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==a(this,l,"f")?Number(a(this,l,"f")):void 0,maxValueSize:a(this,T,"f"),minCommitteeSize:a(this,F,"f"),minFeeCoefficient:void 0!==a(this,n,"f")?Number(a(this,n,"f")):void 0,minFeeConstant:void 0!==a(this,d,"f")?Number(a(this,d,"f")):void 0,minFeeRefScriptCostPerByte:a(this,N,"f")?a(this,N,"f").toFloat().toString():void 0,minPoolCost:void 0!==a(this,P,"f")?Number(a(this,P,"f")):void 0,monetaryExpansion:a(this,y,"f")?a(this,y,"f").toFloat().toString():void 0,poolDeposit:void 0!==a(this,h,"f")?Number(a(this,h,"f")):void 0,poolInfluence:a(this,v,"f")?a(this,v,"f").toFloat().toString():void 0,poolRetirementEpochBound:a(this,m,"f"),poolVotingThresholds:null===(i=a(this,I,"f"))||void 0===i?void 0:i.toCore(),prices:null===(o=a(this,k,"f"))||void 0===o?void 0:o.toCore(),stakeKeyDeposit:void 0!==a(this,f,"f")?Number(a(this,f,"f")):void 0,treasuryExpansion:a(this,_,"f")?a(this,_,"f").toFloat().toString():void 0};if(a(this,w,"f"))H.decentralizationParameter=a(this,w,"f").toFloat().toString();if(void 0!==a(this,g,"f"))H.extraEntropy=a(this,g,"f");if(a(this,b,"f"))H.protocolVersion=a(this,b,"f").toCore();return H}static fromCore(e){const t=new ProtocolParamUpdate;i(t,n,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");i(t,c,e.maxBlockBodySize,"f");i(t,d,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");i(t,u,e.maxBlockHeaderSize,"f");i(t,f,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");i(t,h,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");i(t,m,e.poolRetirementEpochBound,"f");i(t,p,e.desiredNumberOfPools,"f");i(t,v,e.poolInfluence?L.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");i(t,y,e.monetaryExpansion?L.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");i(t,_,e.treasuryExpansion?L.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");i(t,P,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");i(t,T,e.maxValueSize,"f");i(t,l,e.maxTxSize,"f");i(t,E,e.collateralPercentage,"f");i(t,A,e.maxCollateralInputs,"f");i(t,C,e.costModels?W.Costmdls.fromCore(e.costModels):void 0,"f");i(t,k,e.prices?$.ExUnitPrices.fromCore(e.prices):void 0,"f");i(t,j,e.maxExecutionUnitsPerTransaction?L.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");i(t,x,e.maxExecutionUnitsPerBlock?L.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");i(t,S,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");i(t,I,e.poolVotingThresholds?Y.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");i(t,B,e.dRepVotingThresholds?z.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");i(t,F,e.minCommitteeSize,"f");i(t,M,e.committeeTermLimit,"f");i(t,R,e.governanceActionValidityPeriod,"f");i(t,D,e.governanceActionDeposit,"f");i(t,O,e.dRepDeposit,"f");i(t,G,e.dRepInactivityPeriod,"f");i(t,N,e.minFeeRefScriptCostPerByte?L.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:a}=e;if(void 0!==r||void 0!==s||a){i(t,w,a?L.UnitInterval.fromFloat(Number(a)):void 0,"f");i(t,b,r?L.ProtocolVersion.fromCore(r):void 0,"f");i(t,g,s?(0,q.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){i(this,n,e,"f")}minFeeA(){return a(this,n,"f")}setMinFeeB(e){i(this,d,e,"f");i(this,H,void 0,"f")}minFeeB(){return a(this,d,"f")}setMaxBlockBodySize(e){i(this,c,e,"f");i(this,H,void 0,"f")}maxBlockBodySize(){return a(this,c,"f")}setMaxTxSize(e){i(this,l,e,"f");i(this,H,void 0,"f")}maxTxSize(){return a(this,l,"f")}setMaxBlockHeaderSize(e){i(this,u,e,"f");i(this,H,void 0,"f")}maxBlockHeaderSize(){return a(this,u,"f")}setKeyDeposit(e){i(this,f,e,"f");i(this,H,void 0,"f")}keyDeposit(){return a(this,f,"f")}setPoolDeposit(e){i(this,h,e,"f");i(this,H,void 0,"f")}poolDeposit(){return a(this,h,"f")}setMaxEpoch(e){i(this,m,e,"f");i(this,H,void 0,"f")}maxEpoch(){return a(this,m,"f")}setNOpt(e){i(this,p,e,"f");i(this,H,void 0,"f")}nOpt(){return a(this,p,"f")}setPoolPledgeInfluence(e){i(this,v,e,"f");i(this,H,void 0,"f")}poolPledgeInfluence(){return a(this,v,"f")}setExpansionRate(e){i(this,y,e,"f");i(this,H,void 0,"f")}expansionRate(){return a(this,y,"f")}setTreasuryGrowthRate(e){i(this,_,e,"f");i(this,H,void 0,"f")}treasuryGrowthRate(){return a(this,_,"f")}setD(e){i(this,w,e,"f");i(this,H,void 0,"f")}d(){return a(this,w,"f")}setExtraEntropy(e){i(this,g,e,"f");i(this,H,void 0,"f")}extraEntropy(){return a(this,g,"f")}setProtocolVersion(e){i(this,b,e,"f");i(this,H,void 0,"f")}protocolVersion(){return a(this,b,"f")}setMinPoolCost(e){i(this,P,e,"f");i(this,H,void 0,"f")}minPoolCost(){return a(this,P,"f")}setAdaPerUtxoByte(e){i(this,S,e,"f");i(this,H,void 0,"f")}adaPerUtxoByte(){return a(this,S,"f")}setCostModels(e){i(this,C,e,"f");i(this,H,void 0,"f")}costModels(){return a(this,C,"f")}setExecutionCosts(e){i(this,k,e,"f");i(this,H,void 0,"f")}executionCosts(){return a(this,k,"f")}setMaxTxExUnits(e){i(this,j,e,"f");i(this,H,void 0,"f")}maxTxExUnits(){return a(this,j,"f")}setMaxBlockExUnits(e){i(this,x,e,"f");i(this,H,void 0,"f")}maxBlockExUnits(){return a(this,x,"f")}setMaxValueSize(e){i(this,T,e,"f");i(this,H,void 0,"f")}maxValueSize(){return a(this,T,"f")}setCollateralPercentage(e){i(this,E,e,"f");i(this,H,void 0,"f")}collateralPercentage(){return a(this,E,"f")}setMaxCollateralInputs(e){i(this,A,e,"f");i(this,H,void 0,"f")}maxCollateralInputs(){return a(this,A,"f")}setPoolVotingThresholds(e){i(this,I,e,"f");i(this,H,void 0,"f")}poolVotingThresholds(){return a(this,I,"f")}setDrepVotingThresholds(e){i(this,B,e,"f");i(this,H,void 0,"f")}drepVotingThresholds(){return a(this,B,"f")}setMinCommitteeSize(e){i(this,F,e,"f");i(this,H,void 0,"f")}minCommitteeSize(){return a(this,F,"f")}setCommitteeTermLimit(e){i(this,M,e,"f");i(this,H,void 0,"f")}committeeTermLimit(){return a(this,M,"f")}setGovernanceActionValidityPeriod(e){i(this,R,e,"f");i(this,H,void 0,"f")}governanceActionValidityPeriod(){return a(this,R,"f")}setGovernanceActionDeposit(e){i(this,D,e,"f");i(this,H,void 0,"f")}governanceActionDeposit(){return a(this,D,"f")}setDrepDeposit(e){i(this,O,e,"f");i(this,H,void 0,"f")}drepDeposit(){return a(this,O,"f")}setDrepInactivityPeriod(e){i(this,G,e,"f");i(this,H,void 0,"f")}drepInactivityPeriod(){return a(this,G,"f")}minFeeRefScriptCostPerByte(){return a(this,N,"f")}constructor(){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0)}}t.ProtocolParamUpdate=ProtocolParamUpdate;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,o=new WeakSet,K=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==a(this,n,"f"))++e;if(void 0!==a(this,d,"f"))++e;if(void 0!==a(this,c,"f"))++e;if(void 0!==a(this,l,"f"))++e;if(void 0!==a(this,u,"f"))++e;if(void 0!==a(this,f,"f"))++e;if(void 0!==a(this,h,"f"))++e;if(void 0!==a(this,m,"f"))++e;if(void 0!==a(this,p,"f"))++e;if(void 0!==a(this,v,"f"))++e;if(void 0!==a(this,y,"f"))++e;if(void 0!==a(this,_,"f"))++e;if(void 0!==a(this,w,"f"))++e;if(void 0!==a(this,g,"f"))++e;if(void 0!==a(this,b,"f"))++e;if(void 0!==a(this,P,"f"))++e;if(void 0!==a(this,S,"f"))++e;if(void 0!==a(this,C,"f"))++e;if(void 0!==a(this,k,"f"))++e;if(void 0!==a(this,j,"f"))++e;if(void 0!==a(this,x,"f"))++e;if(void 0!==a(this,T,"f"))++e;if(void 0!==a(this,E,"f"))++e;if(void 0!==a(this,A,"f"))++e;if(void 0!==a(this,I,"f"))++e;if(void 0!==a(this,B,"f"))++e;if(void 0!==a(this,F,"f"))++e;if(void 0!==a(this,M,"f"))++e;if(void 0!==a(this,R,"f"))++e;if(void 0!==a(this,D,"f"))++e;if(void 0!==a(this,O,"f"))++e;if(void 0!==a(this,G,"f"))++e;if(void 0!==a(this,N,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Update=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js");const h=2;class Update{toCbor(){const e=new c.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeStartArray(h);e.writeEncodedValue(s.from(i(this,n,"f").toCbor(),"hex"));e.writeInt(i(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=f.ProposedProtocolParameterUpdates.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const i=t.readInt();t.readEndArray();const o=new Update(s,(0,l.EpochNo)(Number(i)));a(o,d,e,"f");return o}toCore(){return{epoch:i(this,o,"f"),proposedProtocolParameterUpdates:i(this,n,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=f.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return i(this,o,"f")}setEpoch(e){a(this,o,e,"f");a(this,d,void 0,"f")}proposedProtocolParameterUpdates(){return i(this,n,"f")}setProposedProtocolParameterUpdates(e){a(this,n,e,"f");a(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);a(this,o,t,"f");a(this,n,e,"f")}}t.Update=Update;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/const.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HD_WALLET_CIP_ID=t.MULTISIG_CIP_ID=void 0;t.MULTISIG_CIP_ID=1854;t.HD_WALLET_CIP_ID=1852},"../../node_modules/@cardano-sdk/core/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeoutError=t.NotImplementedError=t.InvalidProtocolParametersError=t.SerializationError=t.SerializationFailure=t.HandleOwnerChangeError=t.ProviderError=t.reasonToProviderFailure=t.statusCodeMapToProviderFailure=t.providerFailureToStatusCodeMap=t.ProviderFailure=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(i=t.ProviderFailure||(t.ProviderFailure={}));t.providerFailureToStatusCodeMap={[i.BadRequest]:400,[i.Forbidden]:403,[i.NotFound]:404,[i.Conflict]:409,[i.Unhealthy]:500,[i.Unknown]:500,[i.InvalidResponse]:500,[i.NotImplemented]:500,[i.ConnectionFailure]:500,[i.ServerUnavailable]:500};t.statusCodeMapToProviderFailure=new Map(Object.entries(t.providerFailureToStatusCodeMap).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(i).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:i.Unknown;t.reasonToProviderFailure=reasonToProviderFailure;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}t.ProviderError=ProviderError;class HandleOwnerChangeError extends a.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}t.HandleOwnerChangeError=HandleOwnerChangeError;var o;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(o=t.SerializationFailure||(t.SerializationFailure={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}t.SerializationError=SerializationError;class InvalidProtocolParametersError extends a.CustomError{constructor(e){super(e)}}t.InvalidProtocolParametersError=InvalidProtocolParametersError;class NotImplementedError extends a.CustomError{constructor(e){super(`Not implemented: ${e}`)}}t.NotImplementedError=NotImplementedError;class TimeoutError extends a.CustomError{constructor(e){super(`Timeout: ${e}`)}}t.TimeoutError=TimeoutError},"../../node_modules/@cardano-sdk/core/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.Serialization=t.Cardano=t.Asset=void 0;t.Asset=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js"));t.Cardano=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js"));t.Serialization=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/const.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.calculateStabilityWindowSlotsCount=void 0;const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;t.calculateStabilityWindowSlotsCount=calculateStabilityWindowSlotsCount},"../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.coalesceValueQuantities=void 0;const o=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceValueQuantities=e=>({assets:o.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:n.BigIntMath.sum(e.map(({coins:e})=>e))});t.coalesceValueQuantities=coalesceValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setInConwayEra=t.inConwayEra=void 0;t.inConwayEra=false;const setInConwayEra=e=>t.inConwayEra=e;t.setInConwayEra=setInConwayEra},"../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.metadatum=t.util=void 0;t.util=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js"),t);t.metadatum=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.metadatumToJson=t.jsonToMetadatum=t.asMetadatumArray=t.asMetadatumMap=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};t.asMetadatumMap=asMetadatumMap;const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};t.asMetadatumArray=asMetadatumArray;const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const r=[];for(const a of e)r.push((0,t.jsonToMetadatum)(a));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const i=new Map;for(const o in e){const n=e[o];i.set((0,t.jsonToMetadatum)(o),(0,t.jsonToMetadatum)(n))}return i}}};t.jsonToMetadatum=jsonToMetadatum;const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const r=[];for(const a of e)r.push((0,t.metadatumToJson)(a));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const i={};for(const[o,n]of e.entries())i[(0,t.metadatumToJson)(o)]=(0,t.metadatumToJson)(n);return i}}};t.metadatumToJson=metadatumToJson},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.utf8ToHex=t.utf8ToBytes=t.hexToBytes=t.bytesToHex=void 0;const bytesToHex=e=>s.from(e).toString("hex");t.bytesToHex=bytesToHex;const hexToBytes=e=>s.from(e,"hex");t.hexToBytes=hexToBytes;const utf8ToBytes=e=>s.from(e,"utf8");t.utf8ToBytes=utf8ToBytes;const utf8ToHex=e=>s.from(e,"utf8").toString("hex");t.utf8ToHex=utf8ToHex},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.jsonToNativeScript=t.nativeScriptPolicyId=void 0;const o=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const nativeScriptPolicyId=e=>(0,c.PolicyId)(n.NativeScript.fromCore(e).hash());t.nativeScriptPolicyId=nativeScriptPolicyId;const jsonToNativeScript=e=>{let r;if(!e.type){throw new l.SerializationError(l.SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":r={__type:d.ScriptType.Native,keyHash:o.Ed25519KeyHashHex(e.keyHash),kind:d.NativeScriptKind.RequireSignature};break;case"all":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAllOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[s]));break;case"any":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAnyOf,scripts:new Array};for(let a=0;a<e.scripts.length;++a)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[a]));break;case"atLeast":{const i=Number.parseInt(e.required);r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireNOf,required:i,scripts:new Array};for(let n=0;n<e.scripts.length;++n)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[n]));break}case"before":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeBefore,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;case"after":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeAfter,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;default:throw new l.SerializationError(l.SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return r};t.jsonToNativeScript=jsonToNativeScript},"../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.promiseTimeout=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const promiseTimeout=(e,t)=>{let r;return Promise.race([e,new Promise((e,a)=>r=setTimeout(()=>a(new s.TimeoutError("Failed to resolve the promise in time")),t))]).finally(()=>{if(r)clearTimeout(r)})};t.promiseTimeout=promiseTimeout},"../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.epochSlotsCalcFactory=t.epochSlotsCalc=t.createSlotEpochInfoCalc=t.createSlotTimeCalc=t.createSlotEpochCalc=t.EraSummaryError=void 0;const a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const o=s(r("../../node_modules/lodash/groupBy.js"));const n=s(r("../../node_modules/lodash/last.js"));const d=s(r("../../node_modules/lodash/memoize.js"));const c=s(r("../../node_modules/lodash/orderBy.js"));class EraSummaryError extends a.CustomError{}t.EraSummaryError=EraSummaryError;const createSlotEpochCalcImpl=e=>{const t=Object.values((0,o.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot);return e=>{const t=(0,c.default)(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let a;for(let i=0;i<t.length;i++){a=t[i];const o=t[i+1];s+=Math.floor((((null==o?void 0:o.start.slot)||e)-a.start.slot)/a.parameters.epochLength)}return{epochEraSummary:a,epochNo:s}}};t.createSlotEpochCalc=(0,d.default)(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,i.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values((0,o.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};t.createSlotTimeCalc=createSlotTimeCalc;const createSlotEpochInfoCalc=e=>{const r=(0,t.createSlotTimeCalc)(e);const s=createSlotEpochCalcImpl(e);return e=>{const{epochNo:t,epochEraSummary:a}=s(e);const o=a.start.slot+Math.floor((e-a.start.slot)/a.parameters.epochLength)*a.parameters.epochLength;const n=o+a.parameters.epochLength-1;return{epochNo:(0,i.EpochNo)(t),firstSlot:{date:r((0,i.Slot)(o)),slot:(0,i.Slot)(o)},lastSlot:{date:r((0,i.Slot)(n)),slot:(0,i.Slot)(n)}}}};t.createSlotEpochInfoCalc=createSlotEpochInfoCalc;const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let a=0;const o=t.length-1;const checkNextEraSummary=()=>a<o&&s>=t[a+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())a++};findNextEraSummary();while(r!==e){s+=t[a].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[a];return{eraSummary:n,firstSlot:(0,i.Slot)(s),lastSlot:(0,i.Slot)(s+n.parameters.epochLength-1)}};t.epochSlotsCalc=(0,d.default)(epochSlotsCalcImplementation);t.epochSlotsCalcFactory=(0,d.default)(e=>(0,d.default)(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.subtractValueQuantities=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js");const subtractValueQuantities=e=>({assets:a.util.subtractTokenMaps(e.map(({assets:e})=>e)),coins:s.BigIntMath.subtract(e.map(({coins:e})=>e))});t.subtractValueQuantities=subtractValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeSpan=t.Days=t.Hours=t.Minutes=t.Seconds=t.Milliseconds=void 0;const Milliseconds=e=>e;t.Milliseconds=Milliseconds;const Seconds=e=>e;t.Seconds=Seconds;const Minutes=e=>e;t.Minutes=Minutes;const Hours=e=>e;t.Hours=Hours;const Days=e=>e;t.Days=Days;t.Hours.toDays=e=>e/24;t.Days.toHours=e=>24*e;t.Minutes.toHours=e=>e/60;t.Hours.toMinutes=e=>60*e;t.Seconds.toMinutes=e=>e/60;t.Minutes.toSeconds=e=>60*e;t.Seconds.toMilliseconds=e=>1e3*e;t.Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(t.Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(t.Hours.toMinutes(e))))}getTotalDays(){return t.Hours.toDays(this.getTotalHours())}getTotalHours(){return t.Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return t.Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return t.Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return(0,t.Days)(Math.floor(this.getTotalDays()))}getHours(){return(0,t.Hours)(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return(0,t.Minutes)(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return(0,t.Seconds)(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return(0,t.Milliseconds)(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=(0,t.Milliseconds)(0);this.elapsed=e}}t.TimeSpan=TimeSpan},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.tokenTransferInspector=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const l=s(r("../../node_modules/lodash/uniq.js"));const coalesceByAddress=e=>{const t=e.reduce((e,t)=>{var r;if(!e.has(t.address))e.set(t.address,[]);null===(r=e.get(t.address))||void 0===r?void 0:r.push(t);return e},new Map);const r=new Map;for(const[s,a]of t)r.set(s,(0,o.coalesceValueQuantities)(a.map(e=>e.value)));return r};const initializeAddressMap=e=>new Map(e.map(e=>[e,{assets:new Map,coins:0n}]));const updateFromAddressMap=(e,t,r)=>{var s;if(r.coins<0n)e.get(t).coins=r.coins;var a;for(const[i,o]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(o<0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(i,o)}};const updateToAddressMap=(e,t,r)=>{var s;if(r.coins>0n)e.get(t).coins=r.coins;var a;for(const[i,o]of null!==(a=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==a?a:[])if(o>0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(i,o)}};const computeNetDifferences=(e,t,r,s)=>{for(const[a,i]of e.entries()){var o;const n=null!==(o=t.get(a))&&void 0!==o?o:{assets:new Map,coins:0n};const c=(0,d.subtractValueQuantities)([n,i]);updateFromAddressMap(r,a,c);updateToAddressMap(s,a,c)}for(const[l,u]of t.entries())if(!e.has(l))updateToAddressMap(s,l,u)};const removeZeroBalanceEntries=e=>{for(const[t,r]of e.entries()){var s;if(0n===r.coins&&(null===(s=r.assets)||void 0===s?void 0:s.size)===0)e.delete(t)}};const intoTokenTransferValue=async({logger:e,assetProvider:t,timeout:r,addressMap:s})=>{const a=new Map;for(const[i,o]of s.entries()){const n=o.coins;const d=(0,l.default)(o.assets&&o.assets.size>0?[...o.assets.keys()]:[]);const u=new Map;if(d.length>0){const f=await (0,c.tryGetAssetInfos)({assetIds:d,assetProvider:t,logger:e,timeout:r});for(const h of f){var m;var p;const v=null!==(p=null===(m=o.assets)||void 0===m?void 0:m.get(h.assetId))&&void 0!==p?p:0n;u.set(h.assetId,{amount:v,assetInfo:h})}}a.set(i,{assets:u,coins:n})}return a};const tokenTransferInspector=({inputResolver:e,fromAddressAssetProvider:t,toAddressAssetProvider:r,timeout:s,logger:o})=>async d=>{let c;try{const u=await (0,n.promiseTimeout)((0,a.resolveInputs)(d.body.inputs,e),s);c=u.resolvedInputs}catch(f){if(f instanceof i.TimeoutError)o.error("Error: Inputs resolution timed out");c=[]}const h=coalesceByAddress(c);const m=coalesceByAddress(d.body.outputs);const p=(0,l.default)([...h.keys(),...m.keys()]);const v=initializeAddressMap(p);const y=initializeAddressMap(p);computeNetDifferences(h,m,v,y);removeZeroBalanceEntries(v);removeZeroBalanceEntries(y);return{fromAddress:await intoTokenTransferValue({addressMap:v,assetProvider:t,logger:o,timeout:s}),toAddress:await intoTokenTransferValue({addressMap:y,assetProvider:r,logger:o,timeout:s})}};t.tokenTransferInspector=tokenTransferInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.transactionSummaryInspector=t.getCollateral=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const getCollateral=async(e,t,r)=>{if(!e.body.collaterals||0===e.body.collaterals.length)return 0n;const s=(await (0,a.resolveInputs)(e.body.collaterals,t)).resolvedInputs.filter(e=>r.includes(e.address));const o=i.BigIntMath.sum(s.map(({value:e})=>e.coins));if(e.body.collateralReturn){if(!r.includes(e.body.collateralReturn.address))return o;var n;return null!==(n=i.BigIntMath.max([o-e.body.collateralReturn.value.coins,0n]))&&void 0!==n?n:0n}return o};t.getCollateral=getCollateral;const totalInputsValue=e=>{const t=e.resolvedInputs.map(e=>e.value);return(0,d.coalesceValueQuantities)(t)};const totalOutputsValue=e=>(0,d.coalesceValueQuantities)(e.map(e=>e.value));const mintInspectionToTokenMap=e=>new Map(e.map(e=>[s.AssetId.fromParts(e.policyId,e.assetName),e.quantity]));const getImplicitAssets=async e=>{const t=mintInspectionToTokenMap(await (0,a.assetsMintedInspector)(e));const r=mintInspectionToTokenMap(await (0,a.assetsBurnedInspector)(e));return(0,n.coalesceTokenMaps)([t,r])};const getUnaccountedFunds=async(e,t,r,s,a=new Map)=>{const i=totalInputsValue(t);const o=totalOutputsValue(e.body.outputs);i.assets=(0,n.coalesceTokenMaps)([i.assets,a]);i.coins+=r;o.coins+=s;return(0,u.subtractValueQuantities)([o,i])};const intoAssetInfoWithAmount=async({assetProvider:e,logger:t,timeout:r,tokenMap:s})=>{if(!s)return new Map;const a=s&&s.size>0?[...s.keys()]:[];const i=new Map;if(a.length>0){const o=await (0,f.tryGetAssetInfos)({assetIds:a,assetProvider:e,logger:t,timeout:r});for(const n of o){var d;const c=null!==(d=null==s?void 0:s.get(n.assetId))&&void 0!==d?d:0n;i.set(n.assetId,{amount:c,assetInfo:n})}}return i};const transactionSummaryInspector=({inputResolver:e,addresses:r,rewardAccounts:s,protocolParameters:i,assetProvider:d,dRepKeyHash:u,timeout:f,logger:h})=>async m=>{let p;try{p=await (0,l.promiseTimeout)((0,a.resolveInputs)(m.body.inputs,e),f)}catch(v){if(v instanceof o.TimeoutError)h.error("Error: Inputs resolution timed out");p={resolvedInputs:[],unresolvedInputs:m.body.inputs}}const y=m.body.fee;const _=(0,c.computeImplicitCoin)(i,{certificates:m.body.certificates,withdrawals:m.body.withdrawals},s||[],u);const w=await (0,t.getCollateral)(m,e,r);const g=_.withdrawals||0n;const b=await (0,a.totalAddressOutputsValueInspector)(r)(m);const P=await (0,a.totalAddressInputsValueInspector)(r,e)(m);const S=g+(_.reclaimDeposit||0n)-(_.deposit||0n);const C=await getImplicitAssets(m);const k={assets:(0,n.subtractTokenMaps)([b.assets,P.assets]),coins:b.coins-(P.coins+g)};return{assets:await intoAssetInfoWithAmount({assetProvider:d,logger:h,timeout:f,tokenMap:k.assets}),coins:k.coins,collateral:w,deposit:_.deposit||0n,fee:y,returnedDeposit:_.reclaimDeposit||0n,unresolved:{inputs:p.unresolvedInputs,value:await getUnaccountedFunds(m,p,S,y,C)}}};t.transactionSummaryInspector=transactionSummaryInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryGetAssetInfos=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const tryGetAssetInfos=async({assetIds:e,assetProvider:t,logger:r,timeout:i})=>{try{return await (0,a.promiseTimeout)(t.getAssets({assetIds:e,extraData:{nftMetadata:true,tokenMetadata:true}}),i)}catch(o){r.error("Error: Failed to retrieve assets",o);return e.map(e=>{const t=s.AssetId.getPolicyId(e);const r=s.AssetId.getAssetName(e);return{assetId:e,fingerprint:s.AssetFingerprint.fromParts(t,r),name:r,policyId:t,quantity:0n,supply:0n}})}};t.tryGetAssetInfos=tryGetAssetInfos},"../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createTxInspector=t.metadataInspector=t.assetsBurnedInspector=t.assetsMintedInspector=t.mintInspector=t.withdrawalInspector=t.poolRetirementInspector=t.poolRegistrationInspector=t.stakeKeyRegistrationInspector=t.stakeKeyDeregistrationInspector=t.delegationInspector=t.valueReceivedInspector=t.valueSentInspector=t.sentInspector=t.signedCertificatesInspector=t.getCertificatesByType=t.totalAddressOutputsValueInspector=t.totalAddressInputsValueInspector=t.resolveInputs=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const resolveInputs=async(e,t)=>{const r=[];const s=[];for(const a of e){const i=await t.resolveInput(a);if(i)r.push({address:i.address,index:a.index,txId:a.txId,value:i.value});else s.push(a)}return{resolvedInputs:r,unresolvedInputs:s}};t.resolveInputs=resolveInputs;const totalAddressInputsValueInspector=(e,r)=>async s=>{const{resolvedInputs:a}=await (0,t.resolveInputs)(s.body.inputs,r);const n=a.filter(t=>(0,i.isAddressWithin)(e)(t));const d=n.map(e=>e.value);return(0,o.coalesceValueQuantities)(d)};t.totalAddressInputsValueInspector=totalAddressInputsValueInspector;const totalAddressOutputsValueInspector=e=>async t=>{const r=t.body.outputs.filter(t=>(0,i.isAddressWithin)(e)(t));return(0,o.coalesceValueQuantities)(r.map(e=>e.value))};t.totalAddressOutputsValueInspector=totalAddressOutputsValueInspector;const getCertificatesByType=(e,t,r)=>{var a;if(!e.body.certificates||0===e.body.certificates.length)return[];const o=r?null===(a=e.body.certificates)||void 0===a?void 0:a.filter(e=>(0,s.isCertType)(e,r)):e.body.certificates;return o.filter(e=>{if((0,s.isCertType)(e,s.StakeCredentialCertificateTypes)){return t.some(t=>i.RewardAccount.toHash(t)===e.stakeCredential.hash)}if((0,s.isCertType)(e,[s.CertificateType.PoolRegistration]))return t.includes(e.poolParameters.rewardAccount);return false})};t.getCertificatesByType=getCertificatesByType;const signedCertificatesInspector=(e,r)=>async s=>(0,t.getCertificatesByType)(s,e,r);t.signedCertificatesInspector=signedCertificatesInspector;const sentInspector=({addresses:e,rewardAccounts:r,inputResolver:s})=>{return async a=>{const o=(null==r?void 0:r.length)?await (0,t.signedCertificatesInspector)(r)(a):[];let n=[];if(e){const{resolvedInputs:d}=await (0,t.resolveInputs)(a.body.inputs,s);const c=d.filter(t=>(0,i.isAddressWithin)(e)(t));n=c.map(e=>({address:e.address,index:e.index,txId:e.txId}))}return{certificates:o,inputs:n}}};t.sentInspector=sentInspector;const valueSentInspector=(e,r)=>async s=>{let a=new Map;if(0===(await (0,t.sentInspector)({addresses:e,inputResolver:r})(s)).inputs.length)return{coins:0n};const i=await (0,t.totalAddressOutputsValueInspector)(e)(s);const o=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([o,i]);if(n.assets)a=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:a.size>0?a:void 0,coins:n.coins<0n?0n:n.coins}};t.valueSentInspector=valueSentInspector;const valueReceivedInspector=(e,r)=>async s=>{let a=new Map;const i=await (0,t.totalAddressOutputsValueInspector)(e)(s);const o=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([i,o]);if(n.assets)a=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:a.size>0?a:void 0,coins:n.coins<0n?0n:n.coins}};t.valueReceivedInspector=valueReceivedInspector;var l;const certificateInspector=e=>{return async t=>{var r;return null!==(l=null===(r=t.body.certificates)||void 0===r?void 0:r.filter(t=>t.__typename===e))&&void 0!==l?l:[]}};t.delegationInspector=certificateInspector(s.CertificateType.StakeDelegation);t.stakeKeyDeregistrationInspector=certificateInspector(s.CertificateType.StakeDeregistration);t.stakeKeyRegistrationInspector=certificateInspector(s.CertificateType.StakeRegistration);t.poolRegistrationInspector=certificateInspector(s.CertificateType.PoolRegistration);t.poolRetirementInspector=certificateInspector(s.CertificateType.PoolRetirement);const withdrawalInspector=async e=>{var t;return(null===(t=e.body.withdrawals)||void 0===t?void 0:t.length)?a.BigIntMath.sum(e.body.withdrawals.map(({quantity:e})=>e)):0n};t.withdrawalInspector=withdrawalInspector;const mintInspector=e=>{return async t=>{var r,a;const i=[];const o=new Map;if(!t.body.mint)return i;const d=[...(null===(r=t.auxiliaryData)||void 0===r?void 0:r.scripts)||[],...(null===(a=t.witness)||void 0===a?void 0:a.scripts)||[]];for(const c of d){switch(c.__type){case s.ScriptType.Native:{const l=(0,n.nativeScriptPolicyId)(c);if(o.has(l))continue;o.set(l,c);break}case s.ScriptType.Plutus:default:}}for(const[u,f]of t.body.mint.entries()){const[h,m]=[s.AssetId.getPolicyId(u),s.AssetId.getAssetName(u)];const p={assetName:m,fingerprint:s.AssetFingerprint.fromParts(h,m),policyId:h,quantity:f,script:o.get(h)};if(e(p.quantity))i.push(p)}return i}};t.mintInspector=mintInspector;t.assetsMintedInspector=(0,t.mintInspector)(e=>e>0);t.assetsBurnedInspector=(0,t.mintInspector)(e=>e<0);var u;const metadataInspector=async e=>{var t;return null!==(u=null===(t=e.auxiliaryData)||void 0===t?void 0:t.blob)&&void 0!==u?u:new Map};t.metadataInspector=metadataInspector;const createTxInspector=e=>async t=>{const r=await Promise.all(Object.entries(e).map(async([e,r])=>{const s=await r(t);return{key:e,result:s}}));return r.reduce((e,{key:t,result:r})=>{e[t]=r;return e},{})};t.createTxInspector=createTxInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createUtxoId=void 0;const createUtxoId=(e,t)=>`${e}:${t}`;t.createUtxoId=createUtxoId},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js":(e,t,r)=>{"use strict";r.d(t,{ImageMediaType:()=>ImageMediaType,MediaType:()=>MediaType,Uri:()=>Uri});var s=r("../../node_modules/@biglup/is-cid/dist/esm/index.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return s.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new a.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new a.InvalidStringError('Expected media type to be "image/*"')};const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new a.InvalidStringError('Expected media type to be "*/*"')}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js":(e,t,r)=>{"use strict";r.d(t,{AssetNameLabel:()=>AssetNameLabel,AssetNameLabelNum:()=>l});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");let i=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)i=new Int32Array(i);const crc8=(e,t=0)=>{let r=Math.trunc(t);for(const s of e)r=255&i[(r^s)&255];return r};const o=crc8;var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=8;const c="0";const AssetNameLabel=e=>e;const l={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new a.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>o(Uint8Array.from(n.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const t=e[0];const r=e[7];const s=e.slice(1,5);const a=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(t,r)||isInvalidChecksum(s,a)){return null}return AssetNameLabel(Number.parseInt(s,16))};AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const a=assetNameLabelHexToNum(t);if(null===a){return null}return{content:(0,s.AssetName)(r),label:a}};AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,s.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AssetNameLabel:()=>c.AssetNameLabel,AssetNameLabelNum:()=>c.AssetNameLabelNum,ImageMediaType:()=>u.ImageMediaType,InvalidFileError:()=>InvalidFileError,MediaType:()=>u.MediaType,NftMetadata:()=>g,Uri:()=>u.Uri,util:()=>s});var s={};r.r(s);r.d(s,{coalesceTokenMaps:()=>a.coalesceTokenMaps,getAssetNameAsText:()=>d.getAssetNameAsText,isValidHandle:()=>isValidHandle,removeNegativesFromTokenMap:()=>removeNegativesFromTokenMap,subtractMaps:()=>subtractMaps,subtractTokenMaps:()=>subtractTokenMaps});var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};var i=r("../../node_modules/lodash/uniq.js");const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const o=new Map;for(const[n,d]of t.entries())if(0n!==d)o.set(n,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=i(l);for(const v of p){const y=e.get(v);const _=t.get(v);const w=y-_;if(0n!==w)c.set(v,w)}return c};const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(subtractMaps)};const o=new RegExp(/^[a-z0-9_.-]{1,15}$/);const n=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{n.lastIndex=0;return o.test(e)||n.test(e)||"0|0"===e};var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var f=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends f.CustomError{}var h=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");const asString=e=>"string"==typeof e?e:void 0;var m=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var p=r("../../node_modules/lodash/difference.js");var v=r("../../node_modules/buffer/index.js")["Buffer"];const isString=e=>"string"==typeof e;const y=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(asString);if(t.some(e=>void 0===e)){return}return t.join("")}return asString(e)};const mapOtherProperties=(e,t)=>{const r=p([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,h.asMetadatumMap)(e);if(!s)throw new InvalidFileError;const a=asString(s.get("name"));const i=asString(s.get("mediaType"));if(!i){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const o=metadatumToString(s.get("src"));if(!o){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,u.MediaType)(i),name:a,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,u.Uri)(o)}};const getPolicyMetadata=(e,t)=>(0,h.asMetadatumMap)(e.get(t)||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&v.from(r).toString("hex")===t)return s})());const getAssetMetadata=(e,t)=>(0,h.asMetadatumMap)(e.get(t)||e.get(v.from(t,"hex").toString("utf8"))||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&v.from(r).toString("hex")===t)return s})());const getName=(e,t,r,s,a=false)=>{const i=asString(e.get("name"));if(i)return i;if("1.0"===t){try{return l.AssetName.toUTF8(r.name,a)}catch(o){s.warn(o)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=asString(e);if(t&&y.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,s=false)=>{const a=null==t?void 0:t.get(721n);if(!a)return null;const i=(0,h.asMetadatumMap)(a);if(!i)return null;const o=getPolicyMetadata(i,e.policyId);if(!o)return null;const n=parseVersion(o.get("version"));if(!n)return null;const d=getAssetMetadata(o,e.name);if(!d)return null;const c=getName(d,n,e,r,true);const f=metadatumToString(d.get("image"));const p=l.AssetId.fromParts(e.policyId,e.name);if(s&&!c||!f){r.warn(missingFieldLogMessage(c?"image":"name",p,true));return null}const v=asString(d.get("mediaType"));const y=(0,h.asMetadatumArray)(d.get("files"));try{return{description:metadatumToString(d.get("description")),files:null==y?void 0:y.map(e=>mapFile(e,p,r)).filter(m.isNotNil),image:(0,u.Uri)(f),mediaType:v?(0,u.ImageMediaType)(v):void 0,name:c||"",otherProperties:mapOtherProperties(d,["name","image","mediaType","description","files"]),version:n}}catch(_){r.warn("Invalid CIP-25 metadata",d,_);return null}};var _=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,w.isPlutusBigInt)(e)||(0,w.isPlutusBoundedBytes)(e))return e;if((0,w.isPlutusMap)(e)){const r=fromPlutusData_mapOtherProperties((0,w.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,w.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const fromPlutusData_mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const fromPlutusData_mapFile=(e,t)=>{if(!(0,w.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:s,name:a,...i}=(0,w.tryConvertPlutusMapToUtf8Record)(e,t);const o=tryCoerce(r,u.MediaType,t);const n=tryCoerce(s,u.Uri,t);if("string"!=typeof n||"string"!=typeof o){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:o,name:asString(a),otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(i,t)),src:n}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,w.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>fromPlutusData_mapFile(e,t)).filter(m.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const a=(0,w.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!a)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return a}});const fromPlutusData=(e,t,r=false)=>{const s=(0,_.contextLogger)(t,"NftMetadata.fromPlutusData");const a=getConditionalValidators(r,s);if(!a.isValidDatumShape(e)){return null}const[i,o]=e.fields.items;if(!(0,w.isPlutusMap)(i)||!(0,w.isPlutusBigInt)(o)){s.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const n=(0,w.tryConvertPlutusMapToUtf8Record)(i,s);const{name:d,image:c,mediaType:l,description:f,files:h,...m}=n;if(!a.isNameValid(d)){return null}if("string"!=typeof c){s.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const p=tryCoerce(c,u.Uri,s);if(!p){return null}return{description:asString(f),files:mapFiles(h,s),image:p,mediaType:tryCoerce(l,u.ImageMediaType,s),name:d||"",otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(m,s)),version:o.toString()}};const g={fromMetadatum:fromMetadatum,fromPlutusData:fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";r.d(t,{coalesceTokenMaps:()=>coalesceTokenMaps});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[a,i]of r.entries()){const o=t.get(a)||0n;t.set(a,o+i)}}if(0===t.size){return}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";r.d(t,{getAssetNameAsText:()=>getAssetNameAsText});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const getAssetNameAsText=e=>{var t;const r=s.AssetId.getAssetName(e);const o=null===(t=a.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return i.from(o||r,"hex").toString("utf8")}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js":(e,t,r)=>{"use strict";r.d(t,{Address:()=>Address,AddressType:()=>p,CredentialType:()=>v,isAddress:()=>isAddress});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h;const m=1023;var p;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(p||(p={}));var v;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(v||(v={}));class Address{static fromBytes(e){const t=f.from(e,"hex");const r=t[0]>>4;let s;switch(r){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:s=a.BaseAddress.unpackParts(r,t);break;case p.PointerKey:case p.PointerScript:s=l.PointerAddress.unpackParts(r,t);break;case p.EnterpriseKey:case p.EnterpriseScript:s=o.EnterpriseAddress.unpackParts(r,t);break;case p.RewardKey:case p.RewardScript:s=u.RewardAddress.unpackParts(r,t);break;case p.Byron:s=i.ByronAddress.unpackParts(r,t);break;default:throw new n.InvalidArgumentError("data","Invalid address raw data")}return s}toBytes(){let e;switch(__classPrivateFieldGet(this,h,"f").type){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:e=a.BaseAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.PointerKey:case p.PointerScript:e=l.PointerAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.EnterpriseKey:case p.EnterpriseScript:e=o.EnterpriseAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.RewardKey:case p.RewardScript:e=u.RewardAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.Byron:e=i.ByronAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;default:throw new Error("Invalid address")}return d.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(d.HexBlob.fromBytes(s.base58.decode(e)))}toBase58(){if(__classPrivateFieldGet(this,h,"f").type!==p.Byron)throw new Error("Only Byron addresses will be encoded in base58");return s.base58.encode(f.from(this.toBytes(),"hex"))}toBech32(){const e=s.bech32.toWords(f.from(this.toBytes(),"hex"));if(__classPrivateFieldGet(this,h,"f").type===p.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(__classPrivateFieldGet(this,h,"f").type,__classPrivateFieldGet(this,h,"f").networkId);const r=s.bech32.encode(t,e,m);return __classPrivateFieldGet(this,h,"f").type===p.RewardKey||(__classPrivateFieldGet(this,h,"f").type,p.RewardScript),r}static fromBech32(e){const{words:t}=s.bech32.decode(e,m);return Address.fromBytes(d.HexBlob.fromBytes(s.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,d.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(__classPrivateFieldGet(t,h,"f").type!==p.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return i.ByronAddress.fromAddress(this)}asReward(){return u.RewardAddress.fromAddress(this)}asPointer(){return l.PointerAddress.fromAddress(this)}asEnterprise(){return o.EnterpriseAddress.fromAddress(this)}asBase(){return a.BaseAddress.fromAddress(this)}getType(){return __classPrivateFieldGet(this,h,"f").type}getNetworkId(){if(__classPrivateFieldGet(this,h,"f").type===p.Byron){var e;if((null===(e=__classPrivateFieldGet(this,h,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return c.NetworkId.Mainnet;return c.NetworkId.Testnet}return __classPrivateFieldGet(this,h,"f").networkId}getProps(){return __classPrivateFieldGet(this,h,"f")}static getBech32Prefix(e,t){let r="";switch(e){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:case p.PointerKey:case p.PointerScript:case p.EnterpriseKey:case p.EnterpriseScript:r="addr";break;case p.RewardKey:case p.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){h.set(this,void 0);__classPrivateFieldSet(this,h,e,"f")}}h=new WeakMap;const isAddress=e=>Address.isValid(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js":(e,t,r)=>{"use strict";r.d(t,{BaseAddress:()=>BaseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;class BaseAddress{static fromCredentials(e,t,r){let a=s.AddressType.BasePaymentKeyStakeKey;if(t.type===s.CredentialType.ScriptHash)a|=1;if(r.type===s.CredentialType.ScriptHash)a|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:a})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakeCredential(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({delegationPart:__classPrivateFieldGet(this,l,"f"),networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex"),o.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new i.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));const d=(0,a.Hash28ByteBase16)(o.from(t.slice(29,57)).toString("hex"));const c=e===s.AddressType.BasePaymentKeyStakeScript||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;const l=e===s.AddressType.BasePaymentScriptStakeKey||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;return new s.Address({delegationPart:{hash:d,type:c},networkId:r,paymentPart:{hash:n,type:l},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.delegationPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js":(e,t,r)=>{"use strict";r.d(t,{ByronAddress:()=>ByronAddress,ByronAddressType:()=>p});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m;var p;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(p||(p={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:s.AddressType.Byron})}getAttributes(){return __classPrivateFieldGet(this,m,"f").attrs}getRoot(){return __classPrivateFieldGet(this,m,"f").root}getByronAddressType(){return __classPrivateFieldGet(this,m,"f").type}toAddress(){return new s.Address({byronAddressContent:__classPrivateFieldGet(this,m,"f"),type:__classPrivateFieldGet(this,h,"f")})}static fromAddress(e){return e.getProps().type===s.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:s}=e.byronAddressContent;let o=0;if(r.derivationPath)++o;if(r.magic)++o;const n=new a.CborWriter;n.writeStartArray(3);n.writeByteString(f.from(t,"hex"));n.writeStartMap(o);if(r.derivationPath){const d=new a.CborWriter().writeByteString(f.from(r.derivationPath,"hex")).encode();n.writeInt(1);n.writeByteString(d)}if(r.magic){const c=new a.CborWriter().writeInt(r.magic).encode();n.writeInt(2);n.writeByteString(c)}n.writeInt(s);const l=f.from(n.encodeAsHex(),"hex");n.reset();n.writeStartArray(2);n.writeTag(i.CborTag.EncodedCborDataItem);n.writeByteString(l);n.writeInt((0,u.crc32)(l));return n.encode()}static unpackParts(e,t){let r=new o.CborReader(c.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const a=r.readByteString();if(Number(r.readInt())!==(0,u.crc32)(a))throw new l.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new o.CborReader(c.HexBlob.fromBytes(a));r.readStartArray();const i=(0,d.Hash28ByteBase16)(f.from(r.readByteString()).toString("hex"));r.readStartMap();let h;let m;while(r.peekState()!==n.CborReaderState.EndMap){const p=r.readInt();switch(p){case 1n:{const v=r.readByteString();m=c.HexBlob.fromBytes(new o.CborReader(c.HexBlob.fromBytes(v)).readByteString());break}case 2n:{const y=r.readByteString();h=Number(new o.CborReader(c.HexBlob.fromBytes(y)).readInt());break}}}r.readEndMap();const _=Number(r.readInt());return new s.Address({byronAddressContent:{attrs:{derivationPath:m,magic:h},root:i,type:_},type:e})}constructor(e){h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,m,e.byronAddressContent,"f");__classPrivateFieldSet(this,h,e.type,"f")}}h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js":(e,t,r)=>{"use strict";r.d(t,{DRepID:()=>DRepID});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=1023;const c=28;const l=29;const DRepID=e=>{try{return(0,o.typedBech32)(e,["drep"],47)}catch{return(0,o.typedBech32)(e,["drep","drep_script"],45)}};DRepID.isValid=e=>{try{DRepID(e);return true}catch{return false}};DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===a.CredentialType.ScriptHash)t="drep_script";const r=s.bech32.toWords(n.from(e.hash,"hex"));return s.bech32.encode(t,r,d)};DRepID.cip129FromCredential=e=>{let t="22";if(e.type===a.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const i=s.bech32.toWords(n.from(r,"hex"));return s.bech32.encode("drep",i,d)};DRepID.toCredential=e=>{const{words:t}=s.bech32.decode(e,d);const r=s.bech32.fromWords(t);if(r.length!==c&&r.length!==l){throw new Error("Invalid DRepID payload")}if(r.length===c){const o=e.includes("drep_script");return{hash:(0,i.Hash28ByteBase16)(n.from(r).toString("hex")),type:o?a.CredentialType.ScriptHash:a.CredentialType.KeyHash}}const u=r[0];const f=r.slice(1);const h=(32&u)===32;const m=(3&u)===3;if(!h){throw new Error("Invalid governance credential type")}return{hash:(0,i.Hash28ByteBase16)(n.from(f).toString("hex")),type:m?a.CredentialType.ScriptHash:a.CredentialType.KeyHash}};DRepID.toCip105DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip105FromCredential(t)};DRepID.toCip129DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip129FromCredential(t)};DRepID.toAddress=e=>{const t=DRepID.toCredential(e);return new a.Address({paymentPart:t,type:t.type===a.CredentialType.KeyHash?a.AddressType.EnterpriseKey:a.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js":(e,t,r)=>{"use strict";r.d(t,{EnterpriseAddress:()=>EnterpriseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===s.CredentialType.ScriptHash?s.AddressType.EnterpriseScript:s.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new i.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.EnterpriseScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";r.d(t,{PaymentAddress:()=>PaymentAddress,addressNetworkId:()=>addressNetworkId,inputsWithAddresses:()=>inputsWithAddresses,isAddressWithin:()=>isAddressWithin,isRewardAccount:()=>isRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const isRewardAccount=e=>{try{(0,i.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};const PaymentAddress=e=>{if(s.Address.isValid(e)){if(isRewardAccount(e)||a.DRepID.isValid(e)){throw new o.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,i.assertIsHexString)(e)}catch{throw new o.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const t=s.Address.fromBytes(i.HexBlob.fromBytes(n.from(e,"hex")));return t.getType()===s.AddressType.Byron?t.toBase58():t.toBech32()};const isAddressWithin=e=>({address:t})=>e.includes(t);const inputsWithAddresses=(e,t)=>e.body.inputs.filter(isAddressWithin(t));const addressNetworkId=e=>{const t=s.Address.fromString(e);return t.getNetworkId()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js":(e,t,r)=>{"use strict";r.d(t,{CertIndex:()=>CertIndex,PointerAddress:()=>PointerAddress,TxIndex:()=>TxIndex});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new i.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return o.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const a=e[s];r<<=7n;r|=BigInt(127&a);t=(128&a)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;const CertIndex=e=>e;class PointerAddress{static fromCredentials(e,t,r){let a=s.AddressType.PointerKey;if(t.type===s.CredentialType.ScriptHash)a&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:a})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakePointer(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),pointer:__classPrivateFieldGet(this,l,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.PointerKey:case s.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:s}=e.pointer;return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex"),o.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(s)])])}static unpackParts(e,t){if(t.length<=29)throw new i.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));let d=29;const c=o.from(t);const{value:l,bytesRead:u}=variableLengthDecode(c.subarray(d));d+=u;const{value:f,bytesRead:h}=variableLengthDecode(c.subarray(d));d+=h;const{value:m}=variableLengthDecode(c.subarray(d));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.PointerScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},pointer:{certIndex:CertIndex(Number(m)),slot:l,txIndex:TxIndex(Number(f))},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.pointer,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";r.d(t,{RewardAccount:()=>RewardAccount,createRewardAccount:()=>createRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,i.typedBech32)(e,["stake","stake_test"],47);RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;RewardAccount.fromCredential=(e,t)=>RewardAccount(o.RewardAddress.fromCredentials(t,{hash:e.hash,type:e.type}).toAddress().toBech32());RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,t)=>RewardAccount(o.RewardAddress.fromCredentials(t,{hash:(0,a.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32())},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js":(e,t,r)=>{"use strict";r.d(t,{RewardAddress:()=>RewardAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class RewardAddress{static fromCredentials(e,t){let r=s.AddressType.RewardKey;if(t.type===s.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.RewardKey:case s.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new i.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,a.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.RewardScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js":(e,t,r)=>{"use strict";r.d(t,{ChainIds:()=>i,NetworkId:()=>s,NetworkMagics:()=>a});var s;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(s||(s={}));var a;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(a||(a={}));const i={Mainnet:{networkId:s.Mainnet,networkMagic:a.Mainnet},Preprod:{networkId:s.Testnet,networkMagic:a.Preprod},Preview:{networkId:s.Testnet,networkMagic:a.Preview},Sanchonet:{networkId:s.Testnet,networkMagic:a.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{Address:()=>c.Address,AddressType:()=>c.AddressType,AssetFingerprint:()=>b.AssetFingerprint,AssetId:()=>b.AssetId,AssetName:()=>b.AssetName,BaseAddress:()=>F.BaseAddress,BlockId:()=>g.BlockId,BlockNo:()=>g.BlockNo,BlockSize:()=>g.BlockSize,ByronAddress:()=>M.ByronAddress,ByronAddressType:()=>M.ByronAddressType,CertIndex:()=>G.CertIndex,CertificateType:()=>w.CertificateType,ChainIds:()=>a.ChainIds,Cip1854ExtendedAccountPublicKey:()=>Cip1854ExtendedAccountPublicKey,CredentialType:()=>c.CredentialType,DRepID:()=>R.DRepID,DelegationMetadataLabel:()=>y.DelegationMetadataLabel,EnterpriseAddress:()=>D.EnterpriseAddress,EpochNo:()=>g.EpochNo,ExtendedPoolStatus:()=>p,FractionUtils:()=>j.FractionUtils,GenesisDelegate:()=>g.GenesisDelegate,GovernanceActionType:()=>x.GovernanceActionType,InputSource:()=>_.InputSource,MirCertificateKind:()=>w.MirCertificateKind,MirCertificatePot:()=>w.MirCertificatePot,NativeScriptKind:()=>S.NativeScriptKind,NetworkId:()=>a.NetworkId,NetworkMagics:()=>a.NetworkMagics,PaymentAddress:()=>O.PaymentAddress,PlutusLanguageVersion:()=>S.PlutusLanguageVersion,PlutusListEncoding:()=>C,PlutusMapEncoding:()=>k,PointerAddress:()=>G.PointerAddress,PolicyId:()=>b.PolicyId,PoolId:()=>v.PoolId,PoolIdHex:()=>v.PoolIdHex,PoolMdVk:()=>PoolMdVk,PostConwayStakeRegistrationCertificateTypes:()=>w.PostConwayStakeRegistrationCertificateTypes,RedeemerPurpose:()=>_.RedeemerPurpose,RegAndDeregCertificateTypes:()=>w.RegAndDeregCertificateTypes,RewardAccount:()=>N.RewardAccount,RewardAddress:()=>H.RewardAddress,ScriptType:()=>S.ScriptType,Slot:()=>g.Slot,SlotLeader:()=>g.SlotLeader,StakeCredentialCertificateTypes:()=>w.StakeCredentialCertificateTypes,StakeCredentialStatus:()=>y.StakeCredentialStatus,StakeDelegationCertificateTypes:()=>w.StakeDelegationCertificateTypes,StakePoolEpochRewards:()=>h.StakePoolEpochRewards,StakePoolStatus:()=>h.StakePoolStatus,StakeRegistrationCertificateTypes:()=>w.StakeRegistrationCertificateTypes,TransactionId:()=>_.TransactionId,TxIndex:()=>G.TxIndex,Vote:()=>x.Vote,VoteDelegationCredentialCertificateTypes:()=>w.VoteDelegationCredentialCertificateTypes,VoterType:()=>x.VoterType,VrfVkBech32:()=>g.VrfVkBech32,VrfVkHex:()=>v.VrfVkHex,addressNetworkId:()=>O.addressNetworkId,cip17FromMetadatum:()=>y.cip17FromMetadatum,computeAuxiliaryDataHash:()=>P.computeAuxiliaryDataHash,createDelegationCert:()=>w.createDelegationCert,createRewardAccount:()=>N.createRewardAccount,createStakeDeregistrationCert:()=>w.createStakeDeregistrationCert,createStakeRegistrationCert:()=>w.createStakeRegistrationCert,includesAnyCertificate:()=>w.includesAnyCertificate,inputsWithAddresses:()=>O.inputsWithAddresses,isAddress:()=>c.isAddress,isAddressWithin:()=>O.isAddressWithin,isCertType:()=>w.isCertType,isDRepAlwaysAbstain:()=>x.isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>x.isDRepAlwaysNoConfidence,isDRepCredential:()=>x.isDRepCredential,isDrepInfo:()=>x.isDrepInfo,isNativeScript:()=>S.isNativeScript,isPlutusScript:()=>S.isPlutusScript,isRewardAccount:()=>O.isRewardAccount,portfolioMetadataFromCip17:()=>y.portfolioMetadataFromCip17,stakeKeyCertificates:()=>w.stakeKeyCertificates,util:()=>s});var s={};r.r(s);r.d(s,{addressesShareAnyKey:()=>addressesShareAnyKey,computeImplicitCoin:()=>i.computeImplicitCoin,computeMinUtxoValue:()=>computeMinUtxoValue,estimateStakePoolAPY:()=>estimateStakePoolAPY,isAnyPlutusDataCollection:()=>u.isAnyPlutusDataCollection,isConstrPlutusData:()=>u.isConstrPlutusData,isPhase2ValidationErrTx:()=>d.isPhase2ValidationErrTx,isPlutusBigInt:()=>u.isPlutusBigInt,isPlutusBoundedBytes:()=>u.isPlutusBoundedBytes,isPlutusList:()=>u.isPlutusList,isPlutusMap:()=>u.isPlutusMap,isScriptAddress:()=>f.isScriptAddress,resolveInputValue:()=>resolveInputValue,tryConvertPlutusMapToUtf8Record:()=>u.tryConvertPlutusMapToUtf8Record});var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");const computeMinUtxoValue=e=>29n*e;var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");const n=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:s,pledge:a}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,o.Percent)(Number(s)/Number(t-a)/(r/n)*365)};const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?c.Address.fromString(e):e;if(!t){throw new l.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case c.AddressType.BasePaymentKeyStakeKey:case c.AddressType.BasePaymentKeyStakeScript:case c.AddressType.BasePaymentScriptStakeKey:case c.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case c.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case c.AddressType.EnterpriseKey:case c.AddressType.EnterpriseScript:{const s=t.asEnterprise();return{paymentId:{credential:s.getPaymentCredential()}}}case c.AddressType.PointerKey:case c.AddressType.PointerScript:{const a=t.asPointer();return{paymentId:{credential:a.getPaymentCredential()},stakeId:{pointer:a.getStakePointer()}}}case c.AddressType.RewardKey:case c.AddressType.RewardScript:{const i=t.asReward();return{stakeId:{credential:i.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)};var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const PoolMdVk=e=>(0,m.typedBech32)(e,"poolmd_vk",52);var p;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(p||(p={}));var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var C;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(C||(C={}));var k;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(k||(k={}));var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var T=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var E=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var A=r("../../node_modules/buffer/index.js")["Buffer"];const I=1023;const B="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,m.assertIsBech32WithPrefix)(e,[B])}catch{throw new l.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const t=T.bech32.toWords(A.from(e,"hex"));return Cip1854ExtendedAccountPublicKey(T.bech32.encode(B,t,I))};Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=T.bech32.decode(e,I);return(0,E.Bip32PublicKeyHex)(A.from(T.bech32.fromWords(t)).toString("hex"))};var F=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var M=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var O=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var G=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var N=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var H=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js")},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js":(e,t,r)=>{"use strict";r.d(t,{AssetFingerprint:()=>AssetFingerprint,AssetId:()=>AssetId,AssetName:()=>AssetName,PolicyId:()=>PolicyId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/blake2b-no-wasm/index.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/web-encoding/src/lib.mjs");var d=r("../../node_modules/buffer/index.js")["Buffer"];const AssetName=e=>{if(e.length>0){(0,i.assertIsHexString)(e);if(e.length>64){throw new o.InvalidStringError("too long")}}return e.toLowerCase()};const c=new n.TextDecoder("utf8",{fatal:true});AssetName.toUTF8=(e,t=false)=>{const r=d.from(e,"hex");try{if(t){return c.decode(r.filter(e=>e>31))}return c.decode(r)}catch(s){throw new o.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,s)}};const AssetId=e=>{const t=e.split(".").join("");(0,i.assertIsHexString)(t);if(t.length>120)throw new o.InvalidStringError("too long");if(t.length<56)throw new o.InvalidStringError("too short");return t};const PolicyId=e=>s.Hash28ByteBase16(e);AssetId.getPolicyId=e=>PolicyId(e.slice(0,56));AssetId.getAssetName=e=>AssetName(e.slice(56));AssetId.fromParts=(e,t)=>AssetId(e+t);const AssetFingerprint=e=>(0,i.typedBech32)(e,"asset",32);AssetFingerprint.fromParts=(e,t)=>{const r=d.from(e,"hex");const s=d.from(t,"hex");const o=(0,i.HexBlob)(a(20).update(new Uint8Array([...r,...s])).digest("hex"));return AssetFingerprint(i.HexBlob.toTypedBech32("asset",o))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{computeAuxiliaryDataHash:()=>computeAuxiliaryDataHash});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");const computeAuxiliaryDataHash=e=>e?(0,i.Hash32ByteBase16)(s(s.BYTES).update((0,o.hexToBytes)(a.AuxiliaryData.fromCore(e).toCbor())).digest("hex")):void 0},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js":(e,t,r)=>{"use strict";r.d(t,{BlockId:()=>BlockId,BlockNo:()=>BlockNo,BlockSize:()=>BlockSize,EpochNo:()=>EpochNo,GenesisDelegate:()=>GenesisDelegate,Slot:()=>Slot,SlotLeader:()=>SlotLeader,VrfVkBech32:()=>VrfVkBech32});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];const BlockSize=e=>e;const BlockNo=e=>e;const EpochNo=e=>e;const Slot=e=>e;const BlockId=e=>a.Hash32ByteBase16(e);const VrfVkBech32=e=>(0,i.typedBech32)(e,"vrf_vk",52);const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return a.Hash28ByteBase16(e)};const SlotLeader=e=>{try{return(0,n.PoolId)(e)}catch{try{return GenesisDelegate(e)}catch(t){throw new o.InvalidStringError("Expected either PoolId or GenesisDelegate",t)}}};VrfVkBech32.fromHex=e=>{const t=s.bech32.toWords(d.from(e,"hex"));return VrfVkBech32(s.bech32.encode("vrf_vk",t,1023))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{CertificateType:()=>o,MirCertificateKind:()=>d,MirCertificatePot:()=>n,PostConwayStakeRegistrationCertificateTypes:()=>c,RegAndDeregCertificateTypes:()=>f,StakeCredentialCertificateTypes:()=>h,StakeDelegationCertificateTypes:()=>u,StakeRegistrationCertificateTypes:()=>l,VoteDelegationCredentialCertificateTypes:()=>m,createDelegationCert:()=>createDelegationCert,createStakeDeregistrationCert:()=>createStakeDeregistrationCert,createStakeRegistrationCert:()=>createStakeRegistrationCert,includesAnyCertificate:()=>includesAnyCertificate,isCertType:()=>isCertType,stakeKeyCertificates:()=>stakeKeyCertificates});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var o;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(o||(o={}));var n;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(n||(n={}));var d;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(d||(d={}));const c=[o.Registration,o.VoteRegistrationDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];const l=[o.StakeRegistration,...c];const u=[o.StakeDelegation,o.StakeVoteDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];const f=[...l,o.Unregistration,o.StakeDeregistration];const h=[...f,...u,o.VoteDelegation];const m=[o.VoteDelegation,o.VoteRegistrationDelegation,o.StakeVoteDelegation,o.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);const createStakeRegistrationCert=e=>({__typename:o.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}});const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:o.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}}:{__typename:o.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}};const createDelegationCert=(e,t)=>({__typename:o.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:a.CredentialType.KeyHash}});const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>isCertType(e,f)?e:void 0).filter(i.isNotNil))||[]};const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";r.d(t,{DelegationMetadataLabel:()=>i,StakeCredentialStatus:()=>a,cip17FromMetadatum:()=>cip17FromMetadatum,portfolioMetadataFromCip17:()=>portfolioMetadataFromCip17});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var a;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(a||(a={}));const i=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionType:()=>s,Vote:()=>a,VoterType:()=>i,isDRepAlwaysAbstain:()=>isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>isDRepAlwaysNoConfidence,isDRepCredential:()=>isDRepCredential,isDrepInfo:()=>isDrepInfo});var s;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(s||(s={}));var a;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(a||(a={}));var i;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(i||(i={}));const isDrepInfo=e=>"id"in e&&"active"in e;const isDRepCredential=e=>"type"in e&&"hash"in e;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js":(e,t,r)=>{"use strict";r.d(t,{NativeScriptKind:()=>a,PlutusLanguageVersion:()=>i,ScriptType:()=>s,isNativeScript:()=>isNativeScript,isPlutusScript:()=>isPlutusScript});var s;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(s||(s={}));var a;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(a||(a={}));var i;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(i||(i={}));const isNativeScript=e=>e.__type===s.Native;const isPlutusScript=e=>e.__type===s.Plutus},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js":(e,t,r)=>{"use strict";r.d(t,{StakePoolEpochRewards:()=>StakePoolEpochRewards,StakePoolStatus:()=>s});var s;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(s||(s={}));class StakePoolEpochRewards{}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js":(e,t,r)=>{"use strict";r.d(t,{PoolId:()=>PoolId,PoolIdHex:()=>PoolIdHex,VrfVkHex:()=>VrfVkHex});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const o=1023;const PoolId=e=>(0,i.typedBech32)(e,"pool",45);PoolId.fromKeyHash=e=>i.HexBlob.toTypedBech32("pool",(0,i.HexBlob)(e));const PoolIdHex=e=>a.Hash28ByteBase16(e);const VrfVkHex=e=>(0,i.typedHex)(e,64);PoolId.toKeyHash=e=>{const{words:t}=s.bech32.decode(e,o);return a.Ed25519KeyHashHex(i.HexBlob.fromBytes(s.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{InputSource:()=>a,RedeemerPurpose:()=>i,TransactionId:()=>TransactionId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");const TransactionId=e=>s.Hash32ByteBase16(e);TransactionId.fromHexBlob=e=>s.Hash32ByteBase16.fromHexBlob(e);var a;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(a||(a={}));var i;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(i||(i={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js":(e,t,r)=>{"use strict";r.d(t,{FractionUtils:()=>a});var s=r("../../node_modules/fraction.js/fraction.js");const toFractionJs=e=>{if("number"==typeof e){return new s(e)}const{numerator:t,denominator:r}=e;return new s(t,r)};const a={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js":(e,t,r)=>{"use strict";r.d(t,{computeImplicitCoin:()=>computeImplicitCoin});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=s.RewardAccount.toNetworkId(t[0]);return t.includes(s.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let a=0n;let d=0n;const c=0===r.length;const l=new Set(r.map(e=>i.PoolId.fromKeyHash((0,n.Ed25519KeyHashHex)(s.RewardAccount.toHash(e)))));for(const u of t){switch(u.__typename){case o.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))a+=e.stakeKeyDeposit;break;case o.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))d+=e.stakeKeyDeposit;break;case o.CertificateType.PoolRegistration:if(c||r.some(e=>u.poolParameters.owners.includes(e)))a+=e.poolDeposit;break;case o.CertificateType.PoolRetirement:if(c||l.has(u.poolId))d+=e.poolDeposit;break}}return{deposit:a,reclaimDeposit:d}};const computeConwayDeposits=(e,t,r,s)=>{let i=0n;let d=0n;for(const c of e){switch(c.__typename){case o.CertificateType.Registration:case o.CertificateType.StakeRegistrationDelegation:case o.CertificateType.VoteRegistrationDelegation:case o.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))i+=c.deposit;break;case o.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(c.stakeCredential,t))d+=c.deposit;break;case o.CertificateType.RegisterDelegateRepresentative:case o.CertificateType.UnregisterDelegateRepresentative:if(!r||c.dRepCredential.type===a.CredentialType.KeyHash&&c.dRepCredential.hash===n.Hash28ByteBase16.fromEd25519KeyHashHex(r))c.__typename===o.CertificateType.RegisterDelegateRepresentative?i+=c.deposit:d+=c.deposit;break}}if(s)for(const l of s)i+=l.deposit;return{deposit:i,reclaimDeposit:d}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],a,i)=>{if(0===r.length&&(!i||0===i.length))return{deposit:0n,reclaimDeposit:0n};const o={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(o,r,s);const d=computeConwayDeposits(r,s,a,i);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>d.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:a=[]},i,o)=>{const{deposit:n,reclaimDeposit:c}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],i,o,s);const l=!!(null==i?void 0:i.length);const u=d.BigIntMath.sum(a.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(a,i):u;return{deposit:n,input:f+c,reclaimDeposit:c,withdrawals:f}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";r.d(t,{isScriptAddress:()=>isScriptAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");const isScriptAddress=e=>{const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const a=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==a?void 0:a.type)===s.CredentialType.ScriptHash}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";r.d(t,{isPhase2ValidationErrTx:()=>isPhase2ValidationErrTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";r.d(t,{isAnyPlutusDataCollection:()=>isAnyPlutusDataCollection,isConstrPlutusData:()=>isConstrPlutusData,isPlutusBigInt:()=>isPlutusBigInt,isPlutusBoundedBytes:()=>isPlutusBoundedBytes,isPlutusList:()=>isPlutusList,isPlutusMap:()=>isPlutusMap,tryConvertPlutusMapToUtf8Record:()=>tryConvertPlutusMapToUtf8Record});var s=r("../../node_modules/web-encoding/src/lib.mjs");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);const isAnyPlutusDataCollection=e=>"object"==typeof e&&!isPlutusBoundedBytes(e);const isPlutusList=e=>isAnyPlutusDataCollection(e)&&"items"in e;const isPlutusMap=e=>isAnyPlutusDataCollection(e)&&"data"in e;const isConstrPlutusData=e=>isAnyPlutusDataCollection(e)&&"fields"in e;const isPlutusBigInt=e=>"bigint"==typeof e;const a=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!isPlutusBoundedBytes(e))return e;try{return a.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,a]of e.data.entries()){const i=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof i){t.warn("Failed to decode plutus map key",s);continue}r[i]=tryConvertPlutusDataToUtf8String(a)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";r.d(t,{ChainSyncError:()=>ChainSyncError,ChainSyncErrorCode:()=>i,GeneralCardanoNodeError:()=>GeneralCardanoNodeError,GeneralCardanoNodeErrorCode:()=>a,StateQueryError:()=>StateQueryError,StateQueryErrorCode:()=>o,TxSubmissionError:()=>TxSubmissionError,TxSubmissionErrorCode:()=>n});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(a||(a={}));var i;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(i||(i={}));var o;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(o||(o={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n||(n={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}class GeneralCardanoNodeError extends CardanoNodeError{}class ChainSyncError extends CardanoNodeError{}class TxSubmissionError extends CardanoNodeError{}class StateQueryError extends CardanoNodeError{}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{ALONZO_AUX_TAG:()=>T,AuxiliaryData:()=>AuxiliaryData,SHELLEY_ERA_FIELDS_COUNT:()=>x});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,y,_,w,g,b,P,S,C,k,j;const x=2;const T=259;class AuxiliaryData{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");const e=new s.CborWriter;const t=__classPrivateFieldGet(this,v,"m",C).call(this);if(1===t&&void 0!==__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").metadata().size>0)e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));else if(t===x&&void 0!==__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").metadata().size>0&&void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0){e.writeStartArray(t);e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));e.writeStartArray(__classPrivateFieldGet(this,w,"f").length);for(const r of __classPrivateFieldGet(this,w,"f"))e.writeEncodedValue((0,p.hexToBytes)(r.toCbor()))}else{e.writeTag(T);e.writeStartMap(t);if(void 0!==__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0){e.writeInt(1n);e.writeStartArray(__classPrivateFieldGet(this,w,"f").length);for(const a of __classPrivateFieldGet(this,w,"f"))e.writeEncodedValue((0,p.hexToBytes)(a.toCbor()))}if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0){e.writeInt(2n);e.writeStartArray(__classPrivateFieldGet(this,g,"f").length);for(const i of __classPrivateFieldGet(this,g,"f"))e.writeEncodedValue((0,p.hexToBytes)(i.toCbor()))}if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0){e.writeInt(3n);e.writeStartArray(__classPrivateFieldGet(this,b,"f").length);for(const o of __classPrivateFieldGet(this,b,"f"))e.writeEncodedValue((0,p.hexToBytes)(o.toCbor()))}if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0){e.writeInt(4n);e.writeStartArray(__classPrivateFieldGet(this,P,"f").length);for(const n of __classPrivateFieldGet(this,P,"f"))e.writeEncodedValue((0,p.hexToBytes)(n.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new AuxiliaryData;const s=t.peekState();if(s===i.CborReaderState.StartMap)__classPrivateFieldSet(r,_,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");else if(s===i.CborReaderState.Tag){const h=t.readTag();if(h!==T){throw new d.InvalidArgumentError("cbor",`Expected tag '${T}', but got ${h}.`)}t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const m=t.readInt();switch(m){case 0n:__classPrivateFieldSet(r,_,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 1n:r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:r.setPlutusV1Scripts(new Array);t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){r.plutusV1Scripts().push(l.PlutusV1Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 3n:r.setPlutusV2Scripts(new Array);t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){r.plutusV2Scripts().push(u.PlutusV2Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 4n:r.setPlutusV3Scripts(new Array);t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){r.plutusV3Scripts().push(f.PlutusV3Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break}}t.readEndMap()}else{t.readStartArray();__classPrivateFieldSet(r,_,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray()}__classPrivateFieldSet(r,S,e,"f");return r}toCore(){const e=__classPrivateFieldGet(this,v,"m",k).call(this);const t={blob:__classPrivateFieldGet(this,_,"f")?__classPrivateFieldGet(this,_,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(o.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=__classPrivateFieldGet(AuxiliaryData,y,"m",j).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return __classPrivateFieldGet(this,_,"f")}setMetadata(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,w,"f")}setNativeScripts(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,g,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,b,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,P,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}constructor(){v.add(this);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0)}}y=AuxiliaryData,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,v=new WeakSet,C=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").metadata().size>0)++e;if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0)++e;return e},k=function _AuxiliaryData_getCoreScripts(){const e=__classPrivateFieldGet(this,g,"f")?__classPrivateFieldGet(this,g,"f").map(e=>e.toCore()):[];const t=__classPrivateFieldGet(this,b,"f")?__classPrivateFieldGet(this,b,"f").map(e=>e.toCore()):[];const r=__classPrivateFieldGet(this,P,"f")?__classPrivateFieldGet(this,P,"f").map(e=>e.toCore()):[];const s=__classPrivateFieldGet(this,w,"f")?__classPrivateFieldGet(this,w,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...s]},j=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case h.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(c.NativeScript.fromCore(r));break;case h.ScriptType.Plutus:if(r.version===h.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(l.PlutusV1Script.fromCore(r))}else if(r.version===h.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(u.PlutusV2Script.fromCore(r))}else if(r.version===h.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(f.PlutusV3Script.fromCore(r))}break;default:throw new m.SerializationError(m.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":(e,t,r)=>{"use strict";r.d(t,{GeneralTransactionMetadata:()=>GeneralTransactionMetadata});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class GeneralTransactionMetadata{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartMap(__classPrivateFieldGet(this,c,"f").size);for(const[t,r]of __classPrivateFieldGet(this,c,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new a.CborReader(e);r.readStartMap();while(r.peekState()!==i.CborReaderState.EndMap){const s=r.readInt();const d=n.TransactionMetadatum.fromCbor(o.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,d)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...__classPrivateFieldGet(this,c,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],n.TransactionMetadatum.fromCore(e[1])])))}metadata(){return __classPrivateFieldGet(this,c,"f")}setMetadata(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){if(__classPrivateFieldGet(this,l,"f")===__classPrivateFieldGet(e,l,"f"))return true;if(__classPrivateFieldGet(this,c,"f").size!==__classPrivateFieldGet(e,c,"f").size)return false;const t=[...__classPrivateFieldGet(this,c,"f").entries()];const r=[...__classPrivateFieldGet(e,c,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,c,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumList:()=>MetadatumList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var c,l;class MetadatumList{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const t of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(t.toCbor()));if(__classPrivateFieldGet(this,l,"f"))e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new a.CborReader(e);const s=r.readStartArray();if(null===s)__classPrivateFieldSet(t,l,true,"f");while(r.peekState()!==i.CborReaderState.EndArray){t.add(n.TransactionMetadatum.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array);l.set(this,false)}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumMap:()=>MetadatumMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var l,u;class MetadatumMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new a.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==i.CborReaderState.EndMap){const o=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const n=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(o,n)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new n.MetadatumList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatum:()=>TransactionMetadatum});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var m,p,v,y,_,w,g;const b=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?h.from(e,"utf8").length:e.length;if(t>64)throw new l.SerializationError(l.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");let e;switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Map:e=__classPrivateFieldGet(this,m,"f").toCbor();break;case u.TransactionMetadatumKind.List:e=__classPrivateFieldGet(this,p,"f").toCbor();break;case u.TransactionMetadatumKind.Bytes:{const t=new s.CborWriter;check64Length(__classPrivateFieldGet(this,y,"f"));t.writeByteString(__classPrivateFieldGet(this,y,"f"));e=(0,f.bytesToHex)(t.encode());break}case u.TransactionMetadatumKind.Text:{const r=new s.CborWriter;check64Length(__classPrivateFieldGet(this,_,"f"));r.writeTextString(__classPrivateFieldGet(this,_,"f"));e=(0,f.bytesToHex)(r.encode());break}case u.TransactionMetadatumKind.Integer:{const a=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f")>=0&&__classPrivateFieldGet(this,v,"f")<=b||__classPrivateFieldGet(this,v,"f")<0&&__classPrivateFieldGet(this,v,"f")>=-1n-b)a.writeInt(__classPrivateFieldGet(this,v,"f"));else a.writeBigInteger(__classPrivateFieldGet(this,v,"f"));e=(0,f.bytesToHex)(a.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new a.CborReader(e);const s=r.peekState();switch(s){case i.CborReaderState.Tag:{const l=r.peekTag();switch(l){case o.CborTag.UnsignedBigNum:{r.readTag();const f=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(f),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break}case o.CborTag.NegativeBigNum:{r.readTag();const h=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(h)*-1n,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break}}break}case i.CborReaderState.NegativeInteger:case i.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,v,r.readInt(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");break;case i.CborReaderState.StartIndefiniteLengthByteString:case i.CborReaderState.ByteString:__classPrivateFieldSet(t,y,r.readByteString(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Bytes,"f");break;case i.CborReaderState.StartIndefiniteLengthTextString:case i.CborReaderState.TextString:__classPrivateFieldSet(t,_,r.readTextString(),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Text,"f");break;case i.CborReaderState.StartArray:__classPrivateFieldSet(t,p,d.MetadatumList.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.List,"f");break;case i.CborReaderState.StartMap:__classPrivateFieldSet(t,m,c.MetadatumMap.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,g,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Bytes:return new Uint8Array(__classPrivateFieldGet(this,y,"f"));case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,_,"f");case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f");case u.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(__classPrivateFieldGet(this,p,"f"));case u.TransactionMetadatumKind.Map:{const e=__classPrivateFieldGet(this,m,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const a=r.get(s);t.set(a.toCore(),e.get(a).toCore())}return t}default:throw new l.NotImplementedError(`TransactionMetadatum mapping for kind ${__classPrivateFieldGet(this,w,"f")}`)}}static fromCore(e){if(null===e)throw new l.SerializationError(l.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new l.SerializationError(l.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new d.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new c.MetadatumMap;for(const[a,i]of e.entries())s.insert(TransactionMetadatum.fromCore(a),TransactionMetadatum.fromCore(i));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,w,u.TransactionMetadatumKind.Text,"f");return t}getKind(){return __classPrivateFieldGet(this,w,"f")}asMap(){return __classPrivateFieldGet(this,m,"f")}asList(){return __classPrivateFieldGet(this,p,"f")}asInteger(){return __classPrivateFieldGet(this,v,"f")}asBytes(){return __classPrivateFieldGet(this,y,"f")}asText(){return __classPrivateFieldGet(this,_,"f")}equals(e){let t=false;switch(__classPrivateFieldGet(this,w,"f")){case u.TransactionMetadatumKind.Bytes:if(__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(e,y,"f")){return __classPrivateFieldGet(this,y,"f").length===__classPrivateFieldGet(e,y,"f").length&&__classPrivateFieldGet(this,y,"f").every((t,r)=>t===__classPrivateFieldGet(e,y,"f")[r])}return false;case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f")===__classPrivateFieldGet(e,v,"f");case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,_,"f")===__classPrivateFieldGet(e,_,"f");case u.TransactionMetadatumKind.List:if(__classPrivateFieldGet(this,p,"f")&&__classPrivateFieldGet(e,p,"f")){return __classPrivateFieldGet(this,p,"f").equals(__classPrivateFieldGet(e,p,"f"))}return false;case u.TransactionMetadatumKind.Map:if(__classPrivateFieldGet(this,m,"f")&&__classPrivateFieldGet(e,m,"f")){return __classPrivateFieldGet(this,m,"f").equals(__classPrivateFieldGet(e,m,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,u.TransactionMetadatumKind.Map);g.set(this,void 0)}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatumKind:()=>s});var s;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js":(e,t,r)=>{"use strict";r.d(t,{CborAdditionalInfo:()=>s});var s;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js":(e,t,r)=>{"use strict";r.d(t,{CborInitialByte:()=>CborInitialByte});var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;class CborInitialByte{CborInitialByte(e,t){__classPrivateFieldSet(this,s,e<<5|t,"f")}static from(e){const t=new CborInitialByte;__classPrivateFieldSet(t,s,e,"f");return t}getInitialByte(){return __classPrivateFieldGet(this,s,"f")}getMajorType(){return __classPrivateFieldGet(this,s,"f")>>5}getAdditionalInfo(){return __classPrivateFieldGet(this,s,"f")&CborInitialByte.AdditionalInformationMask}constructor(){s.set(this,void 0)}}s=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js":(e,t,r)=>{"use strict";r.d(t,{CborMajorType:()=>s});var s;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js":(e,t,r)=>{"use strict";r.d(t,{CborReader:()=>CborReader});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R;const D="Unexpected end of buffer";class CborReader{peekState(){if(__classPrivateFieldGet(this,y,"f")===n.CborReaderState.Undefined)__classPrivateFieldSet(this,y,__classPrivateFieldGet(this,l,"m",T).call(this),"f");return __classPrivateFieldGet(this,y,"f")}getBytesRemaining(){return __classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,h,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=__classPrivateFieldGet(this,h,"f");let t=0;do{t=__classPrivateFieldGet(this,l,"m",R).call(this,t)}while(t>0)return __classPrivateFieldGet(this,f,"f").slice(e,__classPrivateFieldGet(this,h,"f"))}readStartArray(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Array);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Array);return null}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:a}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",j).call(this,a);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Array,r);return r}readEndArray(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",k).call(this)}}readInt(){const e=__classPrivateFieldGet(this,l,"m",I).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return e.signedInt}readUInt(){const e=__classPrivateFieldGet(this,l,"m",A).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return e.unsignedInt}readDouble(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Simple);let t;const r=__classPrivateFieldGet(this,l,"m",C).call(this);switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional16BitData:__classPrivateFieldGet(this,l,"m",x).call(this,3);t=(0,d.decodeHalf)(r.slice(1));__classPrivateFieldGet(this,l,"m",j).call(this,3);__classPrivateFieldGet(this,l,"m",k).call(this);return t;case s.CborAdditionalInfo.Additional32BitData:__classPrivateFieldGet(this,l,"m",x).call(this,5);t=c.from(r).readFloatBE(1);__classPrivateFieldGet(this,l,"m",j).call(this,5);__classPrivateFieldGet(this,l,"m",k).call(this);return t;case s.CborAdditionalInfo.Additional64BitData:__classPrivateFieldGet(this,l,"m",x).call(this,9);t=c.from(r).readDoubleBE(1);__classPrivateFieldGet(this,l,"m",j).call(this,9);__classPrivateFieldGet(this,l,"m",k).call(this);return t;default:throw new a.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Simple);if((e.getInitialByte()&i.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",x).call(this,2);const t=__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")+1];__classPrivateFieldGet(this,l,"m",j).call(this,2);__classPrivateFieldGet(this,l,"m",k).call(this);return t}throw new a.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.NegativeInteger);const t=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));__classPrivateFieldGet(this,l,"m",j).call(this,t.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Map);if(t.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Map);e=null}else{const r=__classPrivateFieldGet(this,l,"m",C).call(this);const i=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,t,r);if(2*i.length>r.length-i.bytesRead)throw new a.CborContentException("Definite length exceeds buffer size");__classPrivateFieldGet(this,l,"m",j).call(this,i.bytesRead);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Map,2*i.length);e=i.length}__classPrivateFieldGet(this,v,"f").currentKeyOffset=__classPrivateFieldGet(this,h,"f");return e}readEndMap(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);if(__classPrivateFieldGet(this,v,"f").itemsRead%2!==0)throw new a.CborContentException("Key missing value");__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",k).call(this)}}readBoolean(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalTrue&&t!==s.CborAdditionalInfo.AdditionalFalse)throw new a.CborContentException("Not a boolean encoding");const r=t===s.CborAdditionalInfo.AdditionalTrue;__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this);return r}readNull(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalNull)throw new a.CborContentException("Not a null encoding");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this)}readStartIndefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new a.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}readByteString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",B).call(this,o.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",j).call(this,r);__classPrivateFieldGet(this,l,"m",k).call(this);return t}const a=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:i,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,a);__classPrivateFieldGet(this,l,"m",x).call(this,n+i);__classPrivateFieldGet(this,l,"m",j).call(this,n+i);__classPrivateFieldGet(this,l,"m",k).call(this);return a.slice(n,n+i)}readDefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new a.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:i}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",x).call(this,i+r);__classPrivateFieldGet(this,l,"m",j).call(this,i+r);__classPrivateFieldGet(this,l,"m",k).call(this);return t.slice(i,i+r)}readStartIndefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new a.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}readTextString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",B).call(this,o.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",j).call(this,r);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(t).toString("utf8")}const a=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:i,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,a);__classPrivateFieldGet(this,l,"m",x).call(this,n+i);__classPrivateFieldGet(this,l,"m",j).call(this,n+i);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(a.slice(n,n+i)).toString("utf8")}readDefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new a.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:i}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",x).call(this,i+r);__classPrivateFieldGet(this,l,"m",j).call(this,i+r);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(t.slice(i,i+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=__classPrivateFieldGet(this,l,"m",F).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,t);__classPrivateFieldSet(this,p,true,"f");return e}peekTag(){const{tag:e}=__classPrivateFieldGet(this,l,"m",F).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new a.CborContentException(D)}}static mapSimpleValueDataToReaderState(e){switch(e){case s.CborAdditionalInfo.AdditionalNull:return n.CborReaderState.Null;case s.CborAdditionalInfo.AdditionalFalse:case s.CborAdditionalInfo.AdditionalTrue:return n.CborReaderState.Boolean;case s.CborAdditionalInfo.Additional16BitData:return n.CborReaderState.HalfPrecisionFloat;case s.CborAdditionalInfo.Additional32BitData:return n.CborReaderState.SinglePrecisionFloat;case s.CborAdditionalInfo.Additional64BitData:return n.CborReaderState.DoublePrecisionFloat;default:return n.CborReaderState.SimpleValue}}constructor(e){l.add(this);f.set(this,void 0);h.set(this,0);m.set(this,new Array);p.set(this,false);v.set(this,void 0);y.set(this,n.CborReaderState.Undefined);__classPrivateFieldSet(this,f,new Uint8Array(c.from(e,"hex")),"f");__classPrivateFieldSet(this,v,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}u=CborReader,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,l=new WeakSet,_=function _CborReader_peekInitialByte(e){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0)throw new a.CborInvalidOperationException("No more data items to read");if(__classPrivateFieldGet(this,h,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,h,"f")>0)throw new a.CborInvalidOperationException("End of root-level. No more data items to read");throw new a.CborContentException(D)}const t=i.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")]);switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.ByteString:case o.CborMajorType.Utf8String:if(t.getInitialByte()===i.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===__classPrivateFieldGet(this,v,"f").type&&t.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength){break}throw new a.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new a.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},w=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=i.CborInitialByte.from(e[0]);if(r.getInitialByte()!==i.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new a.CborContentException("Indefinite length string contains invalid data item");return r},g=function _CborReader_validateNextByteIsBreakByte(){const e=__classPrivateFieldGet(this,l,"m",_).call(this);if(e.getInitialByte()!==i.CborInitialByte.IndefiniteLengthBreakByte)throw new a.CborInvalidOperationException("Not at end of indefinite length data item")},b=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:__classPrivateFieldGet(this,v,"f").currentKeyOffset,definiteLength:__classPrivateFieldGet(this,v,"f").definiteLength,frameOffset:__classPrivateFieldGet(this,v,"f").frameOffset,itemsRead:__classPrivateFieldGet(this,v,"f").itemsRead,type:__classPrivateFieldGet(this,v,"f").type};__classPrivateFieldGet(this,m,"f").push(r);__classPrivateFieldGet(this,v,"f").type=e;__classPrivateFieldGet(this,v,"f").definiteLength=t;__classPrivateFieldGet(this,v,"f").itemsRead=0;__classPrivateFieldGet(this,v,"f").frameOffset=__classPrivateFieldGet(this,h,"f");__classPrivateFieldSet(this,p,false,"f");__classPrivateFieldGet(this,v,"f").currentKeyOffset=null},P=function _CborReader_popDataItem(e){if(null===__classPrivateFieldGet(this,v,"f").type||__classPrivateFieldGet(this,m,"f").length<=0)throw new a.CborInvalidOperationException("Is at root context");if(e!==__classPrivateFieldGet(this,v,"f").type)throw new a.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${__classPrivateFieldGet(this,v,"f").type}`);if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead>0)throw new a.CborInvalidOperationException("Not at end of definite length data item");if(__classPrivateFieldGet(this,p,"f"))throw new a.CborContentException("Tag not followed by value");const t=__classPrivateFieldGet(this,m,"f").pop();__classPrivateFieldGet(this,l,"m",S).call(this,t)},S=function _CborReader_restoreStackFrame(e){__classPrivateFieldGet(this,v,"f").type=e.type;__classPrivateFieldGet(this,v,"f").frameOffset=e.frameOffset;__classPrivateFieldGet(this,v,"f").definiteLength=e.definiteLength;__classPrivateFieldGet(this,v,"f").itemsRead=e.itemsRead;__classPrivateFieldGet(this,v,"f").currentKeyOffset=e.currentKeyOffset;__classPrivateFieldSet(this,y,n.CborReaderState.Undefined,"f")},C=function _CborReader_getRemainingBytes(){return __classPrivateFieldGet(this,f,"f").slice(__classPrivateFieldGet(this,h,"f"))},k=function _CborReader_advanceDataItemCounters(){++__classPrivateFieldGet(this,v,"f").itemsRead;__classPrivateFieldSet(this,p,false,"f")},j=function _CborReader_advanceBuffer(e){if(__classPrivateFieldGet(this,h,"f")+e>__classPrivateFieldGet(this,f,"f").length)throw new a.CborContentException("Buffer offset out of bounds");__classPrivateFieldSet(this,h,__classPrivateFieldGet(this,h,"f")+e,"f");__classPrivateFieldSet(this,y,n.CborReaderState.Undefined,"f")},x=function _CborReader_ensureReadCapacity(e){if(__classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,h,"f")<e){throw new a.CborContentException(D)}},T=function _CborReader_peekStateCore(){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0){if(null===__classPrivateFieldGet(this,v,"f").type)return n.CborReaderState.Finished;switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.Array:return n.CborReaderState.EndArray;case o.CborMajorType.Map:return n.CborReaderState.EndMap;default:throw new a.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(__classPrivateFieldGet(this,h,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength){return n.CborReaderState.Finished}throw new a.CborInvalidOperationException(D)}const e=i.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")]);if(e.getInitialByte()===i.CborInitialByte.IndefiniteLengthBreakByte){if(__classPrivateFieldGet(this,p,"f")){throw new a.CborContentException("Tag not followed by value")}if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case null:throw new a.CborContentException("Unexpected break byte");case o.CborMajorType.ByteString:return n.CborReaderState.EndIndefiniteLengthByteString;case o.CborMajorType.Utf8String:return n.CborReaderState.EndIndefiniteLengthTextString;case o.CborMajorType.Array:return n.CborReaderState.EndArray;case o.CborMajorType.Map:if(__classPrivateFieldGet(this,v,"f").itemsRead%2===0)return n.CborReaderState.EndMap;throw new a.CborContentException("Key missing value");default:throw new a.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new a.CborContentException("Unexpected break byte")}}if(null!==__classPrivateFieldGet(this,v,"f").type&&null!==__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.ByteString:case o.CborMajorType.Utf8String:if(e.getMajorType()!==__classPrivateFieldGet(this,v,"f").type){throw new a.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:return n.CborReaderState.UnsignedInteger;case o.CborMajorType.NegativeInteger:return n.CborReaderState.NegativeInteger;case o.CborMajorType.ByteString:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthByteString:n.CborReaderState.ByteString;case o.CborMajorType.Utf8String:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthTextString:n.CborReaderState.TextString;case o.CborMajorType.Array:return n.CborReaderState.StartArray;case o.CborMajorType.Map:return n.CborReaderState.StartMap;case o.CborMajorType.Tag:return n.CborReaderState.Tag;case o.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new a.CborContentException("Invalid CBOR major type.")}},E=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},A=function _CborReader_peekUnsignedInteger(){const e=__classPrivateFieldGet(this,l,"m",_).call(this);switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:return __classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));case o.CborMajorType.NegativeInteger:throw new a.CborContentException("Integer overflow");default:throw new a.CborInvalidOperationException(`Reader type mismatch, expected ${o.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},I=function _CborReader_peekSignedInteger(){const e=__classPrivateFieldGet(this,l,"m",_).call(this);switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case o.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:i}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:i,signedInt:BigInt(-1)-s}}default:throw new a.CborInvalidOperationException(`Reader type mismatch, expected ${o.CborMajorType.UnsignedInteger} or ${o.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},B=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=__classPrivateFieldGet(this,l,"m",C).call(this);let r=c.from([]);let s=0;let a=1;let o=__classPrivateFieldGet(CborReader,u,"m",w).call(CborReader,t.slice(a),e);while(o.getInitialByte()!==i.CborInitialByte.IndefiniteLengthBreakByte){const{length:n,bytesRead:d}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,o,t.slice(a));const f=d+Number(n);r=c.concat([r,t.slice(a+(f-n),a+f)]);a+=f;o=__classPrivateFieldGet(CborReader,u,"m",w).call(CborReader,t.slice(a),e)}s=a+1;return{encodingLength:s,val:new Uint8Array(r)}},F=function _CborReader_peekTagCore(){const e=__classPrivateFieldGet(this,l,"m",_).call(this,o.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,tag:Number(t)}},M=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&i.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case s.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=c.from(t.slice(1));const o=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(o)}}case s.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const n=c.from(t.slice(1));const d=n.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(d)}}case s.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const l=c.from(t.slice(1,9));let u=BigInt(0);for(const f of l)u=(u<<BigInt(8))+BigInt(f);return{bytesRead:9,unsignedInt:u}}default:throw new a.CborContentException("Invalid integer encoding")}},R=function _CborReader_skipNextNode(e){let t;let r=e;while((t=__classPrivateFieldGet(this,l,"m",T).call(this))===n.CborReaderState.Tag)this.readTag();switch(t){case n.CborReaderState.UnsignedInteger:this.readUInt();break;case n.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case n.CborReaderState.ByteString:this.readByteString();break;case n.CborReaderState.TextString:this.readTextString();break;case n.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case n.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case n.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case n.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case n.CborReaderState.StartArray:this.readStartArray();r++;break;case n.CborReaderState.EndArray:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case n.CborReaderState.StartMap:this.readStartMap();r++;break;case n.CborReaderState.EndMap:if(0===r)throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case n.CborReaderState.HalfPrecisionFloat:case n.CborReaderState.SinglePrecisionFloat:case n.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case n.CborReaderState.Null:case n.CborReaderState.Boolean:case n.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new a.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js":(e,t,r)=>{"use strict";r.d(t,{CborReaderState:()=>s});var s;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js":(e,t,r)=>{"use strict";r.d(t,{CborTag:()=>s});var s;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js":(e,t,r)=>{"use strict";r.d(t,{CborWriter:()=>CborWriter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d,c,l,u,f,h;const m=BigInt(-1);const p=BigInt("0x100000000");const v=24;const y=25;const _=26;const w=27;const g=244;const b=245;const P=246;const S=247;const C=159;const k=191;const j=249;const x=250;const T=251;const E=n.from("ffc00000","hex");const A=n.from("fff0000000000000","hex");const I=n.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=i.CborTag.UnsignedBigNum;if(e<0){e=-e+m;t=i.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const s=n.from(r,"hex");this.writeTag(t);__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.ByteString,s.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),s]),"f");return this}writeBoolean(e){__classPrivateFieldGet(this,d,"m",u).call(this,e?b:g);return this}writeByteString(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.ByteString,e.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeTextString(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Utf8String,n.from(e,"utf8").length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),n.from(e,"utf8")]),"f");return this}writeEncodedValue(e){__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Array,e);else __classPrivateFieldGet(this,d,"m",u).call(this,C);return this}writeEndArray(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Map,e);else __classPrivateFieldGet(this,d,"m",u).call(this,k);return this}writeEndMap(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else __classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(A);return this}if(e===Number.POSITIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(I);return this}if(Number.isNaN(e)){__classPrivateFieldGet(this,d,"m",u).call(this,x);this.writeEncodedValue(E);return this}try{t=(0,o.encodeHalf)(e);__classPrivateFieldGet(this,d,"m",u).call(this,j);this.writeEncodedValue(t)}catch{const r=n.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){__classPrivateFieldGet(this,d,"m",u).call(this,x);this.writeEncodedValue(r.valueOf())}else{const s=n.allocUnsafe(8);s.writeFloatBE(e,0);__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(s.valueOf())}}return this}writeNull(){__classPrivateFieldGet(this,d,"m",u).call(this,P);return this}writeUndefined(){__classPrivateFieldGet(this,d,"m",u).call(this,S);return this}writeTag(e){__classPrivateFieldGet(this,d,"m",l).call(this,a.CborMajorType.Tag,e);return this}encodeAsHex(){return __classPrivateFieldGet(this,c,"f").toString("hex")}encode(){return new Uint8Array(__classPrivateFieldGet(this,c,"f"))}reset(){__classPrivateFieldSet(this,c,n.from([]),"f")}constructor(){d.add(this);c.set(this,n.from([]))}}c=new WeakMap,d=new WeakSet,l=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)__classPrivateFieldGet(this,d,"m",u).call(this,r|Number(t));else if(t<256){__classPrivateFieldGet(this,d,"m",u).call(this,r|v);__classPrivateFieldGet(this,d,"m",u).call(this,Number(t))}else if(t<65536){__classPrivateFieldGet(this,d,"m",u).call(this,r|y);__classPrivateFieldGet(this,d,"m",f).call(this,Number(t))}else if(t<4294967296){__classPrivateFieldGet(this,d,"m",u).call(this,r|_);__classPrivateFieldGet(this,d,"m",h).call(this,Number(t))}else{__classPrivateFieldGet(this,d,"m",u).call(this,r|w);__classPrivateFieldGet(this,d,"m",h).call(this,Number(BigInt(t)/p));__classPrivateFieldGet(this,d,"m",h).call(this,Number(BigInt(t)%p))}},u=function _CborWriter_pushUInt8(e){const t=n.allocUnsafe(1);t.writeUInt8(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},f=function _CborWriter_pushUInt16(e){const t=n.allocUnsafe(2);t.writeUInt16BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},h=function _CborWriter_pushUInt32(e){const t=n.allocUnsafe(4);t.writeUInt32BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";r.d(t,{decodeHalf:()=>decodeHalf,encodeHalf:()=>encodeHalf});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const i="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let a=0;a<r;a++)s*=Math.pow(2,Math.floor((t+a)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let a;a=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-a:a};const encodeHalf=e=>{const t=a.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new s.LossOfPrecisionException(i)}let o=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)o+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new s.LossOfPrecisionException(i)}o+=d+8388608>>126-n}else{throw new s.LossOfPrecisionException(i)}const c=new Uint8Array(2);c[0]=o>>>8&255;c[1]=255&o;return c}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";r.d(t,{CborContentException:()=>CborContentException,CborInvalidOperationException:()=>CborInvalidOperationException,LossOfPrecisionException:()=>LossOfPrecisionException});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}class CborContentException extends s.CustomError{constructor(e){super(e)}}class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js":(e,t,r)=>{"use strict";r.d(t,{AuthCommitteeHot:()=>AuthCommitteeHot});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class AuthCommitteeHot{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.AuthCommitteeHot);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.AuthCommitteeHot)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.AuthCommitteeHot}, but got ${a}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readStartArray();if(f!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const p=Number(t.readInt());const v=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const y=new AuthCommitteeHot({hash:u,type:l},{hash:v,type:p});__classPrivateFieldSet(y,h,e,"f");return y}toCore(){return{__typename:n.CertificateType.AuthorizeCommitteeHot,coldCredential:__classPrivateFieldGet(this,u,"f"),hotCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return __classPrivateFieldGet(this,u,"f")}hotCredential(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{Certificate:()=>Certificate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$;class Certificate{toCbor(){if(__classPrivateFieldGet(this,$,"f"))return __classPrivateFieldGet(this,$,"f");let e;switch(__classPrivateFieldGet(this,j,"f")){case i.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,F,"f").toCbor();break;case i.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,B,"f").toCbor();break;case i.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,I,"f").toCbor();break;case i.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,A,"f").toCbor();break;case i.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,E,"f").toCbor();break;case i.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,T,"f").toCbor();break;case i.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,x,"f").toCbor();break;case i.CertificateKind.Registration:e=__classPrivateFieldGet(this,M,"f").toCbor();break;case i.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,R,"f").toCbor();break;case i.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCbor();break;case i.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,O,"f").toCbor();break;case i.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCbor();break;case i.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,N,"f").toCbor();break;case i.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCbor();break;case i.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,K,"f").toCbor();break;case i.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,V,"f").toCbor();break;case i.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,W,"f").toCbor();break;case i.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,z,"f").toCbor();break;case i.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,U,"f").toCbor();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}return e}static fromCbor(e){let t;const r=new a.CborReader(e);r.readStartArray();const o=Number(r.readInt());switch(o){case i.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(y.StakeRegistration.fromCbor(e));break;case i.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCbor(e));break;case i.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(p.StakeDelegation.fromCbor(e));break;case i.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCbor(e));break;case i.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCbor(e));break;case i.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCbor(e));break;case i.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCbor(e));break;case i.CertificateKind.Registration:t=Certificate.newRegistrationCert(h.Registration.fromCbor(e));break;case i.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCbor(e));break;case i.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCbor(e));break;case i.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(w.StakeVoteDelegation.fromCbor(e));break;case i.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(_.StakeRegistrationDelegation.fromCbor(e));break;case i.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(k.VoteRegistrationDelegation.fromCbor(e));break;case i.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCbor(e));break;case i.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCbor(e));break;case i.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(m.ResignCommitteeCold.fromCbor(e));break;case i.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCbor(e));break;case i.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCbor(e));break;case i.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new d.InvalidStateError(`Unexpected kind value: ${o}`)}__classPrivateFieldSet(t,$,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,j,"f")){case i.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,F,"f").toCore();break;case i.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,B,"f").toCore();break;case i.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,I,"f").toCore();break;case i.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,A,"f").toCore();break;case i.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,E,"f").toCore();break;case i.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,T,"f").toCore();break;case i.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,x,"f").toCore();break;case i.CertificateKind.Registration:e=__classPrivateFieldGet(this,M,"f").toCore();break;case i.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,R,"f").toCore();break;case i.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCore();break;case i.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,O,"f").toCore();break;case i.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCore();break;case i.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,N,"f").toCore();break;case i.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCore();break;case i.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,K,"f").toCore();break;case i.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,V,"f").toCore();break;case i.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,W,"f").toCore();break;case i.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,z,"f").toCore();break;case i.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,U,"f").toCore();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case o.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(y.StakeRegistration.fromCore(e));break;case o.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCore(e));break;case o.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(p.StakeDelegation.fromCore(e));break;case o.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCore(e));break;case o.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCore(e));break;case o.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCore(e));break;case o.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCore(e));break;case o.CertificateType.Registration:t=Certificate.newRegistrationCert(h.Registration.fromCore(e));break;case o.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCore(e));break;case o.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCore(e));break;case o.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(w.StakeVoteDelegation.fromCore(e));break;case o.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(_.StakeRegistrationDelegation.fromCore(e));break;case o.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(k.VoteRegistrationDelegation.fromCore(e));break;case o.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCore(e));break;case o.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCore(e));break;case o.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(m.ResignCommitteeCold.fromCore(e));break;case o.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCore(e));break;case o.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCore(e));break;case o.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCore(e));break;default:throw new d.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,F,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;__classPrivateFieldSet(t,B,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,I,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,E,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;__classPrivateFieldSet(t,A,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,x,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;__classPrivateFieldSet(t,T,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,M,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,R,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,D,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,O,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,G,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,N,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,H,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;__classPrivateFieldSet(t,K,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;__classPrivateFieldSet(t,V,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,W,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,z,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,U,e,"f");__classPrivateFieldSet(t,j,i.CertificateKind.UpdateDrep,"f");return t}kind(){return __classPrivateFieldGet(this,j,"f")}asStakeRegistration(){return __classPrivateFieldGet(this,F,"f")}asStakeDeregistration(){return __classPrivateFieldGet(this,B,"f")}asStakeDelegation(){return __classPrivateFieldGet(this,I,"f")}asPoolRegistration(){return __classPrivateFieldGet(this,E,"f")}asPoolRetirement(){return __classPrivateFieldGet(this,A,"f")}asGenesisKeyDelegation(){return __classPrivateFieldGet(this,x,"f")}asMoveInstantaneousRewardsCert(){return __classPrivateFieldGet(this,T,"f")}asRegistrationCert(){return __classPrivateFieldGet(this,M,"f")}asUnregistrationCert(){return __classPrivateFieldGet(this,R,"f")}asVoteDelegationCert(){return __classPrivateFieldGet(this,D,"f")}asStakeVoteDelegationCert(){return __classPrivateFieldGet(this,O,"f")}asStakeRegistrationDelegationCert(){return __classPrivateFieldGet(this,G,"f")}asVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,N,"f")}asStakeVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,H,"f")}asAuthCommitteeHotCert(){return __classPrivateFieldGet(this,K,"f")}asResignCommitteeColdCert(){return __classPrivateFieldGet(this,V,"f")}asRegisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,W,"f")}asUnregisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,z,"f")}asUpdateDelegateRepresentativeCert(){return __classPrivateFieldGet(this,U,"f")}constructor(){j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0)}}j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js":(e,t,r)=>{"use strict";r.d(t,{CertificateKind:()=>s});var s;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js":(e,t,r)=>{"use strict";r.d(t,{DRep:()=>DRep});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;class DRep{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===n.DRepKind.KeyHash||r===n.DRepKind.ScriptHash){const a=s.Hash28ByteBase16(d.HexBlob.fromBytes(t.readByteString()));if(r===n.DRepKind.KeyHash){return DRep.newKeyHash(a)}return DRep.newScriptHash(a)}t.readEndArray();if(r===n.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash)return __classPrivateFieldGet(this,u,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,c.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,c.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===o.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(n.DRepKind.KeyHash,{hash:e,type:o.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(n.DRepKind.ScriptHash,{hash:e,type:o.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(n.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(n.DRepKind.NoConfidence,void 0)}kind(){return __classPrivateFieldGet(this,f,"f")}toKeyHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.KeyHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.ScriptHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,e,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js":(e,t,r)=>{"use strict";r.d(t,{DRepKind:()=>s});var s;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js":(e,t,r)=>{"use strict";r.d(t,{GenesisKeyDelegation:()=>GenesisKeyDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h,m;const p=4;class GenesisKeyDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeInt(o.CertificateKind.GenesisKeyDelegation);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,h,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.GenesisKeyDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.GenesisKeyDelegation}, but got ${a}`);const n=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const l=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const u=s.Hash32ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=new GenesisKeyDelegation(n,l,u);__classPrivateFieldSet(f,m,e,"f");return f}toCore(){return{__typename:n.CertificateType.GenesisKeyDelegation,genesisDelegateHash:__classPrivateFieldGet(this,f,"f"),genesisHash:__classPrivateFieldGet(this,u,"f"),vrfKeyHash:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return __classPrivateFieldGet(this,u,"f")}setGenesisHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}genesisDelegateHash(){return __classPrivateFieldGet(this,f,"f")}setGenesisDelegateHash(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,h,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}constructor(e,t,r){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f");__classPrivateFieldSet(this,h,r,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousReward:()=>MoveInstantaneousReward});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var h,m,p,v;const y=2;class MoveInstantaneousReward{toCbor(){if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");let e;switch(__classPrivateFieldGet(this,p,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,h,"f").toCbor();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,m,"f").toCbor();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,p,"f")}`)}const t=new s.CborWriter;t.writeStartArray(y);t.writeInt(o.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(f.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);let r=t.readStartArray();if(r!==y)throw new n.InvalidArgumentError("cbor",`Expected elements size ${y}, but got ${r}`);const s=Number(t.readInt());if(s!==o.CertificateKind.MoveInstantaneousRewards)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const f=d.HexBlob.fromBytes(t.readEncodedValue());const _=new a.CborReader(f);r=_.readStartArray();if(r!==y)throw new n.InvalidArgumentError("cbor",`Expected elements size ${y}, but got ${r}`);const w=new MoveInstantaneousReward;_.readInt();if(_.peekState()===i.CborReaderState.UnsignedInteger){__classPrivateFieldSet(w,h,l.MoveInstantaneousRewardToOtherPot.fromCbor(f),"f");__classPrivateFieldSet(w,p,c.MirCertificateKind.ToOtherPot,"f")}else if(_.peekState()===i.CborReaderState.StartArray||_.peekState()===i.CborReaderState.StartMap){__classPrivateFieldSet(w,m,u.MoveInstantaneousRewardToStakeCreds.fromCbor(f),"f");__classPrivateFieldSet(w,p,c.MirCertificateKind.ToStakeCreds,"f")}else{throw new n.InvalidArgumentError("cbor","Invalid CBOR string")}__classPrivateFieldSet(w,v,e,"f");return w}toCore(){let e;switch(__classPrivateFieldGet(this,p,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,h,"f").toCore();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,m,"f").toCore();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,p,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case c.MirCertificateKind.ToOtherPot:__classPrivateFieldSet(t,h,l.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToOtherPot,"f");break;case c.MirCertificateKind.ToStakeCreds:__classPrivateFieldSet(t,m,u.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToStakeCreds,"f");break;default:throw new n.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return __classPrivateFieldGet(this,p,"f")}asToOtherPot(){return __classPrivateFieldGet(this,h,"f")}asToStakeCreds(){return __classPrivateFieldGet(this,m,"f")}constructor(){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0)}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToOtherPot:()=>MoveInstantaneousRewardToOtherPot});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(__classPrivateFieldGet(this,n,"f")===i.MirCertificatePot.Reserves?0:1);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());const n=t.readInt();if(s<0||s>1)throw new o.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${s}`);const d=new MoveInstantaneousRewardToOtherPot(0===s?i.MirCertificatePot.Reserves:i.MirCertificatePot.Treasury,n);__classPrivateFieldSet(d,c,e,"f");return d}toCore(){return{__typename:i.CertificateType.MIR,kind:i.MirCertificateKind.ToOtherPot,pot:__classPrivateFieldGet(this,n,"f"),quantity:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){if(e.kind!==i.MirCertificateKind.ToOtherPot)throw new o.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new o.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return __classPrivateFieldGet(this,n,"f")}setPot(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}getAmount(){return __classPrivateFieldGet(this,d,"f")}setAmount(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToStakeCreds:()=>MoveInstantaneousRewardToStakeCreds});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f")===n.MirCertificatePot.Reserves?0:1);const t=new Map([...__classPrivateFieldGet(this,f,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeStartArray(m);e.writeInt(r.type);e.writeByteString(l.from(r.hash,"hex"));e.writeInt(s)}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a<0||a>1)throw new d.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${a} elements`);t.readStartMap();const l=new Map;while(t.peekState()!==o.CborReaderState.EndMap){t.readStartArray();const u=Number(t.readInt());if(u<0||u>1)throw new d.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${u}`);const f=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=t.readInt();l.set({hash:f,type:u},p)}t.readEndMap();const v=new MoveInstantaneousRewardToStakeCreds(0===a?n.MirCertificatePot.Reserves:n.MirCertificatePot.Treasury,l);__classPrivateFieldSet(v,h,e,"f");return v}toCore(){if(0===__classPrivateFieldGet(this,f,"f").size)throw new d.InvalidStateError("The credential map is empty.");const[[e,t]]=__classPrivateFieldGet(this,f,"f");return{__typename:n.CertificateType.MIR,kind:n.MirCertificateKind.ToStakeCreds,pot:__classPrivateFieldGet(this,u,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==n.MirCertificateKind.ToStakeCreds)throw new d.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new d.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return __classPrivateFieldGet(this,u,"f")}setPot(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}getStakeCreds(){return __classPrivateFieldGet(this,f,"f")}setStakeCreds(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js":(e,t,r)=>{"use strict";r.d(t,{PoolMetadata:()=>PoolMetadata});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=64;const h=2;class PoolMetadata{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(h);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new PoolMetadata(a,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{hash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}poolMetadataHash(){return __classPrivateFieldGet(this,l,"f")}setPoolMetadataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>f)throw new o.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js":(e,t,r)=>{"use strict";r.d(t,{PoolParams:()=>PoolParams});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var y=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var _,w,g,b,P,S,C,k,j,x;class PoolParams{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,x,"f"))return __classPrivateFieldGet(this,x,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(y.from(__classPrivateFieldGet(this,_,"f"),"hex"));e.writeByteString(y.from(__classPrivateFieldGet(this,w,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,g,"f"));e.writeInt(__classPrivateFieldGet(this,b,"f"));e.writeEncodedValue(y.from(__classPrivateFieldGet(this,P,"f").toCbor(),"hex"));e.writeByteString(y.from(__classPrivateFieldGet(this,S,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(y.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"));e.writeStartArray(__classPrivateFieldGet(this,k,"f").length);for(const t of __classPrivateFieldGet(this,k,"f"))e.writeEncodedValue(y.from(t.toCbor(),"hex"));if(__classPrivateFieldGet(this,j,"f"))e.writeEncodedValue(y.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new l.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);__classPrivateFieldSet(s,x,e,"f");return s}static fromFlattenedCbor(e){const t=s.Ed25519KeyHashHex(u.HexBlob.fromBytes(e.readByteString()));const r=(0,f.VrfVkHex)(u.HexBlob.fromBytes(e.readByteString()));const i=e.readInt();const o=e.readInt();const l=p.UnitInterval.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));const v=a.Address.fromBytes(u.HexBlob.fromBytes(e.readByteString())).asReward();const y=new Array;let _;const w=d.CborSet.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()),c.Hash.fromCbor);e.readStartArray();while(e.peekState()!==n.CborReaderState.EndArray)y.push(m.Relay.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==n.CborReaderState.Null)_=h.PoolMetadata.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,i,o,l,v,w,y,_)}toCore(){const e=__classPrivateFieldGet(this,S,"f").toAddress();const t={cost:__classPrivateFieldGet(this,b,"f"),id:f.PoolId.fromKeyHash(__classPrivateFieldGet(this,_,"f")),margin:__classPrivateFieldGet(this,P,"f").toCore(),owners:__classPrivateFieldGet(this,C,"f").toCore().map(t=>(0,v.createRewardAccount)(t,e.getNetworkId())),pledge:__classPrivateFieldGet(this,g,"f"),relays:__classPrivateFieldGet(this,k,"f").map(e=>e.toCore()),rewardAccount:__classPrivateFieldGet(this,S,"f").toAddress().toBech32(),vrf:__classPrivateFieldGet(this,w,"f")};if(__classPrivateFieldGet(this,j,"f"))t.metadataJson=__classPrivateFieldGet(this,j,"f").toCore();return t}static fromCore(e){return new PoolParams(f.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,p.UnitInterval.fromCore(e.margin),a.Address.fromBech32(e.rewardAccount).asReward(),d.CborSet.fromCore(e.owners.map(e=>s.Ed25519KeyHashHex(a.Address.fromBech32(e).asReward().getPaymentCredential().hash)),c.Hash.fromCore),e.relays.map(e=>m.Relay.fromCore(e)),e.metadataJson?h.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return __classPrivateFieldGet(this,_,"f")}setOperator(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,w,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}pledge(){return __classPrivateFieldGet(this,g,"f")}setPledge(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}cost(){return __classPrivateFieldGet(this,b,"f")}setCost(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}margin(){return __classPrivateFieldGet(this,P,"f")}setMargin(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}rewardAccount(){return __classPrivateFieldGet(this,S,"f")}setRewardAccount(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}poolOwners(){return __classPrivateFieldGet(this,C,"f")}setPoolOwners(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}relays(){return __classPrivateFieldGet(this,k,"f")}setRelays(e){__classPrivateFieldSet(this,k,[...e],"f");__classPrivateFieldSet(this,x,void 0,"f")}poolMetadata(){return __classPrivateFieldGet(this,j,"f")}setPoolMetadata(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}constructor(e,t,r,s,a,i,o,n,d){_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,t,"f");__classPrivateFieldSet(this,g,r,"f");__classPrivateFieldSet(this,b,s,"f");__classPrivateFieldSet(this,P,a,"f");__classPrivateFieldSet(this,S,i,"f");__classPrivateFieldSet(this,C,o,"f");__classPrivateFieldSet(this,k,n,"f");__classPrivateFieldSet(this,j,d,"f")}}_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":(e,t,r)=>{"use strict";r.d(t,{MultiHostName:()=>MultiHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;const d=2;const c=2;const l=64;class MultiHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,n,"f"))return __classPrivateFieldGet(this,n,"f");e.writeStartArray(d);e.writeInt(c);e.writeTextString(__classPrivateFieldGet(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==d)throw new i.InvalidArgumentError("cbor",`Expected an array of ${d} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c)throw new i.InvalidArgumentError("cbor",`Expected MultiHostName id ${c}, but got ${s}`);const o=t.readTextString();const l=new MultiHostName(o);__classPrivateFieldSet(l,n,e,"f");return l}toCore(){return{__typename:"RelayByNameMultihost",dnsName:__classPrivateFieldGet(this,o,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return __classPrivateFieldGet(this,o,"f")}setDnsName(e){if(e.length>l)throw new i.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);if(e.length>l)throw new i.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js":(e,t,r)=>{"use strict";r.d(t,{Relay:()=>Relay,RelayKind:()=>h});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d,c,l,u,f;var h;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(h||(h={}));class Relay{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");let e;switch(__classPrivateFieldGet(this,u,"f")){case h.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCbor();break;case h.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCbor();break;case h.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCbor();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCbor(e){let t;const r=new s.CborReader(e);r.readStartArray();const d=Number(r.readInt());switch(d){case h.SingleHostAddress:t=Relay.newSingleHostAddr(o.SingleHostAddr.fromCbor(e));break;case h.SingleHostDnsName:t=Relay.newSingleHostName(n.SingleHostName.fromCbor(e));break;case h.MultiHostDnsName:t=Relay.newMultiHostName(i.MultiHostName.fromCbor(e));break;default:throw new a.InvalidStateError(`Unexpected kind value: ${d}`)}__classPrivateFieldSet(t,f,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,u,"f")){case h.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCore();break;case h.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCore();break;case h.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCore();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(o.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(n.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(i.MultiHostName.fromCore(e));break;default:throw new a.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;__classPrivateFieldSet(t,d,e,"f");__classPrivateFieldSet(t,u,h.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;__classPrivateFieldSet(t,c,e,"f");__classPrivateFieldSet(t,u,h.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;__classPrivateFieldSet(t,l,e,"f");__classPrivateFieldSet(t,u,h.MultiHostDnsName,"f");return t}kind(){return __classPrivateFieldGet(this,u,"f")}asSingleHostAddr(){return __classPrivateFieldGet(this,d,"f")}asSingleHostName(){return __classPrivateFieldGet(this,c,"f")}asMultiHostName(){return __classPrivateFieldGet(this,l,"f")}constructor(){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostAddr:()=>SingleHostAddr});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/ip-address/dist/ip-address.js");const ipV4StringToByteArray=e=>{if(!n.Address4.isValid(e))throw new o.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};const byteArrayToIpV4String=e=>{if(4!==e.length)throw new o.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};const ipV6StringToByteArray=e=>{if(!n.Address6.isValid(e))throw new o.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new n.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};const byteArrayToIPv6String=e=>{const t=n.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u;const f=4;const h=0;class SingleHostAddr{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(h);__classPrivateFieldGet(this,d,"f")?e.writeInt(__classPrivateFieldGet(this,d,"f")):e.writeNull();__classPrivateFieldGet(this,c,"f")?e.writeByteString(ipV4StringToByteArray(__classPrivateFieldGet(this,c,"f"))):e.writeNull();__classPrivateFieldGet(this,l,"f")?e.writeByteString(ipV6StringToByteArray(__classPrivateFieldGet(this,l,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h)throw new o.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${h}, but got ${s}`);let n;let d;let c;if(t.peekState()===i.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}if(t.peekState()===i.CborReaderState.Null){t.readNull();d=void 0}else{d=byteArrayToIpV4String(t.readByteString())}if(t.peekState()===i.CborReaderState.Null){t.readNull();c=void 0}else{c=byteArrayToIPv6String(t.readByteString())}const l=new SingleHostAddr(n?Number(n):void 0,d,c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__typename:"RelayByAddress",ipv4:__classPrivateFieldGet(this,c,"f"),ipv6:__classPrivateFieldGet(this,l,"f"),port:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return __classPrivateFieldGet(this,d,"f")}setPort(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv4(){return __classPrivateFieldGet(this,c,"f")}setIpv4(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv6(){return __classPrivateFieldGet(this,l,"f")}setIpv6(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t,r){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostName:()=>SingleHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(u);__classPrivateFieldGet(this,n,"f")?e.writeInt(__classPrivateFieldGet(this,n,"f")):e.writeNull();e.writeTextString(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u)throw new o.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${s}`);let n;if(t.peekState()===i.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}const d=t.readTextString();const f=new SingleHostName(d,n?Number(n):void 0);__classPrivateFieldSet(f,c,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:__classPrivateFieldGet(this,d,"f"),port:__classPrivateFieldGet(this,n,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return __classPrivateFieldGet(this,n,"f")}setPort(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}dnsName(){return __classPrivateFieldGet(this,d,"f")}setDnsName(e){if(e.length>f)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,t,"f");if(e.length>f)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js":(e,t,r)=>{"use strict";r.d(t,{PoolRegistration:()=>PoolRegistration});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;const u=d.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeInt(i.CertificateKind.PoolRegistration);return __classPrivateFieldGet(this,c,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new n.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==i.CertificateKind.PoolRegistration)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${i.CertificateKind.PoolRegistration}, but got ${s}`);const o=d.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(o);__classPrivateFieldSet(c,l,e,"f");return c}toCore(){return{__typename:o.CertificateType.PoolRegistration,poolParameters:__classPrivateFieldGet(this,c,"f").toCore()}}static fromCore(e){return new PoolRegistration(d.PoolParams.fromCore(e.poolParameters))}poolParameters(){return __classPrivateFieldGet(this,c,"f")}setPoolParameters(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js":(e,t,r)=>{"use strict";r.d(t,{PoolRetirement:()=>PoolRetirement});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class PoolRetirement{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(o.CertificateKind.PoolRetirement);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,m,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.PoolRetirement)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.PoolRetirement}, but got ${a}`);const n=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const u=t.readInt();t.readEndArray();const f=new PoolRetirement(n,(0,d.EpochNo)(Number(u)));__classPrivateFieldSet(f,p,e,"f");return f}toCore(){return{__typename:n.CertificateType.PoolRetirement,epoch:__classPrivateFieldGet(this,m,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f"))}}static fromCore(e){return new PoolRetirement(u.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}epoch(){return __classPrivateFieldGet(this,m,"f")}setEpoch(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{RegisterDelegateRepresentative:()=>RegisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,y;const _=2;class RegisterDelegateRepresentative{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");e.writeStartArray(4);e.writeInt(d.CertificateKind.DrepRegistration);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,p,"f"));if(__classPrivateFieldGet(this,v,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(4!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==d.CertificateKind.DrepRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.DrepRegistration}, but got ${i}`);const c=t.readStartArray();if(c!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const m=t.readInt();let p;if(t.peekState()===n.CborReaderState.Null)t.readNull();else p=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const v=new RegisterDelegateRepresentative({hash:h,type:f},m,p);__classPrivateFieldSet(v,y,e,"f");return v}toCore(){return{__typename:c.CertificateType.RegisterDelegateRepresentative,anchor:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,m,"f"),deposit:__classPrivateFieldGet(this,p,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,m,"f")}deposit(){return __classPrivateFieldGet(this,p,"f")}anchor(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,v,r,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js":(e,t,r)=>{"use strict";r.d(t,{Registration:()=>Registration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Registration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.Registration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.Registration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.Registration}, but got ${a}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new Registration({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.Registration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js":(e,t,r)=>{"use strict";r.d(t,{ResignCommitteeCold:()=>ResignCommitteeCold});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v;const y=2;class ResignCommitteeCold{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.ResignCommitteeCold);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));if(__classPrivateFieldGet(this,p,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==d.CertificateKind.ResignCommitteeCold)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.ResignCommitteeCold}, but got ${i}`);const c=t.readStartArray();if(c!==y)throw new l.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let m;if(t.peekState()===n.CborReaderState.Null)t.readNull();else m=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new ResignCommitteeCold({hash:h,type:f},m);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:c.CertificateType.ResignCommitteeCold,anchor:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f").toCore():null,coldCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return __classPrivateFieldGet(this,m,"f")}anchor(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeDelegation:()=>StakeDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m;const p=3;const v=2;class StakeDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeInt(o.CertificateKind.StakeDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,h,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=new StakeDelegation({hash:u,type:l},f);__classPrivateFieldSet(h,m,e,"f");return h}toCore(){return{__typename:n.CertificateType.StakeDelegation,poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}setStakeCredential(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}constructor(e,t){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,t,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeDeregistration:()=>StakeDeregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class StakeDeregistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(o.CertificateKind.StakeDeregistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeDeregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeDeregistration}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const m=new StakeDeregistration({hash:u,type:l});__classPrivateFieldSet(m,f,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeDeregistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistration:()=>StakeRegistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class StakeRegistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(o.CertificateKind.StakeRegistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeRegistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeRegistration}, but got ${a}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const m=new StakeRegistration({hash:u,type:l});__classPrivateFieldSet(m,f,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeRegistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistrationDelegation:()=>StakeRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p;const v=2;class StakeRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,h,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,m,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(4!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeRegistrationDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));const h=t.readInt();t.readEndArray();const m=new StakeRegistrationDelegation({hash:u,type:l},h,f);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeRegistrationDelegation,deposit:__classPrivateFieldGet(this,m,"f"),poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}deposit(){return __classPrivateFieldGet(this,m,"f")}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t,r){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,h,r,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteDelegation:()=>StakeVoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,y;const _=2;class StakeVoteDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.StakeVoteDelegation);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeByteString(h.from(__classPrivateFieldGet(this,p,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeVoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeVoteDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==_)throw new c.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const m=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new StakeVoteDelegation({hash:f,type:u},m,h);__classPrivateFieldSet(p,y,e,"f");return p}toCore(){return{__typename:n.CertificateType.StakeVoteDelegation,dRep:__classPrivateFieldGet(this,v,"f").toCore(),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,p,"f")),stakeCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,m,"f")}drep(){return __classPrivateFieldGet(this,v,"f")}poolKeyHash(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,t,"f");__classPrivateFieldSet(this,p,r,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteRegistrationDelegation:()=>StakeVoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,y,_;const w=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(5);e.writeInt(o.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(w);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeByteString(h.from(__classPrivateFieldGet(this,v,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,y,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(5!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.StakeVoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeVoteRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==w)throw new c.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const m=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const p=t.readInt();t.readEndArray();const v=new StakeVoteRegistrationDelegation({hash:f,type:u},p,m,h);__classPrivateFieldSet(v,_,e,"f");return v}toCore(){return{__typename:n.CertificateType.StakeVoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,p,"f").toCore(),deposit:__classPrivateFieldGet(this,y,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,v,"f")),stakeCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,m,"f")}deposit(){return __classPrivateFieldGet(this,y,"f")}dRep(){return __classPrivateFieldGet(this,p,"f")}poolKeyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r,s){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,y,t,"f");__classPrivateFieldSet(this,p,r,"f");__classPrivateFieldSet(this,v,s,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UnregisterDelegateRepresentative:()=>UnregisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class UnregisterDelegateRepresentative{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.DrepUnregistration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.DrepUnregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.DrepUnregistration}, but got ${a}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new UnregisterDelegateRepresentative({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.UnregisterDelegateRepresentative,dRepCredential:__classPrivateFieldGet(this,u,"f"),deposit:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return __classPrivateFieldGet(this,u,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js":(e,t,r)=>{"use strict";r.d(t,{Unregistration:()=>Unregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Unregistration{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.Unregistration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.Unregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.Unregistration}, but got ${a}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new Unregistration({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.Unregistration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UpdateDelegateRepresentative:()=>UpdateDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v;const y=2;class UpdateDelegateRepresentative{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.UpdateDrep);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));if(__classPrivateFieldGet(this,p,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==d.CertificateKind.UpdateDrep)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.UpdateDrep}, but got ${i}`);const c=t.readStartArray();if(c!==y)throw new l.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let m;if(t.peekState()===n.CborReaderState.Null)t.readNull();else m=a.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new UpdateDelegateRepresentative({hash:h,type:f},m);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:c.CertificateType.UpdateDelegateRepresentative,anchor:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?a.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,m,"f")}anchor(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteDelegation:()=>VoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=2;class VoteDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.VoteDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(3!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.VoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.VoteDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new VoteDelegation({hash:f,type:u},h);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.VoteDelegation,dRep:__classPrivateFieldGet(this,m,"f").toCore(),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}dRep(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteRegistrationDelegation:()=>VoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p,v;const y=2;class VoteRegistrationDelegation{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,p,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==o.CertificateKind.VoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.VoteRegistrationDelegation}, but got ${a}`);const n=t.readStartArray();if(n!==y)throw new c.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const m=t.readInt();t.readEndArray();const p=new VoteRegistrationDelegation({hash:f,type:u},m,h);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:n.CertificateType.VoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,m,"f").toCore(),deposit:__classPrivateFieldGet(this,p,"f"),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}deposit(){return __classPrivateFieldGet(this,p,"f")}dRep(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,m,r,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js":(e,t,r)=>{"use strict";r.d(t,{Anchor:()=>Anchor});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;const h=128;class Anchor{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const a=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new Anchor(a,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{dataHash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}dataHash(){return __classPrivateFieldGet(this,l,"f")}setDataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>h)throw new o.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js":(e,t,r)=>{"use strict";r.d(t,{CborSet:()=>CborSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class CborSet{static fromCbor(e,t){const r=new s.CborReader(e);const o=new CborSet([]);if(r.peekState()===a.CborReaderState.Tag&&r.peekTag()===i.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==a.CborReaderState.EndArray){__classPrivateFieldGet(o,l,"f").push(t(n.HexBlob.fromBytes(r.readEncodedValue())))}__classPrivateFieldSet(o,u,e,"f");return o}toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new o.CborWriter;if(d.inConwayEra)e.writeTag(i.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(c.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return __classPrivateFieldGet(this,l,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return __classPrivateFieldGet(this,l,"f")}setValues(e){__classPrivateFieldSet(this,l,[...e],"f");__classPrivateFieldSet(this,u,void 0,"f")}size(){return __classPrivateFieldGet(this,l,"f").length}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,[...e],"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js":(e,t,r)=>{"use strict";r.d(t,{Credential:()=>Credential});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;const c=2;class Credential{toCbor(){const e=new s.CborWriter;e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,d,"f").type);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);if(t.readStartArray()!==c)throw new i.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=o.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...__classPrivateFieldGet(this,d,"f")}}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js":(e,t,r)=>{"use strict";r.d(t,{Datum:()=>Datum,DatumKind:()=>m,isDatumHash:()=>isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;const h=2;const isDatumHash=e=>null!==e&&"string"==typeof e;var m;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(m||(m={}));class Datum{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,c,"f"));if(__classPrivateFieldGet(this,c,"f")===m.DataHash)e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex").valueOf());else e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let d;let c;switch(s){case m.DataHash:d=o.HexBlob.fromBytes(t.readByteString());break;case m.InlineData:c=n.PlutusData.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new i.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const l=new Datum(d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){let e;switch(__classPrivateFieldGet(this,c,"f")){case m.DataHash:e=__classPrivateFieldGet(this,l,"f");break;case m.InlineData:e=__classPrivateFieldGet(this,u,"f").toCore();break;default:throw new i.InvalidStateError(`Unexpected datum kind ${__classPrivateFieldGet(this,c,"f")}`)}return e}static fromCore(e){if(isDatumHash(e))return new Datum(e);return new Datum(void 0,n.PlutusData.fromCore(e))}kind(){return __classPrivateFieldGet(this,c,"f")}asDataHash(){return __classPrivateFieldGet(this,l,"f")}asInlineData(){return __classPrivateFieldGet(this,u,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);if(e&&t)throw new i.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new i.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)__classPrivateFieldSet(this,c,m.DataHash,"f");if(t)__classPrivateFieldSet(this,c,m.InlineData,"f");__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js":(e,t,r)=>{"use strict";r.d(t,{ExUnits:()=>ExUnits});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;const c=2;class ExUnits{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,o,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new i.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=t.readUInt();const o=t.readUInt();t.readEndArray();const n=new ExUnits(s,o);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{memory:Number(__classPrivateFieldGet(this,o,"f")),steps:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return __classPrivateFieldGet(this,o,"f")}setMem(e){__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}steps(){return __classPrivateFieldGet(this,n,"f")}setSteps(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}add(e){const t=__classPrivateFieldGet(this,o,"f")+__classPrivateFieldGet(e,o,"f");const r=__classPrivateFieldGet(this,n,"f")+__classPrivateFieldGet(e,n,"f");return new ExUnits(t,r)}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionId:()=>GovernanceActionId});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class GovernanceActionId{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new i.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new GovernanceActionId(o.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{actionIndex:Number(__classPrivateFieldGet(this,c,"f")),id:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){return __classPrivateFieldGet(this,c,"f")===__classPrivateFieldGet(e,c,"f")&&__classPrivateFieldGet(this,d,"f")===__classPrivateFieldGet(e,d,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js":(e,t,r)=>{"use strict";r.d(t,{Hash:()=>Hash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;class Hash{toCbor(){const e=new s.CborWriter;e.writeByteString(o.from(__classPrivateFieldGet(this,n,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);return new Hash(i.HexBlob.fromBytes(t.readByteString()))}toCore(){return __classPrivateFieldGet(this,n,"f")}static fromCore(e){return new Hash(e)}value(){return __classPrivateFieldGet(this,n,"f")}constructor(e){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f")}}n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolVersion:()=>ProtocolVersion});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;const c=2;class ProtocolVersion{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,o,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new i.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readInt());const o=Number(t.readInt());t.readEndArray();const n=new ProtocolVersion(s,o);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{major:Number(__classPrivateFieldGet(this,o,"f")),minor:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return __classPrivateFieldGet(this,o,"f")}setMajor(e){__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}minor(){return __classPrivateFieldGet(this,n,"f")}setMinor(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js":(e,t,r)=>{"use strict";r.d(t,{UnitInterval:()=>UnitInterval});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/fraction.js/fraction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new n(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeTag(a.CborTag.RationalNumber);e.writeStartArray(u);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);if(t.readTag()!==a.CborTag.RationalNumber)throw new o.InvalidArgumentError("cbor",`Expected tag ${a.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==u)throw new o.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readInt();const n=t.readInt();t.readEndArray();const d=new UnitInterval(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{denominator:Number(__classPrivateFieldGet(this,c,"f")),numerator:Number(__classPrivateFieldGet(this,d,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return __classPrivateFieldGet(this,d,"f")}setNumerator(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}denominator(){return __classPrivateFieldGet(this,c,"f")}setDenominator(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}toFloat(){return Number(__classPrivateFieldGet(this,d,"f"))/Number(__classPrivateFieldGet(this,c,"f"))}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js":(e,t,r)=>{"use strict";r.d(t,{ConstrPlutusData:()=>ConstrPlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=102n;const u=7n;class ConstrPlutusData{toCbor(){const e=new s.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(__classPrivateFieldGet(this,d,"f"));e.writeTag(Number(t));if(t!==l)e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()))}return i.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new a.CborReader(e);const r=t.readTag();if(r===Number(l)){t.readStartArray();const s=t.readInt();const n=t.readEncodedValue();const d=o.PlutusList.fromCbor(i.HexBlob.fromBytes(n));t.readEndArray();return new ConstrPlutusData(s,d)}const c=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const u=t.readEncodedValue();const f=o.PlutusList.fromCbor(i.HexBlob.fromBytes(u));return new ConstrPlutusData(c,f)}getAlternative(){return __classPrivateFieldGet(this,d,"f")}getData(){return __classPrivateFieldGet(this,c,"f")}equals(e){if(__classPrivateFieldGet(this,d,"f")!==__classPrivateFieldGet(e,d,"f"))return false;return __classPrivateFieldGet(this,c,"f").equals(__classPrivateFieldGet(e,c,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+u;return l}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-u+e;return l}constructor(e,t){d.set(this,0n);c.set(this,new o.PlutusList);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js":(e,t,r)=>{"use strict";r.d(t,{PlutusData:()=>PlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var a=r("../../node_modules/blake2b-no-wasm/index.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var y=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var _,w,g,b,P,S,C;const k=0xffffffffffffffffn;const j=new Uint8Array([95]);const x=64;const T=32;const E=BigInt(-1);class PlutusData{toCbor(){if(__classPrivateFieldGet(this,C,"f"))return __classPrivateFieldGet(this,C,"f");let e;switch(__classPrivateFieldGet(this,S,"f")){case h.PlutusDataKind.ConstrPlutusData:e=__classPrivateFieldGet(this,P,"f").toCbor();break;case h.PlutusDataKind.Map:e=__classPrivateFieldGet(this,_,"f").toCbor();break;case h.PlutusDataKind.List:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case h.PlutusDataKind.Bytes:{const t=new o.CborWriter;if(__classPrivateFieldGet(this,b,"f").length<=x)t.writeByteString(__classPrivateFieldGet(this,b,"f"));else{t.writeEncodedValue(j);for(let r=0;r<__classPrivateFieldGet(this,b,"f").length;r+=x){const s=__classPrivateFieldGet(this,b,"f").slice(r,r+x);t.writeByteString(s)}t.writeEndArray()}e=(0,v.bytesToHex)(t.encode());break}case h.PlutusDataKind.Integer:{const a=new o.CborWriter;if(__classPrivateFieldGet(this,g,"f")>=0&&__classPrivateFieldGet(this,g,"f")<=k||__classPrivateFieldGet(this,g,"f")<0&&__classPrivateFieldGet(this,g,"f")>=-1n-k)a.writeInt(__classPrivateFieldGet(this,g,"f"));else{const i=PlutusData.bigintToBuffer(__classPrivateFieldGet(this,g,"f"));a.writeTag(__classPrivateFieldGet(this,g,"f")<0?n.CborTag.NegativeBigNum:n.CborTag.UnsignedBigNum);if(i.length<=x)a.writeByteString(i);else{a.writeEncodedValue(j);for(let d=0;d<i.length;d+=x){const c=i.slice(d,d+x);a.writeByteString(c)}a.writeEndArray()}}e=(0,v.bytesToHex)(a.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new d.CborReader(e);const s=r.peekState();switch(s){case c.CborReaderState.Tag:{const a=r.peekTag();switch(a){case n.CborTag.UnsignedBigNum:{r.readTag();const i=r.readByteString();__classPrivateFieldSet(t,g,PlutusData.bufferToBigint(i),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Integer,"f");break}case n.CborTag.NegativeBigNum:{r.readTag();const o=r.readByteString();__classPrivateFieldSet(t,g,PlutusData.bufferToBigint(o)*-1n,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Integer,"f");break}default:__classPrivateFieldSet(t,P,l.ConstrPlutusData.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.ConstrPlutusData,"f")}break}case c.CborReaderState.NegativeInteger:case c.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,g,r.readInt(),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Integer,"f");break;case c.CborReaderState.StartIndefiniteLengthByteString:case c.CborReaderState.ByteString:__classPrivateFieldSet(t,b,r.readByteString(),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Bytes,"f");break;case c.CborReaderState.StartArray:__classPrivateFieldSet(t,w,m.PlutusList.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.List,"f");break;case c.CborReaderState.StartMap:__classPrivateFieldSet(t,_,p.PlutusMap.fromCbor(u.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,C,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,S,"f")){case h.PlutusDataKind.Bytes:return __classPrivateFieldGet(this,b,"f");case h.PlutusDataKind.ConstrPlutusData:{const e=__classPrivateFieldGet(this,P,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case h.PlutusDataKind.Integer:return __classPrivateFieldGet(this,g,"f");case h.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(__classPrivateFieldGet(this,w,"f"));case h.PlutusDataKind.Map:{const t=__classPrivateFieldGet(this,_,"f");const r=new Map;const s=t.getKeys();for(let a=0;a<s.getLength();a++){const i=s.get(a);r.set(i.toCore(),t.get(i).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new f.NotImplementedError(`PlutusData mapping for kind ${__classPrivateFieldGet(this,S,"f")}`)}}hash(){const e=a(T).update(y.from(this.toCbor(),"hex")).digest();return i.Hash32ByteBase16(u.HexBlob.fromBytes(e))}static fromCore(e){if(s.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(s.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(s.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(s.isPlutusMap(e)){const t=new p.PlutusMap;for(const[r,a]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(a));return PlutusData.newMap(t)}if(s.isConstrPlutusData(e)){const i=e.constructor;const o=new l.ConstrPlutusData(i,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(o)}throw new f.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;__classPrivateFieldSet(t,P,e,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;__classPrivateFieldSet(t,g,e,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;__classPrivateFieldSet(t,b,e,"f");__classPrivateFieldSet(t,S,h.PlutusDataKind.Bytes,"f");return t}getKind(){return __classPrivateFieldGet(this,S,"f")}asConstrPlutusData(){return __classPrivateFieldGet(this,P,"f")}asMap(){return __classPrivateFieldGet(this,_,"f")}asList(){return __classPrivateFieldGet(this,w,"f")}asInteger(){return __classPrivateFieldGet(this,g,"f")}asBoundedBytes(){return __classPrivateFieldGet(this,b,"f")}equals(e){switch(__classPrivateFieldGet(this,S,"f")){case h.PlutusDataKind.Bytes:if(__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(e,b,"f")){return __classPrivateFieldGet(this,b,"f").length===__classPrivateFieldGet(e,b,"f").length&&__classPrivateFieldGet(this,b,"f").every((t,r)=>t===__classPrivateFieldGet(e,b,"f")[r])}return false;case h.PlutusDataKind.Integer:return __classPrivateFieldGet(this,g,"f")===__classPrivateFieldGet(e,g,"f");case h.PlutusDataKind.ConstrPlutusData:if(__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(e,P,"f")){return __classPrivateFieldGet(this,P,"f").equals(__classPrivateFieldGet(e,P,"f"))}return false;case h.PlutusDataKind.List:if(__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(e,w,"f")){return __classPrivateFieldGet(this,w,"f").equals(__classPrivateFieldGet(e,w,"f"))}return false;case h.PlutusDataKind.Map:if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(e,_,"f")){return __classPrivateFieldGet(this,_,"f").equals(__classPrivateFieldGet(e,_,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new m.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+E;let t=e.toString(16);if(t.length%2)t=`0${t}`;return y.from(t,"hex")}constructor(){_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,h.PlutusDataKind.ConstrPlutusData);C.set(this,void 0)}}_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js":(e,t,r)=>{"use strict";r.d(t,{PlutusDataKind:()=>s});var s;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js":(e,t,r)=>{"use strict";r.d(t,{PlutusList:()=>PlutusList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;class PlutusList{toCbor(){const e=new s.CborWriter;const t=__classPrivateFieldGet(this,c,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const r of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new a.CborReader(e);r.readStartArray();while(r.peekState()!==i.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array)}}c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js":(e,t,r)=>{"use strict";r.d(t,{PlutusMap:()=>PlutusMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var l,u;class PlutusMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new a.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==i.CborReaderState.EndMap){const o=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const d=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(o,d)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new d.PlutusList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js":(e,t,r)=>{"use strict";r.d(t,{NativeScript:()=>NativeScript});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,y,_,w,g,b,P,S;const C=28;class NativeScript{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");let e;switch(__classPrivateFieldGet(this,P,"f")){case d.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case d.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,v,"f").toCbor();break;case d.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,y,"f").toCbor();break;case d.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,_,"f").toCbor();break;case d.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,b,"f").toCbor();break;case d.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,g,"f").toCbor();break;default:throw new o.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,P,"f")}`)}return e}static fromCbor(e){let t;const r=new i.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case d.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(f.ScriptPubkey.fromCbor(e));break;case d.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(c.ScriptAll.fromCbor(e));break;case d.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(l.ScriptAny.fromCbor(e));break;case d.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(u.ScriptNOfK.fromCbor(e));break;case d.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(m.TimelockStart.fromCbor(e));break;case d.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(h.TimelockExpiry.fromCbor(e));break;default:throw new o.InvalidStateError(`Unexpected kind value: ${s}`)}__classPrivateFieldSet(t,S,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,P,"f")){case d.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,w,"f").toCore();break;case d.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,v,"f").toCore();break;case d.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,y,"f").toCore();break;case d.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,_,"f").toCore();break;case d.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,b,"f").toCore();break;case d.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,g,"f").toCore();break;default:throw new o.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,P,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case d.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(f.ScriptPubkey.fromCore(e));break;case d.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(c.ScriptAll.fromCore(e));break;case d.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(l.ScriptAny.fromCore(e));break;case d.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(u.ScriptNOfK.fromCore(e));break;case d.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(m.TimelockStart.fromCore(e));break;case d.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(h.TimelockExpiry.fromCore(e));break;default:throw new o.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;const t=s(C).update(p.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}kind(){return __classPrivateFieldGet(this,P,"f")}static newScriptPubkey(e){const t=new NativeScript;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;__classPrivateFieldSet(t,b,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;__classPrivateFieldSet(t,g,e,"f");__classPrivateFieldSet(t,P,d.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return __classPrivateFieldGet(this,w,"f")}asScriptAll(){return __classPrivateFieldGet(this,v,"f")}asScriptAny(){return __classPrivateFieldGet(this,y,"f")}asScriptNOfK(){return __classPrivateFieldGet(this,_,"f")}asTimelockStart(){return __classPrivateFieldGet(this,b,"f")}asTimelockExpiry(){return __classPrivateFieldGet(this,g,"f")}constructor(){v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0)}}v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAll:()=>ScriptAll});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class ScriptAll{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(c.NativeScriptKind.RequireAllOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAllOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAll(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAllOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAny:()=>ScriptAny});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class ScriptAny{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(c.NativeScriptKind.RequireAnyOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAnyOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAny(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAnyOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js":(e,t,r)=>{"use strict";r.d(t,{ScriptNOfK:()=>ScriptNOfK});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=3;class ScriptNOfK{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(c.NativeScriptKind.RequireNOf);e.writeInt(__classPrivateFieldGet(this,f,"f"));e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==m)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireNOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireNOf}, but got kind ${s}`);const l=t.readInt();const u=new Array;t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray)u.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const f=new ScriptNOfK(u,Number(l));__classPrivateFieldSet(f,h,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireNOf,required:__classPrivateFieldGet(this,f,"f"),scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>d.NativeScript.fromCore(e)),e.required)}required(){return __classPrivateFieldGet(this,f,"f")}setRequired(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js":(e,t,r)=>{"use strict";r.d(t,{ScriptPubkey:()=>ScriptPubkey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=2;class ScriptPubkey{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(d.NativeScriptKind.RequireSignature);e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.NativeScriptKind.RequireSignature)throw new o.InvalidArgumentError("cbor",`Expected kind ${d.NativeScriptKind.RequireSignature}, but got kind ${a}`);const c=s.Ed25519KeyHashHex(n.HexBlob.fromBytes(t.readByteString()));const l=new ScriptPubkey(c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__type:d.ScriptType.Native,keyHash:__classPrivateFieldGet(this,l,"f"),kind:d.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return __classPrivateFieldGet(this,l,"f")}setKeyHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js":(e,t,r)=>{"use strict";r.d(t,{TimelockExpiry:()=>TimelockExpiry});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockExpiry{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(o.NativeScriptKind.RequireTimeBefore);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==o.NativeScriptKind.RequireTimeBefore)throw new i.InvalidArgumentError("cbor",`Expected kind ${o.NativeScriptKind.RequireTimeBefore}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockExpiry(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:o.ScriptType.Native,kind:o.NativeScriptKind.RequireTimeBefore,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js":(e,t,r)=>{"use strict";r.d(t,{TimelockStart:()=>TimelockStart});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockStart{toCbor(){if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");const e=new s.CborWriter;e.writeStartArray(l);e.writeInt(o.NativeScriptKind.RequireTimeAfter);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==l)throw new i.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==o.NativeScriptKind.RequireTimeAfter)throw new i.InvalidArgumentError("cbor",`Expected kind ${o.NativeScriptKind.RequireTimeAfter}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockStart(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:o.ScriptType.Native,kind:o.NativeScriptKind.RequireTimeAfter,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV1Script:()=>PlutusV1Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=28;class PlutusV1Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new i.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V1)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;const t=s(h).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV2Script:()=>PlutusV2Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=28;class PlutusV2Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new i.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V2)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;const t=s(h).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV3Script:()=>PlutusV3Script});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=28;class PlutusV3Script{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new i.CborWriter;e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(n.HexBlob.fromBytes(r));__classPrivateFieldSet(s,f,e,"f");return s}toCore(){return{__type:c.ScriptType.Plutus,bytes:this.rawBytes(),version:c.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==c.PlutusLanguageVersion.V3)throw new d.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;const t=s(h).update(l.from(e,"hex")).digest();return a.Hash28ByteBase16(n.HexBlob.fromBytes(t))}rawBytes(){return __classPrivateFieldGet(this,u,"f")}setRawBytes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js":(e,t,r)=>{"use strict";r.d(t,{Script:()=>Script});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var f;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(f||(f={}));var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var m,p,v,y,_,w;const g=2;class Script{toCbor(){if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");const e=new s.CborWriter;let t;switch(__classPrivateFieldGet(this,_,"f")){case f.Native:t=__classPrivateFieldGet(this,m,"f").toCbor();break;case f.PlutusV1:t=__classPrivateFieldGet(this,p,"f").toCbor();break;case f.PlutusV2:t=__classPrivateFieldGet(this,v,"f").toCbor();break;case f.PlutusV3:t=__classPrivateFieldGet(this,y,"f").toCbor();break;default:throw new i.InvalidStateError(`Unexpected language value: ${__classPrivateFieldGet(this,_,"f")}`)}e.writeStartArray(g);e.writeInt(__classPrivateFieldGet(this,_,"f"));e.writeEncodedValue(h.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new a.CborReader(e);r.readStartArray();const s=Number(r.readInt());const d=o.HexBlob.fromBytes(r.readEncodedValue());switch(s){case f.Native:t=Script.newNativeScript(n.NativeScript.fromCbor(d));break;case f.PlutusV1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCbor(d));break;case f.PlutusV2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCbor(d));break;case f.PlutusV3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCbor(d));break;default:throw new i.InvalidStateError(`Unexpected language value: ${s}`)}__classPrivateFieldSet(t,w,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,_,"f")){case f.Native:e=__classPrivateFieldGet(this,m,"f").toCore();break;case f.PlutusV1:e=__classPrivateFieldGet(this,p,"f").toCore();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").toCore();break;case f.PlutusV3:e=__classPrivateFieldGet(this,y,"f").toCore();break;default:throw new i.InvalidStateError(`Unexpected language: ${__classPrivateFieldGet(this,_,"f")}`)}return e}static fromCore(e){let t;if((0,d.isNativeScript)(e))t=Script.newNativeScript(n.NativeScript.fromCore(e));else{switch(e.version){case d.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCore(e));break;case d.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCore(e));break;case d.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCore(e));break;default:throw new i.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return __classPrivateFieldGet(this,_,"f")}static newNativeScript(e){const t=new Script;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,_,f.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,_,f.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,_,f.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,_,f.PlutusV3,"f");return t}asNative(){return __classPrivateFieldGet(this,m,"f")}asPlutusV1(){return __classPrivateFieldGet(this,p,"f")}asPlutusV2(){return __classPrivateFieldGet(this,v,"f")}asPlutusV3(){return __classPrivateFieldGet(this,y,"f")}hash(){let e;switch(__classPrivateFieldGet(this,_,"f")){case f.Native:e=__classPrivateFieldGet(this,m,"f").hash();break;case f.PlutusV1:e=__classPrivateFieldGet(this,p,"f").hash();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").hash();break;case f.PlutusV3:e=__classPrivateFieldGet(this,y,"f").hash();break;default:throw new i.InvalidStateError(`Unexpected script language ${__classPrivateFieldGet(this,_,"f")}`)}return e}constructor(){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0)}}m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{Transaction:()=>Transaction,TxBodyCBOR:()=>TxBodyCBOR,TxCBOR:()=>TxCBOR,deserializeTx:()=>deserializeTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v;const y=4;class Transaction{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(y);e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor()));e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));e.writeBoolean(__classPrivateFieldGet(this,p,"f"));if(__classPrivateFieldGet(this,m,"f"))e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();const a=t.readEncodedValue();const l=d.TransactionBody.fromCbor(n.HexBlob.fromBytes(a));const u=c.TransactionWitnessSet.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));let f=true;if(r===y)f=t.readBoolean();let h;if(t.peekState()!==o.CborReaderState.Null)h=s.AuxiliaryData.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const m=new Transaction(l,u,h);__classPrivateFieldSet(m,p,f,"f");__classPrivateFieldSet(m,v,e,"f");return m}toCore(){const e={body:__classPrivateFieldGet(this,f,"f").toCore(),id:this.getId(),isValid:__classPrivateFieldGet(this,p,"f"),witness:__classPrivateFieldGet(this,h,"f").toCore()};if(__classPrivateFieldGet(this,m,"f"))e.auxiliaryData=__classPrivateFieldGet(this,m,"f").toCore();return e}static fromCore(e){const t=new Transaction(d.TransactionBody.fromCore(e.body),c.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?s.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return d.TransactionBody.fromCbor(__classPrivateFieldGet(this,f,"f").toCbor())}setBody(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}witnessSet(){return c.TransactionWitnessSet.fromCbor(__classPrivateFieldGet(this,h,"f").toCbor())}setWitnessSet(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}isValid(){return __classPrivateFieldGet(this,p,"f")}setIsValid(e){__classPrivateFieldSet(this,v,void 0,"f");__classPrivateFieldSet(this,p,e,"f")}auxiliaryData(){if(__classPrivateFieldGet(this,m,"f")){return s.AuxiliaryData.fromCbor(__classPrivateFieldGet(this,m,"f").toCbor())}return}setAuxiliaryData(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}getId(){return __classPrivateFieldGet(this,f,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,true);v.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,t,"f");__classPrivateFieldSet(this,m,r,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap;const TxCBOR=e=>(0,n.HexBlob)(e);TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,n.HexBlob)(e);TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();const deserializeTx=e=>{const t=e instanceof u?e.toString("hex"):e instanceof Uint8Array?u.from(e).toString("hex"):e;const r=Transaction.fromCbor(TxCBOR(t));return r.toCore()};TxCBOR.deserialize=e=>deserializeTx(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js":(e,t,r)=>{"use strict";r.d(t,{Constitution:()=>Constitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Constitution{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor()));__classPrivateFieldGet(this,u,"f")?e.writeByteString((0,c.hexToBytes)(__classPrivateFieldGet(this,u,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new n.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=s.Anchor.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));let c;if(t.peekState()===o.CborReaderState.Null)t.readNull();else c=d.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new Constitution(a,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f").toCore(),scriptHash:__classPrivateFieldGet(this,u,"f")?__classPrivateFieldGet(this,u,"f"):null}}static fromCore(e){return new Constitution(s.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}scriptHash(){return __classPrivateFieldGet(this,u,"f")}setScriptHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionKind:()=>s});var s;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":(e,t,r)=>{"use strict";r.d(t,{HardForkInitiationAction:()=>HardForkInitiationAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class HardForkInitiationAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(n.GovernanceActionKind.HardForkInitiation);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.HardForkInitiation)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.HardForkInitiation} but got ${s}`);let d;if(t.peekState()===i.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolVersion.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const h=new HardForkInitiationAction(f,d);__classPrivateFieldSet(h,p,e,"f");return h}toCore(){return{__typename:d.GovernanceActionType.hard_fork_initiation_action,governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,protocolVersion:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(u.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}protocolVersion(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":(e,t,r)=>{"use strict";r.d(t,{InfoAction:()=>InfoAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d;const c=1;class InfoAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(i.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==i.GovernanceActionKind.Info)throw new n.InvalidArgumentError("cbor",`Expected action kind, expected ${i.GovernanceActionKind.Info} but got ${s}`);const o=new InfoAction;__classPrivateFieldSet(o,d,e,"f");return o}toCore(){return{__typename:o.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){d.set(this,void 0)}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":(e,t,r)=>{"use strict";r.d(t,{NewConstitution:()=>NewConstitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class NewConstitution{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(d.GovernanceActionKind.NewConstitution);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==v)throw new l.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.NewConstitution)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.NewConstitution} but got ${s}`);let c;if(t.peekState()===i.CborReaderState.Null)t.readNull();else c=n.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const f=o.Constitution.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const h=new NewConstitution(f,c);__classPrivateFieldSet(h,p,e,"f");return h}toCore(){return{__typename:c.GovernanceActionType.new_constitution,constitution:__classPrivateFieldGet(this,h,"f").toCore(),governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null}}static fromCore(e){return new NewConstitution(o.Constitution.fromCore(e.constitution),null!==e.governanceActionId?n.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}constitution(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":(e,t,r)=>{"use strict";r.d(t,{NoConfidence:()=>NoConfidence});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h;const m=2;class NoConfidence{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(n.GovernanceActionKind.NoConfidence);__classPrivateFieldGet(this,f,"f")?e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==m)throw new c.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.NoConfidence)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.NoConfidence}  but got ${s}`);let d;if(t.peekState()===i.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const u=new NoConfidence(d);__classPrivateFieldSet(u,h,e,"f");return u}toCore(){return{__typename:d.GovernanceActionType.no_confidence,governanceActionId:__classPrivateFieldGet(this,f,"f")?__classPrivateFieldGet(this,f,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,f,"f")}constructor(e){f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,f,e,"f")}}f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":(e,t,r)=>{"use strict";r.d(t,{ParameterChangeAction:()=>ParameterChangeAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p,v;const y=4;class ParameterChangeAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(y);e.writeInt(n.GovernanceActionKind.ParameterChange);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));__classPrivateFieldGet(this,p,"f")?e.writeByteString((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==y)throw new c.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.ParameterChange)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.ParameterChange} but got ${s}`);let d;if(t.peekState()===i.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolParamUpdate.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let h;if(t.peekState()===i.CborReaderState.Null)t.readNull();else h=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new ParameterChangeAction(f,d,h);__classPrivateFieldSet(m,v,e,"f");return m}toCore(){return{__typename:d.GovernanceActionType.parameter_change_action,governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,policyHash:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f"):null,protocolParamUpdate:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(u.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}protocolParamUpdate(){return __classPrivateFieldGet(this,h,"f")}policyHash(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,p,r,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":(e,t,r)=>{"use strict";r.d(t,{ProposalProcedure:()=>ProposalProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var b=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var P,S,C,k,j,x,T,E,A,I,B,F;const M=4;class ProposalProcedure{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,F,"f"))return __classPrivateFieldGet(this,F,"f");let t;switch(__classPrivateFieldGet(this,E,"f")){case d.GovernanceActionKind.ParameterChange:t=__classPrivateFieldGet(this,P,"f").toCbor();break;case d.GovernanceActionKind.HardForkInitiation:t=__classPrivateFieldGet(this,S,"f").toCbor();break;case d.GovernanceActionKind.TreasuryWithdrawals:t=__classPrivateFieldGet(this,C,"f").toCbor();break;case d.GovernanceActionKind.NoConfidence:t=__classPrivateFieldGet(this,k,"f").toCbor();break;case d.GovernanceActionKind.UpdateCommittee:t=__classPrivateFieldGet(this,j,"f").toCbor();break;case d.GovernanceActionKind.NewConstitution:t=__classPrivateFieldGet(this,x,"f").toCbor();break;case d.GovernanceActionKind.Info:t=__classPrivateFieldGet(this,T,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,E,"f")}`)}e.writeStartArray(M);e.writeInt(__classPrivateFieldGet(this,A,"f"));const r=s.RewardAddress.fromAddress(a.Address.fromBech32(__classPrivateFieldGet(this,I,"f")));if(!r){throw new y.SerializationError(y.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${__classPrivateFieldGet(this,I,"f")}`)}e.writeByteString(b.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,g.hexToBytes)(t));e.writeEncodedValue((0,g.hexToBytes)(__classPrivateFieldGet(this,B,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new n.CborReader(e);r.readStartArray();const s=r.readInt();const o=a.Address.fromBytes(f.HexBlob.fromBytes(r.readByteString())).toBech32();const c=f.HexBlob.fromBytes(r.readEncodedValue());const y=i.Anchor.fromCbor(f.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const g=new n.CborReader(c);g.readStartArray();let b;const P=Number(g.readInt());switch(P){case d.GovernanceActionKind.ParameterChange:b=v.ParameterChangeAction.fromCbor(c);t=ProposalProcedure.newParameterChangeAction(s,o,y,b);break;case d.GovernanceActionKind.HardForkInitiation:b=l.HardForkInitiationAction.fromCbor(c);t=ProposalProcedure.newHardForkInitiationAction(s,o,y,b);break;case d.GovernanceActionKind.TreasuryWithdrawals:b=_.TreasuryWithdrawalsAction.fromCbor(c);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,o,y,b);break;case d.GovernanceActionKind.NoConfidence:b=p.NoConfidence.fromCbor(c);t=ProposalProcedure.newNoConfidence(s,o,y,b);break;case d.GovernanceActionKind.UpdateCommittee:b=w.UpdateCommittee.fromCbor(c);t=ProposalProcedure.newUpdateCommittee(s,o,y,b);break;case d.GovernanceActionKind.NewConstitution:b=m.NewConstitution.fromCbor(c);t=ProposalProcedure.newNewConstitution(s,o,y,b);break;case d.GovernanceActionKind.Info:b=h.InfoAction.fromCbor(c);t=ProposalProcedure.newInfoAction(s,o,y,b);break;default:throw new u.InvalidStateError(`Unexpected kind value: ${P}`)}__classPrivateFieldSet(t,F,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,E,"f")){case d.GovernanceActionKind.ParameterChange:e=__classPrivateFieldGet(this,P,"f").toCore();break;case d.GovernanceActionKind.HardForkInitiation:e=__classPrivateFieldGet(this,S,"f").toCore();break;case d.GovernanceActionKind.TreasuryWithdrawals:e=__classPrivateFieldGet(this,C,"f").toCore();break;case d.GovernanceActionKind.NoConfidence:e=__classPrivateFieldGet(this,k,"f").toCore();break;case d.GovernanceActionKind.UpdateCommittee:e=__classPrivateFieldGet(this,j,"f").toCore();break;case d.GovernanceActionKind.NewConstitution:e=__classPrivateFieldGet(this,x,"f").toCore();break;case d.GovernanceActionKind.Info:e=__classPrivateFieldGet(this,T,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,E,"f")}`)}return{anchor:__classPrivateFieldGet(this,B,"f").toCore(),deposit:__classPrivateFieldGet(this,A,"f"),governanceAction:e,rewardAccount:__classPrivateFieldGet(this,I,"f")}}static fromCore(e){let t;let r;const s=i.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case c.GovernanceActionType.parameter_change_action:t=v.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.hard_fork_initiation_action:t=l.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.treasury_withdrawals_action:t=_.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.no_confidence:t=p.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.update_committee:t=w.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.new_constitution:t=m.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.info_action:t=h.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new u.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.ParameterChange,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,P,s,"f");return a}static newHardForkInitiationAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.HardForkInitiation,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,S,s,"f");return a}static newTreasuryWithdrawalsAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.TreasuryWithdrawals,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,C,s,"f");return a}static newNoConfidence(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.NoConfidence,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,k,s,"f");return a}static newUpdateCommittee(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.UpdateCommittee,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,j,s,"f");return a}static newNewConstitution(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.NewConstitution,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,x,s,"f");return a}static newInfoAction(e,t,r,s){const a=new ProposalProcedure;__classPrivateFieldSet(a,E,d.GovernanceActionKind.Info,"f");__classPrivateFieldSet(a,A,e,"f");__classPrivateFieldSet(a,I,t,"f");__classPrivateFieldSet(a,B,r,"f");__classPrivateFieldSet(a,T,s,"f");return a}kind(){return __classPrivateFieldGet(this,E,"f")}deposit(){return __classPrivateFieldGet(this,A,"f")}rewardAccount(){return __classPrivateFieldGet(this,I,"f")}anchor(){return __classPrivateFieldGet(this,B,"f")}getParameterChangeAction(){return __classPrivateFieldGet(this,P,"f")}getHardForkInitiationAction(){return __classPrivateFieldGet(this,S,"f")}getTreasuryWithdrawalsAction(){return __classPrivateFieldGet(this,C,"f")}getNoConfidence(){return __classPrivateFieldGet(this,k,"f")}getUpdateCommittee(){return __classPrivateFieldGet(this,j,"f")}getNewConstitution(){return __classPrivateFieldGet(this,x,"f")}getInfoAction(){return __classPrivateFieldGet(this,T,"f")}constructor(){P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0)}}P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":(e,t,r)=>{"use strict";r.d(t,{TreasuryWithdrawalsAction:()=>TreasuryWithdrawalsAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,v,y;const _=3;class TreasuryWithdrawalsAction{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");e.writeStartArray(_);e.writeInt(d.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...__classPrivateFieldGet(this,p,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,o]of t){const n=s.RewardAddress.fromAddress(a.Address.fromBech32(r));if(!n){throw new f.SerializationError(f.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(m.from(n.toAddress().toBytes(),"hex"));e.writeInt(o)}__classPrivateFieldGet(this,v,"f")?e.writeByteString((0,h.hexToBytes)(__classPrivateFieldGet(this,v,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.TreasuryWithdrawals)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const i=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const c=a.Address.fromBytes(u.HexBlob.fromBytes(t.readByteString())).toBech32();const f=t.readInt();i.set(c,f)}t.readEndMap();let h;if(t.peekState()===n.CborReaderState.Null)t.readNull();else h=u.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new TreasuryWithdrawalsAction(i,h);__classPrivateFieldSet(m,y,e,"f");return m}toCore(){const e=new Set([...__classPrivateFieldGet(this,p,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:c.GovernanceActionType.treasury_withdrawals_action,policyHash:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return __classPrivateFieldGet(this,p,"f")}policyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t){p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,v,t,"f")}}p=new WeakMap,v=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":(e,t,r)=>{"use strict";r.d(t,{UpdateCommittee:()=>UpdateCommittee});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,y,_,w,g;const b=5;const P=2;const S=0;const C=1;class UpdateCommittee{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");e.writeStartArray(b);e.writeInt(f.GovernanceActionKind.UpdateCommittee);__classPrivateFieldGet(this,v,"f")?e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));e.writeStartMap(__classPrivateFieldGet(this,_,"f").length);for(const t of __classPrivateFieldGet(this,_,"f")){e.writeStartArray(P);e.writeInt(t[S].type);e.writeByteString((0,p.hexToBytes)(t[S].hash));e.writeInt(t[C])}e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,w,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==b)throw new h.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==f.GovernanceActionKind.UpdateCommittee)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${f.GovernanceActionKind.UpdateCommittee} but got ${s}`);let c;if(t.peekState()===i.CborReaderState.Null)t.readNull();else c=u.GovernanceActionId.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()));const l=o.CborSet.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()),n.Credential.fromCbor);t.readStartMap();const p=[];while(t.peekState()!==i.CborReaderState.EndMap){if(t.readStartArray()!==P)throw new h.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const v=Number(t.readUInt());const y=m.HexBlob.fromBytes(t.readByteString());t.readEndArray();const _=Number(t.readUInt());p.push([{hash:y,type:v},_])}t.readEndMap();const w=d.UnitInterval.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()));const S=new UpdateCommittee(l,p,w,c);__classPrivateFieldSet(S,g,e,"f");return S}toCore(){return{__typename:c.GovernanceActionType.update_committee,governanceActionId:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,membersToBeAdded:new Set(__classPrivateFieldGet(this,_,"f").map(e=>({coldCredential:e[S],epoch:(0,l.EpochNo)(e[C])}))),membersToBeRemoved:new Set(__classPrivateFieldGet(this,y,"f").toCore()),newQuorumThreshold:__classPrivateFieldGet(this,w,"f").toCore()}}static fromCore(e){return new UpdateCommittee(o.CborSet.fromCore([...e.membersToBeRemoved],n.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),d.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?u.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,v,"f")}membersToBeRemoved(){return __classPrivateFieldGet(this,y,"f").toCore()}membersToBeAdded(){return __classPrivateFieldGet(this,_,"f")}newQuorum(){return __classPrivateFieldGet(this,w,"f")}constructor(e,t,r,s){v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,_,t,"f");__classPrivateFieldSet(this,w,r,"f");__classPrivateFieldSet(this,v,s,"f")}}v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js":(e,t,r)=>{"use strict";r.d(t,{TransactionBody:()=>TransactionBody});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var C=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$,L,q;class TransactionBody{toCbor(){var e;const t=new o.CborWriter;if(__classPrivateFieldGet(this,L,"f"))return __classPrivateFieldGet(this,L,"f");t.writeStartMap(__classPrivateFieldGet(this,k,"m",q).call(this));if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,j,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").length>0){t.writeInt(1n);t.writeStartArray(__classPrivateFieldGet(this,x,"f").length);for(const r of __classPrivateFieldGet(this,x,"f"))t.writeEncodedValue(C.from(r.toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")){t.writeInt(2n);t.writeInt(__classPrivateFieldGet(this,T,"f"))}if(void 0!==__classPrivateFieldGet(this,E,"f")){t.writeInt(3n);t.writeInt(__classPrivateFieldGet(this,E,"f"))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,A,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size>0){t.writeInt(5n);const s=new Map;for(const[n,d]of __classPrivateFieldGet(this,I,"f")){const c=a.RewardAddress.fromAddress(i.Address.fromBech32(n));if(!c){throw new p.SerializationError(p.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${n}`)}const l=c.toAddress().toBytes();s.set(l,d)}const u=[...s].sort((e,t)=>e>t?1:-1);t.writeStartMap(u.length);for(const[f,h]of u){t.writeByteString(C.from(f,"hex"));t.writeInt(h)}}if(void 0!==__classPrivateFieldGet(this,B,"f")){t.writeInt(6n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,B,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,F,"f")){t.writeInt(7n);t.writeByteString(C.from(__classPrivateFieldGet(this,F,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,M,"f")){t.writeInt(8n);t.writeInt(__classPrivateFieldGet(this,M,"f"))}if(void 0!==__classPrivateFieldGet(this,R,"f")&&__classPrivateFieldGet(this,R,"f").size>0){t.writeInt(9n);const m=(0,S.tokenMapToMultiAsset)(__classPrivateFieldGet(this,R,"f"));t.writeStartMap(m.size);const v=new Map([...m.entries()].sort(S.sortCanonically));for(const[y,_]of v.entries()){t.writeByteString(C.from(y,"hex"));const w=new Map([..._.entries()].sort(S.sortCanonically));t.writeStartMap(w.size);for(const[g,b]of w.entries()){t.writeByteString(C.from(g,"hex"));t.writeInt(b)}}}if(void 0!==__classPrivateFieldGet(this,D,"f")){t.writeInt(11n);t.writeByteString(C.from(__classPrivateFieldGet(this,D,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,O,"f")&&__classPrivateFieldGet(this,O,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,O,"f").toCbor()))}if((null===(e=__classPrivateFieldGet(this,G,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,G,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,G,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,N,"f")){t.writeInt(15n);t.writeInt(__classPrivateFieldGet(this,N,"f"))}if(void 0!==__classPrivateFieldGet(this,H,"f")){t.writeInt(16n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,H,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,K,"f")){t.writeInt(17n);t.writeInt(__classPrivateFieldGet(this,K,"f"))}if(void 0!==__classPrivateFieldGet(this,V,"f")&&__classPrivateFieldGet(this,V,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,V,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,W,"f")){t.writeInt(19n);t.writeEncodedValue(C.from(__classPrivateFieldGet(this,W,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,z,"f")&&__classPrivateFieldGet(this,z,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,P.hexToBytes)(__classPrivateFieldGet(this,z,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,U,"f")){t.writeInt(21n);t.writeInt(__classPrivateFieldGet(this,U,"f"))}if(void 0!==__classPrivateFieldGet(this,$,"f")){t.writeInt(22n);t.writeInt(__classPrivateFieldGet(this,$,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=l.CborSet.fromCore([],_.TransactionInput.fromCore);const s=new Array;const a=0n;const o=new TransactionBody(r,s,a);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const c=t.readInt();switch(c){case 0n:{const p=t.readEncodedValue();o.setInputs(l.CborSet.fromCbor(h.HexBlob.fromBytes(p),_.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray){o.outputs().push(w.TransactionOutput.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:o.setFee(t.readInt());break;case 3n:o.setTtl((0,v.Slot)(Number(t.readInt())));break;case 4n:o.setCerts(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),f.Certificate.fromCbor));break;case 5n:t.readStartMap();o.setWithdrawals(new Map);while(t.peekState()!==d.CborReaderState.EndMap){const y=i.Address.fromBytes(h.HexBlob.fromBytes(t.readByteString())).toBech32();const P=t.readInt();o.withdrawals().set(y,P)}t.readEndMap();break;case 6n:o.setUpdate(g.Update.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:o.setAuxiliaryDataHash(h.HexBlob.fromBytes(t.readByteString()));break;case 8n:o.setValidityStartInterval((0,v.Slot)(Number(t.readInt())));break;case 9n:{const k=new Map;t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const j=h.HexBlob.fromBytes(t.readByteString());if(!k.has(j))k.set(j,new Map);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const x=C.from(t.readByteString()).toString("hex");const T=t.readInt();k.get(j).set(x,T)}t.readEndMap()}t.readEndMap();o.setMint((0,S.multiAssetsToTokenMap)(k));break}case 11n:o.setScriptDataHash(h.HexBlob.fromBytes(t.readByteString()));break;case 13n:o.setCollateral(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),_.TransactionInput.fromCbor));break;case 14n:o.setRequiredSigners(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),u.Hash.fromCbor));break;case 15n:o.setNetworkId(Number(t.readInt()));break;case 16n:o.setCollateralReturn(w.TransactionOutput.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:o.setTotalCollateral(t.readInt());break;case 18n:o.setReferenceInputs(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),_.TransactionInput.fromCbor));break;case 19n:o.setVotingProcedures(b.VotingProcedures.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:o.setProposalProcedures(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),m.ProposalProcedure.fromCbor));break;case 21n:o.setCurrentTreasuryValue(t.readInt());break;case 22n:o.setDonation(t.readInt());break}}t.readEndMap();__classPrivateFieldSet(o,L,e,"f");return o}toCore(){var e,t,r,s,a,i;return{auxiliaryDataHash:__classPrivateFieldGet(this,F,"f"),certificates:(null===(e=__classPrivateFieldGet(this,A,"f"))||void 0===e?void 0:e.values())?__classPrivateFieldGet(this,A,"f").toCore():void 0,collateralReturn:null===(t=__classPrivateFieldGet(this,H,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=__classPrivateFieldGet(this,O,"f"))||void 0===r?void 0:r.values())?__classPrivateFieldGet(this,O,"f").toCore():void 0,donation:__classPrivateFieldGet(this,$,"f"),fee:__classPrivateFieldGet(this,T,"f"),inputs:__classPrivateFieldGet(this,j,"f").toCore(),mint:__classPrivateFieldGet(this,R,"f"),networkId:__classPrivateFieldGet(this,N,"f"),outputs:__classPrivateFieldGet(this,x,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=__classPrivateFieldGet(this,z,"f"))||void 0===s?void 0:s.values())?__classPrivateFieldGet(this,z,"f").toCore():void 0,referenceInputs:(null===(a=__classPrivateFieldGet(this,V,"f"))||void 0===a?void 0:a.size())?__classPrivateFieldGet(this,V,"f").toCore():void 0,requiredExtraSignatures:null===(i=__classPrivateFieldGet(this,G,"f"))||void 0===i?void 0:i.toCore(),scriptIntegrityHash:__classPrivateFieldGet(this,D,"f"),totalCollateral:__classPrivateFieldGet(this,K,"f"),treasuryValue:__classPrivateFieldGet(this,U,"f"),update:__classPrivateFieldGet(this,B,"f")?__classPrivateFieldGet(this,B,"f").toCore():void 0,validityInterval:__classPrivateFieldGet(this,E,"f")||void 0!==__classPrivateFieldGet(this,M,"f")?{invalidBefore:__classPrivateFieldGet(this,M,"f"),invalidHereafter:__classPrivateFieldGet(this,E,"f")}:void 0,votingProcedures:__classPrivateFieldGet(this,W,"f")?__classPrivateFieldGet(this,W,"f").toCore():void 0,withdrawals:__classPrivateFieldGet(this,I,"f")?[...__classPrivateFieldGet(this,I,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(l.CborSet.fromCore(e.inputs,_.TransactionInput.fromCore),e.outputs.map(e=>w.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(l.CborSet.fromCore(e.certificates,f.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(w.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(l.CborSet.fromCore(e.collaterals,_.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(l.CborSet.fromCore(e.referenceInputs,_.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(l.CborSet.fromCore(e.requiredExtraSignatures,u.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(g.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures(b.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(l.CborSet.fromCore(e.proposalProcedures,m.ProposalProcedure.fromCore));return t}setInputs(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}inputs(){return __classPrivateFieldGet(this,j,"f")}setOutputs(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}outputs(){return __classPrivateFieldGet(this,x,"f")}setFee(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}fee(){return __classPrivateFieldGet(this,T,"f")}setTtl(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}ttl(){return __classPrivateFieldGet(this,E,"f")}setCerts(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}certs(){return __classPrivateFieldGet(this,A,"f")}setWithdrawals(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}withdrawals(){return __classPrivateFieldGet(this,I,"f")}setUpdate(e){__classPrivateFieldSet(this,B,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}update(){return __classPrivateFieldGet(this,B,"f")}setAuxiliaryDataHash(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}auxiliaryDataHash(){return __classPrivateFieldGet(this,F,"f")}setValidityStartInterval(e){__classPrivateFieldSet(this,M,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}validityStartInterval(){return __classPrivateFieldGet(this,M,"f")}setMint(e){__classPrivateFieldSet(this,R,(0,S.multiAssetsToTokenMap)(new Map([...(0,S.tokenMapToMultiAsset)(e).entries()].sort(S.sortCanonically))),"f");__classPrivateFieldSet(this,L,void 0,"f")}mint(){return __classPrivateFieldGet(this,R,"f")}setScriptDataHash(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}scriptDataHash(){return __classPrivateFieldGet(this,D,"f")}setCollateral(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}collateral(){return __classPrivateFieldGet(this,O,"f")}setRequiredSigners(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}requiredSigners(){return __classPrivateFieldGet(this,G,"f")}setNetworkId(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}networkId(){return __classPrivateFieldGet(this,N,"f")}setCollateralReturn(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}collateralReturn(){return __classPrivateFieldGet(this,H,"f")}setTotalCollateral(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}totalCollateral(){return __classPrivateFieldGet(this,K,"f")}setReferenceInputs(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}referenceInputs(){return __classPrivateFieldGet(this,V,"f")}setVotingProcedures(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}votingProcedures(){return __classPrivateFieldGet(this,W,"f")}setProposalProcedures(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}proposalProcedures(){return __classPrivateFieldGet(this,z,"f")}setCurrentTreasuryValue(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}currentTreasuryValue(){return __classPrivateFieldGet(this,U,"f")}setDonation(e){__classPrivateFieldSet(this,$,e,"f");__classPrivateFieldSet(this,L,void 0,"f")}donation(){return __classPrivateFieldGet(this,$,"f")}hash(){const e=s(s.BYTES).update((0,P.hexToBytes)(this.toCbor())).digest();return y.TransactionId.fromHexBlob(h.HexBlob.fromBytes(e))}hasTaggedSets(){const e=new n.CborReader(__classPrivateFieldGet(this,j,"f").toCbor());return e.peekState()===d.CborReaderState.Tag&&e.peekTag()===c.CborTag.Set}hasBabbageOutput(){if(0===__classPrivateFieldGet(this,x,"f").length)return false;const e=new n.CborReader(__classPrivateFieldGet(this,x,"f")[0].toCbor());return e.peekState()===d.CborReaderState.StartMap}constructor(e,t,r,s){k.add(this);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);L.set(this,void 0);__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,x,t,"f");__classPrivateFieldSet(this,T,r,"f");__classPrivateFieldSet(this,E,s,"f")}}j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,L=new WeakMap,k=new WeakSet,q=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").length>0)++t;if(void 0!==__classPrivateFieldGet(this,T,"f"))++t;if(void 0!==__classPrivateFieldGet(this,E,"f"))++t;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,I,"f")&&__classPrivateFieldGet(this,I,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,B,"f"))++t;if(void 0!==__classPrivateFieldGet(this,F,"f"))++t;if(void 0!==__classPrivateFieldGet(this,M,"f"))++t;if(void 0!==__classPrivateFieldGet(this,R,"f")&&__classPrivateFieldGet(this,R,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,D,"f"))++t;if(void 0!==__classPrivateFieldGet(this,O,"f")&&__classPrivateFieldGet(this,O,"f").size()>0)++t;if((null===(e=__classPrivateFieldGet(this,G,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,G,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,N,"f"))++t;if(void 0!==__classPrivateFieldGet(this,H,"f"))++t;if(void 0!==__classPrivateFieldGet(this,K,"f"))++t;if(void 0!==__classPrivateFieldGet(this,V,"f")&&__classPrivateFieldGet(this,V,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,W,"f"))++t;if(void 0!==__classPrivateFieldGet(this,z,"f")&&__classPrivateFieldGet(this,z,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,U,"f"))++t;if(void 0!==__classPrivateFieldGet(this,$,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js":(e,t,r)=>{"use strict";r.d(t,{TransactionInput:()=>TransactionInput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class TransactionInput{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new i.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new TransactionInput(o.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{index:Number(__classPrivateFieldGet(this,c,"f")),txId:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js":(e,t,r)=>{"use strict";r.d(t,{REQUIRED_FIELDS_COUNT:()=>P,TransactionOutput:()=>TransactionOutput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,v,y,_,w,g,b;const P=2;class TransactionOutput{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");const e=new a.CborWriter;const t=__classPrivateFieldGet(this,p,"m",b).call(this);if(t===P||3===t&&void 0!==__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").kind()===d.DatumKind.DataHash){e.writeStartArray(t);e.writeByteString(m.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeEncodedValue(m.from(__classPrivateFieldGet(this,y,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,_,"f"))e.writeByteString(m.from(__classPrivateFieldGet(this,_,"f").asDataHash(),"hex"))}else{e.writeStartMap(t);e.writeInt(0n);e.writeByteString(m.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,y,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,_,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,_,"f").kind());switch(__classPrivateFieldGet(this,_,"f").kind()){case d.DatumKind.DataHash:e.writeByteString(m.from(__classPrivateFieldGet(this,_,"f").asDataHash(),"hex"));break;case d.DatumKind.InlineData:e.writeTag(i.CborTag.EncodedCborDataItem);e.writeByteString(m.from(__classPrivateFieldGet(this,_,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(3n);e.writeTag(i.CborTag.EncodedCborDataItem);e.writeByteString(m.from(__classPrivateFieldGet(this,w,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);let r;let a;let m;let p;if(t.peekState()===n.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const v=t.readInt();switch(v){case 0n:r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));break;case 1n:a=h.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const y=new o.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));y.readStartArray();const _=Number(y.readInt());if(_===d.DatumKind.InlineData){const w=y.readTag();if(w!==i.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${i.CborTag.EncodedCborDataItem} but got ${w}`)}const b=y.readByteString();let P;let S;if(_===d.DatumKind.DataHash)P=c.HexBlob.fromBytes(b);if(_===d.DatumKind.InlineData)S=u.PlutusData.fromCbor(c.HexBlob.fromBytes(b));m=new d.Datum(P,S);break}case 3n:{const C=new o.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));const k=C.readTag();if(k!==i.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${i.CborTag.EncodedCborDataItem} but got ${k}`);const j=C.readByteString();p=f.Script.fromCbor(c.HexBlob.fromBytes(j));break}}}t.readEndMap()}else{const x=t.readStartArray();r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));a=h.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));if(3===x){const T=t.readByteString();m=d.Datum.newDataHash(c.HexBlob.fromBytes(T))}}if(!r)throw new l.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!a)throw new l.InvalidArgumentError("cbor","Transaction output does not contain a value.");const E=new TransactionOutput(r,a);if(m)E.setDatum(m);if(p)E.setScriptRef(p);__classPrivateFieldSet(E,g,e,"f");return E}toCore(){var e;const t=__classPrivateFieldGet(this,y,"f").toCore();if(!t.assets)delete t.assets;const r={address:__classPrivateFieldGet(this,v,"f").asByron()?__classPrivateFieldGet(this,v,"f").toBase58():__classPrivateFieldGet(this,v,"f").toBech32(),value:t};if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").kind()===d.DatumKind.InlineData)r.datum=null===(e=__classPrivateFieldGet(this,_,"f").asInlineData())||void 0===e?void 0:e.toCore();if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(this,_,"f").kind()===d.DatumKind.DataHash)r.datumHash=__classPrivateFieldGet(this,_,"f").asDataHash();if(__classPrivateFieldGet(this,w,"f"))r.scriptReference=__classPrivateFieldGet(this,w,"f").toCore();return r}static fromCore(e){const t=s.Address.fromString(e.address);if(!t)throw new l.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,h.Value.fromCore(e.value));if(e.datum)r.setDatum(d.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(d.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(f.Script.fromCore(e.scriptReference));return r}address(){return __classPrivateFieldGet(this,v,"f")}amount(){return __classPrivateFieldGet(this,y,"f")}datum(){return __classPrivateFieldGet(this,_,"f")}setDatum(e){__classPrivateFieldSet(this,_,e,"f")}scriptRef(){return __classPrivateFieldGet(this,w,"f")}setScriptRef(e){__classPrivateFieldSet(this,w,e,"f")}isBabbageOutput(){const e=new o.CborReader(this.toCbor());return e.peekState()===n.CborReaderState.StartMap}constructor(e,t){p.add(this);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,y,t,"f")}}v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,p=new WeakSet,b=function _TransactionOutput_getMapSize(){let e=P;if(__classPrivateFieldGet(this,_,"f"))++e;if(__classPrivateFieldGet(this,w,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";r.d(t,{multiAssetsToTokenMap:()=>multiAssetsToTokenMap,sortCanonically:()=>sortCanonically,tokenMapToMultiAsset:()=>tokenMapToMultiAsset});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};const tokenMapToMultiAsset=e=>{const t=new Map;const r=new Map([...e.entries()].sort(sortCanonically));for(const[a,i]of r.entries()){const o=s.AssetId.getPolicyId(a);const n=s.AssetId.getAssetName(a);if(!t.has(o))t.set(o,new Map);t.get(o).set(n,i)}return t};const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,a]of e.entries()){for(const[i,o]of a.entries()){const n=s.AssetId.fromParts(r,i);t.set(n,o)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js":(e,t,r)=>{"use strict";r.d(t,{Value:()=>Value});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Value{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new s.CborWriter;if(!__classPrivateFieldGet(this,u,"f")||__classPrivateFieldGet(this,u,"f").size<=0)e.writeInt(__classPrivateFieldGet(this,l,"f"));else{e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,l,"f"));const t=(0,d.tokenMapToMultiAsset)(__classPrivateFieldGet(this,u,"f"));const r=new Map([...t.entries()].sort(d.sortCanonically));e.writeStartMap(r.size);for(const[a,i]of r.entries()){e.writeByteString(c.from(a,"hex"));const o=new Map([...i.entries()].sort(d.sortCanonically));e.writeStartMap(o.size);for(const[n,m]of o.entries()){e.writeByteString(c.from(n,"hex"));e.writeInt(m)}}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);if(t.peekState()===i.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const s=t.readStartArray();if(s!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${s} elements`);const l=t.readUInt();const u=new Map;t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const m=n.HexBlob.fromBytes(t.readByteString());if(!u.has(m))u.set(m,new Map);t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const p=c.from(t.readByteString()).toString("hex");const v=t.readUInt();u.get(m).set(p,v)}t.readEndMap()}t.readEndMap();const y=new Map([...(0,d.multiAssetsToTokenMap)(u)].sort(d.sortCanonically));const _=new Value(l,y);__classPrivateFieldSet(_,f,e,"f");return _}toCore(){return{assets:__classPrivateFieldGet(this,u,"f"),coins:__classPrivateFieldGet(this,l,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return __classPrivateFieldGet(this,l,"f")}setCoin(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}multiasset(){return __classPrivateFieldGet(this,u,"f")}setMultiasset(e){__classPrivateFieldSet(this,u,(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(e).entries()].sort(d.sortCanonically))),"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,0n);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t?(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(t).entries()].sort(d.sortCanonically))):void 0,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js":(e,t,r)=>{"use strict";r.d(t,{Voter:()=>Voter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Voter{toCbor(){if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");const e=new s.CborWriter;e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new a.CborReader(e);const s=r.readStartArray();if(s!==m)throw new o.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${s} elements`);const c=Number(r.readInt());const l=n.HexBlob.fromBytes(r.readByteString());switch(c){case d.VoterKind.ConstitutionalCommitteeKeyHash:case d.VoterKind.DrepKeyHash:case d.VoterKind.StakePoolKeyHash:t={hash:l,type:i.CredentialType.KeyHash};break;case d.VoterKind.ConstitutionalCommitteeScriptHash:case d.VoterKind.DRepScriptHash:t={hash:l,type:i.CredentialType.ScriptHash};break;default:throw new o.InvalidStateError(`Unexpected kind value: ${c}`)}const u=new Voter(c,t);__classPrivateFieldSet(u,h,e,"f");return u}toCore(){switch(__classPrivateFieldGet(this,u,"f")){case d.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:c.VoterType.ccHotKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:i.CredentialType.KeyHash}};case d.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:c.VoterType.ccHotScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:i.CredentialType.ScriptHash}};case d.VoterKind.DrepKeyHash:return{__typename:c.VoterType.dRepKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:i.CredentialType.KeyHash}};case d.VoterKind.DRepScriptHash:return{__typename:c.VoterType.dRepScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:i.CredentialType.ScriptHash}};case d.VoterKind.StakePoolKeyHash:return{__typename:c.VoterType.stakePoolKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:i.CredentialType.KeyHash}};default:throw new o.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case c.VoterType.ccHotKeyHash:case c.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case c.VoterType.dRepKeyHash:case c.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case c.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new o.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===i.CredentialType.KeyHash?d.VoterKind.ConstitutionalCommitteeKeyHash:d.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===i.CredentialType.KeyHash?d.VoterKind.DrepKeyHash:d.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(d.VoterKind.StakePoolKeyHash,{hash:e,type:i.CredentialType.KeyHash})}kind(){return __classPrivateFieldGet(this,u,"f")}toConstitutionalCommitteeHotCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeScriptHash)return __classPrivateFieldGet(this,f,"f");return}toDrepCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.DrepKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.DRepScriptHash)return __classPrivateFieldGet(this,f,"f");return}toStakingPoolKeyHash(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.StakePoolKeyHash)return __classPrivateFieldGet(this,f,"f").hash;return}equals(e){return __classPrivateFieldGet(this,u,"f")===__classPrivateFieldGet(e,u,"f")&&__classPrivateFieldGet(this,f,"f").type===__classPrivateFieldGet(e,f,"f").type&&__classPrivateFieldGet(this,f,"f").hash===__classPrivateFieldGet(e,f,"f").hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t,r)=>{"use strict";r.d(t,{VoterKind:()=>s});var s;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedure:()=>VotingProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;class VotingProcedure{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new a.CborWriter;e.writeStartArray(f);e.writeInt(__classPrivateFieldGet(this,c,"f"));__classPrivateFieldGet(this,l,"f")?e.writeEncodedValue((0,d.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);t.readStartArray();const r=Number(t.readInt());let a;if(t.peekState()===o.CborReaderState.Null){t.readNull();a=void 0}else{a=s.Anchor.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()))}const d=new VotingProcedure(r,a);__classPrivateFieldSet(d,u,e,"f");return d}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f")?__classPrivateFieldGet(this,l,"f").toCore():null,vote:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?s.Anchor.fromCore(e.anchor):void 0)}vote(){return __classPrivateFieldGet(this,c,"f")}setVote(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedures:()=>VotingProcedures});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var f,h;class VotingProcedures{toCbor(){if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");const e=new s.CborWriter;const t=this.getVoters();if(0===t.length)throw new n.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const a=this.getGovernanceActionIdsByVoter(r);if(0===a.length)throw new n.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()));e.writeStartMap(a.length);for(const i of a){e.writeEncodedValue((0,u.hexToBytes)(i.toCbor()));const o=this.get(r,i);if(!o)throw new n.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,u.hexToBytes)(o.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const s=c.Voter.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const n=o.GovernanceActionId.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));const u=l.VotingProcedure.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,n,u)}t.readEndMap()}t.readEndMap();__classPrivateFieldSet(r,h,e,"f");return r}toCore(){return __classPrivateFieldGet(this,f,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;__classPrivateFieldSet(t,f,e.map(e=>{const t=c.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:o.GovernanceActionId.fromCore(e.actionId),votingProcedure:l.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const s=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!s){__classPrivateFieldGet(this,f,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const a=s.votes.find(e=>e.actionId.equals(t));if(a)throw new n.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");s.votes.push({actionId:t,votingProcedure:r});__classPrivateFieldSet(this,h,void 0,"f")}get(e,t){const r=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!r)return;const s=r.votes.find(e=>e.actionId.equals(t));if(!s)return;return s.votingProcedure}getVoters(){return __classPrivateFieldGet(this,f,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){f.set(this,[]);h.set(this,void 0)}}f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js":(e,t,r)=>{"use strict";r.d(t,{TransactionUnspentOutput:()=>TransactionUnspentOutput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class TransactionUnspentOutput{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new s.CborWriter;e.writeStartArray(h);e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor()));e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=n.TransactionInput.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=d.TransactionOutput.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=new TransactionUnspentOutput(s,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return[__classPrivateFieldGet(this,l,"f").toCore(),__classPrivateFieldGet(this,u,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(n.TransactionInput.fromCore(e[0]),d.TransactionOutput.fromCore(e[1]))}input(){return __classPrivateFieldGet(this,l,"f")}setInput(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}output(){return __classPrivateFieldGet(this,u,"f")}setOutput(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js":(e,t,r)=>{"use strict";r.d(t,{BootstrapWitness:()=>BootstrapWitness});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;const h=4;const m=(0,s.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");if(__classPrivateFieldGet(this,l,"f").length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${__classPrivateFieldGet(this,l,"f").length/2} bytes long`);e.writeStartArray(h);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,l,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==h)throw new a.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=s.HexBlob.fromBytes(t.readByteString());const n=s.HexBlob.fromBytes(t.readByteString());const d=s.HexBlob.fromBytes(t.readByteString());const c=s.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new BootstrapWitness(i,n,d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{addressAttributes:s.Base64Blob.fromBytes((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f"))),chainCode:__classPrivateFieldGet(this,l,"f"),key:__classPrivateFieldGet(this,d,"f"),signature:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){if(!e.chainCode)throw new a.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?s.HexBlob.fromBase64(e.addressAttributes):m)}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}chainCode(){return __classPrivateFieldGet(this,l,"f")}setChainCode(e){if(e.length/2!==32)throw new a.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}attributes(){return __classPrivateFieldGet(this,u,"f")}setAttributes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t,r,s){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":(e,t,r)=>{"use strict";r.d(t,{Redeemer:()=>Redeemer});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,v,y,_,w;const g=4;const b=32;class Redeemer{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");e.writeStartArray(g);e.writeInt(__classPrivateFieldGet(this,p,"f"));e.writeInt(__classPrivateFieldGet(this,v,"f"));e.writeEncodedValue((0,h.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));e.writeEncodedValue((0,h.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==g)throw new d.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const a=t.readUInt();const i=l.PlutusData.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const u=n.ExUnits.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new Redeemer(s,a,i,u);__classPrivateFieldSet(f,w,e,"f");return f}toCore(){let e;switch(__classPrivateFieldGet(this,p,"f")){case f.RedeemerTag.Spend:e=u.RedeemerPurpose.spend;break;case f.RedeemerTag.Mint:e=u.RedeemerPurpose.mint;break;case f.RedeemerTag.Cert:e=u.RedeemerPurpose.certificate;break;case f.RedeemerTag.Reward:e=u.RedeemerPurpose.withdrawal;break;case f.RedeemerTag.Voting:e=u.RedeemerPurpose.vote;break;case f.RedeemerTag.Proposing:e=u.RedeemerPurpose.propose;break;default:throw new d.InvalidStateError(`Invalid redeemer type ${__classPrivateFieldGet(this,p,"f")}`)}return{data:__classPrivateFieldGet(this,y,"f").toCore(),executionUnits:__classPrivateFieldGet(this,_,"f").toCore(),index:Number(__classPrivateFieldGet(this,v,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case u.RedeemerPurpose.spend:t=f.RedeemerTag.Spend;break;case u.RedeemerPurpose.mint:t=f.RedeemerTag.Mint;break;case u.RedeemerPurpose.certificate:t=f.RedeemerTag.Cert;break;case u.RedeemerPurpose.withdrawal:t=f.RedeemerTag.Reward;break;case u.RedeemerPurpose.vote:t=f.RedeemerTag.Voting;break;case u.RedeemerPurpose.propose:t=f.RedeemerTag.Proposing;break;default:throw new d.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),l.PlutusData.fromCore(e.data),n.ExUnits.fromCore(e.executionUnits))}tag(){return __classPrivateFieldGet(this,p,"f")}setTag(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}index(){return __classPrivateFieldGet(this,v,"f")}setIndex(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}data(){return __classPrivateFieldGet(this,y,"f")}setData(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}exUnits(){return __classPrivateFieldGet(this,_,"f")}setExUnits(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}hash(){const e=s(b).update(m.from(this.toCbor(),"hex")).digest();return a.Hash32ByteBase16(c.HexBlob.fromBytes(e))}constructor(e,t,r,s){p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,v,t,"f");__classPrivateFieldSet(this,y,r,"f");__classPrivateFieldSet(this,_,s,"f")}}p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t,r)=>{"use strict";r.d(t,{RedeemerTag:()=>s});var s;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":(e,t,r)=>{"use strict";r.d(t,{Redeemers:()=>Redeemers});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p;const v=2;const y=2;class Redeemers{toCbor(){if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");const e=new s.CborWriter;if(f.inConwayEra){const t=new Map(__classPrivateFieldGet(this,m,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,u.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(__classPrivateFieldGet(this,m,"f").length);for(const a of __classPrivateFieldGet(this,m,"f"))e.writeEncodedValue(h.from(a.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new a.CborReader(e);if(r.peekState()===i.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==i.CborReaderState.EndMap){const s=r.readStartArray();if(s!==v)throw new n.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${v} elements, but got an array of ${s} elements`);const u=Number(r.readUInt());const f=r.readUInt();r.readEndArray();const h=r.readStartArray();if(h!==y)throw new n.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${y} elements, but got an array of ${h} elements`);const m=c.PlutusData.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));const _=o.ExUnits.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new l.Redeemer(u,f,m,_))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==i.CborReaderState.EndArray){t.push(l.Redeemer.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const w=new Redeemers(t);__classPrivateFieldSet(w,p,e,"f");return w}toCore(){return __classPrivateFieldGet(this,m,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>l.Redeemer.fromCore(e)))}values(){return __classPrivateFieldGet(this,m,"f")}setValues(e){__classPrivateFieldSet(this,m,[...e],"f");__classPrivateFieldSet(this,p,void 0,"f")}size(){return __classPrivateFieldGet(this,m,"f").length}constructor(e){m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,m,[...e],"f")}}m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":(e,t,r)=>{"use strict";r.d(t,{TransactionWitnessSet:()=>TransactionWitnessSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var w=r("../../node_modules/lodash/uniqWith.js");var g=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var b,P,S,C,k,j,x,T,E,A,I,B,F,M;class TransactionWitnessSet{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,I,"f"))return __classPrivateFieldGet(this,I,"f");e.writeStartMap(__classPrivateFieldGet(this,b,"m",M).call(this));if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0){__classPrivateFieldGet(this,S,"f").setValues(w(__classPrivateFieldGet(this,S,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,S,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0){__classPrivateFieldGet(this,k,"f").setValues(w(__classPrivateFieldGet(this,k,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,k,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,x,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,_.hexToBytes)(__classPrivateFieldGet(this,T,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,E,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,A,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const a=t.readInt();switch(a){case 0n:r.setVkeys(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),y.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),c.NativeScript.fromCbor));break;case 2n:r.setBootstraps(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),s.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),l.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),h.PlutusData.fromCbor));break;case 5n:r.setRedeemers(p.Redeemers.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),u.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),f.PlutusV3Script.fromCbor));break}}t.readEndMap();__classPrivateFieldSet(r,I,e,"f");return r}toCore(){var e;const t=__classPrivateFieldGet(this,b,"m",B).call(this);return{bootstrap:__classPrivateFieldGet(this,k,"f")?__classPrivateFieldGet(this,k,"f").toCore():void 0,datums:__classPrivateFieldGet(this,x,"f")?__classPrivateFieldGet(this,x,"f").toCore():void 0,redeemers:(null===(e=__classPrivateFieldGet(this,T,"f"))||void 0===e?void 0:e.size())?__classPrivateFieldGet(this,T,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:__classPrivateFieldGet(this,S,"f")?new Map(__classPrivateFieldGet(this,S,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(n.CborSet.fromCore([...e.signatures],y.VkeyWitness.fromCore));if(e.scripts){const r=__classPrivateFieldGet(TransactionWitnessSet,P,"m",F).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(p.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(n.CborSet.fromCore(e.datums,h.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(n.CborSet.fromCore(e.bootstrap,s.BootstrapWitness.fromCore));return t}setVkeys(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}vkeys(){return __classPrivateFieldGet(this,S,"f")}setNativeScripts(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,C,"f")}setBootstraps(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}bootstraps(){return __classPrivateFieldGet(this,k,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,j,"f")}setPlutusData(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusData(){return __classPrivateFieldGet(this,x,"f")}setRedeemers(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}redeemers(){return __classPrivateFieldGet(this,T,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,E,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,A,"f")}constructor(){b.add(this);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0)}}P=TransactionWitnessSet,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,b=new WeakSet,B=function _TransactionWitnessSet_getCoreScripts(){const e=__classPrivateFieldGet(this,j,"f")?__classPrivateFieldGet(this,j,"f").toCore():[];const t=__classPrivateFieldGet(this,E,"f")?__classPrivateFieldGet(this,E,"f").toCore():[];const r=__classPrivateFieldGet(this,A,"f")?__classPrivateFieldGet(this,A,"f").toCore():[];const s=__classPrivateFieldGet(this,C,"f")?__classPrivateFieldGet(this,C,"f").toCore():[];return[...e,...t,...r,...s]},F=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,a]=e.reduce(([e,t,r,s],a)=>{if(a.__type===m.ScriptType.Native)e?e.push(a):e=[a];else{switch(a.version){case m.PlutusLanguageVersion.V1:t?t.push(a):t=[a];break;case m.PlutusLanguageVersion.V2:r?r.push(a):r=[a];break;case m.PlutusLanguageVersion.V3:s?s.push(a):s=[a];break;default:throw new v.SerializationError(v.SerializationFailure.InvalidScriptType,`Script '${a}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:n.CborSet.fromCore(t,c.NativeScript.fromCore)},...r&&{plutusV1:n.CborSet.fromCore(r,l.PlutusV1Script.fromCore)},...s&&{plutusV2:n.CborSet.fromCore(s,u.PlutusV2Script.fromCore)},...a&&{plutusV3:n.CborSet.fromCore(a,f.PlutusV3Script.fromCore)}}},M=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js":(e,t,r)=>{"use strict";r.d(t,{VkeyWitness:()=>VkeyWitness});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class VkeyWitness{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==u)throw new i.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=o.HexBlob.fromBytes(t.readByteString());const n=o.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new VkeyWitness(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return[__classPrivateFieldGet(this,d,"f"),__classPrivateFieldGet(this,c,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js":(e,t,r)=>{"use strict";r.d(t,{CostModel:()=>CostModel});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;class CostModel{static newPlutusV1(e){return new CostModel(a.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(a.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(a.PlutusLanguageVersion.V3,e)}set(e,t){if(!__classPrivateFieldGet(this,i,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,o,"f")}.`);__classPrivateFieldGet(this,n,"f")[e]=t}get(e){if(!__classPrivateFieldGet(this,i,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,o,"f")}.`);return __classPrivateFieldGet(this,n,"f")[e]}costs(){return __classPrivateFieldGet(this,n,"f")}language(){return __classPrivateFieldGet(this,o,"f")}constructor(e,t){i.add(this);o.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,i=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js":(e,t,r)=>{"use strict";r.d(t,{Costmdls:()=>Costmdls});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class Costmdls{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,a]of t){e.writeInt(r);e.writeStartArray(a.costs().length);for(const i of a.costs())e.writeInt(i)}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==i.CborReaderState.EndMap){const s=Number(t.readInt());const n=new Array;t.readStartArray();while(t.peekState()!==i.CborReaderState.EndArray){n.push(Number(t.readInt()))}t.readEndArray();r.set(s,new o.CostModel(s,n))}t.readEndMap();const d=new Costmdls(r);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){const e=new Map;for(const[t,r]of __classPrivateFieldGet(this,c,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new o.CostModel(r,s));return new Costmdls(t)}size(){return __classPrivateFieldGet(this,c,"f").size}insert(e){__classPrivateFieldGet(this,c,"f").set(e.language(),e);__classPrivateFieldSet(this,l,void 0,"f")}get(e){return __classPrivateFieldGet(this,c,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,c,"f").keys()]}languageViewsEncoding(){const e=new s.CborWriter;const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>{const r=e[0]===d.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===d.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,a]of t){switch(r){case d.PlutusLanguageVersion.V1:{const i=new s.CborWriter;i.writeStartArray();for(const o of a.costs())i.writeInt(o);i.writeEndArray();const l=i.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(l);break}case d.PlutusLanguageVersion.V2:case d.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(a.costs().length);for(const u of a.costs())e.writeInt(u);break;default:throw new n.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{DrepVotingThresholds:()=>DrepVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,y,_,w;const g=10;class DrepVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");e.writeStartArray(g);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,m,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,p,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,v,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,y,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==g)throw new i.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const f=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const h=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const m=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const p=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const v=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const y=new DrepVotingThresholds(s,d,c,l,u,f,h,m,p,v);__classPrivateFieldSet(y,w,e,"f");return y}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,h,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),ppEconomicGroup:__classPrivateFieldGet(this,p,"f").toCore(),ppGovernanceGroup:__classPrivateFieldGet(this,y,"f").toCore(),ppNetworkGroup:__classPrivateFieldGet(this,m,"f").toCore(),ppTechnicalGroup:__classPrivateFieldGet(this,v,"f").toCore(),treasuryWithdrawal:__classPrivateFieldGet(this,_,"f").toCore(),updateConstitution:__classPrivateFieldGet(this,f,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.updateConstitution),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.ppNetworkGroup),n.UnitInterval.fromCore(e.ppEconomicGroup),n.UnitInterval.fromCore(e.ppTechnicalGroup),n.UnitInterval.fromCore(e.ppGovernanceGroup),n.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setUpdateConstitution(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpNetworkGroup(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpEconomicGroup(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpTechnicalGroup(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setPpGovernanceGroup(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}setTreasuryWithdrawal(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}updateConstitution(){return __classPrivateFieldGet(this,f,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,h,"f")}ppNetworkGroup(){return __classPrivateFieldGet(this,m,"f")}ppEconomicGroup(){return __classPrivateFieldGet(this,p,"f")}ppTechnicalGroup(){return __classPrivateFieldGet(this,v,"f")}ppGovernanceGroup(){return __classPrivateFieldGet(this,y,"f")}treasuryWithdrawal(){return __classPrivateFieldGet(this,_,"f")}constructor(e,t,r,s,a,i,o,n,d,g){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,h,a,"f");__classPrivateFieldSet(this,m,i,"f");__classPrivateFieldSet(this,p,o,"f");__classPrivateFieldSet(this,v,n,"f");__classPrivateFieldSet(this,y,d,"f");__classPrivateFieldSet(this,_,g,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js":(e,t,r)=>{"use strict";r.d(t,{ExUnitPrices:()=>ExUnitPrices});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/fraction.js/fraction.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class ExUnitPrices{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ExUnitPrices(s,d);__classPrivateFieldSet(c,f,e,"f");return c}toCore(){return{memory:Number(__classPrivateFieldGet(this,l,"f").numerator())/Number(__classPrivateFieldGet(this,l,"f").denominator()),steps:Number(__classPrivateFieldGet(this,u,"f").numerator())/Number(__classPrivateFieldGet(this,u,"f").denominator())}}static fromCore(e){const t=new d(e.memory);const r=new d(e.steps);return new ExUnitPrices(new n.UnitInterval(BigInt(t.n),BigInt(t.d)),new n.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return __classPrivateFieldGet(this,l,"f")}setMemPrice(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}stepsPrice(){return __classPrivateFieldGet(this,u,"f")}setStepsPrice(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{PoolVotingThresholds:()=>PoolVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m;const p=5;class PoolVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,h,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new i.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new PoolVotingThresholds(s,d,c,l,u);__classPrivateFieldSet(f,m,e,"f");return f}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,f,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),securityRelevantParamVotingThreshold:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,f,"f")}securityRelevantParam(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t,r,s,a){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,h,a,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js":(e,t,r)=>{"use strict";r.d(t,{ProposedProtocolParameterUpdates:()=>ProposedProtocolParameterUpdates});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class ProposedProtocolParameterUpdates{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const t=new Map([...__classPrivateFieldGet(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeByteString(c.from(r,"hex"));e.writeEncodedValue(c.from(s.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const a=s.Hash28ByteBase16(n.HexBlob.fromBytes(t.readByteString()));const c=d.ProtocolParamUpdate.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));r.set(a,c)}t.readEndMap();const l=new ProposedProtocolParameterUpdates(r);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return new Map([...__classPrivateFieldGet(this,l,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,d.ProtocolParamUpdate.fromCore(t)])))}size(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){return __classPrivateFieldGet(this,l,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,l,"f").keys()]}constructor(e){l.set(this,new Map);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolParamUpdate:()=>ProtocolParamUpdate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$,L,q,Y,Q,J;class ProtocolParamUpdate{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,Q,"f"))return __classPrivateFieldGet(this,Q,"f");e.writeStartMap(__classPrivateFieldGet(this,v,"m",J).call(this));if(void 0!==__classPrivateFieldGet(this,y,"f")){e.writeInt(0n);e.writeInt(__classPrivateFieldGet(this,y,"f"))}if(void 0!==__classPrivateFieldGet(this,_,"f")){e.writeInt(1n);e.writeInt(__classPrivateFieldGet(this,_,"f"))}if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(2n);e.writeInt(__classPrivateFieldGet(this,w,"f"))}if(void 0!==__classPrivateFieldGet(this,g,"f")){e.writeInt(3n);e.writeInt(__classPrivateFieldGet(this,g,"f"))}if(void 0!==__classPrivateFieldGet(this,b,"f")){e.writeInt(4n);e.writeInt(__classPrivateFieldGet(this,b,"f"))}if(void 0!==__classPrivateFieldGet(this,P,"f")){e.writeInt(5n);e.writeInt(__classPrivateFieldGet(this,P,"f"))}if(void 0!==__classPrivateFieldGet(this,S,"f")){e.writeInt(6n);e.writeInt(__classPrivateFieldGet(this,S,"f"))}if(void 0!==__classPrivateFieldGet(this,C,"f")){e.writeInt(7n);e.writeInt(__classPrivateFieldGet(this,C,"f"))}if(void 0!==__classPrivateFieldGet(this,k,"f")){e.writeInt(8n);e.writeInt(__classPrivateFieldGet(this,k,"f"))}if(void 0!==__classPrivateFieldGet(this,j,"f")){e.writeInt(9n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")){e.writeInt(10n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,x,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")){e.writeInt(11n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,T,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,E,"f")){e.writeInt(12n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,E,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f"))if(0===__classPrivateFieldGet(this,A,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(p.from(__classPrivateFieldGet(this,A,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,I,"f")){e.writeInt(14n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,I,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,B,"f")){e.writeInt(16n);e.writeInt(__classPrivateFieldGet(this,B,"f"))}if(void 0!==__classPrivateFieldGet(this,F,"f")){e.writeInt(17n);e.writeInt(__classPrivateFieldGet(this,F,"f"))}if(void 0!==__classPrivateFieldGet(this,M,"f")){e.writeInt(18n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,M,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,R,"f")){e.writeInt(19n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,R,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,D,"f")){e.writeInt(20n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,D,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,O,"f")){e.writeInt(21n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,O,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,G,"f")){e.writeInt(22n);e.writeInt(__classPrivateFieldGet(this,G,"f"))}if(void 0!==__classPrivateFieldGet(this,N,"f")){e.writeInt(23n);e.writeInt(__classPrivateFieldGet(this,N,"f"))}if(void 0!==__classPrivateFieldGet(this,H,"f")){e.writeInt(24n);e.writeInt(__classPrivateFieldGet(this,H,"f"))}if(void 0!==__classPrivateFieldGet(this,K,"f")){e.writeInt(25n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,K,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,V,"f")){e.writeInt(26n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,V,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,W,"f")){e.writeInt(27n);e.writeInt(__classPrivateFieldGet(this,W,"f"))}if(void 0!==__classPrivateFieldGet(this,z,"f")){e.writeInt(28n);e.writeInt(__classPrivateFieldGet(this,z,"f"))}if(void 0!==__classPrivateFieldGet(this,U,"f")){e.writeInt(29n);e.writeInt(__classPrivateFieldGet(this,U,"f"))}if(void 0!==__classPrivateFieldGet(this,$,"f")){e.writeInt(30n);e.writeInt(__classPrivateFieldGet(this,$,"f"))}if(void 0!==__classPrivateFieldGet(this,L,"f")){e.writeInt(31n);e.writeInt(__classPrivateFieldGet(this,L,"f"))}if(void 0!==__classPrivateFieldGet(this,q,"f")){e.writeInt(32n);e.writeInt(__classPrivateFieldGet(this,q,"f"))}if(void 0!==__classPrivateFieldGet(this,Y,"f")){e.writeInt(33n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,Y,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==i.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:__classPrivateFieldSet(r,y,t.readInt(),"f");break;case 1n:__classPrivateFieldSet(r,_,t.readInt(),"f");break;case 2n:__classPrivateFieldSet(r,w,Number(t.readInt()),"f");break;case 3n:__classPrivateFieldSet(r,g,Number(t.readInt()),"f");break;case 4n:__classPrivateFieldSet(r,b,Number(t.readInt()),"f");break;case 5n:__classPrivateFieldSet(r,P,t.readInt(),"f");break;case 6n:__classPrivateFieldSet(r,S,t.readInt(),"f");break;case 7n:__classPrivateFieldSet(r,C,Number(t.readInt()),"f");break;case 8n:__classPrivateFieldSet(r,k,Number(t.readInt()),"f");break;case 9n:__classPrivateFieldSet(r,j,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:__classPrivateFieldSet(r,x,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:__classPrivateFieldSet(r,T,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:__classPrivateFieldSet(r,E,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();__classPrivateFieldSet(r,A,"","f");t.readEndArray()}else{t.readEncodedValue();__classPrivateFieldSet(r,A,h.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:__classPrivateFieldSet(r,I,u.ProtocolVersion.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:__classPrivateFieldSet(r,B,t.readInt(),"f");break;case 17n:__classPrivateFieldSet(r,F,t.readInt(),"f");break;case 18n:__classPrivateFieldSet(r,M,o.Costmdls.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:__classPrivateFieldSet(r,R,c.ExUnitPrices.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:__classPrivateFieldSet(r,D,f.ExUnits.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:__classPrivateFieldSet(r,O,f.ExUnits.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:__classPrivateFieldSet(r,G,Number(t.readInt()),"f");break;case 23n:__classPrivateFieldSet(r,N,Number(t.readInt()),"f");break;case 24n:__classPrivateFieldSet(r,H,Number(t.readInt()),"f");break;case 25n:__classPrivateFieldSet(r,K,m.PoolVotingThresholds.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:__classPrivateFieldSet(r,V,n.DrepVotingThresholds.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:__classPrivateFieldSet(r,W,Number(t.readInt()),"f");break;case 28n:__classPrivateFieldSet(r,z,Number(t.readInt()),"f");break;case 29n:__classPrivateFieldSet(r,U,Number(t.readInt()),"f");break;case 30n:__classPrivateFieldSet(r,$,Number(t.readInt()),"f");break;case 31n:__classPrivateFieldSet(r,L,Number(t.readInt()),"f");break;case 32n:__classPrivateFieldSet(r,q,Number(t.readInt()),"f");break;case 33n:__classPrivateFieldSet(r,Y,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();__classPrivateFieldSet(r,Q,e,"f");return r}toCore(){var e,t,r,s,a,i;const o={coinsPerUtxoByte:void 0!==__classPrivateFieldGet(this,F,"f")?Number(__classPrivateFieldGet(this,F,"f")):void 0,collateralPercentage:__classPrivateFieldGet(this,N,"f"),committeeTermLimit:void 0!==__classPrivateFieldGet(this,z,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,z,"f")):void 0,costModels:null===(e=__classPrivateFieldGet(this,M,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:__classPrivateFieldGet(this,L,"f"),dRepInactivityPeriod:void 0!==__classPrivateFieldGet(this,q,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,q,"f")):void 0,dRepVotingThresholds:null===(t=__classPrivateFieldGet(this,V,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:__classPrivateFieldGet(this,k,"f"),governanceActionDeposit:__classPrivateFieldGet(this,$,"f"),governanceActionValidityPeriod:void 0!==__classPrivateFieldGet(this,U,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,U,"f")):void 0,maxBlockBodySize:__classPrivateFieldGet(this,w,"f"),maxBlockHeaderSize:__classPrivateFieldGet(this,b,"f"),maxCollateralInputs:__classPrivateFieldGet(this,H,"f"),maxExecutionUnitsPerBlock:null===(r=__classPrivateFieldGet(this,O,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=__classPrivateFieldGet(this,D,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==__classPrivateFieldGet(this,g,"f")?Number(__classPrivateFieldGet(this,g,"f")):void 0,maxValueSize:__classPrivateFieldGet(this,G,"f"),minCommitteeSize:__classPrivateFieldGet(this,W,"f"),minFeeCoefficient:void 0!==__classPrivateFieldGet(this,y,"f")?Number(__classPrivateFieldGet(this,y,"f")):void 0,minFeeConstant:void 0!==__classPrivateFieldGet(this,_,"f")?Number(__classPrivateFieldGet(this,_,"f")):void 0,minFeeRefScriptCostPerByte:__classPrivateFieldGet(this,Y,"f")?__classPrivateFieldGet(this,Y,"f").toFloat().toString():void 0,minPoolCost:void 0!==__classPrivateFieldGet(this,B,"f")?Number(__classPrivateFieldGet(this,B,"f")):void 0,monetaryExpansion:__classPrivateFieldGet(this,x,"f")?__classPrivateFieldGet(this,x,"f").toFloat().toString():void 0,poolDeposit:void 0!==__classPrivateFieldGet(this,S,"f")?Number(__classPrivateFieldGet(this,S,"f")):void 0,poolInfluence:__classPrivateFieldGet(this,j,"f")?__classPrivateFieldGet(this,j,"f").toFloat().toString():void 0,poolRetirementEpochBound:__classPrivateFieldGet(this,C,"f"),poolVotingThresholds:null===(a=__classPrivateFieldGet(this,K,"f"))||void 0===a?void 0:a.toCore(),prices:null===(i=__classPrivateFieldGet(this,R,"f"))||void 0===i?void 0:i.toCore(),stakeKeyDeposit:void 0!==__classPrivateFieldGet(this,P,"f")?Number(__classPrivateFieldGet(this,P,"f")):void 0,treasuryExpansion:__classPrivateFieldGet(this,T,"f")?__classPrivateFieldGet(this,T,"f").toFloat().toString():void 0};if(__classPrivateFieldGet(this,E,"f"))o.decentralizationParameter=__classPrivateFieldGet(this,E,"f").toFloat().toString();if(void 0!==__classPrivateFieldGet(this,A,"f"))o.extraEntropy=__classPrivateFieldGet(this,A,"f");if(__classPrivateFieldGet(this,I,"f"))o.protocolVersion=__classPrivateFieldGet(this,I,"f").toCore();return o}static fromCore(e){const t=new ProtocolParamUpdate;__classPrivateFieldSet(t,y,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");__classPrivateFieldSet(t,w,e.maxBlockBodySize,"f");__classPrivateFieldSet(t,_,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");__classPrivateFieldSet(t,b,e.maxBlockHeaderSize,"f");__classPrivateFieldSet(t,P,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");__classPrivateFieldSet(t,S,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");__classPrivateFieldSet(t,C,e.poolRetirementEpochBound,"f");__classPrivateFieldSet(t,k,e.desiredNumberOfPools,"f");__classPrivateFieldSet(t,j,e.poolInfluence?l.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");__classPrivateFieldSet(t,x,e.monetaryExpansion?l.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");__classPrivateFieldSet(t,T,e.treasuryExpansion?l.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");__classPrivateFieldSet(t,B,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");__classPrivateFieldSet(t,G,e.maxValueSize,"f");__classPrivateFieldSet(t,g,e.maxTxSize,"f");__classPrivateFieldSet(t,N,e.collateralPercentage,"f");__classPrivateFieldSet(t,H,e.maxCollateralInputs,"f");__classPrivateFieldSet(t,M,e.costModels?o.Costmdls.fromCore(e.costModels):void 0,"f");__classPrivateFieldSet(t,R,e.prices?c.ExUnitPrices.fromCore(e.prices):void 0,"f");__classPrivateFieldSet(t,D,e.maxExecutionUnitsPerTransaction?f.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");__classPrivateFieldSet(t,O,e.maxExecutionUnitsPerBlock?f.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");__classPrivateFieldSet(t,F,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");__classPrivateFieldSet(t,K,e.poolVotingThresholds?m.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");__classPrivateFieldSet(t,V,e.dRepVotingThresholds?n.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");__classPrivateFieldSet(t,W,e.minCommitteeSize,"f");__classPrivateFieldSet(t,z,e.committeeTermLimit,"f");__classPrivateFieldSet(t,U,e.governanceActionValidityPeriod,"f");__classPrivateFieldSet(t,$,e.governanceActionDeposit,"f");__classPrivateFieldSet(t,L,e.dRepDeposit,"f");__classPrivateFieldSet(t,q,e.dRepInactivityPeriod,"f");__classPrivateFieldSet(t,Y,e.minFeeRefScriptCostPerByte?l.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:a}=e;if(void 0!==r||void 0!==s||a){__classPrivateFieldSet(t,E,a?l.UnitInterval.fromFloat(Number(a)):void 0,"f");__classPrivateFieldSet(t,I,r?u.ProtocolVersion.fromCore(r):void 0,"f");__classPrivateFieldSet(t,A,s?(0,h.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){__classPrivateFieldSet(this,y,e,"f")}minFeeA(){return __classPrivateFieldGet(this,y,"f")}setMinFeeB(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minFeeB(){return __classPrivateFieldGet(this,_,"f")}setMaxBlockBodySize(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockBodySize(){return __classPrivateFieldGet(this,w,"f")}setMaxTxSize(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxSize(){return __classPrivateFieldGet(this,g,"f")}setMaxBlockHeaderSize(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockHeaderSize(){return __classPrivateFieldGet(this,b,"f")}setKeyDeposit(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}keyDeposit(){return __classPrivateFieldGet(this,P,"f")}setPoolDeposit(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolDeposit(){return __classPrivateFieldGet(this,S,"f")}setMaxEpoch(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxEpoch(){return __classPrivateFieldGet(this,C,"f")}setNOpt(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}nOpt(){return __classPrivateFieldGet(this,k,"f")}setPoolPledgeInfluence(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolPledgeInfluence(){return __classPrivateFieldGet(this,j,"f")}setExpansionRate(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}expansionRate(){return __classPrivateFieldGet(this,x,"f")}setTreasuryGrowthRate(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}treasuryGrowthRate(){return __classPrivateFieldGet(this,T,"f")}setD(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}d(){return __classPrivateFieldGet(this,E,"f")}setExtraEntropy(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}extraEntropy(){return __classPrivateFieldGet(this,A,"f")}setProtocolVersion(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}protocolVersion(){return __classPrivateFieldGet(this,I,"f")}setMinPoolCost(e){__classPrivateFieldSet(this,B,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minPoolCost(){return __classPrivateFieldGet(this,B,"f")}setAdaPerUtxoByte(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}adaPerUtxoByte(){return __classPrivateFieldGet(this,F,"f")}setCostModels(e){__classPrivateFieldSet(this,M,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}costModels(){return __classPrivateFieldGet(this,M,"f")}setExecutionCosts(e){__classPrivateFieldSet(this,R,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}executionCosts(){return __classPrivateFieldGet(this,R,"f")}setMaxTxExUnits(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxExUnits(){return __classPrivateFieldGet(this,D,"f")}setMaxBlockExUnits(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockExUnits(){return __classPrivateFieldGet(this,O,"f")}setMaxValueSize(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxValueSize(){return __classPrivateFieldGet(this,G,"f")}setCollateralPercentage(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}collateralPercentage(){return __classPrivateFieldGet(this,N,"f")}setMaxCollateralInputs(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxCollateralInputs(){return __classPrivateFieldGet(this,H,"f")}setPoolVotingThresholds(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolVotingThresholds(){return __classPrivateFieldGet(this,K,"f")}setDrepVotingThresholds(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepVotingThresholds(){return __classPrivateFieldGet(this,V,"f")}setMinCommitteeSize(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minCommitteeSize(){return __classPrivateFieldGet(this,W,"f")}setCommitteeTermLimit(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}committeeTermLimit(){return __classPrivateFieldGet(this,z,"f")}setGovernanceActionValidityPeriod(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionValidityPeriod(){return __classPrivateFieldGet(this,U,"f")}setGovernanceActionDeposit(e){__classPrivateFieldSet(this,$,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionDeposit(){return __classPrivateFieldGet(this,$,"f")}setDrepDeposit(e){__classPrivateFieldSet(this,L,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepDeposit(){return __classPrivateFieldGet(this,L,"f")}setDrepInactivityPeriod(e){__classPrivateFieldSet(this,q,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepInactivityPeriod(){return __classPrivateFieldGet(this,q,"f")}minFeeRefScriptCostPerByte(){return __classPrivateFieldGet(this,Y,"f")}constructor(){v.add(this);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);L.set(this,void 0);q.set(this,void 0);Y.set(this,void 0);Q.set(this,void 0)}}y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,L=new WeakMap,q=new WeakMap,Y=new WeakMap,Q=new WeakMap,v=new WeakSet,J=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,y,"f"))++e;if(void 0!==__classPrivateFieldGet(this,_,"f"))++e;if(void 0!==__classPrivateFieldGet(this,w,"f"))++e;if(void 0!==__classPrivateFieldGet(this,g,"f"))++e;if(void 0!==__classPrivateFieldGet(this,b,"f"))++e;if(void 0!==__classPrivateFieldGet(this,P,"f"))++e;if(void 0!==__classPrivateFieldGet(this,S,"f"))++e;if(void 0!==__classPrivateFieldGet(this,C,"f"))++e;if(void 0!==__classPrivateFieldGet(this,k,"f"))++e;if(void 0!==__classPrivateFieldGet(this,j,"f"))++e;if(void 0!==__classPrivateFieldGet(this,x,"f"))++e;if(void 0!==__classPrivateFieldGet(this,T,"f"))++e;if(void 0!==__classPrivateFieldGet(this,E,"f"))++e;if(void 0!==__classPrivateFieldGet(this,A,"f"))++e;if(void 0!==__classPrivateFieldGet(this,I,"f"))++e;if(void 0!==__classPrivateFieldGet(this,B,"f"))++e;if(void 0!==__classPrivateFieldGet(this,F,"f"))++e;if(void 0!==__classPrivateFieldGet(this,M,"f"))++e;if(void 0!==__classPrivateFieldGet(this,R,"f"))++e;if(void 0!==__classPrivateFieldGet(this,D,"f"))++e;if(void 0!==__classPrivateFieldGet(this,O,"f"))++e;if(void 0!==__classPrivateFieldGet(this,G,"f"))++e;if(void 0!==__classPrivateFieldGet(this,N,"f"))++e;if(void 0!==__classPrivateFieldGet(this,H,"f"))++e;if(void 0!==__classPrivateFieldGet(this,K,"f"))++e;if(void 0!==__classPrivateFieldGet(this,V,"f"))++e;if(void 0!==__classPrivateFieldGet(this,W,"f"))++e;if(void 0!==__classPrivateFieldGet(this,z,"f"))++e;if(void 0!==__classPrivateFieldGet(this,U,"f"))++e;if(void 0!==__classPrivateFieldGet(this,$,"f"))++e;if(void 0!==__classPrivateFieldGet(this,L,"f"))++e;if(void 0!==__classPrivateFieldGet(this,q,"f"))++e;if(void 0!==__classPrivateFieldGet(this,Y,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js":(e,t,r)=>{"use strict";r.d(t,{Update:()=>Update});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Update{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeInt(__classPrivateFieldGet(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=d.ProposedProtocolParameterUpdates.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new Update(s,(0,i.EpochNo)(Number(c)));__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{epoch:__classPrivateFieldGet(this,l,"f"),proposedProtocolParameterUpdates:__classPrivateFieldGet(this,u,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=d.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return __classPrivateFieldGet(this,l,"f")}setEpoch(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}proposedProtocolParameterUpdates(){return __classPrivateFieldGet(this,u,"f")}setProposedProtocolParameterUpdates(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,e,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{ALONZO_AUX_TAG:()=>e4.ALONZO_AUX_TAG,Anchor:()=>w.Anchor,AuthCommitteeHot:()=>ec.AuthCommitteeHot,AuxiliaryData:()=>e4.AuxiliaryData,BootstrapWitness:()=>eZ.BootstrapWitness,CborAdditionalInfo:()=>E.CborAdditionalInfo,CborContentException:()=>O.CborContentException,CborInitialByte:()=>A.CborInitialByte,CborInvalidOperationException:()=>O.CborInvalidOperationException,CborMajorType:()=>I.CborMajorType,CborReader:()=>B.CborReader,CborReaderState:()=>F.CborReaderState,CborSet:()=>b.CborSet,CborSimpleValue:()=>M,CborTag:()=>R.CborTag,CborWriter:()=>D.CborWriter,Certificate:()=>G.Certificate,Committee:()=>Committee,Constitution:()=>eH.Constitution,ConstrPlutusData:()=>C.ConstrPlutusData,CostModel:()=>ep.CostModel,Costmdls:()=>em.Costmdls,Credential:()=>S.Credential,DRep:()=>et.DRep,DRepKind:()=>ee.DRepKind,Datum:()=>_.Datum,DatumKind:()=>_.DatumKind,DrepVotingThresholds:()=>eg.DrepVotingThresholds,ExUnitPrices:()=>ew.ExUnitPrices,ExUnits:()=>v.ExUnits,GeneralTransactionMetadata:()=>e6.GeneralTransactionMetadata,GenesisKeyDelegation:()=>N.GenesisKeyDelegation,GovernanceActionId:()=>g.GovernanceActionId,GovernanceActionKind:()=>eY.GovernanceActionKind,HardForkInitiationAction:()=>eK.HardForkInitiationAction,Hash:()=>P.Hash,InfoAction:()=>eV.InfoAction,LossOfPrecisionException:()=>O.LossOfPrecisionException,MetadatumList:()=>e2.MetadatumList,MetadatumMap:()=>e3.MetadatumMap,MoveInstantaneousReward:()=>J.MoveInstantaneousReward,MoveInstantaneousRewardToOtherPot:()=>Z.MoveInstantaneousRewardToOtherPot,MoveInstantaneousRewardToStakeCreds:()=>X.MoveInstantaneousRewardToStakeCreds,MultiHostName:()=>L.MultiHostName,NativeScript:()=>i.NativeScript,NewConstitution:()=>eW.NewConstitution,NoConfidence:()=>ez.NoConfidence,ParameterChangeAction:()=>eU.ParameterChangeAction,PlutusData:()=>k.PlutusData,PlutusDataKind:()=>j.PlutusDataKind,PlutusList:()=>x.PlutusList,PlutusMap:()=>T.PlutusMap,PlutusV1Script:()=>f.PlutusV1Script,PlutusV2Script:()=>h.PlutusV2Script,PlutusV3Script:()=>m.PlutusV3Script,PoolMetadata:()=>U.PoolMetadata,PoolParams:()=>$.PoolParams,PoolRegistration:()=>H.PoolRegistration,PoolRetirement:()=>K.PoolRetirement,PoolVotingThresholds:()=>eb.PoolVotingThresholds,ProposalProcedure:()=>eq.ProposalProcedure,ProposedProtocolParameterUpdates:()=>ev.ProposedProtocolParameterUpdates,ProtocolParamUpdate:()=>ey.ProtocolParamUpdate,ProtocolVersion:()=>y.ProtocolVersion,REQUIRED_FIELDS_COUNT:()=>eC.REQUIRED_FIELDS_COUNT,Redeemer:()=>eJ.Redeemer,RedeemerTag:()=>eQ.RedeemerTag,Redeemers:()=>eX.Redeemers,RegisterDelegateRepresentative:()=>eu.RegisterDelegateRepresentative,Registration:()=>er.Registration,Relay:()=>Y.Relay,RelayKind:()=>Y.RelayKind,ResignCommitteeCold:()=>el.ResignCommitteeCold,SHELLEY_ERA_FIELDS_COUNT:()=>e4.SHELLEY_ERA_FIELDS_COUNT,Script:()=>a.Script,ScriptAll:()=>o.ScriptAll,ScriptAny:()=>n.ScriptAny,ScriptNOfK:()=>d.ScriptNOfK,ScriptPubkey:()=>c.ScriptPubkey,SingleHostAddr:()=>Q.SingleHostAddr,SingleHostName:()=>q.SingleHostName,StakeDelegation:()=>V.StakeDelegation,StakeDeregistration:()=>W.StakeDeregistration,StakeRegistration:()=>z.StakeRegistration,StakeRegistrationDelegation:()=>eo.StakeRegistrationDelegation,StakeVoteDelegation:()=>ei.StakeVoteDelegation,StakeVoteRegistrationDelegation:()=>ed.StakeVoteRegistrationDelegation,TimelockExpiry:()=>l.TimelockExpiry,TimelockStart:()=>u.TimelockStart,Transaction:()=>s.Transaction,TransactionBody:()=>eP.TransactionBody,TransactionInput:()=>eS.TransactionInput,TransactionMetadatum:()=>e5.TransactionMetadatum,TransactionMetadatumKind:()=>e9.TransactionMetadatumKind,TransactionOutput:()=>eC.TransactionOutput,TransactionUnspentOutput:()=>e8.TransactionUnspentOutput,TransactionWitnessSet:()=>e0.TransactionWitnessSet,TreasuryWithdrawalsAction:()=>e$.TreasuryWithdrawalsAction,TxBodyCBOR:()=>s.TxBodyCBOR,TxCBOR:()=>s.TxCBOR,UnitInterval:()=>p.UnitInterval,UnregisterDelegateRepresentative:()=>ef.UnregisterDelegateRepresentative,Unregistration:()=>es.Unregistration,Update:()=>e_.Update,UpdateCommittee:()=>eL.UpdateCommittee,UpdateDelegateRepresentative:()=>eh.UpdateDelegateRepresentative,Value:()=>ek.Value,VkeyWitness:()=>e1.VkeyWitness,VoteDelegation:()=>ea.VoteDelegation,VoteRegistrationDelegation:()=>en.VoteRegistrationDelegation,Voter:()=>ex.Voter,VoterKind:()=>ej.VoterKind,VotingProcedure:()=>eT.VotingProcedure,VotingProcedures:()=>eE.VotingProcedures,deserializeTx:()=>s.deserializeTx,isDatumHash:()=>_.isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var E=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var A=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var I=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var B=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var F=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var M;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(M||(M={}));var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var O=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var G=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var N=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var H=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var K=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var V=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var W=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var U=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var $=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var L=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var Y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var Q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var J=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var X=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var Z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var ee=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var et=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var er=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var es=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var ea=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var ei=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var eo=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var en=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var ed=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var ec=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var el=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var eu=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var ef=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var eh=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var em=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var ep=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var ev=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var ey=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var e_=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var ew=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var eg=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var eb=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var eP=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var eS=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var eC=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var ek=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var ej=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var ex=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var eT=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var eE=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var eA=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var eI=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var eB=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var eF,eM,eR;const eD=2;const eO=2;const eG=0;const eN=1;class Committee{toCbor(){const e=new D.CborWriter;if(__classPrivateFieldGet(this,eR,"f"))return __classPrivateFieldGet(this,eR,"f");if(0===__classPrivateFieldGet(this,eM,"f").length)throw new eA.InvalidStateError("There must be at least one Committee member");e.writeStartArray(eD);e.writeStartMap(__classPrivateFieldGet(this,eM,"f").length);for(const t of __classPrivateFieldGet(this,eM,"f")){e.writeStartArray(eO);e.writeInt(t[eG].type);e.writeByteString((0,eB.hexToBytes)(t[eG].hash));e.writeInt(t[eN])}e.writeEncodedValue((0,eB.hexToBytes)(__classPrivateFieldGet(this,eF,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new B.CborReader(e);const r=t.readStartArray();if(r!==eD)throw new eA.InvalidArgumentError("cbor",`Expected an array of ${eD} elements, but got an array of ${r} elements`);t.readStartMap();const s=[];while(t.peekState()!==F.CborReaderState.EndMap){if(t.readStartArray()!==eO)throw new eA.InvalidArgumentError("cbor",`Expected an array of ${eO} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());const i=eI.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=Number(t.readUInt());s.push([{hash:i,type:a},o])}t.readEndMap();const n=p.UnitInterval.fromCbor(eI.HexBlob.fromBytes(t.readEncodedValue()));const d=new Committee(n);for(const c of s)d.addMember(c[eG],c[eN]);__classPrivateFieldSet(d,eR,e,"f");return d}toCore(){if(0===__classPrivateFieldGet(this,eM,"f").length)throw new eA.InvalidStateError("There must be at least one Committee member");const e=__classPrivateFieldGet(this,eM,"f").map(e=>({coldCredential:e[eG],epoch:e[eN]}));return{members:e,quorumThreshold:__classPrivateFieldGet(this,eF,"f").toCore()}}static fromCore(e){const t=new Committee(p.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return __classPrivateFieldGet(this,eM,"f").map(e=>e[0])}quorumThreshold(){return __classPrivateFieldGet(this,eF,"f")}addMember(e,t){const r=__classPrivateFieldGet(this,eM,"f").find(t=>t[eG].type===e.type&&t[eG].hash===e.hash);if(r)throw new eA.InvalidArgumentError("committeeColdCredential","The given credential is already present");__classPrivateFieldGet(this,eM,"f").push([e,t])}getMemberEpoch(e){const t=__classPrivateFieldGet(this,eM,"f").find(t=>t[eG].type===e.type&&t[eG].hash===e.hash);if(t)return t[eN];return}constructor(e){eF.set(this,void 0);eM.set(this,[]);eR.set(this,void 0);__classPrivateFieldSet(this,eF,e,"f")}}eF=new WeakMap,eM=new WeakMap,eR=new WeakMap;var eH=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var eK=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var eV=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var eW=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var ez=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var eU=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var e$=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var eL=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var eq=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var eY=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var eQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var eJ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var eX=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var eZ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var e0=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var e1=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var e2=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var e3=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var e5=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var e9=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var e6=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var e4=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var e8=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js")},"../../node_modules/@cardano-sdk/core/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{InvalidProtocolParametersError:()=>InvalidProtocolParametersError,NotImplementedError:()=>NotImplementedError,ProviderError:()=>ProviderError,ProviderFailure:()=>i,SerializationError:()=>SerializationError,SerializationFailure:()=>d});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(i||(i={}));const o={[i.BadRequest]:400,[i.Forbidden]:403,[i.NotFound]:404,[i.Conflict]:409,[i.Unhealthy]:500,[i.Unknown]:500,[i.InvalidResponse]:500,[i.NotImplemented]:500,[i.ConnectionFailure]:500,[i.ServerUnavailable]:500};const n=new Map(Object.entries(o).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(i).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:i.Unknown;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}class HandleOwnerChangeError extends a.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}var d;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(d||(d={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}class InvalidProtocolParametersError extends a.CustomError{constructor(e){super(e)}}class NotImplementedError extends a.CustomError{constructor(e){super(`Not implemented: ${e}`)}}class TimeoutError extends a.CustomError{constructor(e){super(`Timeout: ${e}`)}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js":(e,t,r)=>{"use strict";r.d(t,{coalesceValueQuantities:()=>coalesceValueQuantities});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const coalesceValueQuantities=e=>({assets:s.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:a.BigIntMath.sum(e.map(({coins:e})=>e))})},"../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js":(e,t,r)=>{"use strict";r.d(t,{inConwayEra:()=>s});let s=false;const setInConwayEra=e=>s=e},"../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js":(e,t,r)=>{"use strict";r.d(t,{asMetadatumArray:()=>asMetadatumArray,asMetadatumMap:()=>asMetadatumMap,jsonToMetadatum:()=>jsonToMetadatum,metadatumToJson:()=>metadatumToJson});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(jsonToMetadatum(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const a=new Map;for(const i in e){const o=e[i];a.set(jsonToMetadatum(i),jsonToMetadatum(o))}return a}}};const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(metadatumToJson(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const a={};for(const[i,o]of e.entries())a[metadatumToJson(i)]=metadatumToJson(o);return a}}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js":(e,t,r)=>{"use strict";r.d(t,{bytesToHex:()=>bytesToHex,hexToBytes:()=>hexToBytes});var s=r("../../node_modules/buffer/index.js")["Buffer"];const bytesToHex=e=>s.from(e).toString("hex");const hexToBytes=e=>s.from(e,"hex");const utf8ToBytes=e=>s.from(e,"utf8");const utf8ToHex=e=>s.from(e,"utf8").toString("hex")},"../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js":(e,t,r)=>{"use strict";r.d(t,{createSlotEpochCalc:()=>c,createSlotEpochInfoCalc:()=>createSlotEpochInfoCalc,createSlotTimeCalc:()=>createSlotTimeCalc});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var i=r("../../node_modules/lodash/groupBy.js");var o=r("../../node_modules/lodash/last.js");var n=r("../../node_modules/lodash/memoize.js");var d=r("../../node_modules/lodash/orderBy.js");class EraSummaryError extends s.CustomError{}const createSlotEpochCalcImpl=e=>{const t=Object.values(i(e,"start.slot")).map(o);const r=d(t,({start:e})=>e.slot);return e=>{const t=d(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let a;for(let i=0;i<t.length;i++){a=t[i];const o=t[i+1];s+=Math.floor((((null==o?void 0:o.start.slot)||e)-a.start.slot)/a.parameters.epochLength)}return{epochEraSummary:a,epochNo:s}}};const c=n(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,a.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values(i(e,"start.slot")).map(o);const r=d(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};const createSlotEpochInfoCalc=e=>{const t=createSlotTimeCalc(e);const r=createSlotEpochCalcImpl(e);return e=>{const{epochNo:s,epochEraSummary:i}=r(e);const o=i.start.slot+Math.floor((e-i.start.slot)/i.parameters.epochLength)*i.parameters.epochLength;const n=o+i.parameters.epochLength-1;return{epochNo:(0,a.EpochNo)(s),firstSlot:{date:t((0,a.Slot)(o)),slot:(0,a.Slot)(o)},lastSlot:{date:t((0,a.Slot)(n)),slot:(0,a.Slot)(n)}}}};const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let i=0;const o=t.length-1;const checkNextEraSummary=()=>i<o&&s>=t[i+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())i++};findNextEraSummary();while(r!==e){s+=t[i].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[i];return{eraSummary:n,firstSlot:(0,a.Slot)(s),lastSlot:(0,a.Slot)(s+n.parameters.epochLength-1)}};const l=n(epochSlotsCalcImplementation);const u=n(e=>n(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/esm/util/time.js":(e,t,r)=>{"use strict";r.d(t,{Milliseconds:()=>Milliseconds,Seconds:()=>Seconds});const Milliseconds=e=>e;const Seconds=e=>e;const Minutes=e=>e;const Hours=e=>e;const Days=e=>e;Hours.toDays=e=>e/24;Days.toHours=e=>24*e;Minutes.toHours=e=>e/60;Hours.toMinutes=e=>60*e;Seconds.toMinutes=e=>e/60;Minutes.toSeconds=e=>60*e;Seconds.toMilliseconds=e=>1e3*e;Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(Hours.toMinutes(e))))}getTotalDays(){return Hours.toDays(this.getTotalHours())}getTotalHours(){return Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return Days(Math.floor(this.getTotalDays()))}getHours(){return Hours(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return Minutes(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return Seconds(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return Milliseconds(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=Milliseconds(0);this.elapsed=e}}},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js":(e,t,r)=>{"use strict";r.d(t,{base58:()=>l,bech32:()=>y});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let a=r.length;if(a*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;a>0&&r[a-1]===t;a--)if(!((a-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,a)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const a=[];const i=Array.from(e);i.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let o=0;let n=true;for(let d=s;d<i.length;d++){const c=i[d];const l=t*o+c;if(!Number.isSafeInteger(l)||t*o/t!==o||l-c!==t*o){throw new Error("convertRadix: carry overflow")}o=l%r;i[d]=Math.floor(l/r);if(!Number.isSafeInteger(i[d])||i[d]*r+o!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(i[d])n=false;else s=d}a.push(o);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)a.push(0);return a.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let a=0;let i=0;const o=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);a=a<<t|d;if(i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);i+=t;for(;i>=r;i-=r)n.push((a>>i-r&o)>>>0);a&=2**i-1}a=a<<r-i&o;if(!s&&i>=t)throw new Error("Excess padding");if(!s&&a)throw new Error(`Non-zero padding: ${a}`);if(s&&i>0)n.push(a>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const a=new Uint8Array(r.length+e);a.set(r);a.set(s,r.length);return a},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const a=t(s).slice(0,e);const i=r.slice(-e);for(let o=0;o<e;o++)if(a[o]!==i[o])throw new Error("Invalid checksum");return s}}}const s={alphabet,chain,checksum,radix,radix2,join,padding};const a=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));const i=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));const o=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));const n=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const d=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));const c=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));const l=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const u=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");const f=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const h=[0,2,3,5,6,7,9,10,11];const m={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=l.encode(s).padStart(h[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11);const a=h.indexOf(s.length);const i=l.decode(s);for(let o=0;o<i.length-a;o++)if(0!==i[o])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-a)))}return Uint8Array.from(t)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),l);const p=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const v=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<v.length;s++)if((t>>s&1)===1)r^=v[s];return r}function bechChecksum(e,t,r=1){const s=e.length;let a=1;for(let i=0;i<s;i++){const o=e.charCodeAt(i);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);a=bech32Polymod(a)^o>>5}a=bech32Polymod(a);for(let n=0;n<s;n++)a=bech32Polymod(a)^31&e.charCodeAt(n);for(let d of t)a=bech32Polymod(a)^d;for(let c=0;c<6;c++)a=bech32Polymod(a);a^=r;return p.encode(convertRadix2([a%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const s=r.decode;const a=r.encode;const i=unsafeWrapper(s);function encode(e,r,s=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const a=e.length+7+r.length;if(false!==s&&a>s)throw new TypeError(`Length ${a} exceeds limit ${s}`);e=e.toLowerCase();return`${e}1${p.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=s;const a=e.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,a);const o=e.slice(a+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const n=p.decode(o).slice(0,-6);const d=bechChecksum(i,n,t);if(!o.endsWith(d))throw new Error(`Invalid checksum in ${e}: expected "${d}"`);return{prefix:i,words:n}}const o=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:s(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:o,fromWords:s,fromWordsUnsafe:i,toWords:a}}const y=genBech32("bech32");const _=genBech32("bech32m");const w={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};const g=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const b={utf8:w,hex:g,base16:a,base32:i,base64:d,base64url:c,base58:l,base58xmr:m};const P=null;const bytesToString=(e,t)=>{if("string"!=typeof e||!b.hasOwnProperty(e))throw new TypeError(P);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return b[e].encode(t)};const S=null;const stringToBytes=(e,t)=>{if(!b.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return b[e].decode(t)};const C=null},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js":(e,t)=>{"use strict";/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ Object.defineProperty(t,"__esModule",{value:true});t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}t.assertNumber=assertNumber;function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let a=r.length;if(a*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;a>0&&r[a-1]===t;a--)if(!((a-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,a)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const a=[];const i=Array.from(e);i.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let o=0;let n=true;for(let d=s;d<i.length;d++){const c=i[d];const l=t*o+c;if(!Number.isSafeInteger(l)||t*o/t!==o||l-c!==t*o){throw new Error("convertRadix: carry overflow")}o=l%r;i[d]=Math.floor(l/r);if(!Number.isSafeInteger(i[d])||i[d]*r+o!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(i[d])n=false;else s=d}a.push(o);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)a.push(0);return a.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let a=0;let i=0;const o=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);a=a<<t|d;if(i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);i+=t;for(;i>=r;i-=r)n.push((a>>i-r&o)>>>0);a&=2**i-1}a=a<<r-i&o;if(!s&&i>=t)throw new Error("Excess padding");if(!s&&a)throw new Error(`Non-zero padding: ${a}`);if(s&&i>0)n.push(a>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const a=new Uint8Array(r.length+e);a.set(r);a.set(s,r.length);return a},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const a=t(s).slice(0,e);const i=r.slice(-e);for(let o=0;o<e;o++)if(a[o]!==i[o])throw new Error("Invalid checksum");return s}}}t.utils={alphabet,chain,checksum,radix,radix2,join,padding};t.base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));t.base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));t.base32hex=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));t.base32crockford=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));t.base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));t.base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));t.base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");t.base58flickr=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");t.base58xrp=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const r=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let s="";for(let a=0;a<e.length;a+=8){const i=e.subarray(a,a+8);s+=t.base58.encode(i).padStart(r[i.length],"1")}return s},decode(e){let s=[];for(let a=0;a<e.length;a+=11){const i=e.slice(a,a+11);const o=r.indexOf(i.length);const n=t.base58.decode(i);for(let d=0;d<n.length-o;d++)if(0!==n[d])throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(n.slice(n.length-o)))}return Uint8Array.from(s)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),t.base58);t.base58check=base58check;const s=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const a=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<a.length;s++)if((t>>s&1)===1)r^=a[s];return r}function bechChecksum(e,t,r=1){const a=e.length;let i=1;for(let o=0;o<a;o++){const n=e.charCodeAt(o);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=bech32Polymod(i)^n>>5}i=bech32Polymod(i);for(let d=0;d<a;d++)i=bech32Polymod(i)^31&e.charCodeAt(d);for(let c of t)i=bech32Polymod(i)^c;for(let l=0;l<6;l++)i=bech32Polymod(i);i^=r;return s.encode(convertRadix2([i%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const a=r.decode;const i=r.encode;const o=unsafeWrapper(a);function encode(e,r,a=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const i=e.length+7+r.length;if(false!==a&&i>a)throw new TypeError(`Length ${i} exceeds limit ${a}`);e=e.toLowerCase();return`${e}1${s.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=a;const i=e.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i);const n=e.slice(i+1);if(n.length<6)throw new Error("Data must be at least 6 characters long");const d=s.decode(n).slice(0,-6);const c=bechChecksum(o,d,t);if(!n.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:d}}const n=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:a(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:n,fromWords:a,fromWordsUnsafe:o,toWords:i}}t.bech32=genBech32("bech32");t.bech32m=genBech32("bech32m");t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};t.hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const i={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr};const o=`Invalid encoding type. Available types: ${Object.keys(i).join(", ")}`;const bytesToString=(e,t)=>{if("string"!=typeof e||!i.hasOwnProperty(e))throw new TypeError(o);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return i[e].encode(t)};t.bytesToString=bytesToString;t.str=t.bytesToString;const stringToBytes=(e,t)=>{if(!i.hasOwnProperty(e))throw new TypeError(o);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return i[e].decode(t)};t.stringToBytes=stringToBytes;t.bytes=t.stringToBytes},"../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.derivePublic=t.derivePrivate=void 0;const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js");const n=a(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,a)=>{const i=s.allocUnsafe(69);i.writeUInt32LE(e,65);t.copy(i,1);r.copy(i,33);i[0]=0;const o=n.default.crypto_auth_hmacsha512(i,a);i[0]=1;const d=n.default.crypto_auth_hmacsha512(i,a);return{ccMac:d,zMac:o}};const deriveSoft=(e,t,r)=>{const a=s.allocUnsafe(37);a.writeUInt32LE(e,33);const i=s.from(n.default.crypto_scalarmult_ed25519_base_noclamp(t));i.copy(a,1);a[0]=2;const o=n.default.crypto_auth_hmacsha512(a,r);a[0]=3;const d=n.default.crypto_auth_hmacsha512(a,r);return{ccMac:d,zMac:o}};const pointOfTrunc28Mul8=e=>{const t=(0,o.add28Mul8)(new Uint8Array(32).fill(0),e);return n.default.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const i=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,a,i):deriveSoft(t,r,i);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,o.add28Mul8)(r,l);const h=(0,o.add256bits)(a,u);return s.concat([f,h,c])};t.derivePrivate=derivePrivate;const derivePublic=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const o=s.allocUnsafe(37);o.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new i.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(o,1);o[0]=2;const d=n.default.crypto_auth_hmacsha512(o,a);o[0]=3;const c=n.default.crypto_auth_hmacsha512(o,a);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return s.concat([n.default.crypto_core_ed25519_add(f,r),l])};t.derivePublic=derivePublic},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PrivateKey=t.BIP32_ED25519_PRIVATE_KEY_LENGTH=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const h=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js");const m=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=r("../../node_modules/pbkdf2/browser.js");const y=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const _=0;const w=32;const g=4096;const b=96;const P="sha512";const S=64;const C=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(_,w);t.BIP32_ED25519_PRIVATE_KEY_LENGTH=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,v.pbkdf2Sync)(t,e,g,b,P);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==t.BIP32_ED25519_PRIVATE_KEY_LENGTH)throw new p.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(s.from(e,"hex"))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return m.Ed25519PrivateKey.fromExtendedBytes(d(this,l,"f").slice(0,m.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(d(this,l,"f").slice(0,m.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=y.default.crypto_scalarmult_ed25519_base_noclamp(e);return h.Bip32PublicKey.fromBytes(s.concat([t,d(this,l,"f").slice(S,S+C)]))}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PrivateKeyHex)(s.from(d(this,l,"f")).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PrivateKey=Bip32PrivateKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PublicKey=t.BIP32_ED25519_PUBLIC_KEY_LENGTH=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const h=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));t.BIP32_ED25519_PUBLIC_KEY_LENGTH=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==t.BIP32_ED25519_PUBLIC_KEY_LENGTH)throw new m.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(s.from(e,"hex"))}toRawKey(){return h.Ed25519PublicKey.fromBytes(d(this,l,"f").slice(0,h.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PublicKeyHex)(s.from(d(this,l,"f")).toString("hex"))}hash(){const e=p.default.crypto_generichash(f.BIP32_PUBLIC_KEY_HASH_LENGTH,d(this,l,"f"));return(0,f.Bip32PublicKeyHashHex)(s.from(e).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PublicKey=Bip32PublicKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.le32=t.add256bits=t.add28Mul8=void 0;const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<28;a++){const i=e[a]+(t[a]<<3)+r;s[a]=255&i;r=i>>8}for(let o=28;o<32;o++){const n=e[o]+r;s[o]=255&n;r=n>>8}return s};t.add28Mul8=add28Mul8;const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<32;a++){const i=e[a]+t[a]+r;s[a]=i;r=i>>8}return s};t.add256bits=add256bits;const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255]);t.le32=le32},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519KeyHash=t.ED25519_PUBLIC_KEY_HASH_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_PUBLIC_KEY_HASH_LENGTH=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==t.ED25519_PUBLIC_KEY_HASH_LENGTH)throw new d.InvalidArgumentError("hash",`Hash should be ${t.ED25519_PUBLIC_KEY_HASH_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(s.from(e,"hex"))}bytes(){return i(this,o,"f")}hex(){return(0,n.Ed25519KeyHashHex)(s.from(i(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);a(this,o,e,"f")}}t.Ed25519KeyHash=Ed25519KeyHash;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PrivateKey=t.Ed25519PrivateKeyType=t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=o(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const h=0;const m=32;const p=32;const v=32;t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=32;t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=64;const extendedScalar=e=>e.slice(h,m);const extendedIv=e=>e.slice(p,p+v);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const a=f.default.crypto_scalarmult_ed25519_base_noclamp(r);const i=f.default.crypto_core_ed25519_scalar_reduce(f.default.crypto_hash_sha512(s.concat([extendedIv(e),t])));const o=f.default.crypto_scalarmult_ed25519_base_noclamp(i);let n=f.default.crypto_hash_sha512(s.concat([o,a,t]));n=f.default.crypto_core_ed25519_scalar_reduce(n);return s.concat([o,f.default.crypto_core_ed25519_scalar_add(f.default.crypto_core_ed25519_scalar_mul(n,r),i)])};var y;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(y=t.Ed25519PrivateKeyType||(t.Ed25519PrivateKeyType={}));class Ed25519PrivateKey{toPublic(){return c.Ed25519PublicKey.fromBytes(this.__type===y.Extended?f.default.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(i(this,n,"f"))):f.default.crypto_sign_seed_keypair(i(this,n,"f")).publicKey)}sign(e){return l.Ed25519Signature.fromBytes(this.__type===y.Extended?signExtendedDetached(i(this,n,"f"),s.from(e,"hex")):f.default.crypto_sign_detached(s.from(e,"hex"),s.concat([i(this,n,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==t.NORMAL_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.NORMAL_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,y.Normal)}static fromExtendedBytes(e){if(e.length!==t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,y.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(s.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(s.from(e,"hex"))}bytes(){return i(this,n,"f")}hex(){return this.__type===y.Extended?(0,d.Ed25519PrivateExtendedKeyHex)(s.from(i(this,n,"f")).toString("hex")):(0,d.Ed25519PrivateNormalKeyHex)(s.from(i(this,n,"f")).toString("hex"))}constructor(e,t){n.set(this,void 0);a(this,n,e,"f");this.__type=t}}t.Ed25519PrivateKey=Ed25519PrivateKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PublicKey=t.ED25519_PUBLIC_KEY_LENGTH=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=o(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));t.ED25519_PUBLIC_KEY_LENGTH=32;class Ed25519PublicKey{verify(e,t){return u.default.crypto_sign_verify_detached(e.bytes(),s.from(t,"hex"),i(this,n,"f"))}static fromBytes(e){if(e.length!==t.ED25519_PUBLIC_KEY_LENGTH)throw new l.InvalidArgumentError("keyMaterial",`Key should be ${t.ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(s.from(e,"hex"))}hash(){const e=u.default.crypto_generichash(d.ED25519_PUBLIC_KEY_HASH_LENGTH,i(this,n,"f"));return d.Ed25519KeyHash.fromBytes(e)}bytes(){return i(this,n,"f")}hex(){return(0,c.Ed25519PublicKeyHex)(s.from(i(this,n,"f")).toString("hex"))}constructor(e){n.set(this,void 0);a(this,n,e,"f")}}t.Ed25519PublicKey=Ed25519PublicKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519Signature=t.ED25519_SIGNATURE_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_SIGNATURE_LENGTH=64;class Ed25519Signature{static fromBytes(e){if(e.length!==t.ED25519_SIGNATURE_LENGTH)throw new d.InvalidArgumentError("signature",`signature should be ${t.ED25519_SIGNATURE_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(s.from(e,"hex"))}bytes(){return i(this,o,"f")}hex(){return(0,n.Ed25519SignatureHex)(s.from(i(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);a(this,o,e,"f")}}t.Ed25519Signature=Ed25519Signature;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Hash28ByteBase16=t.Hash32ByteBase16=t.Bip32PublicKeyHashHex=t.Ed25519KeyHashHex=t.Ed25519PrivateNormalKeyHex=t.Ed25519PrivateExtendedKeyHex=t.Ed25519PublicKeyHex=t.Bip32PrivateKeyHex=t.Bip32PublicKeyHex=t.Ed25519SignatureHex=t.BIP32_PUBLIC_KEY_HASH_LENGTH=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.BIP32_PUBLIC_KEY_HASH_LENGTH=28;const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);t.Ed25519SignatureHex=Ed25519SignatureHex;const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);t.Bip32PublicKeyHex=Bip32PublicKeyHex;const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);t.Bip32PrivateKeyHex=Bip32PrivateKeyHex;const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,64);t.Ed25519PublicKeyHex=Ed25519PublicKeyHex;const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);t.Ed25519PrivateExtendedKeyHex=Ed25519PrivateExtendedKeyHex;const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);t.Ed25519PrivateNormalKeyHex=Ed25519PrivateNormalKeyHex;const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);t.Ed25519KeyHashHex=Ed25519KeyHashHex;const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,2*t.BIP32_PUBLIC_KEY_HASH_LENGTH);t.Bip32PublicKeyHashHex=Bip32PublicKeyHashHex;const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);t.Hash32ByteBase16=Hash32ByteBase16;t.Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);t.Hash28ByteBase16=Hash28ByteBase16;t.Hash28ByteBase16.fromEd25519KeyHashHex=e=>e},"../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ready=t.blake2b=void 0;const o=i(r("../../node_modules/blake2b-no-wasm/index.js"));t.blake2b=o.default;const n=i(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js"),t);const ready=async()=>await n.default.ready;t.ready=ready},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.CmlBip32Ed25519=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=(0,d.usingAutoFree)(r=>{const a=r.manage(i(this,o,"f").Bip32PrivateKey.from_bip39_entropy(e,s.from(t)));return a.as_bytes()});return(0,n.Bip32PrivateKeyHex)(s.from(r).toString("hex"))}getPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=e.length===c?t.manage(i(this,o,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):t.manage(i(this,o,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const a=t.manage(r.to_public()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(a).toString("hex"))})}getPubKeyHash(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(i(this,o,"f").PublicKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.hash()).to_bytes();return(0,n.Ed25519KeyHashHex)(s.from(a).toString("hex"))})}getRawPrivateKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(i(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PrivateExtendedKeyHex)(s.from(a).toString("hex"))})}getRawPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(i(this,o,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(a).toString("hex"))})}getBip32PublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(i(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const a=t.manage(r.to_public()).as_bytes();return(0,n.Bip32PublicKeyHex)(s.from(a).toString("hex"))})}derivePrivateKey(e,t){return(0,d.usingAutoFree)(r=>{let a=r.manage(i(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));for(const d of t)a=r.manage(a.derive(d));return(0,n.Bip32PrivateKeyHex)(s.from(a.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return(0,d.usingAutoFree)(r=>{let a=r.manage(i(this,o,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));for(const d of t)a=r.manage(a.derive(d));return(0,n.Bip32PublicKeyHex)(s.from(a.as_bytes()).toString("hex"))})}sign(e,t){return(0,d.usingAutoFree)(r=>{const a=e.length===c?r.manage(i(this,o,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):r.manage(i(this,o,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const d=r.manage(a.sign(s.from(t,"hex"))).to_bytes();return(0,n.Ed25519SignatureHex)(s.from(d).toString("hex"))})}verify(e,t,r){return(0,d.usingAutoFree)(a=>{const n=a.manage(i(this,o,"f").PublicKey.from_bytes(s.from(r,"hex")));const d=a.manage(i(this,o,"f").Ed25519Signature.from_bytes(s.from(e,"hex")));return n.verify(s.from(t,"hex"),d)})}constructor(e){o.set(this,void 0);a(this,o,e,"f")}}t.CmlBip32Ed25519=CmlBip32Ed25519;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SodiumBip32Ed25519=void 0;const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js");const i=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const o=s(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const n=128;class SodiumBip32Ed25519{static async create(){await o.default.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return a.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===n?i.Ed25519PrivateKey.fromExtendedHex(e):i.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=i.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return a.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=a.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=a.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=a.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=a.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}sign(e,t){const r=e.length===n?i.Ed25519PrivateKey.fromExtendedHex(e):i.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=i.Ed25519PublicKey.fromHex(r);return s.verify(i.Ed25519Signature.fromHex(e),t)}constructor(){}}t.SodiumBip32Ed25519=SodiumBip32Ed25519},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js"),t);a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js":(e,t,r)=>{"use strict";r.d(t,{derivePrivate:()=>derivePrivate,derivePublic:()=>derivePublic});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var i=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,s)=>{const a=o.allocUnsafe(69);a.writeUInt32LE(e,65);t.copy(a,1);r.copy(a,33);a[0]=0;const n=i.crypto_auth_hmacsha512(a,s);a[0]=1;const d=i.crypto_auth_hmacsha512(a,s);return{ccMac:d,zMac:n}};const deriveSoft=(e,t,r)=>{const s=o.allocUnsafe(37);s.writeUInt32LE(e,33);const a=o.from(i.crypto_scalarmult_ed25519_base_noclamp(t));a.copy(s,1);s[0]=2;const n=i.crypto_auth_hmacsha512(s,r);s[0]=3;const d=i.crypto_auth_hmacsha512(s,r);return{ccMac:d,zMac:n}};const pointOfTrunc28Mul8=e=>{const t=(0,a.add28Mul8)(new Uint8Array(32).fill(0),e);return i.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const s=e.subarray(32,64);const i=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,s,i):deriveSoft(t,r,i);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,a.add28Mul8)(r,l);const h=(0,a.add256bits)(s,u);return o.concat([f,h,c])};const derivePublic=(e,t)=>{const r=e.subarray(0,32);const a=e.subarray(32,64);const n=o.allocUnsafe(37);n.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new s.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(n,1);n[0]=2;const d=i.crypto_auth_hmacsha512(n,a);n[0]=3;const c=i.crypto_auth_hmacsha512(n,a);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return o.concat([i.crypto_core_ed25519_add(f,r),l])}},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>w,Bip32PrivateKey:()=>Bip32PrivateKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/pbkdf2/browser.js");var c=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u;const f=0;const h=32;const m=4096;const p=96;const v="sha512";const y=64;const _=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(f,h);const w=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,d.pbkdf2Sync)(t,e,m,p,v);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==w)throw new n.InvalidArgumentError("key",`Key should be ${w} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(l.from(e,"hex"))}derive(e){let t=l.from(__classPrivateFieldGet(this,u,"f"));for(const r of e)t=s.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return o.Ed25519PrivateKey.fromExtendedBytes(__classPrivateFieldGet(this,u,"f").slice(0,o.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(__classPrivateFieldGet(this,u,"f").slice(0,o.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=c.crypto_scalarmult_ed25519_base_noclamp(e);return i.Bip32PublicKey.fromBytes(l.concat([t,__classPrivateFieldGet(this,u,"f").slice(y,y+_)]))}bytes(){return __classPrivateFieldGet(this,u,"f")}hex(){return(0,a.Bip32PrivateKeyHex)(l.from(__classPrivateFieldGet(this,u,"f")).toString("hex"))}constructor(e){u.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>l,Bip32PublicKey:()=>Bip32PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==l)throw new o.InvalidArgumentError("key",`Key should be ${l} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(d.from(e,"hex"))}toRawKey(){return i.Ed25519PublicKey.fromBytes(__classPrivateFieldGet(this,c,"f").slice(0,i.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=d.from(__classPrivateFieldGet(this,c,"f"));for(const r of e)t=s.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return(0,a.Bip32PublicKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}hash(){const e=n.crypto_generichash(a.BIP32_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,c,"f"));return(0,a.Bip32PublicKeyHashHex)(d.from(e).toString("hex"))}constructor(e){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js":(e,t,r)=>{"use strict";r.d(t,{add256bits:()=>add256bits,add28Mul8:()=>add28Mul8,le32:()=>le32});const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<28;a++){const i=e[a]+(t[a]<<3)+r;s[a]=255&i;r=i>>8}for(let o=28;o<32;o++){const n=e[o]+r;s[o]=255&n;r=n>>8}return s};const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let a=0;a<32;a++){const i=e[a]+t[a]+r;s[a]=i;r=i>>8}return s};const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_PUBLIC_KEY_HASH_LENGTH:()=>n,Ed25519KeyHash:()=>Ed25519KeyHash});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;const n=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==n)throw new a.InvalidArgumentError("hash",`Hash should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(i.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,o,"f")}hex(){return(0,s.Ed25519KeyHashHex)(i.from(__classPrivateFieldGet(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>p,Ed25519PrivateKey:()=>Ed25519PrivateKey,Ed25519PrivateKeyType:()=>v,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>m});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=0;const u=32;const f=32;const h=32;const m=32;const p=64;const extendedScalar=e=>e.slice(l,u);const extendedIv=e=>e.slice(f,f+h);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const s=n.crypto_scalarmult_ed25519_base_noclamp(r);const a=n.crypto_core_ed25519_scalar_reduce(n.crypto_hash_sha512(d.concat([extendedIv(e),t])));const i=n.crypto_scalarmult_ed25519_base_noclamp(a);let o=n.crypto_hash_sha512(d.concat([i,s,t]));o=n.crypto_core_ed25519_scalar_reduce(o);return d.concat([i,n.crypto_core_ed25519_scalar_add(n.crypto_core_ed25519_scalar_mul(o,r),a)])};var v;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(v||(v={}));class Ed25519PrivateKey{toPublic(){return a.Ed25519PublicKey.fromBytes(this.__type===v.Extended?n.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(__classPrivateFieldGet(this,c,"f"))):n.crypto_sign_seed_keypair(__classPrivateFieldGet(this,c,"f")).publicKey)}sign(e){return i.Ed25519Signature.fromBytes(this.__type===v.Extended?signExtendedDetached(__classPrivateFieldGet(this,c,"f"),d.from(e,"hex")):n.crypto_sign_detached(d.from(e,"hex"),d.concat([__classPrivateFieldGet(this,c,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==m)throw new o.InvalidArgumentError("keyMaterial",`Key should be ${m} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Normal)}static fromExtendedBytes(e){if(e.length!==p)throw new o.InvalidArgumentError("keyMaterial",`Key should be ${p} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(d.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(d.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return this.__type===v.Extended?(0,s.Ed25519PrivateExtendedKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex")):(0,s.Ed25519PrivateNormalKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}constructor(e,t){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");this.__type=t}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_PUBLIC_KEY_LENGTH:()=>c,Ed25519PublicKey:()=>Ed25519PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;const c=32;class Ed25519PublicKey{verify(e,t){return o.crypto_sign_verify_detached(e.bytes(),n.from(t,"hex"),__classPrivateFieldGet(this,d,"f"))}static fromBytes(e){if(e.length!==c)throw new i.InvalidArgumentError("keyMaterial",`Key should be ${c} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(n.from(e,"hex"))}hash(){const e=o.crypto_generichash(s.ED25519_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,d,"f"));return s.Ed25519KeyHash.fromBytes(e)}bytes(){return __classPrivateFieldGet(this,d,"f")}hex(){return(0,a.Ed25519PublicKeyHex)(n.from(__classPrivateFieldGet(this,d,"f")).toString("hex"))}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_SIGNATURE_LENGTH:()=>n,Ed25519Signature:()=>Ed25519Signature});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;const n=64;class Ed25519Signature{static fromBytes(e){if(e.length!==n)throw new a.InvalidArgumentError("signature",`signature should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(i.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,o,"f")}hex(){return(0,s.Ed25519SignatureHex)(i.from(__classPrivateFieldGet(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_PUBLIC_KEY_HASH_LENGTH:()=>a,Bip32PrivateKeyHex:()=>Bip32PrivateKeyHex,Bip32PublicKeyHashHex:()=>Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>Bip32PublicKeyHex,Ed25519KeyHashHex:()=>Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>Ed25519PrivateExtendedKeyHex,Ed25519PrivateNormalKeyHex:()=>Ed25519PrivateNormalKeyHex,Ed25519PublicKeyHex:()=>Ed25519PublicKeyHex,Ed25519SignatureHex:()=>Ed25519SignatureHex,Hash28ByteBase16:()=>Hash28ByteBase16,Hash32ByteBase16:()=>Hash32ByteBase16});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const a=28;const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,64);const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,2*a);const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);Hash28ByteBase16.fromEd25519KeyHashHex=e=>e},"../../node_modules/@cardano-sdk/crypto/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>i.BIP32_ED25519_PRIVATE_KEY_LENGTH,BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>o.BIP32_ED25519_PUBLIC_KEY_LENGTH,BIP32_PUBLIC_KEY_HASH_LENGTH:()=>f.BIP32_PUBLIC_KEY_HASH_LENGTH,Bip32PrivateKey:()=>i.Bip32PrivateKey,Bip32PrivateKeyHex:()=>f.Bip32PrivateKeyHex,Bip32PublicKey:()=>o.Bip32PublicKey,Bip32PublicKeyHashHex:()=>f.Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>f.Bip32PublicKeyHex,CmlBip32Ed25519:()=>CmlBip32Ed25519,ED25519_PUBLIC_KEY_HASH_LENGTH:()=>u.ED25519_PUBLIC_KEY_HASH_LENGTH,ED25519_PUBLIC_KEY_LENGTH:()=>c.ED25519_PUBLIC_KEY_LENGTH,ED25519_SIGNATURE_LENGTH:()=>l.ED25519_SIGNATURE_LENGTH,EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>d.EXTENDED_ED25519_PRIVATE_KEY_LENGTH,Ed25519KeyHash:()=>u.Ed25519KeyHash,Ed25519KeyHashHex:()=>f.Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>f.Ed25519PrivateExtendedKeyHex,Ed25519PrivateKey:()=>d.Ed25519PrivateKey,Ed25519PrivateKeyType:()=>d.Ed25519PrivateKeyType,Ed25519PrivateNormalKeyHex:()=>f.Ed25519PrivateNormalKeyHex,Ed25519PublicKey:()=>c.Ed25519PublicKey,Ed25519PublicKeyHex:()=>f.Ed25519PublicKeyHex,Ed25519Signature:()=>l.Ed25519Signature,Ed25519SignatureHex:()=>f.Ed25519SignatureHex,Hash28ByteBase16:()=>f.Hash28ByteBase16,Hash32ByteBase16:()=>f.Hash32ByteBase16,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>d.NORMAL_ED25519_PRIVATE_KEY_LENGTH,SodiumBip32Ed25519:()=>y.SodiumBip32Ed25519,add256bits:()=>n.add256bits,add28Mul8:()=>n.add28Mul8,blake2b:()=>s,le32:()=>n.le32,ready:()=>ready});var s=r("../../node_modules/blake2b-no-wasm/index.js");var a=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var l=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var u=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var f=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/freeable.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p;const v=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=(0,h.usingAutoFree)(r=>{const s=r.manage(__classPrivateFieldGet(this,p,"f").Bip32PrivateKey.from_bip39_entropy(e,m.from(t)));return s.as_bytes()});return(0,f.Bip32PrivateKeyHex)(m.from(r).toString("hex"))}getPublicKey(e){return(0,h.usingAutoFree)(t=>{const r=e.length===v?t.manage(__classPrivateFieldGet(this,p,"f").PrivateKey.from_extended_bytes(m.from(e,"hex"))):t.manage(__classPrivateFieldGet(this,p,"f").PrivateKey.from_normal_bytes(m.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Ed25519PublicKeyHex)(m.from(s).toString("hex"))})}getPubKeyHash(e){return(0,h.usingAutoFree)(t=>{const r=t.manage(__classPrivateFieldGet(this,p,"f").PublicKey.from_bytes(m.from(e,"hex")));const s=t.manage(r.hash()).to_bytes();return(0,f.Ed25519KeyHashHex)(m.from(s).toString("hex"))})}getRawPrivateKey(e){return(0,h.usingAutoFree)(t=>{const r=t.manage(__classPrivateFieldGet(this,p,"f").Bip32PrivateKey.from_bytes(m.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PrivateExtendedKeyHex)(m.from(s).toString("hex"))})}getRawPublicKey(e){return(0,h.usingAutoFree)(t=>{const r=t.manage(__classPrivateFieldGet(this,p,"f").Bip32PublicKey.from_bytes(m.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PublicKeyHex)(m.from(s).toString("hex"))})}getBip32PublicKey(e){return(0,h.usingAutoFree)(t=>{const r=t.manage(__classPrivateFieldGet(this,p,"f").Bip32PrivateKey.from_bytes(m.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Bip32PublicKeyHex)(m.from(s).toString("hex"))})}derivePrivateKey(e,t){return(0,h.usingAutoFree)(r=>{let s=r.manage(__classPrivateFieldGet(this,p,"f").Bip32PrivateKey.from_bytes(m.from(e,"hex")));for(const a of t)s=r.manage(s.derive(a));return(0,f.Bip32PrivateKeyHex)(m.from(s.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return(0,h.usingAutoFree)(r=>{let s=r.manage(__classPrivateFieldGet(this,p,"f").Bip32PublicKey.from_bytes(m.from(e,"hex")));for(const a of t)s=r.manage(s.derive(a));return(0,f.Bip32PublicKeyHex)(m.from(s.as_bytes()).toString("hex"))})}sign(e,t){return(0,h.usingAutoFree)(r=>{const s=e.length===v?r.manage(__classPrivateFieldGet(this,p,"f").PrivateKey.from_extended_bytes(m.from(e,"hex"))):r.manage(__classPrivateFieldGet(this,p,"f").PrivateKey.from_normal_bytes(m.from(e,"hex")));const a=r.manage(s.sign(m.from(t,"hex"))).to_bytes();return(0,f.Ed25519SignatureHex)(m.from(a).toString("hex"))})}verify(e,t,r){return(0,h.usingAutoFree)(s=>{const a=s.manage(__classPrivateFieldGet(this,p,"f").PublicKey.from_bytes(m.from(r,"hex")));const i=s.manage(__classPrivateFieldGet(this,p,"f").Ed25519Signature.from_bytes(m.from(e,"hex")));return a.verify(m.from(t,"hex"),i)})}constructor(e){p.set(this,void 0);__classPrivateFieldSet(this,p,e,"f")}}p=new WeakMap;var y=r("../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js");const ready=async()=>await a.ready},"../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js":(e,t,r)=>{"use strict";r.d(t,{SodiumBip32Ed25519:()=>SodiumBip32Ed25519});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var d=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");const c=128;class SodiumBip32Ed25519{static async create(){await d.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return s.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===c?i.Ed25519PrivateKey.fromExtendedHex(e):i.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=o.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return s.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=a.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=s.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=s.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=a.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}sign(e,t){const r=e.length===c?i.Ed25519PrivateKey.fromExtendedHex(e):i.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=o.Ed25519PublicKey.fromHex(r);return s.verify(n.Ed25519Signature.fromHex(e),t)}constructor(){}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/AuthenticatorApi/PersistentAuthenticator.js":(e,t,r)=>{"use strict";r.d(t,{PersistentAuthenticator:()=>PersistentAuthenticator});var s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/util.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,i,o,n,d,c;class PersistentAuthenticator{async requestAccess(e){const t=(0,s.senderOrigin)(e);if(!t){__classPrivateFieldGet(this,n,"f").warn("Invalid sender url",e);return false}const r=await __classPrivateFieldGet(this,d,"f");if(r.includes(t)){return true}try{const o=await __classPrivateFieldGet(this,i,"f").call(this,e);if(o){const l=[...r,t];if(await __classPrivateFieldGet(this,a,"m",c).call(this,l)){__classPrivateFieldGet(this,n,"f").info("[Authenticator] added",t);return true}}}catch(u){__classPrivateFieldGet(this,n,"f").error("[Authenticator] requestAccess failed",u)}return false}async revokeAccess(e){const t=(0,s.senderOrigin)(e);if(!t){__classPrivateFieldGet(this,n,"f").warn("Invalid sender url",e);return false}const r=await __classPrivateFieldGet(this,d,"f");const i=r.indexOf(t);if(i>=0){const o=[...r.slice(0,i),...r.slice(i+1)];if(await __classPrivateFieldGet(this,a,"m",c).call(this,o)){__classPrivateFieldGet(this,n,"f").info("[Authenticator] revoked access for",t);return true}}else{__classPrivateFieldGet(this,n,"f").warn("[Authenticator] attempted to revoke access for unknown origin",t)}return false}async haveAccess(e){const t=(0,s.senderOrigin)(e);if(!t)return false;const r=await __classPrivateFieldGet(this,d,"f");return r.includes(t)}async clear(){await __classPrivateFieldGet(this,a,"m",c).call(this,[])}constructor({requestAccess:e},{logger:t,storage:r}){a.add(this);i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,o,r,"f");__classPrivateFieldSet(this,n,t,"f");__classPrivateFieldSet(this,d,r.get(),"f")}}i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,a=new WeakSet,c=async function _PersistentAuthenticator_store(e){try{await __classPrivateFieldGet(this,o,"f").set(e);__classPrivateFieldSet(this,d,Promise.resolve(e),"f");return true}catch(t){__classPrivateFieldGet(this,n,"f").error("[Authenticator] storage.set failed",t);return false}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/AuthenticatorApi/PersistentAuthenticatorStorage.js":(e,t,r)=>{"use strict";r.d(t,{createPersistentAuthenticatorStorage:()=>createPersistentAuthenticatorStorage});const createPersistentAuthenticatorStorage=(e,t)=>{return{async get(){const r=await t.get(e);return(null==r?void 0:r[e])||[]},async set(r){await t.set({[e]:r})}}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js":(e,t,r)=>{"use strict";r.d(t,{APIErrorCode:()=>a,ApiError:()=>ApiError});var s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["InvalidRequest"]=-1]="InvalidRequest";e[e["InternalError"]=-2]="InternalError";e[e["Refused"]=-3]="Refused"})(a||(a={}));class ApiError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{senderOrigin:()=>senderOrigin});const senderOrigin=e=>{try{const{origin:t}=new URL((null==e?void 0:e.url)||"throw");return t}catch{return null}}},"../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.d(t,{CustomError:()=>a});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{LedgerKeyAgent:()=>LedgerKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var o=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var y=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var _=r("../../node_modules/node-hid/nodehid.js");var w=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var g=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var b=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib/webusb.js");var P=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js");var S=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var C=r("../../node_modules/@ledgerhq/hw-transport-node-hid-noevents/lib-es/TransportNodeHid.js");var k=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js");var j=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var x;const T=k["default"]["default"]?k["default"]["default"]:k["default"];const E=i["default"]?i["default"]:i;const isUsbDevice=e=>"undefined"!=typeof USBDevice&&e instanceof USBDevice;const isDeviceAlreadyOpenError=e=>{if("object"!=typeof e)return false;const t=e.innerError;if("object"!=typeof t)return false;return 11===t.code||"string"==typeof t.message&&t.message.includes("cannot open device with path")};const A="Cannot communicate with Ledger Cardano App";const transportTypedError=e=>new l.TransportError("Ledger transport failed",e);const hasRegistrationOrRetirementCerts=e=>{if(!e)return false;return e.some(e=>e.type===i.CertificateType.STAKE_POOL_RETIREMENT)||e.some(e=>e.type===i.CertificateType.STAKE_POOL_REGISTRATION)};const stakeCredentialCert=e=>e.type===i.CertificateType.STAKE_REGISTRATION||e.type===i.CertificateType.STAKE_DEREGISTRATION||e.type===i.CertificateType.STAKE_DELEGATION;const I="establishDeviceConnection";const parseEstablishDeviceConnectionSecondParam=(e,t)=>{let r;let s;const a=e===u.CommunicationType.Node&&t instanceof _.HID||e===u.CommunicationType.Web&&isUsbDevice(t);const i=e===u.CommunicationType.Node&&"string"==typeof t;if(a)r=t;else if(i)s=t;else if(void 0!==t){throw new Error(`Invalid arguments of the '${I}' method`)}return{device:r,nodeHidDevicePath:s}};const containsOnlyScriptHashCreds=e=>{var t;const r=!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!(0,w.areNumbersEqualInConstantTime)(e.stakeCredential.type,i.CredentialParamsType.SCRIPT_HASH)));if(e.certificates){for(const s of e.certificates){if(!stakeCredentialCert(s))return false;const a=s.params;if(!(0,w.areNumbersEqualInConstantTime)(a.stakeCredential.type,i.CredentialParamsType.SCRIPT_HASH))return false}}return r};const isMultiSig=e=>{const t=false;const r=!e.inputs.some(e=>null!==e.path);const s=!e.outputs.some(e=>e.destination.type!==i.TxOutputDestinationType.THIRD_PARTY);if(r&&s&&!e.collateralInputs&&!e.requiredSigners&&!hasRegistrationOrRetirementCerts(e.certificates)&&containsOnlyScriptHashCreds(e)){return true}return t};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=(e,t,r,a,o)=>{const d=e.startsWith("stake");if(d){const c=t.find(({rewardAccount:t})=>t===e);if(!c)throw new f.Cip30DataSignError(f.Cip30DataSignErrorCode.ProofGeneration,"Unknown reward address");const l=h.accountKeyDerivationPathToBip32Path(r,c.stakeKeyDerivationPath||h.STAKE_KEY_DERIVATION_PATH,a);return{addressFieldType:i.MessageAddressFieldType.ADDRESS,addressParams:{params:{stakingPath:l},type:i.AddressType.REWARD_KEY},signingPath:l}}if(isPaymentAddress(e)){var m;const p=n.Address.fromString(e);if((null==p?void 0:p.getType())===n.AddressType.EnterpriseKey&&(null===(m=null==p?void 0:p.getProps().paymentPart)||void 0===m?void 0:m.hash)===s.Hash28ByteBase16.fromEd25519KeyHashHex(o)){const v=h.accountKeyDerivationPathToBip32Path(r,h.DREP_KEY_DERIVATION_PATH,a);return{addressFieldType:i.MessageAddressFieldType.KEY_HASH,signingPath:v}}}const y=t.find(({address:t})=>t===e);if(!y){throw new f.Cip30DataSignError(f.Cip30DataSignErrorCode.ProofGeneration,"Unknown address")}if(y.rewardAccount){const _=h.accountKeyDerivationPathToBip32Path(r,{index:y.index,role:y.type},a);const w=h.accountKeyDerivationPathToBip32Path(r,y.stakeKeyDerivationPath||{index:0,role:u.KeyRole.Stake},a);return{addressFieldType:i.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:_,stakingPath:w},type:i.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},signingPath:_}}const g=h.accountKeyDerivationPathToBip32Path(r,{index:y.index,role:y.type},a);return{addressFieldType:i.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:g},type:i.AddressType.ENTERPRISE_KEY},signingPath:g}};const B=[h.accountKeyDerivationPathToBip32Path(0,{index:0,role:u.KeyRole.External},u.KeyPurpose.MULTI_SIG)];class LedgerKeyAgent extends m.KeyAgentBase{static async findConnectionByCommunicationTypeAndDevicePath(e,t,r){var s;const a=null===(s=this.deviceConnections)||void 0===s?void 0:s.find(s=>{const a=e===s.communicationType;if(s.communicationType===u.CommunicationType.Web){return a&&r===s.device}if(s.communicationType===u.CommunicationType.Node){return a&&r===s.device&&t===s.nodeHidDevicePath}});if(!a)return null;try{await this.testConnection(a.deviceConnection)}catch(i){if(i instanceof l.TransportError&&i.message.includes(A)){this.deviceConnections=this.deviceConnections.filter(e=>e!==a);return null}throw i}return a.deviceConnection}static async getHidDeviceList(e){try{return e===u.CommunicationType.Node?C["default"].list():T.list()}catch(t){throw new l.TransportError("Cannot fetch device list",t)}}static attachDisconnectionCleanupHandler(e){const onDisconnect=async()=>{e.off("disconnect",onDisconnect);this.deviceConnections=this.deviceConnections.filter(({deviceConnection:t})=>t.transport!==e);try{await e.close()}catch(t){if(t instanceof Error&&t.message.includes("The device was disconnected."))return;throw new l.TransportError("Failed to close transport after device disconnection",t)}};e.on("disconnect",onDisconnect)}static async openTransportForDevice({communicationType:e,device:t}){let r;try{if(e===u.CommunicationType.Node&&t instanceof _.HID)r=new C["default"](t);else if(e===u.CommunicationType.Web&&isUsbDevice(t))r=await T.open(t);else{throw new l.TransportError(`Invalid device object provided for communication type ${e}`)}}catch(s){throw new l.TransportError("Failed to open a transport for a given device",s)}this.attachDisconnectionCleanupHandler(r);return r}static async createTransport({communicationType:e,nodeHidDevicePath:t=""}){let r;try{r=e===u.CommunicationType.Node?await C["default"].open(t):await T.open(await (0,b.getFirstLedgerDevice)())}catch(s){throw new l.TransportError("Creating transport failed",s)}this.attachDisconnectionCleanupHandler(r);return r}static async testConnection(e){try{await e.getVersion()}catch(t){throw new l.TransportError(A,t)}}static async createDeviceConnection(e){const t=new E(e);await this.testConnection(t);return t}static rememberConnection({communicationType:e,device:t,deviceConnection:r,nodeHidDevicePath:s}){this.deviceConnections.push({deviceConnection:r,...e===u.CommunicationType.Node?{communicationType:e,...t instanceof _.HID&&{device:t},...void 0!==s&&{nodeHidDevicePath:s}}:{communicationType:e,...isUsbDevice(t)&&{device:t}}})}static async [(x=new WeakMap,I)](e,t){const{device:r,nodeHidDevicePath:s}=parseEstablishDeviceConnectionSecondParam(e,t);const a=await this.findConnectionByCommunicationTypeAndDevicePath(e,s,r);if(a)return a;let i;try{i=r?await LedgerKeyAgent.openTransportForDevice({communicationType:e,device:r}):await LedgerKeyAgent.createTransport({communicationType:e,nodeHidDevicePath:s});if(!i||!i.deviceModel){throw new l.TransportError("Missing transport")}const o=await LedgerKeyAgent.createDeviceConnection(i);this.rememberConnection({communicationType:e,device:r,deviceConnection:o,nodeHidDevicePath:s});return o}catch(n){if(isDeviceAlreadyOpenError(n)){throw new l.TransportError("Connection already established",n)}if(i)void i.close();throw new l.TransportError("Establishing device connection failed",n)}}static async checkDeviceConnection(e,t){try{if(!t){return await LedgerKeyAgent.establishDeviceConnection(e)}return await LedgerKeyAgent.createDeviceConnection(t.transport)}catch(r){if("DisconnectedDeviceDuringOperation"===r.name){return await LedgerKeyAgent.establishDeviceConnection(e)}throw r}}static async getXpub({deviceConnection:e,communicationType:t,accountIndex:r,purpose:a}){try{const i=await LedgerKeyAgent.checkDeviceConnection(t,e);const o=`${a}'/${u.CardanoKeyConst.COIN_TYPE}'/${r}'`;const n=await i.getExtendedPublicKey({path:(0,P.str_to_path)(o)});const d=`${n.publicKeyHex}${n.chainCodeHex}`;return s.Bip32PublicKeyHex(d)}catch(c){if(28169===c.code){throw new p.AuthenticationError("Failed to export extended account public key",c)}throw transportTypedError(c)}}static async getAppVersion(e,t){const r=await LedgerKeyAgent.checkDeviceConnection(e,t);return await r.getVersion()}static async createWithDevice({chainId:e,accountIndex:t=0,communicationType:r,deviceConnection:s,purpose:a=u.KeyPurpose.STANDARD},i){const o=await LedgerKeyAgent.getHidDeviceList(r);const n=await (s?LedgerKeyAgent.checkDeviceConnection(r,s):LedgerKeyAgent.establishDeviceConnection(r,o[0]));const d=await LedgerKeyAgent.getXpub({accountIndex:t,communicationType:r,deviceConnection:n,purpose:a});return new LedgerKeyAgent({accountIndex:t,chainId:e,communicationType:r,deviceConnection:n,extendedAccountPublicKey:d,purpose:a},i)}static isKeyHashOrScriptHashVoter(e){return!!(null==e?void 0:e.some(e=>{switch(e.voter.type){case i.VoterType.COMMITTEE_KEY_HASH:case i.VoterType.COMMITTEE_SCRIPT_HASH:case i.VoterType.DREP_KEY_HASH:case i.VoterType.DREP_SCRIPT_HASH:case i.VoterType.STAKE_POOL_KEY_HASH:return true;default:return false}}))}static getSigningMode(e){if(e.certificates){for(const t of e.certificates){if(t.type===i.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolOwners.some(e=>e.type===i.PoolOwnerType.DEVICE_OWNED))return i.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER;if(t.type===i.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolKey.type===i.PoolKeyType.DEVICE_OWNED)return i.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR}}if(e.collateralInputs||LedgerKeyAgent.isKeyHashOrScriptHashVoter(e.votingProcedures)){return i.TransactionSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return i.TransactionSigningMode.MULTISIG_TRANSACTION}return i.TransactionSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r}){try{var o;const n=e.toCore();const d=e.hash();const c=await this.derivePublicKey(h.DREP_KEY_DERIVATION_PATH);const l=(await a.Ed25519PublicKey.fromHex(c).hash()).hex();const f=e.outputs().map(e=>e.isBabbageOutput()?i.TxOutputFormat.MAP_BABBAGE:i.TxOutputFormat.ARRAY_LEGACY);const m=(null===(o=e.collateralReturn())||void 0===o?void 0:o.isBabbageOutput())?i.TxOutputFormat.MAP_BABBAGE:i.TxOutputFormat.ARRAY_LEGACY;const y=await (0,S.toLedgerTx)(n,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:m,dRepKeyHashHex:l,knownAddresses:t,outputsFormat:f,txInKeyPathMap:r});const _=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,x,"f"),this.deviceConnection);const g=LedgerKeyAgent.getSigningMode(y);const b=await _.signTransaction({options:{tagCborSets:e.hasTaggedSets()},signingMode:g,tx:y,...g===i.TransactionSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessPaths:B}});if(!(0,w.areStringsEqualInConstantTime)(b.txHashHex,d)){throw new v.HwMappingError("Ledger computed a different transaction id")}return new Map(await Promise.all(b.witnesses.map(async e=>{const t=await this.derivePublicKey({index:e.path[u.Cip1852PathLevelIndexes.INDEX],role:e.path[u.Cip1852PathLevelIndexes.ROLE]});const r=s.Ed25519SignatureHex(e.witnessSignatureHex);return[t,r]})))}catch(P){if(28169===P.code){throw new p.AuthenticationError("Transaction signing aborted",P)}throw transportTypedError(P)}}async signCip8Data(e){try{const t=await this.derivePublicKey(h.DREP_KEY_DERIVATION_PATH);const r=(await a.Ed25519PublicKey.fromHex(t).hash()).hex();const{signingPath:n,addressParams:c,addressFieldType:l}=getDerivationPath(e.signWith,e.knownAddresses,this.accountIndex,this.purpose,r);const u=l===i.MessageAddressFieldType.ADDRESS&&c?{address:c,addressFieldType:i.MessageAddressFieldType.ADDRESS,hashPayload:false,messageHex:e.payload,network:{networkId:this.chainId.networkId,protocolMagic:this.chainId.networkMagic},preferHexDisplay:false,signingPath:n}:{addressFieldType:i.MessageAddressFieldType.KEY_HASH,hashPayload:false,messageHex:e.payload,preferHexDisplay:false,signingPath:n};const m=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,x,"f"),this.deviceConnection);const v=await m.signMessage(u);const _=d.hexToBytes((0,g.HexBlob)(v.addressFieldHex));const w=o.HeaderMap.new();w.set_algorithm_id(o.Label.from_algorithm_id(o.AlgorithmId.EdDSA));w.set_header(y.CoseLabel.address,o.CBORValue.new_bytes(_));const b=o.COSESign1Builder.new(o.Headers.new(o.ProtectedHeaderMap.new(w),o.HeaderMap.new()),d.hexToBytes(e.payload),false);const P=b.build(j.from(v.signatureHex,"hex"));const S=f.createCoseKey(_,s.Ed25519PublicKeyHex(v.signingPublicKeyHex));return{key:d.bytesToHex(S.to_bytes()),signature:d.bytesToHex(P.to_bytes())}}catch(C){if(28169===C.code){throw new p.AuthenticationError("Transaction signing aborted",C)}throw transportTypedError(C)}}async signBlob(){throw new c.NotImplementedError("Operation not supported!")}async exportRootPrivateKey(){throw new c.NotImplementedError("Operation not supported!")}constructor({deviceConnection:e,...t},r){super({...t,__typename:u.KeyAgentType.Ledger},r);x.set(this,void 0);this.deviceConnection=e;__classPrivateFieldSet(this,x,t.communicationType,"f")}}LedgerKeyAgent.deviceConnections=[]},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{DeviceType:()=>v,LedgerKeyAgent:()=>p.LedgerKeyAgent,LedgerTxTransformer:()=>l.LedgerTxTransformer,getKnownAddress:()=>i.getKnownAddress,mapAuxiliaryData:()=>a.mapAuxiliaryData,mapCerts:()=>i.mapCerts,mapCollateralTxIns:()=>n.mapCollateralTxIns,mapCollateralTxOut:()=>o.mapCollateralTxOut,mapReferenceInputs:()=>d.mapReferenceInputs,mapRequiredSigners:()=>c.mapRequiredSigners,mapTokenMap:()=>s.mapTokenMap,mapTxIns:()=>u.mapTxIns,mapTxOuts:()=>f.mapTxOuts,mapVotingProcedures:()=>m.mapVotingProcedures,mapWithdrawals:()=>h.mapWithdrawals,poolRegistrationCertificate:()=>i.poolRegistrationCertificate,stakeDelegationCertificate:()=>i.stakeDelegationCertificate,toLedgerTx:()=>l.toLedgerTx,toRequiredSigner:()=>c.toRequiredSigner,toTxIn:()=>u.toTxIn,toTxOut:()=>f.toTxOut,toVoteOption:()=>m.toVoteOption,toVoter:()=>m.toVoter,toVotes:()=>m.toVotes,toVotingProcedure:()=>m.toVotingProcedure,toWithdrawal:()=>h.toWithdrawal,voteDelegationCertificate:()=>i.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");var m=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var p=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js");var v;(function(e){e["Ledger"]="Ledger"})(v||(v={}))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameHex.length===t.assetNameHex.length){return e.assetNameHex>t.assetNameHex?1:-1}if(e.assetNameHex.length>t.assetNameHex.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyIdHex>t.policyIdHex?1:-1;const tokenMapToAssetGroup=e=>{const t=new Map;for(const[r,a]of e.entries()){const i=s.AssetId.getPolicyId(r);const o=s.AssetId.getAssetName(r);if(!t.has(i))t.set(i,new Array);t.get(i).push({amount:a,assetNameHex:o})}const n=[];for(const[d,c]of t.entries()){c.sort(compareAssetNameCanonically);n.push({policyIdHex:d,tokens:c})}n.sort(comparePolicyIdCanonically);return n};const mapTokenMap=e=>{if(!e)return null;return tokenMapToAssetGroup(e)}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const toAuxiliaryData=e=>({params:{hashHex:e},type:s.TxAuxiliaryDataType.ARBITRARY_HASH});const mapAuxiliaryData=e=>e?toAuxiliaryData(e):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getKnownAddress:()=>getKnownAddress,mapCerts:()=>mapCerts,poolRegistrationCertificate:()=>poolRegistrationCertificate,stakeDelegationCertificate:()=>stakeDelegationCertificate,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const mapAnchorToParams=e=>{return{..."anchor"in e&&(null==e?void 0:e.anchor)&&{anchor:{hashHex:e.anchor.dataHash,url:e.anchor.url}}}};const credentialMapper=(e,t,r)=>{let s;switch(t){case i.CredentialType.KeyHash:s=r?{keyPath:r,type:a.CredentialParamsType.KEY_PATH}:{keyHashHex:e.hash,type:a.CredentialParamsType.KEY_HASH};break;case i.CredentialType.ScriptHash:default:s={scriptHashHex:e.hash,type:a.CredentialParamsType.SCRIPT_HASH}}return s};const drepParamsMapper=(e,t)=>{let r;switch(t){case i.CredentialType.KeyHash:r={keyHashHex:e.hash,type:a.DRepParamsType.KEY_HASH};break;case i.CredentialType.ScriptHash:default:r={scriptHashHex:e.hash,type:a.DRepParamsType.SCRIPT_HASH}}return r};const getKnownAddress=(e,t)=>{return t?null==t?void 0:t.knownAddresses.find(t=>(0,u.areStringsEqualInConstantTime)(o.RewardAccount.toHash(t.rewardAccount),e.hash)):void 0};const getCredentialType=e=>{var t;const r=e?null===(t=i.Address.fromBech32(e.rewardAccount))||void 0===t?void 0:t.asReward():null;return r?r.getPaymentCredential().type:a.CredentialParamsType.SCRIPT_HASH};const stakeCredentialMapper=(e,t)=>{const r=getKnownAddress(e,t);const s=getCredentialType(r);const a=l.stakeKeyPathFromGroupedAddress(r);return credentialMapper(e,s,a)};const getStakeAddressCertificate=(e,t)=>({params:{stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.StakeRegistration?a.CertificateType.STAKE_REGISTRATION:a.CertificateType.STAKE_DEREGISTRATION});const getNewStakeAddressCertificate=(e,t)=>({params:{deposit:e.deposit,stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.Registration?a.CertificateType.STAKE_REGISTRATION_CONWAY:a.CertificateType.STAKE_DEREGISTRATION_CONWAY});const stakeDelegationCertificate=(e,t)=>({params:{poolKeyHashHex:d.PoolId.toKeyHash(e.poolId),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:a.CertificateType.STAKE_DELEGATION});const toPoolMetadata=e=>({metadataHashHex:e.hash,metadataUrl:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return l.stakeKeyPathFromGroupedAddress(r)};const poolRegistrationCertificate=(e,t)=>{const r=getPoolOperatorKeyPath(e.poolParameters.rewardAccount,t);const s=o.RewardAccount.toHash(e.poolParameters.rewardAccount);return{params:{cost:e.poolParameters.cost,margin:e.poolParameters.margin,metadata:e.poolParameters.metadataJson?toPoolMetadata(e.poolParameters.metadataJson):void 0,pledge:e.poolParameters.pledge,poolKey:r?{params:{path:r},type:a.PoolKeyType.DEVICE_OWNED}:{params:{keyHashHex:s},type:a.PoolKeyType.THIRD_PARTY},poolOwners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=o.RewardAccount.toHash(e);return r?{params:{stakingPath:r},type:a.PoolOwnerType.DEVICE_OWNED}:{params:{stakingKeyHashHex:s},type:a.PoolOwnerType.THIRD_PARTY}}),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{params:{ipv4:e.ipv4,ipv6:e.ipv6,portNumber:e.port},type:0};case"RelayByName":return{params:{dnsName:e.hostname,portNumber:e.port},type:1};case"RelayByNameMultihost":return{params:{dnsName:e.dnsName},type:1}}}),rewardAccount:r?{params:{path:r},type:a.PoolRewardAccountType.DEVICE_OWNED}:{params:{rewardAccountHex:i.Address.fromBech32(e.poolParameters.rewardAccount).toBytes()},type:a.PoolRewardAccountType.THIRD_PARTY},vrfKeyHashHex:e.poolParameters.vrf},type:a.CertificateType.STAKE_POOL_REGISTRATION}};const poolRetirementCertificate=(e,t)=>{const r=d.PoolId.toKeyHash(e.poolId);const s=null==t?void 0:t.knownAddresses.find(e=>(0,u.areStringsEqualInConstantTime)(o.RewardAccount.toHash(e.rewardAccount),r));const i=l.stakeKeyPathFromGroupedAddress(s);if(!i)throw new f.InvalidArgumentError("certificate","Missing key matching pool retirement certificate.");return{params:{poolKeyPath:i,retirementEpoch:e.epoch},type:a.CertificateType.STAKE_POOL_RETIREMENT}};const checkDrepPublicKeyAgainstCredential=(e,t)=>{if(!e||e!==s.Ed25519KeyHashHex(t)){throw new f.InvalidArgumentError("certificate","dRepPublicKey does not match certificate drep credential.")}};const drepRegistrationCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH)),deposit:e.deposit};return{params:r,type:e.__typename===n.CertificateType.RegisterDelegateRepresentative?a.CertificateType.DREP_REGISTRATION:a.CertificateType.DREP_DEREGISTRATION}};const updateDRepCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH))};return{params:r,type:a.CertificateType.DREP_UPDATE}};const drepMapper=e=>{if(c.isDRepAlwaysAbstain(e)){return{type:a.DRepParamsType.ABSTAIN}}if(c.isDRepAlwaysNoConfidence(e)){return{type:a.DRepParamsType.NO_CONFIDENCE}}if(c.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>({params:{dRep:drepMapper(e.dRep),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:a.CertificateType.VOTE_DELEGATION});const toCert=(e,t)=>{switch(e.__typename){case n.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDelegation:return stakeDelegationCertificate(e,t);case n.CertificateType.PoolRegistration:return poolRegistrationCertificate(e,t);case n.CertificateType.PoolRetirement:return poolRetirementCertificate(e,t);case n.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);case n.CertificateType.RegisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UnregisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UpdateDelegateRepresentative:return updateDRepCertificate(e,t);default:throw new f.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>{if(!e)return null;return e.map(e=>toCert(e,t))}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxIns:()=>mapCollateralTxIns});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");const mapCollateralTxIns=(e,t)=>e?(0,s.mapTxIns)(e,t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxOut:()=>mapCollateralTxOut});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");const mapCollateralTxOut=(e,t)=>e?(0,s.toTxOut)({index:0,isCollateral:true,txOut:e},t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapReferenceInputs:()=>mapReferenceInputs});const mapReferenceInputs=e=>e?e.map(e=>({outputIndex:e.index,path:null,txHashHex:e.txId.toString()})):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,s;const i=null===(s=null===(r=a.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential().hash;return!!i&&(0,o.areStringsEqualInConstantTime)(i.toString(),e)});const d=null==t?void 0:t.knownAddresses.find(t=>{const r=i.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,o.areStringsEqualInConstantTime)(r.toString(),e)});const c=r?n.paymentKeyPathFromGroupedAddress(r):null;const l=d?n.stakeKeyPathFromGroupedAddress(d):null;if(c){return{path:c,type:s.TxRequiredSignerType.PATH}}if(l){return{path:l,type:s.TxRequiredSignerType.PATH}}return{hashHex:e,type:s.TxRequiredSignerType.HASH}};const mapRequiredSigners=(e,t)=>e?e.map(e=>toRequiredSigner(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js":(e,t,r)=>{"use strict";r.d(t,{LedgerTxTransformer:()=>p,toLedgerTx:()=>toLedgerTx});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var m=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");const p={auxiliaryData:({auxiliaryDataHash:e})=>(0,a.mapAuxiliaryData)(e),certificates:({certificates:e},t)=>(0,i.mapCerts)(e,t),collateralInputs:({collaterals:e},t)=>(0,o.mapCollateralTxIns)(e,t),collateralOutput:({collateralReturn:e},t)=>(0,n.mapCollateralTxOut)(e,t),donation:({donation:e})=>e,fee:({fee:e})=>e,includeNetworkId:({networkId:e})=>!!e,inputs:({inputs:e},t)=>(0,u.mapTxIns)(e,t),mint:({mint:e})=>(0,l.mapTokenMap)(e),network:(e,t)=>({networkId:t.chainId.networkId,protocolMagic:t.chainId.networkMagic}),outputs:({outputs:e},t)=>(0,f.mapTxOuts)(e,t),referenceInputs:({referenceInputs:e})=>(0,d.mapReferenceInputs)(e),requiredSigners:({requiredExtraSignatures:e},t)=>(0,c.mapRequiredSigners)(e,t),scriptDataHashHex:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},totalCollateral:({totalCollateral:e})=>e,treasury:({treasuryValue:e})=>e,ttl:({validityInterval:e})=>{return null==e?void 0:e.invalidHereafter},validityIntervalStart:({validityInterval:e})=>{return null==e?void 0:e.invalidBefore},votingProcedures:({votingProcedures:e},t)=>(0,h.mapVotingProcedures)(e,t),withdrawals:({withdrawals:e},t)=>(0,m.mapWithdrawals)(e,t)};const toLedgerTx=(e,t)=>(0,s.transformObj)(e,p,t)},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTxIn:()=>toTxIn});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolveKeyPath=(e,{accountIndex:t,txInKeyPathMap:r})=>{const i=r[(0,s.TxInId)(e)];if(i){return a.accountKeyDerivationPathToBip32Path(t,i)}return null};const toTxIn=(e,t)=>({outputIndex:e.index,path:resolveKeyPath(e,t),txHashHex:e.txId});const mapTxIns=(e,t)=>e.map(e=>toTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toInlineDatum=e=>({datumHex:a.PlutusData.fromCore(e).toCbor(),type:s.DatumType.INLINE});const toDatumHash=e=>({datumHashHex:e.toString(),type:s.DatumType.HASH});const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const a=i.isScriptAddress(e.address);if(r&&!a){const n=l.paymentKeyPathFromGroupedAddress(r);const c=l.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing stake key key path.");return{params:{params:{spendingPath:n,stakingPath:c},type:s.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},type:s.TxOutputDestinationType.DEVICE_OWNED}}return{params:{addressHex:o.Address.fromBech32(e.address).toBytes()},type:s.TxOutputDestinationType.THIRD_PARTY}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return null;return t.toCbor()};const toTxOut=(e,t)=>{const{txOut:r,index:a,isCollateral:i}=e;const o=n.TransactionOutput.fromCore(r);const d=getScriptHex(o);const l=i?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[a];const u=l===s.TxOutputFormat.MAP_BABBAGE;var f;return{amount:r.value.coins,destination:toDestination(r,t),tokenBundle:(0,c.mapTokenMap)(r.value.assets),...u?{datum:r.datumHash?toDatumHash(r.datumHash):r.datum?toInlineDatum(r.datum):null,format:s.TxOutputFormat.MAP_BABBAGE,referenceScriptHex:d}:{datumHashHex:null!==(f=r.datumHash)&&void 0!==f?f:null,format:s.TxOutputFormat.ARRAY_LEGACY}}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{mapVotingProcedures:()=>mapVotingProcedures,toVoteOption:()=>toVoteOption,toVoter:()=>toVoter,toVotes:()=>toVotes,toVotingProcedure:()=>toVotingProcedure});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toVoter=(e,t)=>{if(!t)throw new i.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");switch(e.__typename){case"ccHotKeyHash":return{keyHashHex:e.credential.hash,type:a.VoterType.COMMITTEE_KEY_HASH};case"ccHotScriptHash":return{scriptHashHex:e.credential.hash,type:a.VoterType.COMMITTEE_SCRIPT_HASH};case"dRepKeyHash":if(!t.dRepKeyHashHex||t.dRepKeyHashHex!==s.Ed25519KeyHashHex(e.credential.hash)){throw new Error("Foreign voter drepKeyHash")}return{keyPath:o.accountKeyDerivationPathToBip32Path(t.accountIndex,o.DREP_KEY_DERIVATION_PATH),type:a.VoterType.DREP_KEY_PATH};case"dRepScriptHash":return{scriptHashHex:e.credential.hash,type:a.VoterType.DREP_SCRIPT_HASH};case"stakePoolKeyHash":return{keyHashHex:e.credential.hash,type:a.VoterType.STAKE_POOL_KEY_HASH};default:throw new Error("Unsupported voter type")}};const toVoteOption=e=>{switch(e){case 0:return a.VoteOption.NO;case 1:return a.VoteOption.YES;case 2:return a.VoteOption.ABSTAIN;default:throw new Error("Unsupported vote type")}};const toVotes=e=>e.map(e=>({govActionId:{govActionIndex:e.actionId.actionIndex,txHashHex:e.actionId.id},votingProcedure:{...e.votingProcedure.anchor&&{anchor:{hashHex:e.votingProcedure.anchor.dataHash,url:e.votingProcedure.anchor.url}},vote:toVoteOption(e.votingProcedure.vote)}}));const toVotingProcedure=(e,t)=>({voter:toVoter(e.voter,t),votes:toVotes(e.votes)});const mapVotingProcedures=(e,t)=>e?e.map(e=>toVotingProcedure(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toWithdrawal:()=>toWithdrawal});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const resolveKeyPath=(e,t)=>{if(!t)return null;const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());if(r&&r.stakeKeyDerivationPath){return[i.harden(o.CardanoKeyConst.PURPOSE),i.harden(o.CardanoKeyConst.COIN_TYPE),i.harden(r.accountIndex),r.stakeKeyDerivationPath.role,r.stakeKeyDerivationPath.index]}return null};const toWithdrawal=(e,t)=>{const r=a.Address.fromString(e.stakeAddress);const i=null==r?void 0:r.asReward();if(!i)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let o;if((0,d.areNumbersEqualInConstantTime)(i.getPaymentCredential().type,a.CredentialType.KeyHash)){const c=resolveKeyPath(i,null==t?void 0:t.knownAddresses);o=c?{amount:e.quantity,stakeCredential:{keyPath:c,type:s.CredentialParamsType.KEY_PATH}}:{amount:e.quantity,stakeCredential:{keyHashHex:i.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.KEY_HASH}}}else{o={amount:e.quantity,stakeCredential:{scriptHashHex:i.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.SCRIPT_HASH}}}return o};const mapWithdrawals=(e,t)=>{if(!e)return null;e.sort((e,t)=>{var r,s;const i=null===(r=a.Address.fromString(e.stakeAddress))||void 0===r?void 0:r.asReward();const o=null===(s=a.Address.fromString(t.stakeAddress))||void 0===s?void 0:s.asReward();if(!i||!o)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");return i.toAddress().toBytes()>o.toAddress().toBytes()?1:-1});return e.map(e=>toWithdrawal(e,t))}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{TrezorKeyAgent:()=>TrezorKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@trezor/connect/lib/index-browser.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var v=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var y=r("../../node_modules/lodash/isArray.js");var _=r("../../node_modules/lodash/uniq.js");const mapAdditionalWitnessRequests=(e,t)=>{var r;const s=_(e.map(e=>(0,v.resolvePaymentKeyPathForTxIn)(e,t)).filter(p.isNotNil).filter(y));const a=[...s];if(null==t?void 0:null===(r=t.knownAddresses)||void 0===r?void 0:r.length){const i=c.stakeKeyPathFromGroupedAddress(t.knownAddresses[0]);if(i)a.push(i)}return a};var w=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var g=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var b=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var P=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var S=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var C=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var k=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const j={additionalWitnessRequests:({inputs:e},t)=>mapAdditionalWitnessRequests(e,t),auxiliaryData:({auxiliaryDataHash:e})=>e?(0,w.mapAuxiliaryData)(e):void 0,certificates:({certificates:e},t)=>e?(0,g.mapCerts)(e,t):void 0,collateralInputs:({collaterals:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,collateralReturn:({collateralReturn:e},t)=>e?(0,P.toTxOut)({index:0,isCollateral:true,txOut:e},t):void 0,fee:({fee:e})=>e.toString(),inputs:({inputs:e},t)=>(0,b.mapTxIns)(e,t),mint:({mint:e})=>(0,k.mapTokenMap)(e,true),networkId:(e,t)=>t.chainId.networkId,outputs:({outputs:e},t)=>(0,P.mapTxOuts)(e,t),protocolMagic:(e,t)=>t.chainId.networkMagic,referenceInputs:({referenceInputs:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,requiredSigners:({requiredExtraSignatures:e},t)=>e?(0,S.mapRequiredSigners)(e,t):void 0,scriptDataHash:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},tagCborSets:(e,t)=>t.tagCborSets,totalCollateral:({totalCollateral:e})=>{return null==e?void 0:e.toString()},ttl:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidHereafter)||void 0===t?void 0:t.toString()},validityIntervalStart:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidBefore)||void 0===t?void 0:t.toString()},withdrawals:({withdrawals:e},t)=>(0,C.mapWithdrawals)(e,t)};const txToTrezor=(e,t)=>(0,m.transformObj)(e,j,t);var x=r("../../node_modules/@trezor/connect-web/lib/index.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var T;const E=a;const A=x["default"]?x["default"]:x;const transportTypedError=e=>new o.AuthenticationError("Trezor transport failed",new n.TransportError("Trezor transport failed",e));const getTrezorConnect=e=>e===d.CommunicationType.Node?E:A;const stakeCredentialCert=e=>e===a.PROTO.CardanoCertificateType.STAKE_REGISTRATION||e===a.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION||e===a.PROTO.CardanoCertificateType.STAKE_DELEGATION;const containsOnlyScriptHashCredentials=e=>{var t;if(e.certificates){for(const r of e.certificates)if(!stakeCredentialCert(r.type)||!r.scriptHash)return false}return!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!e.scriptHash))};const I=[c.accountKeyDerivationPathToBip32Path(0,{index:0,role:d.KeyRole.External},d.KeyPurpose.MULTI_SIG)];const isMultiSig=e=>{const t=!e.inputs.some(e=>e.path);const r=!e.outputs.some(e=>"addressParameters"in e);return t&&r&&!e.collateralInputs&&!e.collateralReturn&&!e.totalCollateral&&!e.referenceInputs&&containsOnlyScriptHashCredentials(e)};class TrezorKeyAgent extends l.KeyAgentBase{static async initializeTrezorTransport({manifest:e,communicationType:t,silentMode:r=false,lazyLoad:s=false,shouldHandlePassphrase:i=false}){const o=getTrezorConnect(t);try{await o.init({lazyLoad:t!==d.CommunicationType.Node&&s,manifest:e,popup:t!==d.CommunicationType.Node&&!r});if(i)o.on(a.UI_EVENT,e=>{if(e.type===a.UI.REQUEST_PASSPHRASE&&e.payload.device)o.uiResponse({payload:{passphraseOnDevice:true,save:true,value:""},type:a.UI.RECEIVE_PASSPHRASE})});return true}catch(n){if("Init_AlreadyInitialized"===n.code)return true;throw transportTypedError(n)}}static async checkDeviceConnection(e){const t=getTrezorConnect(e);try{const r=await t.getFeatures();if(!r.success){throw new n.TransportError("Failed to get device",r.payload)}return r.payload}catch(s){throw transportTypedError(s)}}static async getXpub({accountIndex:e,communicationType:t,purpose:r}){try{await TrezorKeyAgent.checkDeviceConnection(t);const a=`m/${r}'/${d.CardanoKeyConst.COIN_TYPE}'/${e}'`;const i=getTrezorConnect(t);const o=await i.cardanoGetPublicKey({path:a,showOnTrezor:true});if(!o.success){throw new n.TransportError("Failed to export extended account public key",o.payload)}return s.Bip32PublicKeyHex(o.payload.publicKey)}catch(c){throw transportTypedError(c)}}static async createWithDevice({chainId:e,accountIndex:t=0,trezorConfig:r,purpose:s=d.KeyPurpose.STANDARD},a){const i=await TrezorKeyAgent.initializeTrezorTransport(r);const o=await TrezorKeyAgent.getXpub({accountIndex:t,communicationType:r.communicationType,purpose:s});return new TrezorKeyAgent({accountIndex:t,chainId:e,extendedAccountPublicKey:o,isTrezorInitialized:i,purpose:s,trezorConfig:r},a)}static matchSigningMode(e){if(e.certificates){for(const t of e.certificates){var r;if(t.type===a.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION&&(null===(r=t.poolParameters)||void 0===r?void 0:r.owners.some(e=>e.stakingKeyPath)))return a.PROTO.CardanoTxSigningMode.POOL_REGISTRATION_AS_OWNER}}if(e.collateralInputs||e.collateralReturn||e.totalCollateral||e.referenceInputs){return a.PROTO.CardanoTxSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return a.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION}return a.PROTO.CardanoTxSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r,scripts:i}){try{var d;await this.isTrezorInitialized;const c=e.toCore();const l=e.hash();const m=e.outputs().map(e=>e.isBabbageOutput()?a.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:a.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY);const p=(null===(d=e.collateralReturn())||void 0===d?void 0:d.isBabbageOutput())?a.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:a.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY;const v=await txToTrezor(c,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:p,knownAddresses:t,outputsFormat:m,tagCborSets:e.hasTaggedSets(),txInKeyPathMap:r});const y=TrezorKeyAgent.matchSigningMode(v);const _=getTrezorConnect(__classPrivateFieldGet(this,T,"f"));const w=await _.cardanoSignTransaction({...v,...y===a.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessRequests:I},signingMode:y});const g=await Promise.all(u.ownSignatureKeyPaths(c,t,r,void 0,i).map(e=>this.derivePublicKey(e)));if(!w.success){throw new n.TransportError("Failed to export extended account public key",w.payload)}const b=w.payload;if(!(0,h.areStringsEqualInConstantTime)(b.hash,l)){throw new f.HwMappingError("Trezor computed a different transaction id")}return new Map(await Promise.all(b.witnesses.filter(e=>g.includes(s.Ed25519PublicKeyHex(e.pubKey))).map(async e=>{const t=s.Ed25519PublicKeyHex(e.pubKey);const r=s.Ed25519SignatureHex(e.signature);return[t,r]})))}catch(P){if("Failure_ActionCancelled"===P.innerError.code){throw new o.AuthenticationError("Transaction signing aborted",P)}throw transportTypedError(P)}}async signBlob(){throw new i.NotImplementedError("signBlob")}async signCip8Data(){throw new i.NotImplementedError("signCip8Data")}async exportRootPrivateKey(){throw new i.NotImplementedError("Operation not supported!")}constructor({isTrezorInitialized:e,...t},r){super({...t,__typename:d.KeyAgentType.Trezor},r);T.set(this,void 0);if(!e)this.isTrezorInitialized=TrezorKeyAgent.initializeTrezorTransport(t.trezorConfig);__classPrivateFieldSet(this,T,t.trezorConfig.communicationType,"f")}}T=new WeakMap},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{TrezorKeyAgent:()=>l.TrezorKeyAgent,getNewStakeAddressCertificate:()=>n.getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>n.getPoolRegistrationCertificate,getStakeAddressCertificate:()=>n.getStakeAddressCertificate,getStakeDelegationCertificate:()=>n.getStakeDelegationCertificate,mapAuxiliaryData:()=>d.mapAuxiliaryData,mapCerts:()=>n.mapCerts,mapRequiredSigners:()=>c.mapRequiredSigners,mapTxIns:()=>a.mapTxIns,mapTxOuts:()=>i.mapTxOuts,mapWithdrawals:()=>o.mapWithdrawals,resolvePaymentKeyPathForTxIn:()=>s.resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>s.resolveStakeKeyPath,toRequiredSigner:()=>c.toRequiredSigner,toTrezorTxIn:()=>a.toTrezorTxIn,toTrezorWithdrawal:()=>o.toTrezorWithdrawal,toTxOut:()=>i.toTxOut,voteDelegationCertificate:()=>n.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var a=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var i=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var n=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var d=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js")},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameBytes.length===t.assetNameBytes.length){return e.assetNameBytes>t.assetNameBytes?1:-1}if(e.assetNameBytes.length>t.assetNameBytes.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyId>t.policyId?1:-1;const tokenMapToAssetGroup=(e,t)=>{const r=new Map;for(const[a,i]of e.entries()){const o=s.AssetId.getPolicyId(a);const n=s.AssetId.getAssetName(a);if(!r.has(o))r.set(o,[]);r.get(o).push({assetNameBytes:n,...t?{mintAmount:i.toString()}:{amount:i.toString()}})}const d=[];for(const[c,l]of r.entries()){l.sort(compareAssetNameCanonically);d.push({policyId:c,tokenAmounts:l})}d.sort(comparePolicyIdCanonically);return d};const mapTokenMap=(e,t=false)=>e?tokenMapToAssetGroup(e,t):void 0},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});const mapAuxiliaryData=e=>({cVoteRegistrationParameters:void 0,hash:e})},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getNewStakeAddressCertificate:()=>getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>getPoolRegistrationCertificate,getStakeAddressCertificate:()=>getStakeAddressCertificate,getStakeDelegationCertificate:()=>getStakeDelegationCertificate,mapCerts:()=>mapCerts,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getCertCredentials=(e,t)=>{var r;const s=null==t?void 0:t.find(t=>(0,l.areStringsEqualInConstantTime)(a.RewardAccount.toHash(t.rewardAccount),e));const o=s?null===(r=i.Address.fromBech32(s.rewardAccount))||void 0===r?void 0:r.asReward():null;if(!!o&&(0,l.areNumbersEqualInConstantTime)(null==o?void 0:o.getPaymentCredential().type,i.CredentialType.KeyHash)){const n=c.stakeKeyPathFromGroupedAddress(s);return n?{path:n}:{keyHash:e}}return{scriptHash:e}};const toPoolMetadata=e=>({hash:e.hash,url:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return c.stakeKeyPathFromGroupedAddress(r)};const getStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const a=e.__typename===o.CertificateType.StakeRegistration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION;return{dRep:void 0,deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:a}};const getStakeDelegationCertificate=(e,t)=>{const r=n.PoolId.toKeyHash(e.poolId);const a=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:void 0,deposit:void 0,keyHash:a.keyHash,path:a.path,pool:r,poolParameters:void 0,scriptHash:a.scriptHash,type:s.PROTO.CardanoCertificateType.STAKE_DELEGATION}};const getNewStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const a=e.__typename===o.CertificateType.Registration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION_CONWAY:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION_CONWAY;return{dRep:void 0,deposit:e.deposit.toString(),keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:a}};const drepParamsMapper=(e,t)=>{let r;switch(t){case i.CredentialType.KeyHash:r={keyHash:e.hash,type:s.PROTO.CardanoDRepType.KEY_HASH};break;case i.CredentialType.ScriptHash:default:r={scriptHash:e.hash,type:s.PROTO.CardanoDRepType.SCRIPT_HASH}}return r};const drepMapper=e=>{if(d.isDRepAlwaysAbstain(e)){return{type:s.PROTO.CardanoDRepType.ABSTAIN}}if(d.isDRepAlwaysNoConfidence(e)){return{type:s.PROTO.CardanoDRepType.NO_CONFIDENCE}}if(d.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:drepMapper(e.dRep),deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:s.PROTO.CardanoCertificateType.VOTE_DELEGATION}};const getPoolRegistrationCertificate=(e,t)=>{if(!e.poolParameters.metadataJson)throw new u.InvalidArgumentError("certificate","Missing pool registration pool metadata.");return{dRep:void 0,deposit:void 0,keyHash:void 0,path:void 0,pool:void 0,poolParameters:{cost:e.poolParameters.cost.toString(),margin:{denominator:e.poolParameters.margin.denominator.toString(),numerator:e.poolParameters.margin.numerator.toString()},metadata:toPoolMetadata(e.poolParameters.metadataJson),owners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=a.RewardAccount.toHash(e);return r?{stakingKeyPath:r}:{stakingKeyHash:s}}),pledge:e.poolParameters.pledge.toString(),poolId:n.PoolId.toKeyHash(e.poolParameters.id),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{ipv4Address:e.ipv4,ipv6Address:e.ipv6,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_IP};case"RelayByName":return{hostName:e.hostname,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_NAME};case"RelayByNameMultihost":return{hostName:e.dnsName,type:s.PROTO.CardanoPoolRelayType.MULTIPLE_HOST_NAME};default:throw new u.InvalidArgumentError("certificate","Unknown relay type.")}}),rewardAccount:e.poolParameters.rewardAccount,vrfKeyHash:e.poolParameters.vrf},scriptHash:void 0,type:s.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION}};const toCert=(e,t)=>{switch(e.__typename){case o.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case o.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case o.CertificateType.StakeDelegation:return getStakeDelegationCertificate(e,t);case o.CertificateType.PoolRegistration:return getPoolRegistrationCertificate(e,t);case o.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case o.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case o.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);default:throw new u.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>e.map(e=>toCert(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js":(e,t,r)=>{"use strict";r.d(t,{resolvePaymentKeyPathForTxIn:()=>resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>resolveStakeKeyPath});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolvePaymentKeyPathForTxIn=(e,t)=>{if(!t)return;const r=null==t?void 0:t.txInKeyPathMap[(0,s.TxInId)(e)];if(r){return a.accountKeyDerivationPathToBip32Path(t.accountIndex,r)}};const resolveStakeKeyPath=(e,t)=>{const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());return a.stakeKeyPathFromGroupedAddress(r)}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,a;const o=null===(a=null===(r=s.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===a?void 0:a.getPaymentCredential().hash;return!!o&&(0,i.areStringsEqualInConstantTime)(o.toString(),e)});const n=null==t?void 0:t.knownAddresses.find(t=>{const r=a.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,i.areStringsEqualInConstantTime)(r.toString(),e)});const d=r?o.paymentKeyPathFromGroupedAddress(r):null;const c=n?o.stakeKeyPathFromGroupedAddress(n):null;if(d){return{keyHash:void 0,keyPath:d}}if(c){return{keyHash:void 0,keyPath:c}}return{keyHash:e,keyPath:void 0}};const mapRequiredSigners=(e,t)=>e.map(e=>toRequiredSigner(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTrezorTxIn:()=>toTrezorTxIn});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorTxIn=(e,t)=>{const r=(0,s.resolvePaymentKeyPathForTxIn)(e,t);return{path:r,prev_hash:e.txId,prev_index:e.index}};const mapTxIns=(e,t)=>e.map(e=>toTrezorTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const i=a.isScriptAddress(e.address);if(!r||i){return{address:e.address}}const o=n.paymentKeyPathFromGroupedAddress(r);const c=n.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing staking key key path.");return{addressParameters:{addressType:s.PROTO.CardanoAddressType.BASE,path:o,stakingPath:c}}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return;return t.toCbor()};const getInlineDatum=e=>i.PlutusData.fromCore(e).toCbor();const toTxOut=(e,t)=>{var r;const{txOut:a,index:i,isCollateral:n}=e;const d=o.TransactionOutput.fromCore(a);const l=getScriptHex(d);const u=n?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[i];const f=u===s.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE;return{...toDestination(a,t),amount:a.value.coins.toString(),datumHash:null===(r=a.datumHash)||void 0===r?void 0:r.toString(),format:u,inlineDatum:f&&a.datum?getInlineDatum(a.datum):void 0,referenceScript:f?l:void 0,tokenBundle:(0,c.mapTokenMap)(a.value.assets)}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toTrezorWithdrawal:()=>toTrezorWithdrawal});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorWithdrawal=(e,t)=>{const r=s.Address.fromString(e.stakeAddress);const n=null==r?void 0:r.asReward();if(!n)throw new a.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let d;if((0,i.areNumbersEqualInConstantTime)(n.getPaymentCredential().type,s.CredentialType.KeyHash)){const c=(null==t?void 0:t.knownAddresses)?(0,o.resolveStakeKeyPath)(n,t.knownAddresses):null;d=c?{amount:e.quantity.toString(),keyHash:void 0,path:c,scriptHash:void 0}:{amount:e.quantity.toString(),keyHash:n.getPaymentCredential().hash.toString(),path:void 0,scriptHash:void 0}}else{d={amount:e.quantity.toString(),keyHash:void 0,path:void 0,scriptHash:n.getPaymentCredential().hash.toString()}}return d};const mapWithdrawals=(e,t)=>e?e.map(e=>toTrezorWithdrawal(e,t)):void 0},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.StaticChangeAddressResolver=void 0;const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class StaticChangeAddressResolver{async resolve(e){const t=await a(this,i,"f").call(this);if(0===t.length)throw new o.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){i.set(this,void 0);s(this,i,e,"f")}}t.StaticChangeAddressResolver=StaticChangeAddressResolver;i=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.GreedyInputSelector=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const d=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const c=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js");const adjustOutputsForFee=async(e,t,r,s,a,i)=>{const o=new Set([...s,...a]);const{fee:c,redeemers:l}=await t.computeMinimumCost({change:[],fee:i,inputs:r,outputs:o});if(c===e)return{change:[],fee:c,feeAccountedFor:true,redeemers:l};if(e<c)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);const u=[...a];u.sort(d.sortByCoins);let f=false;for(const h of u){const m=h.value.coins-c;if(m>=t.computeMinimumCoinQuantity(h)){h.value.coins=m;f=true;break}}return{change:[...u],fee:c,feeAccountedFor:f,redeemers:l}};const splitChangeAndComputeFee=async(e,t,r,s,a,i,o)=>{const l=await (0,c.splitChange)(i,r,s,a.computeMinimumCoinQuantity,a.tokenBundleSizeExceedsLimit,o);let u=await adjustOutputsForFee(r,a,e,t,l,o);if(u.fee>=r){const f={change:[{address:d.stubMaxSizeAddress,value:{assets:s,coins:0n}}],fee:u.fee,feeAccountedFor:true};if(f.change[0].value.coins<a.computeMinimumCoinQuantity(f.change[0]))throw new n.InputSelectionError(n.InputSelectionFailure.UtxoFullyDepleted);return f}if(o<u.fee){u=await splitChangeAndComputeFee(e,t,r,s,a,i,u.fee);if(0===u.change.length)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoFullyDepleted)}for(const h of u.change)if(h.value.coins<a.computeMinimumCoinQuantity(h))throw new n.InputSelectionError(n.InputSelectionFailure.UtxoFullyDepleted);if(!u.feeAccountedFor)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoFullyDepleted);return u};class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:l,outputs:u,constraints:f,implicitValue:h}=e;const m=new Set([...l,...s]);const p=(0,d.toValues)([...m]);const v=(0,d.toValues)([...u]);const y=(0,d.getCoinQuantity)(p);const _=(0,d.getCoinQuantity)(v);const w=(0,o.coalesceValueQuantities)(p).assets;const g=(0,o.coalesceValueQuantities)(v).assets;const b=(null==h?void 0:null===(t=h.coin)||void 0===t?void 0:t.input)||0n;const P=(null==h?void 0:null===(r=h.coin)||void 0===r?void 0:r.deposit)||0n;const S=(null==h?void 0:h.mint)||new Map;const C=y+b;const k=_+P;const j=(0,d.addTokenMaps)(w,S);const x=C-k;const T=(0,d.subtractTokenMaps)(j,g);if(0===m.size||k>C||(0,d.hasNegativeAssetValue)(T))throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);const E=await splitChangeAndComputeFee(m,u,x,T,f,a(this,i,"f").getChangeAddresses,0n);const A=E.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(x-E.fee<0n)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);if(m.size>await f.computeSelectionLimit({change:A,fee:E.fee,inputs:m,outputs:u})){throw new n.InputSelectionError(n.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:A,fee:E.fee,inputs:new Set([...m].sort(c.sortUtxoByTxIn)),outputs:u}}}constructor(e){i.set(this,void 0);s(this,i,e,"f")}}t.GreedyInputSelector=GreedyInputSelector;i=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sortUtxoByTxIn=t.sortTxIn=t.splitChange=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=.05;const distributeAssets=(e,t,r,s)=>{const n=[...e];if(0===n.length)return n;const d=(0,a.coalesceValueQuantities)(n.map(e=>e.value)).assets;if(!d||0===d.size)return n;for(const c of n)c.value.assets=void 0;let l=0;const u=n;const f=[];while(d.size>0){const h=new Map([...d.entries()].splice(0,1));const m=l%u.length;const p={...u[m].value};p.assets=(0,o.addTokenMaps)(p.assets,h);if((0,o.isValidValue)(p,t,r,s)){u[m].value=p;d.delete([...h.keys()][0])}else{f.push(...u.splice(m,1))}if(0===u.length)throw new i.InputSelectionError(i.InputSelectionFailure.UtxoFullyDepleted);++l}return[...n,...f]};const getMinUtxoAmount=e=>{const t=new s.BigNumber(.03);let r=e.toString().length-1;let a="1";while(r>0){a+="0";--r}return BigInt(new s.BigNumber(a).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const a=e.value.coins;const i=getMinUtxoAmount(a);let o=a;let n=0n;const d=new Array;const c=new s.BigNumber(2);while(o>=i){const l=BigInt(new s.BigNumber(o.toString()).dividedBy(c).toFixed(0,0));const u=o-l;if(u<=i||u<=t({address:e.address,value:{assets:e.value.assets,coins:a-n}})+r){d.push(a-n);break}n+=l;d.push(l);o-=l}return d.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,a,d,c)=>{const l=await e();const u=[...l.values()].reduce((e,t)=>e+t,0);const f=new Map([...l.entries()].map(e=>[e[0],e[1]/u]));const h=[...f.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-h)>n)throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient);const m=[...f.entries()].map(e=>({address:e[0],value:{coins:0n}}));let p=0n;const v=new s.BigNumber(t.toString());for(const y of m){const _=new s.BigNumber(f.get(y.address));const w=BigInt(v.multipliedBy(_).toFixed(0,0));p+=w;y.value.coins=p>t?w-(p-t):w}if(p<t){const g=t-p;m[m.length-1].value.coins+=g}const b=m.flatMap(e=>splitChangeOutput(e,a,c));const P=b.sort(o.sortByCoins).filter(e=>e.value.coins>0n);if(P&&P.length>0)P[0].value.assets=r;if(!r||0===r.size)return P;return distributeAssets(P,a,d,c)};t.splitChange=splitChange;const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};t.sortTxIn=sortTxIn;const sortUtxoByTxIn=(e,r)=>(0,t.sortTxIn)(e[0],r[0]);t.sortUtxoByTxIn=sortUtxoByTxIn},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InputSelectionError=t.InputSelectionFailure=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(a=t.InputSelectionFailure||(t.InputSelectionFailure={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}t.InputSelectionError=InputSelectionError},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/change.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeChangeAndAdjustForFee=t.coalesceChangeBundlesForMinCoinRequirement=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=s(r("../../node_modules/lodash/minBy.js"));const d=s(r("../../node_modules/lodash/orderBy.js"));const c=s(r("../../node_modules/lodash/pick.js"));const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:a}}]of e)if(a){const i=[...a.keys()].filter(e=>!t.includes(e));for(const o of i){const n=a.get(o);if(0n===n)continue;const d=r.get(o)||[];r.set(o,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const a=[...t];for(const i of s.keys()){const o=(0,d.default)(s.get(i),e=>e,"desc");if(0===a.length)a.push({coins:0n});while(o.length>a.length){const n=o.pop();o[o.length-1]+=n}for(const[c,l]of o.entries()){var u;const f=a[c];const h=(null===(u=f.assets)||void 0===u?void 0:u.entries())||[];a.splice(c,1,{assets:new Map([...h,[i,l]]),coins:f.coins})}}return a};const createBundlePerOutput=(e,t,r,s)=>{let a=0n;const i=new Map;const o=e.map(e=>{const o=t>0n?r*e.coins/t:0n;a+=o;if(!e.assets){return{coins:o}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const h=f*c/l;i.set(d,(i.get(d)||0n)+h);n.set(d,h)}return{assets:n,coins:o}});return{bundles:o,totalAssetsBundled:i,totalCoinBundled:a}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=(0,n.default)(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:a},i)=>{const n=new Map;const d=(0,o.toValues)(e);for(const c of r)n.set(c,{requested:(0,o.assetQuantitySelector)(c)(t)+a.spend(c),selected:(0,o.assetQuantitySelector)(c)(d)+a.input(c)});const l=(0,o.getCoinQuantity)(d)+s.input;const u=(0,o.getCoinQuantity)(t)+i+s.deposit;const f=l-u;const{totalCoinBundled:h,bundles:m,totalAssetsBundled:p}=createBundlePerOutput(t,u,f,n);const v=f-h;if(v>0)if(0===m.length)m.push({coins:v});else m[0].coins+=v;for(const y of r){const _=n.get(y);const w=p.get(y)||0n;const g=_.selected-_.requested-w;if(g>0n){var b;const P=(null===(b=m.find(({assets:e})=>{return null==e?void 0:e.has(y)}))||void 0===b?void 0:b.assets)||smallestBundleTokenMap(m);const S=P.get(y)||0n;P.set(y,S+g)}}return m};const pickExtraRandomUtxo=({utxoRemaining:e,utxoSelected:t},r)=>{const s=e.filter(([e,{value:t}])=>!t.assets);const a=s.length>0?s:e;const i=Math.floor(r()*a.length);const o=[...t,a[i]];const n=e.indexOf(a[i]);const d=[...e.slice(0,n),...e.slice(n+1)];return{utxoRemaining:d,utxoSelected:o}};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const s=r.splice(t,1)[0];if(0===r.length)return[s];const i=r.splice(-1,1)[0];const o=(0,a.coalesceValueQuantities)([s,i]);r=[...r,o];r=(0,d.default)(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=(0,d.default)(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:o.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let a=false;while(s.length>1&&!a){a=true;for(let i=s.length-1;i>=0;--i){const n=satisfiesMinCoinRequirement(s[i]);a=a&&n;if(!n){s=mergeWithSmallestBundle(s,i);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};t.coalesceChangeBundlesForMinCoinRequirement=coalesceChangeBundlesForMinCoinRequirement;const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const a of e){const{assets:n,coins:d}=a;if(!n||0===n.size||!r(n)){s.push({assets:n,coins:d});continue}const c=[];let l={assets:new Map,coins:0n};for(const[u,f]of n.entries()){l.assets.set(u,f);if(r(l.assets)&&l.assets.size>1){l.assets.delete(u);c.push(l);l={assets:new Map([[u,f]]),coins:0n}}}c.push(l);let h=0n;for(const m of c){const p=t({address:o.stubMaxSizeAddress,value:m});m.coins=p;h+=p}if(d<h){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoFullyDepleted)}c[0].coins+=d-h;s.push(...c)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:r,uniqueTxAssetIDs:s,implicitValue:a,computeMinimumCoinQuantity:i,tokenBundleSizeExceedsLimit:o,fee:n=0n})=>{const d=computeRequestedAssetChangeBundles(e.utxoSelected,r,s,a,n);const c=redistributeLeftoverAssets(e.utxoSelected,d,s);const l=(0,t.coalesceChangeBundlesForMinCoinRequirement)(c,i);if(!l){return false}const u=splitChangeIfTokenBundlesSizeExceedsLimit(l,i,o);return{changeBundles:u,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:r,estimateTxCosts:s,outputValues:a,uniqueTxAssetIDs:n,implicitValue:d,random:l,utxoSelection:u})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=o=>{if(o.utxoRemaining.length>0){return(0,t.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:e,estimateTxCosts:s,implicitValue:d,outputValues:a,random:l,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:pickExtraRandomUtxo(o,l)})}throw new i.InputSelectionError(i.InputSelectionFailure.UtxoFullyDepleted)};const f=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:d,outputValues:a,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:u});if(!f)return recomputeChangeAndAdjustForFeeWithExtraUtxo(u);const h=await s(f.utxoSelected,validateChangeBundles(f.changeBundles,r));const m=(0,o.getCoinQuantity)(a)+h.fee+d.implicitCoin.deposit;const p=(0,o.getCoinQuantity)((0,o.toValues)(f.utxoSelected))+d.implicitCoin.input;if(m>p){if(0===f.utxoRemaining.length){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const v=computeChangeBundles({computeMinimumCoinQuantity:e,fee:h.fee,implicitValue:d,outputValues:a,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:(0,c.default)(f,["utxoRemaining","utxoSelected"])});if(!v){return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const{changeBundles:y,utxoSelected:_,utxoRemaining:w}=v;return{change:validateChangeBundles(y,r),fee:h.fee,inputs:_,redeemers:h.redeemers,remainingUTxO:w}};t.computeChangeAndAdjustForFee=computeChangeAndAdjustForFee},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinRandomImprove=t.MAX_U64=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/change.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js");t.MAX_U64=0xffffffffffffffffn;const roundRobinRandomImprove=({changeAddressResolver:e,random:r=Math.random})=>({select:async({preSelectedUtxo:d,utxo:c,outputs:l,constraints:{computeMinimumCost:u,computeSelectionLimit:f,computeMinimumCoinQuantity:h,tokenBundleSizeExceedsLimit:m},implicitValue:p={}})=>{const v=a.stubMaxSizeAddress;const{requiredUtxo:y,utxo:_,outputs:w,uniqueTxAssetIDs:g,implicitValue:b}=(0,a.preProcessArgs)(d,c,l,v,p);(0,a.assertIsBalanceSufficient)(g,y,_,w,b);const P=(0,o.roundRobinSelection)({changeAddress:v,implicitValue:b,outputs:w,random:r,requiredUtxo:y,uniqueTxAssetIDs:g,utxo:_});const S=await (0,i.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:h,estimateTxCosts:(e,r)=>u({change:r.map(e=>({address:v,value:e})),fee:t.MAX_U64,inputs:new Set(e),outputs:l}),implicitValue:b,outputValues:(0,a.toValues)(w),random:r,tokenBundleSizeExceedsLimit:m,uniqueTxAssetIDs:g,utxoSelection:P});const C=new Set(S.inputs);const k={change:S.change.map(e=>({address:v,value:e})),fee:S.fee,inputs:C,outputs:l};k.change=await e.resolve(k);if(S.inputs.length>await f({change:k.change,fee:k.fee,inputs:C,outputs:l})){throw new s.InputSelectionError(s.InputSelectionFailure.MaximumInputCountExceeded)}k.inputs=new Set([...k.inputs].sort(n.sortUtxoByTxIn));return{redeemers:S.redeemers,remainingUTxO:new Set(S.remainingUTxO),selection:k}}});t.roundRobinRandomImprove=roundRobinRandomImprove},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinSelection=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const improvesSelection=(e,t,r,a)=>{const i=a(e);if(i<r)return true;const o=i+a([t]);const n=2n*r;const d=s.BigIntMath.abs(n-o);const c=s.BigIntMath.abs(n-i);if(d<c)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,a.assetQuantitySelector)(e);const i=s.input(e);const o=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,a.toValues)(e))+i,minimumTarget:r((0,a.toValues)(t))+o}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,a.getCoinQuantity)((0,a.toValues)(e))+r.input,minimumTarget:(0,a.getCoinQuantity)((0,a.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:a,implicitValue:i})=>{const o=e;const n=[...t];const d=listTokensWithin(s,r,i);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const h=l(n);if(h.length>0){const m=Math.floor(a()*h.length);const p=h[m];if(improvesSelection(o,p,u,f)){o.push(p);n.splice(n.indexOf(p),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===o.length){o.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:o}};t.roundRobinSelection=roundRobinSelection},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js"),t);a(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.isValidValue=t.hasNegativeAssetValue=t.addTokenMaps=t.subtractTokenMaps=t.sortByCoins=t.assertIsBalanceSufficient=t.assertIsCoinBalanceSufficient=t.getCoinQuantity=t.assetQuantitySelector=t.toValues=t.preProcessArgs=t.mintToImplicitTokens=t.stubMaxSizeAddress=void 0;const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const n=s(r("../../node_modules/lodash/uniq.js"));t.stubMaxSizeAddress=i.Cardano.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};t.mintToImplicitTokens=mintToImplicitTokens;const preProcessArgs=(e,r,s,a,i)=>{var o,d,c,l;const u=[...s];const f={deposit:(null==i?void 0:null===(o=i.coin)||void 0===o?void 0:o.deposit)||0n,input:(null==i?void 0:null===(d=i.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==i?void 0:null===(c=i.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==i?void 0:null===(l=i.coin)||void 0===l?void 0:l.withdrawals)||0n};const h=(null==i?void 0:i.mint)||new Map;const{implicitTokensInput:m,implicitTokensSpend:p}=(0,t.mintToImplicitTokens)(h);const v={input:e=>m.get(e)||0n,spend:e=>p.get(e)||0n};const y=(0,n.default)(u.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const _=(0,n.default)([...y,...h.keys()]);return{changeAddress:a,implicitValue:{implicitCoin:f,implicitTokens:v},outputs:u,requiredUtxo:[...e],uniqueTxAssetIDs:_,utxo:[...r]}};t.preProcessArgs=preProcessArgs;const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}t.toValues=toValues;const assetQuantitySelector=e=>{return t=>{return a.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};t.assetQuantitySelector=assetQuantitySelector;const getCoinQuantity=e=>a.BigIntMath.sum(e.map(({coins:e})=>e));t.getCoinQuantity=getCoinQuantity;const assertIsCoinBalanceSufficient=(e,r,s)=>{const a=(0,t.getCoinQuantity)(e);const i=(0,t.getCoinQuantity)(r);if(i+s.deposit>a+s.input){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}};t.assertIsCoinBalanceSufficient=assertIsCoinBalanceSufficient;const assertIsBalanceSufficient=(e,r,s,a,{implicitCoin:i,implicitTokens:n})=>{if(r.length+s.length===0){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}const d=[...toValues(s),...toValues(r)];const c=toValues(a);for(const l of e){const u=(0,t.assetQuantitySelector)(l);const f=u(d);const h=u(c);if(h+n.spend(l)>f+n.input(l)){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}}(0,t.assertIsCoinBalanceSufficient)(d,c,i)};t.assertIsBalanceSufficient=assertIsBalanceSufficient;const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};t.sortByCoins=sortByCoins;const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const i=new Map;for(const[o,d]of t.entries())if(0n!==d)i.set(o,-d);return i}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=(0,n.default)(l);for(const v of p){const y=e.get(v);const _=t.get(v);const w=y-_;if(0n!==w)c.set(v,w)}return c};t.subtractTokenMaps=subtractTokenMaps;const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[a,i]of e.entries()){if(t.has(a)){s.push(a);continue}if(0n!==i)r.set(a,i)}for(const[o,d]of t.entries()){if(e.has(o)){s.push(o);continue}if(0n!==d)r.set(o,d)}const c=(0,n.default)(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};t.addTokenMaps=addTokenMaps;const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};t.hasNegativeAssetValue=hasNegativeAssetValue;const isValidValue=(e,r,s,a)=>{let i=e.coins-a>=r({address:t.stubMaxSizeAddress,value:e});if(e.assets)i=i&&!s(e.assets);return i};t.isValidValue=isValidValue},"../../node_modules/@cardano-sdk/input-selection/dist/esm/GreedySelection/util.js":(e,t,r)=>{"use strict";r.d(t,{sortTxIn:()=>sortTxIn,sortUtxoByTxIn:()=>sortUtxoByTxIn,splitChange:()=>splitChange});var s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,i=Math.floor,o="[BigNumber Error] ",n=o+"Number primitive has more than 15 significant digits: ",d=1e14,c=14,l=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function clone(e){var t,r,m,p=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},v=new BigNumber(1),y=20,_=4,w=-7,g=21,b=-1e7,P=1e7,S=false,C=1,k=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},x="0123456789abcdefghijklmnopqrstuvwxyz",T=true;function BigNumber(e,t){var a,o,d,u,f,h,p,v,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>P)w.c=w.e=null;else if(e.e<b)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((h="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(u=0,f=e;f>=10;f/=10,u++);if(u>P)w.c=w.e=null;else{w.e=u;w.c=[e]}return}v=String(e)}else{if(!s.test(v=String(e)))return m(w,v,h);w.s=45==v.charCodeAt(0)?(v=v.slice(1),-1):1}if((u=v.indexOf("."))>-1)v=v.replace(".","");if((f=v.search(/e/i))>0){if(u<0)u=f;u+=+v.slice(f+1);v=v.substring(0,f)}else if(u<0)u=v.length}else{intCheck(t,2,x.length,"Base");if(10==t&&T){w=new BigNumber(e);return round(w,y+w.e+1,_)}v=String(e);if(h="number"==typeof e){if(0*e!=0)return m(w,v,h,t);w.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(n+e)}}else{w.s=45===v.charCodeAt(0)?(v=v.slice(1),-1):1}a=x.slice(0,t);u=f=0;for(p=v.length;f<p;f++)if(a.indexOf(o=v.charAt(f))<0){if("."==o){if(f>u){u=p;continue}}else if(!d){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){d=true;f=-1;u=0;continue}}return m(w,String(e),h,t)}h=false;v=r(v,t,10,w.s);if((u=v.indexOf("."))>-1)v=v.replace(".","");else u=v.length}for(f=0;48===v.charCodeAt(f);f++);for(p=v.length;48===v.charCodeAt(--p););if(v=v.slice(f,++p)){p-=f;if(h&&BigNumber.DEBUG&&p>15&&(e>l||e!==i(e))){throw Error(n+w.s*e)}if((u=u-f-1)>P)w.c=w.e=null;else if(u<b)w.c=[w.e=0];else{w.e=u;w.c=[];f=(u+1)%c;if(u<0)f+=c;if(f<p){if(f)w.c.push(+v.slice(0,f));for(p-=c;f<p;)w.c.push(+v.slice(f,f+=c));f=c-(v=v.slice(f)).length}else{f-=p}for(;f--;v+="0");w.c.push(+v)}}else{w.c=[w.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,h,t);y=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);_=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-h,0,t);intCheck(r[1],0,h,t);w=r[0];g=r[1]}else{intCheck(r,-h,h,t);w=-(g=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-h,-1,t);intCheck(r[1],1,h,t);b=r[0];P=r[1]}else{intCheck(r,-h,h,t);if(r)b=-(P=r<0?-r:r);else{throw Error(o+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=r;else{S=!r;throw Error(o+"crypto unavailable")}else S=r;else{throw Error(o+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);C=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,h,t);k=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)j=r;else throw Error(o+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(o+t+" invalid: "+r)}T="0123456789"==r.slice(0,10);x=r}}else{throw Error(o+"Object expected: "+e)}return{DECIMAL_PLACES:y,ROUNDING_MODE:_,EXPONENTIAL_AT:[w,g],RANGE:[b,P],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:k,FORMAT:j,ALPHABET:x}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,n=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===n||-1===n)&&a>=-h&&a<=h&&a===i(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%c;if(t<1)t+=c;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=d||r!==i(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===n||1===n||-1===n)){return true}throw Error(o+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,p.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,p.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return i(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,n,d,l,f=0,m=[],p=new BigNumber(v);if(null==e)e=y;else intCheck(e,0,h);d=a(e/c);if(S)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(d*=2));for(;f<d;){l=131072*r[f]+(r[f+1]>>>11);if(l>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[f]=s[0];r[f+1]=s[1]}else{m.push(l%1e14);f+=2}}f=d/2}else if(crypto.randomBytes){r=crypto.randomBytes(d*=7);for(;f<d;){l=(31&r[f])*281474976710656+1099511627776*r[f+1]+4294967296*r[f+2]+16777216*r[f+3]+(r[f+4]<<16)+(r[f+5]<<8)+r[f+6];if(l>=9e15)crypto.randomBytes(7).copy(r,f);else{m.push(l%1e14);f+=7}}f=d/7}else{S=false;throw Error(o+"crypto unavailable")}if(!S){for(;f<d;){l=t();if(l<9e15)m[f++]=l%1e14}}d=m[--f];e%=c;if(d&&e){l=u[c-e];m[f]=i(d/l)*l}for(;0===m[f];m.pop(),f--);if(f<0)m=[n=0];else{for(n=-1;0===m[0];m.splice(0,1),n-=c);for(f=1,l=m[0];l>=10;l/=10,f++);if(f<c)n-=c-f}p.e=n;p.c=m;return p}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,i=[0],o,n=0,d=e.length;for(;n<d;){for(o=i.length;o--;i[o]*=t);i[0]+=s.indexOf(e.charAt(n++));for(a=0;a<i.length;a++)if(i[a]>r-1){if(null==i[a+1])i[a+1]=0;i[a+1]+=i[a]/r|0;i[a]%=r}}return i.reverse()}return function(r,s,a,i,o){var n,d,c,l,u,f,h,m,p=r.indexOf("."),v=y,w=_;if(p>=0){l=k;k=0;r=r.replace(".","");m=new BigNumber(s);f=m.pow(r.length-p);k=l;m.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,a,e);m.e=m.c.length}h=toBaseOut(r,s,a,o?(n=x,e):(n=e,x));c=l=h.length;for(;0==h[--l];h.pop());if(!h[0])return n.charAt(0);if(p<0)--c;else{f.c=h;f.e=c;f.s=i;f=t(f,m,v,w,a);h=f.c;u=f.r;c=f.e}d=c+v+1;p=h[d];l=a/2;u=u||d<0||null!=h[d+1];u=w<4?(null!=p||u)&&(0==w||w==(f.s<0?3:2)):p>l||p==l&&(4==w||u||6==w&&1&h[d-1]||w==(f.s<0?8:7));if(d<1||!h[0])r=u?toFixedPoint(n.charAt(1),-v,n.charAt(0)):n.charAt(0);else{h.length=d;if(u){for(--a;++h[--d]>a;){h[d]=0;if(!d){++c;h=[1].concat(h)}}}for(l=h.length;!h[--l];);for(p=0,r="";p<=l;r+=n.charAt(h[p++]));r=toFixedPoint(r,c,n.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,i,o,n=0,d=e.length,c=t%f,l=t/f|0;for(e=e.slice();d--;){i=e[d]%f;o=e[d]/f|0;s=l*i+o*c;a=c*i+s%f*f+n;n=(a/r|0)+(s/f|0)+l*o;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,i;if(r!=s)i=r>s?1:-1;else{for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}}return i}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var o,n,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k=e.s==t.s?1:-1,j=e.c,x=t.c;if(!j||!j[0]||!x||!x[0]){return new BigNumber(e.s&&t.s&&(j?!x||j[0]!=x[0]:x)?j&&0==j[0]||!x?0*k:k/0:NaN)}p=new BigNumber(k);v=p.c=[];n=e.e-t.e;k=r+n+1;if(!a){a=d;n=bitFloor(e.e/c)-bitFloor(t.e/c);k=k/c|0}for(l=0;x[l]==(j[l]||0);l++);if(x[l]>(j[l]||0))n--;if(k<0){v.push(1);u=true}else{b=j.length;S=x.length;l=0;k+=2;f=i(a/(x[0]+1));if(f>1){x=multiply(x,f,a);j=multiply(j,f,a);S=x.length;b=j.length}g=S;y=j.slice(0,S);_=y.length;for(;_<S;y[_++]=0);C=x.slice();C=[0].concat(C);P=x[0];if(x[1]>=a/2)P++;do{f=0;o=compare(x,y,S,_);if(o<0){w=y[0];if(S!=_)w=w*a+(y[1]||0);f=i(w/P);if(f>1){if(f>=a)f=a-1;h=multiply(x,f,a);m=h.length;_=y.length;while(1==compare(h,y,m,_)){f--;subtract(h,S<m?C:x,m,a);m=h.length;o=1}}else{if(0==f)o=f=1;h=x.slice();m=h.length}if(m<_)h=[0].concat(h);subtract(y,h,_,a);_=y.length;if(-1==o){while(compare(x,y,S,_)<1){f++;subtract(y,S<_?C:x,_,a);_=y.length}}}else if(0===o){f++;y=[0]}v[l++]=f;if(y[0])y[_++]=j[g]||0;else{y=[j[g]];_=1}}while((g++<b||null!=y[0])&&k--)u=null!=y[0];if(!v[0])v.splice(0,1)}if(a==d){for(l=1,k=v[0];k>=10;k/=10,l++);round(p,r+(p.e=l+n*c-1)+1,s,u)}else{p.e=n;p.r=+u}return p}}();function format(e,t,r,s){var a,i,o,n,d;if(null==r)r=_;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];o=e.e;if(null==t){d=coeffToString(e.c);d=1==s||2==s&&(o<=w||o>=g)?toExponential(d,o):toFixedPoint(d,o,"0")}else{e=round(new BigNumber(e),t,r);i=e.e;d=coeffToString(e.c);n=d.length;if(1==s||2==s&&(t<=i||i<=w)){for(;n<t;d+="0",n++);d=toExponential(d,i)}else{t-=o;d=toFixedPoint(d,i,"0");if(i+1>n){if(--t>0)for(d+=".";t--;d+="0");}else{t+=i-n;if(t>0){if(i+1==n)d+=".";for(;t--;d+="0");}}}}return e.s<0&&a?"-"+d:d}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*c-1)>P)e.c=e.e=null;else if(r<b)e.c=[e.e=0];else{e.e=r;e.c=t}return e}m=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,n,d,c){var l,u=d?n:n.replace(a,"");if(s.test(u))i.s=isNaN(u)?null:u<0?-1:1;else{if(!d){u=u.replace(e,function(e,t,r){l="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return c&&c!=l?e:t});if(c){l=c;u=u.replace(t,"$1").replace(r,"0.$1")}if(n!=u)return new BigNumber(u,l)}if(BigNumber.DEBUG){throw Error(o+"Not a"+(c?" base "+c:"")+" number: "+n)}i.s=null}i.c=i.e=null}}();function round(e,t,r,s){var o,n,l,f,h,m,p,v=e.c,y=u;if(v){e:{for(o=1,f=v[0];f>=10;f/=10,o++);n=t-o;if(n<0){n+=c;l=t;h=v[m=0];p=h/y[o-l-1]%10|0}else{m=a((n+1)/c);if(m>=v.length)if(s){for(;v.length<=m;v.push(0));h=p=0;o=1;n%=c;l=n-c+1}else{break e}else{h=f=v[m];for(o=1;f>=10;f/=10,o++);n%=c;l=n-c+o;p=l<0?0:h/y[o-l-1]%10|0}}s=s||t<0||null!=v[m+1]||(l<0?h:h%y[o-l-1]);s=r<4?(p||s)&&(0==r||r==(e.s<0?3:2)):p>5||5==p&&(4==r||s||6==r&&(n>0?l>0?h/y[o-l]:0:v[m-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(s){t-=e.e+1;v[0]=y[(c-t%c)%c];e.e=-t||0}else{v[0]=e.e=0}return e}if(0==n){v.length=m;f=1;m--}else{v.length=m+1;f=y[c-n];v[m]=l>0?i(h/y[o-l]%y[l])*f:0}if(s){for(;;){if(0==m){for(n=1,l=v[0];l>=10;l/=10,n++);l=v[0]+=f;for(f=1;l>=10;l/=10,f++);if(n!=f){e.e++;if(v[0]==d)v[0]=1}break}v[m]+=f;if(v[m]!=d)break;v[m--]=0;f=1}}for(n=v.length;0===v[--n];v.pop());}if(e.e>P)e.c=e.e=null;else if(e.e<b)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=w||r>=g?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}p.absoluteValue=p.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};p.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};p.decimalPlaces=p.dp=function(e,t){var r,s,a,i=this;if(null!=e){intCheck(e,0,h);if(null==t)t=_;else intCheck(t,0,8);return round(new BigNumber(i),e+i.e+1,t)}if(!(r=i.c))return null;s=((a=r.length-1)-bitFloor(this.e/c))*c;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};p.dividedBy=p.div=function(e,r){return t(this,new BigNumber(e,r),y,_)};p.dividedToIntegerBy=p.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};p.exponentiatedBy=p.pow=function(e,t){var r,s,n,d,l,u,f,h,m,p=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(o+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);u=e.e>14;if(!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0]){m=new BigNumber(Math.pow(+valueOf(p),u?e.s*(2-isOdd(e)):+valueOf(e)));return t?m.mod(t):m}f=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!f&&p.isInteger()&&t.isInteger();if(s)p=p.mod(t)}else if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7))){d=(p.s<0&&isOdd(e),-0);if(p.e>-1)d=1/d;return new BigNumber(f?1/d:d)}else if(k)d=a(k/c+2);if(u){r=new BigNumber(.5);if(f)e.s=1;h=isOdd(e)}else{n=Math.abs(+valueOf(e));h=n%2}m=new BigNumber(v);for(;;){if(h){m=m.times(p);if(!m.c)break;if(d){if(m.c.length>d)m.c.length=d}else if(s)m=m.mod(t)}if(n){n=i(n/2);if(0===n)break;h=n%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)h=isOdd(e);else{n=+valueOf(e);if(0===n)break;h=n%2}}p=p.times(p);if(d){if(p.c&&p.c.length>d)p.c.length=d}else if(s)p=p.mod(t)}if(s)return m;if(f)m=v.div(m);return t?m.mod(t):d?round(m,k,_,l):m};p.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=_;else intCheck(e,0,8);return round(t,t.e+1,e)};p.isEqualTo=p.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};p.isFinite=function(){return!!this.c};p.isGreaterThan=p.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};p.isGreaterThanOrEqualTo=p.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};p.isInteger=function(){return!!this.c&&bitFloor(this.e/c)>this.c.length-2};p.isLessThan=p.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};p.isLessThanOrEqualTo=p.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};p.isNaN=function(){return!this.s};p.isNegative=function(){return this.s<0};p.isPositive=function(){return this.s>0};p.isZero=function(){return!!this.c&&0==this.c[0]};p.minus=function(e,t){var r,s,a,i,o=this,n=o.s;e=new BigNumber(e,t);t=e.s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return o.plus(e)}var l=o.e/c,u=e.e/c,f=o.c,h=e.c;if(!l||!u){if(!f||!h)return f?(e.s=-t,e):new BigNumber(h?o:NaN);if(!f[0]||!h[0]){return h[0]?(e.s=-t,e):new BigNumber(f[0]?o:-0)}}l=bitFloor(l);u=bitFloor(u);f=f.slice();if(n=l-u){if(i=n<0){n=-n;a=f}else{u=l;a=h}a.reverse();for(t=n;t--;a.push(0));a.reverse()}else{s=(i=(n=f.length)<(t=h.length))?n:t;for(n=t=0;t<s;t++)if(f[t]!=h[t]){i=f[t]<h[t];break}}if(i)a=f,f=h,h=a,e.s=-e.s;t=(s=h.length)-(r=f.length);if(t>0)for(;t--;f[r++]=0);t=d-1;for(;s>n;){if(f[--s]<h[s]){for(r=s;r&&!f[--r];f[r]=t);--f[r];f[s]+=d}f[s]-=h[s]}for(;0==f[0];f.splice(0,1),--u);if(!f[0]){e.s=3==_?-1:1;e.c=[e.e=0];return e}return normalise(e,f,u)};p.modulo=p.mod=function(e,r){var s,a,i=this;e=new BigNumber(e,r);if(i.c&&e.s&&(!e.c||e.c[0])){if(!e.c||i.c&&!i.c[0]){return new BigNumber(i)}}else{return new BigNumber(NaN)}if(9==C){a=e.s;e.s=1;s=t(i,e,0,3);e.s=a;s.s*=a}else{s=t(i,e,0,C)}e=i.minus(s.times(e));if(!e.c[0]&&1==C)e.s=i.s;return e};p.multipliedBy=p.times=function(e,t){var r,s,a,i,o,n,l,u,h,m,p,v,y,_,w,g=this,b=g.c,P=(e=new BigNumber(e,t)).c;if(!b||!P||!b[0]||!P[0]){if(g.s&&e.s&&(!b||b[0]||P)&&(!P||P[0]||b)){e.s*=g.s;if(b&&P){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(g.e/c)+bitFloor(e.e/c);e.s*=g.s;l=b.length;m=P.length;if(l<m)y=b,b=P,P=y,a=l,l=m,m=a;for(a=l+m,y=[];a--;y.push(0));_=d;w=f;for(a=m;--a>=0;){r=0;p=P[a]%w;v=P[a]/w|0;for(o=l,i=a+o;i>a;){u=b[--o]%w;h=b[o]/w|0;n=v*u+h*p;u=p*u+n%w*w+y[i]+r;r=(u/_|0)+(n/w|0)+v*h;y[i--]=u%_}y[i]=r}if(r)++s;else y.splice(0,1);return normalise(e,y,s)};p.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};p.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var i=s.e/c,o=e.e/c,n=s.c,l=e.c;if(!i||!o){if(!n||!l)return new BigNumber(a/0);if(!n[0]||!l[0])return l[0]?e:new BigNumber(n[0]?s:0*a)}i=bitFloor(i);o=bitFloor(o);n=n.slice();if(a=i-o){if(a>0){o=i;r=l}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=l.length;if(a-t<0)r=l,l=n,n=r,t=a;for(a=0;t;){a=(n[--t]=n[t]+l[t]+a)/d|0;n[t]=d===n[t]?0:n[t]%d}if(a){n=[a].concat(n);++o}return normalise(e,n,o)};p.precision=p.sd=function(e,t){var r,s,a,i=this;if(null!=e&&!!e!==e){intCheck(e,1,h);if(null==t)t=_;else intCheck(t,0,8);return round(new BigNumber(i),e,t)}if(!(r=i.c))return null;a=r.length-1;s=a*c+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&i.e+1>s)s=i.e+1;return s};p.shiftedBy=function(e){intCheck(e,-l,l);return this.times("1e"+e)};p.squareRoot=p.sqrt=function(){var e,r,s,a,i,o=this,n=o.c,d=o.s,c=o.e,l=y+4,u=new BigNumber("0.5");if(1!==d||!n||!n[0]){return new BigNumber(!d||d<0&&(!n||n[0])?NaN:n?o:1/0)}d=Math.sqrt(+valueOf(o));if(0==d||d==1/0){r=coeffToString(n);if((r.length+c)%2==0)r+="0";d=Math.sqrt(+r);c=bitFloor((c+1)/2)-(c<0||c%2);if(d==1/0)r="5e"+c;else{r=d.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}s=new BigNumber(r)}else{s=new BigNumber(d+"")}if(s.c[0]){c=s.e;d=c+l;if(d<3)d=0;for(;;){i=s;s=u.times(i.plus(t(o,i,l,1)));if(coeffToString(i.c).slice(0,d)===(r=coeffToString(s.c)).slice(0,d)){if(s.e<c)--d;r=r.slice(d-3,d+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+y+2,1);e=!s.times(s).eq(o)}break}if(!a){round(i,i.e+y+2,0);if(i.times(i).eq(o)){s=i;break}}l+=4;d+=4;a=1}}}return round(s,s.e+y+1,_,e)};p.toExponential=function(e,t){if(null!=e){intCheck(e,0,h);e++}return format(this,e,t,1)};p.toFixed=function(e,t){if(null!=e){intCheck(e,0,h);e=e+this.e+1}return format(this,e,t)};p.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=j}else if("object"!=typeof r){throw Error(o+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var i,n=s.split("."),d=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",u=n[0],f=n[1],h=a.s<0,m=h?u.slice(1):u,p=m.length;if(c)i=d,d=c,c=i,p-=i;if(d>0&&p>0){i=p%d||d;u=m.substr(0,i);for(;i<p;i+=d)u+=l+m.substr(i,d);if(c>0)u+=l+m.slice(i);if(h)u="-"+u}s=f?u+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):u}return(r.prefix||"")+s+(r.suffix||"")};p.toFraction=function(e){var r,s,a,i,n,d,l,f,h,m,p,y,w=this,g=w.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(v)){throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!g)return new BigNumber(w);r=new BigNumber(v);h=s=new BigNumber(v);a=f=new BigNumber(v);y=coeffToString(g);n=r.e=y.length-w.e-1;r.c[0]=u[(d=n%c)<0?c+d:d];e=!e||l.comparedTo(r)>0?n>0?r:h:l;d=P;P=1/0;l=new BigNumber(y);f.c[0]=0;for(;;){m=t(l,r,0,1);i=s.plus(m.times(a));if(1==i.comparedTo(e))break;s=a;a=i;h=f.plus(m.times(i=h));f=i;r=l.minus(m.times(i=r));l=i}i=t(e.minus(s),a,0,1);f=f.plus(i.times(h));s=s.plus(i.times(a));f.s=h.s=w.s;n*=2;p=t(h,a,n,_).minus(w).abs().comparedTo(t(f,s,n,_).minus(w).abs())<1?[h,a]:[f,s];P=d;return p};p.toNumber=function(){return+valueOf(this)};p.toPrecision=function(e,t){if(null!=e)intCheck(e,1,h);return format(this,e,t,2)};p.toString=function(e){var t,s=this,a=s.s,i=s.e;if(null===i)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=i<=w||i>=g?toExponential(coeffToString(s.c),i):toFixedPoint(coeffToString(s.c),i,"0");else if(10===e&&T){s=round(new BigNumber(s),y+i+1,_);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,x.length,"Base");t=r(toFixedPoint(coeffToString(s.c),i,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};p.valueOf=p.toJSON=function(){return valueOf(this)};p._isBigNumber=true;p[Symbol.toStringTag]="BigNumber";p[Symbol.for("nodejs.util.inspect.custom")]=p.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,i=e[0]+"";for(;s<a;){t=e[s++]+"";r=c-t.length;for(;r--;t="0"+t);i+=t}for(a=i.length;48===i.charCodeAt(--a););return i.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,i=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=a&&!a[0];s=i&&!i[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!a||!i)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=i.length)?d:c;for(o=0;o<n;o++)if(a[o]!=i[o])return a[o]>i[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==i(e)){throw Error(o+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/c)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var m=clone();const p=null;var v=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var y=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var _=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");const w=.05;const distributeAssets=(e,t,r,s)=>{const a=[...e];if(0===a.length)return a;const i=(0,v.coalesceValueQuantities)(a.map(e=>e.value)).assets;if(!i||0===i.size)return a;for(const o of a)o.value.assets=void 0;let n=0;const d=a;const c=[];while(i.size>0){const l=new Map([...i.entries()].splice(0,1));const u=n%d.length;const f={...d[u].value};f.assets=(0,_.addTokenMaps)(f.assets,l);if((0,_.isValidValue)(f,t,r,s)){d[u].value=f;i.delete([...l.keys()][0])}else{c.push(...d.splice(u,1))}if(0===d.length)throw new y.InputSelectionError(y.InputSelectionFailure.UtxoFullyDepleted);++n}return[...a,...c]};const getMinUtxoAmount=e=>{const t=new m(.03);let r=e.toString().length-1;let s="1";while(r>0){s+="0";--r}return BigInt(new m(s).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const s=e.value.coins;const a=getMinUtxoAmount(s);let i=s;let o=0n;const n=new Array;const d=new m(2);while(i>=a){const c=BigInt(new m(i.toString()).dividedBy(d).toFixed(0,0));const l=i-c;if(l<=a||l<=t({address:e.address,value:{assets:e.value.assets,coins:s-o}})+r){n.push(s-o);break}o+=c;n.push(c);i-=c}return n.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,s,a,i)=>{const o=await e();const n=[...o.values()].reduce((e,t)=>e+t,0);const d=new Map([...o.entries()].map(e=>[e[0],e[1]/n]));const c=[...d.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-c)>w)throw new y.InputSelectionError(y.InputSelectionFailure.UtxoBalanceInsufficient);const l=[...d.entries()].map(e=>({address:e[0],value:{coins:0n}}));let u=0n;const f=new m(t.toString());for(const h of l){const p=new m(d.get(h.address));const v=BigInt(f.multipliedBy(p).toFixed(0,0));u+=v;h.value.coins=u>t?v-(u-t):v}if(u<t){const g=t-u;l[l.length-1].value.coins+=g}const b=l.flatMap(e=>splitChangeOutput(e,s,i));const P=b.sort(_.sortByCoins).filter(e=>e.value.coins>0n);if(P&&P.length>0)P[0].value.assets=r;if(!r||0===r.size)return P;return distributeAssets(P,s,a,i)};const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};const sortUtxoByTxIn=(e,t)=>sortTxIn(e[0],t[0])},"../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js":(e,t,r)=>{"use strict";r.d(t,{InputSelectionError:()=>InputSelectionError,InputSelectionFailure:()=>a});var s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(a||(a={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}},"../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{addTokenMaps:()=>addTokenMaps,assertIsBalanceSufficient:()=>assertIsBalanceSufficient,assetQuantitySelector:()=>assetQuantitySelector,getCoinQuantity:()=>getCoinQuantity,hasNegativeAssetValue:()=>hasNegativeAssetValue,isValidValue:()=>isValidValue,preProcessArgs:()=>preProcessArgs,sortByCoins:()=>sortByCoins,stubMaxSizeAddress:()=>n,subtractTokenMaps:()=>subtractTokenMaps,toValues:()=>toValues});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var i=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var o=r("../../node_modules/lodash/uniq.js");const n=a.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};const preProcessArgs=(e,t,r,s,a)=>{var i,n,d,c;const l=[...r];const u={deposit:(null==a?void 0:null===(i=a.coin)||void 0===i?void 0:i.deposit)||0n,input:(null==a?void 0:null===(n=a.coin)||void 0===n?void 0:n.input)||0n,reclaimDeposit:(null==a?void 0:null===(d=a.coin)||void 0===d?void 0:d.reclaimDeposit)||0n,withdrawals:(null==a?void 0:null===(c=a.coin)||void 0===c?void 0:c.withdrawals)||0n};const f=(null==a?void 0:a.mint)||new Map;const{implicitTokensInput:h,implicitTokensSpend:m}=mintToImplicitTokens(f);const p={input:e=>h.get(e)||0n,spend:e=>m.get(e)||0n};const v=o(l.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const y=o([...v,...f.keys()]);return{changeAddress:s,implicitValue:{implicitCoin:u,implicitTokens:p},outputs:l,requiredUtxo:[...e],uniqueTxAssetIDs:y,utxo:[...t]}};const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}const assetQuantitySelector=e=>{return t=>{return s.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};const getCoinQuantity=e=>s.BigIntMath.sum(e.map(({coins:e})=>e));const assertIsCoinBalanceSufficient=(e,t,r)=>{const s=getCoinQuantity(e);const a=getCoinQuantity(t);if(a+r.deposit>s+r.input){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}};const assertIsBalanceSufficient=(e,t,r,s,{implicitCoin:a,implicitTokens:o})=>{if(t.length+r.length===0){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}const n=[...toValues(r),...toValues(t)];const d=toValues(s);for(const c of e){const l=assetQuantitySelector(c);const u=l(n);const f=l(d);if(f+o.spend(c)>u+o.input(c)){throw new i.InputSelectionError(i.InputSelectionFailure.UtxoBalanceInsufficient)}}assertIsCoinBalanceSufficient(n,d,a)};const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const i=new Map;for(const[n,d]of t.entries())if(0n!==d)i.set(n,-d);return i}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=o(l);for(const v of p){const y=e.get(v);const _=t.get(v);const w=y-_;if(0n!==w)c.set(v,w)}return c};const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[a,i]of e.entries()){if(t.has(a)){s.push(a);continue}if(0n!==i)r.set(a,i)}for(const[n,d]of t.entries()){if(e.has(n)){s.push(n);continue}if(0n!==d)r.set(n,d)}const c=o(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};const isValidValue=(e,t,r,s)=>{let a=e.coins-s>=t({address:n,value:e});if(e.assets)a=a&&!r(e.assets);return a}},"../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js":function(e,t,r){var s;(function(a){"use strict";var i,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,d=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,f=14,h=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,v=1e9;function clone(e){var t,r,s,a=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},i=new BigNumber(1),y=20,_=4,w=-7,g=21,b=-1e7,P=1e7,S=false,C=1,k=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},x="0123456789abcdefghijklmnopqrstuvwxyz",T=true;function BigNumber(e,t){var a,i,n,c,u,m,p,v,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>P)w.c=w.e=null;else if(e.e<b)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((m="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,u=e;u>=10;u/=10,c++);if(c>P)w.c=w.e=null;else{w.e=c;w.c=[e]}return}v=String(e)}else{if(!o.test(v=String(e)))return s(w,v,m);w.s=45==v.charCodeAt(0)?(v=v.slice(1),-1):1}if((c=v.indexOf("."))>-1)v=v.replace(".","");if((u=v.search(/e/i))>0){if(c<0)c=u;c+=+v.slice(u+1);v=v.substring(0,u)}else if(c<0)c=v.length}else{intCheck(t,2,x.length,"Base");if(10==t&&T){w=new BigNumber(e);return round(w,y+w.e+1,_)}v=String(e);if(m="number"==typeof e){if(0*e!=0)return s(w,v,m,t);w.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(l+e)}}else{w.s=45===v.charCodeAt(0)?(v=v.slice(1),-1):1}a=x.slice(0,t);c=u=0;for(p=v.length;u<p;u++)if(a.indexOf(i=v.charAt(u))<0){if("."==i){if(u>c){c=p;continue}}else if(!n){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){n=true;u=-1;c=0;continue}}return s(w,String(e),m,t)}m=false;v=r(v,t,10,w.s);if((c=v.indexOf("."))>-1)v=v.replace(".","");else c=v.length}for(u=0;48===v.charCodeAt(u);u++);for(p=v.length;48===v.charCodeAt(--p););if(v=v.slice(u,++p)){p-=u;if(m&&BigNumber.DEBUG&&p>15&&(e>h||e!==d(e))){throw Error(l+w.s*e)}if((c=c-u-1)>P)w.c=w.e=null;else if(c<b)w.c=[w.e=0];else{w.e=c;w.c=[];u=(c+1)%f;if(c<0)u+=f;if(u<p){if(u)w.c.push(+v.slice(0,u));for(p-=f;u<p;)w.c.push(+v.slice(u,u+=f));u=f-(v=v.slice(u)).length}else{u-=p}for(;u--;v+="0");w.c.push(+v)}}else{w.c=[w.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,v,t);y=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);_=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,0,t);intCheck(r[1],0,v,t);w=r[0];g=r[1]}else{intCheck(r,-v,v,t);w=-(g=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,-1,t);intCheck(r[1],1,v,t);b=r[0];P=r[1]}else{intCheck(r,-v,v,t);if(r)b=-(P=r<0?-r:r);else{throw Error(c+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=r;else{S=!r;throw Error(c+"crypto unavailable")}else S=r;else{throw Error(c+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);C=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,v,t);k=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)j=r;else throw Error(c+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(c+t+" invalid: "+r)}T="0123456789"==r.slice(0,10);x=r}}else{throw Error(c+"Object expected: "+e)}return{DECIMAL_PLACES:y,ROUNDING_MODE:_,EXPONENTIAL_AT:[w,g],RANGE:[b,P],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:k,FORMAT:j,ALPHABET:x}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,i=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===i||-1===i)&&a>=-v&&a<=v&&a===d(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%f;if(t<1)t+=f;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=u||r!==d(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===i||1===i||-1===i)){return true}throw Error(c+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,a.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,a.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return d(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,a,o,l,u=0,h=[],p=new BigNumber(i);if(null==e)e=y;else intCheck(e,0,v);o=n(e/f);if(S)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(o*=2));for(;u<o;){l=131072*r[u]+(r[u+1]>>>11);if(l>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[u]=s[0];r[u+1]=s[1]}else{h.push(l%1e14);u+=2}}u=o/2}else if(crypto.randomBytes){r=crypto.randomBytes(o*=7);for(;u<o;){l=(31&r[u])*281474976710656+1099511627776*r[u+1]+4294967296*r[u+2]+16777216*r[u+3]+(r[u+4]<<16)+(r[u+5]<<8)+r[u+6];if(l>=9e15)crypto.randomBytes(7).copy(r,u);else{h.push(l%1e14);u+=7}}u=o/7}else{S=false;throw Error(c+"crypto unavailable")}if(!S){for(;u<o;){l=t();if(l<9e15)h[u++]=l%1e14}}o=h[--u];e%=f;if(o&&e){l=m[f-e];h[u]=d(o/l)*l}for(;0===h[u];h.pop(),u--);if(u<0)h=[a=0];else{for(a=-1;0===h[0];h.splice(0,1),a-=f);for(u=1,l=h[0];l>=10;l/=10,u++);if(u<f)a-=f-u}p.e=a;p.c=h;return p}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,i=[0],o,n=0,d=e.length;for(;n<d;){for(o=i.length;o--;i[o]*=t);i[0]+=s.indexOf(e.charAt(n++));for(a=0;a<i.length;a++)if(i[a]>r-1){if(null==i[a+1])i[a+1]=0;i[a+1]+=i[a]/r|0;i[a]%=r}}return i.reverse()}return function(r,s,a,i,o){var n,d,c,l,u,f,h,m,p=r.indexOf("."),v=y,w=_;if(p>=0){l=k;k=0;r=r.replace(".","");m=new BigNumber(s);f=m.pow(r.length-p);k=l;m.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,a,e);m.e=m.c.length}h=toBaseOut(r,s,a,o?(n=x,e):(n=e,x));c=l=h.length;for(;0==h[--l];h.pop());if(!h[0])return n.charAt(0);if(p<0)--c;else{f.c=h;f.e=c;f.s=i;f=t(f,m,v,w,a);h=f.c;u=f.r;c=f.e}d=c+v+1;p=h[d];l=a/2;u=u||d<0||null!=h[d+1];u=w<4?(null!=p||u)&&(0==w||w==(f.s<0?3:2)):p>l||p==l&&(4==w||u||6==w&&1&h[d-1]||w==(f.s<0?8:7));if(d<1||!h[0])r=u?toFixedPoint(n.charAt(1),-v,n.charAt(0)):n.charAt(0);else{h.length=d;if(u){for(--a;++h[--d]>a;){h[d]=0;if(!d){++c;h=[1].concat(h)}}}for(l=h.length;!h[--l];);for(p=0,r="";p<=l;r+=n.charAt(h[p++]));r=toFixedPoint(r,c,n.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,i,o,n=0,d=e.length,c=t%p,l=t/p|0;for(e=e.slice();d--;){i=e[d]%p;o=e[d]/p|0;s=l*i+o*c;a=c*i+s%p*p+n;n=(a/r|0)+(s/p|0)+l*o;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,i;if(r!=s)i=r>s?1:-1;else{for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}}return i}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var i,o,n,c,l,h,m,p,v,y,_,w,g,b,P,S,C,k=e.s==t.s?1:-1,j=e.c,x=t.c;if(!j||!j[0]||!x||!x[0]){return new BigNumber(e.s&&t.s&&(j?!x||j[0]!=x[0]:x)?j&&0==j[0]||!x?0*k:k/0:NaN)}p=new BigNumber(k);v=p.c=[];o=e.e-t.e;k=r+o+1;if(!a){a=u;o=bitFloor(e.e/f)-bitFloor(t.e/f);k=k/f|0}for(n=0;x[n]==(j[n]||0);n++);if(x[n]>(j[n]||0))o--;if(k<0){v.push(1);c=true}else{b=j.length;S=x.length;n=0;k+=2;l=d(a/(x[0]+1));if(l>1){x=multiply(x,l,a);j=multiply(j,l,a);S=x.length;b=j.length}g=S;y=j.slice(0,S);_=y.length;for(;_<S;y[_++]=0);C=x.slice();C=[0].concat(C);P=x[0];if(x[1]>=a/2)P++;do{l=0;i=compare(x,y,S,_);if(i<0){w=y[0];if(S!=_)w=w*a+(y[1]||0);l=d(w/P);if(l>1){if(l>=a)l=a-1;h=multiply(x,l,a);m=h.length;_=y.length;while(1==compare(h,y,m,_)){l--;subtract(h,S<m?C:x,m,a);m=h.length;i=1}}else{if(0==l)i=l=1;h=x.slice();m=h.length}if(m<_)h=[0].concat(h);subtract(y,h,_,a);_=y.length;if(-1==i){while(compare(x,y,S,_)<1){l++;subtract(y,S<_?C:x,_,a);_=y.length}}}else if(0===i){l++;y=[0]}v[n++]=l;if(y[0])y[_++]=j[g]||0;else{y=[j[g]];_=1}}while((g++<b||null!=y[0])&&k--)c=null!=y[0];if(!v[0])v.splice(0,1)}if(a==u){for(n=1,k=v[0];k>=10;k/=10,n++);round(p,r+(p.e=n+o*f-1)+1,s,c)}else{p.e=o;p.r=+c}return p}}();function format(e,t,r,s){var a,i,o,n,d;if(null==r)r=_;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];o=e.e;if(null==t){d=coeffToString(e.c);d=1==s||2==s&&(o<=w||o>=g)?toExponential(d,o):toFixedPoint(d,o,"0")}else{e=round(new BigNumber(e),t,r);i=e.e;d=coeffToString(e.c);n=d.length;if(1==s||2==s&&(t<=i||i<=w)){for(;n<t;d+="0",n++);d=toExponential(d,i)}else{t-=o;d=toFixedPoint(d,i,"0");if(i+1>n){if(--t>0)for(d+=".";t--;d+="0");}else{t+=i-n;if(t>0){if(i+1==n)d+=".";for(;t--;d+="0");}}}}return e.s<0&&a?"-"+d:d}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*f-1)>P)e.c=e.e=null;else if(r<b)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,o,n,d){var l,u=n?o:o.replace(a,"");if(s.test(u))i.s=isNaN(u)?null:u<0?-1:1;else{if(!n){u=u.replace(e,function(e,t,r){l="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=l?e:t});if(d){l=d;u=u.replace(t,"$1").replace(r,"0.$1")}if(o!=u)return new BigNumber(u,l)}if(BigNumber.DEBUG){throw Error(c+"Not a"+(d?" base "+d:"")+" number: "+o)}i.s=null}i.c=i.e=null}}();function round(e,t,r,s){var a,i,o,c,l,h,p,v=e.c,y=m;if(v){e:{for(a=1,c=v[0];c>=10;c/=10,a++);i=t-a;if(i<0){i+=f;o=t;l=v[h=0];p=l/y[a-o-1]%10|0}else{h=n((i+1)/f);if(h>=v.length)if(s){for(;v.length<=h;v.push(0));l=p=0;a=1;i%=f;o=i-f+1}else{break e}else{l=c=v[h];for(a=1;c>=10;c/=10,a++);i%=f;o=i-f+a;p=o<0?0:l/y[a-o-1]%10|0}}s=s||t<0||null!=v[h+1]||(o<0?l:l%y[a-o-1]);s=r<4?(p||s)&&(0==r||r==(e.s<0?3:2)):p>5||5==p&&(4==r||s||6==r&&(i>0?o>0?l/y[a-o]:0:v[h-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(s){t-=e.e+1;v[0]=y[(f-t%f)%f];e.e=-t||0}else{v[0]=e.e=0}return e}if(0==i){v.length=h;c=1;h--}else{v.length=h+1;c=y[f-i];v[h]=o>0?d(l/y[a-o]%y[o])*c:0}if(s){for(;;){if(0==h){for(i=1,o=v[0];o>=10;o/=10,i++);o=v[0]+=c;for(c=1;o>=10;o/=10,c++);if(i!=c){e.e++;if(v[0]==u)v[0]=1}break}v[h]+=c;if(v[h]!=u)break;v[h--]=0;c=1}}for(i=v.length;0===v[--i];v.pop());}if(e.e>P)e.c=e.e=null;else if(e.e<b)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=w||r>=g?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}a.absoluteValue=a.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};a.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};a.decimalPlaces=a.dp=function(e,t){var r,s,a,i=this;if(null!=e){intCheck(e,0,v);if(null==t)t=_;else intCheck(t,0,8);return round(new BigNumber(i),e+i.e+1,t)}if(!(r=i.c))return null;s=((a=r.length-1)-bitFloor(this.e/f))*f;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};a.dividedBy=a.div=function(e,r){return t(this,new BigNumber(e,r),y,_)};a.dividedToIntegerBy=a.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};a.exponentiatedBy=a.pow=function(e,t){var r,s,a,o,l,u,h,m,p,v=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(c+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);u=e.e>14;if(!v.c||!v.c[0]||1==v.c[0]&&!v.e&&1==v.c.length||!e.c||!e.c[0]){p=new BigNumber(Math.pow(+valueOf(v),u?e.s*(2-isOdd(e)):+valueOf(e)));return t?p.mod(t):p}h=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!h&&v.isInteger()&&t.isInteger();if(s)v=v.mod(t)}else if(e.e>9&&(v.e>0||v.e<-1||(0==v.e?v.c[0]>1||u&&v.c[1]>=24e7:v.c[0]<8e13||u&&v.c[0]<=9999975e7))){o=(v.s<0&&isOdd(e),-0);if(v.e>-1)o=1/o;return new BigNumber(h?1/o:o)}else if(k)o=n(k/f+2);if(u){r=new BigNumber(.5);if(h)e.s=1;m=isOdd(e)}else{a=Math.abs(+valueOf(e));m=a%2}p=new BigNumber(i);for(;;){if(m){p=p.times(v);if(!p.c)break;if(o){if(p.c.length>o)p.c.length=o}else if(s)p=p.mod(t)}if(a){a=d(a/2);if(0===a)break;m=a%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)m=isOdd(e);else{a=+valueOf(e);if(0===a)break;m=a%2}}v=v.times(v);if(o){if(v.c&&v.c.length>o)v.c.length=o}else if(s)v=v.mod(t)}if(s)return p;if(h)p=i.div(p);return t?p.mod(t):o?round(p,k,_,l):p};a.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=_;else intCheck(e,0,8);return round(t,t.e+1,e)};a.isEqualTo=a.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};a.isFinite=function(){return!!this.c};a.isGreaterThan=a.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isInteger=function(){return!!this.c&&bitFloor(this.e/f)>this.c.length-2};a.isLessThan=a.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};a.isLessThanOrEqualTo=a.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isNaN=function(){return!this.s};a.isNegative=function(){return this.s<0};a.isPositive=function(){return this.s>0};a.isZero=function(){return!!this.c&&0==this.c[0]};a.minus=function(e,t){var r,s,a,i,o=this,n=o.s;e=new BigNumber(e,t);t=e.s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return o.plus(e)}var d=o.e/f,c=e.e/f,l=o.c,h=e.c;if(!d||!c){if(!l||!h)return l?(e.s=-t,e):new BigNumber(h?o:NaN);if(!l[0]||!h[0]){return h[0]?(e.s=-t,e):new BigNumber(l[0]?o:-0)}}d=bitFloor(d);c=bitFloor(c);l=l.slice();if(n=d-c){if(i=n<0){n=-n;a=l}else{c=d;a=h}a.reverse();for(t=n;t--;a.push(0));a.reverse()}else{s=(i=(n=l.length)<(t=h.length))?n:t;for(n=t=0;t<s;t++)if(l[t]!=h[t]){i=l[t]<h[t];break}}if(i){a=l;l=h;h=a;e.s=-e.s}t=(s=h.length)-(r=l.length);if(t>0)for(;t--;l[r++]=0);t=u-1;for(;s>n;){if(l[--s]<h[s]){for(r=s;r&&!l[--r];l[r]=t);--l[r];l[s]+=u}l[s]-=h[s]}for(;0==l[0];l.splice(0,1),--c);if(!l[0]){e.s=3==_?-1:1;e.c=[e.e=0];return e}return normalise(e,l,c)};a.modulo=a.mod=function(e,r){var s,a,i=this;e=new BigNumber(e,r);if(i.c&&e.s&&(!e.c||e.c[0])){if(!e.c||i.c&&!i.c[0]){return new BigNumber(i)}}else{return new BigNumber(NaN)}if(9==C){a=e.s;e.s=1;s=t(i,e,0,3);e.s=a;s.s*=a}else{s=t(i,e,0,C)}e=i.minus(s.times(e));if(!e.c[0]&&1==C)e.s=i.s;return e};a.multipliedBy=a.times=function(e,t){var r,s,a,i,o,n,d,c,l,h,m,v,y,_,w,g=this,b=g.c,P=(e=new BigNumber(e,t)).c;if(!b||!P||!b[0]||!P[0]){if(g.s&&e.s&&(!b||b[0]||P)&&(!P||P[0]||b)){e.s*=g.s;if(b&&P){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(g.e/f)+bitFloor(e.e/f);e.s*=g.s;d=b.length;h=P.length;if(d<h){y=b;b=P;P=y;a=d;d=h;h=a}for(a=d+h,y=[];a--;y.push(0));_=u;w=p;for(a=h;--a>=0;){r=0;m=P[a]%w;v=P[a]/w|0;for(o=d,i=a+o;i>a;){c=b[--o]%w;l=b[o]/w|0;n=v*c+l*m;c=m*c+n%w*w+y[i]+r;r=(c/_|0)+(n/w|0)+v*l;y[i--]=c%_}y[i]=r}if(r)++s;else y.splice(0,1);return normalise(e,y,s)};a.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};a.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var i=s.e/f,o=e.e/f,n=s.c,d=e.c;if(!i||!o){if(!n||!d)return new BigNumber(a/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*a)}i=bitFloor(i);o=bitFloor(o);n=n.slice();if(a=i-o){if(a>0){o=i;r=d}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=d.length;if(a-t<0){r=d;d=n;n=r;t=a}for(a=0;t;){a=(n[--t]=n[t]+d[t]+a)/u|0;n[t]=u===n[t]?0:n[t]%u}if(a){n=[a].concat(n);++o}return normalise(e,n,o)};a.precision=a.sd=function(e,t){var r,s,a,i=this;if(null!=e&&!!e!==e){intCheck(e,1,v);if(null==t)t=_;else intCheck(t,0,8);return round(new BigNumber(i),e,t)}if(!(r=i.c))return null;a=r.length-1;s=a*f+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&i.e+1>s)s=i.e+1;return s};a.shiftedBy=function(e){intCheck(e,-h,h);return this.times("1e"+e)};a.squareRoot=a.sqrt=function(){var e,r,s,a,i,o=this,n=o.c,d=o.s,c=o.e,l=y+4,u=new BigNumber("0.5");if(1!==d||!n||!n[0]){return new BigNumber(!d||d<0&&(!n||n[0])?NaN:n?o:1/0)}d=Math.sqrt(+valueOf(o));if(0==d||d==1/0){r=coeffToString(n);if((r.length+c)%2==0)r+="0";d=Math.sqrt(+r);c=bitFloor((c+1)/2)-(c<0||c%2);if(d==1/0)r="5e"+c;else{r=d.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}s=new BigNumber(r)}else{s=new BigNumber(d+"")}if(s.c[0]){c=s.e;d=c+l;if(d<3)d=0;for(;;){i=s;s=u.times(i.plus(t(o,i,l,1)));if(coeffToString(i.c).slice(0,d)===(r=coeffToString(s.c)).slice(0,d)){if(s.e<c)--d;r=r.slice(d-3,d+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+y+2,1);e=!s.times(s).eq(o)}break}if(!a){round(i,i.e+y+2,0);if(i.times(i).eq(o)){s=i;break}}l+=4;d+=4;a=1}}}return round(s,s.e+y+1,_,e)};a.toExponential=function(e,t){if(null!=e){intCheck(e,0,v);e++}return format(this,e,t,1)};a.toFixed=function(e,t){if(null!=e){intCheck(e,0,v);e=e+this.e+1}return format(this,e,t)};a.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=j}else if("object"!=typeof r){throw Error(c+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var i,o=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,l=r.groupSeparator||"",u=o[0],f=o[1],h=a.s<0,m=h?u.slice(1):u,p=m.length;if(d){i=n;n=d;d=i;p-=i}if(n>0&&p>0){i=p%n||n;u=m.substr(0,i);for(;i<p;i+=n)u+=l+m.substr(i,n);if(d>0)u+=l+m.slice(i);if(h)u="-"+u}s=f?u+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):u}return(r.prefix||"")+s+(r.suffix||"")};a.toFraction=function(e){var r,s,a,o,n,d,l,u,h,p,v,y,w=this,g=w.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(i)){throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!g)return new BigNumber(w);r=new BigNumber(i);h=s=new BigNumber(i);a=u=new BigNumber(i);y=coeffToString(g);n=r.e=y.length-w.e-1;r.c[0]=m[(d=n%f)<0?f+d:d];e=!e||l.comparedTo(r)>0?n>0?r:h:l;d=P;P=1/0;l=new BigNumber(y);u.c[0]=0;for(;;){p=t(l,r,0,1);o=s.plus(p.times(a));if(1==o.comparedTo(e))break;s=a;a=o;h=u.plus(p.times(o=h));u=o;r=l.minus(p.times(o=r));l=o}o=t(e.minus(s),a,0,1);u=u.plus(o.times(h));s=s.plus(o.times(a));u.s=h.s=w.s;n*=2;v=t(h,a,n,_).minus(w).abs().comparedTo(t(u,s,n,_).minus(w).abs())<1?[h,a]:[u,s];P=d;return v};a.toNumber=function(){return+valueOf(this)};a.toPrecision=function(e,t){if(null!=e)intCheck(e,1,v);return format(this,e,t,2)};a.toString=function(e){var t,s=this,a=s.s,i=s.e;if(null===i)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=i<=w||i>=g?toExponential(coeffToString(s.c),i):toFixedPoint(coeffToString(s.c),i,"0");else if(10===e&&T){s=round(new BigNumber(s),y+i+1,_);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,x.length,"Base");t=r(toFixedPoint(coeffToString(s.c),i,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};a.valueOf=a.toJSON=function(){return valueOf(this)};a._isBigNumber=true;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,i=e[0]+"";for(;s<a;){t=e[s++]+"";r=f-t.length;for(;r--;t="0"+t);i+=t}for(a=i.length;48===i.charCodeAt(--a););return i.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,i=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=a&&!a[0];s=i&&!i[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!a||!i)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=i.length)?d:c;for(o=0;o<n;o++)if(a[o]!=i[o])return a[o]>i[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==d(e)){throw Error(c+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/f)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}i=clone();i["default"]=i.BigNumber=i;if(true)s=(function(){return i}).call(t,r,t,e),void 0!==s&&(e.exports=s)})(this)},"../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Bip32Account=void 0;const o=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");class Bip32Account{async derivePublicKey(e){const t=await this.extendedAccountPublicKey.derive([e.role,e.index]);return t.toRawKey()}async deriveAddress(e,t){const r={index:t,role:n.KeyRole.Stake};const s=await this.derivePublicKey({index:e.index,role:Number(e.type)});const a=await s.hash();const i=await this.derivePublicKey(r);const o=await i.hash();const l={hash:(0,c.Hash28ByteBase16)(o.hex()),type:d.Cardano.CredentialType.KeyHash};const u=d.Cardano.BaseAddress.fromCredentials(this.chainId.networkId,{hash:(0,c.Hash28ByteBase16)(a.hex()),type:d.Cardano.CredentialType.KeyHash},l).toAddress();const f=d.Cardano.RewardAddress.fromCredentials(this.chainId.networkId,l).toAddress();return{accountIndex:this.accountIndex,address:d.Cardano.PaymentAddress(u.toBech32()),networkId:this.chainId.networkId,rewardAccount:d.Cardano.RewardAccount(f.toBech32()),stakeKeyDerivationPath:r,...e}}static async fromAsyncKeyAgent(e){return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()})}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r}){this.extendedAccountPublicKey=o.Bip32PublicKey.fromHex(e);this.chainId=t;this.accountIndex=r}}t.Bip32Account=Bip32Account},"../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.InMemoryKeyAgent=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));const p=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const v=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js");const y=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");const _=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js");const w=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js");const g=c(r("../../node_modules/lodash/uniqBy.js"));const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new m.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends _.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await d(this,l,"m",f).call(this);const a=await (0,y.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const i=await this.bip32Ed25519.derivePrivateKey(a,[t,e]);const o=await this.bip32Ed25519.getRawPrivateKey(i);const n=await this.bip32Ed25519.sign(o,r);const c=await this.bip32Ed25519.getPublicKey(o);return{publicKey:c,signature:n}}async signCip8Data(e){return await (0,v.cip30signData)(this,e)}async exportRootPrivateKey(){return await d(this,l,"m",f).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:a="",accountIndex:i=0,purpose:o=p.KeyPurpose.STANDARD},n){const d=(0,y.joinMnemonicWords)(r);const c=(0,y.validateMnemonic)(d);if(!c)throw new m.InvalidMnemonicError;const l=s.from((0,y.mnemonicWordsToEntropy)(r),"hex");const u=n.bip32Ed25519.fromBip39Entropy(l,a);const f=await getPassphraseRethrowTypedError(t);const h=await (0,w.emip3encrypt)(s.from(u,"hex"),f);const v=await (0,y.deriveAccountPrivateKey)({accountIndex:i,bip32Ed25519:n.bip32Ed25519,purpose:o,rootPrivateKey:u});const _=await n.bip32Ed25519.getBip32PublicKey(v);return new InMemoryKeyAgent({accountIndex:i,chainId:e,encryptedRootPrivateKeyBytes:[...h],extendedAccountPublicKey:_,getPassphrase:t,purpose:o},n)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:s},{additionalKeyPaths:a=[]}={}){const i=e.hash();const o=e.toCore();const n=(await h.Ed25519PublicKey.fromHex(await this.derivePublicKey(y.DREP_KEY_DERIVATION_PATH)).hash()).hex();const d=(0,y.ownSignatureKeyPaths)(o,r,t,n,s);const c=(0,g.default)([...d,...a],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(c.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},i);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,y.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:p.KeyAgentType.InMemory},r);l.add(this);u.set(this,void 0);n(this,u,e,"f")}}t.InMemoryKeyAgent=InMemoryKeyAgent;u=new WeakMap,l=new WeakSet,f=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>d(this,u,"f").call(this,e));let r;try{r=await (0,w.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(a){throw new m.AuthenticationError("Failed to decrypt root private key",a)}return h.Bip32PrivateKeyHex(s.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentBase=void 0;const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js");class KeyAgentBase{get serializableData(){return a(this,i,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return a(this,o,"f")}get purpose(){return this.serializableData.purpose||d.KeyPurpose.STANDARD}async deriveAddress(e,t){return a(this,n,"f").deriveAddress(e,t)}async derivePublicKey(e){return(await a(this,n,"f").derivePublicKey(e)).hex()}constructor(e,{bip32Ed25519:t}){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f");s(this,n,new c.Bip32Account(e),"f")}}t.KeyAgentBase=KeyAgentBase;i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.cip30signData=t.createCoseKey=t.getAddressBytes=t.Cip30DataSignError=t.Cip30DataSignErrorCode=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js");const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");var h;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(h=t.Cip30DataSignErrorCode||(t.Cip30DataSignErrorCode={}));class Cip30DataSignError extends l.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}t.Cip30DataSignError=Cip30DataSignError;const getAddressBytes=e=>{const t=c.Cardano.Address.fromString(e);if(!t){throw new Cip30DataSignError(h.AddressNotPK,"Invalid address")}return s.from(t.toBytes(),"hex")};t.getAddressBytes=getAddressBytes;const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const s=e.startsWith("stake");if(s){const a=t.find(({rewardAccount:t})=>t===e);if(!a)throw new Cip30DataSignError(h.ProofGeneration,"Unknown reward address");return a.stakeKeyDerivationPath||f.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var i;const o=c.Cardano.Address.fromString(e);if((null==o?void 0:o.getType())===c.Cardano.AddressType.EnterpriseKey&&(null===(i=null==o?void 0:o.getProps().paymentPart)||void 0===i?void 0:i.hash)===n.Hash28ByteBase16.fromEd25519KeyHashHex(r)){return f.DREP_KEY_DERIVATION_PATH}}const d=t.find(({address:t})=>t===e);if(!d){throw new Cip30DataSignError(h.ProofGeneration,"Unknown address")}return{index:d.index,role:d.type}};const createSigStructureHeaders=e=>{const t=d.HeaderMap.new();t.set_key_id(e);t.set_header(u.CoseLabel.address,d.CBORValue.new_bytes(e));t.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,c.util.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(h.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=d.COSEKey.new(d.Label.from_key_type(d.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));r.set_header(u.CoseLabel.crv,d.CBORValue.from_label(d.Label.from_curve_type(d.CurveType.Ed25519)));r.set_header(u.CoseLabel.x,d.CBORValue.new_bytes(s.from(t,"hex")));return r};t.createCoseKey=createCoseKey;const cip30signData=async(e,{knownAddresses:r,signWith:a,payload:i})=>{const o=(await n.Ed25519PublicKey.fromHex(await e.derivePublicKey(f.DREP_KEY_DERIVATION_PATH)).hash()).hex();const l=(0,t.getAddressBytes)(a);const u=await getDerivationPath(a,r,o);const h=d.COSESign1Builder.new(d.Headers.new(d.ProtectedHeaderMap.new(createSigStructureHeaders(l)),d.HeaderMap.new()),s.from(i,"hex"),false);const m=h.make_data_to_sign();const{signature:p,publicKey:v}=await signSigStructure(e,u,m);const y=h.build(s.from(p,"hex"));const _=(0,t.createCoseKey)(l,v);return{key:c.util.bytesToHex(_.to_bytes()),signature:c.util.bytesToHex(y.to_bytes())}};t.cip30signData=cip30signData},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CoseLabel=void 0;const s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");t.CoseLabel={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.emip3decrypt=t.emip3encrypt=t.createPbkdf2Key=void 0;const i=r("../../node_modules/pbkdf2/browser.js");const o=a(r("../../node_modules/chacha/browser.js"));const n=a(r("../../node_modules/get-random-values/index.js"));const d=32;const c=12;const l=19162;const u=32;const f=16;const h=s.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,s)=>(0,i.pbkdf2)(e,t,l,d,"sha512",(e,t)=>{if(e)return s(e);r(t)}));t.createPbkdf2Key=createPbkdf2Key;const emip3encrypt=async(e,r)=>{const a=new Uint8Array(u);(0,n.default)(a);const i=await (0,t.createPbkdf2Key)(r,a);const d=new Uint8Array(c);(0,n.default)(d);const l=o.default.createCipher(i,s.from(d));l.setAAD(h,{plaintextLength:e.length});const f=l.update(e);const m=l.final();const p=l.getAuthTag();return s.concat([a,d,p,f,m])};t.emip3encrypt=emip3encrypt;const emip3decrypt=async(e,r)=>{const a=e.slice(0,u);const i=e.slice(u,u+c);const n=e.slice(u+c,u+c+f);const d=e.slice(u+c+f);const l=await (0,t.createPbkdf2Key)(r,a);const m=o.default.createDecipher(l,s.from(i));m.setAuthTag(s.from(n));m.setAAD(h);return s.concat([m.update(s.from(d)),m.final()])};t.emip3decrypt=emip3decrypt},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthenticationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.AuthenticationError=AuthenticationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HwMappingError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.HwMappingError=HwMappingError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidMnemonicError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}t.InvalidMnemonicError=InvalidMnemonicError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidSerializableDataError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends s.CustomError{constructor(e){super(formatMessage(e))}}t.InvalidSerializableDataError=InvalidSerializableDataError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProofGenerationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.ProofGenerationError=ProofGenerationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransportError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.TransportError=TransportError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.cip8=t.util=t.errors=void 0;t.errors=i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js"),t);o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js"),t);t.util=i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js"),t);o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js"),t);t.cip8=i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TxInId=t.CommunicationType=t.DeviceType=t.AddressType=t.KeyPurpose=t.KeyRole=t.KeyAgentType=t.Cip1852PathLevelIndexes=t.CardanoKeyConst=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");var a;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(a=t.CardanoKeyConst||(t.CardanoKeyConst={}));var i;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(i=t.Cip1852PathLevelIndexes||(t.Cip1852PathLevelIndexes={}));var o;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(o=t.KeyAgentType||(t.KeyAgentType={}));var n;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(n=t.KeyRole||(t.KeyRole={}));var d;(function(e){e[e["STANDARD"]=s.HD_WALLET_CIP_ID]="STANDARD";e[e["MULTI_SIG"]=s.MULTISIG_CIP_ID]="MULTI_SIG"})(d=t.KeyPurpose||(t.KeyPurpose={}));var c;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(c=t.AddressType||(t.AddressType={}));var l;(function(e){e["Ledger"]="Ledger"})(l=t.DeviceType||(t.DeviceType={}));var u;(function(e){e["Web"]="web";e["Node"]="node"})(u=t.CommunicationType||(t.CommunicationType={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`;t.TxInId=TxInId},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentTransactionSigner=void 0;const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js");const d=1;class KeyAgentTransactionSigner{async sign(e){const t=await a(this,i,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[a(this,o,"f")]});if(t.size!==d)throw new n.ProofGenerationError(`Invalid number of signatures. Expected ${d} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){i.set(this,void 0);o.set(this,void 0);s(this,i,e,"f");s(this,o,t,"f")}}t.KeyAgentTransactionSigner=KeyAgentTransactionSigner;i=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.validateMnemonic=t.mnemonicWordsToEntropy=t.entropyToMnemonicWords=t.joinMnemonicWords=t.generateMnemonicWords=t.mnemonicToWords=void 0;const o=i(r("../../node_modules/bip39/src/index.js"));const mnemonicToWords=e=>e.split(" ");t.mnemonicToWords=mnemonicToWords;const generateMnemonicWords=(e=256)=>(0,t.mnemonicToWords)(o.generateMnemonic(e));t.generateMnemonicWords=generateMnemonicWords;const joinMnemonicWords=e=>e.join(" ");t.joinMnemonicWords=joinMnemonicWords;const entropyToMnemonicWords=e=>(0,t.mnemonicToWords)(o.entropyToMnemonic(e));t.entropyToMnemonicWords=entropyToMnemonicWords;const mnemonicWordsToEntropy=e=>o.mnemonicToEntropy((0,t.joinMnemonicWords)(e));t.mnemonicWordsToEntropy=mnemonicWordsToEntropy;t.validateMnemonic=o.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createAsyncKeyAgent=void 0;const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}};t.createAsyncKeyAgent=createAsyncKeyAgent},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.createBip32Ed25519Witnesser=t.Bip32Ed25519Witnesser=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js");class Bip32Ed25519Witnesser{async witness(e,t,r){var s,d;const c=e.toCore();const l=e.getId();const u=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,n.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:c.body}):await Bip32Ed25519Witnesser.getSignatures(a(this,i,"f"),e.body(),t,r);const f={auxiliaryData:c.auxiliaryData,body:c.body,id:l,isValid:e.isValid(),witness:{...c.witness,signatures:new Map([...u.entries(),...(null===(s=c.witness)||void 0===s?void 0:null===(d=s.signatures)||void 0===d?void 0:d.entries())||[]])}};var h;return{cbor:o.Serialization.TxCBOR.serialize(f),context:{handleResolutions:null!==(h=t.handleResolutions)&&void 0!==h?h:[]},tx:f}}async signData(e){return a(this,i,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const a=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const i of null==s?void 0:s.extraSigners){const o=await i.sign(t);a.set(o.pubKey,o.signature)}}return a}constructor(e){i.set(this,void 0);s(this,i,e,"f")}}t.Bip32Ed25519Witnesser=Bip32Ed25519Witnesser;i=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e);t.createBip32Ed25519Witnesser=createBip32Ed25519Witnesser},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureStakeKeys=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:a,paymentKeyIndex:i=0})=>{const o=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));a.debug(`Stake keys requested: ${r}; got ${o.size}`);const n=[];for(let d=0;o.size<r;d++)if(!o.has(d)){const c=await e.deriveAddress({index:i,type:s.AddressType.External},d);n.push(c);a.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);o.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...o.values()]}};t.ensureStakeKeys=ensureStakeKeys},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js"),t);a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.stakeKeyPathFromGroupedAddress=t.paymentKeyPathFromGroupedAddress=t.accountKeyDerivationPathToBip32Path=t.deriveAccountPrivateKey=t.toEd25519KeyPair=t.DREP_KEY_DERIVATION_PATH=t.STAKE_KEY_DERIVATION_PATH=t.harden=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const harden=e=>2147483648+e;t.harden=harden;t.STAKE_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.Stake};t.DREP_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});t.toEd25519KeyPair=toEd25519KeyPair;const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:r,bip32Ed25519:a,purpose:i=s.KeyPurpose.STANDARD})=>await a.derivePrivateKey(e,[(0,t.harden)(i),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(r)]);t.deriveAccountPrivateKey=deriveAccountPrivateKey;const accountKeyDerivationPathToBip32Path=(e,{index:r,role:a},i=s.CardanoKeyConst.PURPOSE)=>[(0,t.harden)(i),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e),a,r];t.accountKeyDerivationPathToBip32Path=accountKeyDerivationPathToBip32Path;const paymentKeyPathFromGroupedAddress=e=>[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.type,e.index];t.paymentKeyPathFromGroupedAddress=paymentKeyPathFromGroupedAddress;const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]};t.stakeKeyPathFromGroupedAddress=stakeKeyPathFromGroupedAddress},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js":function(e,t,r){"use strict";var s,a,i,o;var n=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r)}d(t,e);return t};var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ownSignatureKeyPaths=t.createTxInKeyPathMap=t.getDRepCredentialKeyPaths=t.getVotingProcedureKeyPaths=t.checkStakeCredentialCertificates=void 0;const u=c(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=l(r("../../node_modules/lodash/isEqual.js"));const y=l(r("../../node_modules/lodash/uniqBy.js"));const _=l(r("../../node_modules/lodash/uniqWith.js"));const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const a=t.find(e=>e.rewardAccount===s.stakeAddress);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case h.Cardano.CertificateType.VoteDelegation:case h.Cardano.CertificateType.StakeVoteDelegation:case h.Cardano.CertificateType.StakeRegistrationDelegation:case h.Cardano.CertificateType.VoteRegistrationDelegation:case h.Cardano.CertificateType.StakeVoteRegistrationDelegation:case h.Cardano.CertificateType.Registration:case h.Cardano.CertificateType.Unregistration:case h.Cardano.CertificateType.StakeDeregistration:case h.Cardano.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===h.Cardano.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const a=t.find(e=>e.rewardAccount===s);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.MIR)if(e.kind===h.Cardano.MirCertificateKind.ToStakeCreds){const s=t.find(t=>u.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const n of t){const d=checkStakeKeyHashCertificate(n,e);(s=r).requiresForeignSignatures||(s.requiresForeignSignatures=d.requiresForeignSignatures);r.derivationPaths.push(...d.derivationPaths);const c=checkPoolRegistrationCertificate(n,e);(a=r).requiresForeignSignatures||(a.requiresForeignSignatures=c.requiresForeignSignatures);r.derivationPaths.push(...c.derivationPaths);const l=checkPoolRetirementCertificate(n,e);(i=r).requiresForeignSignatures||(i.requiresForeignSignatures=l.requiresForeignSignatures);r.derivationPaths.push(...l.derivationPaths);const u=checkMirCertificate(n,e);(o=r).requiresForeignSignatures||(o.requiresForeignSignatures=u.requiresForeignSignatures);r.derivationPaths.push(...u.derivationPaths)}r.derivationPaths=(0,_.default)(r.derivationPaths,v.default);return r};t.checkStakeCredentialCertificates=checkStakeCredentialCertificates;const getSignersData=e=>(0,y.default)(e,"rewardAccount").map(e=>{const t=h.Cardano.RewardAccount.toHash(e.rewardAccount);const r=h.Cardano.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,r)=>{let s=false;const a=[];const i=getSignersData(e);const o=checkWithdrawals(r,i);s||(s=o.requiresForeignSignatures);a.push(...o.derivationPaths);const n=(0,t.checkStakeCredentialCertificates)(i,r);s||(s=n.requiresForeignSignatures);a.push(...n.derivationPaths);return{derivationPaths:new Set(a),requiresForeignSignatures:s}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const s={derivationPaths:[],requiresForeignSignatures:false};const a=getSignersData(e);for(const{voter:i}of r.votingProcedures||[]){switch(i.__typename){case h.Cardano.VoterType.dRepKeyHash:if(t&&i.credential.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(t))s.derivationPaths.push(m.DREP_KEY_DERIVATION_PATH);else s.requiresForeignSignatures=true;break;case h.Cardano.VoterType.stakePoolKeyHash:{const o=a.find(e=>u.Hash28ByteBase16.fromEd25519KeyHashHex(e.stakeKeyHash)===i.credential.hash);if(o)s.derivationPaths.push(o.derivationPath);else s.requiresForeignSignatures=true;break}default:s.requiresForeignSignatures=true;break}}return s};t.getVotingProcedureKeyPaths=getVotingProcedureKeyPaths;const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const a of e){var i,o;const n=null===(o=null===(i=h.Cardano.Address.fromBech32(a.address))||void 0===i?void 0:i.asBase())||void 0===o?void 0:o.getPaymentCredential().hash;const d=h.Cardano.RewardAccount.toHash(a.rewardAccount);if(n&&n.toString()===s)r.push({index:a.index,role:Number(a.type)});if(d&&a.stakeKeyDerivationPath&&d.toString()===s)r.push(a.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&h.Cardano.RewardAccount.toHash(e.rewardAccount)===u.Hash28ByteBase16.fromEd25519KeyHashHex(t)?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,s;const a=null===(s=null===(r=h.Cardano.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential();if((null==a?void 0:a.type)===h.Cardano.CredentialType.ScriptHash&&a.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(t))return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false};if((null==a?void 0:a.type)===h.Cardano.CredentialType.ScriptHash){return{derivationPaths:[{index:e.index,role:f.KeyRole.External}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=checkStakeCredential(s,e.keyHash);r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!h.Cardano.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case h.Cardano.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case h.Cardano.NativeScriptKind.RequireAllOf:case h.Cardano.NativeScriptKind.RequireAnyOf:case h.Cardano.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case h.Cardano.NativeScriptKind.RequireTimeBefore:case h.Cardano.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t.certificates||[])if(s.__typename===h.Cardano.CertificateType.UnregisterDelegateRepresentative||s.__typename===h.Cardano.CertificateType.UpdateDelegateRepresentative||s.__typename===h.Cardano.CertificateType.RegisterDelegateRepresentative)if(s.dRepCredential.type!==h.Cardano.CredentialType.ScriptHash&&e&&s.dRepCredential.hash===u.Hash28ByteBase16.fromEd25519KeyHashHex(e))r.derivationPaths=[m.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};t.getDRepCredentialKeyPaths=getDRepCredentialKeyPaths;const createTxInKeyPathMap=async(e,t,r)=>{const s={};const a=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(a.map(async e=>{const a=await r.resolveInput(e);if(!a)return;const i=t.find(({address:e})=>e===a.address);if(!i)return;s[(0,f.TxInId)(e)]={index:i.index,role:Number(i.type)}}));return s};t.createTxInKeyPathMap=createTxInKeyPathMap;const ownSignatureKeyPaths=(e,r,s,a,i)=>{const o=Object.values(s).filter(p.isNotNil);return(0,_.default)([...o,...getStakeCredentialKeyPaths(r,e).derivationPaths,...(0,t.getDRepCredentialKeyPaths)({dRepKeyHash:a,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(r,e.requiredExtraSignatures),...(0,t.getVotingProcedureKeyPaths)({dRepKeyHash:a,groupedAddresses:r,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(r,i).derivationPaths],v.default)};t.ownSignatureKeyPaths=ownSignatureKeyPaths},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.stubSignTransaction=void 0;const n=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js");const l=o(r("../../node_modules/lodash/uniqWith.js"));const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>n.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:s,scripts:a},signTransactionOptions:{extraSigners:i,additionalKeyPaths:o=[]}={}})=>{const u=n.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=(0,l.default)([...(0,c.ownSignatureKeyPaths)(e,t,r,s,a),...o],d.deepEquals);const h=f.length+((null==i?void 0:i.length)||0);const m=new Map;for(let p=0;p<h;++p)m.set(randomPublicKey(),u);return m};t.stubSignTransaction=stubSignTransaction},"../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Account:()=>Bip32Account});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var l=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");class Bip32Account{async derivePublicKey(e){const t=await this.extendedAccountPublicKey.derive([e.role,e.index]);return t.toRawKey()}async deriveAddress(e,t){const r={index:t,role:a.KeyRole.Stake};const s=await this.derivePublicKey({index:e.index,role:Number(e.type)});const u=await s.hash();const f=await this.derivePublicKey(r);const h=await f.hash();const m={hash:(0,l.Hash28ByteBase16)(h.hex()),type:i.CredentialType.KeyHash};const p=o.BaseAddress.fromCredentials(this.chainId.networkId,{hash:(0,l.Hash28ByteBase16)(u.hex()),type:i.CredentialType.KeyHash},m).toAddress();const v=n.RewardAddress.fromCredentials(this.chainId.networkId,m).toAddress();return{accountIndex:this.accountIndex,address:d.PaymentAddress(p.toBech32()),networkId:this.chainId.networkId,rewardAccount:c.RewardAccount(v.toBech32()),stakeKeyDerivationPath:r,...e}}static async fromAsyncKeyAgent(e){return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()})}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r}){this.extendedAccountPublicKey=s.Bip32PublicKey.fromHex(e);this.chainId=t;this.accountIndex=r}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyAgent:()=>InMemoryKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var m=r("../../node_modules/lodash/uniqBy.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,y,_;const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new i.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends f.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await __classPrivateFieldGet(this,v,"m",_).call(this);const a=await (0,c.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const i=await this.bip32Ed25519.derivePrivateKey(a,[t,e]);const o=await this.bip32Ed25519.getRawPrivateKey(i);const n=await this.bip32Ed25519.sign(o,r);const d=await this.bip32Ed25519.getPublicKey(o);return{publicKey:d,signature:n}}async signCip8Data(e){return await (0,d.cip30signData)(this,e)}async exportRootPrivateKey(){return await __classPrivateFieldGet(this,v,"m",_).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:s="",accountIndex:a=0,purpose:i=n.KeyPurpose.STANDARD},d){const u=(0,l.joinMnemonicWords)(r);const f=(0,l.validateMnemonic)(u);if(!f)throw new o.InvalidMnemonicError;const m=p.from((0,l.mnemonicWordsToEntropy)(r),"hex");const v=d.bip32Ed25519.fromBip39Entropy(m,s);const y=await getPassphraseRethrowTypedError(t);const _=await (0,h.emip3encrypt)(p.from(v,"hex"),y);const w=await (0,c.deriveAccountPrivateKey)({accountIndex:a,bip32Ed25519:d.bip32Ed25519,purpose:i,rootPrivateKey:v});const g=await d.bip32Ed25519.getBip32PublicKey(w);return new InMemoryKeyAgent({accountIndex:a,chainId:e,encryptedRootPrivateKeyBytes:[..._],extendedAccountPublicKey:g,getPassphrase:t,purpose:i},d)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:a},{additionalKeyPaths:i=[]}={}){const o=e.hash();const n=e.toCore();const d=(await s.Ed25519PublicKey.fromHex(await this.derivePublicKey(c.DREP_KEY_DERIVATION_PATH)).hash()).hex();const l=(0,u.ownSignatureKeyPaths)(n,r,t,d,a);const f=m([...l,...i],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(f.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},o);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,c.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:n.KeyAgentType.InMemory},r);v.add(this);y.set(this,void 0);__classPrivateFieldSet(this,y,e,"f")}}y=new WeakMap,v=new WeakSet,_=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>__classPrivateFieldGet(this,y,"f").call(this,e));let r;try{r=await (0,h.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(s){throw new i.AuthenticationError("Failed to decrypt root private key",s)}return a.Bip32PrivateKeyHex(p.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js":(e,t,r)=>{"use strict";r.d(t,{KeyAgentBase:()=>KeyAgentBase});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n;class KeyAgentBase{get serializableData(){return __classPrivateFieldGet(this,i,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return __classPrivateFieldGet(this,o,"f")}get purpose(){return this.serializableData.purpose||s.KeyPurpose.STANDARD}async deriveAddress(e,t){return __classPrivateFieldGet(this,n,"f").deriveAddress(e,t)}async derivePublicKey(e){return(await __classPrivateFieldGet(this,n,"f").derivePublicKey(e)).hex()}constructor(e,{bip32Ed25519:t}){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,o,t,"f");__classPrivateFieldSet(this,n,new a.Bip32Account(e),"f")}}i=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js":(e,t,r)=>{"use strict";r.d(t,{Cip30DataSignError:()=>Cip30DataSignError,Cip30DataSignErrorCode:()=>f,cip30signData:()=>cip30signData,createCoseKey:()=>createCoseKey,getAddressBytes:()=>getAddressBytes});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var f;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(f||(f={}));class Cip30DataSignError extends d.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}const getAddressBytes=e=>{const t=o.Address.fromString(e);if(!t){throw new Cip30DataSignError(f.AddressNotPK,"Invalid address")}return u.from(t.toBytes(),"hex")};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const a=e.startsWith("stake");if(a){const i=t.find(({rewardAccount:t})=>t===e);if(!i)throw new Cip30DataSignError(f.ProofGeneration,"Unknown reward address");return i.stakeKeyDerivationPath||l.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var n;const d=o.Address.fromString(e);if((null==d?void 0:d.getType())===o.AddressType.EnterpriseKey&&(null===(n=null==d?void 0:d.getProps().paymentPart)||void 0===n?void 0:n.hash)===s.Hash28ByteBase16.fromEd25519KeyHashHex(r)){return l.DREP_KEY_DERIVATION_PATH}}const c=t.find(({address:t})=>t===e);if(!c){throw new Cip30DataSignError(f.ProofGeneration,"Unknown address")}return{index:c.index,role:c.type}};const createSigStructureHeaders=e=>{const t=i.HeaderMap.new();t.set_key_id(e);t.set_header(c.CoseLabel.address,i.CBORValue.new_bytes(e));t.set_algorithm_id(i.Label.from_algorithm_id(i.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,n.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(f.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=i.COSEKey.new(i.Label.from_key_type(i.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(i.Label.from_algorithm_id(i.AlgorithmId.EdDSA));r.set_header(c.CoseLabel.crv,i.CBORValue.from_label(i.Label.from_curve_type(i.CurveType.Ed25519)));r.set_header(c.CoseLabel.x,i.CBORValue.new_bytes(u.from(t,"hex")));return r};const cip30signData=async(e,{knownAddresses:t,signWith:r,payload:s})=>{const o=(await a.Ed25519PublicKey.fromHex(await e.derivePublicKey(l.DREP_KEY_DERIVATION_PATH)).hash()).hex();const d=getAddressBytes(r);const c=await getDerivationPath(r,t,o);const f=i.COSESign1Builder.new(i.Headers.new(i.ProtectedHeaderMap.new(createSigStructureHeaders(d)),i.HeaderMap.new()),u.from(s,"hex"),false);const h=f.make_data_to_sign();const{signature:m,publicKey:p}=await signSigStructure(e,c,h);const v=f.build(u.from(m,"hex"));const y=createCoseKey(d,p);return{key:n.bytesToHex(y.to_bytes()),signature:n.bytesToHex(v.to_bytes())}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js":(e,t,r)=>{"use strict";r.d(t,{CoseLabel:()=>a});var s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");const a={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js":(e,t,r)=>{"use strict";r.d(t,{createPbkdf2Key:()=>createPbkdf2Key,emip3decrypt:()=>emip3decrypt,emip3encrypt:()=>emip3encrypt});var s=r("../../node_modules/pbkdf2/browser.js");var a=r("../../node_modules/chacha/browser.js");var i=r("../../node_modules/get-random-values/index.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const n=32;const d=12;const c=19162;const l=32;const u=16;const f=o.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,a)=>(0,s.pbkdf2)(e,t,c,n,"sha512",(e,t)=>{if(e)return a(e);r(t)}));const emip3encrypt=async(e,t)=>{const r=new Uint8Array(l);i(r);const s=await createPbkdf2Key(t,r);const n=new Uint8Array(d);i(n);const c=a.createCipher(s,o.from(n));c.setAAD(f,{plaintextLength:e.length});const u=c.update(e);const h=c.final();const m=c.getAuthTag();return o.concat([r,n,m,u,h])};const emip3decrypt=async(e,t)=>{const r=e.slice(0,l);const s=e.slice(l,l+d);const i=e.slice(l+d,l+d+u);const n=e.slice(l+d+u);const c=await createPbkdf2Key(t,r);const h=a.createDecipher(c,o.from(s));h.setAuthTag(o.from(i));h.setAAD(f);return o.concat([h.update(o.from(n)),h.final()])}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js":(e,t,r)=>{"use strict";r.d(t,{AuthenticationError:()=>AuthenticationError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js":(e,t,r)=>{"use strict";r.d(t,{HwMappingError:()=>HwMappingError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";r.d(t,{InvalidMnemonicError:()=>InvalidMnemonicError});var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js":(e,t,r)=>{"use strict";r.d(t,{TransportError:()=>TransportError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AddressType:()=>k.AddressType,Bip32Account:()=>T.Bip32Account,CardanoKeyConst:()=>k.CardanoKeyConst,Cip1852PathLevelIndexes:()=>k.Cip1852PathLevelIndexes,CommunicationType:()=>k.CommunicationType,DeviceType:()=>k.DeviceType,InMemoryKeyAgent:()=>h.InMemoryKeyAgent,KeyAgentBase:()=>f.KeyAgentBase,KeyAgentType:()=>k.KeyAgentType,KeyPurpose:()=>k.KeyPurpose,KeyRole:()=>k.KeyRole,TxInId:()=>k.TxInId,cip8:()=>i,createPbkdf2Key:()=>C.createPbkdf2Key,emip3decrypt:()=>C.emip3decrypt,emip3encrypt:()=>C.emip3encrypt,errors:()=>s,util:()=>a});var s={};r.r(s);r.d(s,{AuthenticationError:()=>o.AuthenticationError,HwMappingError:()=>l.HwMappingError,InvalidMnemonicError:()=>n.InvalidMnemonicError,InvalidSerializableDataError:()=>InvalidSerializableDataError,ProofGenerationError:()=>ProofGenerationError,TransportError:()=>c.TransportError});var a={};r.r(a);r.d(a,{Bip32Ed25519Witnesser:()=>S.Bip32Ed25519Witnesser,DREP_KEY_DERIVATION_PATH:()=>v.DREP_KEY_DERIVATION_PATH,KeyAgentTransactionSigner:()=>KeyAgentTransactionSigner,STAKE_KEY_DERIVATION_PATH:()=>v.STAKE_KEY_DERIVATION_PATH,accountKeyDerivationPathToBip32Path:()=>v.accountKeyDerivationPathToBip32Path,checkStakeCredentialCertificates:()=>y.checkStakeCredentialCertificates,createAsyncKeyAgent:()=>p.createAsyncKeyAgent,createBip32Ed25519Witnesser:()=>S.createBip32Ed25519Witnesser,createTxInKeyPathMap:()=>y.createTxInKeyPathMap,deriveAccountPrivateKey:()=>v.deriveAccountPrivateKey,ensureStakeKeys:()=>P.ensureStakeKeys,entropyToMnemonicWords:()=>m.entropyToMnemonicWords,generateMnemonicWords:()=>m.generateMnemonicWords,getDRepCredentialKeyPaths:()=>y.getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>y.getVotingProcedureKeyPaths,harden:()=>v.harden,joinMnemonicWords:()=>m.joinMnemonicWords,mnemonicToWords:()=>m.mnemonicToWords,mnemonicWordsToEntropy:()=>m.mnemonicWordsToEntropy,ownSignatureKeyPaths:()=>y.ownSignatureKeyPaths,paymentKeyPathFromGroupedAddress:()=>v.paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>v.stakeKeyPathFromGroupedAddress,stubSignTransaction:()=>_.stubSignTransaction,toEd25519KeyPair:()=>v.toEd25519KeyPair,validateMnemonic:()=>m.validateMnemonic});var i={};r.r(i);r.d(i,{Cip30DataSignError:()=>j.Cip30DataSignError,Cip30DataSignErrorCode:()=>j.Cip30DataSignErrorCode,CoseLabel:()=>x.CoseLabel,cip30signData:()=>j.cip30signData,createCoseKey:()=>j.createCoseKey,getAddressBytes:()=>j.getAddressBytes});var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var d=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends d.CustomError{constructor(e){super(formatMessage(e))}}var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const ProofGenerationError_formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends u.ComposableError{constructor(e,t){super(ProofGenerationError_formatMessage(e),t)}}var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var y=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var _=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var w,g;const b=1;class KeyAgentTransactionSigner{async sign(e){const t=await __classPrivateFieldGet(this,w,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[__classPrivateFieldGet(this,g,"f")]});if(t.size!==b)throw new ProofGenerationError(`Invalid number of signatures. Expected ${b} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){w.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,g,t,"f")}}w=new WeakMap,g=new WeakMap;var P=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var S=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js");var C=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var k=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var j=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var x=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var T=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js")},"../../node_modules/@cardano-sdk/key-management/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{AddressType:()=>l,CardanoKeyConst:()=>i,Cip1852PathLevelIndexes:()=>o,CommunicationType:()=>f,DeviceType:()=>u,KeyAgentType:()=>n,KeyPurpose:()=>c,KeyRole:()=>d,TxInId:()=>TxInId});const s=1854;const a=1852;var i;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(i||(i={}));var o;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(o||(o={}));var n;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(n||(n={}));var d;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(d||(d={}));var c;(function(e){e[e["STANDARD"]=a]="STANDARD";e[e["MULTI_SIG"]=s]="MULTI_SIG"})(c||(c={}));var l;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(l||(l={}));var u;(function(e){e["Ledger"]="Ledger"})(u||(u={}));var f;(function(e){e["Web"]="web";e["Node"]="node"})(f||(f={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js":(e,t,r)=>{"use strict";r.d(t,{entropyToMnemonicWords:()=>entropyToMnemonicWords,generateMnemonicWords:()=>generateMnemonicWords,joinMnemonicWords:()=>joinMnemonicWords,mnemonicToWords:()=>mnemonicToWords,mnemonicWordsToEntropy:()=>mnemonicWordsToEntropy,validateMnemonic:()=>a});var s=r("../../node_modules/bip39/src/index.js");const mnemonicToWords=e=>e.split(" ");const generateMnemonicWords=(e=256)=>mnemonicToWords(s.generateMnemonic(e));const joinMnemonicWords=e=>e.join(" ");const entropyToMnemonicWords=e=>mnemonicToWords(s.entropyToMnemonic(e));const mnemonicWordsToEntropy=e=>s.mnemonicToEntropy(joinMnemonicWords(e));const a=s.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{createAsyncKeyAgent:()=>createAsyncKeyAgent});const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Ed25519Witnesser:()=>Bip32Ed25519Witnesser,createBip32Ed25519Witnesser:()=>createBip32Ed25519Witnesser});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;class Bip32Ed25519Witnesser{async witness(e,t,r){var o,n;const d=e.toCore();const c=e.getId();const l=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,a.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:d.body}):await Bip32Ed25519Witnesser.getSignatures(__classPrivateFieldGet(this,i,"f"),e.body(),t,r);const u={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:e.isValid(),witness:{...d.witness,signatures:new Map([...l.entries(),...(null===(o=d.witness)||void 0===o?void 0:null===(n=o.signatures)||void 0===n?void 0:n.entries())||[]])}};var f;return{cbor:s.TxCBOR.serialize(u),context:{handleResolutions:null!==(f=t.handleResolutions)&&void 0!==f?f:[]},tx:u}}async signData(e){return __classPrivateFieldGet(this,i,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const a=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const i of null==s?void 0:s.extraSigners){const o=await i.sign(t);a.set(o.pubKey,o.signature)}}return a}constructor(e){i.set(this,void 0);__classPrivateFieldSet(this,i,e,"f")}}i=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e)},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";r.d(t,{ensureStakeKeys:()=>ensureStakeKeys});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:a,paymentKeyIndex:i=0})=>{const o=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));a.debug(`Stake keys requested: ${r}; got ${o.size}`);const n=[];for(let d=0;o.size<r;d++)if(!o.has(d)){const c=await e.deriveAddress({index:i,type:s.AddressType.External},d);n.push(c);a.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);o.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...o.values()]}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js":(e,t,r)=>{"use strict";r.d(t,{DREP_KEY_DERIVATION_PATH:()=>i,STAKE_KEY_DERIVATION_PATH:()=>a,accountKeyDerivationPathToBip32Path:()=>accountKeyDerivationPathToBip32Path,deriveAccountPrivateKey:()=>deriveAccountPrivateKey,harden:()=>harden,paymentKeyPathFromGroupedAddress:()=>paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>stakeKeyPathFromGroupedAddress,toEd25519KeyPair:()=>toEd25519KeyPair});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const harden=e=>2147483648+e;const a={index:0,role:s.KeyRole.Stake};const i={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:t,bip32Ed25519:r,purpose:a=s.KeyPurpose.STANDARD})=>await r.derivePrivateKey(e,[harden(a),harden(s.CardanoKeyConst.COIN_TYPE),harden(t)]);const accountKeyDerivationPathToBip32Path=(e,{index:t,role:r},a=s.CardanoKeyConst.PURPOSE)=>[harden(a),harden(s.CardanoKeyConst.COIN_TYPE),harden(e),r,t];const paymentKeyPathFromGroupedAddress=e=>[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.type,e.index];const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js":(e,t,r)=>{"use strict";r.d(t,{checkStakeCredentialCertificates:()=>checkStakeCredentialCertificates,createTxInKeyPathMap:()=>createTxInKeyPathMap,getDRepCredentialKeyPaths:()=>getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>getVotingProcedureKeyPaths,ownSignatureKeyPaths:()=>ownSignatureKeyPaths});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var h=r("../../node_modules/lodash/isEqual.js");var m=r("../../node_modules/lodash/uniqBy.js");var p=r("../../node_modules/lodash/uniqWith.js");var v,y,_,w;const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const a=t.find(e=>e.rewardAccount===s.stakeAddress);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case i.CertificateType.VoteDelegation:case i.CertificateType.StakeVoteDelegation:case i.CertificateType.StakeRegistrationDelegation:case i.CertificateType.VoteRegistrationDelegation:case i.CertificateType.StakeVoteRegistrationDelegation:case i.CertificateType.Registration:case i.CertificateType.Unregistration:case i.CertificateType.StakeDeregistration:case i.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===o.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===i.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const a=t.find(e=>e.rewardAccount===s);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===i.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===i.CertificateType.MIR)if(e.kind===i.MirCertificateKind.ToStakeCreds){const a=t.find(t=>s.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(a)r.derivationPaths.push(a.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const s of t){const a=checkStakeKeyHashCertificate(s,e);(v=r).requiresForeignSignatures||(v.requiresForeignSignatures=a.requiresForeignSignatures);r.derivationPaths.push(...a.derivationPaths);const i=checkPoolRegistrationCertificate(s,e);(y=r).requiresForeignSignatures||(y.requiresForeignSignatures=i.requiresForeignSignatures);r.derivationPaths.push(...i.derivationPaths);const o=checkPoolRetirementCertificate(s,e);(_=r).requiresForeignSignatures||(_.requiresForeignSignatures=o.requiresForeignSignatures);r.derivationPaths.push(...o.derivationPaths);const n=checkMirCertificate(s,e);(w=r).requiresForeignSignatures||(w.requiresForeignSignatures=n.requiresForeignSignatures);r.derivationPaths.push(...n.derivationPaths)}r.derivationPaths=p(r.derivationPaths,h);return r};const getSignersData=e=>m(e,"rewardAccount").map(e=>{const t=n.RewardAccount.toHash(e.rewardAccount);const r=d.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,t)=>{let r=false;const s=[];const a=getSignersData(e);const i=checkWithdrawals(t,a);r||(r=i.requiresForeignSignatures);s.push(...i.derivationPaths);const o=checkStakeCredentialCertificates(a,t);r||(r=o.requiresForeignSignatures);s.push(...o.derivationPaths);return{derivationPaths:new Set(s),requiresForeignSignatures:r}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const a={derivationPaths:[],requiresForeignSignatures:false};const i=getSignersData(e);for(const{voter:o}of r.votingProcedures||[]){switch(o.__typename){case c.VoterType.dRepKeyHash:if(t&&o.credential.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(t))a.derivationPaths.push(u.DREP_KEY_DERIVATION_PATH);else a.requiresForeignSignatures=true;break;case c.VoterType.stakePoolKeyHash:{const n=i.find(e=>s.Hash28ByteBase16.fromEd25519KeyHashHex(e.stakeKeyHash)===o.credential.hash);if(n)a.derivationPaths.push(n.derivationPath);else a.requiresForeignSignatures=true;break}default:a.requiresForeignSignatures=true;break}}return a};const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const a of e){var i,d;const c=null===(d=null===(i=o.Address.fromBech32(a.address))||void 0===i?void 0:i.asBase())||void 0===d?void 0:d.getPaymentCredential().hash;const l=n.RewardAccount.toHash(a.rewardAccount);if(c&&c.toString()===s)r.push({index:a.index,role:Number(a.type)});if(l&&a.stakeKeyDerivationPath&&l.toString()===s)r.push(a.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&n.RewardAccount.toHash(e.rewardAccount)===s.Hash28ByteBase16.fromEd25519KeyHashHex(t)?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,i;const n=null===(i=null===(r=o.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===i?void 0:i.getPaymentCredential();if((null==n?void 0:n.type)===o.CredentialType.ScriptHash&&n.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(t))return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false};if((null==n?void 0:n.type)===o.CredentialType.ScriptHash){return{derivationPaths:[{index:e.index,role:a.KeyRole.External}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=checkStakeCredential(s,e.keyHash);r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!l.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case l.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case l.NativeScriptKind.RequireAllOf:case l.NativeScriptKind.RequireAnyOf:case l.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case l.NativeScriptKind.RequireTimeBefore:case l.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const a of t.certificates||[])if(a.__typename===i.CertificateType.UnregisterDelegateRepresentative||a.__typename===i.CertificateType.UpdateDelegateRepresentative||a.__typename===i.CertificateType.RegisterDelegateRepresentative)if(a.dRepCredential.type!==o.CredentialType.ScriptHash&&e&&a.dRepCredential.hash===s.Hash28ByteBase16.fromEd25519KeyHashHex(e))r.derivationPaths=[u.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};const createTxInKeyPathMap=async(e,t,r)=>{const s={};const i=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(i.map(async e=>{const i=await r.resolveInput(e);if(!i)return;const o=t.find(({address:e})=>e===i.address);if(!o)return;s[(0,a.TxInId)(e)]={index:o.index,role:Number(o.type)}}));return s};const ownSignatureKeyPaths=(e,t,r,s,a)=>{const i=Object.values(r).filter(f.isNotNil);return p([...i,...getStakeCredentialKeyPaths(t,e).derivationPaths,...getDRepCredentialKeyPaths({dRepKeyHash:s,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(t,e.requiredExtraSignatures),...getVotingProcedureKeyPaths({dRepKeyHash:s,groupedAddresses:t,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(t,a).derivationPaths],h)}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js":(e,t,r)=>{"use strict";r.d(t,{stubSignTransaction:()=>stubSignTransaction});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var o=r("../../node_modules/lodash/uniqWith.js");const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>s.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:n,scripts:d},signTransactionOptions:{extraSigners:c,additionalKeyPaths:l=[]}={}})=>{const u=s.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=o([...(0,i.ownSignatureKeyPaths)(e,t,r,n,d),...l],a.deepEquals);const h=f.length+((null==c?void 0:c.length)||0);const m=new Map;for(let p=0;p<h;++p)m.set(randomPublicKey(),u);return m}},"../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))a(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeScriptDataHash=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new d.Serialization.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(s.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const a=new d.Serialization.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){a.writeEncodedValue(u);a.writeEncodedValue(getCborEncodedArray(r));a.writeEncodedValue(u)}else{if(!t||0===t.length)return;a.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)a.writeEncodedValue(getCborEncodedArray(r));a.writeEncodedValue(s.from(e.languageViewsEncoding(),"hex"))}return c.Hash32ByteBase16.fromHexBlob(l.HexBlob.fromBytes(n.blake2b(n.blake2b.BYTES).update(a.encode()).digest()))};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const a=new d.Serialization.Costmdls;for(const i of t){const o=e.get(i);if(o)a.insert(new d.Serialization.CostModel(i,o))}return hashScriptData(a,null==r?void 0:r.map(e=>d.Serialization.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>d.Serialization.PlutusData.fromCore(e)))};t.computeScriptDataHash=computeScriptDataHash},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=t.includeChangeAndInputs=t.createPreInputSelectionTxBody=void 0;const o=i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js");const c=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js");const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:s,collaterals:a,collateralReturn:i,mint:o,scriptIntegrityHash:d,referenceInputs:c,requiredExtraSignatures:l,outputs:u})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?n.Cardano.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:o,outputs:u||[],referenceInputs:c?[...c]:void 0,requiredExtraSignatures:l,scriptIntegrityHash:d,validityInterval:s,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==a?void 0:a.size)&&{collaterals:[...a]},collateralReturn:i}}};t.createPreInputSelectionTxBody=createPreInputSelectionTxBody;const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:s})=>{const a={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&s){const i=(0,c.getDefaultCostModelsForVersions)([...r]);a.scriptIntegrityHash=(0,d.computeScriptDataHash)(i,[...r],s.redeemers,s.datums)}const l=n.Serialization.TransactionBody.fromCore(a);return{body:a,hash:n.Cardano.TransactionId.fromHexBlob(n.util.bytesToHex(o.blake2b(o.blake2b.BYTES).update(n.util.hexToBytes(l.toCbor())).digest()))}};t.includeChangeAndInputs=includeChangeAndInputs;const createTransactionInternals=e=>{const{txBody:r}=(0,t.createPreInputSelectionTxBody)({...e});return(0,t.includeChangeAndInputs)({bodyPreInputSelection:r,inputSelection:e.inputSelection})};t.createTransactionInternals=createTransactionInternals},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureValidityInterval=t.calcTimeOffsetSlotNumber=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=(0,s.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>s.Cardano.Slot(e+t*r);t.calcTimeOffsetSlotNumber=calcTimeOffsetSlotNumber;const ensureValidityInterval=(e,{slotLength:r},s)=>({invalidHereafter:(0,t.calcTimeOffsetSlotNumber)(e,a,r),...s});t.ensureValidityInterval=ensureValidityInterval},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.minFee=t.minAdaRequired=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=160;const serializeBigInt=e=>{const t=new a.Serialization.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>a.Serialization.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>s.from(a.Serialization.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const i=25600;const o=1.2;let n=0;var d;const c=[...e.body.inputs,...null!==(d=e.body.referenceInputs)&&void 0!==d?d:[]];for(const l of c){const u=t.find(e=>e[0].txId===l.txId&&e[0].index===l.index);if(u&&u[1].scriptReference)n+=a.Serialization.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(n>0){f+=Math.ceil(Math.min(i,n)*s);n=Math.max(n-i,0);s*=o}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const a=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(a);const i=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(i.steps*t.steps+i.memory*t.memory))+a};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let a=false;while(!a){const o=s-r;const n=BigInt(serializeTxOutputSize(e)+i+o)*t;const d=serializeBigInt(n.toString()).length;a=s===d;s=d}const c=s-r;return BigInt(serializeTxOutputSize(e)+i+c)*t};t.minAdaRequired=minAdaRequired;const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);t.minFee=minFee},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=void 0;var i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");Object.defineProperty(t,"createTransactionInternals",{enumerable:true,get:function(){return i.createTransactionInternals}});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.defaultSelectionConstraints=t.computeSelectionLimit=t.tokenBundleSizeExceedsLimit=t.computeMinimumCoinQuantity=t.computeMinimumCost=t.MAX_U64=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js");t.MAX_U64=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const s=[];const i={[a.Cardano.RedeemerPurpose.spend]:t.spend,[a.Cardano.RedeemerPurpose.mint]:t.mint,[a.Cardano.RedeemerPurpose.certificate]:t.certificate,[a.Cardano.RedeemerPurpose.withdrawal]:t.withdrawal,[a.Cardano.RedeemerPurpose.propose]:t.propose,[a.Cardano.RedeemerPurpose.vote]:t.vote};for(const o of e){const n=i[o.purpose];if(!n)throw new Error(`No redeemers found for ${o.purpose} purpose`);let d;if(o.purpose===a.Cardano.RedeemerPurpose.spend){const c=r[o.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===o.index);if(!d)throw new Error(`Known Redeemer not found for index ${o.index}`)}s.push({...d,executionUnits:o.budget})}return s};const reorgRedeemers=(e,t,r)=>{let s=[];if(t.redeemers){s=t.redeemers.filter(e=>e.purpose!==a.Cardano.RedeemerPurpose.spend);if(e.spend){for(const[i,o]of e.spend){const n=r.findIndex(e=>i===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${i}`);o.index=n;s.push({...o})}}}return s};const computeMinimumCost=(e,t,r,s)=>async a=>{const n=await t(a);const d=[...a.inputs];const c=d.map(e=>e[0]).sort(i.sortTxIn);if(n.witness&&n.witness.redeemers&&n.witness.redeemers.length>0){n.witness.redeemers=reorgRedeemers(s,n.witness,c);n.witness.redeemers=updateRedeemers(await r.evaluate(n,d),s,c)}return{fee:(0,o.minFee)(n,d,e),redeemers:n.witness.redeemers}};t.computeMinimumCost=computeMinimumCost;const computeMinimumCoinQuantity=e=>t=>(0,o.minAdaRequired)(t,BigInt(e));t.computeMinimumCoinQuantity=computeMinimumCoinQuantity;const tokenBundleSizeExceedsLimit=e=>r=>{if(!r){return false}const s=new a.Serialization.Value(t.MAX_U64);s.setMultiasset(r);return s.toCbor().length/2>e};t.tokenBundleSizeExceedsLimit=tokenBundleSizeExceedsLimit;const getTxSize=e=>s.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const i=getTxSize(a.Serialization.Transaction.fromCore(s));if(i<=e){return r.inputs.size}return r.inputs.size-1};t.computeSelectionLimit=computeSelectionLimit;const defaultSelectionConstraints=({protocolParameters:e,buildTx:r,redeemersByType:s,txEvaluator:i})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new a.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:(0,t.computeMinimumCoinQuantity)(e.coinsPerUtxoByte),computeMinimumCost:(0,t.computeMinimumCost)(e,r,i,s),computeSelectionLimit:(0,t.computeSelectionLimit)(e.maxTxSize,r),tokenBundleSizeExceedsLimit:(0,t.tokenBundleSizeExceedsLimit)(e.maxValueSize)}};t.defaultSelectionConstraints=defaultSelectionConstraints},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createOutputValidator=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const createOutputValidator=({protocolParameters:e})=>{const validateValue=async(t,r)=>{const{coinsPerUtxoByte:o,maxValueSize:n}=r||await e();const d=a.Cardano.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const c={address:d,value:t};const l=!!t.assets&&[...t.assets.values()].some(e=>e<=0);if(l){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:l,tokenBundleSizeExceedsLimit:false}}const u=BigInt((0,i.computeMinimumCoinQuantity)(o)(c));return{coinMissing:s.BigIntMath.max([u-t.coins,0n]),minimumCoin:u,negativeAssetQty:l,tokenBundleSizeExceedsLimit:(0,i.tokenBundleSizeExceedsLimit)(n)(t.assets)}};const validateValues=async t=>{const r=await e();const s=new Map;for(const a of t)s.set(a,await validateValue(a,r));return s};const validateOutput=async(e,t)=>validateValue(e.value,t);return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const a of t)s.set(a,await validateOutput(a,r));return s},validateValue,validateValues}};t.createOutputValidator=createOutputValidator},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.GreedyTxEvaluator=void 0;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await s(this,a,"f").call(this);const{witness:i}=e;if(!i||!i.redeemers)return[];const o=[];for(const n of i.redeemers)o.push({budget:r,index:n.index,purpose:n.purpose});return o}constructor(e){a.set(this,void 0);r(this,a,e,"f")}}t.GreedyTxEvaluator=GreedyTxEvaluator;a=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TxOutputBuilder=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new l.OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new l.OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new l.OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(a(this,i,"f"))){throw new l.OutputValidationMissingRequiredError(a(this,i,"f"))}a(this,n,"f").debug("toTxOut result:",a(this,i,"f"));return{...a(this,i,"f")}}async inspect(){return a(this,i,"f")}value(e){s(this,i,{...a(this,i,"f"),value:{...e}},"f");return this}coin(e){var t;s(this,i,{...a(this,i,"f"),value:{...null===(t=a(this,i,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;s(this,i,{...a(this,i,"f"),value:{...null===(t=a(this,i,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const o=new Map(null===(r=a(this,i,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?o.delete(e):o.set(e,t);return this.assets(o)}address(e){s(this,i,{...a(this,i,"f"),address:e},"f");return this}datum(e){c.Serialization.isDatumHash(e)?s(this,i,{...a(this,i,"f"),datumHash:e},"f"):s(this,i,{...a(this,i,"f"),datum:e},"f");return this}scriptReference(e){if(!c.Cardano.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");s(this,i,{...a(this,i,"f"),scriptReference:e},"f");return this}handle(e){if(!a(this,d,"f")){throw new l.InvalidConfigurationError(l.TxOutputFailure.MissingHandleProviderError)}s(this,i,{...a(this,i,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(a(this,i,"f").handle&&a(this,d,"f")){const t=await a(this,d,"f").resolveHandles({handles:[a(this,i,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new l.HandleNotFoundError(a(this,i,"f"))}}const r=toOutputValidationError(e,await a(this,o,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:a}){i.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,null);s(this,i,{...t},"f");s(this,o,e,"f");s(this,n,r,"f");if(a)s(this,d,a,"f")}}t.TxOutputBuilder=TxOutputBuilder;i=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o,n,d,c,l,u,f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O;Object.defineProperty(t,"__esModule",{value:true});t.GenericTxBuilder=void 0;const G=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const H=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const K=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const V=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js");const W=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js");const z=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const U=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js");const $=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js");const L=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js");const q=r("../../node_modules/rxjs/dist/esm5/index.js");const Y=r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js");const Q=i(r("../../node_modules/lodash/omit.js"));const J=i(r("../../node_modules/lodash/uniq.js"));const X="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:i},inputSelection:n}=await a(this,o,"m",l).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:n,ownAddresses:t,witness:i}}async sign(){return a(this,d,"f").sign(await a(this,o,"m",l).call(this))}constructor({builder:e,signer:t}){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,c,e,"f");s(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,o=new WeakSet,l=async function _LazyTxSigner_build(){return s(this,n,a(this,n,"f")||await a(this,c,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;a(this,b,"f").set(t,e);return this}if(!a(this,T,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,T,"f").push(e);return this}addInput(e,t){if(t){a(this,u,"m",O).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;a(this,g,"f").set(r,e);return this}if(!a(this,x,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,x,"f").push(e);return this}addDatum(e){const t=N.Serialization.PlutusData.fromCore(e).hash();a(this,C,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)s(this,_,[...a(this,_,"f"),e.handleResolution],"f");const t=(0,Q.default)(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;s(this,_,a(this,_,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,z.deepEquals)(t,e))};return this}buildOutput(e){return new V.TxOutputBuilder({handleProvider:a(this,y,"f"),logger:(0,z.contextLogger)(a(this,v,"f"),"outputBuilder"),outputValidator:a(this,h,"f"),txOut:e})}delegateFirstStakeCredential(e){s(this,w,e,"f");return this}delegatePortfolio(e){if(!a(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;s(this,m,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:N.Cardano.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(N.Cardano.DelegationMetadataLabel,N.metadatum.jsonToMetadatum(N.Cardano.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[N.Cardano.DelegationMetadataLabel,N.metadatum.jsonToMetadatum(N.Cardano.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){s(this,A,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{a(this,v,"f").debug("Building");try{const e=a(this,f,"f").bip32Account?await a(this,u,"m",M).call(this):await a(this,u,"m",F).call(this);await a(this,u,"m",I).call(this);(0,W.validateValidityInterval)(await a(this,f,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await a(this,f,"f").txBuilderProviders.addresses.get();const r=(await a(this,f,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===N.Cardano.StakeCredentialStatus.Registered||e.credentialStatus===N.Cardano.StakeCredentialStatus.Registering);const s=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const i=this.partialExtraSigners&&[...this.partialExtraSigners];const o=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:i};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=N.Cardano.computeAuxiliaryDataHash(this.partialAuxiliaryData);const n={...a(this,f,"f")};const d=void 0!==a(this,m,"f")||void 0!==a(this,w,"f");if(a(this,f,"f").bip32Account&&d&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const c=await a(this,f,"f").bip32Account.deriveAddress({index:0,type:G.AddressType.External},0);e.set(c.rewardAccount,1)}n.inputSelector=(0,W.createGreedyInputSelector)(e,t)}await Promise.all(a(this,x,"f").map(e=>a(this,u,"m",D).call(this,e,a(this,g,"f"))));await Promise.all(a(this,T,"f").map(e=>a(this,u,"m",D).call(this,e,a(this,b,"f"))));await Promise.all(a(this,E,"f").map(e=>a(this,u,"m",R).call(this,e)));const l=await (0,W.buildWitness)(a(this,P,"f"),a(this,S,"f"),a(this,C,"f"),a(this,k,"f"),a(this,j,"f"),a(this,f,"f").txBuilderProviders);const h=[...a(this,P,"f").values()].some(e=>N.Cardano.isPlutusScript(e));const{collaterals:y,collateralReturn:B}=h?await (0,W.computeCollateral)(a(this,f,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const O=new Set;for(const H of a(this,P,"f").values())if(N.Cardano.isPlutusScript(H))O.add(H.version);const{body:K,hash:V,inputSelection:z,redeemers:U}=await (0,L.initializeTx)({auxiliaryData:s,certificates:this.partialTxBody.certificates,collateralReturn:B,collaterals:y,customizeCb:a(this,A,"f"),handleResolutions:a(this,_,"f"),inputs:new Set(a(this,g,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:a(this,j,"f"),referenceInputs:new Set([...a(this,b,"f").values()].map(e=>e[0])),scriptIntegrityHash:h?X:void 0,scriptVersions:O,signingOptions:o,txEvaluator:a(this,p,"f"),witness:l},n);l.redeemers=U;return{ctx:{auxiliaryData:s,ownAddresses:t,signingContext:{handleResolutions:a(this,_,"f"),knownAddresses:t,txInKeyPathMap:await G.util.createTxInKeyPathMap(K,t,a(this,f,"f").inputResolver)},signingOptions:{...o,extraSigners:i},witness:l},inputSelection:z,tx:{body:K,hash:V}}}catch($){a(this,v,"f").debug("Transaction build error",$);if(Array.isArray($))throw $[0];throw $}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new N.Serialization.Transaction(N.Serialization.TransactionBody.fromCore(e.body),N.Serialization.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?N.Serialization.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const i={...t.signingOptions,stubSign:false};const o=t.signingContext;return a(this,f,"f").witnesser.witness(s,o,i)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){u.add(this);this.partialTxBody={};f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,new Map);b.set(this,new Map);P.set(this,new Map);S.set(this,new Set);C.set(this,new Map);k.set(this,new Set);j.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});x.set(this,new Array);T.set(this,new Array);E.set(this,new Array);A.set(this,void 0);s(this,h,e.outputValidator||(0,U.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");s(this,f,e,"f");s(this,v,e.logger,"f");s(this,y,e.handleProvider,"f");s(this,_,[],"f");var t;s(this,p,null!==(t=e.txEvaluator)&&void 0!==t?t:new K.GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}t.GenericTxBuilder=GenericTxBuilder;f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,u=new WeakSet,I=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},B=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(a(this,m,"f")){const r=await a(this,f,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await G.util.ensureStakeKeys({bip32Account:e,count:a(this,m,"f").length,knownAddresses:r,logger:(0,z.contextLogger)(a(this,v,"f"),"getOrCreateRewardAccounts")});await a(this,f,"f").txBuilderProviders.addresses.add(...s);t=(0,J.default)([...r,...s]).map(({rewardAccount:e})=>e)}const i=(0,Y.poll)({logger:(0,z.contextLogger)(a(this,v,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:a(this,f,"f").txBuilderProviders.rewardAccounts});try{return await (0,q.lastValueFrom)(i)}catch{throw new H.OutOfSyncRewardAccounts(t)}},F=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===a(this,w,"f")){return Promise.resolve(t)}const r=await a(this,f,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const i=null===(e=N.Cardano.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!i){throw new Error(`Invalid credential ${i}.`)}if(null===a(this,w,"f"))if(s.credentialStatus===N.Cardano.StakeCredentialStatus.Unregistered)a(this,v,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeDeregistration,stakeCredential:i});else{if(s.credentialStatus!==N.Cardano.StakeCredentialStatus.Unregistered)a(this,v,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeRegistration,stakeCredential:i});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeDelegation,poolId:a(this,w,"f"),stakeCredential:i})}return t},M=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!a(this,m,"f")){return e}if(!a(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await a(this,u,"m",B).call(this,a(this,f,"f").bip32Account);const r=a(this,m,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();a(this,v,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===N.Cardano.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=a(this,m,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,a(this,m,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const i=t.filter(e=>{var t,r;return e.credentialStatus===N.Cardano.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=a(this,m,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(W.sortRewardAccountsDelegatedFirst).reverse();if(r.length>i.length){throw new H.InsufficientRewardAccounts(r.map(({id:e})=>e),i.map(({address:e})=>e))}const o=[];while(r.length>0&&i.length>0){const{id:n,weight:d}=r.pop();const c=i.pop();a(this,v,"f").debug(`Building delegation certificate for ${n} ${c}`);if(c.credentialStatus!==N.Cardano.StakeCredentialStatus.Registered)o.push(N.Cardano.createStakeRegistrationCert(c.address));o.push(N.Cardano.createDelegationCert(c.address,n));e.set(c.address,d)}(0,$.ensureNoDeRegistrationsWithRewardsLocked)(i);a(this,v,"f").debug(`De-registering ${i.length} stake keys`);for(const l of i)if(l.credentialStatus===N.Cardano.StakeCredentialStatus.Registered)o.push(N.Cardano.createStakeDeregistrationCert(l.address,N.inConwayEra?l.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:o};return e},R=async function _GenericTxBuilder_resolveDatum(e){if(a(this,C,"f").has(e))return;if(!a(this,f,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await a(this,f,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);a(this,C,"f").set(e,t)},D=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await a(this,f,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const i=N.Serialization.Script.fromCore(s.scriptReference).hash();a(this,P,"f").set(i,s.scriptReference);a(this,S,"f").add(i)}const o=s.datum;if(o)if(N.Serialization.isDatumHash(o)){if(!a(this,C,"f").has(o))a(this,E,"f").push(o)}else{const n=N.Serialization.PlutusData.fromCore(o).hash();a(this,C,"f").set(n,o);a(this,k,"f").add(n)}t.set(r,[{...e,address:s.address},s])},O=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;a(this,g,"f").set(r,e);if(e[1].datum){const s=N.Serialization.PlutusData.fromCore(e[1].datum).hash();a(this,C,"f").set(s,e[1].datum);a(this,k,"f").add(s)}if(e[1].datumHash)a(this,E,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!a(this,x,"f").some(t=>t.txId===e.txId&&t.index===e.index))a(this,x,"f").push(e)}if(t.script){const i=N.Serialization.Script.fromCore(t.script).hash();a(this,P,"f").set(i,t.script)}if(t.redeemer){var o;null===(o=a(this,j,"f").spend)||void 0===o?void 0:o.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:N.Cardano.RedeemerPurpose.spend})}if(t.datum)if(N.Serialization.isDatumHash(t.datum)){if(!a(this,C,"f").has(t.datum))a(this,E,"f").push(t.datum)}else{const n=N.Serialization.PlutusData.fromCore(t.datum).hash();a(this,C,"f").set(n,t.datum)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDefaultCostModelsForVersions=t.buildCostModels=t.plutusV3CostModel=t.plutusV2CostModel=t.plutusV1CostModel=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");t.plutusV1CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:s.Cardano.PlutusLanguageVersion.V1};t.plutusV2CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:s.Cardano.PlutusLanguageVersion.V2};t.plutusV3CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:s.Cardano.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new s.Serialization.Costmdls;for(const r of e){const a=new s.Serialization.CostModel(r.version,r.prices);t.insert(a)}return t.toCore()};t.buildCostModels=buildCostModels;const getDefaultCostModelsForVersions=e=>{const r=[...new Set(e)];const a=r.map(e=>{switch(e){case s.Cardano.PlutusLanguageVersion.V1:return t.plutusV1CostModel;case s.Cardano.PlutusLanguageVersion.V2:return t.plutusV2CostModel;case s.Cardano.PlutusLanguageVersion.V3:return t.plutusV3CostModel;default:throw new Error("Invalid plutus language")}});return(0,t.buildCostModels)(a)};t.getDefaultCostModelsForVersions=getDefaultCostModelsForVersions},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureNoDeRegistrationsWithRewardsLocked=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const a=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!(0,a.hasCorrectVoteDelegation)(e));if(t.length>0){throw new s.DeRegistrationsWithRewardsLocked(t)}};t.ensureNoDeRegistrationsWithRewardsLocked=ensureNoDeRegistrationsWithRewardsLocked},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.hasCorrectVoteDelegation=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!s.Cardano.isDrepInfo(t)||t.active)};t.hasCorrectVoteDelegation=hasCorrectVoteDelegation},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js"),t);a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeTx=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");const c=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const dRepPublicKeyHash=async e=>e&&(await (await e.derivePublicKey(s.util.DREP_KEY_DERIVATION_PATH)).hash()).hex();const u=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=u)||(0,l.hasCorrectVoteDelegation)(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:l,bip32Account:u,witnesser:f,logger:h})=>{var m;const[p,v,y,_,w,g]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var b;const P=null!==(b=e.txEvaluator)&&void 0!==b?b:new i.GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:(0,n.roundRobinRandomImprove)({changeAddressResolver:new n.StaticChangeAddressResolver(async()=>g)});const{txBody:S,auxiliaryData:C}=(0,d.createPreInputSelectionTxBody)({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:(0,c.ensureValidityInterval)(p.slot,v,null===(m=e.options)||void 0===m?void 0:m.validityInterval),withdrawals:getWithdrawals(_,y.protocolVersion)});const k=e.customizeCb?e.customizeCb({txBody:S}):S;var j;const x=(0,o.defaultSelectionConstraints)({buildTx:async t=>{var r;h.debug("Building TX for selection constraints",t);if(null===(r=k.withdrawals)||void 0===r?void 0:r.length)h.debug("Adding rewards withdrawal in the transaction",k.withdrawals);const i=(0,d.includeChangeAndInputs)({bodyPreInputSelection:k,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const o=await dRepPublicKeyHash(u);const n=new a.Serialization.Transaction(a.Serialization.TransactionBody.fromCore(i.body),a.Serialization.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),C?a.Serialization.AuxiliaryData.fromCore(C):void 0);var c;const m={...o&&{dRepKeyHashHex:o},handleResolutions:null!==(c=e.handleResolutions)&&void 0!==c?c:[],knownAddresses:g,txInKeyPathMap:await s.util.createTxInKeyPathMap(i.body,g,l)};const p={...e.signingOptions,stubSign:true};const{tx:v}=await f.witness(n,m,p);return v},protocolParameters:y,redeemersByType:null!==(j=e.redeemersByType)&&void 0!==j?j:{},txEvaluator:P});const T=a.Cardano.util.computeImplicitCoin(y,{certificates:k.certificates,proposalProcedures:k.proposalProcedures,withdrawals:k.withdrawals});const{selection:E,redeemers:A}=await r.select({constraints:x,implicitValue:{coin:T,mint:k.mint},outputs:new Set(k.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(w)});const I={...e.witness,redeemers:A};const{body:B,hash:F}=(0,d.includeChangeAndInputs)({bodyPreInputSelection:k,inputSelection:E,scriptVersions:e.scriptVersions,witness:I});return{body:B,hash:F,inputSelection:E,redeemers:A}};t.initializeTx=initializeTx},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidHereafterError=t.OutputValidationNegativeAssetQtyError=t.OutputValidationTokenBundleSizeError=t.OutputValidationMinimumCoinError=t.OutputValidationMissingRequiredError=t.OutOfSyncRewardAccounts=t.DeRegistrationsWithRewardsLocked=t.InsufficientRewardAccounts=t.HandleNotFoundError=t.InvalidConfigurationError=t.TxValidityIntervalFailure=t.TxOutputFailure=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(i=t.TxOutputFailure||(t.TxOutputFailure={}));var o;(function(e){e["Expired"]="Transaction expired"})(o=t.TxValidityIntervalFailure||(t.TxValidityIntervalFailure={}));class InvalidConfigurationError extends a.CustomError{constructor(e){super(e);this.message=e}}t.InvalidConfigurationError=InvalidConfigurationError;class HandleNotFoundError extends a.CustomError{constructor(e){super(i.HandleNotFound);this.txOut=e}}t.HandleNotFoundError=HandleNotFoundError;class InsufficientRewardAccounts extends a.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}t.InsufficientRewardAccounts=InsufficientRewardAccounts;class DeRegistrationsWithRewardsLocked extends a.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=s.Cardano.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}t.DeRegistrationsWithRewardsLocked=DeRegistrationsWithRewardsLocked;class OutOfSyncRewardAccounts extends a.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}t.OutOfSyncRewardAccounts=OutOfSyncRewardAccounts;class OutputValidationMissingRequiredError extends a.CustomError{constructor(e){super(i.MissingRequiredFields);this.txOut=e}}t.OutputValidationMissingRequiredError=OutputValidationMissingRequiredError;class OutputValidationMinimumCoinError extends a.CustomError{constructor(e,t){super(i.MinimumCoin);this.txOut=e;this.outputValidation=t}}t.OutputValidationMinimumCoinError=OutputValidationMinimumCoinError;class OutputValidationTokenBundleSizeError extends a.CustomError{constructor(e,t){super(i.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}t.OutputValidationTokenBundleSizeError=OutputValidationTokenBundleSizeError;class OutputValidationNegativeAssetQtyError extends a.CustomError{constructor(e,t){super(i.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}t.OutputValidationNegativeAssetQtyError=OutputValidationNegativeAssetQtyError;class InvalidHereafterError extends a.CustomError{constructor(){super(o.Expired)}}t.InvalidHereafterError=InvalidHereafterError},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeCollateral=t.buildWitness=t.validateValidityInterval=t.buildRedeemers=t.sortRewardAccountsDelegatedFirst=t.createGreedyInputSelector=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const n=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const d=s(r("../../node_modules/lodash/minBy.js"));const c=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=(0,d.default)(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new i.GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};t.createGreedyInputSelector=createGreedyInputSelector;const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===a.Cardano.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};t.sortRewardAccountsDelegatedFirst=sortRewardAccountsDelegatedFirst;const buildRedeemers=(e,t)=>{const r=[];var s,a,i,o,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(a=e.vote)&&void 0!==a?a:[],...null!==(i=e.propose)&&void 0!==i?i:[],...null!==(o=e.certificate)&&void 0!==o?o:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};t.buildRedeemers=buildRedeemers;const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new o.InvalidHereafterError}};t.validateValidityInterval=validateValidityInterval;const buildWitness=async(e,r,s,a,i,o)=>{const n={signatures:new Map};if(s){n.datums=[];for(const[d,c]of s)if(!a.has(d))n.datums.push(c)}if(e){n.scripts=[];for(const[l,u]of e)if(!r.has(l))n.scripts.push(u)}const{maxExecutionUnitsPerTransaction:f}=await o.protocolParameters();if(i)n.redeemers=(0,t.buildRedeemers)(i,f);return n};t.buildWitness=buildWitness;const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:i}=await e.protocolParameters();let o=0n;for(const d of t){r.push(d);o+=d[1].value.coins;if(o>c){const l=r[0][1].address;const u=r.map(e=>e[1].value);const f=(0,a.coalesceValueQuantities)(u);const h={...f};h.coins-=c;const m={address:l,value:h};if(isValidValue(m,(0,n.computeMinimumCoinQuantity)(s),(0,n.tokenBundleSizeExceedsLimit)(i))){return{collateralReturn:m,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};t.computeCollateral=computeCollateral},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toTxMetadata=t.validateMessage=t.MessageValidationError=t.MessageValidationFailure=t.METADATUM_LABEL=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.METADATUM_LABEL=674n;const i=64;var o;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(o=t.MessageValidationFailure||(t.MessageValidationFailure={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,i+1))}`);super(`The provided message array contains validation errors | ${t}`)}}t.MessageValidationError=MessageValidationError;const validateMessage=e=>{if("string"!=typeof e)return{failure:o.wrongType,valid:false};if(a.StringUtils.byteSize(e)>i)return{failure:o.oversize,valid:false};return{valid:true}};t.validateMessage=validateMessage;const toTxMetadata=e=>{const r="string"==typeof e?a.StringUtils.chunkByBytes(e,i):e.messages;const s=new Map;for(const o of r){const n=(0,t.validateMessage)(o);if(!n.valid)s.set(o,n)}if(s.size>0)throw new MessageValidationError(s);return new Map([[t.METADATUM_LABEL,new Map([["msg",r]])]])};t.toTxMetadata=toTxMetadata},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CIP20=void 0;t.CIP20=i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js"))},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";r.d(t,{computeMinimumCoinQuantity:()=>computeMinimumCoinQuantity,defaultSelectionConstraints:()=>defaultSelectionConstraints,tokenBundleSizeExceedsLimit:()=>tokenBundleSizeExceedsLimit});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/GreedySelection/util.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];const f=160;const serializeBigInt=e=>{const t=new d.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>c.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>u.from(i.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const a=25600;const i=1.2;let o=0;var n;const d=[...e.body.inputs,...null!==(n=e.body.referenceInputs)&&void 0!==n?n:[]];for(const c of d){const u=t.find(e=>e[0].txId===c.txId&&e[0].index===c.index);if(u&&u[1].scriptReference)o+=l.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(o>0){f+=Math.ceil(Math.min(a,o)*s);o=Math.max(o-a,0);s*=i}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const a=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(a);const i=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(i.steps*t.steps+i.memory*t.memory))+a};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let a=false;while(!a){const i=s-r;const o=BigInt(serializeTxOutputSize(e)+f+i)*t;const n=serializeBigInt(o.toString()).length;a=s===n;s=n}const d=s-r;return BigInt(serializeTxOutputSize(e)+f+d)*t};const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);var h=r("../../node_modules/buffer/index.js")["Buffer"];const m=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const a=[];const i={[s.RedeemerPurpose.spend]:t.spend,[s.RedeemerPurpose.mint]:t.mint,[s.RedeemerPurpose.certificate]:t.certificate,[s.RedeemerPurpose.withdrawal]:t.withdrawal,[s.RedeemerPurpose.propose]:t.propose,[s.RedeemerPurpose.vote]:t.vote};for(const o of e){const n=i[o.purpose];if(!n)throw new Error(`No redeemers found for ${o.purpose} purpose`);let d;if(o.purpose===s.RedeemerPurpose.spend){const c=r[o.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===o.index);if(!d)throw new Error(`Known Redeemer not found for index ${o.index}`)}a.push({...d,executionUnits:o.budget})}return a};const reorgRedeemers=(e,t,r)=>{let a=[];if(t.redeemers){a=t.redeemers.filter(e=>e.purpose!==s.RedeemerPurpose.spend);if(e.spend){for(const[i,o]of e.spend){const n=r.findIndex(e=>i===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${i}`);o.index=n;a.push({...o})}}}return a};const computeMinimumCost=(e,t,r,s)=>async a=>{const i=await t(a);const o=[...a.inputs];const d=o.map(e=>e[0]).sort(n.sortTxIn);if(i.witness&&i.witness.redeemers&&i.witness.redeemers.length>0){i.witness.redeemers=reorgRedeemers(s,i.witness,d);i.witness.redeemers=updateRedeemers(await r.evaluate(i,o),s,d)}return{fee:minFee(i,o,e),redeemers:i.witness.redeemers}};const computeMinimumCoinQuantity=e=>t=>minAdaRequired(t,BigInt(e));const tokenBundleSizeExceedsLimit=e=>t=>{if(!t){return false}const r=new a.Value(m);r.setMultiasset(t);return r.toCbor().length/2>e};const getTxSize=e=>h.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const a=getTxSize(i.Transaction.fromCore(s));if(a<=e){return r.inputs.size}return r.inputs.size-1};const defaultSelectionConstraints=({protocolParameters:e,buildTx:t,redeemersByType:r,txEvaluator:s})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new o.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:computeMinimumCoinQuantity(e.coinsPerUtxoByte),computeMinimumCost:computeMinimumCost(e,t,s,r),computeSelectionLimit:computeSelectionLimit(e.maxTxSize,t),tokenBundleSizeExceedsLimit:tokenBundleSizeExceedsLimit(e.maxValueSize)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js":(e,t,r)=>{"use strict";r.d(t,{createOutputValidator:()=>createOutputValidator});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var i=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");const createOutputValidator=({protocolParameters:e})=>{const validateValue=async(t,r)=>{const{coinsPerUtxoByte:o,maxValueSize:n}=r||await e();const d=a.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const c={address:d,value:t};const l=!!t.assets&&[...t.assets.values()].some(e=>e<=0);if(l){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:l,tokenBundleSizeExceedsLimit:false}}const u=BigInt((0,i.computeMinimumCoinQuantity)(o)(c));return{coinMissing:s.BigIntMath.max([u-t.coins,0n]),minimumCoin:u,negativeAssetQty:l,tokenBundleSizeExceedsLimit:(0,i.tokenBundleSizeExceedsLimit)(n)(t.assets)}};const validateValues=async t=>{const r=await e();const s=new Map;for(const a of t)s.set(a,await validateValue(a,r));return s};const validateOutput=async(e,t)=>validateValue(e.value,t);return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const a of t)s.set(a,await validateOutput(a,r));return s},validateValue,validateValues}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-metadata/cip20.js":(e,t,r)=>{"use strict";r.d(t,{toTxMetadata:()=>toTxMetadata});var s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const a={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,t)=>{let r=0;let s=0;const i=[];for(let o=0;o<e.length;o++){const n=o===e.length-1;const d=r+a.byteSize(e[o]);const c=n?t+1:d+a.byteSize(e[o+1]);const l=d===t||c>t||n;if(l){const u=e.slice(s,o+1);i.push(u);s=o+1;r=0}else{r=d}}return i}};const i=674n;const o=64;var n;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(n||(n={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,o+1))}`);super(`The provided message array contains validation errors | ${t}`)}}const validateMessage=e=>{if("string"!=typeof e)return{failure:n.wrongType,valid:false};if(a.byteSize(e)>o)return{failure:n.oversize,valid:false};return{valid:true}};const toTxMetadata=e=>{const t="string"==typeof e?a.chunkByBytes(e,o):e.messages;const r=new Map;for(const s of t){const n=validateMessage(s);if(!n.valid)r.set(s,n)}if(r.size>0)throw new MessageValidationError(r);return new Map([[i,new Map([["msg",t]])]])}},"../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/assetId.js":(e,t,r)=>{"use strict";r.d(t,{PXL:()=>i,TSLA:()=>a});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const a=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8254534c41");const i=s.AssetId("1ec85dcee27f2d90ec1f9a1e4ce74a667dc9be8b184463223f9c960150584c");const o=s.AssetId("a5425bd7bc4182325188af2340415827a73f845846c165d9e14c5aed556e6974");const n=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8241");const d=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8242");const c=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8243");const l=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8244");const u=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8245");const f=[a,i,o]},"../../node_modules/@cardano-sdk/util-dev/dist/esm/createStubStakePoolProvider.js":(e,t,r)=>{"use strict";r.d(t,{createStubStakePoolProvider:()=>createStubStakePoolProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var i=r("../../node_modules/delay/index.js");const o=[{hexId:s.PoolIdHex("cf12a9dcaacdc09778616d60502011a88ed4542c482f2ddd08d8ac5a"),id:s.PoolId("pool1euf2nh92ehqfw7rpd4s9qgq34z8dg4pvfqhjmhggmzk95gcd402"),metadata:{description:"Keiths Pi test pool",homepage:"",name:"Keiths PiTest",ticker:"KPIT"}},{hexId:s.PoolIdHex("4a2e3b7f4a78ff1452b91329a7673c77c98ca96dece7b55c37869502"),id:s.PoolId("pool1fghrkl620rl3g54ezv56weeuwlyce2tdannm2hphs62syf3vyyh"),metadata:{description:"VEGAS TestNet(2) ADA Pool",homepage:"https://www.ada.vegas",name:"VEGASPool",ticker:"VEGA2"}}];const createStubStakePoolProvider=(e=o,t)=>{return{healthCheck:async()=>{if(t)await i(t);return{ok:true}},queryStakePools:async r=>{var s,a;if(t)await i(t);const o=null==r?void 0:null===(s=r.filters)||void 0===s?void 0:s.identifier;const n=null==r?void 0:null===(a=r.filters)||void 0===a?void 0:a.text;const d=o?o.values:[];const c=e.filter(({id:e,metadata:t})=>{return n&&(null==t?void 0:t.name.includes(n))||n&&(null==t?void 0:t.ticker.includes(n))||d.some(r=>{return r.id&&e.includes(r.id)||r.name&&(null==t?void 0:t.name.includes(r.name))||r.ticker&&(null==t?void 0:t.ticker.includes(r.ticker))})});return{pageResults:c,totalResultCount:c.length}},stakePoolStats:async()=>{if(t)await i(t);return{qty:{activating:0,active:e.filter(e=>e.status===a.StakePoolStatus.Active).length,retired:e.filter(e=>e.status===a.StakePoolStatus.Retired).length,retiring:e.filter(e=>e.status===a.StakePoolStatus.Retiring).length}}}}}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/eraSummaries.js":(e,t,r)=>{"use strict";r.d(t,{testnetEraSummaries:()=>a});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");const a=[{parameters:{epochLength:21600,slotLength:(0,s.Milliseconds)(2e4)},start:{slot:0,time:new Date(1563999616e3)}},{parameters:{epochLength:432e3,slotLength:(0,s.Milliseconds)(1e3)},start:{slot:1598400,time:new Date(1595967616e3)}}]},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TrackerSubject=void 0;const c=r("../../node_modules/rxjs/dist/esm5/index.js");class TrackerSubject extends c.ReplaySubject{get value(){return a(this,n,"f")}next(e){s(this,n,e,"f");super.next(e)}complete(){a(this,i,"m",d).call(this);super.complete()}error(e){a(this,i,"m",d).call(this);super.error(e)}unsubscribe(){a(this,i,"m",d).call(this);super.unsubscribe()}constructor(e){super(1);i.add(this);o.set(this,void 0);n.set(this,"TRACKER_SUBJECT_NO_VALUE");s(this,o,e.subscribe(this),"f")}}t.TrackerSubject=TrackerSubject;o=new WeakMap,n=new WeakMap,i=new WeakSet,d=function _TrackerSubject_sourceUnsubscribe(){if(a(this,o,"f"))a(this,o,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.blockingWithLatestFrom=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return o=>{const n=o.pipe((0,s.share)());return(0,s.combineLatest)([n,e.pipe((0,s.startWith)(i),(0,s.takeUntil)(n.pipe((0,s.defaultIfEmpty)(null),(0,s.delay)(1),(0,s.last)())))]).pipe((0,s.mergeScan)(({buffer:e},t)=>{if(t[1]===i){return(0,s.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const a=r===t[0]?e:[...e,t[0]];return(0,s.from)(a.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,s.of)({buffer:[],output:t})},r,1),(0,s.map)(({output:e})=>e),(0,s.filter)(a.isNotNil),(0,s.distinctUntilKeyChanged)(0),(0,s.map)(([e,r])=>t(e,r)))}}t.blockingWithLatestFrom=blockingWithLatestFrom},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatAndCombineLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const startOnTrigger=(e,t)=>(0,s.concat)(e.pipe((0,s.take)(1),(0,s.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,s.of)([])}const t=[];let r=e[0].pipe((0,s.share)());t.push(r);for(const a of e.slice(1)){const i=startOnTrigger(r,a);r=i.pipe((0,s.share)());t.push(r)}return(0,s.combineLatest)(t)};t.concatAndCombineLatest=concatAndCombineLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.finalizeWithLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const finalizeWithLatest=e=>t=>{let r=null;return t.pipe((0,s.tap)(e=>r=e),(0,s.finalize)(()=>e(r)))};t.finalizeWithLatest=finalizeWithLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js"),t);a(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js"),t)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.passthrough=void 0;const passthrough=()=>e=>e;t.passthrough=passthrough},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.poll=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:n=i.strictEquals,combinator:d=s.switchMap,cancel$:c=s.NEVER,pollUntil:l=()=>true,logger:u})=>r.pipe(d(()=>(0,s.defer)(()=>(0,s.from)(e()).pipe((0,s.mergeMap)(e=>l(e)?(0,s.of)(e):(0,s.concat)((0,s.of)(e),(0,s.throwError)(()=>o))))).pipe((0,a.retryBackoff)({...t,shouldRetry:e=>{if(e===o){u.warn('"pollUntil" condition not met, will retry');return true}u.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);u.debug(`Should retry: ${r}`);return r}return true}}))),(0,s.distinctUntilChanged)(n),(0,s.takeUntil)(c));t.poll=poll},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shareRetryBackoff=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const a=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const i={initialInterval:10,maxInterval:5e3,resetOnSuccess:true};const shareRetryBackoff=(e,t)=>r=>{const o=new s.ReplaySubject(1);const n=r.subscribe(o);return new s.Observable(r=>o.pipe(t=>(0,s.defer)(()=>e(t)),(0,a.retryBackoff)({...i,...t}),(0,s.finalize)(()=>{n.unsubscribe()})).subscribe(r))};t.shareRetryBackoff=shareRetryBackoff},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toEmpty=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");t.toEmpty=(0,s.mergeMap)(()=>s.EMPTY)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js":(e,t,r)=>{"use strict";r.d(t,{TrackerSubject:()=>TrackerSubject});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,i,o,n;class TrackerSubject extends s.ReplaySubject{get value(){return __classPrivateFieldGet(this,o,"f")}next(e){__classPrivateFieldSet(this,o,e,"f");super.next(e)}complete(){__classPrivateFieldGet(this,a,"m",n).call(this);super.complete()}error(e){__classPrivateFieldGet(this,a,"m",n).call(this);super.error(e)}unsubscribe(){__classPrivateFieldGet(this,a,"m",n).call(this);super.unsubscribe()}constructor(e){super(1);a.add(this);i.set(this,void 0);o.set(this,"TRACKER_SUBJECT_NO_VALUE");__classPrivateFieldSet(this,i,e.subscribe(this),"f")}}i=new WeakMap,o=new WeakMap,a=new WeakSet,n=function _TrackerSubject_sourceUnsubscribe(){if(__classPrivateFieldGet(this,i,"f"))__classPrivateFieldGet(this,i,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js":(e,t,r)=>{"use strict";r.d(t,{blockingWithLatestFrom:()=>blockingWithLatestFrom});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/last.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeScan.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilKeyChanged.js");var v=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const y=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return _=>{const w=_.pipe((0,s.share)());return(0,a.combineLatest)([w,e.pipe((0,i.startWith)(y),(0,o.takeUntil)(w.pipe((0,n.defaultIfEmpty)(null),(0,d.delay)(1),(0,c.last)())))]).pipe((0,l.mergeScan)(({buffer:e},t)=>{if(t[1]===y){return(0,u.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const s=r===t[0]?e:[...e,t[0]];return(0,f.from)(s.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,u.of)({buffer:[],output:t})},r,1),(0,h.map)(({output:e})=>e),(0,m.filter)(v.isNotNil),(0,p.distinctUntilKeyChanged)(0),(0,h.map)(([e,r])=>t(e,r)))}}},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js":(e,t,r)=>{"use strict";r.d(t,{poll:()=>poll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var h=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const p=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:v=m.strictEquals,combinator:y=a.switchMap,cancel$:_=i.NEVER,pollUntil:w=()=>true,logger:g})=>r.pipe(y(()=>(0,o.defer)(()=>(0,n.from)(e()).pipe((0,d.mergeMap)(e=>w(e)?(0,s.of)(e):(0,c.concat)((0,s.of)(e),(0,l.throwError)(()=>p))))).pipe((0,h.retryBackoff)({...t,shouldRetry:e=>{if(e===p){g.warn('"pollUntil" condition not met, will retry');return true}g.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);g.debug(`Should retry: ${r}`);return r}return true}}))),(0,u.distinctUntilChanged)(v),(0,f.takeUntil)(_))},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/toEmpty.js":(e,t,r)=>{"use strict";r.d(t,{toEmpty:()=>i});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");const i=(0,s.mergeMap)(()=>a.EMPTY)},"../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BigIntMath=void 0;t.BigIntMath={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.calcPercentages=t.Percent=void 0;const a=s(r("../../node_modules/lodash/sum.js"));const Percent=e=>e;t.Percent=Percent;const calcPercentages=(e,r=(0,a.default)(e))=>{if(0===e.length){return[]}let s=(0,a.default)(e);if(r<s)r=s;if(0===r){e=e.map(()=>1);s=(0,a.default)(e);r=s}return e.map(e=>(0,t.Percent)(e/r))};t.calcPercentages=calcPercentages},"../../node_modules/@cardano-sdk/util/dist/cjs/Range.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwIfOutsideRange=t.inRange=t.throwIfInvalidRange=t.OutsideRangeError=t.InvalidRangeError=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidRangeError extends s.CustomError{constructor(e){super();this.message=e}}t.InvalidRangeError=InvalidRangeError;class OutsideRangeError extends s.CustomError{constructor(e,{lowerBound:t,upperBound:r},s){super();this.message=`${s} - ${e} must be between ${t} and ${r}`}}t.OutsideRangeError=OutsideRangeError;const throwIfInvalidRange=({lowerBound:e,upperBound:t})=>{if(e||t){if(e===t){throw new InvalidRangeError(`Lower bound: ${e}, cannot equal upper bound ${t}`)}else if(e&&e>t){throw new InvalidRangeError(`Lower bound: ${e}, cannot be larger than upper bound: ${t}`)}}else{throw new InvalidRangeError("Must provide at least one bound")}};t.throwIfInvalidRange=throwIfInvalidRange;const inRange=(e,r)=>{(0,t.throwIfInvalidRange)(r);const{lowerBound:s,upperBound:a}=r;if(!s&&a){return e<=a}if(s&&!a){return e>=s}return e>=s&&e<=a};t.inRange=inRange;const throwIfOutsideRange=(e,r,s)=>{if(!(0,t.inRange)(e,r)){throw new OutsideRangeError(e,r,s)}};t.throwIfOutsideRange=throwIfOutsideRange},"../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RunnableModule=t.InvalidModuleState=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js");class InvalidModuleState extends s.CustomError{constructor(e,t,r){super();this.message=`${t} cannot be called unless ${e} is ${r}`}}t.InvalidModuleState=InvalidModuleState;class RunnableModule{async initialize(){this.initializeBefore();await this.initializeImpl();this.initializeAfter()}async start(){this.startBefore();await this.startImpl();this.startAfter()}async shutdown(){this.shutdownBefore();await this.shutdownImpl();this.shutdownAfter()}initializeBefore(){if(null!==this.state){throw new InvalidModuleState(this.name,"initializeBefore",null)}this.state="initializing";this.logger.debug("Initializing...")}initializeAfter(){if("initializing"!==this.state){throw new InvalidModuleState(this.name,"initializeAfter","initializing")}this.state="initialized";this.logger.debug("Initialized")}startBefore(){if("initialized"!==this.state){throw new InvalidModuleState(this.name,"start","initialized")}this.state="starting";this.logger.debug("Starting...")}startAfter(){if("starting"!==this.state){throw new InvalidModuleState(this.name,"start","starting")}this.state="running";this.logger.debug("Started")}shutdownBefore(){if("running"!==this.state){throw new InvalidModuleState(this.name,"shutdown","running")}this.state="stopping";this.logger.debug("Stopping...")}shutdownAfter(){if("stopping"!==this.state){throw new InvalidModuleState(this.name,"shutdown","stopping")}this.state="initialized";this.logger.debug("Shutdown complete")}constructor(e,t){this.state=null;this.logger=(0,a.contextLogger)(t,e);this.name=e}}t.RunnableModule=RunnableModule},"../../node_modules/@cardano-sdk/util/dist/cjs/environment.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isBackgroundProcess=t.getEnvironmentConfiguration=t.isProductionEnvironment=t.Environment=void 0;var r;(function(e){e["Production"]="production";e["Development"]="development"})(r=t.Environment||(t.Environment={}));const isProductionEnvironment=()=>"production"===r.Production;t.isProductionEnvironment=isProductionEnvironment;const getEnvironmentConfiguration=()=>(0,t.isProductionEnvironment)()?r.Production:r.Development;t.getEnvironmentConfiguration=getEnvironmentConfiguration;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background");t.isBackgroundProcess=isBackgroundProcess},"../../node_modules/@cardano-sdk/util/dist/cjs/equals.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.areStringsEqualInConstantTime=t.areNumbersEqualInConstantTime=t.sameArrayItems=t.strictEquals=t.deepEquals=void 0;const a=s(r("../../node_modules/lodash/isEqual.js"));const deepEquals=(e,t)=>(0,a.default)(e,t);t.deepEquals=deepEquals;const strictEquals=(e,t)=>e===t;t.strictEquals=strictEquals;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));t.sameArrayItems=sameArrayItems;const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;t.areNumbersEqualInConstantTime=areNumbersEqualInConstantTime;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const a=s.reduce((e,t)=>e&t,1);return 1===a};t.areStringsEqualInConstantTime=areStringsEqualInConstantTime},"../../node_modules/@cardano-sdk/util/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidStateError=t.InvalidArgumentError=t.InvalidStringError=t.ComposableError=t.stripStackTrace=t.formatErrorMessage=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");t.formatErrorMessage=formatErrorMessage;const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))(0,t.stripStackTrace)(e.innerError)};t.stripStackTrace=stripStackTrace;class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[a]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${a}${s.join(ComposableError.stackDelimiter)}`})}}t.ComposableError=ComposableError;ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}t.InvalidStringError=InvalidStringError;class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}t.InvalidArgumentError=InvalidArgumentError;class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}t.InvalidStateError=InvalidStateError},"../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var i,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.usingAutoFree=t.ManagedFreeableScope=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js");class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(s(this,o,"f"))throw new Error("This scope is already disposed.");s(this,i,"f").push(e);return e}dispose(){if(s(this,o,"f"))return;for(const e of s(this,i,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}a(this,o,true,"f")}constructor(){i.set(this,[]);o.set(this,false)}}t.ManagedFreeableScope=ManagedFreeableScope;i=new WeakMap,o=new WeakMap;class AutoFree{execute(){let e;try{e=s(this,d,"f").call(this,s(this,n,"f"));if((0,c.isPromise)(e)){return e.then(e=>{s(this,n,"f").dispose();return e}).catch(e=>{s(this,n,"f").dispose();throw e})}s(this,n,"f").dispose();return e}catch(t){s(this,n,"f").dispose();throw t}}constructor(e){n.set(this,void 0);d.set(this,void 0);a(this,d,e,"f");a(this,n,new ManagedFreeableScope,"f")}}n=new WeakMap,d=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute();t.usingAutoFree=usingAutoFree},"../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.bufferToHexString=t.hexStringToBuffer=void 0;const hexStringToBuffer=e=>s.from(e,"hex");t.hexStringToBuffer=hexStringToBuffer;const bufferToHexString=e=>e.toString("hex");t.bufferToHexString=bufferToHexString},"../../node_modules/@cardano-sdk/util/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var a=Object.getOwnPropertyDescriptor(t,r);if(!a||("get"in a?!t.__esModule:a.writable||a.configurable))a={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,a)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});a(r("../../node_modules/@cardano-sdk/util/dist/cjs/equals.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/types.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/network.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/Range.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/environment.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/string.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js"),t);a(r("../../node_modules/@cardano-sdk/util/dist/cjs/util.js"),t)},"../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isNotNil=void 0;const isNotNil=e=>null!=e;t.isNotNil=isNotNil},"../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPromise=void 0;const isPromise=e=>"object"==typeof e&&"function"==typeof e.then;t.isPromise=isPromise},"../../node_modules/@cardano-sdk/util/dist/cjs/logging.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.contextLogger=t.loggerMethodNames=void 0;t.loggerMethodNames=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,r,s=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const a={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],r],contextStringify:s};const i=s(a.contextArray);return{...a,...Object.fromEntries(t.loggerMethodNames.map(e=>[e,(t,...r)=>{a.baseLogger[e](i,t,...r)}]))}};t.contextLogger=contextLogger},"../../node_modules/@cardano-sdk/util/dist/cjs/network.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isConnectionError=void 0;const r=new Set(["ETIMEDOUT","ECONNRESET","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]);const s=new Set(["WebSocketClosed","ServerNotReady"]);const isConnectionError=e=>{if(!e||"object"!=typeof e)return false;if((null==e?void 0:e.name)&&s.has(e.name)||(null==e?void 0:e.code)&&r.has(e.code)){return true}return(0,t.isConnectionError)(e.innerError)};t.isConnectionError=isConnectionError},"../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.patchObject=void 0;const patchObject=(e,t)=>new Proxy(e,{get(e,r,s){const a=r in t?t[r]:e[r];return"function"==typeof a?a.bind(s):a}});t.patchObject=patchObject},"../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.castHexBlob=t.HexBlob=t.Base64Blob=t.typedHex=t.assertIsHexString=t.typedBech32=t.assertIsBech32WithPrefix=void 0;const a=r("../../node_modules/bech32/dist/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js");const o=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let s;try{s=a.bech32.decode(e,o)}catch(n){throw new i.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(s.prefix,t)){throw new i.InvalidStringError(`expected bech32 prefix '${t}', got '${s.prefix}''`)}if(r&&!isOneOf(s.words.length,r)){throw new i.InvalidStringError(`expected decoded length of '${r}', got '${s.words.length}'`)}};t.assertIsBech32WithPrefix=assertIsBech32WithPrefix;const typedBech32=(e,r,s)=>{(0,t.assertIsBech32WithPrefix)(e,r,s);return e};t.typedBech32=typedBech32;const assertLength=(e,t)=>{if(e&&t.length!==e){throw new i.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new i.InvalidStringError("expected hex string")}};t.assertIsHexString=assertIsHexString;const typedHex=(e,r)=>{(0,t.assertIsHexString)(e,r);return e};t.typedHex=typedHex;const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new i.InvalidStringError("expected base64 string")};t.Base64Blob=Base64Blob;t.Base64Blob.fromBytes=e=>s.from(e).toString("base64");const HexBlob=e=>(0,t.typedHex)(e);t.HexBlob=HexBlob;t.HexBlob.fromBytes=e=>s.from(e).toString("hex");t.HexBlob.fromBase64=e=>s.from(e,"base64").toString("hex");t.HexBlob.toTypedBech32=(e,t)=>a.bech32.encode(e,a.bech32.toWords(Uint8Array.from(s.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e};t.castHexBlob=castHexBlob},"../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.replaceNullsWithUndefineds=void 0;const replaceNullsWithUndefineds=e=>{const r={};for(const s of Object.keys(e)){const a=e[s];r[s]=null===a?void 0:a&&"object"==typeof a&&a.__proto__.constructor===Object?(0,t.replaceNullsWithUndefineds)(a):a}return r};t.replaceNullsWithUndefineds=replaceNullsWithUndefineds},"../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromSerializableObject=t.toSerializableObject=void 0;const i=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");const o=a(r("../../node_modules/lodash/transform.js"));const n=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const d="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const toSerializableObject=(e,r={})=>{if(n.has(typeof e))return e;const{transformationTypeKey:a=d,serializeKey:c=defaultTransformKey}=r;if(void 0===e){return{[a]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>(0,t.toSerializableObject)(e,r))}if(ArrayBuffer.isView(e)){const l=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const u=s.from(l).toString("hex");return{[a]:"Buffer",value:u}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=(0,t.toSerializableObject)(e.innerError.data);return{[a]:"Error",value:(0,i.serializeError)(e)}}if(e instanceof Date){return{[a]:"Date",value:e.getTime()}}if(e instanceof Set){return{[a]:"Set",value:[...e].map(e=>(0,t.toSerializableObject)(e,r))}}if(e instanceof Map){return{[a]:"Map",value:[...e.entries()].map(([e,s])=>[(0,t.toSerializableObject)(e,r),(0,t.toSerializableObject)(s,r)])}}return(0,o.default)(e,(e,s,a)=>{e[c(a)]=(0,t.toSerializableObject)(s,r);return e},{})}if("bigint"==typeof e)return{[a]:"bigint",value:e.toString()}};t.toSerializableObject=toSerializableObject;const fromSerializableObjectUnknown=(e,t={})=>{if(n.has(typeof e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=d,deserializeKey:a=defaultTransformKey,errorTypes:i=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(s.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(i,l))}default:return(0,o.default)(e,(e,r,s)=>{e[a(s)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t);t.fromSerializableObject=fromSerializableObject},"../../node_modules/@cardano-sdk/util/dist/cjs/string.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StringUtils=void 0;t.StringUtils={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,r)=>{let s=0;let a=0;const i=[];for(let o=0;o<e.length;o++){const n=o===e.length-1;const d=s+t.StringUtils.byteSize(e[o]);const c=n?r+1:d+t.StringUtils.byteSize(e[o+1]);const l=d===r||c>r||n;if(l){const u=e.slice(a,o+1);i.push(u);a=o+1;s=0}else{s=d}}return i}}},"../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.transformObj=void 0;const a=s(r("../../node_modules/lodash/isUndefined.js"));const i=s(r("../../node_modules/lodash/merge.js"));const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:(0,i.default)(e,{[t]:r}),{})}return e};const transformObj=async(e,r,s)=>{const i=Object.entries(r);const o=Object.create({});for(const[n,d]of i)o[n]=await ("function"==typeof d?d(e,s):(0,t.transformObj)(e,d,s));return deepOmitBy(o,a.default)};t.transformObj=transformObj},"../../node_modules/@cardano-sdk/util/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveObjectValues=void 0;const resolveObjectValues=async e=>Object.fromEntries(await Promise.all(Object.entries(e).map(([e,t])=>Promise.resolve(t).then(t=>[e,t]))));t.resolveObjectValues=resolveObjectValues},"../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js":(e,t,r)=>{"use strict";r.d(t,{BigIntMath:()=>s});const s={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/esm/Percent.js":(e,t,r)=>{"use strict";r.d(t,{Percent:()=>Percent,calcPercentages:()=>calcPercentages});var s=r("../../node_modules/lodash/sum.js");const Percent=e=>e;const calcPercentages=(e,t=s(e))=>{if(0===e.length){return[]}let r=s(e);if(t<r)t=r;if(0===t){e=e.map(()=>1);r=s(e);t=r}return e.map(e=>Percent(e/t))}},"../../node_modules/@cardano-sdk/util/dist/esm/environment.js":(e,t,r)=>{"use strict";r.d(t,{isBackgroundProcess:()=>isBackgroundProcess,isProductionEnvironment:()=>isProductionEnvironment});var s;(function(e){e["Production"]="production";e["Development"]="development"})(s||(s={}));const isProductionEnvironment=()=>"production"===s.Production;const getEnvironmentConfiguration=()=>isProductionEnvironment()?s.Production:s.Development;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background")},"../../node_modules/@cardano-sdk/util/dist/esm/equals.js":(e,t,r)=>{"use strict";r.d(t,{areNumbersEqualInConstantTime:()=>areNumbersEqualInConstantTime,areStringsEqualInConstantTime:()=>areStringsEqualInConstantTime,deepEquals:()=>deepEquals,sameArrayItems:()=>sameArrayItems,strictEquals:()=>strictEquals});var s=r("../../node_modules/lodash/isEqual.js");const deepEquals=(e,t)=>s(e,t);const strictEquals=(e,t)=>e===t;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const a=s.reduce((e,t)=>e&t,1);return 1===a}},"../../node_modules/@cardano-sdk/util/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{ComposableError:()=>ComposableError,InvalidArgumentError:()=>InvalidArgumentError,InvalidStateError:()=>InvalidStateError,InvalidStringError:()=>InvalidStringError,formatErrorMessage:()=>formatErrorMessage,stripStackTrace:()=>stripStackTrace});var s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))stripStackTrace(e.innerError)};class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[a]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${a}${s.join(ComposableError.stackDelimiter)}`})}}ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}},"../../node_modules/@cardano-sdk/util/dist/esm/freeable.js":(e,t,r)=>{"use strict";r.d(t,{ManagedFreeableScope:()=>ManagedFreeableScope,usingAutoFree:()=>usingAutoFree});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a,i,o,n;class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(__classPrivateFieldGet(this,i,"f"))throw new Error("This scope is already disposed.");__classPrivateFieldGet(this,a,"f").push(e);return e}dispose(){if(__classPrivateFieldGet(this,i,"f"))return;for(const e of __classPrivateFieldGet(this,a,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}__classPrivateFieldSet(this,i,true,"f")}constructor(){a.set(this,[]);i.set(this,false)}}a=new WeakMap,i=new WeakMap;class AutoFree{execute(){let e;try{e=__classPrivateFieldGet(this,n,"f").call(this,__classPrivateFieldGet(this,o,"f"));if((0,s.isPromise)(e)){return e.then(e=>{__classPrivateFieldGet(this,o,"f").dispose();return e}).catch(e=>{__classPrivateFieldGet(this,o,"f").dispose();throw e})}__classPrivateFieldGet(this,o,"f").dispose();return e}catch(t){__classPrivateFieldGet(this,o,"f").dispose();throw t}}constructor(e){o.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,o,new ManagedFreeableScope,"f")}}o=new WeakMap,n=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute()},"../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js":(e,t,r)=>{"use strict";r.d(t,{isNotNil:()=>isNotNil});const isNotNil=e=>null!=e},"../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js":(e,t,r)=>{"use strict";r.d(t,{isPromise:()=>isPromise});const isPromise=e=>"object"==typeof e&&"function"==typeof e.then},"../../node_modules/@cardano-sdk/util/dist/esm/logging.js":(e,t,r)=>{"use strict";r.d(t,{contextLogger:()=>contextLogger});const s=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,t,r=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const a={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],t],contextStringify:r};const i=r(a.contextArray);return{...a,...Object.fromEntries(s.map(e=>[e,(t,...r)=>{a.baseLogger[e](i,t,...r)}]))}}},"../../node_modules/@cardano-sdk/util/dist/esm/primitives.js":(e,t,r)=>{"use strict";r.d(t,{Base64Blob:()=>Base64Blob,HexBlob:()=>HexBlob,assertIsBech32WithPrefix:()=>assertIsBech32WithPrefix,assertIsHexString:()=>assertIsHexString,castHexBlob:()=>castHexBlob,typedBech32:()=>typedBech32,typedHex:()=>typedHex});var s=r("../../node_modules/bech32/dist/index.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const o=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let i;try{i=s.bech32.decode(e,o)}catch(n){throw new a.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(i.prefix,t)){throw new a.InvalidStringError(`expected bech32 prefix '${t}', got '${i.prefix}''`)}if(r&&!isOneOf(i.words.length,r)){throw new a.InvalidStringError(`expected decoded length of '${r}', got '${i.words.length}'`)}};const typedBech32=(e,t,r)=>{assertIsBech32WithPrefix(e,t,r);return e};const assertLength=(e,t)=>{if(e&&t.length!==e){throw new a.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new a.InvalidStringError("expected hex string")}};const typedHex=(e,t)=>{assertIsHexString(e,t);return e};const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new a.InvalidStringError("expected base64 string")};Base64Blob.fromBytes=e=>i.from(e).toString("base64");const HexBlob=e=>typedHex(e);HexBlob.fromBytes=e=>i.from(e).toString("hex");HexBlob.fromBase64=e=>i.from(e,"base64").toString("hex");HexBlob.toTypedBech32=(e,t)=>s.bech32.encode(e,s.bech32.toWords(Uint8Array.from(i.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e}},"../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js":(e,t,r)=>{"use strict";r.d(t,{fromSerializableObject:()=>fromSerializableObject,toSerializableObject:()=>toSerializableObject});var s=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");var a=r("../../node_modules/lodash/transform.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const o=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const n="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const toSerializableObject=(e,t={})=>{if(o.has(typeof e))return e;const{transformationTypeKey:r=n,serializeKey:d=defaultTransformKey}=t;if(void 0===e){return{[r]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>toSerializableObject(e,t))}if(ArrayBuffer.isView(e)){const c=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const l=i.from(c).toString("hex");return{[r]:"Buffer",value:l}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=toSerializableObject(e.innerError.data);return{[r]:"Error",value:(0,s.serializeError)(e)}}if(e instanceof Date){return{[r]:"Date",value:e.getTime()}}if(e instanceof Set){return{[r]:"Set",value:[...e].map(e=>toSerializableObject(e,t))}}if(e instanceof Map){return{[r]:"Map",value:[...e.entries()].map(([e,r])=>[toSerializableObject(e,t),toSerializableObject(r,t)])}}return a(e,(e,r,s)=>{e[d(s)]=toSerializableObject(r,t);return e},{})}if("bigint"==typeof e)return{[r]:"bigint",value:e.toString()}};const fromSerializableObjectUnknown=(e,t={})=>{if(o.has(typeof e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=n,deserializeKey:s=defaultTransformKey,errorTypes:d=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(i.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(d,l))}default:return a(e,(e,r,a)=>{e[s(a)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t)},"../../node_modules/@cardano-sdk/util/dist/esm/transformer.js":(e,t,r)=>{"use strict";r.d(t,{transformObj:()=>transformObj});var s=r("../../node_modules/lodash/isUndefined.js");var a=r("../../node_modules/lodash/merge.js");const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:a(e,{[t]:r}),{})}return e};const transformObj=async(e,t,r)=>{const a=Object.entries(t);const i=Object.create({});for(const[o,n]of a)i[o]=await ("function"==typeof n?n(e,r):transformObj(e,n,r));return deepOmitBy(i,s)}},"../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];class NonError extends Error{constructor(e){super(NonError._prepareSuperMessage(e));Object.defineProperty(this,"name",{value:"NonError",configurable:true,writable:true});if(Error.captureStackTrace)Error.captureStackTrace(this,NonError)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const a=[{property:"name",enumerable:false},{property:"message",enumerable:false},{property:"stack",enumerable:false},{property:"code",enumerable:true}];const i=Symbol(".toJSON called");const toJSON=e=>{e[i]=true;const t=e.toJSON();delete e[i];return t};const destroyCircular=({from:e,seen:t,to_:r,forceEnumerable:o,maxDepth:n,depth:d})=>{const c=r||(Array.isArray(e)?[]:{});t.push(e);if(d>=n){return c}if("function"==typeof e.toJSON&&true!==e[i]){return toJSON(e)}for(const[l,u]of Object.entries(e)){if("function"==typeof s&&s.isBuffer(u)){c[l]="[object Buffer]";continue}if("function"==typeof u){continue}if(!u||"object"!=typeof u){c[l]=u;continue}if(!t.includes(e[l])){d++;c[l]=destroyCircular({from:e[l],seen:t.slice(),forceEnumerable:o,maxDepth:n,depth:d});continue}c[l]="[Circular]"}for(const{property:f,enumerable:h}of a)if("string"==typeof e[f])Object.defineProperty(c,f,{value:e[f],enumerable:!!o||h,configurable:true,writable:true});return c};const serializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if("object"==typeof e&&null!==e){return destroyCircular({from:e,seen:[],forceEnumerable:true,maxDepth:r,depth:0})}if("function"==typeof e){return`[Function: ${e.name||"anonymous"}]`}return e};const deserializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error){return e}if("object"==typeof e&&null!==e&&!Array.isArray(e)){const s=new Error;destroyCircular({from:e,seen:[],to_:s,maxDepth:r,depth:0});return s}return new NonError(e)};e.exports={serializeError,deserializeError}},"../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>a,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/BaseWallet.js":(e,t,r)=>{"use strict";r.d(t,{BaseWallet:()=>BaseWallet,DEFAULT_POLLING_CONFIG:()=>sa,PublicCredentialsManagerType:()=>ss});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var g=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var b=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const passthrough=()=>e=>e;var P=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var S=r("../../node_modules/lodash/uniqBy.js");const C=50;const k=5;const handleInfoEquals=(e,t)=>{var r,s;return e.assetId===t.assetId&&(null===(r=e.resolvedAt)||void 0===r?void 0:r.hash)===(null===(s=t.resolvedAt)||void 0===s?void 0:s.hash)&&(0,g.deepEquals)(e.tokenMetadata,t.tokenMetadata)&&(0,g.deepEquals)(e.nftMetadata,t.nftMetadata)};const isHydrated=e=>"image"in e&&"backgroundImage"in e&&"profilePic"in e;const hydrateHandleAsync=(e,t)=>{return async r=>{t.debug("hydrating handle",r.handle);try{const[s]=await e.resolveHandles({handles:[r.handle]});return{...r,backgroundImage:null==s?void 0:s.backgroundImage,image:null==s?void 0:s.image,profilePic:null==s?void 0:s.profilePic,resolvedAt:null==s?void 0:s.resolvedAt}}catch(a){t.error("Couldn't hydrate handle",a);throw a}}};const hydrateHandles=e=>t=>{const r={};return t.pipe((0,n.mergeMap)(t=>(0,d.from)(t).pipe((0,c.concatMap)(t=>t.handle in r?(0,l.of)(r[t.handle]):(0,u.defer)(()=>(0,d.from)(e(t))).pipe((0,P.retryBackoff)({initialInterval:C,maxRetries:k,resetOnSuccess:true}),(0,f.catchError)(()=>(0,l.of)(t)))),(0,h.tap)(e=>{if(isHydrated(e))r[e.handle]=e}),(0,m.toArray)(),t.length>0?(0,p.startWith)(t):passthrough())))};const createHandlesTracker=({assetInfo$:e,handlePolicyIds$:t,handleProvider:r,logger:s,utxo$:d},{hydrateHandle:c=hydrateHandleAsync}={})=>{return(0,v.combineLatest)([t,d,e]).pipe((0,n.mergeMap)(([e,t,r])=>{const n=t.flatMap(([t,r])=>{var s;return S([...(null===(s=r.value.assets)||void 0===s?void 0:s.keys())||[]].filter(t=>{const r=e.some(e=>t.startsWith(e));if(!r){return false}const s=a.AssetId.getAssetName(t);const o=i.AssetNameLabel.decode(s);return!o||o.label===i.AssetNameLabelNum.UserNFT}).map(e=>({handleAssetId:e,txOut:r})),({handleAssetId:e})=>e)});const d=n.map(({handleAssetId:e,txOut:t})=>{const a=r.get(e);if(!a){s.debug(`Asset info not (yet?) found for ${e}`);return null}return{...a,cardanoAddress:t.address,handle:o.getAssetNameAsText(e),hasDatum:!!t.datum}}).filter(b.isNotNil);if(n.length>0&&0===d.length){return y.EMPTY}return(0,l.of)(d.filter(({handle:e,supply:t})=>{if(t>1n){s.warn(`Omitting handle with supply >1: ${e}`);return false}return true}))}),(0,_.distinctUntilChanged)((e,t)=>(0,g.sameArrayItems)(e,t,handleInfoEquals)),hydrateHandles(c(r,s)),(0,w.shareReplay)({bufferSize:1,refCount:true}))};var j=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var x=r("../../node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var E=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var A=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");var I;(function(e){e[e["down"]=0]="down";e[e["up"]=1]="up"})(I||(I={}));const createSimpleConnectionStatusTracker=({isNodeEnv:e=(0,A.isBackgroundProcess)(),online$:t=e?j.NEVER:(0,x.fromEvent)(window,"online"),offline$:r=e?j.NEVER:(0,x.fromEvent)(window,"offline"),initialStatus:s=!!e||navigator.onLine}={})=>(0,T.merge)(t.pipe((0,E.map)(()=>true)),r.pipe((0,E.map)(()=>false))).pipe((0,p.startWith)(s),(0,E.map)(e=>e?I.up:I.down),(0,_.distinctUntilChanged)(),(0,w.shareReplay)(1));var B=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");const F={numCalls:0,numFailures:0,numResponses:0};class ProviderTracker{async trackedCall(e,t){t.next({...t.value,numCalls:t.value.numCalls+1});try{const r=await e();const s=t.value.numResponses+1;t.next({...t.value,didLastRequestFail:false,initialized:true,numResponses:s});return r}catch(a){t.next({...t.value,didLastRequestFail:true,numFailures:t.value.numFailures+1});throw a}}setStatInitialized(e){e.next({...e.value,initialized:true})}}const M={...F,initialized:true};class TxSubmitProviderStats{shutdown(){this.submitTx$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(M);this.submitTx$.next(M)}constructor(){this.healthCheck$=new B.BehaviorSubject(M);this.submitTx$=new B.BehaviorSubject(M)}}class TrackedTxSubmitProvider extends ProviderTracker{constructor(e){super();this.stats=new TxSubmitProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.submitTx=t=>this.trackedCall(()=>e.submitTx(t),this.stats.submitTx$)}}class UtxoProviderStats{shutdown(){this.utxoByAddresses$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(F);this.utxoByAddresses$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.utxoByAddresses$=new B.BehaviorSubject(F)}}class TrackedUtxoProvider extends ProviderTracker{constructor(e){super();this.stats=new UtxoProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.utxoByAddresses=t=>this.trackedCall(()=>e.utxoByAddresses(t),this.stats.utxoByAddresses$)}}class WalletNetworkInfoProviderStats{shutdown(){this.eraSummaries$.complete();this.protocolParameters$.complete();this.genesisParameters$.complete();this.ledgerTip$.complete()}reset(){this.eraSummaries$.next(F);this.protocolParameters$.next(F);this.genesisParameters$.next(F);this.ledgerTip$.next(F)}constructor(){this.eraSummaries$=new B.BehaviorSubject(F);this.protocolParameters$=new B.BehaviorSubject(F);this.genesisParameters$=new B.BehaviorSubject(F);this.ledgerTip$=new B.BehaviorSubject(F)}}class TrackedWalletNetworkInfoProvider extends ProviderTracker{constructor(e){super();this.stats=new WalletNetworkInfoProviderStats;e=e;this.eraSummaries=()=>this.trackedCall(()=>e.eraSummaries(),this.stats.eraSummaries$);this.ledgerTip=()=>this.trackedCall(()=>e.ledgerTip(),this.stats.ledgerTip$);this.protocolParameters=()=>this.trackedCall(()=>e.protocolParameters(),this.stats.protocolParameters$);this.genesisParameters=()=>this.trackedCall(()=>e.genesisParameters(),this.stats.genesisParameters$)}}class AssetProviderStats{shutdown(){this.healthCheck$.complete();this.getAsset$.complete()}reset(){this.healthCheck$.next(F);this.getAsset$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.getAsset$=new B.BehaviorSubject(F)}}class TrackedAssetProvider extends ProviderTracker{constructor(e){super();this.stats=new AssetProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.getAsset=({assetId:t,extraData:r})=>this.trackedCall(()=>e.getAsset({assetId:t,extraData:r}),this.stats.getAsset$);this.getAssets=({assetIds:t,extraData:r})=>this.trackedCall(()=>e.getAssets({assetIds:t,extraData:r}),this.stats.getAsset$)}}class ChainHistoryProviderStats{shutdown(){this.healthCheck$.complete();this.blocksByHashes$.complete();this.transactionsByAddresses$.complete();this.transactionsByHashes$.complete()}reset(){this.healthCheck$.next(F);this.blocksByHashes$.next(F);this.transactionsByAddresses$.next(F);this.transactionsByHashes$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.blocksByHashes$=new B.BehaviorSubject(F);this.transactionsByAddresses$=new B.BehaviorSubject(F);this.transactionsByHashes$=new B.BehaviorSubject(F)}}class TrackedChainHistoryProvider extends ProviderTracker{constructor(e){super();this.stats=new ChainHistoryProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.transactionsByAddresses=({addresses:t,pagination:r,blockRange:s})=>this.trackedCall(()=>e.transactionsByAddresses({addresses:t,blockRange:s,pagination:r}),this.stats.transactionsByAddresses$);this.transactionsByHashes=t=>this.trackedCall(()=>e.transactionsByHashes(t),this.stats.transactionsByHashes$);this.blocksByHashes=t=>this.trackedCall(()=>e.blocksByHashes(t),this.stats.blocksByHashes$)}}class RewardAccountInfoProviderStats{shutdown(){this.healthCheck$.complete();this.rewardAccountInfo$.complete();this.delegationPortfolio$.complete()}reset(){this.healthCheck$.next(F);this.rewardAccountInfo$.next(F);this.delegationPortfolio$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.rewardAccountInfo$=new B.BehaviorSubject(F);this.delegationPortfolio$=new B.BehaviorSubject(F)}}class TrackedRewardAccountInfoProvider extends ProviderTracker{constructor(e){super();this.stats=new RewardAccountInfoProviderStats;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardAccountInfo=(t,r)=>this.trackedCall(()=>e.rewardAccountInfo(t,r),this.stats.rewardAccountInfo$);this.delegationPortfolio=t=>this.trackedCall(()=>e.delegationPortfolio(t),this.stats.delegationPortfolio$)}}class RewardsProviderStats{shutdown(){this.healthCheck$.complete();this.rewardsHistory$.complete();this.rewardAccountBalance$.complete()}reset(){this.healthCheck$.next(F);this.rewardsHistory$.next(F);this.rewardAccountBalance$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.rewardsHistory$=new B.BehaviorSubject(F);this.rewardAccountBalance$=new B.BehaviorSubject(F)}}class TrackedRewardsProvider extends ProviderTracker{constructor(e){super();this.stats=new RewardsProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardsHistory=t=>this.trackedCall(()=>e.rewardsHistory(t),this.stats.rewardsHistory$);this.rewardAccountBalance=t=>this.trackedCall(()=>e.rewardAccountBalance(t),this.stats.rewardAccountBalance$)}}var R=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var D=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounce.js");var O=r("../../node_modules/rxjs/dist/esm5/internal/observable/interval.js");var G=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var N=r("../../node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js");var H=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var K=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var V=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var W=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var z=r("../../node_modules/rxjs/dist/esm5/internal/observable/timer.js");var U=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");const getDefaultProviderSyncRelevantStats=({networkInfoProvider:e,assetProvider:t,utxoProvider:r,chainHistoryProvider:s,rewardAccountInfoProvider:a,rewardsProvider:i})=>(0,v.combineLatest)([e.stats.ledgerTip$,e.stats.protocolParameters$,e.stats.genesisParameters$,e.stats.eraSummaries$,t.stats.getAsset$,r.stats.utxoByAddresses$,s.stats.transactionsByAddresses$,i.stats.rewardsHistory$,a.stats.rewardAccountInfo$]);const createProviderStatusTracker=(e,{consideredOutOfSyncAfter:t},{getProviderSyncRelevantStats:r=getDefaultProviderSyncRelevantStats}={})=>{const s=e.logger;const a=r(e).pipe((0,R.share)());const i=new U.TrackerSubject(a.pipe((0,E.map)(e=>e.some(({numCalls:e,numFailures:t,numResponses:r,didLastRequestFail:s})=>s||e>r+t)),(0,D.debounce)(e=>e?(0,l.of)(true):(0,O.interval)(1)),(0,_.distinctUntilChanged)(),(0,h.tap)(e=>s.debug(`${e?"Some":"No"} requests are pending`))));const o=a.pipe((0,G.debounceTime)(1),(0,N.skipWhile)(e=>e.some(({initialized:e})=>!e)),(0,H.take)(1),(0,h.tap)(()=>s.debug("All stats are initialized")),(0,n.mergeMap)(()=>y.EMPTY));const d=new U.TrackerSubject((0,K.concat)((0,l.of)(false),o,i.pipe((0,E.map)(e=>!e))).pipe((0,_.distinctUntilChanged)(),(0,h.tap)(e=>s.debug("isSettled",e))));const c=new U.TrackerSubject((0,K.concat)((0,l.of)(false),d.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>(0,K.concat)((0,l.of)(true),(0,z.timer)(t).pipe((0,E.map)(()=>false)))),(0,_.distinctUntilChanged)())).pipe((0,h.tap)(e=>s.debug("isUpToDate",e))));return{isAnyRequestPending$:i,isSettled$:d,isUpToDate$:c,shutdown(){i.complete();d.complete();c.complete();s.debug("Shutdown")}}};var $=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var L=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var q=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");const sortAddresses=e=>[...e].sort((e,t)=>{if(e.index!==t.index){return e.index-t.index}if(e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index}if(e.stakeKeyDerivationPath&&!t.stakeKeyDerivationPath){return -1}if(!e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return 1}return 0});const createAddressTracker=({addressDiscovery$:e,store:t,logger:r})=>{const storeAddresses=()=>e=>e.pipe((0,W.switchMap)(e=>t.set(e).pipe((0,E.map)(()=>e))));const s=new $.Subject;const a=t.get().pipe((0,L.defaultIfEmpty)([]),(0,n.mergeMap)(t=>{if(0===t.length){r.debug("No addresses available; initiating address discovery process");return e.pipe((0,h.tap)(e=>{if(0===e.length){throw new Error("Address discovery derived 0 addresses")}}),storeAddresses())}return(0,l.of)(t)}),(0,W.switchMap)(e=>{const t=[...e];return(0,T.merge)((0,l.of)(e),s.pipe((0,E.map)(e=>{for(const s of e){if(t.some(e=>e.address===s.address)){r.warn("Address already exists",s.address);continue}t.push(s)}return[...t]}),storeAddresses())).pipe((0,_.distinctUntilChanged)(q.groupedAddressesEquals))})).pipe((0,w.shareReplay)(1));return{addAddresses:e=>{s.next(e);return a.pipe((0,V.filter)(t=>e.every(({address:e})=>t.some(({address:t})=>t===e))),(0,H.take)(1))},addresses$:a.pipe((0,E.map)(sortAddresses)),shutdown:s.complete.bind(s)}};var Y=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");class PersistentCollectionTrackerSubject extends U.TrackerSubject{next(e){this.store&&this.store.setAll(e);super.next(e)}constructor(e,t){const r=t.getAll().pipe((0,L.defaultIfEmpty)([]));super(r.pipe((0,W.switchMap)(t=>{const r=e(t);return t.length>0?(0,K.concat)((0,l.of)(t),r):r})));this.store=t}}class PersistentDocumentTrackerSubject extends U.TrackerSubject{constructor(e,t){super((0,K.concat)(t.get(),e.pipe((0,h.tap)(t.set.bind(t)))))}}var Q=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var J=r("../../node_modules/rxjs/dist/esm5/internal/operators/auditTime.js");var X=r("../../node_modules/rxjs/dist/esm5/internal/operators/exhaustMap.js");var Z=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var ee=r("../../node_modules/rxjs/dist/esm5/internal/operators/finalize.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var et,er;const triggerOrInterval$=(e,t)=>e.pipe((0,Q.timeout)({each:t,with:()=>(0,K.concat)((0,l.of)(true),triggerOrInterval$(e,t))}));class TipTracker extends PersistentDocumentTrackerSubject{sync(){__classPrivateFieldGet(this,er,"f").debug("Manual sync triggered");__classPrivateFieldGet(this,et,"f").next()}constructor({provider$:e,pollController$:t,minPollInterval:r,maxPollInterval:s,store:a,syncStatus:i,connectionStatus$:o,logger:n},{externalTrigger$:d=new $.Subject}={}){super((0,T.merge)((0,v.combineLatest)([triggerOrInterval$(i.isSettled$.pipe((0,V.filter)(e=>e)),s).pipe((0,J.auditTime)(r),(0,p.startWith)(null)),o,t]).pipe((0,h.tap)(([,e,t])=>{n.debug(e!==I.down&&t?"Fetching tip...":"Skipping fetch tip")}),(0,X.exhaustMap)(([,t,r])=>t!==I.down&&r?e.pipe((0,Z.takeUntil)(d.pipe((0,h.tap)(()=>n.debug("Tip fetch canceled"))))):y.EMPTY),(0,_.distinctUntilChanged)(q.tipEquals),(0,h.tap)(e=>n.debug("Fetched new tip",e))),d.pipe((0,W.switchMap)(()=>e),(0,h.tap)(e=>n.debug("External trigger fetched tip",e)))).pipe((0,ee.finalize)(()=>__classPrivateFieldGet(this,et,"f").complete())),a);et.set(this,new $.Subject);er.set(this,void 0);__classPrivateFieldSet(this,et,d,"f");__classPrivateFieldSet(this,er,n,"f")}}et=new WeakMap,er=new WeakMap;var es=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var ea=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var ei=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var eo=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,A.isProductionEnvironment)())(0,eo.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,A.isProductionEnvironment)())(0,eo.stripStackTrace)(t);return t}return null};const en=asSpecificCardanoNodeError(ei.TxSubmissionError);const ed=asSpecificCardanoNodeError(ei.ChainSyncError);const ec=asSpecificCardanoNodeError(ei.StateQueryError);const el=asSpecificCardanoNodeError(ei.GeneralCardanoNodeError);const asCardanoNodeError=e=>el(e)||en(e)||ec(e)||ed(e)||new GeneralCardanoNodeError(GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');const eu=new Set(Object.values(ei.StateQueryErrorCode));const ef=new Set(Object.values(ei.GeneralCardanoNodeErrorCode));const eh=new Set(Object.values(ei.TxSubmissionErrorCode));const em=new Set(Object.values(ei.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&em.has(e);const isTxSubmissionErrorCode=e=>"number"==typeof e&&eh.has(e);const isStateQueryErrorCode=e=>"number"==typeof e&&eu.has(e);const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&ef.has(e);const asChainSyncErrorCode=e=>isChainSyncErrorCode(e)?e:null;const asStateQueryErrorCode=e=>isStateQueryErrorCode(e)?e:null;const asGeneralCardanoNodeErrorCode=e=>isGeneralCardanoNodeErrorCode(e)?e:null;const asTxSubmissionErrorCode=e=>isTxSubmissionErrorCode(e)?e:null;const isProviderError=e=>e instanceof ea.ProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof TxSubmissionError&&e.code===TxSubmissionErrorCode.OutsideOfValidityInterval;const isValueNotConservedError=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.ValueNotConserved;const isIncompleteWithdrawalsError=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.IncompleteWithdrawals;const isUnknownOutputReferences=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.UnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.CredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.DRepAlreadyRegistered;const isUnknownCredential=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.UnknownCredential;const isDrepNotRegistered=e=>e instanceof ei.TxSubmissionError&&e.code===ei.TxSubmissionErrorCode.DRepNotRegistered;var ep=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var SmartTxSubmitProvider_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var SmartTxSubmitProvider_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var ev,ey,e_,ew;class SmartTxSubmitProvider{submitTx(e){const{body:{validityInterval:t}}=es.deserializeTx(e.signedTransaction);const r=(0,v.combineLatest)([SmartTxSubmitProvider_classPrivateFieldGet(this,ew,"f"),SmartTxSubmitProvider_classPrivateFieldGet(this,ey,"f")]).pipe((0,h.tap)(([e,{slot:r}])=>{if(r>=((null==t?void 0:t.invalidHereafter)||Number.POSITIVE_INFINITY)){const s={currentSlot:r,validityInterval:{invalidBefore:null==t?void 0:t.invalidBefore,invalidHereafter:null==t?void 0:t.invalidHereafter}};throw new ea.ProviderError(ea.ProviderFailure.BadRequest,new ei.TxSubmissionError(ei.TxSubmissionErrorCode.OutsideOfValidityInterval,s,"Not submitting transaction due to validity interval"))}}),(0,V.filter)(([e,{slot:r}])=>{return e===I.up&&r>=((null==t?void 0:t.invalidBefore)||0)}),(0,H.take)(1));return(0,ep.firstValueFrom)(r.pipe((0,n.mergeMap)(()=>(0,d.from)(SmartTxSubmitProvider_classPrivateFieldGet(this,ev,"f").submitTx(e))),(0,P.retryBackoff)({...SmartTxSubmitProvider_classPrivateFieldGet(this,e_,"f"),shouldRetry:e=>isProviderError(e)&&[ea.ProviderFailure.Unhealthy,ea.ProviderFailure.ConnectionFailure].includes(e.reason)})))}healthCheck(){return SmartTxSubmitProvider_classPrivateFieldGet(this,ev,"f").healthCheck()}constructor({retryBackoffConfig:e},{connectionStatus$:t,tip$:r,txSubmitProvider:s}){ev.set(this,void 0);ey.set(this,void 0);e_.set(this,void 0);ew.set(this,void 0);SmartTxSubmitProvider_classPrivateFieldSet(this,ev,s,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,ey,r,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,ew,t,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,e_,e,"f")}}ev=new WeakMap,ey=new WeakMap,e_=new WeakMap,ew=new WeakMap;var eg=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");const currentEpochTracker=(e,t)=>new U.TrackerSubject(t.pipe((0,W.switchMap)(t=>{const r=(0,eg.createSlotEpochInfoCalc)(t);return e.pipe((0,E.map)(({slot:e})=>r(e)))}),(0,_.distinctUntilChanged)(q.epochInfoEquals)));var eb=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var eP=r("../../node_modules/rxjs/dist/esm5/internal/observable/partition.js");var eS=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var eC=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeWith.js");var ek=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var ej=r("../../node_modules/rxjs/dist/esm5/internal/operators/scan.js");var ex;(function(e){e["InvalidTransaction"]="INVALID_TRANSACTION";e["FailedToSubmit"]="FAILED_TO_SUBMIT";e["Unknown"]="UNKNOWN";e["CannotTrack"]="CANNOT_TRACK";e["Timeout"]="TIMEOUT";e["Phase2Validation"]="PHASE_2_VALIDATION"})(ex||(ex={}));var eT=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");const distinctBlock=e=>e.pipe((0,E.map)(({blockNo:e})=>e),(0,_.distinctUntilChanged)());const distinctEraSummaries=e=>e.pipe(map(e=>e),distinctUntilChanged(eraSummariesEquals));var eE=r("../../node_modules/rxjs/dist/esm5/internal/operators/groupBy.js");const newAndStoredMulticast=({new$:e,stored$:t,logger:r,storedFilterfn:s=()=>true,logStringfn:a=()=>"",groupByFn:i})=>(0,T.merge)(e.pipe((0,E.map)(e=>e)),t.pipe((0,h.tap)(e=>r.debug(a(e))),(0,E.map)(e=>e.filter(s)),(0,n.mergeMap)(e=>(0,d.from)(e)))).pipe((0,eE.groupBy)(i),(0,E.map)(e=>e.pipe((0,R.share)())),(0,R.share)());var eA=r("../../node_modules/lodash/chunk.js");var eI=r("../../node_modules/lodash/sortBy.js");const eB=25;const compareTxOrder=(e,t)=>e.blockHeader.slot-t.blockHeader.slot||e.index-t.index;const deduplicateSortedArray=(e,t)=>{if(0===e.length){return[]}const r=[e[0]];for(let s=1;s<e.length;++s)if(!t(e[s],e[s-1]))r.push(e[s]);return r};const allTransactionsByAddresses=async(e,{addresses:t,filterBy:r})=>{const s=eA(t,eB);let a=[];for(const i of s)if("blockRange"===r.type){let o=0;let n=[];do{n=(await e.transactionsByAddresses({addresses:i,blockRange:r.blockRange,pagination:{limit:eB,startAt:o}})).pageResults;o+=eB;a=[...a,...n]}while(n.length>=eB)}else{const d=await e.transactionsByAddresses({addresses:i,pagination:{limit:r.limit,order:"desc",startAt:0}});a=[...a,...d.pageResults.reverse()]}return deduplicateSortedArray(a.sort(compareTxOrder),q.txEquals)};const getLastTransactionsAtBlock=(e,t)=>{const r=[];for(let s=e.length-1;s>=0;--s){const a=e[s];if(a.blockHeader.blockNo===t)r.push(a);else{break}}return r.reverse()};const revertLastBlock=(e,t,r,s,a)=>{const i=[...e];while(i.length>0){const o=i[i.length-1];if(o.blockHeader.blockNo===t){if(-1===s.findIndex(e=>e.id===o.id)){a.debug(`Transaction ${o.id} was rolled back`);r.next(o)}i.pop()}else{break}}return deduplicateSortedArray(i,q.txEquals)};const fetchInitialTransactions=async(e,t,r)=>{const s=await allTransactionsByAddresses(e,{addresses:t,filterBy:{limit:r,type:"tip"}});if(0===s.length){return[]}return s.slice(-1*r)};const findIntersectionAndUpdateTxStore=({chainHistoryProvider:e,historicalTransactionsFetchLimit:t,logger:r,store:s,retryBackoffConfig:a,tipBlockHeight$:i,rollback$:o,localTransactions:n,addresses:d})=>{return(0,Y.pollProvider)({combinator:X.exhaustMap,equals:q.transactionsEquals,logger:r,retryBackoffConfig:a,sample:async()=>{let a=false;while(true){const i=n[n.length-1];i&&r.debug(`Last stored tx: ${null==i?void 0:i.id} block:${null==i?void 0:i.blockHeader.blockNo}`);const c=null==i?void 0:i.blockHeader.blockNo;const l=await (void 0===c?fetchInitialTransactions(e,d,t):allTransactionsByAddresses(e,{addresses:d,filterBy:{blockRange:{lowerBound:c},type:"blockRange"}}));r.debug(`chainHistoryProvider returned ${l.length} transactions`,void 0!==c&&`since block ${c}`);if(void 0===c){if(l.length>0){n=l;s.setAll(l)}return l}if(0===l.length){n=revertLastBlock(n,c,o,l,r);a=true;continue}const u=getLastTransactionsAtBlock(n,c);const f=l.slice(0,u.length);const h=u.length===f.length;const m=h&&u.every((e,t)=>e.id===f[t].id);if(!m){n=revertLastBlock(n,c,o,l,r);a=true;continue}const p=l.length===u.length&&u.every((e,t)=>e.id===l[t].id&&e.blockHeader.slot===l[t].blockHeader.slot);if(p){if(a)s.setAll(n)}else{for(const v of u){const y=l.find(e=>e.id===v.id);if((null==y?void 0:y.blockHeader)&&y.blockHeader.slot!==v.blockHeader.slot)v.blockHeader=y.blockHeader}n=deduplicateSortedArray([...n,...l.slice(u.length)],q.txEquals).slice(-1*t);s.setAll(n)}return n}},trigger$:i})};const createAddressTransactionsProvider=e=>{const{addresses$:t,store:r,logger:s}=e;const a=new $.Subject;const i=r.getAll().pipe((0,R.share)());return{rollback$:a.asObservable(),transactionsSource$:(0,K.concat)(i.pipe((0,h.tap)(e=>{return s.debug(`Stored history transactions count: ${(null==e?void 0:e.length)||0}`)})),(0,v.combineLatest)([t,i.pipe((0,L.defaultIfEmpty)([]))]).pipe((0,W.switchMap)(([t,r])=>findIntersectionAndUpdateTxStore({addresses:t,localTransactions:deduplicateSortedArray([...r].sort(compareTxOrder),q.txEquals),rollback$:a,...e}))))}};const createHistoricalTransactionsTrackerSubject=e=>new U.TrackerSubject(e.pipe((0,E.map)(e=>eI(e,({blockHeader:{blockNo:e}})=>e,({index:e})=>e))));const newTransactions$=e=>e.pipe((0,H.take)(1),(0,E.map)(e=>e.map(({id:e})=>e)),(0,n.mergeMap)(t=>{const r=[...t];return e.pipe((0,E.map)(e=>e.filter(({id:e})=>!r.includes(e))),(0,h.tap)(e=>r.push(...e.map(({id:e})=>e))),(0,n.mergeMap)(e=>(0,K.concat)(...e.map(e=>(0,l.of)(e)))))}));const createTransactionsTracker=({tip$:e,chainHistoryProvider:t,addresses$:r,historicalTransactionsFetchLimit:s,newTransactions:{submitting$:a,pending$:i,signed$:o,failedToSubmit$:c},retryBackoffConfig:u,transactionsHistoryStore:f,inFlightTransactionsStore:m,signedTransactionsStore:v,logger:w,failedFromReemitter$:g},{transactionsSource$:b,rollback$:P}=createAddressTransactionsProvider({addresses$:r,chainHistoryProvider:t,historicalTransactionsFetchLimit:s,logger:(0,eT.contextLogger)(w,"AddressTransactionsProvider"),retryBackoffConfig:u,store:f,tipBlockHeight$:distinctBlock(e)}))=>{const S=a.pipe((0,h.tap)(e=>w.debug(`Got new submitting transaction: ${e.id}`)),(0,R.share)());const C=new U.TrackerSubject(b);const k=createHistoricalTransactionsTrackerSubject(C).pipe((0,h.tap)(e=>{return w.debug(`History transactions count: ${(null==e?void 0:e.length)||0}`)}));const x=newTransactions$(k).pipe((0,R.share)());const[A,I]=(0,eP.partition)(x,e=>eb.isPhase2ValidationErrTx(e));const txOnChain$=e=>(0,T.merge)(k.pipe((0,H.take)(1),(0,n.mergeMap)(e=>(0,d.from)(e))),I).pipe((0,V.filter)(t=>t.id===e.id),(0,H.take)(1),(0,E.map)(t=>({...e,slot:t.blockHeader.slot})),(0,h.tap)(({slot:t})=>w.debug(`Transaction ${e.id} is on-chain in slot ${t}`)));const B=newAndStoredMulticast({groupByFn:({id:e})=>e,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} in flight transactions`},logger:w,new$:S,stored$:m.get(),storedFilterfn:({submittedAt:e})=>!!e});const F=newAndStoredMulticast({groupByFn:({tx:e})=>e.id,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} signed transactions`},logger:w,new$:o,stored$:v.get()});const M=new $.Subject;const D=B.pipe((0,n.mergeMap)(t=>{return t.pipe((0,W.switchMap)(t=>{var r;const s=null===(r=t.body.validityInterval)||void 0===r?void 0:r.invalidHereafter;return(0,eS.race)(A.pipe((0,V.filter)(e=>e.id===t.id),(0,E.map)(()=>({reason:ex.Phase2Validation,...t}))),P.pipe((0,E.map)(e=>e.id),(0,V.filter)(e=>t.body.inputs.some(({txId:t})=>t===e)),(0,E.map)(e=>({error:new Error(`Invalid inputs due to rolled back tx (${e}}). Try to rebuild and resubmit.`),reason:ex.InvalidTransaction,...t}))),c.pipe((0,V.filter)(e=>e.id===t.id)),s?e.pipe((0,V.filter)(({slot:e})=>e>s),(0,E.map)(()=>({reason:ex.Timeout,...t}))):j.NEVER).pipe((0,H.take)(1),(0,Z.takeUntil)(txOnChain$(t)))}))}),(0,eC.mergeWith)(g||y.EMPTY),(0,h.tap)(({id:e,reason:t})=>w.debug(`Transaction ${e} failed`,t))).subscribe(M);const txFailed$=e=>M.pipe((0,V.filter)(t=>t.id===e.id),(0,H.take)(1));const txPending$=t=>i.pipe((0,V.filter)(e=>e.id===t.id),(0,ek.withLatestFrom)(e),(0,E.map)(([e,{slot:r}])=>({submittedAt:r,...t})));const O=new U.TrackerSubject(B.pipe((0,n.mergeMap)(e=>e.pipe((0,W.switchMap)(e=>{const t=(0,eS.race)(txOnChain$(e),txFailed$(e)).pipe((0,E.map)(()=>({op:"remove",tx:e})),(0,R.share)());return(0,T.merge)((0,l.of)({op:"add",tx:e}),t,e.submittedAt?y.EMPTY:txPending$(e).pipe((0,E.map)(e=>({op:"submitted",tx:e})),(0,Z.takeUntil)(t)))}))),(0,ej.scan)((e,t)=>{const r=e.findIndex(e=>e.id===t.tx.id);if("add"===t.op){if(r>=0){return[...e.slice(0,r),t.tx,...e.slice(r+1)]}return[...e,t.tx]}if("remove"===t.op){return[...e.slice(0,r),...e.slice(r+1)]}return[...e.slice(0,r),t.tx,...e.slice(r+1)]},[]),(0,h.tap)(e=>m.set(e)),(0,h.tap)(e=>w.debug(`${e.length} in flight transactions`)),(0,p.startWith)([])));const G=new U.TrackerSubject((0,T.merge)(F.pipe((0,n.mergeMap)(e=>e),(0,E.map)(e=>({op:"add",witnessedTx:e}))),O.pipe((0,n.mergeMap)(e=>e),(0,E.map)(e=>({id:e.id,op:"remove"}))),k.pipe((0,E.map)(e=>({inputs:e.flatMap(e=>e.body.inputs.map(e=>e)),op:"check_inputs"}))),e.pipe((0,E.map)(({slot:e})=>({op:"check_interval",slot:e})))).pipe((0,ej.scan)((e,t)=>{if("add"===t.op){return[...e,t.witnessedTx]}if("remove"===t.op){return e.filter(({tx:e})=>e.id!==t.id)}if("check_interval"===t.op){return e.filter(({tx:{body:{validityInterval:{invalidHereafter:e}={}}}})=>e&&e>t.slot)}if("check_inputs"===t.op){return e.filter(({tx:e})=>{const r=e.body.inputs.some(e=>t.inputs.some(t=>(0,q.txInEquals)(e,t)));return!r})}return e},[]),(0,h.tap)(e=>v.set(e)),(0,p.startWith)([]),(0,_.distinctUntilChanged)(q.signedTxsEquals)));const N=new $.Subject;const K=B.pipe((0,n.mergeMap)(e=>e.pipe((0,W.switchMap)(e=>txOnChain$(e).pipe((0,Z.takeUntil)(txFailed$(e))))))).subscribe(N);return{history$:k,new$:x,outgoing:{failed$:M,inFlight$:O,onChain$:N,pending$:i,signed$:G,submitting$:S},rollback$:P,shutdown:()=>{O.complete();K.unsubscribe();N.complete();D.unsubscribe();M.complete();w.debug("Shutdown")}}};const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;var eF=r("../../node_modules/lodash/pick.js");var eM;(function(e){e[e["store"]=0]="store";e[e["onChain"]=1]="onChain";e[e["submitting"]=2]="submitting"})(eM||(eM={}));const createTransactionReemitter=({transactions:{rollback$:e,outgoing:{onChain$:t,submitting$:r,inFlight$:s}},stores:a,tipSlot$:i,maxInterval:o,genesisParameters$:c,logger:l})=>{const u=(0,T.merge)(a.volatileTransactions.get().pipe((0,h.tap)(e=>l.debug(`Store contains ${e.length} volatile transactions`)),(0,n.mergeMap)(e=>(0,d.from)(e)),(0,E.map)(e=>({source:eM.store,tx:e}))),t.pipe((0,E.map)(e=>({onChain:e,source:eM.onChain}))),r.pipe((0,E.map)(e=>({source:eM.submitting,tx:e})))).pipe((0,n.mergeMap)(e=>c.pipe((0,E.map)(({securityParameter:e,activeSlotsCoefficient:t})=>calculateStabilityWindowSlotsCount({activeSlotsCoefficient:t,securityParameter:e})),(0,E.map)(t=>({sw:t,vt:e})))),(0,ej.scan)((e,{vt:t,sw:r})=>{switch(t.source){case eM.store:e=[...e,t.tx];break;case eM.submitting:e=e.filter(e=>{const r=e.id===t.tx.id;if(r)l.debug(`Transaction ${t.tx.id} is being resubmitted. Remove it from volatiles`);return!r});a.volatileTransactions.set(e);break;case eM.onChain:{const s=t.onChain.slot>r?t.onChain.slot-r:0;l.debug(`Removing stable transactions (slot <= ${s}), from volatiles`);l.debug(`Adding new volatile transaction ${t.onChain.id}`);e=[...e.filter(({slot:e})=>e>s),t.onChain];a.volatileTransactions.set(e);break}}return e},[]));const f=e.pipe((0,V.filter)(e=>!eb.isPhase2ValidationErrTx(e)),(0,ek.withLatestFrom)(u),(0,E.map)(([e,t])=>{const r=t.find(t=>t.id===e.id);if(!r){l.error(`Could not find onChain transaction with id ${e.id} that was rolled back`);return}return r}),(0,V.filter)(b.isNotNil),(0,ek.withLatestFrom)(i),(0,E.map)(([e,t])=>{var r,s;const a=null===(r=e.body)||void 0===r?void 0:null===(s=r.validityInterval)||void 0===s?void 0:s.invalidHereafter;if(a&&t>a){const i={reason:ex.Timeout,...e};l.error(`Rolled back transaction with id ${i.id} is no longer valid`,i.reason);return i}return e}),(0,R.share)());const[m,p]=(0,eP.partition)(f,e=>void 0!==e.reason);const y=a.inFlightTransactions.get().pipe((0,E.map)(e=>e.filter(({submittedAt:e})=>!e)),(0,n.mergeMap)(e=>(0,d.from)(e)),(0,h.tap)(e=>l.debug("Reemitting in-flight tx that was never submitted",e.id)));const _=i.pipe((0,ek.withLatestFrom)(c),(0,E.map)(([e,{slotLength:t}])=>e-o/(1e3*t)));const w=(0,v.combineLatest)([_,s]).pipe((0,n.mergeMap)(([e,t])=>(0,d.from)(t.filter(({submittedAt:t})=>t&&t<e))),(0,h.tap)(e=>l.debug("Reemitting unconfirmed in-flight tx",e.id,"submitted at slot",e.submittedAt)));return{failed$:m,reemit$:(0,T.merge)(p,y,w).pipe((0,E.map)(e=>eF(e,["cbor","body","id","context"])))}};var eR=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/GreedySelection/util.js");var eD=r("../../node_modules/lodash/uniqWith.js");const eO=25;const createUtxoProvider=(e,t,r,s,a)=>t.pipe((0,W.switchMap)(t=>(0,Y.pollProvider)({equals:q.utxoEquals,logger:a,retryBackoffConfig:s,sample:async()=>{let r=new Array;const s=eA(t,eO);for(const a of s)r=[...r,...await e.utxoByAddresses({addresses:a})];return r.sort(eR.sortUtxoByTxIn)},trigger$:r})));const createUtxoTracker=({utxoProvider:e,addresses$:t,stores:r,transactionsInFlight$:s,retryBackoffConfig:a,history$:i,logger:o},{utxoSource$:n=new PersistentCollectionTrackerSubject(()=>createUtxoProvider(e,t,i,a,o),r.utxo),unspendableUtxoSource$:d=new PersistentCollectionTrackerSubject(e=>e.length>0?j.NEVER:(0,K.concat)((0,l.of)([]),j.NEVER),r.unspendableUtxo)}={})=>{const c=(0,v.combineLatest)([n,s,t]).pipe((0,E.map)(([e,t,r])=>[...e.filter(([e])=>{const r=t.some(({body:{inputs:t}})=>t.some(t=>t.txId===e.txId&&t.index===e.index));r&&o.debug("OnChain UTXO is already used in in-flight transaction. Excluding from total$.",e);return!r}),...t.flatMap(({body:{outputs:e},id:s},a)=>e.filter(({address:e},i)=>r.includes(e)&&!t.some(({body:{inputs:e}},t)=>a!==t&&e.some(e=>e.txId===s&&e.index===i))).map(t=>{const r={address:t.address,index:e.indexOf(t),txId:s};o.debug("New UTXO available from in-flight transactions. Including in total$.",r);return[r,t]}))]),(0,E.map)(e=>{const t=eD(e,([e],[t])=>e.txId===t.txId&&e.index===t.index);if(t.length!==e.length)o.debug("Found duplicate UTxO in",e);return t}),(0,_.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,w.shareReplay)(1));const u=(0,v.combineLatest)([c,d]).pipe((0,E.map)(([e,t])=>e.filter(([e])=>{const r=t.some(([t])=>(0,q.txInEquals)(e,t));r&&o.debug("Exclude unspendable UTXO from availble$",e);return!r})),(0,_.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,w.shareReplay)(1));return{available$:u,setUnspendable:async e=>{o.debug("setUnspendable",e);d.next(e)},shutdown:()=>{n.complete();d.complete();o.debug("Shutdown")},total$:c,unspendable$:(0,v.combineLatest)([d,c]).pipe((0,E.map)(([e,t])=>e.filter(([e])=>t.some(([t])=>(0,q.txInEquals)(t,e)))),(0,_.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,w.shareReplay)(1))}};var eG=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var eN=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var eH=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var eK=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js");var eV=r("../../node_modules/lodash/isEqual.js");const affectsRewardAccount=e=>{return t=>{var r,s;const a=eH.RewardAccount.toHash(e);const i=eG.stakeKeyCertificates(t.body.certificates).some(e=>e.stakeCredential.hash===a);const o=i||(null===(r=t.body.certificates)||void 0===r?void 0:r.some(t=>{var r;return(t.__typename===eG.CertificateType.MIR||t.__typename===eG.CertificateType.StakeDelegation||t.__typename===eG.CertificateType.StakeVoteDelegation||t.__typename===eG.CertificateType.VoteDelegation)&&(null===(r=t.stakeCredential)||void 0===r?void 0:r.hash)===a||t.__typename===eG.CertificateType.PoolRegistration&&t.poolParameters.rewardAccount===e||t.__typename===eG.CertificateType.PoolRetirement||(t.__typename===eG.CertificateType.RegisterDelegateRepresentative||t.__typename===eG.CertificateType.UnregisterDelegateRepresentative)&&t.dRepCredential.hash===a||t.__typename===eG.CertificateType.StakeVoteDelegation&&t.stakeCredential.hash===a}));return o||(null===(s=t.body.withdrawals)||void 0===s?void 0:s.some(t=>t.stakeAddress===e))||false}};const createRewardAccountInfoProvider=({epoch$:e,externalTrigger$:t,rewardAccountInfoProvider:r,retryBackoffConfig:s,logger:a})=>i=>(0,Y.pollProvider)({equals:eV,logger:a,retryBackoffConfig:s,sample:async()=>r.rewardAccountInfo(i,await (0,ep.firstValueFrom)(e)),trigger$:(0,T.merge)(e,t)});const nextRewardBalance=(e,t)=>{const r=t.some(t=>{var r;return null===(r=t.body.withdrawals)||void 0===r?void 0:r.some(t=>t.stakeAddress===e)});return r?0n:null};const nextDeposit=(e,t,r)=>{const s=eH.RewardAccount.toHash(e);for(let a=t.length-1;a>=0;a--){const i=t[a].body.certificates||[];for(let o=i.length-1;o>=0;o--){const n=i[o];if(n.__typename===eG.CertificateType.StakeDeregistration&&n.stakeCredential.hash===s){return 0n}if((n.__typename===eG.CertificateType.StakeRegistration||n.__typename===eG.CertificateType.StakeRegistrationDelegation||n.__typename===eG.CertificateType.StakeVoteRegistrationDelegation)&&n.stakeCredential.hash===s){return r}}}return null};const createRewardAccountsTracker=({rewardAccountAddresses$:e,rewardAccountInfoProvider:t,store:r,newTransaction$:s,protocolParameters$:a,transactionsInFlight$:i})=>e.pipe((0,W.switchMap)(e=>(0,v.combineLatest)(e.map(e=>(0,K.concat)(r.getValues([e]).pipe((0,n.mergeMap)(e=>e.length>0?(0,l.of)(e[0]):y.EMPTY)),s.pipe((0,V.filter)(affectsRewardAccount(e)),(0,p.startWith)(null)).pipe((0,W.switchMap)(()=>t(e).pipe((0,h.tap)(t=>r.setValue(e,t).subscribe()),(0,eK.blockingWithLatestFrom)(a),(0,W.switchMap)(([t,{stakeKeyDeposit:r}])=>i.pipe((0,E.map)(s=>{if(0===s.length)return t;const a=nextDeposit(e,s,BigInt(r));var i;return{...t,credentialStatus:"bigint"==typeof a?a>0n?eN.StakeCredentialStatus.Registering:eN.StakeCredentialStatus.Unregistering:t.credentialStatus,deposit:null!=a?a:t.deposit,rewardBalance:null!==(i=nextRewardBalance(e,s))&&void 0!==i?i:t.rewardBalance}}))))))).pipe((0,_.distinctUntilChanged)(eV))))));var eW=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var ez=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var eU=r("../../node_modules/lodash/flatten.js");const sumRewards=e=>eW.BigIntMath.sum(e.map(({rewards:e})=>e));const avgReward=e=>sumRewards(e)/BigInt(e.length);const createRewardsHistoryProvider=(e,t)=>(r,s,a,i)=>{if(s){return(0,Y.pollProvider)({logger:i,retryBackoffConfig:t,sample:()=>e.rewardsHistory({epochs:{lowerBound:s},rewardAccounts:r}),trigger$:a})}e.setStatInitialized(e.stats.rewardsHistory$);return(0,l.of)(new Map)};const createRewardsHistoryTracker=(e,t,r,s,a)=>e.pipe((0,h.tap)(e=>a.debug(`Fetching rewards for ${e.length} accounts`)),(0,W.switchMap)(e=>(0,K.concat)(s.getValues(e).pipe((0,E.map)(t=>new Map(e.map((e,r)=>[e,t[r]])))),r(e,ez.EpochNo(1),t,a).pipe((0,h.tap)(e=>s.setAll([...e.entries()].map(([e,t])=>({key:e,value:t})))))))).pipe((0,E.map)(e=>{const t=eI(eU([...e.values()]),"epoch");if(0===t.length){a.debug("No rewards found");return{all:[],avgReward:null,lastReward:null,lifetimeRewards:0n}}const r={all:t,avgReward:avgReward(t),lastReward:t[t.length-1],lifetimeRewards:sumRewards(t)};a.debug(`Rewards between epochs ${r.all[0].epoch} and ${r.all[r.all.length-1].epoch}`,`average:${r.avgReward}`,`lastRewards:${r.lastReward}`,`lifetimeRewards:${r.lifetimeRewards}`);return r}));var e$=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");var eL=r("../../node_modules/rxjs/dist/esm5/internal/observable/iif.js");var eq=r("../../node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js");var eY=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");const eQ=(0,E.map)(e=>(0,eY.coalesceValueQuantities)(e.map(([e,t])=>t.value)));const computeDepositCoin=(e,t)=>(0,v.combineLatest)([t,e]).pipe((0,E.map)(([e,{stakeKeyDeposit:t}])=>BigInt(e*t)),(0,_.distinctUntilChanged)());const numRewardAccountsWithKeyStatus=(e,t)=>e.rewardAccounts$.pipe((0,E.map)(e=>e.filter(e=>t.includes(e.credentialStatus)).length));const createBalanceTracker=(e,t,r)=>({rewardAccounts:{deposit$:computeDepositCoin(e,numRewardAccountsWithKeyStatus(r,[eN.StakeCredentialStatus.Registered,eN.StakeCredentialStatus.Registering])),rewards$:r.rewardAccounts$.pipe((0,E.map)(e=>e.reduce((e,{rewardBalance:t})=>e+t,0n)),(0,_.distinctUntilChanged)())},utxo:{available$:t.available$.pipe(eQ),total$:t.total$.pipe(eQ),unspendable$:t.unspendable$.pipe(eQ)}});const filterUtxosByAddress=e=>{return t=>{return t.pipe((0,E.map)(t=>{return t.filter(([,t])=>{return!(null==e?void 0:e.length)||e.includes(t.address)})}))}};const createUtxoBalanceByAddressTracker=(e,t)=>({utxo:{available$:e.available$.pipe(filterUtxosByAddress(t),(0,_.distinctUntilChanged)(q.utxoEquals),eQ),total$:e.total$.pipe(filterUtxosByAddress(t),(0,_.distinctUntilChanged)(q.utxoEquals),eQ),unspendable$:e.unspendable$.pipe(filterUtxosByAddress(t),(0,_.distinctUntilChanged)(q.utxoEquals),eQ)}});var eJ=r("../../node_modules/lodash/groupBy.js");var eX=r("../../node_modules/lodash/map.js");const createDelegationDistributionTracker=({rewardAccounts$:e,knownAddresses$:t,utxoTracker:r})=>{const s=createUtxoBalanceByAddressTracker(r);const a=e.pipe((0,E.map)(e=>{return e.filter(e=>{var t;return e.credentialStatus===eN.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)})}));const i=a.pipe((0,ek.withLatestFrom)(t),(0,E.map)(([e,t])=>e.map(e=>{const s=t.filter(t=>t.rewardAccount===e.address);return{balance:createUtxoBalanceByAddressTracker(r,s.map(({address:e})=>e)),delegatedAccount:e,groupedAddresses:s}})));return i.pipe((0,W.switchMap)(e=>(0,eL.iif)(()=>0===e.length,(0,l.of)([]),(0,v.combineLatest)(e.map(e=>e.balance.utxo.total$.pipe((0,E.map)(t=>({percentage:(0,e$.Percent)(0),pool:e.delegatedAccount.delegatee.nextNextEpoch,rewardAccounts:[e.delegatedAccount.address],stake:t.coins+e.delegatedAccount.rewardBalance}))))))),(0,E.map)(e=>eX(eJ(e,({pool:{id:e}})=>e),e=>e.reduce((e,t)=>({...t,rewardAccounts:[...new Set([...e.rewardAccounts,...t.rewardAccounts])],stake:t.stake+e.stake||0n})))),(0,eq.combineLatestWith)(s.utxo.total$,e.pipe((0,E.map)(e=>eW.BigIntMath.sum(e.map(({rewardBalance:e})=>e))))),(0,E.map)(([e,t,r])=>{const s=t.coins+r;const a=(0,e$.calcPercentages)(e.map(({stake:e})=>Number(e)),Number(s));return e.map((e,t)=>({...e,percentage:a[t]}))}),(0,_.distinctUntilChanged)((e,t)=>(0,g.sameArrayItems)(e,t,q.delegatedStakeEquals)),(0,E.map)(e=>new Map(e.map(e=>[e.pool.id,e]))))};const createDelegationPortfolioProvider=({rewardAccountInfoProvider:e,retryBackoffConfig:t,logger:r})=>s=>(0,Y.pollProvider)({logger:r,retryBackoffConfig:t,sample:()=>e.delegationPortfolio(s)});const hasDelegationCert=e=>!!e&&e.some(e=>eG.isCertType(e,[...eG.RegAndDeregCertificateTypes,...eG.StakeDelegationCertificateTypes]));const findDelegationPortfolioMetadata=()=>{return e=>{return e.pipe((0,E.map)(e=>{const t=[...e].reverse();let r;for(const s of t){var a,i;const o=null===(a=s.auxiliaryData)||void 0===a?void 0:null===(i=a.blob)||void 0===i?void 0:i.get(eN.DelegationMetadataLabel);const n=hasDelegationCert(s.body.certificates);if(!!o||!!n){if(n&&!o){r=null;break}if(o){r=eN.cip17FromMetadatum(o);break}}}return r}))}};const delegationTransactionFound=e=>void 0!==e;const createDelegationPortfolioTracker=(e,t,r,s,a)=>{const storageSet=e=>e?a.set(e).subscribe():a.delete().subscribe();return(0,v.combineLatest)([a.get().pipe((0,L.defaultIfEmpty)(null)),e]).pipe((0,W.switchMap)(([e,a])=>{if(a.length<=1){if(e)storageSet(null);return(0,l.of)(null)}const i=t.pipe(findDelegationPortfolioMetadata(),(0,H.take)(1));const o=r.pipe((0,E.map)(e=>[e]),findDelegationPortfolioMetadata(),(0,V.filter)(delegationTransactionFound),(0,h.tap)(storageSet));if(e){return(0,K.concat)((0,l.of)(e),i.pipe((0,V.filter)(delegationTransactionFound)),o)}return(0,K.concat)(i.pipe((0,n.mergeMap)(e=>{if(delegationTransactionFound(e)){return(0,l.of)(e)}return t.pipe((0,H.take)(1),(0,n.mergeMap)(e=>{if(0===e.length){return(0,l.of)(null)}return s(a[0]).pipe((0,H.take)(1))}))}),(0,h.tap)(storageSet)),o)}),(0,_.distinctUntilChanged)(g.deepEquals))};const createDelegationTracker=({rewardAccountAddresses$:e,epoch$:t,rewardsTracker:r,retryBackoffConfig:s,transactionsTracker:a,rewardAccountInfoProvider:i,knownAddresses$:o,refetchRewardAccountInfo$:n,protocolParameters$:d,utxoTracker:c,stores:l,logger:u,internals:{rewardsHistoryProvider:f=createRewardsHistoryProvider(r,s),observableRewardAccountInfoProvider:h=createRewardAccountInfoProvider({epoch$:t,externalTrigger$:n,logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:i}),delegationPortfolioProvider:m=createDelegationPortfolioProvider({logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:i})}={}})=>{const p=new U.TrackerSubject(createRewardsHistoryTracker(e,t,f,l.rewardsHistory,(0,eT.contextLogger)(u,"rewardsHistory$")));const v=new U.TrackerSubject(createDelegationPortfolioTracker(e,a.history$,a.new$,m,l.delegationPortfolio));const y=new U.TrackerSubject(createRewardAccountsTracker({newTransaction$:a.new$,protocolParameters$:d,rewardAccountAddresses$:e,rewardAccountInfoProvider:h,store:l.rewardAccountInfo,transactionsInFlight$:a.outgoing.inFlight$}));const _=new U.TrackerSubject(createDelegationDistributionTracker({knownAddresses$:o,rewardAccounts$:y,utxoTracker:c}));return{distribution$:_,portfolio$:v,rewardAccounts$:y,rewardsHistory$:p,shutdown:()=>{y.complete();p.complete();v.complete();u.debug("Shutdown")}}};var eZ=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,e0=Math.ceil,e1=Math.floor,e2="[BigNumber Error] ",e3=e2+"Number primitive has more than 15 significant digits: ",e5=1e14,e9=14,e6=9007199254740991,e4=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],e8=1e7,e7=1e9;function clone(e){var t,r,s,a=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},i=new BigNumber(1),o=20,n=4,d=-7,c=21,l=-1e7,u=1e7,f=false,h=1,m=0,p={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",y=true;function BigNumber(e,t){var a,i,d,c,f,h,m,p,_=this;if(!(_ instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){_.s=e.s;if(!e.c||e.e>u)_.c=_.e=null;else if(e.e<l)_.c=[_.e=0];else{_.e=e.e;_.c=e.c.slice()}return}if((h="number"==typeof e)&&0*e==0){_.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,f=e;f>=10;f/=10,c++);if(c>u)_.c=_.e=null;else{_.e=c;_.c=[e]}return}p=String(e)}else{if(!eZ.test(p=String(e)))return s(_,p,h);_.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}if((c=p.indexOf("."))>-1)p=p.replace(".","");if((f=p.search(/e/i))>0){if(c<0)c=f;c+=+p.slice(f+1);p=p.substring(0,f)}else if(c<0)c=p.length}else{intCheck(t,2,v.length,"Base");if(10==t&&y){_=new BigNumber(e);return round(_,o+_.e+1,n)}p=String(e);if(h="number"==typeof e){if(0*e!=0)return s(_,p,h,t);_.s=1/e<0?(p=p.slice(1),-1):1;if(BigNumber.DEBUG&&p.replace(/^0\.0*|\./,"").length>15){throw Error(e3+e)}}else{_.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1}a=v.slice(0,t);c=f=0;for(m=p.length;f<m;f++)if(a.indexOf(i=p.charAt(f))<0){if("."==i){if(f>c){c=m;continue}}else if(!d){if(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase())){d=true;f=-1;c=0;continue}}return s(_,String(e),h,t)}h=false;p=r(p,t,10,_.s);if((c=p.indexOf("."))>-1)p=p.replace(".","");else c=p.length}for(f=0;48===p.charCodeAt(f);f++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(f,++m)){m-=f;if(h&&BigNumber.DEBUG&&m>15&&(e>e6||e!==e1(e))){throw Error(e3+_.s*e)}if((c=c-f-1)>u)_.c=_.e=null;else if(c<l)_.c=[_.e=0];else{_.e=c;_.c=[];f=(c+1)%e9;if(c<0)f+=e9;if(f<m){if(f)_.c.push(+p.slice(0,f));for(m-=e9;f<m;)_.c.push(+p.slice(f,f+=e9));f=e9-(p=p.slice(f)).length}else{f-=m}for(;f--;p+="0");_.c.push(+p)}}else{_.c=[_.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,e7,t);o=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);n=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-e7,0,t);intCheck(r[1],0,e7,t);d=r[0];c=r[1]}else{intCheck(r,-e7,e7,t);d=-(c=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-e7,-1,t);intCheck(r[1],1,e7,t);l=r[0];u=r[1]}else{intCheck(r,-e7,e7,t);if(r)l=-(u=r<0?-r:r);else{throw Error(e2+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=r;else{f=!r;throw Error(e2+"crypto unavailable")}else f=r;else{throw Error(e2+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);h=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,e7,t);m=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)p=r;else throw Error(e2+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(e2+t+" invalid: "+r)}y="0123456789"==r.slice(0,10);v=r}}else{throw Error(e2+"Object expected: "+e)}return{DECIMAL_PLACES:o,ROUNDING_MODE:n,EXPONENTIAL_AT:[d,c],RANGE:[l,u],CRYPTO:f,MODULO_MODE:h,POW_PRECISION:m,FORMAT:p,ALPHABET:v}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,a=e.e,i=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===i||-1===i)&&a>=-e7&&a<=e7&&a===e1(a)){if(0===s[0]){if(0===a&&1===s.length)return true;break e}t=(a+1)%e9;if(t<1)t+=e9;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=e5||r!==e1(r))break e}if(0!==r)return true}}}else if(null===s&&null===a&&(null===i||1===i||-1===i)){return true}throw Error(e2+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,a.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,a.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return e1(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,a,n,d,c=0,l=[],u=new BigNumber(i);if(null==e)e=o;else intCheck(e,0,e7);n=e0(e/e9);if(f)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(n*=2));for(;c<n;){d=131072*r[c]+(r[c+1]>>>11);if(d>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[c]=s[0];r[c+1]=s[1]}else{l.push(d%1e14);c+=2}}c=n/2}else if(crypto.randomBytes){r=crypto.randomBytes(n*=7);for(;c<n;){d=(31&r[c])*281474976710656+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6];if(d>=9e15)crypto.randomBytes(7).copy(r,c);else{l.push(d%1e14);c+=7}}c=n/7}else{f=false;throw Error(e2+"crypto unavailable")}if(!f){for(;c<n;){d=t();if(d<9e15)l[c++]=d%1e14}}n=l[--c];e%=e9;if(n&&e){d=e4[e9-e];l[c]=e1(n/d)*d}for(;0===l[c];l.pop(),c--);if(c<0)l=[a=0];else{for(a=-1;0===l[0];l.splice(0,1),a-=e9);for(c=1,d=l[0];d>=10;d/=10,c++);if(c<e9)a-=e9-c}u.e=a;u.c=l;return u}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var a,i=[0],o,n=0,d=e.length;for(;n<d;){for(o=i.length;o--;i[o]*=t);i[0]+=s.indexOf(e.charAt(n++));for(a=0;a<i.length;a++)if(i[a]>r-1){if(null==i[a+1])i[a+1]=0;i[a+1]+=i[a]/r|0;i[a]%=r}}return i.reverse()}return function(r,s,a,i,d){var c,l,u,f,h,p,y,_,w=r.indexOf("."),g=o,b=n;if(w>=0){f=m;m=0;r=r.replace(".","");_=new BigNumber(s);p=_.pow(r.length-w);m=f;_.c=toBaseOut(toFixedPoint(coeffToString(p.c),p.e,"0"),10,a,e);_.e=_.c.length}y=toBaseOut(r,s,a,d?(c=v,e):(c=e,v));u=f=y.length;for(;0==y[--f];y.pop());if(!y[0])return c.charAt(0);if(w<0)--u;else{p.c=y;p.e=u;p.s=i;p=t(p,_,g,b,a);y=p.c;h=p.r;u=p.e}l=u+g+1;w=y[l];f=a/2;h=h||l<0||null!=y[l+1];h=b<4?(null!=w||h)&&(0==b||b==(p.s<0?3:2)):w>f||w==f&&(4==b||h||6==b&&1&y[l-1]||b==(p.s<0?8:7));if(l<1||!y[0])r=h?toFixedPoint(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{y.length=l;if(h){for(--a;++y[--l]>a;){y[l]=0;if(!l){++u;y=[1].concat(y)}}}for(f=y.length;!y[--f];);for(w=0,r="";w<=f;r+=c.charAt(y[w++]));r=toFixedPoint(r,u,c.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,a,i,o,n=0,d=e.length,c=t%e8,l=t/e8|0;for(e=e.slice();d--;){i=e[d]%e8;o=e[d]/e8|0;s=l*i+o*c;a=c*i+s%e8*e8+n;n=(a/r|0)+(s/e8|0)+l*o;e[d]=a%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var a,i;if(r!=s)i=r>s?1:-1;else{for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}}return i}function subtract(e,t,r,s){var a=0;for(;r--;){e[r]-=a;a=e[r]<t[r]?1:0;e[r]=a*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,a){var i,o,n,d,c,l,u,f,h,m,p,v,y,_,w,g,b,P=e.s==t.s?1:-1,S=e.c,C=t.c;if(!S||!S[0]||!C||!C[0]){return new BigNumber(e.s&&t.s&&(S?!C||S[0]!=C[0]:C)?S&&0==S[0]||!C?0*P:P/0:NaN)}f=new BigNumber(P);h=f.c=[];o=e.e-t.e;P=r+o+1;if(!a){a=e5;o=bitFloor(e.e/e9)-bitFloor(t.e/e9);P=P/e9|0}for(n=0;C[n]==(S[n]||0);n++);if(C[n]>(S[n]||0))o--;if(P<0){h.push(1);d=true}else{_=S.length;g=C.length;n=0;P+=2;c=e1(a/(C[0]+1));if(c>1){C=multiply(C,c,a);S=multiply(S,c,a);g=C.length;_=S.length}y=g;m=S.slice(0,g);p=m.length;for(;p<g;m[p++]=0);b=C.slice();b=[0].concat(b);w=C[0];if(C[1]>=a/2)w++;do{c=0;i=compare(C,m,g,p);if(i<0){v=m[0];if(g!=p)v=v*a+(m[1]||0);c=e1(v/w);if(c>1){if(c>=a)c=a-1;l=multiply(C,c,a);u=l.length;p=m.length;while(1==compare(l,m,u,p)){c--;subtract(l,g<u?b:C,u,a);u=l.length;i=1}}else{if(0==c)i=c=1;l=C.slice();u=l.length}if(u<p)l=[0].concat(l);subtract(m,l,p,a);p=m.length;if(-1==i){while(compare(C,m,g,p)<1){c++;subtract(m,g<p?b:C,p,a);p=m.length}}}else if(0===i){c++;m=[0]}h[n++]=c;if(m[0])m[p++]=S[y]||0;else{m=[S[y]];p=1}}while((y++<_||null!=m[0])&&P--)d=null!=m[0];if(!h[0])h.splice(0,1)}if(a==e5){for(n=1,P=h[0];P>=10;P/=10,n++);round(f,r+(f.e=n+o*e9-1)+1,s,d)}else{f.e=o;f.r=+d}return f}}();function format(e,t,r,s){var a,i,o,l,u;if(null==r)r=n;else intCheck(r,0,8);if(!e.c)return e.toString();a=e.c[0];o=e.e;if(null==t){u=coeffToString(e.c);u=1==s||2==s&&(o<=d||o>=c)?toExponential(u,o):toFixedPoint(u,o,"0")}else{e=round(new BigNumber(e),t,r);i=e.e;u=coeffToString(e.c);l=u.length;if(1==s||2==s&&(t<=i||i<=d)){for(;l<t;u+="0",l++);u=toExponential(u,i)}else{t-=o;u=toFixedPoint(u,i,"0");if(i+1>l){if(--t>0)for(u+=".";t--;u+="0");}else{t+=i-l;if(t>0){if(i+1==l)u+=".";for(;t--;u+="0");}}}}return e.s<0&&a?"-"+u:u}function maxOrMin(e,t){var r,s=1,a=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(a,r))a=r}else{a=r;break}}return a}function normalise(e,t,r){var s=1,a=t.length;for(;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,s++);if((r=s+r*e9-1)>u)e.c=e.e=null;else if(r<l)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,o,n,d){var c,l=n?o:o.replace(a,"");if(s.test(l))i.s=isNaN(l)?null:l<0?-1:1;else{if(!n){l=l.replace(e,function(e,t,r){c="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=c?e:t});if(d){c=d;l=l.replace(t,"$1").replace(r,"0.$1")}if(o!=l)return new BigNumber(l,c)}if(BigNumber.DEBUG){throw Error(e2+"Not a"+(d?" base "+d:"")+" number: "+o)}i.s=null}i.c=i.e=null}}();function round(e,t,r,s){var a,i,o,n,d,c,f,h=e.c,m=e4;if(h){e:{for(a=1,n=h[0];n>=10;n/=10,a++);i=t-a;if(i<0){i+=e9;o=t;d=h[c=0];f=d/m[a-o-1]%10|0}else{c=e0((i+1)/e9);if(c>=h.length)if(s){for(;h.length<=c;h.push(0));d=f=0;a=1;i%=e9;o=i-e9+1}else{break e}else{d=n=h[c];for(a=1;n>=10;n/=10,a++);i%=e9;o=i-e9+a;f=o<0?0:d/m[a-o-1]%10|0}}s=s||t<0||null!=h[c+1]||(o<0?d:d%m[a-o-1]);s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(i>0?o>0?d/m[a-o]:0:h[c-1])%10&1||r==(e.s<0?8:7));if(t<1||!h[0]){h.length=0;if(s){t-=e.e+1;h[0]=m[(e9-t%e9)%e9];e.e=-t||0}else{h[0]=e.e=0}return e}if(0==i){h.length=c;n=1;c--}else{h.length=c+1;n=m[e9-i];h[c]=o>0?e1(d/m[a-o]%m[o])*n:0}if(s){for(;;){if(0==c){for(i=1,o=h[0];o>=10;o/=10,i++);o=h[0]+=n;for(n=1;o>=10;o/=10,n++);if(i!=n){e.e++;if(h[0]==e5)h[0]=1}break}h[c]+=n;if(h[c]!=e5)break;h[c--]=0;n=1}}for(i=h.length;0===h[--i];h.pop());}if(e.e>u)e.c=e.e=null;else if(e.e<l)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=d||r>=c?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}a.absoluteValue=a.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};a.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};a.decimalPlaces=a.dp=function(e,t){var r,s,a,i=this;if(null!=e){intCheck(e,0,e7);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(i),e+i.e+1,t)}if(!(r=i.c))return null;s=((a=r.length-1)-bitFloor(this.e/e9))*e9;if(a=r[a])for(;a%10==0;a/=10,s--);if(s<0)s=0;return s};a.dividedBy=a.div=function(e,r){return t(this,new BigNumber(e,r),o,n)};a.dividedToIntegerBy=a.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};a.exponentiatedBy=a.pow=function(e,t){var r,s,a,o,d,c,l,u,f,h=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(e2+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);c=e.e>14;if(!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0]){f=new BigNumber(Math.pow(+valueOf(h),c?e.s*(2-isOdd(e)):+valueOf(e)));return t?f.mod(t):f}l=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!l&&h.isInteger()&&t.isInteger();if(s)h=h.mod(t)}else if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||c&&h.c[1]>=24e7:h.c[0]<8e13||c&&h.c[0]<=9999975e7))){o=(h.s<0&&isOdd(e),-0);if(h.e>-1)o=1/o;return new BigNumber(l?1/o:o)}else if(m)o=e0(m/e9+2);if(c){r=new BigNumber(.5);if(l)e.s=1;u=isOdd(e)}else{a=Math.abs(+valueOf(e));u=a%2}f=new BigNumber(i);for(;;){if(u){f=f.times(h);if(!f.c)break;if(o){if(f.c.length>o)f.c.length=o}else if(s)f=f.mod(t)}if(a){a=e1(a/2);if(0===a)break;u=a%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)u=isOdd(e);else{a=+valueOf(e);if(0===a)break;u=a%2}}h=h.times(h);if(o){if(h.c&&h.c.length>o)h.c.length=o}else if(s)h=h.mod(t)}if(s)return f;if(l)f=i.div(f);return t?f.mod(t):o?round(f,m,n,d):f};a.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=n;else intCheck(e,0,8);return round(t,t.e+1,e)};a.isEqualTo=a.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};a.isFinite=function(){return!!this.c};a.isGreaterThan=a.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isInteger=function(){return!!this.c&&bitFloor(this.e/e9)>this.c.length-2};a.isLessThan=a.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};a.isLessThanOrEqualTo=a.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};a.isNaN=function(){return!this.s};a.isNegative=function(){return this.s<0};a.isPositive=function(){return this.s>0};a.isZero=function(){return!!this.c&&0==this.c[0]};a.minus=function(e,t){var r,s,a,i,o=this,d=o.s;e=new BigNumber(e,t);t=e.s;if(!d||!t)return new BigNumber(NaN);if(d!=t){e.s=-t;return o.plus(e)}var c=o.e/e9,l=e.e/e9,u=o.c,f=e.c;if(!c||!l){if(!u||!f)return u?(e.s=-t,e):new BigNumber(f?o:NaN);if(!u[0]||!f[0]){return f[0]?(e.s=-t,e):new BigNumber(u[0]?o:-0)}}c=bitFloor(c);l=bitFloor(l);u=u.slice();if(d=c-l){if(i=d<0){d=-d;a=u}else{l=c;a=f}a.reverse();for(t=d;t--;a.push(0));a.reverse()}else{s=(i=(d=u.length)<(t=f.length))?d:t;for(d=t=0;t<s;t++)if(u[t]!=f[t]){i=u[t]<f[t];break}}if(i)a=u,u=f,f=a,e.s=-e.s;t=(s=f.length)-(r=u.length);if(t>0)for(;t--;u[r++]=0);t=e5-1;for(;s>d;){if(u[--s]<f[s]){for(r=s;r&&!u[--r];u[r]=t);--u[r];u[s]+=e5}u[s]-=f[s]}for(;0==u[0];u.splice(0,1),--l);if(!u[0]){e.s=3==n?-1:1;e.c=[e.e=0];return e}return normalise(e,u,l)};a.modulo=a.mod=function(e,r){var s,a,i=this;e=new BigNumber(e,r);if(i.c&&e.s&&(!e.c||e.c[0])){if(!e.c||i.c&&!i.c[0]){return new BigNumber(i)}}else{return new BigNumber(NaN)}if(9==h){a=e.s;e.s=1;s=t(i,e,0,3);e.s=a;s.s*=a}else{s=t(i,e,0,h)}e=i.minus(s.times(e));if(!e.c[0]&&1==h)e.s=i.s;return e};a.multipliedBy=a.times=function(e,t){var r,s,a,i,o,n,d,c,l,u,f,h,m,p,v,y=this,_=y.c,w=(e=new BigNumber(e,t)).c;if(!_||!w||!_[0]||!w[0]){if(y.s&&e.s&&(!_||_[0]||w)&&(!w||w[0]||_)){e.s*=y.s;if(_&&w){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(y.e/e9)+bitFloor(e.e/e9);e.s*=y.s;d=_.length;u=w.length;if(d<u)m=_,_=w,w=m,a=d,d=u,u=a;for(a=d+u,m=[];a--;m.push(0));p=e5;v=e8;for(a=u;--a>=0;){r=0;f=w[a]%v;h=w[a]/v|0;for(o=d,i=a+o;i>a;){c=_[--o]%v;l=_[o]/v|0;n=h*c+l*f;c=f*c+n%v*v+m[i]+r;r=(c/p|0)+(n/v|0)+h*l;m[i--]=c%p}m[i]=r}if(r)++s;else m.splice(0,1);return normalise(e,m,s)};a.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};a.plus=function(e,t){var r,s=this,a=s.s;e=new BigNumber(e,t);t=e.s;if(!a||!t)return new BigNumber(NaN);if(a!=t){e.s=-t;return s.minus(e)}var i=s.e/e9,o=e.e/e9,n=s.c,d=e.c;if(!i||!o){if(!n||!d)return new BigNumber(a/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*a)}i=bitFloor(i);o=bitFloor(o);n=n.slice();if(a=i-o){if(a>0){o=i;r=d}else{a=-a;r=n}r.reverse();for(;a--;r.push(0));r.reverse()}a=n.length;t=d.length;if(a-t<0)r=d,d=n,n=r,t=a;for(a=0;t;){a=(n[--t]=n[t]+d[t]+a)/e5|0;n[t]=e5===n[t]?0:n[t]%e5}if(a){n=[a].concat(n);++o}return normalise(e,n,o)};a.precision=a.sd=function(e,t){var r,s,a,i=this;if(null!=e&&!!e!==e){intCheck(e,1,e7);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(i),e,t)}if(!(r=i.c))return null;a=r.length-1;s=a*e9+1;if(a=r[a]){for(;a%10==0;a/=10,s--);for(a=r[0];a>=10;a/=10,s++);}if(e&&i.e+1>s)s=i.e+1;return s};a.shiftedBy=function(e){intCheck(e,-e6,e6);return this.times("1e"+e)};a.squareRoot=a.sqrt=function(){var e,r,s,a,i,d=this,c=d.c,l=d.s,u=d.e,f=o+4,h=new BigNumber("0.5");if(1!==l||!c||!c[0]){return new BigNumber(!l||l<0&&(!c||c[0])?NaN:c?d:1/0)}l=Math.sqrt(+valueOf(d));if(0==l||l==1/0){r=coeffToString(c);if((r.length+u)%2==0)r+="0";l=Math.sqrt(+r);u=bitFloor((u+1)/2)-(u<0||u%2);if(l==1/0)r="5e"+u;else{r=l.toExponential();r=r.slice(0,r.indexOf("e")+1)+u}s=new BigNumber(r)}else{s=new BigNumber(l+"")}if(s.c[0]){u=s.e;l=u+f;if(l<3)l=0;for(;;){i=s;s=h.times(i.plus(t(d,i,f,1)));if(coeffToString(i.c).slice(0,l)===(r=coeffToString(s.c)).slice(0,l)){if(s.e<u)--l;r=r.slice(l-3,l+1);if("9999"!=r&&(a||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+o+2,1);e=!s.times(s).eq(d)}break}if(!a){round(i,i.e+o+2,0);if(i.times(i).eq(d)){s=i;break}}f+=4;l+=4;a=1}}}return round(s,s.e+o+1,n,e)};a.toExponential=function(e,t){if(null!=e){intCheck(e,0,e7);e++}return format(this,e,t,1)};a.toFixed=function(e,t){if(null!=e){intCheck(e,0,e7);e=e+this.e+1}return format(this,e,t)};a.toFormat=function(e,t,r){var s,a=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=p}else if("object"!=typeof r){throw Error(e2+"Argument not an object: "+r)}s=a.toFixed(e,t);if(a.c){var i,o=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,c=r.groupSeparator||"",l=o[0],u=o[1],f=a.s<0,h=f?l.slice(1):l,m=h.length;if(d)i=n,n=d,d=i,m-=i;if(n>0&&m>0){i=m%n||n;l=h.substr(0,i);for(;i<m;i+=n)l+=c+h.substr(i,n);if(d>0)l+=c+h.slice(i);if(f)l="-"+l}s=u?l+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?u.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):u):l}return(r.prefix||"")+s+(r.suffix||"")};a.toFraction=function(e){var r,s,a,o,d,c,l,f,h,m,p,v,y=this,_=y.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(i)){throw Error(e2+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!_)return new BigNumber(y);r=new BigNumber(i);h=s=new BigNumber(i);a=f=new BigNumber(i);v=coeffToString(_);d=r.e=v.length-y.e-1;r.c[0]=e4[(c=d%e9)<0?e9+c:c];e=!e||l.comparedTo(r)>0?d>0?r:h:l;c=u;u=1/0;l=new BigNumber(v);f.c[0]=0;for(;;){m=t(l,r,0,1);o=s.plus(m.times(a));if(1==o.comparedTo(e))break;s=a;a=o;h=f.plus(m.times(o=h));f=o;r=l.minus(m.times(o=r));l=o}o=t(e.minus(s),a,0,1);f=f.plus(o.times(h));s=s.plus(o.times(a));f.s=h.s=y.s;d*=2;p=t(h,a,d,n).minus(y).abs().comparedTo(t(f,s,d,n).minus(y).abs())<1?[h,a]:[f,s];u=c;return p};a.toNumber=function(){return+valueOf(this)};a.toPrecision=function(e,t){if(null!=e)intCheck(e,1,e7);return format(this,e,t,2)};a.toString=function(e){var t,s=this,a=s.s,i=s.e;if(null===i)if(a){t="Infinity";if(a<0)t="-"+t}else{t="NaN"}else{if(null==e)t=i<=d||i>=c?toExponential(coeffToString(s.c),i):toFixedPoint(coeffToString(s.c),i,"0");else if(10===e&&y){s=round(new BigNumber(s),o+i+1,n);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,v.length,"Base");t=r(toFixedPoint(coeffToString(s.c),i,"0"),10,e,a,true)}if(a<0&&s.c[0])t="-"+t}return t};a.valueOf=a.toJSON=function(){return valueOf(this)};a._isBigNumber=true;a[Symbol.toStringTag]="BigNumber";a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,a=e.length,i=e[0]+"";for(;s<a;){t=e[s++]+"";r=e9-t.length;for(;r--;t="0"+t);i+=t}for(a=i.length;48===i.charCodeAt(--a););return i.slice(0,a+1||1)}function compare(e,t){var r,s,a=e.c,i=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=a&&!a[0];s=i&&!i[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!a||!i)return s?0:!a^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=a.length)<(c=i.length)?d:c;for(o=0;o<n;o++)if(a[o]!=i[o])return a[o]>i[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==e1(e)){throw Error(e2+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/e9)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else{s=e.length;if(++t>s){for(a=r,t-=s;--t;a+=r);e+=a}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var te=clone();const tt=null;var tr=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var ts=r("../../node_modules/lodash/uniq.js");var DynamicChangeAddressResolver_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var DynamicChangeAddressResolver_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var ta,ti,to,tn;const getBalanceInTxOuts=e=>{let t=0n;for(const r of e)t+=r.value.coins;return t};const getSpentInInputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t[0].address)).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n);const getBalanceFromOutputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t.address)).map(e=>e.value.coins).reduce((e,t)=>e+t,0n);const getSpentFromRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=tr.Address.fromString(t[0].address))||void 0===r?void 0:r.asBase();if(!s)return false;return eH.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n)};const getDepositToRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=tr.Address.fromString(t.address))||void 0===r?void 0:r.asBase();if(!s)return false;return eH.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e.value.coins).reduce((e,t)=>e+t,0n)};const getAddressForRewardAccount=(e,t)=>e.find(e=>e.rewardAccount===t);const createBuckets=(e,t,r,s)=>{const a=new Array;const i=[...e.inputs];const o=[...e.outputs];const n=t.map(e=>e.stake).reduce((e,t)=>e+t,0n);const d=getBalanceInTxOuts(e.change);const c=getSpentInInputs(s,i)+e.fee;const l=getBalanceFromOutputs(s,o)+d;const u=n+l-c;const f=r.pools.map(e=>e.weight).reduce((e,t)=>e+t,0);const h=new Map(r.pools.map(e=>[e.id,e.weight/f]));for(const m of t){if(0===m.rewardAccounts.length)throw new eo.InvalidStateError(`No reward accounts delegating to pool '${m.pool.id}'.`);const p=m.rewardAccounts[0];const v=getAddressForRewardAccount(s,p);if(!v)throw new eo.InvalidStateError(`Reward account '${p}' unknown.`);const y=m.stake-getSpentFromRewardAccount(p,i)+getDepositToRewardAccount(p,o);const _=h.get(m.pool.hexId);if(void 0===_)throw new eo.InvalidStateError(`Pool '${m.pool.id}' not found in the portfolio.`);a.push({address:v.address,capacity:BigInt(new te(u.toString()).multipliedBy(_).toFixed(0,0)),change:new Array,filledAmount:y})}return a};const getBucketGap=e=>{if(0n===e.capacity)return new te("0");const t=new te(e.capacity.toString());const r=new te(e.filledAmount.toString());return t.minus(r).dividedBy(t)};const pickBucket=e=>e.sort((e,t)=>{const r=getBucketGap(e);const s=getBucketGap(t);if(s.isGreaterThan(r)){return 1}if(s.isLessThan(r)){return -1}return 0})[0];const distributeChange=(e,t)=>{const r=[...t];const s=e.sort((e,t)=>{if(e.value.coins>t.value.coins){return 1}if(e.value.coins<t.value.coins){return -1}return 0});while(s.length>0){const a=pickBucket(r);const i=s.splice(0,1)[0];a.change.push(i);a.filledAmount+=i.value.coins}for(const o of r)o.change=o.change.map(e=>{e.address=o.address;return e});return r};const delegationMatchesPortfolio=(e,t)=>{const r=ts(e.pools.map(e=>e.id)).sort();const s=ts(t.map(e=>e.pool.hexId)).sort();return eV(r,s)};class DynamicChangeAddressResolver{async resolve(e){const t=[...(await (0,ep.firstValueFrom)(DynamicChangeAddressResolver_classPrivateFieldGet(this,ti,"f"))).values()];let r=await DynamicChangeAddressResolver_classPrivateFieldGet(this,ta,"f").call(this);const s=sortAddresses(await (0,ep.firstValueFrom)(DynamicChangeAddressResolver_classPrivateFieldGet(this,to,"f")));let a=[...e.change];if(0===s.length)throw new eo.InvalidStateError("The wallet has no known addresses.");if(0===t.length){a=a.map(e=>{e.address=s[0].address;return e});return a}if(1===t.length){if(0===t[0].rewardAccounts.length)throw new eo.InvalidStateError(`No reward accounts delegating to pool '${t[0].pool.id}'.`);const i=s.find(e=>e.rewardAccount===t[0].rewardAccounts[0]);if(!i)throw new eo.InvalidStateError(`Reward account '${t[0].rewardAccounts[0]}' unknown.`);a=a.map(e=>{e.address=i.address;return e});return a}if(!r||!delegationMatchesPortfolio(r,t)){DynamicChangeAddressResolver_classPrivateFieldGet(this,tn,"f").warn("The portfolio doesnt match current wallet delegation.");DynamicChangeAddressResolver_classPrivateFieldGet(this,tn,"f").warn(`Portfolio: ${r}`);const o=t.map(e=>({id:e.pool.hexId,weight:1/t.length}));r={name:"Default Portfolio",pools:o}}const n=createBuckets(e,t,r,s);const d=distributeChange(e.change,n);a=new Array;for(const c of d)a=[...a,...c.change];return a}constructor(e,t,r,s){ta.set(this,void 0);ti.set(this,void 0);to.set(this,void 0);tn.set(this,void 0);DynamicChangeAddressResolver_classPrivateFieldSet(this,ta,r,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,ti,t,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,to,e,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,tn,s,"f")}}ta=new WeakMap,ti=new WeakMap,to=new WeakMap,tn=new WeakMap;var td=r("../../node_modules/rxjs/dist/esm5/internal/operators/connect.js");var tc=r("../../node_modules/rxjs/dist/esm5/internal/operators/buffer.js");var tl=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var tu=r("../../node_modules/rxjs/dist/esm5/internal/operators/ignoreElements.js");const startOnTrigger=(e,t)=>(0,K.concat)(e.pipe((0,H.take)(1),(0,tu.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,l.of)([])}const t=[];let r=e[0].pipe((0,R.share)());t.push(r);for(const s of e.slice(1)){const a=startOnTrigger(r,s);r=a.pipe((0,R.share)());t.push(r)}return(0,v.combineLatest)(t)};const isAssetInfoComplete=e=>void 0!==e.nftMetadata&&void 0!==e.tokenMetadata;const isEveryAssetInfoComplete=e=>e.every(isAssetInfoComplete);const bufferTick=()=>e=>e.pipe((0,td.connect)(e=>e.pipe((0,tc.buffer)(e.pipe((0,G.debounceTime)(1))))));const tf=100;const th=864e5;const tm=7*th;var tp;const isInBalance=(e,t)=>{var r;return null!==(tp=null===(r=t.assets)||void 0===r?void 0:r.has(e))&&void 0!==tp&&tp};const splitCachedAndUncachedAssets=(e,t,r)=>{const s=new Map;const a=[];const i=new Date;for(const o of r){const n=e.get(o);if(!n){a.push(o);continue}const{staleAt:d}=n;const c=!d||new Date(d)<i;const l=!isAssetInfoComplete(n)||isInBalance(o,t)&&c;if(l)a.push(o);else s.set(o,n)}return{cachedAssets:s,uncachedAssetIds:a}};const getAssetsWithCache=async(e,t,r,s,a)=>{const[i,o]=await Promise.all([(0,ep.firstValueFrom)(t),(0,ep.firstValueFrom)(r)]);const{cachedAssets:n,uncachedAssetIds:d}=splitCachedAndUncachedAssets(i,o,e);if(0===d.length){if(!s.stats.getAsset$.value.initialized)s.setStatInitialized(s.stats.getAsset$);return[...n.values()]}const c=await s.getAssets({assetIds:d,extraData:{nftMetadata:true,tokenMetadata:true}});const l=Date.now();const u=c.map(e=>{const t=Math.floor(2*Math.random()*th);return{...e,staleAt:new Date(l+a+t)}});return[...n.values(),...u]};const createAssetService=(e,t,r,s,a,i=tm)=>o=>concatAndCombineLatest(eA(o,tf).map(o=>(0,Y.pollProvider)({logger:a,pollUntil:isEveryAssetInfoComplete,retryBackoffConfig:s,sample:()=>getAssetsWithCache(o,t,r,e,i),trigger$:(0,l.of)(true)}))).pipe((0,E.map)(e=>e.flat()));const uniqueAssetIds=({body:{outputs:e}})=>e.flatMap(({value:{assets:e}})=>e?[...e.keys()]:[]);const flatUniqueAssetIds=e=>ts(e.flatMap(uniqueAssetIds));const createAssetsTracker=({assetProvider:e,assetsCache$:t,transactionsTracker:{history$:r},balanceTracker:{utxo:{total$:s}},retryBackoffConfig:o,logger:n,maxAssetInfoCacheAge:d},{assetService:c=createAssetService(e,t,s,o,n,d)}={})=>{return new tl.Observable(t=>{let o=new Map;const d=new Set;const u=r.pipe((0,R.share)());return(0,K.concat)((0,v.combineLatest)([u.pipe((0,E.map)(e=>ts(e.flatMap(uniqueAssetIds)))),s.pipe((0,E.map)(e=>{var t;return[...(null===(t=e.assets)||void 0===t?void 0:t.keys())||[]]}))]).pipe((0,E.map)(([e,t])=>ts([...e,...t])),(0,h.tap)(e=>n.debug(e.length>0?`Total assets: ${e.length}`:"Setting assetProvider stats as initialized")),(0,h.tap)(t=>0===t.length&&e.setStatInitialized(e.stats.getAsset$)),(0,H.take)(1)),newTransactions$(u).pipe(bufferTick(),(0,E.map)(flatUniqueAssetIds),(0,E.map)(e=>{const t=e.filter(e=>!d.has(e));const r=[...d.values()].filter(e=>{const t=o.get(e);return!t||!isAssetInfoComplete(t)});const s=e.map(e=>{const t=a.AssetId.getAssetName(e);const r=i.AssetNameLabel.decode(t);if((null==r?void 0:r.label)===i.AssetNameLabelNum.ReferenceNFT){return a.AssetId.fromParts(a.AssetId.getPolicyId(e),i.AssetNameLabel.encode(r.content,i.AssetNameLabelNum.UserNFT))}}).filter(b.isNotNil);return ts([...t,...r,...s])}),(0,V.filter)(e=>e.length>0))).pipe((0,h.tap)(e=>{for(const t of e)d.add(t)}),(0,W.switchMap)(e=>e.length>0?c(e):(0,l.of)([])),(0,E.map)(e=>[...[...o.values()].filter(b.isNotNil),...e]),(0,_.distinctUntilChanged)(g.deepEquals),(0,h.tap)(e=>n.debug(`Got metadata for ${e.length} assets`)),(0,E.map)(e=>new Map(e.map(e=>[e.assetId,e]))),(0,h.tap)(e=>o=e)).subscribe(t)})};var tv=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js");var ty=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");const hasOwnDRepCredential=({certificate:e,dRepKeyHash:t})=>"dRepCredential"in e&&e.dRepCredential.type===tr.CredentialType.KeyHash&&e.dRepCredential.hash===ty.Hash28ByteBase16.fromEd25519KeyHashHex(t);const createDRepRegistrationTracker=({historyTransactions$:e,pubDRepKeyHash$:t})=>new U.TrackerSubject(t.pipe((0,W.switchMap)(t=>e.pipe((0,E.map)(e=>{if(!t)return false;const r=[...e].reverse();for(const{body:{certificates:s}}of r)if(s){for(const a of s)if(!!hasOwnDRepCredential({certificate:a,dRepKeyHash:t})){if(a.__typename===eG.CertificateType.UnregisterDelegateRepresentative)return false;if(a.__typename===eG.CertificateType.RegisterDelegateRepresentative)return true}}return false}))),(0,_.distinctUntilChanged)()));var t_=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var tw=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var tg=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var tb=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var tP=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var tS=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var tC=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var tk=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var tj=r("../../node_modules/rxjs/dist/esm5/internal/Subscription.js");var tx=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var tT=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var tE=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var tA=r("../../node_modules/lodash/minBy.js");var tI=r("../../node_modules/lodash/orderBy.js");const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:a}}]of e)if(a){const i=[...a.keys()].filter(e=>!t.includes(e));for(const o of i){const n=a.get(o);if(0n===n)continue;const d=r.get(o)||[];r.set(o,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const a=[...t];for(const i of s.keys()){const o=tI(s.get(i),e=>e,"desc");if(0===a.length)a.push({coins:0n});while(o.length>a.length){const n=o.pop();o[o.length-1]+=n}for(const[d,c]of o.entries()){var l;const u=a[d];const f=(null===(l=u.assets)||void 0===l?void 0:l.entries())||[];a.splice(d,1,{assets:new Map([...f,[i,c]]),coins:u.coins})}}return a};const createBundlePerOutput=(e,t,r,s)=>{let a=0n;const i=new Map;const o=e.map(e=>{const o=t>0n?r*e.coins/t:0n;a+=o;if(!e.assets){return{coins:o}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const h=f*c/l;i.set(d,(i.get(d)||0n)+h);n.set(d,h)}return{assets:n,coins:o}});return{bundles:o,totalAssetsBundled:i,totalCoinBundled:a}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=tA(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:a},i)=>{const o=new Map;const n=(0,tE.toValues)(e);for(const d of r)o.set(d,{requested:(0,tE.assetQuantitySelector)(d)(t)+a.spend(d),selected:(0,tE.assetQuantitySelector)(d)(n)+a.input(d)});const c=(0,tE.getCoinQuantity)(n)+s.input;const l=(0,tE.getCoinQuantity)(t)+i+s.deposit;const u=c-l;const{totalCoinBundled:f,bundles:h,totalAssetsBundled:m}=createBundlePerOutput(t,l,u,o);const p=u-f;if(p>0)if(0===h.length)h.push({coins:p});else h[0].coins+=p;for(const v of r){const y=o.get(v);const _=m.get(v)||0n;const w=y.selected-y.requested-_;if(w>0n){var g;const b=(null===(g=h.find(({assets:e})=>{return null==e?void 0:e.has(v)}))||void 0===g?void 0:g.assets)||smallestBundleTokenMap(h);const P=b.get(v)||0n;b.set(v,P+w)}}return h};const pickExtraRandomUtxo=({utxoRemaining:e,utxoSelected:t},r)=>{const s=e.filter(([e,{value:t}])=>!t.assets);const a=s.length>0?s:e;const i=Math.floor(r()*a.length);const o=[...t,a[i]];const n=e.indexOf(a[i]);const d=[...e.slice(0,n),...e.slice(n+1)];return{utxoRemaining:d,utxoSelected:o}};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const s=r.splice(t,1)[0];if(0===r.length)return[s];const a=r.splice(-1,1)[0];const i=(0,eY.coalesceValueQuantities)([s,a]);r=[...r,i];r=tI(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=tI(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:tE.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let a=false;while(s.length>1&&!a){a=true;for(let i=s.length-1;i>=0;--i){const o=satisfiesMinCoinRequirement(s[i]);a=a&&o;if(!o){s=mergeWithSmallestBundle(s,i);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const a of e){const{assets:i,coins:o}=a;if(!i||0===i.size||!r(i)){s.push({assets:i,coins:o});continue}const n=[];let d={assets:new Map,coins:0n};for(const[c,l]of i.entries()){d.assets.set(c,l);if(r(d.assets)&&d.assets.size>1){d.assets.delete(c);n.push(d);d={assets:new Map([[c,l]]),coins:0n}}}n.push(d);let u=0n;for(const f of n){const h=t({address:tE.stubMaxSizeAddress,value:f});f.coins=h;u+=h}if(o<u){throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted)}n[0].coins+=o-u;s.push(...n)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:t,uniqueTxAssetIDs:r,implicitValue:s,computeMinimumCoinQuantity:a,tokenBundleSizeExceedsLimit:i,fee:o=0n})=>{const n=computeRequestedAssetChangeBundles(e.utxoSelected,t,r,s,o);const d=redistributeLeftoverAssets(e.utxoSelected,n,r);const c=coalesceChangeBundlesForMinCoinRequirement(d,a);if(!c){return false}const l=splitChangeIfTokenBundlesSizeExceedsLimit(c,a,i);return{changeBundles:l,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:t,estimateTxCosts:r,outputValues:s,uniqueTxAssetIDs:a,implicitValue:i,random:o,utxoSelection:n})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=n=>{if(n.utxoRemaining.length>0){return computeChangeAndAdjustForFee({computeMinimumCoinQuantity:e,estimateTxCosts:r,implicitValue:i,outputValues:s,random:o,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:a,utxoSelection:pickExtraRandomUtxo(n,o)})}throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted)};const d=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:i,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:a,utxoSelection:n});if(!d)return recomputeChangeAndAdjustForFeeWithExtraUtxo(n);const c=await r(d.utxoSelected,validateChangeBundles(d.changeBundles,t));const l=(0,tE.getCoinQuantity)(s)+c.fee+i.implicitCoin.deposit;const u=(0,tE.getCoinQuantity)((0,tE.toValues)(d.utxoSelected))+i.implicitCoin.input;if(l>u){if(0===d.utxoRemaining.length){throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(d)}const f=computeChangeBundles({computeMinimumCoinQuantity:e,fee:c.fee,implicitValue:i,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:a,utxoSelection:eF(d,["utxoRemaining","utxoSelected"])});if(!f){return recomputeChangeAndAdjustForFeeWithExtraUtxo(d)}const{changeBundles:h,utxoSelected:m,utxoRemaining:p}=f;return{change:validateChangeBundles(h,t),fee:c.fee,inputs:m,redeemers:c.redeemers,remainingUTxO:p}};const improvesSelection=(e,t,r,s)=>{const a=s(e);if(a<r)return true;const i=a+s([t]);const o=2n*r;const n=eW.BigIntMath.abs(o-i);const d=eW.BigIntMath.abs(o-a);if(n<d)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,tE.assetQuantitySelector)(e);const a=s.input(e);const i=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,tE.toValues)(e))+a,minimumTarget:r((0,tE.toValues)(t))+i}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,tE.getCoinQuantity)((0,tE.toValues)(e))+r.input,minimumTarget:(0,tE.getCoinQuantity)((0,tE.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:a,implicitValue:i})=>{const o=e;const n=[...t];const d=listTokensWithin(s,r,i);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const h=l(n);if(h.length>0){const m=Math.floor(a()*h.length);const p=h[m];if(improvesSelection(o,p,u,f)){o.push(p);n.splice(n.indexOf(p),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===o.length){o.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:o}};const tB=0xffffffffffffffffn;const roundRobinRandomImprove=({changeAddressResolver:e,random:t=Math.random})=>({select:async({preSelectedUtxo:r,utxo:s,outputs:a,constraints:{computeMinimumCost:i,computeSelectionLimit:o,computeMinimumCoinQuantity:n,tokenBundleSizeExceedsLimit:d},implicitValue:c={}})=>{const l=tE.stubMaxSizeAddress;const{requiredUtxo:u,utxo:f,outputs:h,uniqueTxAssetIDs:m,implicitValue:p}=(0,tE.preProcessArgs)(r,s,a,l,c);(0,tE.assertIsBalanceSufficient)(m,u,f,h,p);const v=roundRobinSelection({changeAddress:l,implicitValue:p,outputs:h,random:t,requiredUtxo:u,uniqueTxAssetIDs:m,utxo:f});const y=await computeChangeAndAdjustForFee({computeMinimumCoinQuantity:n,estimateTxCosts:(e,t)=>i({change:t.map(e=>({address:l,value:e})),fee:tB,inputs:new Set(e),outputs:a}),implicitValue:p,outputValues:(0,tE.toValues)(h),random:t,tokenBundleSizeExceedsLimit:d,uniqueTxAssetIDs:m,utxoSelection:v});const _=new Set(y.inputs);const w={change:y.change.map(e=>({address:l,value:e})),fee:y.fee,inputs:_,outputs:a};w.change=await e.resolve(w);if(y.inputs.length>await o({change:w.change,fee:w.fee,inputs:_,outputs:a})){throw new tT.InputSelectionError(tT.InputSelectionFailure.MaximumInputCountExceeded)}w.inputs=new Set([...w.inputs].sort(eR.sortUtxoByTxIn));return{redeemers:y.redeemers,remainingUTxO:new Set(y.remainingUTxO),selection:w}}});var tF=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var tM=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var GreedyTxEvaluator_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var GreedyTxEvaluator_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var tR;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await GreedyTxEvaluator_classPrivateFieldGet(this,tR,"f").call(this);const{witness:s}=e;if(!s||!s.redeemers)return[];const a=[];for(const i of s.redeemers)a.push({budget:r,index:i.index,purpose:i.purpose});return a}constructor(e){tR.set(this,void 0);GreedyTxEvaluator_classPrivateFieldSet(this,tR,e,"f")}}tR=new WeakMap;var tD=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");var StaticChangeAddressResolver_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var StaticChangeAddressResolver_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var tO;class StaticChangeAddressResolver{async resolve(e){const t=await StaticChangeAddressResolver_classPrivateFieldGet(this,tO,"f").call(this);if(0===t.length)throw new eo.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){tO.set(this,void 0);StaticChangeAddressResolver_classPrivateFieldSet(this,tO,e,"f")}}tO=new WeakMap;var tG=r("../../node_modules/blake2b-no-wasm/index.js");var tN=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var tH=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var tK=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var tV=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var tW=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var tz=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var tU=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var t$=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var tL=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var tq=r("../../node_modules/buffer/index.js")["Buffer"];const tY=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new tV.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(tq.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const s=new tV.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){s.writeEncodedValue(tY);s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(tY)}else{if(!t||0===t.length)return;s.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(tq.from(e.languageViewsEncoding(),"hex"))}return ty.Hash32ByteBase16.fromHexBlob(tL.HexBlob.fromBytes(tG(tG.BYTES).update(s.encode()).digest()))};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const a=new tW.Costmdls;for(const i of t){const o=e.get(i);if(o)a.insert(new tz.CostModel(i,o))}return hashScriptData(a,null==r?void 0:r.map(e=>tU.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>t$.PlutusData.fromCore(e)))};var tQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const tJ={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:tQ.PlutusLanguageVersion.V1};const tX={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:tQ.PlutusLanguageVersion.V2};const tZ={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:tQ.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new tW.Costmdls;for(const r of e){const s=new tz.CostModel(r.version,r.prices);t.insert(s)}return t.toCore()};const getDefaultCostModelsForVersions=e=>{const t=[...new Set(e)];const r=t.map(e=>{switch(e){case tQ.PlutusLanguageVersion.V1:return tJ;case tQ.PlutusLanguageVersion.V2:return tX;case tQ.PlutusLanguageVersion.V3:return tZ;default:throw new Error("Invalid plutus language")}});return buildCostModels(r)};const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:s,collaterals:a,collateralReturn:i,mint:o,scriptIntegrityHash:n,referenceInputs:d,requiredExtraSignatures:c,outputs:l})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?tN.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:o,outputs:l||[],referenceInputs:d?[...d]:void 0,requiredExtraSignatures:c,scriptIntegrityHash:n,validityInterval:s,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==a?void 0:a.size)&&{collaterals:[...a]},collateralReturn:i}}};const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:s})=>{const a={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&s){const i=getDefaultCostModelsForVersions([...r]);a.scriptIntegrityHash=computeScriptDataHash(i,[...r],s.redeemers,s.datums)}const o=tb.TransactionBody.fromCore(a);return{body:a,hash:tH.TransactionId.fromHexBlob(tK.bytesToHex(tG(tG.BYTES).update(tK.hexToBytes(o.toCbor())).digest()))}};const createTransactionInternals=e=>{const{txBody:t}=createPreInputSelectionTxBody({...e});return includeChangeAndInputs({bodyPreInputSelection:t,inputSelection:e.inputSelection})};var t0=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");const t1=(0,t0.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>ez.Slot(e+t*r);const ensureValidityInterval=(e,{slotLength:t},r)=>({invalidHereafter:calcTimeOffsetSlotNumber(e,t1,t),...r});var t2=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!t2.isDrepInfo(t)||t.active)};const dRepPublicKeyHash=async e=>e&&(await (await e.derivePublicKey(tg.DREP_KEY_DERIVATION_PATH)).hash()).hex();const t3=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=t3)||hasCorrectVoteDelegation(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:s,bip32Account:a,witnesser:i,logger:o})=>{var n;const[d,c,l,u,f,h]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var m;const p=null!==(m=e.txEvaluator)&&void 0!==m?m:new GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:roundRobinRandomImprove({changeAddressResolver:new StaticChangeAddressResolver(async()=>h)});const{txBody:v,auxiliaryData:y}=createPreInputSelectionTxBody({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:ensureValidityInterval(d.slot,c,null===(n=e.options)||void 0===n?void 0:n.validityInterval),withdrawals:getWithdrawals(u,l.protocolVersion)});const _=e.customizeCb?e.customizeCb({txBody:v}):v;var w;const g=(0,tD.defaultSelectionConstraints)({buildTx:async t=>{var r;o.debug("Building TX for selection constraints",t);if(null===(r=_.withdrawals)||void 0===r?void 0:r.length)o.debug("Adding rewards withdrawal in the transaction",_.withdrawals);const n=includeChangeAndInputs({bodyPreInputSelection:_,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const d=await dRepPublicKeyHash(a);const c=new es.Transaction(tb.TransactionBody.fromCore(n.body),tP.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),y?tS.AuxiliaryData.fromCore(y):void 0);var l;const u={...d&&{dRepKeyHashHex:d},handleResolutions:null!==(l=e.handleResolutions)&&void 0!==l?l:[],knownAddresses:h,txInKeyPathMap:await t_.createTxInKeyPathMap(n.body,h,s)};const f={...e.signingOptions,stubSign:true};const{tx:m}=await i.witness(c,u,f);return m},protocolParameters:l,redeemersByType:null!==(w=e.redeemersByType)&&void 0!==w?w:{},txEvaluator:p});const b=tM.computeImplicitCoin(l,{certificates:_.certificates,proposalProcedures:_.proposalProcedures,withdrawals:_.withdrawals});const{selection:P,redeemers:S}=await r.select({constraints:g,implicitValue:{coin:b,mint:_.mint},outputs:new Set(_.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(f)});const C={...e.witness,redeemers:S};const{body:k,hash:j}=includeChangeAndInputs({bodyPreInputSelection:_,inputSelection:P,scriptVersions:e.scriptVersions,witness:C});return{body:k,hash:j,inputSelection:P,redeemers:S}};var t5=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var t9=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var t6=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var t4=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var t8=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var t7=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var re=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var rt;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(rt||(rt={}));var rr;(function(e){e["Expired"]="Transaction expired"})(rr||(rr={}));class InvalidConfigurationError extends re.CustomError{constructor(e){super(e);this.message=e}}class HandleNotFoundError extends re.CustomError{constructor(e){super(rt.HandleNotFound);this.txOut=e}}class InsufficientRewardAccounts extends re.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}class DeRegistrationsWithRewardsLocked extends re.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=tr.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}class OutOfSyncRewardAccounts extends re.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}class OutputValidationMissingRequiredError extends re.CustomError{constructor(e){super(rt.MissingRequiredFields);this.txOut=e}}class OutputValidationMinimumCoinError extends re.CustomError{constructor(e,t){super(rt.MinimumCoin);this.txOut=e;this.outputValidation=t}}class OutputValidationTokenBundleSizeError extends re.CustomError{constructor(e,t){super(rt.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}class OutputValidationNegativeAssetQtyError extends re.CustomError{constructor(e,t){super(rt.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}class InvalidHereafterError extends re.CustomError{constructor(){super(rr.Expired)}}var OutputBuilder_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var OutputBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rs,ra,ri,ro;const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(OutputBuilder_classPrivateFieldGet(this,rs,"f"))){throw new OutputValidationMissingRequiredError(OutputBuilder_classPrivateFieldGet(this,rs,"f"))}OutputBuilder_classPrivateFieldGet(this,ri,"f").debug("toTxOut result:",OutputBuilder_classPrivateFieldGet(this,rs,"f"));return{...OutputBuilder_classPrivateFieldGet(this,rs,"f")}}async inspect(){return OutputBuilder_classPrivateFieldGet(this,rs,"f")}value(e){OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),value:{...e}},"f");return this}coin(e){var t;OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,rs,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,rs,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const a=new Map(null===(r=OutputBuilder_classPrivateFieldGet(this,rs,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?a.delete(e):a.set(e,t);return this.assets(a)}address(e){OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),address:e},"f");return this}datum(e){t7.isDatumHash(e)?OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),datumHash:e},"f"):OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),datum:e},"f");return this}scriptReference(e){if(!tQ.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),scriptReference:e},"f");return this}handle(e){if(!OutputBuilder_classPrivateFieldGet(this,ro,"f")){throw new InvalidConfigurationError(rt.MissingHandleProviderError)}OutputBuilder_classPrivateFieldSet(this,rs,{...OutputBuilder_classPrivateFieldGet(this,rs,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(OutputBuilder_classPrivateFieldGet(this,rs,"f").handle&&OutputBuilder_classPrivateFieldGet(this,ro,"f")){const t=await OutputBuilder_classPrivateFieldGet(this,ro,"f").resolveHandles({handles:[OutputBuilder_classPrivateFieldGet(this,rs,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new HandleNotFoundError(OutputBuilder_classPrivateFieldGet(this,rs,"f"))}}const r=toOutputValidationError(e,await OutputBuilder_classPrivateFieldGet(this,ra,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:s}){rs.set(this,void 0);ra.set(this,void 0);ri.set(this,void 0);ro.set(this,null);OutputBuilder_classPrivateFieldSet(this,rs,{...t},"f");OutputBuilder_classPrivateFieldSet(this,ra,e,"f");OutputBuilder_classPrivateFieldSet(this,ri,r,"f");if(s)OutputBuilder_classPrivateFieldSet(this,ro,s,"f")}}rs=new WeakMap,ra=new WeakMap,ri=new WeakMap,ro=new WeakMap;var GreedyInputSelector_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var GreedyInputSelector_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rn;const adjustOutputsForFee=async(e,t,r,s,a,i)=>{const o=new Set([...s,...a]);const{fee:n,redeemers:d}=await t.computeMinimumCost({change:[],fee:i,inputs:r,outputs:o});if(n===e)return{change:[],fee:n,feeAccountedFor:true,redeemers:d};if(e<n)throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoBalanceInsufficient);const c=[...a];c.sort(tE.sortByCoins);let l=false;for(const u of c){const f=u.value.coins-n;if(f>=t.computeMinimumCoinQuantity(u)){u.value.coins=f;l=true;break}}return{change:[...c],fee:n,feeAccountedFor:l,redeemers:d}};const splitChangeAndComputeFee=async(e,t,r,s,a,i,o)=>{const n=await (0,eR.splitChange)(i,r,s,a.computeMinimumCoinQuantity,a.tokenBundleSizeExceedsLimit,o);let d=await adjustOutputsForFee(r,a,e,t,n,o);if(d.fee>=r){const c={change:[{address:tE.stubMaxSizeAddress,value:{assets:s,coins:0n}}],fee:d.fee,feeAccountedFor:true};if(c.change[0].value.coins<a.computeMinimumCoinQuantity(c.change[0]))throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted);return c}if(o<d.fee){d=await splitChangeAndComputeFee(e,t,r,s,a,i,d.fee);if(0===d.change.length)throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted)}for(const l of d.change)if(l.value.coins<a.computeMinimumCoinQuantity(l))throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted);if(!d.feeAccountedFor)throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoFullyDepleted);return d};class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:a,outputs:i,constraints:o,implicitValue:n}=e;const d=new Set([...a,...s]);const c=(0,tE.toValues)([...d]);const l=(0,tE.toValues)([...i]);const u=(0,tE.getCoinQuantity)(c);const f=(0,tE.getCoinQuantity)(l);const h=(0,eY.coalesceValueQuantities)(c).assets;const m=(0,eY.coalesceValueQuantities)(l).assets;const p=(null==n?void 0:null===(t=n.coin)||void 0===t?void 0:t.input)||0n;const v=(null==n?void 0:null===(r=n.coin)||void 0===r?void 0:r.deposit)||0n;const y=(null==n?void 0:n.mint)||new Map;const _=u+p;const w=f+v;const g=(0,tE.addTokenMaps)(h,y);const b=_-w;const P=(0,tE.subtractTokenMaps)(g,m);if(0===d.size||w>_||(0,tE.hasNegativeAssetValue)(P))throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoBalanceInsufficient);const S=await splitChangeAndComputeFee(d,i,b,P,o,GreedyInputSelector_classPrivateFieldGet(this,rn,"f").getChangeAddresses,0n);const C=S.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(b-S.fee<0n)throw new tT.InputSelectionError(tT.InputSelectionFailure.UtxoBalanceInsufficient);if(d.size>await o.computeSelectionLimit({change:C,fee:S.fee,inputs:d,outputs:i})){throw new tT.InputSelectionError(tT.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:C,fee:S.fee,inputs:new Set([...d].sort(eR.sortUtxoByTxIn)),outputs:i}}}constructor(e){rn.set(this,void 0);GreedyInputSelector_classPrivateFieldSet(this,rn,e,"f")}}rn=new WeakMap;const rd=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=tA(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===eN.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};const buildRedeemers=(e,t)=>{const r=[];var s,a,i,o,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(a=e.vote)&&void 0!==a?a:[],...null!==(i=e.propose)&&void 0!==i?i:[],...null!==(o=e.certificate)&&void 0!==o?o:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new InvalidHereafterError}};const buildWitness=async(e,t,r,s,a,i)=>{const o={signatures:new Map};if(r){o.datums=[];for(const[n,d]of r)if(!s.has(n))o.datums.push(d)}if(e){o.scripts=[];for(const[c,l]of e)if(!t.has(c))o.scripts.push(l)}const{maxExecutionUnitsPerTransaction:u}=await i.protocolParameters();if(a)o.redeemers=buildRedeemers(a,u);return o};const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:a}=await e.protocolParameters();let i=0n;for(const o of t){r.push(o);i+=o[1].value.coins;if(i>rd){const n=r[0][1].address;const d=r.map(e=>e[1].value);const c=(0,eY.coalesceValueQuantities)(d);const l={...c};l.coins-=rd;const u={address:n,value:l};if(isValidValue(u,(0,tD.computeMinimumCoinQuantity)(s),(0,tD.tokenBundleSizeExceedsLimit)(a))){return{collateralReturn:u,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};var rc=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!hasCorrectVoteDelegation(e));if(t.length>0){throw new DeRegistrationsWithRewardsLocked(t)}};var rl=r("../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");var ru=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var rf=r("../../node_modules/lodash/omit.js");var TxBuilder_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var TxBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rh,rm,rp,rv,ry,r_,rw,rg,rb,rP,rS,rC,rk,rj,rx,rT,rE,rA,rI,rB,rF,rM,rR,rD,rO,rG,rN,rH,rK,rV,rW,rz;const rU="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:a},inputSelection:i}=await TxBuilder_classPrivateFieldGet(this,rh,"m",ry).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:i,ownAddresses:t,witness:a}}async sign(){return TxBuilder_classPrivateFieldGet(this,rp,"f").sign(await TxBuilder_classPrivateFieldGet(this,rh,"m",ry).call(this))}constructor({builder:e,signer:t}){rh.add(this);rm.set(this,void 0);rp.set(this,void 0);rv.set(this,void 0);TxBuilder_classPrivateFieldSet(this,rv,e,"f");TxBuilder_classPrivateFieldSet(this,rp,t,"f")}}rm=new WeakMap,rp=new WeakMap,rv=new WeakMap,rh=new WeakSet,ry=async function _LazyTxSigner_build(){return TxBuilder_classPrivateFieldSet(this,rm,TxBuilder_classPrivateFieldGet(this,rm,"f")||await TxBuilder_classPrivateFieldGet(this,rv,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,rT,"f").set(t,e);return this}if(!TxBuilder_classPrivateFieldGet(this,rR,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rR,"f").push(e);return this}addInput(e,t){if(t){TxBuilder_classPrivateFieldGet(this,r_,"m",rz).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,rx,"f").set(r,e);return this}if(!TxBuilder_classPrivateFieldGet(this,rM,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rM,"f").push(e);return this}addDatum(e){const t=t$.PlutusData.fromCore(e).hash();TxBuilder_classPrivateFieldGet(this,rI,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)TxBuilder_classPrivateFieldSet(this,rk,[...TxBuilder_classPrivateFieldGet(this,rk,"f"),e.handleResolution],"f");const t=rf(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;TxBuilder_classPrivateFieldSet(this,rk,TxBuilder_classPrivateFieldGet(this,rk,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,g.deepEquals)(t,e))};return this}buildOutput(e){return new TxOutputBuilder({handleProvider:TxBuilder_classPrivateFieldGet(this,rC,"f"),logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rS,"f"),"outputBuilder"),outputValidator:TxBuilder_classPrivateFieldGet(this,rg,"f"),txOut:e})}delegateFirstStakeCredential(e){TxBuilder_classPrivateFieldSet(this,rj,e,"f");return this}delegatePortfolio(e){if(!TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;TxBuilder_classPrivateFieldSet(this,rb,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:t9.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(eN.DelegationMetadataLabel,t6.jsonToMetadatum(eN.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[eN.DelegationMetadataLabel,t6.jsonToMetadatum(eN.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){TxBuilder_classPrivateFieldSet(this,rO,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{TxBuilder_classPrivateFieldGet(this,rS,"f").debug("Building");try{const e=TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account?await TxBuilder_classPrivateFieldGet(this,r_,"m",rK).call(this):await TxBuilder_classPrivateFieldGet(this,r_,"m",rH).call(this);await TxBuilder_classPrivateFieldGet(this,r_,"m",rG).call(this);validateValidityInterval(await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.addresses.get();const r=(await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===eN.StakeCredentialStatus.Registered||e.credentialStatus===eN.StakeCredentialStatus.Registering);const s=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const a=this.partialExtraSigners&&[...this.partialExtraSigners];const i=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:a};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=tN.computeAuxiliaryDataHash(this.partialAuxiliaryData);const o={...TxBuilder_classPrivateFieldGet(this,rw,"f")};const n=void 0!==TxBuilder_classPrivateFieldGet(this,rb,"f")||void 0!==TxBuilder_classPrivateFieldGet(this,rj,"f");if(TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account&&n&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const d=await TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account.deriveAddress({index:0,type:tw.AddressType.External},0);e.set(d.rewardAccount,1)}o.inputSelector=createGreedyInputSelector(e,t)}await Promise.all(TxBuilder_classPrivateFieldGet(this,rM,"f").map(e=>TxBuilder_classPrivateFieldGet(this,r_,"m",rW).call(this,e,TxBuilder_classPrivateFieldGet(this,rx,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,rR,"f").map(e=>TxBuilder_classPrivateFieldGet(this,r_,"m",rW).call(this,e,TxBuilder_classPrivateFieldGet(this,rT,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,rD,"f").map(e=>TxBuilder_classPrivateFieldGet(this,r_,"m",rV).call(this,e)));const c=await buildWitness(TxBuilder_classPrivateFieldGet(this,rE,"f"),TxBuilder_classPrivateFieldGet(this,rA,"f"),TxBuilder_classPrivateFieldGet(this,rI,"f"),TxBuilder_classPrivateFieldGet(this,rB,"f"),TxBuilder_classPrivateFieldGet(this,rF,"f"),TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders);const l=[...TxBuilder_classPrivateFieldGet(this,rE,"f").values()].some(e=>tQ.isPlutusScript(e));const{collaterals:u,collateralReturn:f}=l?await computeCollateral(TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const h=new Set;for(const m of TxBuilder_classPrivateFieldGet(this,rE,"f").values())if(tQ.isPlutusScript(m))h.add(m.version);const{body:p,hash:v,inputSelection:y,redeemers:_}=await initializeTx({auxiliaryData:s,certificates:this.partialTxBody.certificates,collateralReturn:f,collaterals:u,customizeCb:TxBuilder_classPrivateFieldGet(this,rO,"f"),handleResolutions:TxBuilder_classPrivateFieldGet(this,rk,"f"),inputs:new Set(TxBuilder_classPrivateFieldGet(this,rx,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:TxBuilder_classPrivateFieldGet(this,rF,"f"),referenceInputs:new Set([...TxBuilder_classPrivateFieldGet(this,rT,"f").values()].map(e=>e[0])),scriptIntegrityHash:l?rU:void 0,scriptVersions:h,signingOptions:i,txEvaluator:TxBuilder_classPrivateFieldGet(this,rP,"f"),witness:c},o);c.redeemers=_;return{ctx:{auxiliaryData:s,ownAddresses:t,signingContext:{handleResolutions:TxBuilder_classPrivateFieldGet(this,rk,"f"),knownAddresses:t,txInKeyPathMap:await t_.createTxInKeyPathMap(p,t,TxBuilder_classPrivateFieldGet(this,rw,"f").inputResolver)},signingOptions:{...i,extraSigners:a},witness:c},inputSelection:y,tx:{body:p,hash:v}}}catch(w){TxBuilder_classPrivateFieldGet(this,rS,"f").debug("Transaction build error",w);if(Array.isArray(w))throw w[0];throw w}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new es.Transaction(tb.TransactionBody.fromCore(e.body),tP.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?tS.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const a={...t.signingOptions,stubSign:false};const i=t.signingContext;return TxBuilder_classPrivateFieldGet(this,rw,"f").witnesser.witness(s,i,a)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){r_.add(this);this.partialTxBody={};rw.set(this,void 0);rg.set(this,void 0);rb.set(this,void 0);rP.set(this,void 0);rS.set(this,void 0);rC.set(this,void 0);rk.set(this,void 0);rj.set(this,void 0);rx.set(this,new Map);rT.set(this,new Map);rE.set(this,new Map);rA.set(this,new Set);rI.set(this,new Map);rB.set(this,new Set);rF.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});rM.set(this,new Array);rR.set(this,new Array);rD.set(this,new Array);rO.set(this,void 0);TxBuilder_classPrivateFieldSet(this,rg,e.outputValidator||(0,rc.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");TxBuilder_classPrivateFieldSet(this,rw,e,"f");TxBuilder_classPrivateFieldSet(this,rS,e.logger,"f");TxBuilder_classPrivateFieldSet(this,rC,e.handleProvider,"f");TxBuilder_classPrivateFieldSet(this,rk,[],"f");var t;TxBuilder_classPrivateFieldSet(this,rP,null!==(t=e.txEvaluator)&&void 0!==t?t:new GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}rw=new WeakMap,rg=new WeakMap,rb=new WeakMap,rP=new WeakMap,rS=new WeakMap,rC=new WeakMap,rk=new WeakMap,rj=new WeakMap,rx=new WeakMap,rT=new WeakMap,rE=new WeakMap,rA=new WeakMap,rI=new WeakMap,rB=new WeakMap,rF=new WeakMap,rM=new WeakMap,rR=new WeakMap,rD=new WeakMap,rO=new WeakMap,r_=new WeakSet,rG=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},rN=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(TxBuilder_classPrivateFieldGet(this,rb,"f")){const r=await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await t5.ensureStakeKeys({bip32Account:e,count:TxBuilder_classPrivateFieldGet(this,rb,"f").length,knownAddresses:r,logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rS,"f"),"getOrCreateRewardAccounts")});await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.addresses.add(...s);t=ts([...r,...s]).map(({rewardAccount:e})=>e)}const a=(0,ru.poll)({logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rS,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.rewardAccounts});try{return await (0,rl.lastValueFrom)(a)}catch{throw new OutOfSyncRewardAccounts(t)}},rH=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===TxBuilder_classPrivateFieldGet(this,rj,"f")){return Promise.resolve(t)}const r=await TxBuilder_classPrivateFieldGet(this,rw,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const a=null===(e=tr.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!a){throw new Error(`Invalid credential ${a}.`)}if(null===TxBuilder_classPrivateFieldGet(this,rj,"f"))if(s.credentialStatus===eN.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,rS,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeDeregistration,stakeCredential:a});else{if(s.credentialStatus!==eN.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,rS,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeRegistration,stakeCredential:a});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeDelegation,poolId:TxBuilder_classPrivateFieldGet(this,rj,"f"),stakeCredential:a})}return t},rK=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!TxBuilder_classPrivateFieldGet(this,rb,"f")){return e}if(!TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await TxBuilder_classPrivateFieldGet(this,r_,"m",rN).call(this,TxBuilder_classPrivateFieldGet(this,rw,"f").bip32Account);const r=TxBuilder_classPrivateFieldGet(this,rb,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();TxBuilder_classPrivateFieldGet(this,rS,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===eN.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=TxBuilder_classPrivateFieldGet(this,rb,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,TxBuilder_classPrivateFieldGet(this,rb,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const a=t.filter(e=>{var t,r;return e.credentialStatus===eN.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=TxBuilder_classPrivateFieldGet(this,rb,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(sortRewardAccountsDelegatedFirst).reverse();if(r.length>a.length){throw new InsufficientRewardAccounts(r.map(({id:e})=>e),a.map(({address:e})=>e))}const i=[];while(r.length>0&&a.length>0){const{id:o,weight:n}=r.pop();const d=a.pop();TxBuilder_classPrivateFieldGet(this,rS,"f").debug(`Building delegation certificate for ${o} ${d}`);if(d.credentialStatus!==eN.StakeCredentialStatus.Registered)i.push(eG.createStakeRegistrationCert(d.address));i.push(eG.createDelegationCert(d.address,o));e.set(d.address,n)}ensureNoDeRegistrationsWithRewardsLocked(a);TxBuilder_classPrivateFieldGet(this,rS,"f").debug(`De-registering ${a.length} stake keys`);for(const c of a)if(c.credentialStatus===eN.StakeCredentialStatus.Registered)i.push(eG.createStakeDeregistrationCert(c.address,t4.inConwayEra?c.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:i};return e},rV=async function _GenericTxBuilder_resolveDatum(e){if(TxBuilder_classPrivateFieldGet(this,rI,"f").has(e))return;if(!TxBuilder_classPrivateFieldGet(this,rw,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await TxBuilder_classPrivateFieldGet(this,rw,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);TxBuilder_classPrivateFieldGet(this,rI,"f").set(e,t)},rW=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await TxBuilder_classPrivateFieldGet(this,rw,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const a=t8.Script.fromCore(s.scriptReference).hash();TxBuilder_classPrivateFieldGet(this,rE,"f").set(a,s.scriptReference);TxBuilder_classPrivateFieldGet(this,rA,"f").add(a)}const i=s.datum;if(i)if(t7.isDatumHash(i)){if(!TxBuilder_classPrivateFieldGet(this,rI,"f").has(i))TxBuilder_classPrivateFieldGet(this,rD,"f").push(i)}else{const o=t$.PlutusData.fromCore(i).hash();TxBuilder_classPrivateFieldGet(this,rI,"f").set(o,i);TxBuilder_classPrivateFieldGet(this,rB,"f").add(o)}t.set(r,[{...e,address:s.address},s])},rz=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,rx,"f").set(r,e);if(e[1].datum){const s=t$.PlutusData.fromCore(e[1].datum).hash();TxBuilder_classPrivateFieldGet(this,rI,"f").set(s,e[1].datum);TxBuilder_classPrivateFieldGet(this,rB,"f").add(s)}if(e[1].datumHash)TxBuilder_classPrivateFieldGet(this,rD,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!TxBuilder_classPrivateFieldGet(this,rM,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rM,"f").push(e)}if(t.script){const a=t8.Script.fromCore(t.script).hash();TxBuilder_classPrivateFieldGet(this,rE,"f").set(a,t.script)}if(t.redeemer){var i;null===(i=TxBuilder_classPrivateFieldGet(this,rF,"f").spend)||void 0===i?void 0:i.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:tH.RedeemerPurpose.spend})}if(t.datum)if(t7.isDatumHash(t.datum)){if(!TxBuilder_classPrivateFieldGet(this,rI,"f").has(t.datum))TxBuilder_classPrivateFieldGet(this,rD,"f").push(t.datum)}else{const o=t$.PlutusData.fromCore(t.datum).hash();TxBuilder_classPrivateFieldGet(this,rI,"f").set(o,t.datum)}};var r$=r("../../node_modules/rxjs/dist/esm5/internal/observable/forkJoin.js");const withStakeKeyDerivationPaths=e=>{return t=>{return t.pipe((0,W.switchMap)(t=>{return e.pipe((0,E.map)(e=>{return t.map(({credentialStatus:t,address:r})=>{var s;return{credentialStatus:t,stakeKeyDerivationPath:null===(s=e.find(e=>e.rewardAccount===r))||void 0===s?void 0:s.stakeKeyDerivationPath}}).filter(e=>!!e.stakeKeyDerivationPath)}))}))}};const createPublicStakeKeysTracker=({addresses$:e,rewardAccounts$:t,bip32Account:r})=>new U.TrackerSubject(t.pipe(withStakeKeyDerivationPaths(e),(0,n.mergeMap)(e=>(0,r$.forkJoin)(e.map(({stakeKeyDerivationPath:e,credentialStatus:t})=>(0,d.from)(r.derivePublicKey(e)).pipe((0,E.map)(e=>({credentialStatus:t,publicStakeKey:e.hex()}))))).pipe((0,L.defaultIfEmpty)([]))),(0,_.distinctUntilChanged)(g.deepEquals)));var rL=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js");var rq=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");const nativeScriptPolicyId=e=>(0,a.PolicyId)(rq.NativeScript.fromCore(e).hash());const jsonToNativeScript=e=>{let t;if(!e.type){throw new SerializationError(SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":t={__type:ScriptType.Native,keyHash:Crypto.Ed25519KeyHashHex(e.keyHash),kind:NativeScriptKind.RequireSignature};break;case"all":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAllOf,scripts:new Array};for(let r=0;r<e.scripts.length;++r)t.scripts.push(jsonToNativeScript(e.scripts[r]));break;case"any":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAnyOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)t.scripts.push(jsonToNativeScript(e.scripts[s]));break;case"atLeast":{const a=Number.parseInt(e.required);t={__type:ScriptType.Native,kind:NativeScriptKind.RequireNOf,required:a,scripts:new Array};for(let i=0;i<e.scripts.length;++i)t.scripts.push(jsonToNativeScript(e.scripts[i]));break}case"before":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeBefore,slot:Slot(Number.parseInt(e.slot))};break;case"after":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeAfter,slot:Slot(Number.parseInt(e.slot))};break;default:throw new SerializationError(SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return t};var rY=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var rQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const getScriptAddress=(e,t,r)=>{const s=nativeScriptPolicyId(e);const a=nativeScriptPolicyId(t);const i={hash:s,type:tr.CredentialType.ScriptHash};const o={hash:a,type:tr.CredentialType.ScriptHash};const n=rY.BaseAddress.fromCredentials(r,i,o);return{accountIndex:0,address:n.toAddress().toBech32(),index:0,networkId:r,rewardAccount:rQ.RewardAddress.fromCredentials(r,o).toAddress().toBech32(),type:tw.AddressType.External}};const createDrepInfoColdObservable=({drepProvider:e,retryBackoffConfig:t,refetchTrigger$:r,logger:s})=>a=>poll({logger:s,retryBackoffConfig:t,sample:()=>e.getDRepsInfo({ids:a}),trigger$:merge(of(true),r)});const drepsToDelegatees=e=>t=>e.map(e=>{if(!e){return}if(Cardano.isDRepCredential(e)){const r=t.find(t=>Cardano.DRepID.toCip129DRepID(t.id)===Cardano.DRepID.cip129FromCredential(e));if(!r){return}return{delegateRepresentative:r}}return{delegateRepresentative:e}});const drepsToDrepIds=e=>[...new Set(e.filter(isNotNil).filter(Cardano.isDRepCredential).map(e=>Cardano.DRepID.cip129FromCredential(e)))];const onlyDistinctBlockRefetch=(e,t)=>distinctBlock(e.pipe((0,ek.withLatestFrom)(t),(0,E.map)(([,e])=>e))).pipe((0,E.map)(()=>void 0));var BaseWallet_classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var BaseWallet_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rJ,rX,rZ,r0,r1,r2,r3,r5,r9,r6,r4,r8,r7,se,st,sr;var ss;(function(e){e["SCRIPT_CREDENTIALS_MANAGER"]="SCRIPT_CREDENTIALS_MANAGER";e["BIP32_CREDENTIALS_MANAGER"]="BIP32_CREDENTIALS_MANAGER"})(ss||(ss={}));const isScriptPublicCredentialsManager=e=>e.__type===ss.SCRIPT_CREDENTIALS_MANAGER;const isBip32PublicCredentialsManager=e=>!isScriptPublicCredentialsManager(e);const addressHasTx=async(e,t)=>{const r=await t.transactionsByAddresses({addresses:[e],pagination:{limit:1,startAt:0}});return r.totalResultCount>0};const sa={maxInterval:1e5,maxIntervalMultiplier:20,pollInterval:5e3};const si=2.5;const isOutgoingTx=e=>"object"==typeof e&&"cbor"in e;const isTxCBOR=e=>"string"==typeof e;const isWitnessedTx=e=>"object"==typeof e&&"context"in e;const processOutgoingTx=e=>{if(isTxCBOR(e)){const t=es.Transaction.fromCbor(e);return{body:t.toCore().body,cbor:e,id:t.getId()}}if(isWitnessedTx(e)){return{body:e.tx.body,cbor:e.cbor,context:e.context,id:e.tx.id}}if(isOutgoingTx(e)){return e}return{body:e.body,cbor:es.TxCBOR.serialize(e),id:e.id}};const getDRepKeyHash=async e=>e?(await tF.Ed25519PublicKey.fromHex(e).hash()).hex():void 0;class BaseWallet{async getName(){return this.name}async initializeTx(e){return initializeTx(e,this.getTxBuilderDependencies())}async finalizeTx({tx:e,bodyCbor:t,signingOptions:r,signingContext:a,auxiliaryData:i,isValid:o,witness:n}){const d=await (0,ep.firstValueFrom)(this.addresses$);const c=await this.governance.getPubDRepKey();const l={signatures:new Map};let u;if((0,s.isTxBodyWithHash)(e)){u=new es.Transaction(t?tb.TransactionBody.fromCbor(t):tb.TransactionBody.fromCore(e.body),tP.TransactionWitnessSet.fromCore({...l,...n}),i?tS.AuxiliaryData.fromCore(i):void 0);if(void 0!==o)u.setIsValid(o)}else{u=es.Transaction.fromCbor(e)}const f={...a,dRepPublicKey:c,knownAddresses:d,txInKeyPathMap:await t_.createTxInKeyPathMap(u.body().toCore(),d,this.util)};const h=await this.witnesser.witness(u,f,r);BaseWallet_classPrivateFieldGet(this,r2,"f").signed$.next(h);return h.tx}initializeHandles(e){return createHandlesTracker({assetInfo$:this.assetInfo$,handlePolicyIds$:e,handleProvider:this.handleProvider,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"handles$"),utxo$:this.utxo.total$})}createTxBuilder(){return new GenericTxBuilder(this.getTxBuilderDependencies())}async submitTx(e,t={}){const r=processOutgoingTx(e);if(BaseWallet_classPrivateFieldGet(this,r8,"f")[r.id]){return BaseWallet_classPrivateFieldGet(this,r8,"f")[r.id]}return BaseWallet_classPrivateFieldGet(this,r8,"f")[r.id]=(async()=>{try{if(t.mightBeAlreadySubmitted||!await BaseWallet_classPrivateFieldGet(this,rJ,"m",st).call(this,r.id))await BaseWallet_classPrivateFieldGet(this,rJ,"m",se).call(this,r,t)}finally{delete BaseWallet_classPrivateFieldGet(this,r8,"f")[r.id]}return r.id})()}sync(){BaseWallet_classPrivateFieldGet(this,r1,"f").sync()}shutdown(){var e;this.utxo.shutdown();this.transactions.shutdown();this.eraSummaries$.complete();this.protocolParameters$.complete();this.genesisParameters$.complete();BaseWallet_classPrivateFieldGet(this,r1,"f").complete();null===(e=BaseWallet_classPrivateFieldGet(this,r6,"f"))||void 0===e?void 0:e.shutdown();this.assetProvider.stats.shutdown();BaseWallet_classPrivateFieldGet(this,r9,"f").stats.shutdown();this.networkInfoProvider.stats.shutdown();this.utxoProvider.stats.shutdown();this.rewardAccountInfoProvider.stats.shutdown();this.rewardsProvider.stats.shutdown();this.chainHistoryProvider.stats.shutdown();this.currentEpoch$.complete();this.delegation.shutdown();this.assetInfo$.complete();this.syncStatus.shutdown();BaseWallet_classPrivateFieldGet(this,r2,"f").failedToSubmit$.complete();BaseWallet_classPrivateFieldGet(this,r2,"f").pending$.complete();BaseWallet_classPrivateFieldGet(this,r2,"f").submitting$.complete();BaseWallet_classPrivateFieldGet(this,r3,"f").unsubscribe();BaseWallet_classPrivateFieldGet(this,r5,"f").complete();this.publicStakeKeys$.complete();BaseWallet_classPrivateFieldGet(this,r7,"f").complete();BaseWallet_classPrivateFieldGet(this,r0,"f").debug("Shutdown")}setInputSelector(e){BaseWallet_classPrivateFieldSet(this,rZ,e,"f")}getInputSelector(){return BaseWallet_classPrivateFieldGet(this,rZ,"f")}getTxBuilderDependencies(){return{bip32Account:isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))?BaseWallet_classPrivateFieldGet(this,r4,"f").bip32Account:void 0,handleProvider:this.handleProvider,inputResolver:this.util,inputSelector:BaseWallet_classPrivateFieldGet(this,rZ,"f"),logger:BaseWallet_classPrivateFieldGet(this,r0,"f"),outputValidator:this.util,txBuilderProviders:{addresses:{add:(...e)=>(0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,r6,"f").addAddresses(e)),get:()=>(0,ep.firstValueFrom)(this.addresses$)},genesisParameters:()=>BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.genesisParameters$),protocolParameters:()=>BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.protocolParameters$),rewardAccounts:()=>{BaseWallet_classPrivateFieldGet(this,r7,"f").next();return BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.delegation.rewardAccounts$)},tip:()=>BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.tip$),utxoAvailable:()=>BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.utxo.available$)},txEvaluator:new GreedyTxEvaluator(()=>BaseWallet_classPrivateFieldGet(this,rJ,"m",sr).call(this,this.protocolParameters$)),witnesser:this.witnesser}}async signData(e){if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))){return await this.witnesser.signData({...e,knownAddresses:await (0,ep.firstValueFrom)(this.addresses$)})}throw new Error("signData is not supported by script wallets")}async discoverAddresses(){if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))){const e=await BaseWallet_classPrivateFieldGet(this,r4,"f").addressDiscovery.discover(BaseWallet_classPrivateFieldGet(this,r4,"f").bip32Account);const t=await (0,ep.firstValueFrom)(this.addresses$);const r=e.filter(({address:e})=>!t.some(t=>t.address===e));await (0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,r6,"f").addAddresses(r));return(0,ep.firstValueFrom)(this.addresses$)}return(0,ep.firstValueFrom)(this.addresses$)}async getNextUnusedAddress(){const e=await (0,ep.firstValueFrom)(this.addresses$);if(0===e.length){throw new Error("No known address found for this wallet")}if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))){e.sort((e,t)=>t.index-e.index);const t=e[0];let r=!await addressHasTx(t.address,this.chainHistoryProvider);if(r)return[t];const s=await BaseWallet_classPrivateFieldGet(this,r4,"f").bip32Account.deriveAddress({index:t.index+1,type:tw.AddressType.External},0);await (0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,r6,"f").addAddresses([s]));r=!await addressHasTx(s.address,this.chainHistoryProvider);if(r)return[s];return await this.getNextUnusedAddress()}const a=!await addressHasTx(e[0].address,this.chainHistoryProvider);return a?[e[0]]:[]}async addSignatures({tx:e,sender:t}){var r;const s=es.Transaction.fromCbor(e);const a=null===(r=s.auxiliaryData())||void 0===r?void 0:r.toCore();const i=s.body().toCore();const o=s.getId();const n=s.witnessSet().toCore();const d=s.body().toCbor();const c=await this.finalizeTx({auxiliaryData:a,bodyCbor:d,signingContext:{sender:t},tx:{body:i,hash:o},witness:n});const l=c.witness;const u=s.witnessSet();u.setVkeys(tC.CborSet.fromCore([...l.signatures],tk.VkeyWitness.fromCore));s.setWitnessSet(u);return s.toCbor()}constructor({name:e,historicalTransactionsFetchLimit:t=10,maxAssetInfoCacheAge:r,polling:{interval:s=sa.pollInterval,maxInterval:a=s*sa.maxIntervalMultiplier,consideredOutOfSyncAfter:i=18e4}={},retryBackoffConfig:o={initialInterval:Math.min(s,1e3),maxInterval:a}},{txSubmitProvider:c,witnesser:m,assetProvider:p,handleProvider:v,networkInfoProvider:b,utxoProvider:P,chainHistoryProvider:S,rewardAccountInfoProvider:C,rewardsProvider:k,logger:j,inputSelector:x,publicCredentialsManager:T,stores:A=(0,rL.createInMemoryWalletStores)(),connectionStatusTracker$:F=createSimpleConnectionStatusTracker(),inputResolver:M,pollController$:R=(0,l.of)(true)}){rJ.add(this);rX.set(this,void 0);rZ.set(this,void 0);r0.set(this,void 0);r1.set(this,void 0);r2.set(this,{failedToSubmit$:new $.Subject,pending$:new $.Subject,signed$:new $.Subject,submitting$:new $.Subject});r3.set(this,void 0);r5.set(this,void 0);r9.set(this,void 0);r6.set(this,void 0);r4.set(this,void 0);r8.set(this,{});r7.set(this,new $.Subject);BaseWallet_classPrivateFieldSet(this,r0,(0,eT.contextLogger)(j,e),"f");BaseWallet_classPrivateFieldSet(this,r4,T,"f");BaseWallet_classPrivateFieldSet(this,r9,new TrackedTxSubmitProvider(c),"f");this.utxoProvider=new TrackedUtxoProvider(P);this.networkInfoProvider=new TrackedWalletNetworkInfoProvider(b);this.assetProvider=new TrackedAssetProvider(p);this.handleProvider=v;this.chainHistoryProvider=new TrackedChainHistoryProvider(S);this.rewardAccountInfoProvider=new TrackedRewardAccountInfoProvider(C);this.rewardsProvider=new TrackedRewardsProvider(k);this.syncStatus=createProviderStatusTracker({assetProvider:this.assetProvider,chainHistoryProvider:this.chainHistoryProvider,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"syncStatus"),networkInfoProvider:this.networkInfoProvider,rewardAccountInfoProvider:this.rewardAccountInfoProvider,rewardsProvider:this.rewardsProvider,utxoProvider:this.utxoProvider},{consideredOutOfSyncAfter:i});this.witnesser=m;this.name=e;const D=F.pipe((0,h.tap)(e=>e===I.up?"Connection UP":"Connection DOWN"),(0,V.filter)(e=>e===I.down));if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))){BaseWallet_classPrivateFieldSet(this,r6,createAddressTracker({addressDiscovery$:(0,Y.pollProvider)({cancel$:D,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"addressDiscovery$"),retryBackoffConfig:o,sample:()=>{const e=BaseWallet_classPrivateFieldGet(this,r4,"f");return e.addressDiscovery.discover(e.bip32Account)}}).pipe((0,H.take)(1),(0,f.catchError)(e=>{BaseWallet_classPrivateFieldGet(this,r0,"f").error("Failed to complete the address discovery process",e);throw e})),logger:BaseWallet_classPrivateFieldGet(this,r0,"f"),store:A.addresses}),"f");this.addresses$=BaseWallet_classPrivateFieldGet(this,r6,"f").addresses$}else{const O=BaseWallet_classPrivateFieldGet(this,r4,"f");this.addresses$=(0,d.from)(this.networkInfoProvider.genesisParameters()).pipe((0,E.map)(({networkId:e})=>e),(0,_.distinctUntilChanged)(),(0,E.map)(e=>[getScriptAddress(O.paymentScript,O.stakingScript,e)]))}BaseWallet_classPrivateFieldSet(this,r1,this.tip$=new TipTracker({connectionStatus$:F,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"tip$"),maxPollInterval:a,minPollInterval:s,pollController$:R,provider$:(0,Y.pollProvider)({cancel$:D,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"tip$"),retryBackoffConfig:o,sample:this.networkInfoProvider.ledgerTip}),store:A.tip,syncStatus:this.syncStatus}),"f");this.txSubmitProvider=new SmartTxSubmitProvider({retryBackoffConfig:o},{connectionStatus$:F,tip$:this.tip$,txSubmitProvider:BaseWallet_classPrivateFieldGet(this,r9,"f")});const G=new B.BehaviorSubject(void 0);this.eraSummaries$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:g.deepEquals,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"eraSummaries$"),retryBackoffConfig:o,sample:this.networkInfoProvider.eraSummaries,trigger$:G.pipe((0,h.tap)(()=>"Trigger request era summaries"))}),A.eraSummaries);this.currentEpoch$=currentEpochTracker(this.tip$,this.eraSummaries$.pipe((0,h.tap)(e=>BaseWallet_classPrivateFieldGet(this,r0,"f").debug("Era summaries are",e))));this.currentEpoch$.pipe((0,E.map)(()=>void 0)).subscribe(G);const N=this.currentEpoch$.pipe((0,E.map)(e=>e.epochNo),(0,h.tap)(e=>BaseWallet_classPrivateFieldGet(this,r0,"f").debug(`Current epoch is ${e}`)));this.protocolParameters$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"protocolParameters$"),retryBackoffConfig:o,sample:this.networkInfoProvider.protocolParameters,trigger$:N}),A.protocolParameters);this.genesisParameters$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"genesisParameters$"),retryBackoffConfig:o,sample:this.networkInfoProvider.genesisParameters,trigger$:N}),A.genesisParameters);const K=this.addresses$.pipe((0,E.map)(e=>e.map(e=>e.address)),(0,_.distinctUntilChanged)(g.deepEquals),(0,w.shareReplay)(1));BaseWallet_classPrivateFieldSet(this,r5,new $.Subject,"f");this.transactions=createTransactionsTracker({addresses$:K,chainHistoryProvider:this.chainHistoryProvider,failedFromReemitter$:BaseWallet_classPrivateFieldGet(this,r5,"f"),historicalTransactionsFetchLimit:t,inFlightTransactionsStore:A.inFlightTransactions,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"transactions"),newTransactions:BaseWallet_classPrivateFieldGet(this,r2,"f"),retryBackoffConfig:o,signedTransactionsStore:A.signedTransactions,tip$:this.tip$,transactionsHistoryStore:A.transactions});const z=createTransactionReemitter({genesisParameters$:this.genesisParameters$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"transactionsReemitter"),maxInterval:a*si,stores:A,tipSlot$:this.tip$.pipe((0,E.map)(e=>e.slot)),transactions:this.transactions});BaseWallet_classPrivateFieldSet(this,r3,new tj.Subscription,"f");BaseWallet_classPrivateFieldGet(this,r3,"f").add(z.failed$.subscribe(BaseWallet_classPrivateFieldGet(this,r5,"f")));BaseWallet_classPrivateFieldGet(this,r3,"f").add(z.reemit$.pipe((0,n.mergeMap)(e=>(0,d.from)(this.submitTx(e,{mightBeAlreadySubmitted:true}))),(0,f.catchError)(e=>{BaseWallet_classPrivateFieldGet(this,r0,"f").error("Failed to resubmit transaction",e);return y.EMPTY})).subscribe());this.utxo=createUtxoTracker({addresses$:K,history$:this.transactions.history$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"utxo"),retryBackoffConfig:o,stores:A,transactionsInFlight$:this.transactions.outgoing.inFlight$,utxoProvider:this.utxoProvider});this.delegation=createDelegationTracker({epoch$:N,knownAddresses$:this.addresses$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"delegation"),protocolParameters$:this.protocolParameters$,refetchRewardAccountInfo$:onlyDistinctBlockRefetch(BaseWallet_classPrivateFieldGet(this,r7,"f"),this.tip$),retryBackoffConfig:o,rewardAccountAddresses$:this.addresses$.pipe((0,E.map)(e=>ts(e.map(e=>e.rewardAccount)))),rewardAccountInfoProvider:this.rewardAccountInfoProvider,rewardsTracker:this.rewardsProvider,stores:A,transactionsTracker:this.transactions,utxoTracker:this.utxo});BaseWallet_classPrivateFieldSet(this,rZ,x||roundRobinRandomImprove({changeAddressResolver:new DynamicChangeAddressResolver(this.syncStatus.isSettled$.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>this.addresses$)),this.delegation.distribution$,()=>(0,ep.firstValueFrom)(this.delegation.portfolio$),j)}),"f");this.publicStakeKeys$=isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))?createPublicStakeKeysTracker({addresses$:this.addresses$,bip32Account:BaseWallet_classPrivateFieldGet(this,r4,"f").bip32Account,rewardAccounts$:this.delegation.rewardAccounts$}):new U.TrackerSubject((0,l.of)(new Array));this.balance=createBalanceTracker(this.protocolParameters$,this.utxo,this.delegation);const q=(0,u.defer)(()=>A.assets.get().pipe((0,L.defaultIfEmpty)(new Map)));this.assetInfo$=new PersistentDocumentTrackerSubject(createAssetsTracker({assetProvider:this.assetProvider,assetsCache$:q,balanceTracker:this.balance,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"assets$"),maxAssetInfoCacheAge:r,retryBackoffConfig:o,transactionsTracker:this.transactions}),A.assets);this.handles$=this.handleProvider?this.initializeHandles(new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,r0,"f"),"handles$"),retryBackoffConfig:o,sample:()=>this.handleProvider.getPolicyIds()}),A.policyIds)):(0,tx.throwError)(()=>new InvalidConfigurationError('BaseWallet is missing a "handleProvider"'));this.util=(0,tv.createWalletUtil)({chainHistoryProvider:this.chainHistoryProvider,protocolParameters$:this.protocolParameters$,transactions:this.transactions,utxo:this.utxo});if(M)this.util.resolveInput=M.resolveInput.bind(M);const getPubDRepKey=async()=>{if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,r4,"f"))){return(await BaseWallet_classPrivateFieldGet(this,r4,"f").bip32Account.derivePublicKey(tg.DREP_KEY_DERIVATION_PATH)).hex()}return};this.governance={getPubDRepKey,isRegisteredAsDRep$:createDRepRegistrationTracker({historyTransactions$:this.transactions.history$,pubDRepKeyHash$:(0,d.from)(getPubDRepKey().then(getDRepKeyHash))})};if(M){var Q;BaseWallet_classPrivateFieldSet(this,rX,(0,tv.combineInputResolvers)((0,tv.createInputResolver)(this),M),"f");this.util.resolveInput=null===(Q=BaseWallet_classPrivateFieldGet(this,rX,"f"))||void 0===Q?void 0:Q.resolveInput.bind(BaseWallet_classPrivateFieldGet(this,rX,"f"))}BaseWallet_classPrivateFieldGet(this,r0,"f").debug("Created")}}rX=new WeakMap,rZ=new WeakMap,r0=new WeakMap,r1=new WeakMap,r2=new WeakMap,r3=new WeakMap,r5=new WeakMap,r9=new WeakMap,r6=new WeakMap,r4=new WeakMap,r8=new WeakMap,r7=new WeakMap,rJ=new WeakSet,se=async function _BaseWallet_submitTx(e,{mightBeAlreadySubmitted:t}={}){BaseWallet_classPrivateFieldGet(this,r0,"f").debug(`Submitting transaction ${e.id}`);const{validityInterval:r}=e.body;if(null==r?void 0:r.invalidHereafter){const s=await (0,ep.firstValueFrom)(this.tip$.pipe((0,E.map)(e=>e.slot)));if(s>=(null==r?void 0:r.invalidHereafter)){const a={currentSlot:s,validityInterval:{invalidBefore:null==r?void 0:r.invalidBefore,invalidHereafter:null==r?void 0:r.invalidHereafter}};throw new ea.ProviderError(ea.ProviderFailure.BadRequest,new ei.TxSubmissionError(ei.TxSubmissionErrorCode.OutsideOfValidityInterval,a,"Not submitting transaction due to validity interval"))}}BaseWallet_classPrivateFieldGet(this,r2,"f").submitting$.next(e);try{await this.txSubmitProvider.submitTx({context:e.context,signedTransaction:e.cbor});const{slot:i}=await (0,ep.firstValueFrom)(this.tip$);BaseWallet_classPrivateFieldGet(this,r0,"f").debug(`Submitted transaction ${e.id} at slot ${i}`);BaseWallet_classPrivateFieldGet(this,r2,"f").pending$.next(e);return e.id}catch(n){var o;if(t&&isProviderError(n)&&(isValueNotConservedError(n.innerError)&&(!(null===(o=n.innerError)||void 0===o?void 0:o.data)||0n===n.innerError.data.produced.coins)||isIncompleteWithdrawalsError(n.innerError)||isUnknownOutputReferences(n.innerError)||isCredentialAlreadyRegistered(n.innerError)||isDrepAlreadyRegistered(n.innerError)||isUnknownCredential(n.innerError)||isDrepNotRegistered(n.innerError))){BaseWallet_classPrivateFieldGet(this,r0,"f").debug(`Transaction ${e.id} failed with ${n.innerError}, but it appears to be already submitted...`);BaseWallet_classPrivateFieldGet(this,r2,"f").pending$.next(e);return e.id}BaseWallet_classPrivateFieldGet(this,r2,"f").failedToSubmit$.next({error:n,reason:ex.FailedToSubmit,...e});throw n}},st=async function _BaseWallet_isTxInFlight(e){const t=await (0,ep.firstValueFrom)(this.transactions.outgoing.inFlight$);return t.some(t=>t.id===e)},sr=function _BaseWallet_firstValueFromSettled(e){return(0,ep.firstValueFrom)(this.syncStatus.isSettled$.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>e)))}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/util.js":(e,t,r)=>{"use strict";r.d(t,{createPersonalWallet:()=>createPersonalWallet,createSharedWallet:()=>createSharedWallet,isValidSharedWalletScript:()=>isValidSharedWalletScript});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/lodash/uniqBy.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,o;const n=5;const addressHasTx=async(e,t)=>{const r=await t.transactionsByAddresses({addresses:[e.address],pagination:{limit:1,startAt:0}});return r.totalResultCount>0};const discoverAddresses=async(e,t,r,a)=>{let i=0;let o=0;const n=new Array;while(i<=r){const d=a(o,s.AddressType.External);const c=a(o,s.AddressType.Internal);const l=await e.deriveAddress(d.paymentKeyDerivationPath,d.stakeKeyDerivationIndex);const u=await e.deriveAddress(c.paymentKeyDerivationPath,c.stakeKeyDerivationIndex);const f=await addressHasTx(l,t);const h=await addressHasTx(u,t);if(f)n.push(l);if(h)n.push(u);if(f||h)i=0;else++i;++o}return n};class HDSequentialDiscovery{async discover(e){const t=[await e.deriveAddress({index:0,type:s.AddressType.External},0)];const r=await e.deriveAddress({index:0,type:s.AddressType.Internal},0);if(await addressHasTx(r,__classPrivateFieldGet(this,i,"f")))t.push(r);const d=await discoverAddresses(e,__classPrivateFieldGet(this,i,"f"),n,(e,t)=>({paymentKeyDerivationPath:{index:0,type:t},stakeKeyDerivationIndex:e+1}));const c=await discoverAddresses(e,__classPrivateFieldGet(this,i,"f"),__classPrivateFieldGet(this,o,"f"),(e,t)=>({paymentKeyDerivationPath:{index:e+1,type:t},stakeKeyDerivationIndex:0}));const l=a([...t,...d,...c],"address");return l.sort((e,t)=>e.index-t.index||e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index)}constructor(e,t){i.set(this,void 0);o.set(this,void 0);__classPrivateFieldSet(this,i,e,"f");__classPrivateFieldSet(this,o,t,"f")}}i=new WeakMap,o=new WeakMap;var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/BaseWallet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const l=20;const isValidSharedWalletScript=e=>{switch(e.kind){case c.NativeScriptKind.RequireAllOf:case c.NativeScriptKind.RequireAnyOf:case c.NativeScriptKind.RequireNOf:return e.scripts.every(e=>e.kind===c.NativeScriptKind.RequireSignature);default:return false}};const createPersonalWallet=(e,t)=>{const r={__type:d.PublicCredentialsManagerType.BIP32_CREDENTIALS_MANAGER,addressDiscovery:t.addressDiscovery?t.addressDiscovery:new HDSequentialDiscovery(t.chainHistoryProvider,l),bip32Account:t.bip32Account};return new d.BaseWallet(e,{...t,publicCredentialsManager:r})};const createSharedWallet=(e,t)=>{if(!isValidSharedWalletScript(t.paymentScript)||!isValidSharedWalletScript(t.stakingScript))throw new Error('SharedWallet requires the scripts to be of type "RequireAllOfScript" or "RequireAnyOfScript" or "RequireAtLeastScript"');const r={__type:d.PublicCredentialsManagerType.SCRIPT_CREDENTIALS_MANAGER,paymentScript:t.paymentScript,stakingScript:t.stakingScript};return new d.BaseWallet(e,{...t,publicCredentialsManager:r})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/cip30.js":(e,t,r)=>{"use strict";r.d(t,{createWalletApi:()=>createWalletApi});var s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js");var a=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined";e[e["InvalidFormat"]=4]="InvalidFormat"})(i||(i={}));class DataSignError extends a.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var o;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["UserDeclined"]=2]="UserDeclined"})(o||(o={}));class TxSignError extends a.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var n;(function(e){e[e["Refused"]=1]="Refused";e[e["Failure"]=2]="Failure"})(n||(n={}));class TxSendError extends a.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var P=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var S=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var C=r("../../node_modules/@cardano-sdk/util/dist/esm/freeable.js");var k=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var j=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var x=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var E=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var A=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var I=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var B=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var F=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var M=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js");var R=r("../../node_modules/lodash/uniq.js");var D;(function(e){e["SignData"]="sign_data";e["SignTx"]="sign_tx";e["SubmitTx"]="submit_tx"})(D||(D={}));const signOrCancel=(e,{cancel$:t},r)=>(0,j.firstValueFrom)((0,x.race)((0,T.from)(e),t.pipe((0,E.mergeMap)(()=>(0,A.throwError)(r)))));const firstValueFromTimed=(e,t)=>(0,j.firstValueFrom)(e.pipe((0,I.timeout)({each:t,with:()=>(0,A.throwError)(()=>new s.ApiError(s.APIErrorCode.InternalError,"Timeout"))})));const waitForWalletStateSettle=(e,t=(0,d.Milliseconds)(12e4))=>firstValueFromTimed(e.syncStatus.isSettled$.pipe((0,B.filter)(e=>e)),t);const mapCallbackFailure=(e,t)=>{t.error(e);return false};const processTxInput=e=>{try{const t=c.TxCBOR(e);const r=c.TxCBOR.deserialize(t);return{cbor:t,tx:r}}catch{throw new s.ApiError(s.APIErrorCode.InvalidRequest,"Couldn't parse transaction. Expecting hex-encoded CBOR string.")}};const O=5000000n;const compareUtxos=(e,t)=>{const r=e[1].value.coins;const s=t[1].value.coins;if(r<s)return -1;if(r>s)return 1;return 0};const cardanoAddressToCbor=e=>{const t=l.Address.fromString(e);if(!t){throw new s.ApiError(s.APIErrorCode.InternalError,`could not transform address ${e} to CBOR`)}return t.toBytes()};const formatUnknownError=e=>{return(null==e?void 0:e.message)||"Unknown error"};const parseValueCbor=e=>{try{return u.Value.fromCbor(e)}catch{throw new s.ApiError(s.APIErrorCode.InvalidRequest,"could not parse Value")}};const dumbSelection=(e,t)=>{var r;const s=[];const a=[...(null===(r=t.assets)||void 0===r?void 0:r.entries())||[]];let i=false;for(const o of e){s.push(o);const n=(0,f.coalesceValueQuantities)(s.map(([e,{value:t}])=>t));i=n.coins>=t.coins&&a.every(([e,t])=>{var r;return((null===(r=n.assets)||void 0===r?void 0:r.get(e))||0n)>=t});if(i){break}}if(!i){return null}return s};const walletSelection=async(e,t)=>{try{const r=await (0,j.firstValueFrom)(t.addresses$);const{inputSelection:a}=await t.initializeTx({outputs:new Set([{address:r[0].address,value:e}])});return[...a.inputs]}catch(o){if(o instanceof k.InputSelectionError&&o.failure===k.InputSelectionFailure.UtxoBalanceInsufficient){return null}const i=formatUnknownError(o);throw new s.ApiError(s.APIErrorCode.InternalError,i)}};const selectUtxo=async(e,t,r)=>r?dumbSelection(await (0,j.firstValueFrom)(e.utxo.available$),t):await walletSelection(t,e);const getFilterAsBigNum=e=>{const t=new h.CborReader((0,S.HexBlob)(e));if(t.peekState()===m.CborReaderState.Tag&&t.peekTag()===p.CborTag.UnsignedBigNum){t.readTag();return BigInt(`0x${S.HexBlob.fromBytes(t.readByteString())}`).valueOf()}return t.readInt()};const getFilterAmount=e=>{try{const t=getFilterAsBigNum(e);if(t>O){throw new s.ApiError(s.APIErrorCode.InvalidRequest,"requested amount is too big")}return t}catch(r){throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}};const getSortedUtxos=async e=>{const t=await (0,j.firstValueFrom)(e);return t.sort(compareUtxos)};const addrToSignWith=e=>{try{return v.isRewardAccount(e)?y.RewardAccount(e):v.PaymentAddress(e)}catch{var t;const r=(0,P.Ed25519KeyHashHex)(e);const s=_.DRepID.cip129FromCredential({hash:P.Hash28ByteBase16.fromEd25519KeyHashHex(r),type:l.CredentialType.KeyHash});const a=null===(t=_.DRepID.toAddress(s))||void 0===t?void 0:t.toAddress();if(!a){throw new DataSignError(i.AddressNotPK,"Invalid address")}return a.toBech32()}};const baseCip30WalletApi=(e,t,{logger:r})=>({getBalance:async()=>{r.debug("getting balance");try{const t=await (0,j.firstValueFrom)(e);await waitForWalletStateSettle(t);const s=await (0,j.firstValueFrom)(t.balance.utxo.available$);return u.Value.fromCore(s).toCbor()}catch(a){r.error(a);throw a}},getChangeAddress:async()=>{r.debug("getting changeAddress");try{const t=await (0,j.firstValueFrom)(e);const a=await (0,j.firstValueFrom)(t.addresses$);const i=a[0].address;if(i){return cardanoAddressToCbor(i)}r.error("could not get change address");throw new s.ApiError(s.APIErrorCode.InternalError,"could not get change address")}catch(o){r.error(o);if(o instanceof s.ApiError){throw o}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(o))}},getCollateral:async(t,{amount:a=new u.Value(O).toCbor()}={})=>{r.debug("getting collateral");const i=await (0,j.firstValueFrom)(e);await waitForWalletStateSettle(i);let o=await getSortedUtxos(i.utxo.unspendable$);if(0===o.length){return null}if(o.some(e=>e[1].value.assets&&e[1].value.assets.size>0)){throw new s.ApiError(s.APIErrorCode.Refused,"unspendable UTxOs must not contain assets when used as collateral")}if(a){const n=getFilterAmount(a);try{const d=[];let c=0n;for(const l of o){const f=l[1].value.coins;c+=f;d.push(l);if(c>=n)break}if(c<n){throw new s.ApiError(s.APIErrorCode.Refused,"not enough coins in configured collateral UTxOs")}o=d}catch(h){r.error(h);if(h instanceof s.ApiError){throw h}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(h))}}return o.map(e=>w.TransactionUnspentOutput.fromCore(e).toCbor())},getExtensions:async()=>{r.debug("getting enabled extensions");return Promise.resolve([{cip:95}])},getNetworkId:async()=>{r.debug("getting networkId");const t=await (0,j.firstValueFrom)(e);const s=await (0,j.firstValueFrom)(t.genesisParameters$);return s.networkId},getRewardAddresses:async()=>{r.debug("getting reward addresses");try{const t=await (0,j.firstValueFrom)(e);const a=await (0,j.firstValueFrom)(t.addresses$);const i=R(a.map(e=>e.rewardAccount));if(i&&0!==i.length){return i.map(e=>cardanoAddressToCbor(e))}throw new s.ApiError(s.APIErrorCode.InternalError,"could not get reward address")}catch(o){r.error(o);if(o instanceof s.ApiError){throw o}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(o))}},getUnusedAddresses:async()=>{r.debug("getting unused addresses");const t=await (0,j.firstValueFrom)(e);const s=await t.getNextUnusedAddress();return s.map(e=>cardanoAddressToCbor(e.address))},getUsedAddresses:async()=>{r.debug("getting used addresses");const t=await (0,j.firstValueFrom)(e);const s=await (0,j.firstValueFrom)(t.addresses$);const a=await t.getNextUnusedAddress();const i=s.filter(e=>!a.includes(e));return i.map(e=>cardanoAddressToCbor(e.address))},getUtxos:async(t,r,s)=>{const a=new C.ManagedFreeableScope;try{const i=await (0,j.firstValueFrom)(e);await waitForWalletStateSettle(i);let o=r?await selectUtxo(i,parseValueCbor(r).toCore(),!!s):await (0,j.firstValueFrom)(i.utxo.available$);if(!o)return null;if(s)o=o.slice(s.page*s.limit,s.page*s.limit+s.limit);const n=o.map(e=>w.TransactionUnspentOutput.fromCore(e).toCbor());a.dispose();return n}finally{a.dispose()}},signData:async({sender:s},a,o)=>{r.debug("signData");const n=addrToSignWith(a);const d=(0,S.HexBlob)(o);const c=await t.signData({data:{addr:n,payload:d},sender:s,type:D.SignData}).catch(e=>mapCallbackFailure(e,r));if(c){const l=await (0,j.firstValueFrom)(e);return signOrCancel(l.signData({payload:d,sender:s,signWith:n}),c,()=>new DataSignError(i.UserDeclined,"user declined signing"))}r.debug("sign data declined");throw new DataSignError(i.UserDeclined,"user declined signing")},signTx:async({sender:s},a,i)=>{const n=new C.ManagedFreeableScope;r.debug("signTx",a);const d=c.TxCBOR(a);const l=c.Transaction.fromCbor(d);const u=await (0,j.firstValueFrom)(e);const f=l.toCore();const h=await (0,M.requiresForeignSignatures)(f,u);if(!i&&h)throw new TxSignError(o.ProofGeneration,"The wallet does not have the secret key associated with some of the inputs or certificates.");const m=await t.signTx({data:f,sender:s,type:D.SignTx}).catch(e=>mapCallbackFailure(e,r));if(m){try{const{witness:{signatures:p}}=await signOrCancel(u.finalizeTx({signingContext:{sender:s},tx:d}),m,()=>new TxSignError(o.UserDeclined,"user declined signing tx"));if(i&&0===p.size){throw new TxSignError(o.ProofGeneration,"The wallet does not have the secret key associated with any of the inputs and certificates.")}const v=g.TransactionWitnessSet.fromCore({signatures:p}).toCbor();return Promise.resolve(v)}catch(_){if(_ instanceof TxSignError){throw _}{r.error(_);const y=formatUnknownError(_);throw new TxSignError(o.UserDeclined,y)}}finally{n.dispose()}}else{n.dispose();throw new TxSignError(o.UserDeclined,"user declined signing tx")}},submitTx:async(s,a)=>{r.debug("submitting tx");const{cbor:i,tx:o}=processTxInput(a);const d=await t.submitTx({data:o,type:D.SubmitTx}).catch(e=>mapCallbackFailure(e,r));if(d){try{const c=await (0,j.firstValueFrom)(e);await c.submitTx(i);return o.id}catch(u){r.error(u);const l=u instanceof Error?u.message:"unknown";throw new TxSendError(n.Failure,l)}}else{r.debug("transaction refused");throw new TxSendError(n.Refused,"transaction refused")}}});const getPubStakeKeys=async(e,t)=>{const r=await (0,j.firstValueFrom)(e);return(0,j.firstValueFrom)(r.publicStakeKeys$.pipe((0,F.map)(e=>e.filter(({credentialStatus:e})=>{const r=e===b.StakeCredentialStatus.Registered||e===b.StakeCredentialStatus.Registering?b.StakeCredentialStatus.Registered:b.StakeCredentialStatus.Unregistered;return t===r})),(0,F.map)(e=>e.map(({publicStakeKey:e})=>e))))};const extendedCip95WalletApi=(e,{logger:t})=>({getPubDRepKey:async()=>{t.debug("getting public DRep key");try{const r=await (0,j.firstValueFrom)(e);const a=await r.governance.getPubDRepKey();if(!a)throw new Error("Shared wallet does not support DRep key");return a}catch(i){t.error(i);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(i))}},getRegisteredPubStakeKeys:async()=>{t.debug("getting registered public stake keys");try{return await getPubStakeKeys(e,b.StakeCredentialStatus.Registered)}catch(r){t.error(r);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}},getUnregisteredPubStakeKeys:async()=>{t.debug("getting unregistered public stake keys");try{return await getPubStakeKeys(e,b.StakeCredentialStatus.Unregistered)}catch(r){t.error(r);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}}});const extendedCip142WalletApi=(e,{logger:t})=>({getNetworkMagic:async()=>{try{const r=await (0,j.firstValueFrom)(e);const a=await (0,j.firstValueFrom)(r.genesisParameters$);return a.networkMagic}catch(i){t.error(i);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(i))}}});const createWalletApi=(e,t,{logger:r})=>({...baseCip30WalletApi(e,t,{logger:r}),...extendedCip95WalletApi(e,{logger:r}),...extendedCip142WalletApi(e,{logger:r})})},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryCollectionStore:()=>InMemoryCollectionStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var c=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l;class InMemoryCollectionStore extends d.InMemoryStore{getAll(){if(0===this.docs.length||this.destroyed)return s.EMPTY;return(0,a.of)(this.docs)}setAll(e){if(!this.destroyed){this.docs=e;return(0,a.of)(void 0).pipe((0,i.delay)(1),(0,o.tap)(()=>__classPrivateFieldGet(this,l,"f").next(this.docs)))}return s.EMPTY}destroy(){__classPrivateFieldGet(this,l,"f").complete();return super.destroy()}constructor(){super();l.set(this,new n.Subject);this.docs=[];this.observeAll=(0,c.observeAll)(this,__classPrivateFieldGet(this,l,"f"))}}l=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryDocumentStore:()=>InMemoryDocumentStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var o;class InMemoryDocumentStore extends i.InMemoryStore{get(){if(!__classPrivateFieldGet(this,o,"f")||this.destroyed)return s.EMPTY;return(0,a.of)(__classPrivateFieldGet(this,o,"f"))}set(e){if(!this.destroyed){__classPrivateFieldSet(this,o,e,"f");return(0,a.of)(void 0)}return s.EMPTY}delete(){if(this.destroyed)return s.EMPTY;__classPrivateFieldSet(this,o,null,"f");return(0,a.of)(void 0)}constructor(){super(...arguments);o.set(this,null)}}o=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyValueStore:()=>InMemoryKeyValueStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");class InMemoryKeyValueStore extends i.InMemoryCollectionStore{getValues(e){if(this.destroyed||0===e.length)return s.EMPTY;const t=[];for(const r of e){var i;const o=null===(i=this.docs.find(e=>e.key===r))||void 0===i?void 0:i.value;if(!o)return s.EMPTY;t.push(o)}return(0,a.of)(t)}setValue(e,t){if(this.destroyed)return s.EMPTY;const r=this.docs.findIndex(t=>t.key===e);if(r>=0)this.docs.splice(r,1);this.docs.push({key:e,value:t});return(0,a.of)(void 0)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryStore:()=>InMemoryStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");class InMemoryStore{destroy(){this.destroyed=true;return(0,s.of)(void 0)}constructor(){this.destroyed=false}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryAddressesStore:()=>InMemoryAddressesStore,InMemoryAssetsStore:()=>InMemoryAssetsStore,InMemoryDelegationPortfolioStore:()=>InMemoryDelegationPortfolioStore,InMemoryEraSummariesStore:()=>InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>InMemoryInFlightTransactionsStore,InMemoryPolicyIdsStore:()=>InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>InMemoryStakePoolsStore,InMemoryTipStore:()=>InMemoryTipStore,InMemoryTransactionsStore:()=>InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>InMemoryVolatileTransactionsStore,createInMemoryWalletStores:()=>createInMemoryWalletStores});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");class InMemoryTipStore extends n.InMemoryDocumentStore{}class InMemoryPolicyIdsStore extends n.InMemoryDocumentStore{}class InMemoryProtocolParametersStore extends n.InMemoryDocumentStore{}class InMemoryGenesisParametersStore extends n.InMemoryDocumentStore{}class InMemoryEraSummariesStore extends n.InMemoryDocumentStore{}class InMemoryDelegationPortfolioStore extends n.InMemoryDocumentStore{}class InMemoryAssetsStore extends n.InMemoryDocumentStore{}class InMemoryAddressesStore extends n.InMemoryDocumentStore{}class InMemoryInFlightTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryVolatileTransactionsStore extends n.InMemoryDocumentStore{}class InMemorySignedTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryTransactionsStore extends o.InMemoryCollectionStore{}class InMemoryUtxoStore extends o.InMemoryCollectionStore{}class InMemoryUnspendableUtxoStore extends o.InMemoryCollectionStore{}class InMemoryRewardsHistoryStore extends d.InMemoryKeyValueStore{}class InMemoryRewardAccountInfoStore extends d.InMemoryKeyValueStore{}class InMemoryStakePoolsStore extends d.InMemoryKeyValueStore{}const createInMemoryWalletStores=()=>({addresses:new InMemoryAddressesStore,assets:new InMemoryAssetsStore,delegationPortfolio:new InMemoryDelegationPortfolioStore,destroy(){if(!this.destroyed){this.destroyed=true;return(0,s.combineLatest)([this.addresses.destroy(),this.assets.destroy(),this.genesisParameters.destroy(),this.protocolParameters.destroy(),this.eraSummaries.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy(),this.tip.destroy(),this.transactions.destroy(),this.inFlightTransactions.destroy(),this.volatileTransactions.destroy(),this.utxo.destroy(),this.policyIds.destroy()]).pipe((0,a.map)(()=>void 0))}return i.EMPTY},destroyed:false,eraSummaries:new InMemoryEraSummariesStore,genesisParameters:new InMemoryGenesisParametersStore,inFlightTransactions:new InMemoryInFlightTransactionsStore,policyIds:new InMemoryPolicyIdsStore,protocolParameters:new InMemoryProtocolParametersStore,rewardAccountInfo:new InMemoryRewardAccountInfoStore,rewardsHistory:new InMemoryRewardsHistoryStore,signedTransactions:new InMemorySignedTransactionsStore,stakePools:new InMemoryStakePoolsStore,tip:new InMemoryTipStore,transactions:new InMemoryTransactionsStore,unspendableUtxo:new InMemoryUnspendableUtxoStore,utxo:new InMemoryUtxoStore,volatileTransactions:new InMemoryVolatileTransactionsStore})},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{InMemoryAddressesStore:()=>o.InMemoryAddressesStore,InMemoryAssetsStore:()=>o.InMemoryAssetsStore,InMemoryCollectionStore:()=>a.InMemoryCollectionStore,InMemoryDelegationPortfolioStore:()=>o.InMemoryDelegationPortfolioStore,InMemoryDocumentStore:()=>s.InMemoryDocumentStore,InMemoryEraSummariesStore:()=>o.InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>o.InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>o.InMemoryInFlightTransactionsStore,InMemoryKeyValueStore:()=>i.InMemoryKeyValueStore,InMemoryPolicyIdsStore:()=>o.InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>o.InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>o.InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>o.InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>o.InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>o.InMemoryStakePoolsStore,InMemoryStakeSummaryStore:()=>InMemoryStakeSummaryStore,InMemorySupplySummaryStore:()=>InMemorySupplySummaryStore,InMemoryTipStore:()=>o.InMemoryTipStore,InMemoryTransactionsStore:()=>o.InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>o.InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>o.InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>o.InMemoryVolatileTransactionsStore,PouchDbAddressesStore:()=>h.PouchDbAddressesStore,PouchDbAssetsStore:()=>h.PouchDbAssetsStore,PouchDbCollectionStore:()=>l.PouchDbCollectionStore,PouchDbDelegationPortfolioStore:()=>h.PouchDbDelegationPortfolioStore,PouchDbDocumentStore:()=>u.PouchDbDocumentStore,PouchDbEraSummariesStore:()=>h.PouchDbEraSummariesStore,PouchDbGenesisParametersStore:()=>h.PouchDbGenesisParametersStore,PouchDbInFlightTransactionsStore:()=>h.PouchDbInFlightTransactionsStore,PouchDbKeyValueStore:()=>f.PouchDbKeyValueStore,PouchDbPolicyIdsStore:()=>h.PouchDbPolicyIdsStore,PouchDbProtocolParametersStore:()=>h.PouchDbProtocolParametersStore,PouchDbRewardAccountInfoStore:()=>h.PouchDbRewardAccountInfoStore,PouchDbRewardsHistoryStore:()=>h.PouchDbRewardsHistoryStore,PouchDbSignedTransactionsStore:()=>h.PouchDbSignedTransactionsStore,PouchDbStakePoolsStore:()=>h.PouchDbStakePoolsStore,PouchDbStakeSummaryStore:()=>PouchDbStakeSummaryStore,PouchDbSupplySummaryStore:()=>PouchDbSupplySummaryStore,PouchDbTipStore:()=>h.PouchDbTipStore,PouchDbTransactionsStore:()=>h.PouchDbTransactionsStore,PouchDbUtxoStore:()=>h.PouchDbUtxoStore,PouchDbVolatileTransactionsStore:()=>h.PouchDbVolatileTransactionsStore,createInMemorySupplyDistributionStores:()=>createInMemorySupplyDistributionStores,createInMemoryWalletStores:()=>o.createInMemoryWalletStores,createPouchDbSupplyDistributionStores:()=>createPouchDbSupplyDistributionStores,createPouchDbWalletStores:()=>h.createPouchDbWalletStores});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");class InMemoryStakeSummaryStore extends s.InMemoryDocumentStore{}class InMemorySupplySummaryStore extends s.InMemoryDocumentStore{}const createInMemorySupplyDistributionStores=()=>({destroy(){if(!this.destroyed){this.destroyed=true;return(0,n.combineLatest)([this.stake.destroy(),this.lovelaceSupply.destroy()]).pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new InMemorySupplySummaryStore,stake:new InMemoryStakeSummaryStore});var l=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js");var u=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js");var f=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js");var h=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/pouchDbWalletStores.js");class PouchDbStakeSummaryStore extends u.PouchDbDocumentStore{}class PouchDbSupplySummaryStore extends u.PouchDbDocumentStore{}const createPouchDbSupplyDistributionStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const s=`${r}SupplyDistribution`;return{destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb SupplyDistributionStores...");return this.lovelaceSupply.destroy().pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new PouchDbSupplySummaryStore(s,"lovelaceSupply",t),stake:new PouchDbStakeSummaryStore(s,"stake",t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbCollectionStore:()=>PouchDbCollectionStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var c=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var l=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var u,f;class PouchDbCollectionStore extends n.PouchDbStore{getAll(){if(this.destroyed)return s.EMPTY;return new a.Observable(e=>{this.fetchAllDocs({include_docs:true}).then(t=>{const r=t.map(({doc:e})=>(0,c.sanitizePouchDbDoc)(e));if(r.length>0)e.next(r);e.complete()}).catch(e.complete.bind(e))})}setAll(e){if(this.destroyed)return s.EMPTY;return(0,i.from)(this.idle=this.idle.then(async()=>{try{const t=e.map(e=>({...this.toPouchDbDoc(e),_id:__classPrivateFieldGet(this,u,"f").call(this,e)}));const r=await this.fetchAllDocs();const s=t.map(e=>{const t=r.find(t=>t.id===e._id);if(!t)return e;return{...e,_rev:t.value.rev}});const a=r.filter(e=>!t.some(t=>t._id===e.id));await this.db.bulkDocs(a.map(({id:e,value:{rev:t}})=>({_deleted:true,_id:e,_rev:t})));await this.db.bulkDocs(s);__classPrivateFieldGet(this,f,"f").next(e)}catch(i){this.logger.error(`PouchDbCollectionStore(${this.dbName}): failed to setAll`,e,i)}}))}destroy(){__classPrivateFieldGet(this,f,"f").complete();return super.destroy()}constructor({dbName:e,computeDocId:t},r){super(e,r);u.set(this,void 0);f.set(this,new o.Subject);this.observeAll=(0,d.observeAll)(this,__classPrivateFieldGet(this,f,"f"));__classPrivateFieldSet(this,u,null!=t?t:()=>(0,l["default"])(),"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbDocumentStore:()=>PouchDbDocumentStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;class PouchDbDocumentStore extends o.PouchDbStore{get(){if(this.destroyed)return s.EMPTY;return new a.Observable(e=>{this.db.get(__classPrivateFieldGet(this,d,"f")).then(t=>{e.next((0,n.sanitizePouchDbDoc)(t));e.complete()}).catch(e.complete.bind(e))})}set(e){return this.forcePut(__classPrivateFieldGet(this,d,"f"),e)}delete(){if(this.destroyed)return s.EMPTY;return(0,i.from)((async()=>{const e=await this.getRev(__classPrivateFieldGet(this,d,"f"));if(!e){return}await this.db.remove({_id:__classPrivateFieldGet(this,d,"f"),_rev:e})})())}constructor(e,t,r){super(e,r);d.set(this,void 0);__classPrivateFieldSet(this,d,t,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbKeyValueStore:()=>PouchDbKeyValueStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");class PouchDbKeyValueStore extends o.PouchDbStore{setAll(e){if(this.destroyed)return s.EMPTY;return(0,a.from)(this.idle=this.idle.then(async()=>{try{await this.clearDB();await this.db.bulkDocs(e.map(({key:e,value:t})=>({...this.toPouchDbDoc(t),_id:e})))}catch(t){this.logger.error(`PouchDbDocumentStore(${this.dbName}): failed to setAll`,e,t)}}))}getValues(e){if(this.destroyed)return s.EMPTY;return new i.Observable(t=>{this.db.bulkGet({docs:e.map(e=>({id:e}))}).then(({results:e})=>{const r=[];for(const{docs:s}of e){if(1!==s.length||"error"in s[0]){return t.complete()}r.push((0,n.sanitizePouchDbDoc)(s[0].ok))}t.next(r);t.complete()}).catch(t.complete.bind(t))})}setValue(e,t){return this.forcePut(e,t)}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbStore:()=>PouchDbStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var o=r("../../node_modules/pouchdb/lib/index-browser.es.js");const n=100;class PouchDbStore{async clearDB(){const e=await this.fetchAllDocs();await this.db.bulkDocs(e.map(e=>({_deleted:true,_id:e.id,_rev:e.value.rev})))}destroy(){if(!this.destroyed){this.destroyed=true;return(0,s.from)(this.db.destroy())}return a.EMPTY}toPouchDbDoc(e){return(0,i.toPouchDbDoc)(e)}async getRev(e){const t=await this.db.get(e).catch(()=>void 0);return null==t?void 0:t._rev}async fetchAllDocs(e){const t=await this.db.allDocs({...e,limit:n});if(t&&t.rows.length>0){return[...t.rows,...await this.fetchAllDocs({...e,skip:1,startkey:t.rows[t.rows.length-1].id})]}return t.rows||[]}forcePut(e,t){if(this.destroyed)return a.EMPTY;const r=this.toPouchDbDoc(t);return(0,s.from)(this.idle=this.idle.then(async()=>{const t={_id:e,_rev:await this.getRev(e),...r};try{await this.db.put(t,{force:true})}catch(s){this.logger.warn(`PouchDbStore(${this.dbName}): failed to forcePut`,t,s)}}).catch(()=>void 0))}constructor(e,t){this.dbName=e;this.destroyed=false;this.idle=Promise.resolve();this.logger=t;this.db=new o["default"](e,{auto_compaction:true})}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/pouchDbWalletStores.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbAddressesStore:()=>PouchDbAddressesStore,PouchDbAssetsStore:()=>PouchDbAssetsStore,PouchDbDelegationPortfolioStore:()=>PouchDbDelegationPortfolioStore,PouchDbEraSummariesStore:()=>PouchDbEraSummariesStore,PouchDbGenesisParametersStore:()=>PouchDbGenesisParametersStore,PouchDbInFlightTransactionsStore:()=>PouchDbInFlightTransactionsStore,PouchDbPolicyIdsStore:()=>PouchDbPolicyIdsStore,PouchDbProtocolParametersStore:()=>PouchDbProtocolParametersStore,PouchDbRewardAccountInfoStore:()=>PouchDbRewardAccountInfoStore,PouchDbRewardsHistoryStore:()=>PouchDbRewardsHistoryStore,PouchDbSignedTransactionsStore:()=>PouchDbSignedTransactionsStore,PouchDbStakePoolsStore:()=>PouchDbStakePoolsStore,PouchDbTipStore:()=>PouchDbTipStore,PouchDbTransactionsStore:()=>PouchDbTransactionsStore,PouchDbUtxoStore:()=>PouchDbUtxoStore,PouchDbVolatileTransactionsStore:()=>PouchDbVolatileTransactionsStore,createPouchDbWalletStores:()=>createPouchDbWalletStores});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js");class PouchDbTipStore extends n.PouchDbDocumentStore{}class PouchDbProtocolParametersStore extends n.PouchDbDocumentStore{}class PouchDbGenesisParametersStore extends n.PouchDbDocumentStore{}class PouchDbEraSummariesStore extends n.PouchDbDocumentStore{}class PouchDbDelegationPortfolioStore extends n.PouchDbDocumentStore{}class PouchDbAssetsStore extends n.PouchDbDocumentStore{}class PouchDbAddressesStore extends n.PouchDbDocumentStore{}class PouchDbInFlightTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbVolatileTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbPolicyIdsStore extends n.PouchDbDocumentStore{}class PouchDbSignedTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbTransactionsStore extends o.PouchDbCollectionStore{}class PouchDbUtxoStore extends o.PouchDbCollectionStore{}class PouchDbRewardsHistoryStore extends d.PouchDbKeyValueStore{}class PouchDbRewardAccountInfoStore extends d.PouchDbKeyValueStore{}class PouchDbStakePoolsStore extends d.PouchDbKeyValueStore{}const createPouchDbWalletStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const o=`${r}Docs`;return{addresses:new PouchDbAddressesStore(o,"addresses",t),assets:new PouchDbAssetsStore(o,"assets",t),delegationPortfolio:new PouchDbDelegationPortfolioStore(o,"delegationPortfolio",t),destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb WalletStores...");const e=this.tip.destroy();return(0,s.combineLatest)([e,this.transactions.destroy(),this.utxo.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy()]).pipe((0,a.map)(()=>void 0))}return i.EMPTY},destroyed:false,eraSummaries:new PouchDbEraSummariesStore(o,"EraSummaries",t),genesisParameters:new PouchDbGenesisParametersStore(o,"genesisParameters",t),inFlightTransactions:new PouchDbInFlightTransactionsStore(o,"transactionsInFlight_v2",t),policyIds:new PouchDbPolicyIdsStore(o,"policyIds",t),protocolParameters:new PouchDbProtocolParametersStore(o,"protocolParameters",t),rewardAccountInfo:new PouchDbRewardAccountInfoStore(`${r}RewardAccountInfo`,t),rewardsHistory:new PouchDbRewardsHistoryStore(`${r}RewardsHistory`,t),signedTransactions:new PouchDbSignedTransactionsStore(o,"signedTransactions",t),stakePools:new PouchDbStakePoolsStore(`${r}StakePools`,t),tip:new PouchDbTipStore(o,"tip",t),transactions:new PouchDbTransactionsStore({computeDocId:({blockHeader:{blockNo:e},index:t})=>(1e5*e+t).toString(),dbName:`${r}Transactions_v2`},t),unspendableUtxo:new PouchDbUtxoStore({dbName:`${r}UnspendableUtxo`},t),utxo:new PouchDbUtxoStore({dbName:`${r}Utxo_v2`},t),volatileTransactions:new PouchDbVolatileTransactionsStore(o,"volatileTransactions_v3",t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js":(e,t,r)=>{"use strict";r.d(t,{sanitizePouchDbDoc:()=>sanitizePouchDbDoc,toPouchDbDoc:()=>toPouchDbDoc});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var a=r("../../node_modules/lodash/omit.js");const i=["_id","_rev","_attachments","_conflicts","_revisions","_revs_info"];const o="transformed_type_";const n="transformed_key_";const d={serializeKey:e=>{if(e.startsWith("_")){return`${n}${e}`}return e},transformationTypeKey:o};const c={deserializeKey:e=>{if(e.startsWith(n)){return e.slice(n.length)}return e},transformationTypeKey:o};const toPouchDbDoc=e=>{if(Array.isArray(e)){const t=e.map(e=>(0,s.toSerializableObject)(e,d));return{[o]:"Array",value:t}}return(0,s.toSerializableObject)(e,d)};const fromPouchDbDoc=e=>{if("object"==typeof e){const t=e;if("Array"===t[o])return t.value.map(e=>(0,s.fromSerializableObject)(e,c))}return(0,s.fromSerializableObject)(e,c)};const sanitizePouchDbDoc=e=>fromPouchDbDoc(a(e,i))},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js":(e,t,r)=>{"use strict";r.d(t,{observeAll:()=>observeAll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");const observeAll=(e,t)=>()=>{if(e.destroyed)return s.EMPTY;return(0,a.race)((0,i.concat)(e.getAll().pipe((0,o.defaultIfEmpty)([])),t),t)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js":(e,t,r)=>{"use strict";r.d(t,{combineInputResolvers:()=>combineInputResolvers,createInputResolver:()=>createInputResolver,createWalletUtil:()=>createWalletUtil,requiresForeignSignatures:()=>requiresForeignSignatures});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var u=r("../../node_modules/@cardano-sdk/wallet/dist/esm/types.js");var f=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");var h=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var m=r("../../node_modules/lodash/uniqBy.js");const createInputResolver=({utxo:e,transactions:t})=>{return{async resolveInput(r,s){const a=await (0,l.firstValueFrom)(t.history$);const i=await (0,l.firstValueFrom)(e.available$,{defaultValue:[]});const o=await (0,l.firstValueFrom)(t.outgoing.signed$,{defaultValue:[]});const n=o.flatMap(({tx:e},t)=>e.body.outputs.filter((r,s)=>{const a=o.some(({tx:{body:r}},a)=>t!==a&&r.inputs.some(t=>(0,h.txInEquals)(t,{index:s,txId:e.id})));return!a}).map(t=>{const r={address:t.address,index:e.body.outputs.indexOf(t),txId:e.id};return[r,t]}));const d=[...i,...n].find(([e])=>(0,h.txInEquals)(e,r));if(d)return d[1];if(null==s?void 0:s.hints){var c,u;const f=null==s?void 0:null===(c=s.hints)||void 0===c?void 0:null===(u=c.transactions)||void 0===u?void 0:u.find(e=>e.id===r.txId);if(f&&f.body.outputs.length>r.index){return f.body.outputs[r.index]}}const m=a.findLast(e=>e.id===r.txId);if(m&&m.body.outputs.length>r.index){return m.body.outputs[r.index]}return null}}};const createBackendInputResolver=e=>{const t=new Map;const fetchAndCacheTransaction=async r=>{if(t.has(r)){return t.get(r)}const s=await e.transactionsByHashes({ids:[r]});if(s.length>0){t.set(r,s[0]);return s[0]}return null};return{async resolveInput(e,r){var s;if((null==r?void 0:r.hints)&&(null===(s=r.hints)||void 0===s?void 0:s.transactions)){for(const a of r.hints.transactions)t.set(a.id,a)}const i=await fetchAndCacheTransaction(e.txId);if(!i)return null;return i.body.outputs.length>e.index?i.body.outputs[e.index]:null}}};const combineInputResolvers=(...e)=>({async resolveInput(t,r){for(const s of e){const a=await s.resolveInput(t,r);if(a)return a}return null}});const createWalletUtil=e=>({...(0,f.createOutputValidator)({protocolParameters:()=>(0,l.firstValueFrom)(e.protocolParameters$)}),...e.chainHistoryProvider?combineInputResolvers(createInputResolver(e),createBackendInputResolver(e.chainHistoryProvider)):createInputResolver(e)});const hasForeignInputs=({body:{inputs:e,collaterals:t=[]}},r)=>[...e,...t].some(e=>r.every(t=>!(0,h.txInEquals)(e,t[0])));const hasCommitteeCertificates=({certificates:e})=>(e||[]).some(e=>e.__typename===a.CertificateType.AuthorizeCommitteeHot||e.__typename===a.CertificateType.ResignCommitteeCold);const scriptWalletHasForeignCertificates=(e,t)=>{if(!t){return false}const r=i.RewardAccount.toHash(e);for(const s of t){switch(s.__typename){case a.CertificateType.Registration:case a.CertificateType.StakeRegistration:case a.CertificateType.GenesisKeyDelegation:continue;case a.CertificateType.StakeDeregistration:case a.CertificateType.StakeDelegation:case a.CertificateType.Unregistration:case a.CertificateType.VoteDelegation:case a.CertificateType.StakeVoteDelegation:case a.CertificateType.StakeRegistrationDelegation:case a.CertificateType.VoteRegistrationDelegation:case a.CertificateType.MIR:case a.CertificateType.StakeVoteRegistrationDelegation:if(!s.stakeCredential||s.stakeCredential.type!==o.CredentialType.ScriptHash||s.stakeCredential.hash!==r){return true}break;case a.CertificateType.PoolRegistration:{const d=s.poolParameters.owners.find(t=>t===e);if(!d){return true}break}case a.CertificateType.PoolRetirement:{const c=n.PoolId.fromKeyHash(i.RewardAccount.toHash(e));if(s.poolId!==c){return true}}break;case a.CertificateType.RegisterDelegateRepresentative:case a.CertificateType.UnregisterDelegateRepresentative:case a.CertificateType.UpdateDelegateRepresentative:if(!s.dRepCredential||s.dRepCredential.type!==o.CredentialType.ScriptHash||s.dRepCredential.hash!==r){return true}break;case a.CertificateType.AuthorizeCommitteeHot:case a.CertificateType.ResignCommitteeCold:return true}}return false};const scriptWalletHasForeignVotingProcedures=(e,t)=>{if(!t){return false}for(const r of t){switch(r.voter.__typename){case d.VoterType.ccHotKeyHash:case d.VoterType.ccHotScriptHash:case d.VoterType.stakePoolKeyHash:case d.VoterType.dRepKeyHash:return true;case d.VoterType.dRepScriptHash:{const s=i.RewardAccount.toHash(e);if(r.voter.credential.hash!==s){return true}}}}return false};const requiresForeignSignatures=async(e,t)=>{const r=await (0,l.firstValueFrom)(t.utxo.total$);const a=await (0,l.firstValueFrom)(t.addresses$);const o=a.some(e=>(0,u.isScriptAddress)(e));if(o){const d=a.map(e=>e);return hasForeignInputs(e,r)||scriptWalletHasForeignCertificates(d[0].rewardAccount,e.body.certificates)||scriptWalletHasForeignVotingProcedures(d[0].rewardAccount,e.body.votingProcedures)}const f=a.map(e=>e);const h=m(f,"rewardAccount").map(e=>{const t=i.RewardAccount.toHash(e.rewardAccount);return{derivationPath:e.stakeKeyDerivationPath,poolId:n.PoolId.fromKeyHash(t),rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>null!==e.derivationPath);const p=await t.governance.getPubDRepKey();const v=p?(await s.Ed25519PublicKey.fromHex(p).hash()).hex():void 0;return hasForeignInputs(e,r)||c.checkStakeCredentialCertificates(h,e.body).requiresForeignSignatures||v&&c.getDRepCredentialKeyPaths({dRepKeyHash:v,txBody:e.body}).requiresForeignSignatures||v&&c.getVotingProcedureKeyPaths({dRepKeyHash:v,groupedAddresses:f,txBody:e.body}).requiresForeignSignatures||hasCommitteeCertificates(e.body)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js":(e,t,r)=>{"use strict";r.d(t,{delegatedStakeEquals:()=>delegatedStakeEquals,epochInfoEquals:()=>epochInfoEquals,groupedAddressesEquals:()=>groupedAddressesEquals,signedTxsEquals:()=>signedTxsEquals,tipEquals:()=>tipEquals,transactionsEquals:()=>transactionsEquals,txEquals:()=>txEquals,txInEquals:()=>txInEquals,utxoEquals:()=>utxoEquals});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const tipEquals=(e,t)=>e.hash===t.hash;const txEquals=(e,t)=>e.id===t.id;const sameSortedArrayItems=(e,t,r)=>{if(e.length!==t.length)return false;for(const[s,a]of e.entries())if(!r(a,t[s])){return false}return true};const transactionsEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,txEquals)};const txInEquals=(e,t)=>e.txId===t.txId&&e.index===t.index;const utxoEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,([e],[t])=>txInEquals(e,t))};const eraSummariesEquals=(e,t)=>sameArrayItems(e,t,(e,t)=>e.start.slot===t.start.slot);const groupedAddressEquals=(e,t)=>e.address===t.address;const groupedAddressesEquals=(e,t)=>(0,s.sameArrayItems)(e,t,groupedAddressEquals);const epochInfoEquals=(e,t)=>e.epochNo===t.epochNo;const delegatedStakeEquals=(e,t)=>e.pool.id===t.pool.id&&e.stake===t.stake&&e.percentage===t.percentage;const signedTxEquals=(e,t)=>e.tx.id===t.tx.id;const signedTxsEquals=(e,t)=>(0,s.sameArrayItems)(e,t,signedTxEquals)},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js":(e,t,r)=>{"use strict";r.d(t,{pollProvider:()=>pollProvider});var s=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");const pollProvider=e=>(0,s.poll)({...e,retryBackoffConfig:{...e.retryBackoffConfig,shouldRetry:e=>{if(e instanceof a.ProviderError){return![a.ProviderFailure.NotImplemented,a.ProviderFailure.BadRequest].includes(e.reason)}return false}}}).pipe((0,i.catchError)(e=>{if(e instanceof a.ProviderError){throw e}throw new a.ProviderError(a.ProviderFailure.Unknown,e)}))},"../../node_modules/@cardano-sdk/wallet/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{isKeyHashAddress:()=>isKeyHashAddress,isScriptAddress:()=>isScriptAddress,isTxBodyWithHash:()=>isTxBodyWithHash});const isScriptAddress=e=>"scripts"in e;const isKeyHashAddress=e=>!isScriptAddress(e);const isTxBodyWithHash=e=>"object"==typeof e&&"hash"in e&&"body"in e},"../../node_modules/@cardano-sdk/web-extension/dist/esm/cip30/initializeBackgroundScript.js":(e,t,r)=>{"use strict";r.d(t,{initializeBackgroundScript:()=>initializeBackgroundScript});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js");var a=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const i=["haveAccess","requestAccess","revokeAccess"];const consumeRemoteAuthenticatorApi=({walletName:e},t)=>consumeRemoteApi({baseChannel:authenticatorChannel(e),properties:Object.fromEntries(i.map(e=>[e,RemoteApiPropertyType.MethodReturningPromise]))},t);const walletApiChannel=e=>`wallet-api-${e}`;const util_authenticatorChannel=e=>`authenticator-${e}`;const cloneSender=({frameId:e,id:t,tab:r,url:s})=>({frameId:e,id:t,tab:r?{active:r.active,attention:r.attention,audible:r.audible,autoDiscardable:r.autoDiscardable,cookieStoreId:r.cookieStoreId,discarded:r.discarded,favIconUrl:r.favIconUrl,height:r.height,hidden:r.hidden,highlighted:r.highlighted,id:r.id,incognito:r.incognito,index:r.index,isArticle:r.isArticle,isInReaderMode:r.isInReaderMode,lastAccessed:r.lastAccessed,mutedInfo:r.mutedInfo?{...r.mutedInfo}:void 0,openerTabId:r.openerTabId,pendingUrl:r.pendingUrl,pinned:r.pinned,sessionId:r.sessionId,sharingState:r.sharingState?{...r.sharingState}:void 0,status:r.status,successorTabId:r.successorTabId,title:r.title,url:r.url,width:r.width,windowId:r.windowId}:void 0,url:s});var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");const exposeAuthenticatorApi_authenticatorChannel=e=>`authenticator-${e}`;const exposeAuthenticatorApi=({walletName:e},t)=>(0,s.exposeApi)({api$:(0,o.of)(t.authenticator),baseChannel:exposeAuthenticatorApi_authenticatorChannel(e),properties:Object.fromEntries(i.map(e=>[e,{propType:a.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e},t)=>{if(!t)throw new Error("Unknown sender");return{args:[cloneSender(t)],method:e}}}}]))},t);var n=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f,h,m,p;const v={30:["getNetworkId","getUtxos","getCollateral","getBalance","getExtensions","getUsedAddresses","getUnusedAddresses","getChangeAddress","getRewardAddresses","signTx","signData","submitTx"],95:["getRegisteredPubStakeKeys","getUnregisteredPubStakeKeys","getPubDRepKey","signData"],142:["getNetworkMagic"]};const y=Object.values(v).flat();class Cip30Wallet{async isEnabled(){return __classPrivateFieldGet(this,u,"f").haveAccess()}async enable(e){__classPrivateFieldGet(this,d,"m",h).call(this,null==e?void 0:e.extensions);if(await __classPrivateFieldGet(this,u,"f").requestAccess()){var t;__classPrivateFieldGet(this,c,"f").debug(`${location.origin} has been granted access to wallet api`);const r=null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.filter(({cip:e})=>this.supportedExtensions.some(({cip:t})=>t===e));return __classPrivateFieldGet(this,d,"m",p).call(this,r)}__classPrivateFieldGet(this,c,"f").debug(`${location.origin} not authorized to access wallet api`);throw new ApiError(APIErrorCode.Refused,"wallet not authorized.")}constructor(e,{api:t,authenticator:r,logger:s}){d.add(this);this.apiVersion="0.1.0";this.supportedExtensions=[{cip:95},{cip:142}];c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);this.icon=e.icon;this.name=e.walletName;__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,c,s,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,e.cip30ApiDeviations,"f");this.enable=this.enable.bind(this);this.isEnabled=this.isEnabled.bind(this);if(e.supportedExtensions)this.supportedExtensions=e.supportedExtensions}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakSet,h=function _Cip30Wallet_validateExtensions(e=[]){if(!Array.isArray(e)||e.some(e=>!e||"object"!=typeof e||!e.cip||Number.isNaN(Number(e.cip)))){__classPrivateFieldGet(this,c,"f").debug(`Invalid extensions: ${e}`);throw new n.ApiError(n.APIErrorCode.InvalidRequest,`invalid extensions ${e}`)}},m=async function _Cip30Wallet_wrapGetCollateral(e){var t;const r=await __classPrivateFieldGet(this,l,"f").getCollateral(e);return(null===(t=__classPrivateFieldGet(this,f,"f"))||void 0===t?void 0:t.getCollateralEmptyArray)?null!=r?r:[]:r},p=function _Cip30Wallet_wrapAndEnableApi(e){var t;const r=__classPrivateFieldGet(this,l,"f");const s={experimental:{getCollateral:async e=>__classPrivateFieldGet(this,d,"m",m).call(this,e),...(null===(t=__classPrivateFieldGet(this,f,"f"))||void 0===t?void 0:t.onOffDummyMethods)&&{off:()=>void 0,on:()=>void 0}},getBalance:()=>r.getBalance(),getChangeAddress:()=>r.getChangeAddress(),getCollateral:e=>__classPrivateFieldGet(this,d,"m",m).call(this,e),getExtensions:()=>Promise.resolve(e||[]),getNetworkId:()=>r.getNetworkId(),getRewardAddresses:()=>r.getRewardAddresses(),getUnusedAddresses:()=>r.getUnusedAddresses(),getUsedAddresses:e=>r.getUsedAddresses(e),getUtxos:(e,t)=>r.getUtxos(e,t),signData:(e,t)=>r.signData(e,t),signTx:(e,t)=>r.signTx(e,t),submitTx:e=>r.submitTx(e)};const a={cip95:{getPubDRepKey:()=>r.getPubDRepKey(),getRegisteredPubStakeKeys:()=>r.getRegisteredPubStakeKeys(),getUnregisteredPubStakeKeys:()=>r.getUnregisteredPubStakeKeys(),signData:(e,t)=>r.signData(e,t)},cip142:{getNetworkMagic:()=>r.getNetworkMagic()}};if(e){for(const i of e){const o=`cip${i.cip}`;if(a[o])s[o]=a[o]}}return s};const exposeWalletApi=({walletName:e},t)=>(0,s.exposeApi)({api$:(0,o.of)(t.walletApi),baseChannel:walletApiChannel(e),properties:Object.fromEntries(y.map(e=>[e,{propType:a.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e,args:t},r)=>{if(!r)throw new Error('"sender" is undefined');return{args:[{sender:cloneSender(r)},...t],method:e}},validate:async(e,r)=>{const s=r&&await t.authenticator.haveAccess(cloneSender(r));if(!s){throw new n.ApiError(n.APIErrorCode.Refused,"Call cardano.{walletName}.enable() first")}}}}]))},t);const initializeBackgroundScript=(e,t)=>{const r=exposeAuthenticatorApi(e,t);const s=exposeWalletApi(e,t);return()=>{s.shutdown();r.shutdown()}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js":(e,t,r)=>{"use strict";r.d(t,{createBackgroundMessenger:()=>createBackgroundMessenger,generalizeBackgroundMessenger:()=>generalizeBackgroundMessenger});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/bufferCount.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/pairwise.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var v=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var y=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createBackgroundMessenger=({logger:e,runtime:t})=>{const r=new Map;const getChannel=e=>{let t=r.get(e);if(!t)r.set(e,t={message$:new s.ReplaySubject(1),ports$:new a.BehaviorSubject(new Set)});return t};const onPortMessage=(t,s)=>{e.debug(`[BackgroundMessenger(${s.name})] message`,t);const{message$:a}=r.get(s.name);a.next({data:t,port:s})};const onPortDisconnected=s=>{if(t.lastError)e.warn(`[BackgroundMessenger(${s.name})] Last runtime error`,t.lastError);s.onMessage.removeListener(onPortMessage);s.onDisconnect.removeListener(onPortDisconnected);const{ports$:a}=r.get(s.name);const i=new Set(a.value);i.delete(s);a.next(i);e.debug(`[BackgroundMessenger(${s.name})] disconnected`,s)};const onConnect=t=>{const{ports$:r}=getChannel(t.name);const s=new Set(r.value);s.add(t);t.onMessage.addListener(onPortMessage);t.onDisconnect.addListener(onPortDisconnected);r.next(s);e.debug(`[BackgroundMessenger(${t.name})] connected`)};t.onConnect.addListener(onConnect);return{getChannel,shutdown(){for(const s of[...r.keys()])this.shutdownChannel(s);t.onConnect.removeListener(onConnect);e.warn("[BackgroundMessenger] shutdown")},shutdownChannel(e){const t=r.get(e);if(!t)return;t.message$.complete();for(const s of t.ports$.value)s.disconnect();r.delete(e)}}};const generalizeBackgroundMessenger=(e,t,r)=>({channel:e,connect$:t.getChannel(e).ports$.pipe((0,i.bufferCount)(2,1),(0,o.mergeMap)(([e,t])=>{const r=[...t].filter(t=>!e.has(t));return(0,n.from)(r)})),deriveChannel(s){return generalizeBackgroundMessenger((0,v.deriveChannelName)(e,s),t,r)},disconnect$:t.getChannel(e).ports$.pipe((0,d.pairwise)(),(0,c.filter)(([e,t])=>e.size>t.size),(0,l.map)(([e,t])=>({disconnected:[...e].find(e=>!t.has(e)),remaining:[...t]}))),isShutdown:false,message$:t.getChannel(e).message$,postMessage:s=>{const{ports$:a}=t.getChannel(e);return a.pipe((0,c.filter)(e=>e.size>0),(0,u.first)(),(0,f.tap)(e=>{for(const t of e)t.postMessage(s)}),(0,y.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof h.EmptyError)}),(0,l.map)(()=>void 0),(0,m.catchError)(()=>{r.warn("Couldn't postMessage: messenger shutdown");return(0,p.of)(void 0)}))},shutdown(){t.shutdownChannel(e);this.isShutdown=true}})},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js":(e,t,r)=>{"use strict";r.d(t,{consumeRemoteApi:()=>z,exposeApi:()=>W});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js");var a=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var i=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var o=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");var n=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/util/isObservable.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var P=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var S=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var C=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var k=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var T=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");class WrongTargetError extends o.CustomError{}var E=r("../../node_modules/uuid/dist/esm-browser/v4.js");class RemoteApiShutdownError extends o.CustomError{constructor(e){super(`Remote API with channel '${e}' was shutdown: object can no longer be used.`)}}const consumeMethod=({propName:e,errorTypes:t},{messenger:{message$:r,channel:s,postMessage:i,disconnect$:o,connect$:_},logger:w})=>async(...g)=>{const b={messageId:(0,a.newMessageId)(),request:{args:g.map(e=>(0,C.toSerializableObject)(e)),method:e}};const P=await (0,n.firstValueFrom)((0,d.merge)(i(b).pipe((0,c.mergeMap)(()=>l.EMPTY)),r.pipe((0,u.map)(({data:e})=>(0,C.fromSerializableObject)(e,{errorTypes:[...t||[],WrongTargetError]})),(0,f.filter)(a.isResponseMessage),(0,f.filter)(({messageId:e})=>e===b.messageId),(0,u.map)(({response:e})=>e),(0,f.filter)(e=>!(e instanceof WrongTargetError))),o.pipe((0,f.filter)(e=>0===e.remaining.length),(0,h.tap)(()=>w.warn(`API disconnected before "${e}" resolved. Expecting reconnect.`)),(0,m.switchMap)(()=>_.pipe((0,h.tap)(()=>w.warn(`Reconnected. Waiting for "${e}" response...`)),(0,p.timeout)({first:(0,j.Milliseconds)(1e4),with:()=>(0,v.of)(new RemoteApiShutdownError(s))}),(0,c.mergeMap)(e=>e instanceof RemoteApiShutdownError?(0,v.of)(e):l.EMPTY))))).pipe((0,y.defaultIfEmpty)(new RemoteApiShutdownError(s))));if(P instanceof Error){throw P}return P};const consumeFactory=({method:e,apiProperties:t,errorTypes:r},{logger:s,messenger:i,destructor:o})=>(...n)=>{const d=(0,E["default"])();const c=`${e}-${d}`;const l=i.postMessage({factoryCall:{args:(0,C.toSerializableObject)(n),channel:c,method:e},messageId:(0,a.newMessageId)()}).subscribe();const u=i.deriveChannel(c,{detached:true});const f=consumeMessengerRemoteApi({errorTypes:r,properties:t},{destructor:o,logger:s,messenger:u});o.onGarbageCollected(f,d,()=>{if(u.isShutdown){return}u.postMessage({messageId:(0,a.newMessageId)(),subscribe:false}).subscribe(()=>{l.unsubscribe();u.shutdown()})});return f};const consumeMessengerRemoteApi=({properties:e,errorTypes:t},{logger:r,messenger:s,destructor:o})=>new Proxy({shutdown:s.shutdown},{get(n,d,c){if(d in n)return n[d];const l=e[d];const m=d.toString();if("object"==typeof l)if("propType"in l){switch(l.propType){case i.RemoteApiPropertyType.MethodReturningPromise:return c[d]=consumeMethod({errorTypes:t,options:l.requestOptions,propName:m},{logger:r,messenger:s});case i.RemoteApiPropertyType.ApiFactory:return c[d]=consumeFactory({apiProperties:l.getApiProperties(),errorTypes:t,method:m},{destructor:o,logger:r,messenger:s})}}else{return c[d]=consumeMessengerRemoteApi({errorTypes:t,properties:l},{destructor:o,logger:r,messenger:s.deriveChannel(m)})}else if(l===i.RemoteApiPropertyType.MethodReturningPromise){return c[d]=consumeMethod({errorTypes:t,propName:m},{logger:r,messenger:s})}else if(l===i.RemoteApiPropertyType.HotObservable){const p=s.deriveChannel(m);const v=p.message$.pipe((0,u.map)(({data:e})=>(0,C.fromSerializableObject)(e)));const y=v.pipe((0,f.filter)(a.isCompletionMessage),(0,f.filter)(({subscribe:e})=>!e),(0,h.tap)(({error:e})=>{if(e)throw e}));return c[d]=v.pipe((0,_.takeUntil)(y),(0,f.filter)(a.isEmitMessage),(0,u.map)(({emit:e})=>e),(0,w.shareReplay)(1),(0,f.filter)(a.isNotDisabledApiMsg))}},has(t,r){return r in e}});const bindMessengerRequestHandler=({handler:e},{logger:t,messenger:{message$:r,postMessage:s}})=>{const i=r.subscribe(async({data:r,port:i})=>{if(!(0,a.isRequestMessage)(r))return;let o;try{const n=(0,C.fromSerializableObject)(r.request);o=await e(n,i.sender)}catch(d){t.debug("[MessengerRequestHandler] Error processing message",r,d);o=d instanceof Error?d:new Error("Unknown error")}const c={messageId:r.messageId,response:(0,C.toSerializableObject)(o)};s(c).subscribe()});return{shutdown:()=>i.unsubscribe()}};const isObject=e=>"object"==typeof e&&null!==e;const hasPropType=(e,t)=>isObject(e)&&e.propType===t;const hasAnyPropType=e=>isObject(e)&&"number"==typeof e.propType;const isRemoteApiMethod=e=>hasPropType(e,i.RemoteApiPropertyType.MethodReturningPromise);const isRemoteApiFactory=e=>hasPropType(e,i.RemoteApiPropertyType.ApiFactory);const bindNestedObjChannels=({api$:e,properties:t},{messenger:r,logger:s})=>{const a=Object.entries(t).filter(([e,t])=>"object"==typeof t&&!hasAnyPropType(t)).map(([a])=>exposeMessengerApi({api$:e.pipe((0,h.tap)(e=>{if(e&&("object"!=typeof e[a]||(0,g.isObservable)(e[a]))){throw new x.NotImplementedError(`Trying to expose non-implemented nested object ${a}`)}}),(0,u.map)(e=>e?e[a]:e)),properties:t[a]},{logger:s,messenger:r.deriveChannel(a)}));return{shutdown:()=>{for(const e of a)e.shutdown()}}};const bindFactoryMethods=({api$:e,properties:t},{messenger:r,logger:s})=>{const i=r.message$.subscribe(async({data:i})=>{if(!(0,a.isFactoryCallMessage)(i))return;const o=t[i.factoryCall.method];if(!isRemoteApiFactory(o)){s.warn(`Invalid or missing property definition for api factory method '${i.factoryCall.method}'`);return}try{const n=(0,C.fromSerializableObject)(i.factoryCall.args);const{method:d,channel:c}=i.factoryCall;const u=r.deriveChannel(c,{detached:true});const f=exposeMessengerApi({api$:e.pipe((0,m.switchMap)(e=>{if(!e)return b.NEVER;const t=e[d];if("function"!=typeof t){s.warn("No api method",d);return l.EMPTY}const r=t.apply(e,n);if((0,k.isPromise)(r)){return(0,P.from)(r)}return(0,v.of)(r)})),properties:o.getApiProperties()},{logger:s,messenger:u});let h=null;const teardown=()=>{null==h?void 0:h.unsubscribe();f.shutdown()};h=u.message$.subscribe(e=>{if((0,a.isCompletionMessage)(e.data))teardown()})}catch(p){s.debug("[bindFactoryMethods] error exposing api",i,p)}});return{shutdown:()=>{i.unsubscribe()}}};const bindObservableChannels=({api$:e,properties:t},{messenger:r,logger:s})=>{const o=Object.entries(t).filter(([,e])=>e===i.RemoteApiPropertyType.HotObservable).map(([t])=>{const i=new T.TrackerSubject(e.pipe((0,h.tap)(e=>{if(e&&!(0,g.isObservable)(e[t])){throw new x.NotImplementedError(`Trying to expose non-implemented observable ${t}`)}}),(0,m.switchMap)(e=>e?e[t]:(0,v.of)(a.disabledApiMsg))));const o=r.deriveChannel(t);const n=o.connect$.subscribe(e=>{if(i.value!==T.TrackerSubject.NO_VALUE){try{e.postMessage((0,C.toSerializableObject)({emit:i.value,messageId:(0,a.newMessageId)()}))}catch(t){s.warn("Failed to emit initial value, port immediatelly disconnected?",t)}}});const broadcastMessage=e=>o.postMessage({messageId:(0,a.newMessageId)(),...(0,C.toSerializableObject)(e)}).subscribe();const d=i.subscribe({complete:()=>broadcastMessage({subscribe:false}),error:e=>broadcastMessage({error:e,subscribe:false}),next:e=>broadcastMessage({emit:e})});return()=>{i.complete();n.unsubscribe();d.unsubscribe()}});return{shutdown:()=>{for(const e of o)e()}}};const exposeMessengerApi=({api$:e,properties:t},r)=>{const s=new T.TrackerSubject((0,S.concat)(e,b.NEVER));const a=bindObservableChannels({api$:s,properties:t},r);const o=bindNestedObjChannels({api$:s,properties:t},r);const d=bindFactoryMethods({api$:s,properties:t},r);const c=bindMessengerRequestHandler({handler:async(e,r)=>{const a=t[e.method];if(void 0===a||a!==i.RemoteApiPropertyType.MethodReturningPromise&&!isRemoteApiMethod(a)){throw new Error(`Attempted to call a method that was not explicitly exposed: ${e.method}`)}const{validate:o=async()=>void 0,transform:d=e=>e}=isRemoteApiMethod(a)?a.requestOptions:{};await o(e,r);const{args:c,method:l}=d(e,r);const u=await (0,n.firstValueFrom)(s.pipe((0,f.filter)(e=>!!e)));const h=l in u&&u[l];if("function"!=typeof h){throw new TypeError(`No such API method: ${l}`)}return h.apply(u,c)}},r);return{shutdown:()=>{s.complete();o.shutdown();d.shutdown();a.shutdown();c.shutdown();r.messenger.shutdown()}}};var A=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var I=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var B=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var F=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var M=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js");var R=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var D=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var O=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var G=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var N=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createNonBackgroundMessenger=({baseChannel:e,reconnectConfig:{initialDelay:t,maxDelay:r}={initialDelay:10,maxDelay:1e3}},{logger:s,runtime:i})=>{let o;let n=t;let d=false;const c=new A.Subject;const l=new I.BehaviorSubject(null);const m=new B.ReplaySubject(1);const connect=()=>{if("string"==typeof l.value||l.value)return;const t=i.connect({name:e});l.next(t);t.onDisconnect.addListener(onDisconnect);t.onMessage.addListener(onMessage)};const reconnect=()=>{clearTimeout(o);n=Math.min(Math.pow(n,2),r);o=setTimeout(connect,n)};const onMessage=(r,a)=>{s.debug(`[NonBackgroundMessenger(${e})] message`,r);n=t;m.next({data:r,port:a})};const onDisconnect=t=>{if(i.lastError)s.warn(`[NonBackgroundMessenger(${e})] Last runtime error`,i.lastError);c.next({disconnected:t,remaining:[]});s.debug(`[NonBackgroundMessenger(${e})] disconnected`);t.onMessage.removeListener(onMessage);t.onDisconnect.removeListener(onDisconnect);l.next(d?"shutdown":null);if(!d)reconnect()};connect();const p=l.pipe((0,F.debounceTime)(10),(0,f.filter)(G.isNotNil),(0,M.takeWhile)(e=>"string"!=typeof e));const y=new Set;return{channel:e,connect$:p,deriveChannel(o,{detached:n}={}){const d=createNonBackgroundMessenger({baseChannel:(0,a.deriveChannelName)(e,o),reconnectConfig:{initialDelay:t,maxDelay:r}},{logger:s,runtime:i});if(!n)y.add(d);return d},disconnect$:c,get isShutdown(){return d},message$:m,postMessage(e){return p.pipe((0,R.first)(),(0,h.tap)(t=>t.postMessage(e)),(0,N.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof D.EmptyError)}),(0,u.map)(()=>void 0),(0,O.catchError)(()=>{s.warn("Couldn't postMessage: messenger shutdown");return(0,v.of)(void 0)}))},shutdown(){d=true;const t=l.value;if("string"!=typeof t)null==t?void 0:t.disconnect();clearTimeout(o);for(const r of y.values()){r.shutdown();y.delete(r)}l.complete();c.complete();s.debug(`[NonBackgroundMessenger(${e})] shutdown`)}}};var H=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");const K=(0,H.isBackgroundProcess)();const V=(()=>{let e=null;return t=>e||(e=(0,s.createBackgroundMessenger)(t))})();const _backgroundExposeApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,V(t),t.logger);return exposeMessengerApi(e,{messenger:r,...t})};const _nonBackgroundExposeApi=(e,t)=>exposeMessengerApi(e,{messenger:createNonBackgroundMessenger(e,t),...t});const _nonBackgroundConsumeRemoteApi=(e,t)=>consumeMessengerRemoteApi(e,{destructor:new a.FinalizationRegistryDestructor(t.logger),messenger:createNonBackgroundMessenger(e,t),...t});const _backgroundConsumeRemoteApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,V(t),t.logger);return consumeMessengerRemoteApi(e,{destructor:new a.FinalizationRegistryDestructor(t.logger),messenger:r,...t})};const W=K?_backgroundExposeApi:_nonBackgroundExposeApi;const z=K?_backgroundConsumeRemoteApi:_nonBackgroundConsumeRemoteApi},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js":(e,t,r)=>{"use strict";r.d(t,{RemoteApiPropertyType:()=>s});var s;(function(e){e[e["MethodReturningPromise"]=0]="MethodReturningPromise";e[e["HotObservable"]=1]="HotObservable";e[e["ApiFactory"]=2]="ApiFactory"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js":(e,t,r)=>{"use strict";r.d(t,{FinalizationRegistryDestructor:()=>FinalizationRegistryDestructor,deriveChannelName:()=>deriveChannelName,disabledApiMsg:()=>c,isCompletionMessage:()=>isCompletionMessage,isEmitMessage:()=>isEmitMessage,isFactoryCallMessage:()=>isFactoryCallMessage,isNotDisabledApiMsg:()=>isNotDisabledApiMsg,isRequestMessage:()=>isRequestMessage,isResponseMessage:()=>isResponseMessage,newMessageId:()=>d});var s=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var a,i,o,n;const isRequestLike=e=>"object"==typeof e&&null!==e&&Array.isArray(e.args)&&"string"==typeof e.method;const isRequest=e=>isRequestLike(e)&&void 0===e.channel;const isFactoryCall=e=>isRequestLike(e)&&"string"==typeof e.channel;const looksLikeMessage=e=>"object"==typeof e&&null!==e&&"string"==typeof e.messageId;const isRequestMessage=e=>looksLikeMessage(e)&&isRequest(e.request);const isFactoryCallMessage=e=>looksLikeMessage(e)&&isFactoryCall(e.factoryCall);const isResponseMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("response");const isCompletionMessage=e=>looksLikeMessage(e)&&"boolean"==typeof e.subscribe;const isEmitMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("emit");const d=s["default"];const deriveChannelName=(e,t)=>`${e}-${t}`;const isInternalMsg=e=>{return(null==e?void 0:e.remoteApiInternalMsg)!==void 0};const c={remoteApiInternalMsg:"apiObjDisabled"};const isNotDisabledApiMsg=e=>!isInternalMsg(e)||e.remoteApiInternalMsg!==c.remoteApiInternalMsg;class FinalizationRegistryDestructor{onGarbageCollected(e,t,r){this.callbacks.set(t,r);__classPrivateFieldGet(this,i,"f").register(e,t)}constructor(e){a.add(this);i.set(this,void 0);o.set(this,void 0);this.callbacks=new Map;__classPrivateFieldSet(this,i,new FinalizationRegistry(e=>__classPrivateFieldGet(this,a,"m",n).call(this,e)),"f");__classPrivateFieldSet(this,o,e,"f")}}i=new WeakMap,o=new WeakMap,a=new WeakSet,n=function _FinalizationRegistryDestructor_callback(e){const t=this.callbacks.get(e);if(!t){return __classPrivateFieldGet(this,o,"f").error("heldValue not found in FinalizationRegistryDestructor")}this.callbacks.delete(e);t()}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/observableWallet/util.js":(e,t,r)=>{"use strict";r.d(t,{observableWalletProperties:()=>o,walletRepositoryProperties:()=>n});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const observableWalletChannel=e=>`${e}$`;const a={address:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},asset:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},assets:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},build:s.RemoteApiPropertyType.MethodReturningPromise,coin:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},datum:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},handle:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,value:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory}};const i={addDatum:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},addInput:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},addOutput:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},addReferenceInput:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},build:{getApiProperties:()=>({inspect:s.RemoteApiPropertyType.MethodReturningPromise,sign:s.RemoteApiPropertyType.MethodReturningPromise}),propType:s.RemoteApiPropertyType.ApiFactory},buildOutput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},delegateFirstStakeCredential:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},delegatePortfolio:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},extraSigners:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,metadata:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},removeOutput:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},setValidityInterval:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},signingOptions:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory}};const o={addSignatures:s.RemoteApiPropertyType.MethodReturningPromise,addresses$:s.RemoteApiPropertyType.HotObservable,assetInfo$:s.RemoteApiPropertyType.HotObservable,balance:{rewardAccounts:{deposit$:s.RemoteApiPropertyType.HotObservable,rewards$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}},createTxBuilder:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},currentEpoch$:s.RemoteApiPropertyType.HotObservable,delegation:{distribution$:s.RemoteApiPropertyType.HotObservable,portfolio$:s.RemoteApiPropertyType.HotObservable,rewardAccounts$:s.RemoteApiPropertyType.HotObservable,rewardsHistory$:s.RemoteApiPropertyType.HotObservable},discoverAddresses:s.RemoteApiPropertyType.MethodReturningPromise,eraSummaries$:s.RemoteApiPropertyType.HotObservable,finalizeTx:s.RemoteApiPropertyType.MethodReturningPromise,genesisParameters$:s.RemoteApiPropertyType.HotObservable,getName:s.RemoteApiPropertyType.MethodReturningPromise,getNextUnusedAddress:s.RemoteApiPropertyType.MethodReturningPromise,governance:{getPubDRepKey:s.RemoteApiPropertyType.MethodReturningPromise,isRegisteredAsDRep$:s.RemoteApiPropertyType.HotObservable},handles$:s.RemoteApiPropertyType.HotObservable,initializeTx:s.RemoteApiPropertyType.MethodReturningPromise,protocolParameters$:s.RemoteApiPropertyType.HotObservable,publicStakeKeys$:s.RemoteApiPropertyType.HotObservable,signData:s.RemoteApiPropertyType.MethodReturningPromise,submitTx:s.RemoteApiPropertyType.MethodReturningPromise,syncStatus:{isAnyRequestPending$:s.RemoteApiPropertyType.HotObservable,isSettled$:s.RemoteApiPropertyType.HotObservable,isUpToDate$:s.RemoteApiPropertyType.HotObservable},tip$:s.RemoteApiPropertyType.HotObservable,transactions:{history$:s.RemoteApiPropertyType.HotObservable,new$:s.RemoteApiPropertyType.HotObservable,outgoing:{failed$:s.RemoteApiPropertyType.HotObservable,inFlight$:s.RemoteApiPropertyType.HotObservable,onChain$:s.RemoteApiPropertyType.HotObservable,pending$:s.RemoteApiPropertyType.HotObservable,signed$:s.RemoteApiPropertyType.HotObservable,submitting$:s.RemoteApiPropertyType.HotObservable},rollback$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,setUnspendable:s.RemoteApiPropertyType.MethodReturningPromise,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}};const n={addAccount:s.RemoteApiPropertyType.MethodReturningPromise,addWallet:s.RemoteApiPropertyType.MethodReturningPromise,removeAccount:s.RemoteApiPropertyType.MethodReturningPromise,removeWallet:s.RemoteApiPropertyType.MethodReturningPromise,updateAccountMetadata:s.RemoteApiPropertyType.MethodReturningPromise,updateWalletMetadata:s.RemoteApiPropertyType.MethodReturningPromise,wallets$:s.RemoteApiPropertyType.HotObservable}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/storage/persistentCacheStorage/persistentCacheStorage.js":(e,t,r)=>{"use strict";r.d(t,{createPersistentCacheStorage:()=>i});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");const a=.1;const makeMetadataKey=e=>`${e}-metadata`;const makeItemKey=(e,t)=>`${e}-item-${t}`;const isGetBytesInUsePresent=e=>"getBytesInUse"in e;const makePersistentCacheStorageFactory=e=>({extensionLocalStorage:t,fallbackMaxCollectionItemsGuard:r,resourceName:i,quotaInBytes:o})=>{let n=Promise.resolve();const d=e();const c=makeMetadataKey(i);const getItemKey=e=>makeItemKey(i,e);const getMetadata=async()=>{const e=await t.get(c);return e[c]};const updateMetadata=async e=>{n=n.then(async()=>{const r=await getMetadata();const s=e(r);await t.set({[c]:s})});return n};const updateAccessTime=async e=>{await updateMetadata(t=>({...t,[e]:{accessTime:Date.now()}}))};const isQuotaExceeded=async()=>{const e=await getMetadata();const s=[c,...Object.keys(e)];if(isGetBytesInUsePresent(t)){const a=await t.getBytesInUse(s);return a>o}return s.length>r};const evict=async()=>{const e=await getMetadata();const r=Object.entries(e).map(([e,{accessTime:t}])=>({accessTime:t,key:e})).sort((e,t)=>e.accessTime-t.accessTime).filter((e,t,r)=>{const s=Math.abs(r.length*a);return t<s}).map(e=>e.key);await t.remove(r);await updateMetadata(e=>{for(const t of r)delete e[t];return e})};return{async get(e){const r=getItemKey(e);let a=d.get(r);if(!a){const i=await t.get(r);a=(0,s.fromSerializableObject)(i[r])}if(a)void updateAccessTime(r);return a},async set(e,r){const a=getItemKey(e);d.set(a,r);await t.set({[a]:(0,s.toSerializableObject)(r)});void(async()=>{await updateAccessTime(a);if(await isQuotaExceeded())await evict()})()}}};const i=makePersistentCacheStorageFactory(()=>new Map)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/SigningCoordinator/consumeSigningCoordinatorApi.js":(e,t,r)=>{"use strict";r.d(t,{consumeSigningCoordinatorApi:()=>consumeSigningCoordinatorApi});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js");var a=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const i="signingCoordinator";const o={signData:a.RemoteApiPropertyType.MethodReturningPromise,signTransaction:a.RemoteApiPropertyType.MethodReturningPromise};const consumeSigningCoordinatorApi=e=>(0,s.consumeRemoteApi)({baseChannel:i,properties:o},e)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/WalletRepository/WalletRepository.js":(e,t,r)=>{"use strict";r.d(t,{WalletRepository:()=>WalletRepository});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var m=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js");var p=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var v=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WalletConflictError extends v.CustomError{}var y=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var _=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var w,g,b,P,S;const cloneSplice=(e,t,r,...s)=>[...e.slice(0,t),...s,...e.slice(t+r)];const findAccount=(e,t,r,i)=>{const o=e.findIndex(e=>e.walletId===t);const n=e[o];if(!n||n.type===s.WalletType.Script)return;const d=n.accounts.findIndex(e=>{const t=e.purpose||a.KeyPurpose.STANDARD;return e.accountIndex===r&&t===i});if(d<0)return;return{account:n.accounts[d],accountIdx:d,purpose:i,wallet:n,walletIdx:o}};class WalletRepository{async addWallet(e){__classPrivateFieldGet(this,g,"f").debug("addWallet",e.type);const t=e.type===s.WalletType.Script?await (0,_.getWalletId)(e.paymentScript):await (()=>{var t;const r=null===(t=e.accounts[0])||void 0===t?void 0:t.extendedAccountPublicKey;if(!r){throw new WalletConflictError("New wallet must have at least one account")}return(0,_.getWalletId)(r)})();return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([r,a])=>{if(r.some(e=>e.walletId===t)){throw new WalletConflictError(`Wallet '${t}' already exists`)}if(e.type===s.WalletType.Script)__classPrivateFieldGet(this,w,"m",S).call(this,r,e.ownSigners);return a.setAll([...r,{...e,walletId:t}])}),(0,n.map)(()=>t)))}addAccount(e){const{walletId:t,accountIndex:r,metadata:d,extendedAccountPublicKey:c}=e;__classPrivateFieldGet(this,g,"f").debug("addAccount",t,r,d);const l=e.purpose||a.KeyPurpose.STANDARD;return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([i,o])=>{const u=i.findIndex(e=>e.walletId===t);if(u<0){throw new WalletConflictError(`Wallet '${t}' does not exist`)}const f=i[u];if(f.type===s.WalletType.Script){throw new WalletConflictError("addAccount for script wallets is not supported")}if(f.accounts.some(e=>{const t=e.purpose||a.KeyPurpose.STANDARD;return e.accountIndex===r&&t===l})){throw new WalletConflictError(`Account #${r} with purpose ${l} for wallet '${t}' already exists`)}return o.setAll(cloneSplice(i,u,1,{...f,accounts:[...f.accounts,{accountIndex:r,extendedAccountPublicKey:c,metadata:d,purpose:e.purpose}]})).pipe((0,n.map)(()=>e))})))}updateWalletMetadata(e){const{walletId:t,metadata:r}=e;__classPrivateFieldGet(this,g,"f").debug("updateWalletMetadata",t,r);return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,s])=>{const a=e.findIndex(e=>e.walletId===t);if(a>=0){return s.setAll(cloneSplice(e,a,1,{...e[a],metadata:r}))}throw new WalletConflictError(`Wallet not found: ${t}`)}),(0,n.map)(()=>e)))}updateAccountMetadata(e){const{walletId:t,accountIndex:r,metadata:s}=e;const d=e.purpose||a.KeyPurpose.STANDARD;__classPrivateFieldGet(this,g,"f").debug("updateAccountMetadata",t,r,s,d);return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,a])=>{const i=findAccount(e,t,r,d);if(!i){throw new WalletConflictError(`Account not found: ${t}/${d}/${r}`)}return a.setAll(cloneSplice(e,i.walletIdx,1,{...i.wallet,accounts:cloneSplice(i.wallet.accounts,i.accountIdx,1,{...i.account,metadata:s})}))}),(0,n.map)(()=>e)))}removeAccount(e){const{walletId:t,accountIndex:r,purpose:d}=e;const c=d||a.KeyPurpose.STANDARD;__classPrivateFieldGet(this,g,"f").debug("removeAccount",t,r,c);return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,a])=>{const i=findAccount(e,t,r,c);if(!i){throw new WalletConflictError(`Account '${t}/${c}/${r}' does not exist`)}const o=e.find(e=>e.type===s.WalletType.Script&&e.ownSigners.some(e=>e.walletId===t&&e.accountIndex===r&&e.purpose===c));if(o){throw new WalletConflictError(`Wallet '${o.walletId}' depends on account '${t}/${c}/${r}'`)}return a.setAll(cloneSplice(e,i.walletIdx,1,{...i.wallet,accounts:cloneSplice(i.wallet.accounts,i.accountIdx,1)}))}),(0,n.map)(()=>e)))}removeWallet(e){__classPrivateFieldGet(this,g,"f").debug("removeWallet",e);return(0,i.firstValueFrom)(__classPrivateFieldGet(this,w,"m",P).call(this).pipe((0,d.take)(1),(0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([t,r])=>{const a=t.findIndex(t=>t.walletId===e);if(a<0){throw new WalletConflictError(`Wallet '${e}' does not exist`)}const i=t.find(t=>t.type===s.WalletType.Script&&t.ownSigners.some(t=>t.walletId===e));if(i){throw new WalletConflictError(`Wallet '${i.walletId}' depends on wallet '${e}'`)}return r.setAll(cloneSplice(t,a,1))}),(0,n.map)(()=>e)))}constructor({logger:e,store$:t}){w.add(this);g.set(this,void 0);b.set(this,void 0);__classPrivateFieldSet(this,b,new p.TrackerSubject((0,c.concat)(t,l.NEVER)),"f");__classPrivateFieldSet(this,g,(0,y.contextLogger)(e,"WalletRepository"),"f");this.wallets$=(0,u.defer)(()=>__classPrivateFieldGet(this,b,"f").pipe((0,f.mergeMap)(e=>e.observeAll()))).pipe((0,h.shareReplay)(1))}}g=new WeakMap,b=new WeakMap,w=new WeakSet,P=function _WalletRepository_getWallets(){return this.wallets$.pipe((0,d.take)(1))},S=function _WalletRepository_validateOwnSigners(e,t){for(const r of t)if(!e.some(e=>e.walletId===r.walletId&&e.type!==s.WalletType.Script&&e.accounts.some(e=>e.accountIndex===r.accountIndex))){throw new WalletConflictError(`Wallet or account does not exist: ${r.walletId}/${r.accountIndex}`)}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js":(e,t,r)=>{"use strict";r.d(t,{WalletType:()=>s});var s;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor";e["Script"]="Script"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js":(e,t,r)=>{"use strict";r.d(t,{buildBip32Witnesser:()=>buildBip32Witnesser,buildNativeScriptWitnesser:()=>buildNativeScriptWitnesser,getWalletId:()=>getWalletId,repositoryChannel:()=>repositoryChannel,walletChannel:()=>walletChannel,walletManagerChannel:()=>walletManagerChannel,walletManagerProperties:()=>C});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/blake2b-no-wasm/index.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var n=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var g=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var P=r("../../node_modules/buffer/index.js")["Buffer"];const S="Only native scripts of types: RequireAllOf, RequireAnyOf and RequireNOf are supported by this script witnesser";const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>s.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const isBip32Wallet=e=>e.type===n.WalletType.InMemory||e.type===n.WalletType.Ledger||e.type===n.WalletType.Trezor;const mergeArrays=(e,t,r)=>{const s=new Set(e.map(r));const a=[...e];for(const i of t){const o=r(i);if(!s.has(o)){a.push(i);s.add(o)}}return a};const mergeWitnesses=(e,t)=>{if(!t){if(!e.signatures)e.signatures=new Map;return e}var r,s;const a=new Map([...null!==(r=e.signatures)&&void 0!==r?r:[],...null!==(s=t.signatures)&&void 0!==s?s:[]]);const i=mergeArrays(e.redeemers||[],t.redeemers||[],e=>d.Redeemer.fromCore(e).toCbor());const o=mergeArrays(e.scripts||[],t.scripts||[],e=>c.Script.fromCore(e).toCbor());const n=mergeArrays(e.bootstrap||[],t.bootstrap||[],e=>l.BootstrapWitness.fromCore(e).toCbor());const f=mergeArrays(e.datums||[],t.datums||[],e=>u.PlutusData.fromCore(e).toCbor());return{bootstrap:n,datums:f,redeemers:i,scripts:o,signatures:a}};const isScriptSupported=e=>{if(!f.isNativeScript(e))return false;switch(e.kind){case f.NativeScriptKind.RequireAllOf:case f.NativeScriptKind.RequireAnyOf:case f.NativeScriptKind.RequireNOf:return true;default:return false}};const getTxWithStubWitness=async(e,t,r,a,i)=>{const o=s.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const n=e.withdrawals&&e.withdrawals.length>0?r.scripts.length:0;const d=t.scripts.length;const c=n+d+((null==a?void 0:a.length)||0);const l=new Map;for(let u=0;u<c;++u)l.set(randomPublicKey(),o);const f=mergeWitnesses({scripts:[],signatures:new Map},i);f.signatures=new Map([...f.signatures?f.signatures.entries():[],...l.entries()]);var h;f.scripts=[...null!==(h=f.scripts)&&void 0!==h?h:[],t,r];return f};const requiresStakingWitness=(e,t,r)=>{var s;const a=h.NativeScript.fromCore(t).hash();const i=m.RewardAccount.fromCredential({hash:a,type:p.CredentialType.ScriptHash},r);var o;const n=null!==(o=e.withdrawals())&&void 0!==o?o:new Map;var d;const c=(null!==(d=null===(s=e.certs())||void 0===s?void 0:s.values())&&void 0!==d?d:[]).map(e=>e.toCore());if(n.size>0&&n.has(e=>e===i))return true;for(const l of c){switch(l.__typename){case v.CertificateType.VoteDelegation:case v.CertificateType.StakeVoteDelegation:case v.CertificateType.StakeRegistrationDelegation:case v.CertificateType.VoteRegistrationDelegation:case v.CertificateType.StakeVoteRegistrationDelegation:case v.CertificateType.Registration:case v.CertificateType.Unregistration:case v.CertificateType.StakeDeregistration:case v.CertificateType.StakeDelegation:if(l.stakeCredential.type===p.CredentialType.ScriptHash&&a===l.stakeCredential.hash)return true}}return false};const walletManagerChannel=e=>`${e}-wallet-manager`;const walletChannel=e=>`${walletManagerChannel(e)}-wallet`;const repositoryChannel=e=>`${e}-wallet-repository`;const C={activate:g.RemoteApiPropertyType.MethodReturningPromise,activeWalletId$:g.RemoteApiPropertyType.HotObservable,deactivate:g.RemoteApiPropertyType.MethodReturningPromise,destroyData:g.RemoteApiPropertyType.MethodReturningPromise,switchNetwork:g.RemoteApiPropertyType.MethodReturningPromise};const isScript=e=>{return(null==e?void 0:e.__type)===f.ScriptType.Plutus||(null==e?void 0:e.__type)===f.ScriptType.Native};const isBip32PublicKeyHex=e=>"string"==typeof e&&128===e.length&&/^[\da-f]+$/i.test(e);const getScriptWalletId=async e=>c.Script.fromCore(e).hash().slice(0,32);const getExtendedAccountPublicKeyWalletId=async e=>a(a.BYTES_MIN).update(P.from(e,"hex")).digest("hex");const getKeyAgentWalletId=async e=>getExtendedAccountPublicKeyWalletId(await e.getExtendedAccountPublicKey());const getWalletId=async e=>{if(isScript(e))return getScriptWalletId(e);if(isBip32PublicKeyHex(e))return getExtendedAccountPublicKeyWalletId(e);return getKeyAgentWalletId(e)};const createScriptWitness=async(e,t,r,s,a,i,o)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(S);const n=e.ownSigners.map(e=>e.paymentScriptKeyPath);const d=e.ownSigners.map(e=>e.stakingScriptKeyPath);const c=requiresStakingWitness(a.body(),e.stakingScript,t.networkId);const l=[...n,...c?d:[]];const u=await (0,b.firstValueFrom)(s.wallets$);let f;for(const h of e.ownSigners){const m=u.find(e=>e.walletId===h.walletId);if(!m)throw new Error(`Wallet with id ${h.walletId} not found`);if(!isBip32Wallet(m))throw new Error("Only Bip32 wallets are supported");var p;const v=await r.signTransaction({options:{...o,additionalKeyPaths:[...null!==(p=null==o?void 0:o.additionalKeyPaths)&&void 0!==p?p:[],...l]},signContext:i,tx:a.toCbor()},{accountIndex:h.accountIndex,chainId:t,purpose:h.purpose,wallet:m});f=[...f?f.entries():[],...v.entries()]}return{scripts:[e.paymentScript,...c?[e.stakingScript]:[]],signatures:f?new Map(f):new Map}};const buildBip32Witnesser=(e,t,r,s,a)=>{return{signData:async t=>await s.signData(t,{accountIndex:a,chainId:r,purpose:i.KeyPurpose.STANDARD,wallet:e}),async witness(t,n,d){var c,l;const u=t.toCore();const f=t.getId();const h=(null==d?void 0:d.stubSign)!==void 0&&d.stubSign?await o.stubSignTransaction({context:n,signTransactionOptions:d,txBody:u.body}):await s.signTransaction({options:d,signContext:n,tx:t.toCbor()},{accountIndex:a,chainId:r,purpose:i.KeyPurpose.STANDARD,wallet:e});const m={auxiliaryData:u.auxiliaryData,body:u.body,id:f,isValid:t.isValid(),witness:{...u.witness,signatures:new Map([...h.entries(),...(null===(c=u.witness)||void 0===c?void 0:null===(l=c.signatures)||void 0===l?void 0:l.entries())||[]])}};var p;return{cbor:y.TxCBOR.serialize(m),context:{handleResolutions:null!==(p=n.handleResolutions)&&void 0!==p?p:[]},tx:m}}}};const buildNativeScriptWitnesser=(e,t,r,s,a)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(S);return{signData:async()=>{throw new Error("signData is not supported by this witnesser")},async witness(t,i,o){if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(S);let n;const d=t.toCore();const c=t.getId();if((null==o?void 0:o.stubSign)!==void 0&&o.stubSign)n=await getTxWithStubWitness(d.body,e.paymentScript,e.stakingScript,null==o?void 0:o.extraSigners);else{n=await createScriptWitness(e,r,s,a,new y.Transaction(_.TransactionBody.fromCore(d.body),new w.TransactionWitnessSet),i,o);const l=new Map;if(null==o?void 0:o.extraSigners){for(const u of null==o?void 0:o.extraSigners){const f=await u.sign(t.body());l.set(f.pubKey,f.signature)}}n.signatures=new Map([...n.signatures?n.signatures.entries():[],...l.entries()])}const h={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:t.isValid(),witness:mergeWitnesses(d.witness,n)};var m;return{cbor:y.TxCBOR.serialize(h),context:{handleResolutions:null!==(m=i.handleResolutions)&&void 0!==m?m:[]},tx:h}}}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/walletManager.js":(e,t,r)=>{"use strict";r.d(t,{WalletManager:()=>WalletManager,getWalletStoreId:()=>getWalletStoreId});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var l=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js");var u=r("../../node_modules/@cardano-sdk/crypto/dist/esm/index.js");var __classPrivateFieldSet=function(e,t,r,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v,y,_,w,g,b,P,S,C,k,j,x,T;const isAnyBip32Wallet=e=>e.type===s.WalletType.InMemory||e.type===s.WalletType.Ledger||e.type===s.WalletType.Trezor;const getWalletStoreId=(e,t,r)=>{if(void 0!==r&&0!==r){return`${t.networkId}-${t.networkMagic}-${e}-${r}`}return`${t.networkId}-${t.networkMagic}-${e}`};class WalletManager{switchNetwork(e){if(!__classPrivateFieldGet(this,f,"m",j).call(this))return Promise.resolve();const t={...__classPrivateFieldGet(this,h,"f"),chainId:e};return this.activate(t)}async initialize(){await (0,u.ready)();const{[__classPrivateFieldGet(this,g,"f")]:e}=await __classPrivateFieldGet(this,b,"f").get(__classPrivateFieldGet(this,g,"f"));if(!e){this.activeWalletId$.next(null);return}return this.activate(e)}async activate(e,t){if(!t&&__classPrivateFieldGet(this,f,"m",P).call(this,e)){return}const{walletId:r,chainId:s,accountIndex:i}=e;const o=await (0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"f").wallets$);const n=o.find(e=>e.walletId===r);if(!n){throw new d.InvalidArgumentError("walletId",`Wallet ${r} not found`)}__classPrivateFieldGet(this,f,"m",k).call(this);__classPrivateFieldSet(this,h,e,"f");const c=getWalletStoreId(r,s,i);const l=await __classPrivateFieldGet(this,f,"m",S).call(this,c);const u=__classPrivateFieldGet(this,f,"m",T).call(this,n,r,s,i);const[m]=await Promise.all([__classPrivateFieldGet(this,p,"f").create(e,n,{stores:l,witnesser:u}),__classPrivateFieldGet(this,b,"f").set({[__classPrivateFieldGet(this,g,"f")]:e})]);this.activeWallet$.next({observableWallet:m,props:e});this.activeWalletId$.next(e)}async deactivate(){__classPrivateFieldGet(this,f,"m",k).call(this);await __classPrivateFieldGet(this,b,"f").remove(__classPrivateFieldGet(this,g,"f"));this.activeWalletId$.next(null)}shutdown(){__classPrivateFieldGet(this,f,"m",k).call(this)}async destroyData(e,t){await __classPrivateFieldGet(this,f,"m",C).call(this,e,t)}constructor({name:e},{walletFactory:t,storesFactory:r,logger:s,managerStorage:a,walletRepository:n,signingCoordinatorApi:d}){f.add(this);this.activeWalletId$=new i.ReplaySubject(1);this.activeWallet$=new o.BehaviorSubject(null);h.set(this,null);m.set(this,new Map);p.set(this,void 0);v.set(this,void 0);y.set(this,void 0);_.set(this,void 0);w.set(this,void 0);g.set(this,void 0);b.set(this,void 0);__classPrivateFieldSet(this,y,n,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,g,`${e}-active-wallet`,"f");__classPrivateFieldSet(this,b,a,"f");__classPrivateFieldSet(this,v,r,"f");__classPrivateFieldSet(this,w,s,"f");__classPrivateFieldSet(this,_,d,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,f=new WeakSet,P=function _WalletManager_isActive(e){var t,r,s;if(!__classPrivateFieldGet(this,h,"f"))return false;return(null===(t=__classPrivateFieldGet(this,h,"f"))||void 0===t?void 0:t.walletId)===e.walletId&&(null===(r=__classPrivateFieldGet(this,h,"f"))||void 0===r?void 0:r.accountIndex)===e.accountIndex&&(0,c.deepEquals)(null===(s=__classPrivateFieldGet(this,h,"f"))||void 0===s?void 0:s.chainId,e.chainId)},S=async function _WalletManager_getStores(e){let t=__classPrivateFieldGet(this,m,"f").get(e);if(!t){t=await __classPrivateFieldGet(this,v,"f").create({name:e});__classPrivateFieldGet(this,m,"f").set(e,t)}return t},C=async function _WalletManager_destroyWalletStores(e,t){var r;if((null===(r=__classPrivateFieldGet(this,h,"f"))||void 0===r?void 0:r.walletId)===e)throw new d.InvalidArgumentError("walletId","Cannot destroy active wallet");const s=await (0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"f").wallets$);const i=s.flatMap(e=>{if(isAnyBip32Wallet(e)){return e.accounts.map(r=>getWalletStoreId(e.walletId,t,r.accountIndex))}return getWalletStoreId(e.walletId,t)}).filter(t=>t.includes(e));if(!i||0===i.length)return;for(const o of i){const c=await __classPrivateFieldGet(this,f,"m",S).call(this,o);__classPrivateFieldGet(this,w,"f").debug(`Destroying wallet store ${o}`);await (0,n.lastValueFrom)(c.destroy(),{defaultValue:null});__classPrivateFieldGet(this,m,"f").delete(o)}},k=function _WalletManager_deactivateWallet(){var e;const t=null===(e=this.activeWallet$)||void 0===e?void 0:e.getValue();__classPrivateFieldGet(this,f,"m",x).call(this);null==t?void 0:t.observableWallet.shutdown();__classPrivateFieldSet(this,h,null,"f")},j=function _WalletManager_hasActiveWallet(){return null!==__classPrivateFieldGet(this,h,"f")},x=function _WalletManager_stopEmittingFromActiveWallet(){__classPrivateFieldGet(this,f,"m",j).call(this)&&this.activeWallet$.next(null)},T=function _WalletManager_buildWitnesser(e,t,r,a){let i;switch(e.type){case s.WalletType.InMemory:case s.WalletType.Ledger:case s.WalletType.Trezor:i=(0,l.buildBip32Witnesser)(e,t,r,__classPrivateFieldGet(this,_,"f"),a);break;case s.WalletType.Script:default:i=(0,l.buildNativeScriptWitnesser)(e,t,r,__classPrivateFieldGet(this,_,"f"),__classPrivateFieldGet(this,y,"f"))}return i}},"../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.d(t,{CustomError:()=>a});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var a=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var a=Array(t),i=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,i++)a[i]=o[n]}return a};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var a=0;a<arguments.length;a++)s[a]=r[a];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}}}]);
//# sourceMappingURL=171.chunk.js.map