import{g as mf}from"./chunk-KFAB2DSY.js";import{a as bB}from"./chunk-7ZN6LOJ6.js";import{e as Iu}from"./chunk-HCIXRSEY.js";import{q as Bf}from"./chunk-FU7K6O6V.js";import{_ as df,ca as ff,e as ZB,f as Af,j as ef,n as of,z as lf}from"./chunk-TQFGOCJD.js";import{a as kf}from"./chunk-3R4YQLLG.js";import{a as JB}from"./chunk-CQI745PK.js";import{$a as HB,$c as Rr,A as qi,Ab as Oi,Ba as NB,C as DB,Cb as Mi,Cc as af,Db as XB,Dc as Rj,Eb as An,Ed as Rs,Fb as zB,Gb as WB,Gc as GA,Hd as bu,Id as Xe,Ja as xi,Jd as Ds,Ka as KB,Ob as jf,Pa as vu,Qa as LB,Qb as oe,Rb as Sj,Sb as Ci,Uc as cf,Vb as tf,Xb as rf,Xc as Dj,Ya as UB,Yc as ut,Za as QB,Zc as le,_c as pf,bb as Gi,cb as VB,d as PB,db as Zo,e as _j,eb as Ti,g as OB,h as MB,hd as uf,i as CB,j as Yo,ld as W,mc as Ms,nc as nf,nd as wj,od as Nj,qc as pt,rc as Ie,tc as sf,wc as Cs,xd as _s,y as _B,yb as Pi,z as RB}from"./chunk-P6FNF3PO.js";import{N as $u,U as TB,ia as YB,j as gB,ma as Jt,o as re}from"./chunk-ISLSTDN4.js";import{$a as Fj,$b as wi,Aa as Yk,C as fi,Cd as BB,Ed as fB,Fb as jB,Jb as tB,L as JA,Nd as EA,Oa as xs,Ob as rB,U as Jk,Ud as Ts,V as Or,Wb as Si,Xa as Zk,Ya as I,Za as it,_a as aA,ab as AB,bc as Su,cb as He,cc as Gs,db as _e,eb as J,fb as Mr,ib as Vo,id as Wo,jc as OA,kc as ct,kd as uB,ke as _r,lb as eB,mc as oB,md as lB,oc as Y,oe as TA,pd as $i,qc as Ii,qe as EB,rc as aB,tb as Re,tc as iB,td as dB,uc as UA,ud as mB,vc as cB,wd as kB,xb as Xo,y as aj,yb as zo}from"./chunk-7EAYY6PT.js";import{p as Qo,w as Ck}from"./chunk-VPAI5YFM.js";import{A as sB,B as xe,E as pj,F as Cr,M as hj,b as _k,i as H,l as tA,u as nB}from"./chunk-TB3UVYOQ.js";import{Da as bi,Ga as vB,J as hB,N as Os,P as wu,Q as SB,S as wB,T as De,ba as Cj,ca as IB,d as T,i as pB,j as BA,k as VA,p as yB,q as FB,s as Ve,u as Ps,v as Wt,va as $B,w as cA,x as bA,ya as Jo,z as vi}from"./chunk-E25H5Y2I.js";import{B as yj,D as Wk,L as fA,b as lv,q as LA,w as kA}from"./chunk-5CNB4EIU.js";import{C as zt,D as b,f as uv,m as Rk,n as Dk,p as gi,q as Nk,u as Z,w as dA,x as cj,y as Kk,z as eA}from"./chunk-IW23UAMS.js";import{S as Ho,T as Fi,U as Qk,V as Hk,W as Xt,X as dv,Y as bs,Z as Qe,_ as Me,a as P,aa as qs,b as AA,ba as Vk,ca as SA,da as Xk,ea as zk,fa as Ce,ga as hi,m as yu,n as Lk,o as Uk,p as yi,s as Fu,u as hu,v as Mj,w as X}from"./chunk-27NXJJ7L.js";import{A as at,B as ge,a as x,h as l,j as Ei,l as ij,m as st,n as Vt,x as $A,z as se}from"./chunk-UA6ADLWZ.js";import{a as qB,f as xB,g as GB}from"./chunk-O2N6PUOM.js";import{c as WA,d as cv,f as v,h as n,i as u,l as pv,m as Buffer,n as s}from"./chunk-3KENBVE7.js";var VE=WA((Bt,HE)=>{n();s();var QE=typeof self<"u"?self:Bt,a6=function(){function e(){this.fetch=!1,this.DOMException=QE.DOMException}return e.prototype=QE,new e}();(function(e){var A=function(j){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(h){return h&&DataView.prototype.isPrototypeOf(h)}if(t.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(h){return h&&o.indexOf(Object.prototype.toString.call(h))>-1};function i(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function c(h){return typeof h!="string"&&(h=String(h)),h}function p(h){var q={next:function(){var C=h.shift();return{done:C===void 0,value:C}}};return t.iterable&&(q[Symbol.iterator]=function(){return q}),q}function d(h){this.map={},h instanceof d?h.forEach(function(q,C){this.append(C,q)},this):Array.isArray(h)?h.forEach(function(q){this.append(q[0],q[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(q){this.append(q,h[q])},this)}d.prototype.append=function(h,q){h=i(h),q=c(q);var C=this.map[h];this.map[h]=C?C+", "+q:q},d.prototype.delete=function(h){delete this.map[i(h)]},d.prototype.get=function(h){return h=i(h),this.has(h)?this.map[h]:null},d.prototype.has=function(h){return this.map.hasOwnProperty(i(h))},d.prototype.set=function(h,q){this.map[i(h)]=c(q)},d.prototype.forEach=function(h,q){for(var C in this.map)this.map.hasOwnProperty(C)&&h.call(q,this.map[C],C,this)},d.prototype.keys=function(){var h=[];return this.forEach(function(q,C){h.push(C)}),p(h)},d.prototype.values=function(){var h=[];return this.forEach(function(q){h.push(q)}),p(h)},d.prototype.entries=function(){var h=[];return this.forEach(function(q,C){h.push([C,q])}),p(h)},t.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function m(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function B(h){return new Promise(function(q,C){h.onload=function(){q(h.result)},h.onerror=function(){C(h.error)}})}function f(h){var q=new FileReader,C=B(q);return q.readAsArrayBuffer(h),C}function k(h){var q=new FileReader,C=B(q);return q.readAsText(h),C}function g(h){for(var q=new Uint8Array(h),C=new Array(q.length),R=0;R<q.length;R++)C[R]=String.fromCharCode(q[R]);return C.join("")}function E(h){if(h.slice)return h.slice(0);var q=new Uint8Array(h.byteLength);return q.set(new Uint8Array(h)),q.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:t.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:t.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():t.arrayBuffer&&t.blob&&r(h)?(this._bodyArrayBuffer=E(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||a(h))?this._bodyArrayBuffer=E(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(h){var q=h.toUpperCase();return F.indexOf(q)>-1?q:h}function $(h,q){q=q||{};var C=q.body;if(h instanceof $){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,q.headers||(this.headers=new d(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!C&&h._bodyInit!=null&&(C=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new d(q.headers)),this.method=S(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function M(h){var q=new FormData;return h.trim().split("&").forEach(function(C){if(C){var R=C.split("="),N=R.shift().replace(/\+/g," "),_=R.join("=").replace(/\+/g," ");q.append(decodeURIComponent(N),decodeURIComponent(_))}}),q}function O(h){var q=new d,C=h.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(R){var N=R.split(":"),_=N.shift().trim();if(_){var L=N.join(":").trim();q.append(_,L)}}),q}y.call($.prototype);function G(h,q){q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new d(q.headers),this.url=q.url||"",this._initBody(h)}y.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},G.error=function(){var h=new G(null,{status:0,statusText:""});return h.type="error",h};var z=[301,302,303,307,308];G.redirect=function(h,q){if(z.indexOf(q)===-1)throw new RangeError("Invalid status code");return new G(null,{status:q,headers:{location:h}})},j.DOMException=e.DOMException;try{new j.DOMException}catch{j.DOMException=function(q,C){this.message=q,this.name=C;var R=Error(q);this.stack=R.stack},j.DOMException.prototype=Object.create(Error.prototype),j.DOMException.prototype.constructor=j.DOMException}function D(h,q){return new Promise(function(C,R){var N=new $(h,q);if(N.signal&&N.signal.aborted)return R(new j.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function L(){_.abort()}_.onload=function(){var V={status:_.status,statusText:_.statusText,headers:O(_.getAllResponseHeaders()||"")};V.url="responseURL"in _?_.responseURL:V.headers.get("X-Request-URL");var U="response"in _?_.response:_.responseText;C(new G(U,V))},_.onerror=function(){R(new TypeError("Network request failed"))},_.ontimeout=function(){R(new TypeError("Network request failed"))},_.onabort=function(){R(new j.DOMException("Aborted","AbortError"))},_.open(N.method,N.url,!0),N.credentials==="include"?_.withCredentials=!0:N.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&t.blob&&(_.responseType="blob"),N.headers.forEach(function(V,U){_.setRequestHeader(U,V)}),N.signal&&(N.signal.addEventListener("abort",L),_.onreadystatechange=function(){_.readyState===4&&N.signal.removeEventListener("abort",L)}),_.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return D.polyfill=!0,e.fetch||(e.fetch=D,e.Headers=d,e.Request=$,e.Response=G),j.Headers=d,j.Request=$,j.Response=G,j.fetch=D,Object.defineProperty(j,"__esModule",{value:!0}),j}({})})(a6);a6.fetch.ponyfill=!0;delete a6.fetch.polyfill;var un=a6;Bt=un.fetch;Bt.default=un.fetch;Bt.fetch=un.fetch;Bt.Headers=un.Headers;Bt.Request=un.Request;Bt.Response=un.Response;HE.exports=Bt});var zE=WA((jW,XE)=>{n();s();(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A={rotl:function(j,t){return j<<t|j>>>32-t},rotr:function(j,t){return j<<32-t|j>>>t},endian:function(j){if(j.constructor==Number)return A.rotl(j,8)&16711935|A.rotl(j,24)&4278255360;for(var t=0;t<j.length;t++)j[t]=A.endian(j[t]);return j},randomBytes:function(j){for(var t=[];j>0;j--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(j){for(var t=[],r=0,o=0;r<j.length;r++,o+=8)t[o>>>5]|=j[r]<<24-o%32;return t},wordsToBytes:function(j){for(var t=[],r=0;r<j.length*32;r+=8)t.push(j[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(j){for(var t=[],r=0;r<j.length;r++)t.push((j[r]>>>4).toString(16)),t.push((j[r]&15).toString(16));return t.join("")},hexToBytes:function(j){for(var t=[],r=0;r<j.length;r+=2)t.push(parseInt(j.substr(r,2),16));return t},bytesToBase64:function(j){for(var t=[],r=0;r<j.length;r+=3)for(var o=j[r]<<16|j[r+1]<<8|j[r+2],a=0;a<4;a++)r*8+a*6<=j.length*8?t.push(e.charAt(o>>>6*(3-a)&63)):t.push("=");return t.join("")},base64ToBytes:function(j){j=j.replace(/[^A-Z0-9+\/]/ig,"");for(var t=[],r=0,o=0;r<j.length;o=++r%4)o!=0&&t.push((e.indexOf(j.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<o*2|e.indexOf(j.charAt(r))>>>6-o*2);return t}};XE.exports=A})()});var _l=WA((oW,WE)=>{n();s();var Cl={utf8:{stringToBytes:function(e){return Cl.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Cl.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var A=[],j=0;j<e.length;j++)A.push(e.charCodeAt(j)&255);return A},bytesToString:function(e){for(var A=[],j=0;j<e.length;j++)A.push(String.fromCharCode(e[j]));return A.join("")}}};WE.exports=Cl});var YE=WA((aW,JE)=>{n();s();(function(){var e=zE(),A=_l().utf8,j=_l().bin,t=function(o){o.constructor==String?o=A.stringToBytes(o):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||(o=o.toString());var a=e.bytesToWords(o),i=o.length*8,c=[],p=1732584193,d=-271733879,m=-1732584194,B=271733878,f=-1009589776;a[i>>5]|=128<<24-i%32,a[(i+64>>>9<<4)+15]=i;for(var k=0;k<a.length;k+=16){for(var g=p,E=d,y=m,F=B,S=f,$=0;$<80;$++){if($<16)c[$]=a[k+$];else{var M=c[$-3]^c[$-8]^c[$-14]^c[$-16];c[$]=M<<1|M>>>31}var O=(p<<5|p>>>27)+f+(c[$]>>>0)+($<20?(d&m|~d&B)+1518500249:$<40?(d^m^B)+1859775393:$<60?(d&m|d&B|m&B)-1894007588:(d^m^B)-899497514);f=B,B=m,m=d<<30|d>>>2,d=p,p=O}p+=g,d+=E,m+=y,B+=F,f+=S}return[p,d,m,B,f]},r=function(o,a){var i=e.wordsToBytes(t(o));return a&&a.asBytes?i:a&&a.asString?j.bytesToString(i):e.bytesToHex(i)};r._blocksize=16,r._digestsize=20,JE.exports=r})()});var eg=WA((mW,uq)=>{uq.exports={name:"@phantom-labs/blocklist",version:"0.13.0",main:"index.js",types:"index.d.ts",repository:"git@github.com:phantom-labs/blocklist.git",author:"Jordan Leigh <AlwaysBCoding@gmail.com>",license:"MIT",scripts:{build:"node build.js"},dependencies:{"js-yaml":"^4.1.0",sha3:"^2.1.4"}}});var jg=WA((kW,lq)=>{lq.exports={blocklist:["phantomweb.app","aurory.app","solvision.io","staratlas.art","starsatlas.com","sollet.cc","raydlum.io","aurorynft.com","sneks.gg","solletweb.io","i-sollet.com","fancyfrenchienft.art","solanawebwallet.online","phahtom.com","server-syncwallet.com","staratias.app","raydium.network","grapesnetwork.me","staratias.art","soistarter.org","audius-nft.top","aurory.me","degenapes.app","phantom-app.online","phantomwallet.net","dapps-node.com","phantom-app.link","solanaoutage.com","walletconnectdapps.net","staratlas.cx","web-phantom.app","0120tt.com"],whitelist:[],fuzzylist:[],contentHash:"830ea1c9a833213eabc17990adf053081f503b1203ca9a2c711db7199e657293"}});var tg=WA(Nl=>{n();s();var{version:dq}=eg(),mq=jg(),kq=()=>dq,Bq=()=>mq;Nl.getVersion=kq;Nl.getBlocklist=Bq});var og=WA(dn=>{"use strict";n();s();dn.__esModule=!0;dn.distance=dn.closest=void 0;var ft=new Uint32Array(65536),fq=function(e,A){for(var j=e.length,t=A.length,r=1<<j-1,o=-1,a=0,i=j,c=j;c--;)ft[e.charCodeAt(c)]|=1<<c;for(c=0;c<t;c++){var p=ft[A.charCodeAt(c)],d=p|a;p|=(p&o)+o^o,a|=~(p|o),o&=p,a&r&&i++,o&r&&i--,a=a<<1|1,o=o<<1|~(d|a),a&=d}for(c=j;c--;)ft[e.charCodeAt(c)]=0;return i},Eq=function(e,A){for(var j=A.length,t=e.length,r=[],o=[],a=Math.ceil(j/32),i=Math.ceil(t/32),c=0;c<a;c++)o[c]=-1,r[c]=0;for(var p=0;p<i-1;p++){for(var d=0,m=-1,B=p*32,f=Math.min(32,t)+B,k=B;k<f;k++)ft[e.charCodeAt(k)]|=1<<k;for(var c=0;c<j;c++){var g=ft[A.charCodeAt(c)],E=o[c/32|0]>>>c&1,y=r[c/32|0]>>>c&1,F=g|d,S=((g|y)&m)+m^m|g|y,$=d|~(S|m),M=m&S;$>>>31^E&&(o[c/32|0]^=1<<c),M>>>31^y&&(r[c/32|0]^=1<<c),$=$<<1|E,M=M<<1|y,m=M|~(F|$),d=$&F}for(var k=B;k<f;k++)ft[e.charCodeAt(k)]=0}for(var O=0,G=-1,z=p*32,D=Math.min(32,t-z)+z,k=z;k<D;k++)ft[e.charCodeAt(k)]|=1<<k;for(var h=t,c=0;c<j;c++){var g=ft[A.charCodeAt(c)],E=o[c/32|0]>>>c&1,y=r[c/32|0]>>>c&1,F=g|O,S=((g|y)&G)+G^G|g|y,$=O|~(S|G),M=G&S;h+=$>>>t-1&1,h-=M>>>t-1&1,$>>>31^E&&(o[c/32|0]^=1<<c),M>>>31^y&&(r[c/32|0]^=1<<c),$=$<<1|E,M=M<<1|y,G=M|~(F|$),O=$&F}for(var k=z;k<D;k++)ft[e.charCodeAt(k)]=0;return h},rg=function(e,A){if(e.length<A.length){var j=A;A=e,e=j}return A.length===0?e.length:e.length<=32?fq(e,A):Eq(e,A)};dn.distance=rg;var gq=function(e,A){for(var j=1/0,t=0,r=0;r<A.length;r++){var o=rg(e,A[r]);o<j&&(j=o,t=r)}return A[t]};dn.closest=gq});var ng=WA((Kl,Zs)=>{n();s();(function(){"use strict";var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null}catch{console.log("Collator could not be initialized and wouldn't be used")}var A=og(),j=[],t=[],r={get:function(o,a,i){var c=i&&e&&i.useCollator;if(c){var p=o.length,d=a.length;if(p===0)return d;if(d===0)return p;var m,B,f,k,g;for(f=0;f<d;++f)j[f]=f,t[f]=a.charCodeAt(f);j[d]=d;var E;for(f=0;f<p;++f){for(B=f+1,k=0;k<d;++k)m=B,E=e.compare(o.charAt(f),String.fromCharCode(t[k]))===0,B=j[k]+(E?0:1),g=m+1,B>g&&(B=g),g=j[k+1]+1,B>g&&(B=g),j[k]=m;j[k]=B}return B}return A.distance(o,a)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return r}):typeof Zs<"u"&&Zs!==null&&typeof Kl<"u"&&Zs.exports===Kl?Zs.exports=r:(typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"||typeof self<"u"&&self!==null)&&(self.Levenshtein=r)})()});var Dy=WA((oa,fn)=>{n();s();var zq=200,P7="__lodash_hash_undefined__",S6=1,By=2,fy=9007199254740991,B6="[object Arguments]",$7="[object Array]",Wq="[object AsyncFunction]",Ey="[object Boolean]",gy="[object Date]",yy="[object Error]",Fy="[object Function]",Jq="[object GeneratorFunction]",f6="[object Map]",hy="[object Number]",Yq="[object Null]",Bn="[object Object]",ny="[object Promise]",Zq="[object Proxy]",Sy="[object RegExp]",E6="[object Set]",wy="[object String]",Ax="[object Symbol]",ex="[object Undefined]",v7="[object WeakMap]",Iy="[object ArrayBuffer]",g6="[object DataView]",jx="[object Float32Array]",tx="[object Float64Array]",rx="[object Int8Array]",ox="[object Int16Array]",nx="[object Int32Array]",sx="[object Uint8Array]",ax="[object Uint8ClampedArray]",ix="[object Uint16Array]",cx="[object Uint32Array]",px=/[\\^$.*+?()[\]{}|]/g,ux=/^\[object .+?Constructor\]$/,lx=/^(?:0|[1-9]\d*)$/,_A={};_A[jx]=_A[tx]=_A[rx]=_A[ox]=_A[nx]=_A[sx]=_A[ax]=_A[ix]=_A[cx]=!0;_A[B6]=_A[$7]=_A[Iy]=_A[Ey]=_A[g6]=_A[gy]=_A[yy]=_A[Fy]=_A[f6]=_A[hy]=_A[Bn]=_A[Sy]=_A[E6]=_A[wy]=_A[v7]=!1;var $y=typeof self=="object"&&self&&self.Object===Object&&self,dx=typeof self=="object"&&self&&self.Object===Object&&self,gt=$y||dx||Function("return this")(),vy=typeof oa=="object"&&oa&&!oa.nodeType&&oa,sy=vy&&typeof fn=="object"&&fn&&!fn.nodeType&&fn,by=sy&&sy.exports===vy,S7=by&&$y.process,ay=function(){try{return S7&&S7.binding&&S7.binding("util")}catch{}}(),iy=ay&&ay.isTypedArray;function mx(e,A){for(var j=-1,t=e==null?0:e.length,r=0,o=[];++j<t;){var a=e[j];A(a,j,e)&&(o[r++]=a)}return o}function kx(e,A){for(var j=-1,t=A.length,r=e.length;++j<t;)e[r+j]=A[j];return e}function Bx(e,A){for(var j=-1,t=e==null?0:e.length;++j<t;)if(A(e[j],j,e))return!0;return!1}function fx(e,A){for(var j=-1,t=Array(e);++j<e;)t[j]=A(j);return t}function Ex(e){return function(A){return e(A)}}function gx(e,A){return e.has(A)}function yx(e,A){return e?.[A]}function Fx(e){var A=-1,j=Array(e.size);return e.forEach(function(t,r){j[++A]=[r,t]}),j}function hx(e,A){return function(j){return e(A(j))}}function Sx(e){var A=-1,j=Array(e.size);return e.forEach(function(t){j[++A]=t}),j}var wx=Array.prototype,Ix=Function.prototype,w6=Object.prototype,w7=gt["__core-js_shared__"],qy=Ix.toString,Vj=w6.hasOwnProperty,cy=function(){var e=/[^.]+$/.exec(w7&&w7.keys&&w7.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xy=w6.toString,$x=RegExp("^"+qy.call(Vj).replace(px,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),py=by?gt.Buffer:void 0,y6=gt.Symbol,uy=gt.Uint8Array,Gy=w6.propertyIsEnumerable,vx=wx.splice,Vr=y6?y6.toStringTag:void 0,ly=Object.getOwnPropertySymbols,bx=py?py.isBuffer:void 0,qx=hx(Object.keys,Object),b7=En(gt,"DataView"),na=En(gt,"Map"),q7=En(gt,"Promise"),x7=En(gt,"Set"),G7=En(gt,"WeakMap"),sa=En(Object,"create"),xx=Wr(b7),Gx=Wr(na),Tx=Wr(q7),Px=Wr(x7),Ox=Wr(G7),dy=y6?y6.prototype:void 0,I7=dy?dy.valueOf:void 0;function Xr(e){var A=-1,j=e==null?0:e.length;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function Mx(){this.__data__=sa?sa(null):{},this.size=0}function Cx(e){var A=this.has(e)&&delete this.__data__[e];return this.size-=A?1:0,A}function _x(e){var A=this.__data__;if(sa){var j=A[e];return j===P7?void 0:j}return Vj.call(A,e)?A[e]:void 0}function Rx(e){var A=this.__data__;return sa?A[e]!==void 0:Vj.call(A,e)}function Dx(e,A){var j=this.__data__;return this.size+=this.has(e)?0:1,j[e]=sa&&A===void 0?P7:A,this}Xr.prototype.clear=Mx;Xr.prototype.delete=Cx;Xr.prototype.get=_x;Xr.prototype.has=Rx;Xr.prototype.set=Dx;function yt(e){var A=-1,j=e==null?0:e.length;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function Nx(){this.__data__=[],this.size=0}function Kx(e){var A=this.__data__,j=I6(A,e);if(j<0)return!1;var t=A.length-1;return j==t?A.pop():vx.call(A,j,1),--this.size,!0}function Lx(e){var A=this.__data__,j=I6(A,e);return j<0?void 0:A[j][1]}function Ux(e){return I6(this.__data__,e)>-1}function Qx(e,A){var j=this.__data__,t=I6(j,e);return t<0?(++this.size,j.push([e,A])):j[t][1]=A,this}yt.prototype.clear=Nx;yt.prototype.delete=Kx;yt.prototype.get=Lx;yt.prototype.has=Ux;yt.prototype.set=Qx;function zr(e){var A=-1,j=e==null?0:e.length;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function Hx(){this.size=0,this.__data__={hash:new Xr,map:new(na||yt),string:new Xr}}function Vx(e){var A=$6(this,e).delete(e);return this.size-=A?1:0,A}function Xx(e){return $6(this,e).get(e)}function zx(e){return $6(this,e).has(e)}function Wx(e,A){var j=$6(this,e),t=j.size;return j.set(e,A),this.size+=j.size==t?0:1,this}zr.prototype.clear=Hx;zr.prototype.delete=Vx;zr.prototype.get=Xx;zr.prototype.has=zx;zr.prototype.set=Wx;function F6(e){var A=-1,j=e==null?0:e.length;for(this.__data__=new zr;++A<j;)this.add(e[A])}function Jx(e){return this.__data__.set(e,P7),this}function Yx(e){return this.__data__.has(e)}F6.prototype.add=F6.prototype.push=Jx;F6.prototype.has=Yx;function sr(e){var A=this.__data__=new yt(e);this.size=A.size}function Zx(){this.__data__=new yt,this.size=0}function AG(e){var A=this.__data__,j=A.delete(e);return this.size=A.size,j}function eG(e){return this.__data__.get(e)}function jG(e){return this.__data__.has(e)}function tG(e,A){var j=this.__data__;if(j instanceof yt){var t=j.__data__;if(!na||t.length<zq-1)return t.push([e,A]),this.size=++j.size,this;j=this.__data__=new zr(t)}return j.set(e,A),this.size=j.size,this}sr.prototype.clear=Zx;sr.prototype.delete=AG;sr.prototype.get=eG;sr.prototype.has=jG;sr.prototype.set=tG;function rG(e,A){var j=h6(e),t=!j&&EG(e),r=!j&&!t&&T7(e),o=!j&&!t&&!r&&Ry(e),a=j||t||r||o,i=a?fx(e.length,String):[],c=i.length;for(var p in e)(A||Vj.call(e,p))&&!(a&&(p=="length"||r&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||dG(p,c)))&&i.push(p);return i}function I6(e,A){for(var j=e.length;j--;)if(Oy(e[j][0],A))return j;return-1}function oG(e,A,j){var t=A(e);return h6(e)?t:kx(t,j(e))}function ia(e){return e==null?e===void 0?ex:Yq:Vr&&Vr in Object(e)?uG(e):fG(e)}function my(e){return aa(e)&&ia(e)==B6}function Ty(e,A,j,t,r){return e===A?!0:e==null||A==null||!aa(e)&&!aa(A)?e!==e&&A!==A:nG(e,A,j,t,Ty,r)}function nG(e,A,j,t,r,o){var a=h6(e),i=h6(A),c=a?$7:nr(e),p=i?$7:nr(A);c=c==B6?Bn:c,p=p==B6?Bn:p;var d=c==Bn,m=p==Bn,B=c==p;if(B&&T7(e)){if(!T7(A))return!1;a=!0,d=!1}if(B&&!d)return o||(o=new sr),a||Ry(e)?Py(e,A,j,t,r,o):cG(e,A,c,j,t,r,o);if(!(j&S6)){var f=d&&Vj.call(e,"__wrapped__"),k=m&&Vj.call(A,"__wrapped__");if(f||k){var g=f?e.value():e,E=k?A.value():A;return o||(o=new sr),r(g,E,j,t,o)}}return B?(o||(o=new sr),pG(e,A,j,t,r,o)):!1}function sG(e){if(!_y(e)||kG(e))return!1;var A=My(e)?$x:ux;return A.test(Wr(e))}function aG(e){return aa(e)&&Cy(e.length)&&!!_A[ia(e)]}function iG(e){if(!BG(e))return qx(e);var A=[];for(var j in Object(e))Vj.call(e,j)&&j!="constructor"&&A.push(j);return A}function Py(e,A,j,t,r,o){var a=j&S6,i=e.length,c=A.length;if(i!=c&&!(a&&c>i))return!1;var p=o.get(e);if(p&&o.get(A))return p==A;var d=-1,m=!0,B=j&By?new F6:void 0;for(o.set(e,A),o.set(A,e);++d<i;){var f=e[d],k=A[d];if(t)var g=a?t(k,f,d,A,e,o):t(f,k,d,e,A,o);if(g!==void 0){if(g)continue;m=!1;break}if(B){if(!Bx(A,function(E,y){if(!gx(B,y)&&(f===E||r(f,E,j,t,o)))return B.push(y)})){m=!1;break}}else if(!(f===k||r(f,k,j,t,o))){m=!1;break}}return o.delete(e),o.delete(A),m}function cG(e,A,j,t,r,o,a){switch(j){case g6:if(e.byteLength!=A.byteLength||e.byteOffset!=A.byteOffset)return!1;e=e.buffer,A=A.buffer;case Iy:return!(e.byteLength!=A.byteLength||!o(new uy(e),new uy(A)));case Ey:case gy:case hy:return Oy(+e,+A);case yy:return e.name==A.name&&e.message==A.message;case Sy:case wy:return e==A+"";case f6:var i=Fx;case E6:var c=t&S6;if(i||(i=Sx),e.size!=A.size&&!c)return!1;var p=a.get(e);if(p)return p==A;t|=By,a.set(e,A);var d=Py(i(e),i(A),t,r,o,a);return a.delete(e),d;case Ax:if(I7)return I7.call(e)==I7.call(A)}return!1}function pG(e,A,j,t,r,o){var a=j&S6,i=ky(e),c=i.length,p=ky(A),d=p.length;if(c!=d&&!a)return!1;for(var m=c;m--;){var B=i[m];if(!(a?B in A:Vj.call(A,B)))return!1}var f=o.get(e);if(f&&o.get(A))return f==A;var k=!0;o.set(e,A),o.set(A,e);for(var g=a;++m<c;){B=i[m];var E=e[B],y=A[B];if(t)var F=a?t(y,E,B,A,e,o):t(E,y,B,e,A,o);if(!(F===void 0?E===y||r(E,y,j,t,o):F)){k=!1;break}g||(g=B=="constructor")}if(k&&!g){var S=e.constructor,$=A.constructor;S!=$&&"constructor"in e&&"constructor"in A&&!(typeof S=="function"&&S instanceof S&&typeof $=="function"&&$ instanceof $)&&(k=!1)}return o.delete(e),o.delete(A),k}function ky(e){return oG(e,FG,lG)}function $6(e,A){var j=e.__data__;return mG(A)?j[typeof A=="string"?"string":"hash"]:j.map}function En(e,A){var j=yx(e,A);return sG(j)?j:void 0}function uG(e){var A=Vj.call(e,Vr),j=e[Vr];try{e[Vr]=void 0;var t=!0}catch{}var r=xy.call(e);return t&&(A?e[Vr]=j:delete e[Vr]),r}var lG=ly?function(e){return e==null?[]:(e=Object(e),mx(ly(e),function(A){return Gy.call(e,A)}))}:hG,nr=ia;(b7&&nr(new b7(new ArrayBuffer(1)))!=g6||na&&nr(new na)!=f6||q7&&nr(q7.resolve())!=ny||x7&&nr(new x7)!=E6||G7&&nr(new G7)!=v7)&&(nr=function(e){var A=ia(e),j=A==Bn?e.constructor:void 0,t=j?Wr(j):"";if(t)switch(t){case xx:return g6;case Gx:return f6;case Tx:return ny;case Px:return E6;case Ox:return v7}return A});function dG(e,A){return A=A??fy,!!A&&(typeof e=="number"||lx.test(e))&&e>-1&&e%1==0&&e<A}function mG(e){var A=typeof e;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?e!=="__proto__":e===null}function kG(e){return!!cy&&cy in e}function BG(e){var A=e&&e.constructor,j=typeof A=="function"&&A.prototype||w6;return e===j}function fG(e){return xy.call(e)}function Wr(e){if(e!=null){try{return qy.call(e)}catch{}try{return e+""}catch{}}return""}function Oy(e,A){return e===A||e!==e&&A!==A}var EG=my(function(){return arguments}())?my:function(e){return aa(e)&&Vj.call(e,"callee")&&!Gy.call(e,"callee")},h6=Array.isArray;function gG(e){return e!=null&&Cy(e.length)&&!My(e)}var T7=bx||SG;function yG(e,A){return Ty(e,A)}function My(e){if(!_y(e))return!1;var A=ia(e);return A==Fy||A==Jq||A==Wq||A==Zq}function Cy(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fy}function _y(e){var A=typeof e;return e!=null&&(A=="object"||A=="function")}function aa(e){return e!=null&&typeof e=="object"}var Ry=iy?Ex(iy):aG;function FG(e){return gG(e)?rG(e):iG(e)}function hG(){return[]}function SG(){return!1}fn.exports=yG});var gF=WA((ca,yn)=>{n();s();var Wy=200,wG="Expected a function",U7="__lodash_hash_undefined__",T6=1,hn=2,Q7=1/0,Jy=9007199254740991,v6="[object Arguments]",C7="[object Array]",Yy="[object Boolean]",Zy="[object Date]",AF="[object Error]",eF="[object Function]",IG="[object GeneratorFunction]",b6="[object Map]",jF="[object Number]",gn="[object Object]",Ny="[object Promise]",tF="[object RegExp]",q6="[object Set]",rF="[object String]",oF="[object Symbol]",_7="[object WeakMap]",nF="[object ArrayBuffer]",x6="[object DataView]",$G="[object Float32Array]",vG="[object Float64Array]",bG="[object Int8Array]",qG="[object Int16Array]",xG="[object Int32Array]",GG="[object Uint8Array]",TG="[object Uint8ClampedArray]",PG="[object Uint16Array]",OG="[object Uint32Array]",MG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CG=/^\w*$/,_G=/^\./,RG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DG=/[\\^$.*+?()[\]{}|]/g,NG=/\\(\\)?/g,KG=/^\[object .+?Constructor\]$/,LG=/^(?:0|[1-9]\d*)$/,RA={};RA[$G]=RA[vG]=RA[bG]=RA[qG]=RA[xG]=RA[GG]=RA[TG]=RA[PG]=RA[OG]=!0;RA[v6]=RA[C7]=RA[nF]=RA[Yy]=RA[x6]=RA[Zy]=RA[AF]=RA[eF]=RA[b6]=RA[jF]=RA[gn]=RA[tF]=RA[q6]=RA[rF]=RA[_7]=!1;var sF=typeof self=="object"&&self&&self.Object===Object&&self,UG=typeof self=="object"&&self&&self.Object===Object&&self,ir=sF||UG||Function("return this")(),aF=typeof ca=="object"&&ca&&!ca.nodeType&&ca,Ky=aF&&typeof yn=="object"&&yn&&!yn.nodeType&&yn,QG=Ky&&Ky.exports===aF,Ly=QG&&sF.process,Uy=function(){try{return Ly&&Ly.binding("util")}catch{}}(),Qy=Uy&&Uy.isTypedArray;function HG(e,A){var j=e?e.length:0;return!!j&&WG(e,A,0)>-1}function VG(e,A,j){for(var t=-1,r=e?e.length:0;++t<r;)if(j(A,e[t]))return!0;return!1}function XG(e,A){for(var j=-1,t=e?e.length:0;++j<t;)if(A(e[j],j,e))return!0;return!1}function zG(e,A,j,t){for(var r=e.length,o=j+(t?1:-1);t?o--:++o<r;)if(A(e[o],o,e))return o;return-1}function WG(e,A,j){if(A!==A)return zG(e,JG,j);for(var t=j-1,r=e.length;++t<r;)if(e[t]===A)return t;return-1}function JG(e){return e!==e}function YG(e){return function(A){return A?.[e]}}function ZG(e,A){for(var j=-1,t=Array(e);++j<e;)t[j]=A(j);return t}function AT(e){return function(A){return e(A)}}function eT(e,A){return e.has(A)}function jT(e,A){return e?.[A]}function R7(e){var A=!1;if(e!=null&&typeof e.toString!="function")try{A=!!(e+"")}catch{}return A}function tT(e){var A=-1,j=Array(e.size);return e.forEach(function(t,r){j[++A]=[r,t]}),j}function rT(e,A){return function(j){return e(A(j))}}function H7(e){var A=-1,j=Array(e.size);return e.forEach(function(t){j[++A]=t}),j}var oT=Array.prototype,nT=Function.prototype,P6=Object.prototype,O7=ir["__core-js_shared__"],Hy=function(){var e=/[^.]+$/.exec(O7&&O7.keys&&O7.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),iF=nT.toString,ht=P6.hasOwnProperty,Sn=P6.toString,sT=RegExp("^"+iF.call(ht).replace(DG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vy=ir.Symbol,Xy=ir.Uint8Array,aT=P6.propertyIsEnumerable,iT=oT.splice,cT=rT(Object.keys,Object),D7=wn(ir,"DataView"),pa=wn(ir,"Map"),N7=wn(ir,"Promise"),Fn=wn(ir,"Set"),K7=wn(ir,"WeakMap"),ua=wn(Object,"create"),pT=Zr(D7),uT=Zr(pa),lT=Zr(N7),dT=Zr(Fn),mT=Zr(K7),G6=Vy?Vy.prototype:void 0,M7=G6?G6.valueOf:void 0,zy=G6?G6.toString:void 0;function Jr(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function kT(){this.__data__=ua?ua(null):{}}function BT(e){return this.has(e)&&delete this.__data__[e]}function fT(e){var A=this.__data__;if(ua){var j=A[e];return j===U7?void 0:j}return ht.call(A,e)?A[e]:void 0}function ET(e){var A=this.__data__;return ua?A[e]!==void 0:ht.call(A,e)}function gT(e,A){var j=this.__data__;return j[e]=ua&&A===void 0?U7:A,this}Jr.prototype.clear=kT;Jr.prototype.delete=BT;Jr.prototype.get=fT;Jr.prototype.has=ET;Jr.prototype.set=gT;function St(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function yT(){this.__data__=[]}function FT(e){var A=this.__data__,j=O6(A,e);if(j<0)return!1;var t=A.length-1;return j==t?A.pop():iT.call(A,j,1),!0}function hT(e){var A=this.__data__,j=O6(A,e);return j<0?void 0:A[j][1]}function ST(e){return O6(this.__data__,e)>-1}function wT(e,A){var j=this.__data__,t=O6(j,e);return t<0?j.push([e,A]):j[t][1]=A,this}St.prototype.clear=yT;St.prototype.delete=FT;St.prototype.get=hT;St.prototype.has=ST;St.prototype.set=wT;function wt(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function IT(){this.__data__={hash:new Jr,map:new(pa||St),string:new Jr}}function $T(e){return M6(this,e).delete(e)}function vT(e){return M6(this,e).get(e)}function bT(e){return M6(this,e).has(e)}function qT(e,A){return M6(this,e).set(e,A),this}wt.prototype.clear=IT;wt.prototype.delete=$T;wt.prototype.get=vT;wt.prototype.has=bT;wt.prototype.set=qT;function la(e){var A=-1,j=e?e.length:0;for(this.__data__=new wt;++A<j;)this.add(e[A])}function xT(e){return this.__data__.set(e,U7),this}function GT(e){return this.__data__.has(e)}la.prototype.add=la.prototype.push=xT;la.prototype.has=GT;function Ft(e){this.__data__=new St(e)}function TT(){this.__data__=new St}function PT(e){return this.__data__.delete(e)}function OT(e){return this.__data__.get(e)}function MT(e){return this.__data__.has(e)}function CT(e,A){var j=this.__data__;if(j instanceof St){var t=j.__data__;if(!pa||t.length<Wy-1)return t.push([e,A]),this;j=this.__data__=new wt(t)}return j.set(e,A),this}Ft.prototype.clear=TT;Ft.prototype.delete=PT;Ft.prototype.get=OT;Ft.prototype.has=MT;Ft.prototype.set=CT;function _T(e,A){var j=Yr(e)||BF(e)?ZG(e.length,String):[],t=j.length,r=!!t;for(var o in e)(A||ht.call(e,o))&&!(r&&(o=="length"||lF(o,t)))&&j.push(o);return j}function O6(e,A){for(var j=e.length;j--;)if(kF(e[j][0],A))return j;return-1}function cF(e,A){A=C6(A,e)?[A]:pF(A);for(var j=0,t=A.length;e!=null&&j<t;)e=e[_6(A[j++])];return j&&j==t?e:void 0}function RT(e){return Sn.call(e)}function DT(e,A){return e!=null&&A in Object(e)}function V7(e,A,j,t,r){return e===A?!0:e==null||A==null||!R6(e)&&!D6(A)?e!==e&&A!==A:NT(e,A,V7,j,t,r)}function NT(e,A,j,t,r,o){var a=Yr(e),i=Yr(A),c=C7,p=C7;a||(c=ar(e),c=c==v6?gn:c),i||(p=ar(A),p=p==v6?gn:p);var d=c==gn&&!R7(e),m=p==gn&&!R7(A),B=c==p;if(B&&!d)return o||(o=new Ft),a||iP(e)?uF(e,A,j,t,r,o):ZT(e,A,c,j,t,r,o);if(!(r&hn)){var f=d&&ht.call(e,"__wrapped__"),k=m&&ht.call(A,"__wrapped__");if(f||k){var g=f?e.value():e,E=k?A.value():A;return o||(o=new Ft),j(g,E,t,r,o)}}return B?(o||(o=new Ft),AP(e,A,j,t,r,o)):!1}function KT(e,A,j,t){var r=j.length,o=r,a=!t;if(e==null)return!o;for(e=Object(e);r--;){var i=j[r];if(a&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++r<o;){i=j[r];var c=i[0],p=e[c],d=i[1];if(a&&i[2]){if(p===void 0&&!(c in e))return!1}else{var m=new Ft;if(t)var B=t(p,d,c,e,A,m);if(!(B===void 0?V7(d,p,t,T6|hn,m):B))return!1}}return!0}function LT(e){if(!R6(e)||rP(e))return!1;var A=EF(e)||R7(e)?sT:KG;return A.test(Zr(e))}function UT(e){return D6(e)&&z7(e.length)&&!!RA[Sn.call(e)]}function QT(e){return typeof e=="function"?e:e==null?lP:typeof e=="object"?Yr(e)?XT(e[0],e[1]):VT(e):mP(e)}function HT(e){if(!oP(e))return cT(e);var A=[];for(var j in Object(e))ht.call(e,j)&&j!="constructor"&&A.push(j);return A}function VT(e){var A=eP(e);return A.length==1&&A[0][2]?mF(A[0][0],A[0][1]):function(j){return j===e||KT(j,e,A)}}function XT(e,A){return C6(e)&&dF(A)?mF(_6(e),A):function(j){var t=pP(j,e);return t===void 0&&t===A?uP(j,e):V7(A,t,void 0,T6|hn)}}function zT(e){return function(A){return cF(A,e)}}function WT(e){if(typeof e=="string")return e;if(W7(e))return zy?zy.call(e):"";var A=e+"";return A=="0"&&1/e==-Q7?"-0":A}function JT(e,A,j){var t=-1,r=HG,o=e.length,a=!0,i=[],c=i;if(j)a=!1,r=VG;else if(o>=Wy){var p=A?null:YT(e);if(p)return H7(p);a=!1,r=eT,c=new la}else c=A?[]:i;A:for(;++t<o;){var d=e[t],m=A?A(d):d;if(d=j||d!==0?d:0,a&&m===m){for(var B=c.length;B--;)if(c[B]===m)continue A;A&&c.push(m),i.push(d)}else r(c,m,j)||(c!==i&&c.push(m),i.push(d))}return i}function pF(e){return Yr(e)?e:nP(e)}var YT=Fn&&1/H7(new Fn([,-0]))[1]==Q7?function(e){return new Fn(e)}:dP;function uF(e,A,j,t,r,o){var a=r&hn,i=e.length,c=A.length;if(i!=c&&!(a&&c>i))return!1;var p=o.get(e);if(p&&o.get(A))return p==A;var d=-1,m=!0,B=r&T6?new la:void 0;for(o.set(e,A),o.set(A,e);++d<i;){var f=e[d],k=A[d];if(t)var g=a?t(k,f,d,A,e,o):t(f,k,d,e,A,o);if(g!==void 0){if(g)continue;m=!1;break}if(B){if(!XG(A,function(E,y){if(!B.has(y)&&(f===E||j(f,E,t,r,o)))return B.add(y)})){m=!1;break}}else if(!(f===k||j(f,k,t,r,o))){m=!1;break}}return o.delete(e),o.delete(A),m}function ZT(e,A,j,t,r,o,a){switch(j){case x6:if(e.byteLength!=A.byteLength||e.byteOffset!=A.byteOffset)return!1;e=e.buffer,A=A.buffer;case nF:return!(e.byteLength!=A.byteLength||!t(new Xy(e),new Xy(A)));case Yy:case Zy:case jF:return kF(+e,+A);case AF:return e.name==A.name&&e.message==A.message;case tF:case rF:return e==A+"";case b6:var i=tT;case q6:var c=o&hn;if(i||(i=H7),e.size!=A.size&&!c)return!1;var p=a.get(e);if(p)return p==A;o|=T6,a.set(e,A);var d=uF(i(e),i(A),t,r,o,a);return a.delete(e),d;case oF:if(M7)return M7.call(e)==M7.call(A)}return!1}function AP(e,A,j,t,r,o){var a=r&hn,i=L7(e),c=i.length,p=L7(A),d=p.length;if(c!=d&&!a)return!1;for(var m=c;m--;){var B=i[m];if(!(a?B in A:ht.call(A,B)))return!1}var f=o.get(e);if(f&&o.get(A))return f==A;var k=!0;o.set(e,A),o.set(A,e);for(var g=a;++m<c;){B=i[m];var E=e[B],y=A[B];if(t)var F=a?t(y,E,B,A,e,o):t(E,y,B,e,A,o);if(!(F===void 0?E===y||j(E,y,t,r,o):F)){k=!1;break}g||(g=B=="constructor")}if(k&&!g){var S=e.constructor,$=A.constructor;S!=$&&"constructor"in e&&"constructor"in A&&!(typeof S=="function"&&S instanceof S&&typeof $=="function"&&$ instanceof $)&&(k=!1)}return o.delete(e),o.delete(A),k}function M6(e,A){var j=e.__data__;return tP(A)?j[typeof A=="string"?"string":"hash"]:j.map}function eP(e){for(var A=L7(e),j=A.length;j--;){var t=A[j],r=e[t];A[j]=[t,r,dF(r)]}return A}function wn(e,A){var j=jT(e,A);return LT(j)?j:void 0}var ar=RT;(D7&&ar(new D7(new ArrayBuffer(1)))!=x6||pa&&ar(new pa)!=b6||N7&&ar(N7.resolve())!=Ny||Fn&&ar(new Fn)!=q6||K7&&ar(new K7)!=_7)&&(ar=function(e){var A=Sn.call(e),j=A==gn?e.constructor:void 0,t=j?Zr(j):void 0;if(t)switch(t){case pT:return x6;case uT:return b6;case lT:return Ny;case dT:return q6;case mT:return _7}return A});function jP(e,A,j){A=C6(A,e)?[A]:pF(A);for(var t,r=-1,a=A.length;++r<a;){var o=_6(A[r]);if(!(t=e!=null&&j(e,o)))break;e=e[o]}if(t)return t;var a=e?e.length:0;return!!a&&z7(a)&&lF(o,a)&&(Yr(e)||BF(e))}function lF(e,A){return A=A??Jy,!!A&&(typeof e=="number"||LG.test(e))&&e>-1&&e%1==0&&e<A}function C6(e,A){if(Yr(e))return!1;var j=typeof e;return j=="number"||j=="symbol"||j=="boolean"||e==null||W7(e)?!0:CG.test(e)||!MG.test(e)||A!=null&&e in Object(A)}function tP(e){var A=typeof e;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?e!=="__proto__":e===null}function rP(e){return!!Hy&&Hy in e}function oP(e){var A=e&&e.constructor,j=typeof A=="function"&&A.prototype||P6;return e===j}function dF(e){return e===e&&!R6(e)}function mF(e,A){return function(j){return j==null?!1:j[e]===A&&(A!==void 0||e in Object(j))}}var nP=X7(function(e){e=cP(e);var A=[];return _G.test(e)&&A.push(""),e.replace(RG,function(j,t,r,o){A.push(r?o.replace(NG,"$1"):t||j)}),A});function _6(e){if(typeof e=="string"||W7(e))return e;var A=e+"";return A=="0"&&1/e==-Q7?"-0":A}function Zr(e){if(e!=null){try{return iF.call(e)}catch{}try{return e+""}catch{}}return""}function sP(e,A){return e&&e.length?JT(e,QT(A,2)):[]}function X7(e,A){if(typeof e!="function"||A&&typeof A!="function")throw new TypeError(wG);var j=function(){var t=arguments,r=A?A.apply(this,t):t[0],o=j.cache;if(o.has(r))return o.get(r);var a=e.apply(this,t);return j.cache=o.set(r,a),a};return j.cache=new(X7.Cache||wt),j}X7.Cache=wt;function kF(e,A){return e===A||e!==e&&A!==A}function BF(e){return aP(e)&&ht.call(e,"callee")&&(!aT.call(e,"callee")||Sn.call(e)==v6)}var Yr=Array.isArray;function fF(e){return e!=null&&z7(e.length)&&!EF(e)}function aP(e){return D6(e)&&fF(e)}function EF(e){var A=R6(e)?Sn.call(e):"";return A==eF||A==IG}function z7(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jy}function R6(e){var A=typeof e;return!!e&&(A=="object"||A=="function")}function D6(e){return!!e&&typeof e=="object"}function W7(e){return typeof e=="symbol"||D6(e)&&Sn.call(e)==oF}var iP=Qy?AT(Qy):UT;function cP(e){return e==null?"":WT(e)}function pP(e,A,j){var t=e==null?void 0:cF(e,A);return t===void 0?j:t}function uP(e,A){return e!=null&&jP(e,A,DT)}function L7(e){return fF(e)?_T(e):HT(e)}function lP(e){return e}function dP(){}function mP(e){return C6(e)?YG(_6(e)):zT(e)}yn.exports=sP});var HF=WA((V6A,QF)=>{"use strict";n();s();QF.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let A=Object.getPrototypeOf(e);return A===null||A===Object.prototype}});var YF=WA((WF,JF)=>{"use strict";n();s();var K6=HF(),{hasOwnProperty:XF}=Object.prototype,{propertyIsEnumerable:C1}=Object,qn=(e,A,j)=>Object.defineProperty(e,A,{value:j,writable:!0,enumerable:!0,configurable:!0}),_1=WF,VF={concatArrays:!1,ignoreUndefined:!1},L6=e=>{let A=[];for(let j in e)XF.call(e,j)&&A.push(j);if(Object.getOwnPropertySymbols){let j=Object.getOwnPropertySymbols(e);for(let t of j)C1.call(e,t)&&A.push(t)}return A};function xn(e){return Array.isArray(e)?R1(e):K6(e)?D1(e):e}function R1(e){let A=e.slice(0,0);return L6(e).forEach(j=>{qn(A,j,xn(e[j]))}),A}function D1(e){let A=Object.getPrototypeOf(e)===null?Object.create(null):{};return L6(e).forEach(j=>{qn(A,j,xn(e[j]))}),A}var zF=(e,A,j,t)=>(j.forEach(r=>{typeof A[r]>"u"&&t.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?qn(e,r,id(e[r],A[r],t)):qn(e,r,xn(A[r])))}),e),N1=(e,A,j)=>{let t=e.slice(0,0),r=0;return[e,A].forEach(o=>{let a=[];for(let i=0;i<o.length;i++)XF.call(o,i)&&(a.push(String(i)),o===e?qn(t,r++,o[i]):qn(t,r++,xn(o[i])));t=zF(t,o,L6(o).filter(i=>!a.includes(i)),j)}),t};function id(e,A,j){return j.concatArrays&&Array.isArray(e)&&Array.isArray(A)?N1(e,A,j):!K6(A)||!K6(e)?xn(A):zF(e,A,L6(A),j)}JF.exports=function(...e){let A=id(xn(VF),this!==_1&&this||{},VF),j={_:{}};for(let t of e)if(t!==void 0){if(!K6(t))throw new TypeError("`"+t+"` is not an Option Object");j=id(j,{_:t},A)}return j._}});var W0=WA((ga,On)=>{n();s();var sO=200,aO="Expected a function",Sd="__lodash_hash_undefined__",tc=1,Mn=2,$0=1/0,v0=9007199254740991,W6="[object Arguments]",Bd="[object Array]",b0="[object Boolean]",q0="[object Date]",x0="[object Error]",G0="[object Function]",iO="[object GeneratorFunction]",J6="[object Map]",T0="[object Number]",Pn="[object Object]",f0="[object Promise]",P0="[object RegExp]",Y6="[object Set]",O0="[object String]",M0="[object Symbol]",fd="[object WeakMap]",C0="[object ArrayBuffer]",Z6="[object DataView]",cO="[object Float32Array]",pO="[object Float64Array]",uO="[object Int8Array]",lO="[object Int16Array]",dO="[object Int32Array]",mO="[object Uint8Array]",kO="[object Uint8ClampedArray]",BO="[object Uint16Array]",fO="[object Uint32Array]",EO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gO=/^\w*$/,yO=/^\./,FO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hO=/[\\^$.*+?()[\]{}|]/g,SO=/\\(\\)?/g,wO=/^\[object .+?Constructor\]$/,IO=/^(?:0|[1-9]\d*)$/,NA={};NA[cO]=NA[pO]=NA[uO]=NA[lO]=NA[dO]=NA[mO]=NA[kO]=NA[BO]=NA[fO]=!0;NA[W6]=NA[Bd]=NA[C0]=NA[b0]=NA[Z6]=NA[q0]=NA[x0]=NA[G0]=NA[J6]=NA[T0]=NA[Pn]=NA[P0]=NA[Y6]=NA[O0]=NA[fd]=!1;var _0=typeof self=="object"&&self&&self.Object===Object&&self,$O=typeof self=="object"&&self&&self.Object===Object&&self,mr=_0||$O||Function("return this")(),R0=typeof ga=="object"&&ga&&!ga.nodeType&&ga,E0=R0&&typeof On=="object"&&On&&!On.nodeType&&On,vO=E0&&E0.exports===R0,g0=vO&&_0.process,y0=function(){try{return g0&&g0.binding("util")}catch{}}(),F0=y0&&y0.isTypedArray;function bO(e,A,j,t){for(var r=-1,o=e?e.length:0;++r<o;){var a=e[r];A(t,a,j(a),e)}return t}function qO(e,A){for(var j=-1,t=e?e.length:0;++j<t;)if(A(e[j],j,e))return!0;return!1}function xO(e){return function(A){return A?.[e]}}function GO(e,A){for(var j=-1,t=Array(e);++j<e;)t[j]=A(j);return t}function TO(e){return function(A){return e(A)}}function PO(e,A){return e?.[A]}function Ed(e){var A=!1;if(e!=null&&typeof e.toString!="function")try{A=!!(e+"")}catch{}return A}function OO(e){var A=-1,j=Array(e.size);return e.forEach(function(t,r){j[++A]=[r,t]}),j}function MO(e,A){return function(j){return e(A(j))}}function CO(e){var A=-1,j=Array(e.size);return e.forEach(function(t){j[++A]=t}),j}var _O=Array.prototype,RO=Function.prototype,rc=Object.prototype,md=mr["__core-js_shared__"],h0=function(){var e=/[^.]+$/.exec(md&&md.keys&&md.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),D0=RO.toString,vt=rc.hasOwnProperty,Cn=rc.toString,DO=RegExp("^"+D0.call(vt).replace(hO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S0=mr.Symbol,w0=mr.Uint8Array,NO=rc.propertyIsEnumerable,KO=_O.splice,LO=MO(Object.keys,Object),gd=_n(mr,"DataView"),ya=_n(mr,"Map"),yd=_n(mr,"Promise"),Fd=_n(mr,"Set"),hd=_n(mr,"WeakMap"),Fa=_n(Object,"create"),UO=to(gd),QO=to(ya),HO=to(yd),VO=to(Fd),XO=to(hd),Ac=S0?S0.prototype:void 0,kd=Ac?Ac.valueOf:void 0,I0=Ac?Ac.toString:void 0;function jo(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function zO(){this.__data__=Fa?Fa(null):{}}function WO(e){return this.has(e)&&delete this.__data__[e]}function JO(e){var A=this.__data__;if(Fa){var j=A[e];return j===Sd?void 0:j}return vt.call(A,e)?A[e]:void 0}function YO(e){var A=this.__data__;return Fa?A[e]!==void 0:vt.call(A,e)}function ZO(e,A){var j=this.__data__;return j[e]=Fa&&A===void 0?Sd:A,this}jo.prototype.clear=zO;jo.prototype.delete=WO;jo.prototype.get=JO;jo.prototype.has=YO;jo.prototype.set=ZO;function bt(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function A8(){this.__data__=[]}function e8(e){var A=this.__data__,j=oc(A,e);if(j<0)return!1;var t=A.length-1;return j==t?A.pop():KO.call(A,j,1),!0}function j8(e){var A=this.__data__,j=oc(A,e);return j<0?void 0:A[j][1]}function t8(e){return oc(this.__data__,e)>-1}function r8(e,A){var j=this.__data__,t=oc(j,e);return t<0?j.push([e,A]):j[t][1]=A,this}bt.prototype.clear=A8;bt.prototype.delete=e8;bt.prototype.get=j8;bt.prototype.has=t8;bt.prototype.set=r8;function qt(e){var A=-1,j=e?e.length:0;for(this.clear();++A<j;){var t=e[A];this.set(t[0],t[1])}}function o8(){this.__data__={hash:new jo,map:new(ya||bt),string:new jo}}function n8(e){return nc(this,e).delete(e)}function s8(e){return nc(this,e).get(e)}function a8(e){return nc(this,e).has(e)}function i8(e,A){return nc(this,e).set(e,A),this}qt.prototype.clear=o8;qt.prototype.delete=n8;qt.prototype.get=s8;qt.prototype.has=a8;qt.prototype.set=i8;function ec(e){var A=-1,j=e?e.length:0;for(this.__data__=new qt;++A<j;)this.add(e[A])}function c8(e){return this.__data__.set(e,Sd),this}function p8(e){return this.__data__.has(e)}ec.prototype.add=ec.prototype.push=c8;ec.prototype.has=p8;function $t(e){this.__data__=new bt(e)}function u8(){this.__data__=new bt}function l8(e){return this.__data__.delete(e)}function d8(e){return this.__data__.get(e)}function m8(e){return this.__data__.has(e)}function k8(e,A){var j=this.__data__;if(j instanceof bt){var t=j.__data__;if(!ya||t.length<sO-1)return t.push([e,A]),this;j=this.__data__=new qt(t)}return j.set(e,A),this}$t.prototype.clear=u8;$t.prototype.delete=l8;$t.prototype.get=d8;$t.prototype.has=m8;$t.prototype.set=k8;function B8(e,A){var j=dr(e)||X0(e)?GO(e.length,String):[],t=j.length,r=!!t;for(var o in e)(A||vt.call(e,o))&&!(r&&(o=="length"||U0(o,t)))&&j.push(o);return j}function oc(e,A){for(var j=e.length;j--;)if(V0(e[j][0],A))return j;return-1}function f8(e,A,j,t){return E8(e,function(r,o,a){A(t,r,j(r),a)}),t}var E8=O8(y8),g8=M8();function y8(e,A){return e&&g8(e,A,jc)}function N0(e,A){A=sc(A,e)?[A]:K0(A);for(var j=0,t=A.length;e!=null&&j<t;)e=e[ac(A[j++])];return j&&j==t?e:void 0}function F8(e){return Cn.call(e)}function h8(e,A){return e!=null&&A in Object(e)}function wd(e,A,j,t,r){return e===A?!0:e==null||A==null||!ic(e)&&!cc(A)?e!==e&&A!==A:S8(e,A,wd,j,t,r)}function S8(e,A,j,t,r,o){var a=dr(e),i=dr(A),c=Bd,p=Bd;a||(c=lr(e),c=c==W6?Pn:c),i||(p=lr(A),p=p==W6?Pn:p);var d=c==Pn&&!Ed(e),m=p==Pn&&!Ed(A),B=c==p;if(B&&!d)return o||(o=new $t),a||V8(e)?L0(e,A,j,t,r,o):C8(e,A,c,j,t,r,o);if(!(r&Mn)){var f=d&&vt.call(e,"__wrapped__"),k=m&&vt.call(A,"__wrapped__");if(f||k){var g=f?e.value():e,E=k?A.value():A;return o||(o=new $t),j(g,E,t,r,o)}}return B?(o||(o=new $t),_8(e,A,j,t,r,o)):!1}function w8(e,A,j,t){var r=j.length,o=r,a=!t;if(e==null)return!o;for(e=Object(e);r--;){var i=j[r];if(a&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++r<o;){i=j[r];var c=i[0],p=e[c],d=i[1];if(a&&i[2]){if(p===void 0&&!(c in e))return!1}else{var m=new $t;if(t)var B=t(p,d,c,e,A,m);if(!(B===void 0?wd(d,p,t,tc|Mn,m):B))return!1}}return!0}function I8(e){if(!ic(e)||K8(e))return!1;var A=z0(e)||Ed(e)?DO:wO;return A.test(to(e))}function $8(e){return cc(e)&&vd(e.length)&&!!NA[Cn.call(e)]}function v8(e){return typeof e=="function"?e:e==null?J8:typeof e=="object"?dr(e)?x8(e[0],e[1]):q8(e):Y8(e)}function b8(e){if(!L8(e))return LO(e);var A=[];for(var j in Object(e))vt.call(e,j)&&j!="constructor"&&A.push(j);return A}function q8(e){var A=R8(e);return A.length==1&&A[0][2]?H0(A[0][0],A[0][1]):function(j){return j===e||w8(j,e,A)}}function x8(e,A){return sc(e)&&Q0(A)?H0(ac(e),A):function(j){var t=z8(j,e);return t===void 0&&t===A?W8(j,e):wd(A,t,void 0,tc|Mn)}}function G8(e){return function(A){return N0(A,e)}}function T8(e){if(typeof e=="string")return e;if(bd(e))return I0?I0.call(e):"";var A=e+"";return A=="0"&&1/e==-$0?"-0":A}function K0(e){return dr(e)?e:U8(e)}function P8(e,A){return function(j,t){var r=dr(j)?bO:f8,o=A?A():{};return r(j,e,v8(t,2),o)}}function O8(e,A){return function(j,t){if(j==null)return j;if(!$d(j))return e(j,t);for(var r=j.length,o=A?r:-1,a=Object(j);(A?o--:++o<r)&&t(a[o],o,a)!==!1;);return j}}function M8(e){return function(A,j,t){for(var r=-1,o=Object(A),a=t(A),i=a.length;i--;){var c=a[e?i:++r];if(j(o[c],c,o)===!1)break}return A}}function L0(e,A,j,t,r,o){var a=r&Mn,i=e.length,c=A.length;if(i!=c&&!(a&&c>i))return!1;var p=o.get(e);if(p&&o.get(A))return p==A;var d=-1,m=!0,B=r&tc?new ec:void 0;for(o.set(e,A),o.set(A,e);++d<i;){var f=e[d],k=A[d];if(t)var g=a?t(k,f,d,A,e,o):t(f,k,d,e,A,o);if(g!==void 0){if(g)continue;m=!1;break}if(B){if(!qO(A,function(E,y){if(!B.has(y)&&(f===E||j(f,E,t,r,o)))return B.add(y)})){m=!1;break}}else if(!(f===k||j(f,k,t,r,o))){m=!1;break}}return o.delete(e),o.delete(A),m}function C8(e,A,j,t,r,o,a){switch(j){case Z6:if(e.byteLength!=A.byteLength||e.byteOffset!=A.byteOffset)return!1;e=e.buffer,A=A.buffer;case C0:return!(e.byteLength!=A.byteLength||!t(new w0(e),new w0(A)));case b0:case q0:case T0:return V0(+e,+A);case x0:return e.name==A.name&&e.message==A.message;case P0:case O0:return e==A+"";case J6:var i=OO;case Y6:var c=o&Mn;if(i||(i=CO),e.size!=A.size&&!c)return!1;var p=a.get(e);if(p)return p==A;o|=tc,a.set(e,A);var d=L0(i(e),i(A),t,r,o,a);return a.delete(e),d;case M0:if(kd)return kd.call(e)==kd.call(A)}return!1}function _8(e,A,j,t,r,o){var a=r&Mn,i=jc(e),c=i.length,p=jc(A),d=p.length;if(c!=d&&!a)return!1;for(var m=c;m--;){var B=i[m];if(!(a?B in A:vt.call(A,B)))return!1}var f=o.get(e);if(f&&o.get(A))return f==A;var k=!0;o.set(e,A),o.set(A,e);for(var g=a;++m<c;){B=i[m];var E=e[B],y=A[B];if(t)var F=a?t(y,E,B,A,e,o):t(E,y,B,e,A,o);if(!(F===void 0?E===y||j(E,y,t,r,o):F)){k=!1;break}g||(g=B=="constructor")}if(k&&!g){var S=e.constructor,$=A.constructor;S!=$&&"constructor"in e&&"constructor"in A&&!(typeof S=="function"&&S instanceof S&&typeof $=="function"&&$ instanceof $)&&(k=!1)}return o.delete(e),o.delete(A),k}function nc(e,A){var j=e.__data__;return N8(A)?j[typeof A=="string"?"string":"hash"]:j.map}function R8(e){for(var A=jc(e),j=A.length;j--;){var t=A[j],r=e[t];A[j]=[t,r,Q0(r)]}return A}function _n(e,A){var j=PO(e,A);return I8(j)?j:void 0}var lr=F8;(gd&&lr(new gd(new ArrayBuffer(1)))!=Z6||ya&&lr(new ya)!=J6||yd&&lr(yd.resolve())!=f0||Fd&&lr(new Fd)!=Y6||hd&&lr(new hd)!=fd)&&(lr=function(e){var A=Cn.call(e),j=A==Pn?e.constructor:void 0,t=j?to(j):void 0;if(t)switch(t){case UO:return Z6;case QO:return J6;case HO:return f0;case VO:return Y6;case XO:return fd}return A});function D8(e,A,j){A=sc(A,e)?[A]:K0(A);for(var t,r=-1,a=A.length;++r<a;){var o=ac(A[r]);if(!(t=e!=null&&j(e,o)))break;e=e[o]}if(t)return t;var a=e?e.length:0;return!!a&&vd(a)&&U0(o,a)&&(dr(e)||X0(e))}function U0(e,A){return A=A??v0,!!A&&(typeof e=="number"||IO.test(e))&&e>-1&&e%1==0&&e<A}function sc(e,A){if(dr(e))return!1;var j=typeof e;return j=="number"||j=="symbol"||j=="boolean"||e==null||bd(e)?!0:gO.test(e)||!EO.test(e)||A!=null&&e in Object(A)}function N8(e){var A=typeof e;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?e!=="__proto__":e===null}function K8(e){return!!h0&&h0 in e}function L8(e){var A=e&&e.constructor,j=typeof A=="function"&&A.prototype||rc;return e===j}function Q0(e){return e===e&&!ic(e)}function H0(e,A){return function(j){return j==null?!1:j[e]===A&&(A!==void 0||e in Object(j))}}var U8=Id(function(e){e=X8(e);var A=[];return yO.test(e)&&A.push(""),e.replace(FO,function(j,t,r,o){A.push(r?o.replace(SO,"$1"):t||j)}),A});function ac(e){if(typeof e=="string"||bd(e))return e;var A=e+"";return A=="0"&&1/e==-$0?"-0":A}function to(e){if(e!=null){try{return D0.call(e)}catch{}try{return e+""}catch{}}return""}var Q8=P8(function(e,A,j){e[j]=A});function Id(e,A){if(typeof e!="function"||A&&typeof A!="function")throw new TypeError(aO);var j=function(){var t=arguments,r=A?A.apply(this,t):t[0],o=j.cache;if(o.has(r))return o.get(r);var a=e.apply(this,t);return j.cache=o.set(r,a),a};return j.cache=new(Id.Cache||qt),j}Id.Cache=qt;function V0(e,A){return e===A||e!==e&&A!==A}function X0(e){return H8(e)&&vt.call(e,"callee")&&(!NO.call(e,"callee")||Cn.call(e)==W6)}var dr=Array.isArray;function $d(e){return e!=null&&vd(e.length)&&!z0(e)}function H8(e){return cc(e)&&$d(e)}function z0(e){var A=ic(e)?Cn.call(e):"";return A==G0||A==iO}function vd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=v0}function ic(e){var A=typeof e;return!!e&&(A=="object"||A=="function")}function cc(e){return!!e&&typeof e=="object"}function bd(e){return typeof e=="symbol"||cc(e)&&Cn.call(e)==M0}var V8=F0?TO(F0):$8;function X8(e){return e==null?"":T8(e)}function z8(e,A,j){var t=e==null?void 0:N0(e,A);return t===void 0?j:t}function W8(e,A){return e!=null&&D8(e,A,h8)}function jc(e){return $d(e)?B8(e):b8(e)}function J8(e){return e}function Y8(e){return sc(e)?xO(ac(e)):G8(e)}On.exports=Q8});var Un=WA(Am=>{"use strict";n();s();Object.defineProperty(Am,"__esModule",{value:!0});var cS=x();function dC(e){var A=cS.useRef();return cS.useEffect(function(){A.current=e}),A.current}Am.default=dC});var $I=WA(II=>{"use strict";n();s();var ls=x();function D2(e,A){return e===A&&(e!==0||1/e===1/A)||e!==e&&A!==A}var N2=typeof Object.is=="function"?Object.is:D2,K2=ls.useState,L2=ls.useEffect,U2=ls.useLayoutEffect,Q2=ls.useDebugValue;function H2(e,A){var j=A(),t=K2({inst:{value:j,getSnapshot:A}}),r=t[0].inst,o=t[1];return U2(function(){r.value=j,r.getSnapshot=A,nk(r)&&o({inst:r})},[e,j,A]),L2(function(){return nk(r)&&o({inst:r}),e(function(){nk(r)&&o({inst:r})})},[e]),Q2(j),j}function nk(e){var A=e.getSnapshot;e=e.value;try{var j=A();return!N2(e,j)}catch{return!0}}function V2(e,A){return A()}var X2=typeof self>"u"||typeof self.document>"u"||typeof self.document.createElement>"u"?V2:H2;II.useSyncExternalStore=ls.useSyncExternalStore!==void 0?ls.useSyncExternalStore:X2});var bI=WA(vI=>{"use strict";n();s();u.NODE_ENV!=="production"&&function(){function e(f,k){return f===k&&(f!==0||1/f===1/k)||f!==f&&k!==k}function A(f,k){d||r.startTransition===void 0||(d=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=k();if(!m){var E=k();o(g,E)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),m=!0)}E=a({inst:{value:g,getSnapshot:k}});var y=E[0].inst,F=E[1];return c(function(){y.value=g,y.getSnapshot=k,j(y)&&F({inst:y})},[f,g,k]),i(function(){return j(y)&&F({inst:y}),f(function(){j(y)&&F({inst:y})})},[f]),p(g),g}function j(f){var k=f.getSnapshot;f=f.value;try{var g=k();return!o(f,g)}catch{return!0}}function t(f,k){return k()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var r=x(),o=typeof Object.is=="function"?Object.is:e,a=r.useState,i=r.useEffect,c=r.useLayoutEffect,p=r.useDebugValue,d=!1,m=!1,B=typeof self>"u"||typeof self.document>"u"||typeof self.document.createElement>"u"?t:A;vI.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:B,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()});var ak=WA((J3A,sk)=>{"use strict";n();s();u.NODE_ENV==="production"?sk.exports=$I():sk.exports=bI()});var xI=WA(qI=>{"use strict";n();s();var Rp=x(),z2=ak();function W2(e,A){return e===A&&(e!==0||1/e===1/A)||e!==e&&A!==A}var J2=typeof Object.is=="function"?Object.is:W2,Y2=z2.useSyncExternalStore,Z2=Rp.useRef,AN=Rp.useEffect,eN=Rp.useMemo,jN=Rp.useDebugValue;qI.useSyncExternalStoreWithSelector=function(e,A,j,t,r){var o=Z2(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=eN(function(){function c(f){if(!p){if(p=!0,d=f,f=t(f),r!==void 0&&a.hasValue){var k=a.value;if(r(k,f))return m=k}return m=f}if(k=m,J2(d,f))return k;var g=t(f);return r!==void 0&&r(k,g)?(d=f,k):(d=f,m=g)}var p=!1,d,m,B=j===void 0?null:j;return[function(){return c(A())},B===null?void 0:function(){return c(B())}]},[A,j,t,r]);var i=Y2(e,o[0],o[1]);return AN(function(){a.hasValue=!0,a.value=i},[i]),jN(i),i}});var TI=WA(GI=>{"use strict";n();s();u.NODE_ENV!=="production"&&function(){function e(p,d){return p===d&&(p!==0||1/p===1/d)||p!==p&&d!==d}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var A=x(),j=ak(),t=typeof Object.is=="function"?Object.is:e,r=j.useSyncExternalStore,o=A.useRef,a=A.useEffect,i=A.useMemo,c=A.useDebugValue;GI.useSyncExternalStoreWithSelector=function(p,d,m,B,f){var k=o(null);if(k.current===null){var g={hasValue:!1,value:null};k.current=g}else g=k.current;k=i(function(){function y(O){if(!F){if(F=!0,S=O,O=B(O),f!==void 0&&g.hasValue){var G=g.value;if(f(G,O))return $=G}return $=O}if(G=$,t(S,O))return G;var z=B(O);return f!==void 0&&f(G,z)?(S=O,G):(S=O,$=z)}var F=!1,S,$,M=m===void 0?null:m;return[function(){return y(d())},M===null?void 0:function(){return y(M())}]},[d,m,B,f]);var E=r(p,k[0],k[1]);return a(function(){g.hasValue=!0,g.value=E},[E]),c(E),E},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()});var PI=WA((nQA,ik)=>{"use strict";n();s();u.NODE_ENV==="production"?ik.exports=xI():ik.exports=TI()});n();s();n();s();n();s();n();s();var _i=(E=>(E.Buy="Buy",E.Collectibles="Collectibles",E.ConnectHardwareWallet="Connect Hardware Wallet",E.ConvertToJito="Convert to Jito",E.MintPSOL="Mint PSOL",E.Explore="Explore",E.MintCollectible="Mint Collectible",E.SocialLogin="Social Login",E.SettingsClaimUsername="Settings: Claim Username",E.SettingsCurrency="Settings: Currency",E.SettingsImportSeedPhrase="Settings: Import Seed Phrase",E.SettingsNotificationPreferences="Settings: Notification Preferences",E.SettingsSecurityAndPrivacy="Settings: Security & Privacy",E.Swapper="Swapper",E.ExternalLink="External Link",E.Token="Token",E))(_i||{}),Ns=class extends Error{message="Failed to set dismissed action banners to storage"};var mv={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1},kv={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1},qu=e=>ge?mv[e]:at?kv[e]:-1;var xu=1,lt=".phantom-labs.settings.interstitials",dt=class{static async getViewHistory(A,j){let t=await j.get(lt);return t?t.interstitialsViewHistory[A]??[]:[]}static async hasSeen(A,j){let t=await j.get(lt);if(!t)return!1;let r=qu(A);return(t.interstitialsSeen[A]??0)>=r}static async setHasSeen(A,j){let t=await j.get(lt),r=qu(A);await j.set(lt,{version:xu,interstitialsSeen:{...!!t&&t.interstitialsSeen,[A]:r},interstitialsViewHistory:{...!!t&&t.interstitialsViewHistory,[A]:[...t?.interstitialsViewHistory?.[A]??[],Date.now()]}})}static async resetHasSeen(A,j){let t=await j.get(lt);if(t)return j.set(lt,{version:xu,interstitialsSeen:{...t.interstitialsSeen,[A]:void 0},interstitialsViewHistory:{...t.interstitialsViewHistory,[A]:void 0}})}static async resetAllHasSeen(A){if(await A.get(lt))return A.set(lt,{version:xu,interstitialsSeen:{},interstitialsViewHistory:{}})}};n();s();var Gu=class{#A;constructor(A){this.#A=A}onBannerSeen=A=>{this.#A.capture("actionBannerSeenByUser",{data:{banner:A}})};onBannerClick=A=>{this.#A.capture("actionBannerClickedByUser",{data:{banner:A}})};onBannerDismiss=A=>{this.#A.capture("actionBannerDismissedByUser",{data:{banner:A}})};onInterstitialSeen=A=>{this.#A.capture("actionBannerInterstitialSeenByUser",{data:{banner:A}})};onInterstitialPrimaryClick=A=>{this.#A.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:A}})};onInterstitialSecondaryClick=A=>{this.#A.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:A}})};onInterstitialDismiss=A=>{this.#A.capture("actionBannerInterstitialDismissedByUser",{data:{banner:A}})}};n();s();var Bv=({id:e,humanReadableId:A,description:j,bannerType:t})=>({id:e,humanReadableId:A,description:j,type:t}),fv=({id:e,humanReadableId:A,description:j,bannerType:t,interstitial:r})=>{let{title:o,primaryButtonText:a,secondaryButtonText:i}=r,c;if(t==="Modal")for(let[p,d]of Object.values(r.lineItems).entries())c={...c??{},[`lineItem${p+1}`]:{title:d.title,description:d.description}};return{id:e,humanReadableId:A,description:j,type:t,interstitial:{title:o,body:c,primaryButtonText:a??T.t("commandContinue"),secondaryButtonText:i??T.t("commandDismiss")}}};n();s();n();s();var Ri=e=>{let A=[];for(let j in e.errors)Array.isArray(e.errors[j])&&A.push(e.errors[j].join(", "));return A.join(", ")};var gf=async({locale:e})=>{let A;try{let j=JSON.stringify({platform:se,appVersion:$A,locale:e}),t=await H.api().headers({"Content-Type":"application/json"}).post(({apiEnv:o})=>`/banners/force_upgrade/${o}/v1`,j);if(t.status===400){let o=await t.data,a=Ri(o);throw new Error(a)}else if(t.status<200||t.status>299)throw new Error(`status code: ${t.status}, body: ${t.statusText}`);let r=t.data;return r?{...r}:Ef}catch(j){return A===400&&j instanceof Error&&b.captureError(j,"actionBanner"),Ef}},Ef={forceUpgradeStatus:"noop"};n();s();n();s();var yf=async({locale:e})=>({...await gf({locale:e})});n();s();var jn="@phantom/interstitials",Yt=`${jn}:action-banners`,Ff=`${jn}:force-upgrade`,de={actionBanners:(e,A)=>[Yt,{accountIdentifier:e,accessToken:A}],hasSeenInterstitial:e=>[`${jn}:has-seen-interstitial`,{feature:e}],interstitialViewHistory:e=>[`${jn}:interstitial-view-history`,{feature:e}],appLaunchTimes:()=>[`${jn}:app-launch-times`],lastOnboardedAt:()=>[`${jn}:last-onboarded-at`]};var Ev=()=>eA({queryKey:[Ff],queryFn:async()=>{let A=re(T.language)??"en";return yf({locale:A})},enabled:!!$A,staleTime:X({minutes:5})});n();s();var Pu=e=>{let A=kA(),j=de.hasSeenInterstitial(e);return eA({queryKey:j,queryFn:async()=>await dt.hasSeen(e,A)})};n();s();n();s();var hf=async e=>{await e.invalidateQueries({queryKey:[Yt]})};jB(hf);var Sf=async(e,A,j)=>{await e.setQueryData(de.hasSeenInterstitial(A),j)};var Dr=e=>{let A=kA(),j=Z();return dA({mutationFn:async()=>{await dt.setHasSeen(e,A),await Sf(j,e,!0)},onSuccess:()=>j.invalidateQueries({queryKey:de.interstitialViewHistory(e)})})};n();s();var mt=v(x());n();s();var Di=v(x());n();s();n();s();n();s();var Ou=async e=>await e.get("dismissedActionBanners")??[],wf=async(e,A)=>{try{let j=await Ou(e);return j.includes(A)?void 0:e.set("dismissedActionBanners",[...j,A])}catch{throw new Ns}};var Cu=()=>{let e=kA(),{data:A}=eA({queryKey:de.appLaunchTimes(),queryFn:async()=>await e.get("appLaunchTimes")??[]});return A??[]};n();s();var _u=()=>{let e=kA(),{data:A}=eA({queryKey:de.lastOnboardedAt(),queryFn:async()=>await e.get("lastOnboardedAt")??-1});return A};var If=()=>{let e=_u(),A=Cu();if(A.length<2)return!0;if(e!==void 0){let[j,t]=A;if(e<j&&e<t)return!1}return!0};function Nr(e,A,j){let{data:t,isSuccess:r}=Pu(e),{data:o}=fA(A?[A]:[]),a=o?.length===1?o[0]:!0,i=If(),c=(0,Di.useCallback)(()=>j(),[j]);return(0,Di.useMemo)(()=>a&&r&&!t&&!i&&c(),[a,t,i,c,r])}var gv="Google Pay",yv="Apple Pay",$f={data:{feature:"sui",variant:"default-on"}},Fv=({onPrimaryAction:e,image:A,condition:j=()=>!0,platform:t="ios"})=>{let{t:r}=BA(),{mutate:o}=Dr("SuiWelcomeDefaultOn"),{data:a}=fA(["enable-sui-default-on"]),i=a?.length===1?a[0]:!0,{data:c}=fA(["kill-sui-default-on-modal"]),p=c?.length===1?c[0]:!0,d=Nr("SuiWelcomeDefaultOn",void 0,()=>j()&&!st()&&i&&!p),m=t==="android"?gv:yv,B=(0,mt.useCallback)(async()=>{e(),o()},[e,o]),f=(0,mt.useMemo)(()=>({title:r("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:r("interstitialSuiWelcomeItemTitle_1"),icon:mt.default.createElement(De,{icon:"Swap",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:r("interstitialSuiWelcomeItemTitle_2"),icon:mt.default.createElement(De,{icon:"Send",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_2",{paymentMethod:m})},{key:"suiValueProp3",title:r("interstitialSuiWelcomeItemTitle_3"),icon:mt.default.createElement(De,{icon:"Compass",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialSuiWelcomePrimaryButtonText"),onAction:B,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:$f}},onDismiss:o,image:A,displayEvent:{event:"welcomeInterstitialSeen",payload:$f}}),[r,B,A,o,m]);return(0,mt.useMemo)(()=>({interstitial:f,shouldShow:d}),[f,d])};n();s();var Kj=v(x());var Ru={data:{feature:"arbitrum"}},hv=({onPrimaryAction:e,onSecondaryAction:A,image:j,condition:t=()=>!0})=>{let{t:r}=BA(),{mutateAsync:o}=uB(),[a]=dB(["arbitrum"]),{mutate:i}=Dr("ArbitrumWelcome"),c=Nr("ArbitrumWelcome","enable-arbitrum",()=>t()&&!a&&!st()),p=(0,Kj.useCallback)(async()=>{await o({chainIDs:["arbitrum"]}),e(),i()},[o,e,i]),d=(0,Kj.useCallback)(()=>{A(),i()},[A,i]),m=(0,Kj.useMemo)(()=>({title:r("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:r("interstitialArbitrumWelcomeItemTitle_1"),icon:Kj.default.createElement(De,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:r("interstitialArbitrumWelcomeItemTitle_2"),icon:Kj.default.createElement(De,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:r("interstitialArbitrumWelcomeItemTitle_3"),icon:Kj.default.createElement(De,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialArbitrumWelcomePrimaryButtonText"),onAction:p,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Ru}},secondaryButton:{children:r("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Ru}},onDismiss:i,image:j,displayEvent:{event:"welcomeInterstitialSeen",payload:Ru}}),[r,p,d,j,i]);return(0,Kj.useMemo)(()=>({interstitial:m,shouldShow:c}),[m,c])};n();s();n();s();n();s();n();s();var Lr=v(x());var Du=Lr.default.memo(e=>{let{children:A,i18nKey:j,...t}=e,{t:r}=BA(),o=(0,Lr.useMemo)(()=>{let i=(j?`${r(j,{...t,...t.values})}`:"").replace(/<\/?[^>]+(>|$)/g,"");return Lr.default.createElement(bA,null,i)},[j,t,r]);return Lr.default.createElement(bB,{fallback:o},Lr.default.createElement(pB,{i18nKey:j,...t},A))});var Ne=v(x());var Sv="https://phantom.com/terms",wv="https://phantom.com/privacy",Iv="https://phantom.com/terms-and-privacy-update",$v=({onConfirm:e,openUrl:A})=>{let{t:j}=BA(),t=Y(),{mutate:r}=Dr("TermsOfServiceUpdate"),o=(0,Ne.useCallback)(async()=>{r(),e()},[r,e]),a=(0,Ne.useCallback)(c=>async()=>{await t.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await A(c)},[t,A]),i=(0,Ne.useMemo)(()=>({title:j("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:j("commandContinue"),onAction:o,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:Ne.default.createElement(vv,{openUrl:a}),dismissGestureDisabled:!0}),[j,o,a]);return(0,Ne.useMemo)(()=>({interstitial:i}),[i])},vv=({openUrl:e})=>Ne.default.createElement(cA,{marginTop:24},Ne.default.createElement(bA,{font:"body",align:"center"},Ne.default.createElement(Du,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",Ne.default.createElement(bA,{onPress:e(Sv),color:"accentPrimary"},"Terms of Service"),"and",Ne.default.createElement(bA,{onPress:e(wv),color:"accentPrimary"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",Ne.default.createElement(bA,{onPress:e(Iv),color:"accentPrimary"},"Learn More"),".")));n();s();n();s();n();s();n();s();var bf=async({accountID:e,deviceId:A,locale:j,rootId:t,selectedAccountAddresses:r,accessToken:o})=>{let a;try{let i={accountID:e,deviceId:A,locale:j,platform:se,rootId:t,selectedAccountAddresses:r,version:$A},c=await H.api().headers({"Content-Type":"application/json"}).bearer(o).post(({apiEnv:d})=>`/banners/get_banners/${d}/v2`,i);if(c.status===400){let d=await c.data,m=Ri(d);throw new Error(m)}else if(c.status<200||c.status>299)throw new Error(`status code: ${c.status}, body: ${await c.statusText}`);let p=c.data;return p?{...p,banners:p.banners??[]}:vf}catch(i){return a===400&&i instanceof Error&&b.captureError(i,"actionBanner"),vf}},vf={id:void 0,banners:[]};n();s();n();s();var Nu=e=>e?Object.values(_i).includes(e):!1;n();s();var qf=e=>{switch(e){case"Bottom Sheet":return ge;case"Modal":return!0;default:return!1}};var xf=e=>{let{bannerType:A,destinationType:j}=e;switch(A){case"Deep Link":return Nu(j);case"Bottom Sheet":case"Modal":return qf(A)&&Nu(j);default:return!1}};var Gf=async({accountID:e,deviceId:A,dismissedBanners:j,locale:t,rootId:r,selectedAccountAddresses:o,accessToken:a})=>{let i=await bf({accountID:e,deviceId:A,locale:t,rootId:r,selectedAccountAddresses:o,accessToken:a});return{...i,banners:i.banners.filter(c=>xf(c)&&!j.includes(c.id))}};var bv=X({minutes:1}),qv=()=>{let e=Y(),A=kA(),{data:j,isLoading:t}=xe(),{data:r}=EA(),o=async()=>{let a=r?.type!=="readOnly"?r?.addresses.map(eB)??[]:[],i=r?.type==="seed"?r.seedIdentifier:null,c=await Ou(A),p=re(T.language)??"en",d=await e.getDeviceId();return Gf({accountID:r?.identifier??"",deviceId:d,dismissedBanners:c,locale:p,rootId:i,selectedAccountAddresses:a,accessToken:j?.accessToken})};return eA({queryKey:de.actionBanners(r?.identifier,j?.accessToken),queryFn:o,enabled:!t&&!!r?.identifier,staleTime:bv})};n();s();var xv=()=>{let e=kA(),A=Z();return dA({mutationFn:async({actionBannerId:t})=>{wf(e,t),A.setQueriesData({queryKey:[Yt]},r=>{if(!r)return;let o=r.banners.filter(a=>a.id!==t);return{...r,banners:o}})}})};n();s();var Ku=e=>{let A=kA(),j=de.interstitialViewHistory(e);return eA({queryKey:j,queryFn:async()=>await dt.getViewHistory(e,A)})};n();s();var Gv=()=>{let e=kA(),A=Z();return dA({mutationFn:async()=>{let j=Date.now(),r=[...(await e.get("appLaunchTimes")||[]).slice(-1),j];return e.set("appLaunchTimes",r)},onSuccess:()=>{A.invalidateQueries({queryKey:de.appLaunchTimes()})}})};n();s();var Tv=()=>{let e=kA(),A=Z();return dA({mutationFn:()=>{let j=Date.now();return e.set("lastOnboardedAt",j)},onSuccess:()=>{A.invalidateQueries({queryKey:de.lastOnboardedAt()})}})};n();s();n();s();var tn=v(x()),Tf=(0,tn.createContext)(null);function Pv({children:e,seedlessRepository:A}){return tn.default.createElement(Tf.Provider,{value:{seedlessRepository:A}},e)}function Ov(){let e=(0,tn.useContext)(Tf);if(!e)throw new Error("useSeedlessContext must be used within a SeedlessProvider");return e}function ae(){return Ov().seedlessRepository}n();s();n();s();var Mv=l.record(l.string(),l.number()),Cv=l.object({type:l.union([l.literal("Buffer"),l.literal("Object")]),data:l.array(l.number())}),_v=l.union([Mv,Cv]),Pf=l.object({seeds:l.array(l.tuple([l.string(),_v]))}),Of=e=>Rv(e)?new Uint8Array(Buffer.from(e.data)):new Uint8Array(Object.values(e)),Rv=e=>!!e&&typeof e=="object"&&yu("type",e)&&typeof e.type=="string"&&yu("data",e)&&Array.isArray(e.data)&&e.data.every(A=>!Number.isNaN(parseInt(A))),Mf=l.object({deviceId:l.string(),encryptionKey:l.string().length(44).base64()});n();s();n();s();var Zt="/seedless",Dv="https://phantom-wallet.zendesk.com/hc/en-us/articles/32775281256851";var Cf="/seedless";n();s();var rn=class extends Error{reasonString;reasonCode;constructor(A){super("Failed to backup share from Juicebox"),this.reasonCode=A,this.reasonString=Lu[A]}},on=class extends Error{guessesRemaining;reasonString;reasonCode;constructor(A,j){super("Failed to recover share from Juicebox"),this.guessesRemaining=j,this.reasonCode=A,this.reasonString=Ar[A]}},Ks=class extends Error{reasonString;reasonCode;constructor(A){super("Failed to delete share from Juicebox"),this.reasonCode=A,this.reasonString=_f[A]}},Lu=(r=>(r[r.InvalidAuth=0]="InvalidAuth",r[r.UpgradeRequired=1]="UpgradeRequired",r[r.Assertion=2]="Assertion",r[r.Transient=3]="Transient",r))(Lu||{}),Ar=(i=>(i[i.InvalidPin=0]="InvalidPin",i[i.NotRegistered=1]="NotRegistered",i[i.InvalidAuth=2]="InvalidAuth",i[i.UpgradeRequired=3]="UpgradeRequired",i[i.Assertion=4]="Assertion",i[i.Transient=5]="Transient",i[i.CooldownTimer=6]="CooldownTimer",i))(Ar||{}),_f=(o=>(o[o.InvalidAuth=0]="InvalidAuth",o[o.UpgradeRequired=1]="UpgradeRequired",o[o.RateLimitExceeded=2]="RateLimitExceeded",o[o.Assertion=3]="Assertion",o[o.Transient=4]="Transient",o))(_f||{}),Nv=e=>Ls(e)||Rf(e)||Df(e),Ls=e=>e instanceof on,Rf=e=>e instanceof rn,Df=e=>e instanceof Ks;globalThis.JuiceboxGetAuthToken=async e=>{let A=Buffer.from(e).toString("hex");return globalThis.JuiceboxTokens[A]};var Uu=class{encoder;provider;constructor(A){this.encoder=new TextEncoder,this.provider=A}async getJwts(A){let j=await H.api().bearer(A).post(`${Cf}/v1/juiceboxtoken`);(tA(j)||j.status===304)&&this.provider.setJuiceboxTokens(j.data)}async sendJuiceboxShare(A,j,t,r){await this.getJwts(r);try{await this.provider.backupShare(A,j,this.encoder.encode(t),this.encoder.encode("phantom"),7),b.addBreadcrumb("se*dless","Successful backup share to Juicebox","debug")}catch(o){b.addBreadcrumb("se*dless","Failed to backup share to Juicebox","error");let a=new rn(o);throw b.captureError(a,"se*dless"),a}return!0}async getJuiceboxShare(A,j,t){await this.getJwts(t);try{let r=await this.provider.recoverShare(A,this.encoder.encode(j),this.encoder.encode("phantom"));return b.addBreadcrumb("se*dless","Successfully recovered share from Juicebox","debug"),r}catch(r){let o=r.reason,a=r.guessesRemaining!==void 0?r.guessesRemaining:r.guesses_remaining;b.addBreadcrumb("se*dless","Failed to recover share from Juicebox","error");let i=new on(o,a);throw b.captureError(i,"se*dless"),i}}async deleteShare(A,j){await this.getJwts(j);try{await this.provider.deleteShare(A),b.addBreadcrumb("se*dless","Successfully deleted share from Juicebox","debug")}catch(t){b.addBreadcrumb("se*dless","Failed to delete share from Juicebox","error");let r=new Ks(t);throw b.captureError(r,"se*dless"),r}}};n();s();n();s();var Qu="@phantom/seedless",Ur={hasSeedlessBundle:["seedless",`${Qu}:has_seedless_bundle`],needsBundleUpdate:["seedless",`${Qu}:needs_bundle_update`],timeLeftCooldown:["seedless",`${Qu}:time_left_cooldown`]};function Hu({enabled:e=!0}={}){let A=Ur.hasSeedlessBundle,j=ae(),t=pj();return eA({enabled:t&&e,queryKey:A,queryFn:async()=>await j.hasSeedlessBundle()})}n();s();n();s();var Ki=async e=>{await e.invalidateQueries({queryKey:Ur.hasSeedlessBundle})},nn=async e=>{await e.invalidateQueries({queryKey:Ur.needsBundleUpdate})};function Kv(){let e=ae(),A=Z(),j=Y();return dA({mutationFn:async({entropy:t,pin:r})=>await e.backup(t,r),onSuccess:async()=>{j.capture("seedlessBackupSuccess"),await Ki(A),await nn(A)},onError:()=>{j.capture("seedlessBackupError")}})}n();s();function Vu(){let e=ae(),A=Z(),j=Y();return dA({mutationFn:async r=>await e.recover(r),onSuccess:async()=>{j.capture("seedlessRecoverSuccess"),await nn(A)},onError:()=>{j.capture("seedlessRecoverError")}})}n();s();function Nf(){let e=ae(),A=Y();return dA({mutationFn:async t=>{await e.verifyPin(t)},onSuccess:()=>{b.addBreadcrumb("se*dless","Successfully verified PIN","info"),A.capture("seedlessVerifyPinSuccess")},onError:()=>{b.addBreadcrumb("se*dless","Failed to verify PIN","error"),A.capture("seedlessVerifyPinError")}})}n();s();function Lv(){let e=ae(),A=Z();return dA({mutationFn:async()=>await e.deleteBundle(),onSuccess:async()=>{await Ki(A),await nn(A)}})}n();s();function Kf(){let e=ae(),A=Y();return dA({mutationFn:async t=>await e.resetBundleFromDevice(t.pin,t.seedlessEntropies),onSuccess:()=>{b.addBreadcrumb("se*dless","Successfully reset bundle from device","info"),A.capture("seedlessResetPinSuccess")},onError:()=>{b.addBreadcrumb("se*dless","Failed to reset bundle from device","error"),A.capture("seedlessResetPinError")}})}n();s();var Uv=1e3,Qv=500;function Xu(){let e=Ur.timeLeftCooldown,A=ae(),j=pj();return eA({enabled:j,queryKey:e,queryFn:async()=>await A.timeLeftCooldown(),refetchInterval:Uv,refetchOnMount:"always",staleTime:Qv})}n();s();var Li=v(x()),Lf=1e3,zu=()=>{let[e,A]=(0,Li.useState)(0);return(0,Li.useEffect)(()=>{if(!e)return;let j=setInterval(async()=>{A(e-Lf)},Lf);return()=>clearInterval(j)},[e]),{cooldownTimer:e,setCooldownTimer:A}};n();s();var Wu=v(x());var Hv="seedless-pin-verification-timer-in-ms",Vv=l.string().transform(e=>Number(e)).pipe(l.number()).nullish().catch(null),Ju=()=>{let e=ae(),A=(0,Wu.useMemo)(()=>LA.getMultivariateAssignment(Hv,{dependent_flag:"enable-seedless-pin-verification-interstitial",variation_served:"true"}),[]),j=(0,Wu.useMemo)(()=>Vv.parse(A)??2592e6,[A]),t=async()=>{let{expired:r,timestampInMs:o}=await e.getPinVerificationTimer({pinVerificationExpiryInMs:j});return{expired:r,timestampInMs:o}};return eA({queryKey:["seedlessPinVerificationLockTimerInMs"],queryFn:t,refetchInterval:j??2592e6,staleTime:j??2592e6})};n();s();var Hs=()=>{let e=Z(),A=ae();return dA({mutationFn:async()=>{b.addBreadcrumb("se*dless","Resetting PIN verification timer","info"),await A.setPinVerificationTimer(Date.now())},onSuccess:async()=>{b.addBreadcrumb("se*dless","Successfully reset PIN verification timer","info"),await e.invalidateQueries({queryKey:["seedlessPinVerificationLockTimerInMs"]})},onError:()=>{b.addBreadcrumb("se*dless","Failed to reset PIN verification timer","error")}})};n();s();var rl=v(x());n();s();n();s();n();s();n();s();function Yu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Xv(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Uf(e,...A){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length>0&&!A.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${A}, not of length=${e.length}`)}function zv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yu(e.outputLen),Yu(e.blockLen)}function Wv(e,A=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(A&&e.finished)throw new Error("Hash#digest() has already been called")}function Jv(e,A){Uf(e);let j=A.outputLen;if(e.length<j)throw new Error(`digestInto() expects output buffer of length at least ${j}`)}var Yv={number:Yu,bool:Xv,bytes:Uf,hash:zv,exists:Wv,output:Jv},Ui=Yv;n();s();n();s();var Vs={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Hi=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$j=(e,A)=>e<<32-A|e>>>A,Zv=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Zv)throw new Error("Non little-endian hardware is not supported");var Ab=Array.from({length:256},(e,A)=>A.toString(16).padStart(2,"0"));function Vi(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let j=0;j<e.length;j++)A+=Ab[e[j]];return A}function Qf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let A=new Uint8Array(e.length/2);for(let j=0;j<A.length;j++){let t=j*2,r=e.slice(t,t+2),o=Number.parseInt(r,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");A[j]=o}return A}function eb(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Zu(e){if(typeof e=="string"&&(e=eb(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Qi=class{clone(){return this._cloneInto()}};function Al(e){let A=t=>e().update(Zu(t)).digest(),j=e();return A.outputLen=j.outputLen,A.blockLen=j.blockLen,A.create=()=>e(),A}function Xi(e=32){if(Vs.web)return Vs.web.getRandomValues(new Uint8Array(e));if(Vs.node)return new Uint8Array(Vs.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}function jb(e,A,j,t){if(typeof e.setBigUint64=="function")return e.setBigUint64(A,j,t);let r=BigInt(32),o=BigInt(4294967295),a=Number(j>>r&o),i=Number(j&o),c=t?4:0,p=t?0:4;e.setUint32(A+c,a,t),e.setUint32(A+p,i,t)}var zi=class extends Qi{constructor(A,j,t,r){super(),this.blockLen=A,this.outputLen=j,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(A),this.view=Hi(this.buffer)}update(A){Ui.exists(this);let{view:j,buffer:t,blockLen:r}=this;A=Zu(A);let o=A.length;for(let a=0;a<o;){let i=Math.min(r-this.pos,o-a);if(i===r){let c=Hi(A);for(;r<=o-a;a+=r)this.process(c,a);continue}t.set(A.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===r&&(this.process(j,0),this.pos=0)}return this.length+=A.length,this.roundClean(),this}digestInto(A){Ui.exists(this),Ui.output(A,this),this.finished=!0;let{buffer:j,view:t,blockLen:r,isLE:o}=this,{pos:a}=this;j[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(t,0),a=0);for(let m=a;m<r;m++)j[m]=0;jb(t,r-8,BigInt(this.length*8),o),this.process(t,0);let i=Hi(A),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=c/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<p;m++)i.setUint32(4*m,d[m],o)}digest(){let{buffer:A,outputLen:j}=this;this.digestInto(A);let t=A.slice(0,j);return this.destroy(),t}_cloneInto(A){A||(A=new this.constructor),A.set(...this.get());let{blockLen:j,buffer:t,length:r,finished:o,destroyed:a,pos:i}=this;return A.length=r,A.pos=i,A.finished=o,A.destroyed=a,r%j&&A.buffer.set(t),A}};var tb=(e,A,j)=>e&A^~e&j,rb=(e,A,j)=>e&A^e&j^A&j,ob=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jr=new Uint32Array(64),Wi=class extends zi{constructor(){super(64,32,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){let{A,B:j,C:t,D:r,E:o,F:a,G:i,H:c}=this;return[A,j,t,r,o,a,i,c]}set(A,j,t,r,o,a,i,c){this.A=A|0,this.B=j|0,this.C=t|0,this.D=r|0,this.E=o|0,this.F=a|0,this.G=i|0,this.H=c|0}process(A,j){for(let m=0;m<16;m++,j+=4)jr[m]=A.getUint32(j,!1);for(let m=16;m<64;m++){let B=jr[m-15],f=jr[m-2],k=$j(B,7)^$j(B,18)^B>>>3,g=$j(f,17)^$j(f,19)^f>>>10;jr[m]=g+jr[m-7]+k+jr[m-16]|0}let{A:t,B:r,C:o,D:a,E:i,F:c,G:p,H:d}=this;for(let m=0;m<64;m++){let B=$j(i,6)^$j(i,11)^$j(i,25),f=d+B+tb(i,c,p)+ob[m]+jr[m]|0,g=($j(t,2)^$j(t,13)^$j(t,22))+rb(t,r,o)|0;d=p,p=c,c=i,i=a+f|0,a=o,o=r,r=t,t=f+g|0}t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,a=a+this.D|0,i=i+this.E|0,c=c+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(t,r,o,a,i,c,p,d)}roundClean(){jr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},el=class extends Wi{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Hf=Al(()=>new Wi),BH=Al(()=>new el);var tr=e=>{let A=jl(e),j=JSON.stringify(A);return Vi(Hf(j))};function Xs(e){return/^\d+$/.test(e)}var Lj=e=>e.length!==4?!1:Xs(e),jl=e=>{if(Array.isArray(e))return e.map(A=>typeof A=="object"?jl(A):A).sort();if(typeof e=="object"&&e!==null){let A={},j=Object.keys(e).sort();for(let t of j)A[t]=jl(e[t]);return A}else return e},tl=e=>{let A=Math.max(0,Math.floor(e/1e3)),j=Math.floor(A/60).toString(),t=A%60>9?`${A%60}`:`0${A%60}`;return{minutes:j,seconds:t}};n();s();var ol=v(x());n();s();var rr=v(x());n();s();var sn=class extends Error{result;constructor(A){super(`Unable to recover seedless bundle: ${A.type}`),this.result=A}},Ji=class extends Error{result;constructor(A){super(`Unable to backup seedless bundle: ${A.type}`),this.result=A}},zs=e=>e instanceof sn,nb=e=>zs(e)&&e.result.type==="unauthorized",nl=e=>zs(e)&&e.result.type==="error-juicebox-recover"&&e.result.reason===0,sl=e=>zs(e)&&e.result.type==="cooldown",al=e=>zs(e)&&e.result.type==="upgrade-required";var sb=({hasEnrolledAuthentication:e,onAccountsAdded:A,onOnboardingDone:j,onOnboardingProtect:t,onImportAndSyncAccounts:r,onForgot:o})=>{let{t:a}=BA(),i=Y(),{data:c=[]}=cB(),{refetch:p}=Xu(),{mutateAsync:d}=Hs(),{mutateAsync:m}=Vu(),[B,f]=(0,rr.useState)(!1),[k,g]=(0,rr.useState)({isInvalidPin:!1,triesLeft:void 0,pin:""}),[E,y]=(0,rr.useState)(!1),{cooldownTimer:F,setCooldownTimer:S}=zu(),{minutes:$,seconds:M}=tl(F),[O,G]=(0,rr.useState)(null);return(0,rr.useEffect)(()=>{!k.triesLeft||k.triesLeft>0||o()},[k.triesLeft,o]),(0,rr.useEffect)(()=>{(async()=>{let{data:q=0}=await p();return q})().then(q=>S(q))},[]),{isLoading:E,isError:B,handleInput:h=>{g(q=>({...q,isInvalidPin:h!==""&&!Xs(h),pin:h}))},onSubmit:async()=>{if(!E){if(!Lj(k.pin)){g(h=>({...h,isInvalidPin:!0,triesLeft:void 0,pin:""}));return}try{y(!0),f(!1),g(q=>({...q,isInvalidPin:!1,triesLeft:void 0}));let{entropy:h}=await m(k.pin);await r(h),await d(),i.capture("seedlessEnterPinContinue"),c.length>1&&A?A():!e&&j?j():t?.()}catch(h){if(nl(h)||sl(h)){let q;if("guessesRemaining"in h.result&&(q=h.result.guessesRemaining),q===0){g(N=>({...N,isInvalidPin:!0,triesLeft:q,pin:""})),o();return}let C=!1;"reason"in h.result&&h.result.reason===0&&(C=!0);let{data:R=0}=await p();S(R),i.capture("seedlessPinError",{data:{triesLeft:q,cooldownTimer:R}}),g(N=>({...N,isInvalidPin:C,triesLeft:q,pin:""}))}else al(h)?(f(!0),G({title:a("seedlessRecoverErrorUpgradeRequiredTitle"),description:a("seedlessRecoverErrorUpgradeRequiredDescription")})):(b.captureError(h,"se*dless"),f(!0),G({title:a("seedlessEnterPinUnknownErrorPrimaryText"),description:a("seedlessEnterPinUnknownErrorSecondaryText"),buttonText:a("seedlessTryAgain")}))}finally{y(!1)}}},onForgot:o,pinAttemptsLeft:k.triesLeft,isPinError:k.isInvalidPin,hasCooldownTimer:F>0,disabled:F>0||k.isInvalidPin||!k.pin||k.pin.length<4,pin:k.pin,continueButtonText:a("seedlessContinueText"),forgotButtonText:a("seedlessVerifyPinForgotButtonText"),attemptsLeftText:a("seedlessEnterPinNumTriesLeft",{numTries:k.triesLeft}),cooldownTimerText:a("seedlessEnterPinCooldown",{minutesLeft:$,secondsLeft:M}),invalidPinText:a("seedlessEnterPinInvalidPinError"),title:a("seedlessEnterPinPrimaryText"),loadingTitle:a("seedlessLoadingWalletPrimaryText"),loadingDescription:a("seedlessLoadingWalletSecondaryText"),errorTitle:O?O.title:a("seedlessLoadingWalletErrorPrimaryText"),errorDescription:O?O.description:a("seedlessErrorSecondaryText"),tryAgainButtonText:O?O.buttonText:a("seedlessTryAgain")}};n();s();n();s();var s9=new Error("timeout while waiting for mutex to become available"),a9=new Error("mutex already locked"),ab=new Error("request for lock canceled"),ib=function(e,A,j,t){function r(o){return o instanceof j?o:new j(function(a){a(o)})}return new(j||(j=Promise))(function(o,a){function i(d){try{p(t.next(d))}catch(m){a(m)}}function c(d){try{p(t.throw(d))}catch(m){a(m)}}function p(d){d.done?o(d.value):r(d.value).then(i,c)}p((t=t.apply(e,A||[])).next())})},il=class{constructor(A,j=ab){this._value=A,this._cancelError=j,this._weightedQueues=[],this._weightedWaiters=[]}acquire(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);return new Promise((j,t)=>{this._weightedQueues[A-1]||(this._weightedQueues[A-1]=[]),this._weightedQueues[A-1].push({resolve:j,reject:t}),this._dispatch()})}runExclusive(A,j=1){return ib(this,void 0,void 0,function*(){let[t,r]=yield this.acquire(j);try{return yield A(t)}finally{r()}})}waitForUnlock(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);return new Promise(j=>{this._weightedWaiters[A-1]||(this._weightedWaiters[A-1]=[]),this._weightedWaiters[A-1].push(j),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(A){this._value=A,this._dispatch()}release(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);this._value+=A,this._dispatch()}cancel(){this._weightedQueues.forEach(A=>A.forEach(j=>j.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var A;for(let j=this._value;j>0;j--){let t=(A=this._weightedQueues[j-1])===null||A===void 0?void 0:A.shift();if(!t)continue;let r=this._value,o=j;this._value-=j,j=this._value+1,t.resolve([r,this._newReleaser(o)])}this._drainUnlockWaiters()}_newReleaser(A){let j=!1;return()=>{j||(j=!0,this.release(A))}}_drainUnlockWaiters(){for(let A=this._value;A>0;A--)this._weightedWaiters[A-1]&&(this._weightedWaiters[A-1].forEach(j=>j()),this._weightedWaiters[A-1]=[])}},cb=function(e,A,j,t){function r(o){return o instanceof j?o:new j(function(a){a(o)})}return new(j||(j=Promise))(function(o,a){function i(d){try{p(t.next(d))}catch(m){a(m)}}function c(d){try{p(t.throw(d))}catch(m){a(m)}}function p(d){d.done?o(d.value):r(d.value).then(i,c)}p((t=t.apply(e,A||[])).next())})},Ws=class{constructor(A){this._semaphore=new il(1,A)}acquire(){return cb(this,void 0,void 0,function*(){let[,A]=yield this._semaphore.acquire();return A})}runExclusive(A){return this._semaphore.runExclusive(()=>A())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};n();s();n();s();var ye=[];for(let e=0;e<256;++e)ye.push((e+256).toString(16).slice(1));function Vf(e,A=0){return(ye[e[A+0]]+ye[e[A+1]]+ye[e[A+2]]+ye[e[A+3]]+"-"+ye[e[A+4]]+ye[e[A+5]]+"-"+ye[e[A+6]]+ye[e[A+7]]+"-"+ye[e[A+8]]+ye[e[A+9]]+"-"+ye[e[A+10]]+ye[e[A+11]]+ye[e[A+12]]+ye[e[A+13]]+ye[e[A+14]]+ye[e[A+15]]).toLowerCase()}n();s();var cl,pb=new Uint8Array(16);function pl(){if(!cl){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cl=self.crypto.getRandomValues.bind(self.crypto)}return cl(pb)}n();s();n();s();var ub=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),ul={randomUUID:ub};function lb(e,A,j){if(ul.randomUUID&&!A&&!e)return ul.randomUUID();e=e||{};let t=e.random??e.rng?.()??pl();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,A){if(j=j||0,j<0||j+16>A.length)throw new RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let r=0;r<16;++r)A[j+r]=t[r];return A}return Vf(t)}var Yi=lb;n();s();async function Xf(e,A,j){let t=await e.decryptionKeySharePhantom.foldAsync(async p=>Buffer.from(new Uint8Array(p)).toString("base64")),r=Buffer.from(e.encryptedAccounts,"hex").toString("base64"),o=Buffer.from(e.encryptionKey,"hex").toString("base64"),a={ciphertext:r,encryptionKey:o,share:t,externalId:A,mode:"JUICEBOX"},i=await H.api().bearer(j).headers({"Content-Type":"application/json"}).post(`${Zt}/v1/bundles`,a),c=tA(i);return c||b.addBreadcrumb("se*dless","Failed to backup bundle to backend","error",{status:i.status,statusText:i.statusText}),c}async function Zi(e,A){let j=await H.api().bearer(A).get(`${Zt}/v1/bundles/${e}?mode=JUICEBOX`);if(j.status===404)throw new Error("bundle not found");if(!tA(j)){b.addBreadcrumb("se*dless","Failed to recover bundle from backend","error",{status:j.status,statusText:j.statusText});let t=new Error("Got invalid response from seedless backend: "+j.statusText);throw b.captureError(t,"se*dless"),t}if(!("share"in j.data)){b.addBreadcrumb("se*dless","No share found in bundle","error");let t=new Error("Did not receive share from seedless backend");throw b.captureError(t,"se*dless"),t}try{let t=yj.from(new Uint8Array(Buffer.from(j.data.share,"base64"))),r=Buffer.from(j.data.ciphertext,"base64").toString("hex"),o=Buffer.from(j.data.encryptionKey,"base64").toString("hex");return{id:j.data.externalId,encryptedAccounts:r,encryptionKey:o,decryptionKeyShare1:t}}catch{throw new Error("Unable to parse bundle. Incorrect format.")}}async function A6(e,A){let j=await H.api().bearer(A).get(`${Zt}/v1/bundles/${e}?mode=JUICEBOX&populate=none`);if(b.addBreadcrumb("se*dless","Checking if user has a se*dless bundle","info"),tA(j))return b.addBreadcrumb("se*dless","A se*dless bundle has been found for this user","info",{status:j.status,statusText:j.statusText}),!0;if(j.status===404)return b.addBreadcrumb("se*dless","No se*dless bundle found for user","info",{status:j.status,statusText:j.statusText}),!1;let t=new Error("Failed to check for se*dless bundle.");throw b.captureError(t,"se*dless"),t}async function e6(e,A){let j=H.api().bearer(A).headers({"Content-Type":"application/json"});e!=="latest"&&(j=j.retry(3,500));let t=await j.delete(`${Zt}/v1/bundles/${e}`,{mode:"JUICEBOX"});if(b.addBreadcrumb("se*dless","Deleting se*dless bundle","info"),tA(t))return b.addBreadcrumb("se*dless","A se*dless bundle has been deleted for this user","info",{status:t.status,statusText:t.statusText}),!0;if(t.status===404)return b.addBreadcrumb("se*dless","No se*dless bundle found for user","info",{status:t.status,statusText:t.statusText}),!1;let r=new Error("Failed to delete se*dless bundle.");throw b.captureError(r,"se*dless"),r}async function ll(e,A){let j=await H.api().bearer(e).get(`${Zt}/v1/device-encryption-keys/${A}`);if(j.status===404)return b.addBreadcrumb("se*dless","No device encryption key found for user","info"),null;if(!tA(j))throw new Error("Unable to get device encryption key.");try{let{encryptionKey:t}=Mf.parse(j.data);return yj.from(new Uint8Array(Buffer.from(t,"base64")))}catch{throw new Error("Unable to parse device encryption key from response.")}}async function zf(e,A,j){let t=await H.api().bearer(e).post(`${Zt}/v1/device-encryption-keys`,{deviceId:A,encryptionKey:j.fold(r=>Buffer.from(r).toString("base64"))});if(!tA(t))throw new Error("Unable to set device encryption key.")}async function Wf(e,A){let j=await H.api().bearer(e).delete(`${Zt}/v1/device-encryption-keys/${A}`);if(!tA(j))throw new Error("Unable to delete device encryption key.")}n();s();n();s();n();s();n();s();n();s();function an(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function dl(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function ml(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ne(e,...A){if(!ml(e))throw new Error("Uint8Array expected");if(A.length>0&&!A.includes(e.length))throw new Error(`Uint8Array expected of length ${A}, not of length=${e.length}`)}function kl(e,A=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(A&&e.finished)throw new Error("Hash#digest() has already been called")}function Jf(e,A){ne(e);let j=A.outputLen;if(e.length<j)throw new Error(`digestInto() expects output buffer of length at least ${j}`)}var kt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Yf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),db=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!db)throw new Error("Non little-endian hardware is not supported");function Bl(e){if(typeof e!="string")throw new Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function j6(e){if(typeof e=="string")e=Bl(e);else if(ml(e))e=e.slice();else throw new Error(`Uint8Array expected, got ${typeof e}`);return e}function Zf(...e){let A=0;for(let t=0;t<e.length;t++){let r=e[t];ne(r),A+=r.length}let j=new Uint8Array(A);for(let t=0,r=0;t<e.length;t++){let o=e[t];j.set(o,r),r+=o.length}return j}function AE(e,A){if(A==null||typeof A!="object")throw new Error("options must be defined");return Object.assign(e,A)}function eE(e,A){if(e.length!==A.length)return!1;let j=0;for(let t=0;t<e.length;t++)j|=e[t]^A[t];return j===0}var fl=(e,A)=>(Object.assign(A,e),A);function El(e,A,j,t){if(typeof e.setBigUint64=="function")return e.setBigUint64(A,j,t);let r=BigInt(32),o=BigInt(4294967295),a=Number(j>>r&o),i=Number(j&o),c=t?4:0,p=t?0:4;e.setUint32(A+c,a,t),e.setUint32(A+p,i,t)}n();s();var Fe=(e,A)=>e[A++]&255|(e[A++]&255)<<8,gl=class{constructor(A){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,A=j6(A),ne(A,32);let j=Fe(A,0),t=Fe(A,2),r=Fe(A,4),o=Fe(A,6),a=Fe(A,8),i=Fe(A,10),c=Fe(A,12),p=Fe(A,14);this.r[0]=j&8191,this.r[1]=(j>>>13|t<<3)&8191,this.r[2]=(t>>>10|r<<6)&7939,this.r[3]=(r>>>7|o<<9)&8191,this.r[4]=(o>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|i<<2)&8191,this.r[7]=(i>>>11|c<<5)&8065,this.r[8]=(c>>>8|p<<8)&8191,this.r[9]=p>>>5&127;for(let d=0;d<8;d++)this.pad[d]=Fe(A,16+2*d)}process(A,j,t=!1){let r=t?0:2048,{h:o,r:a}=this,i=a[0],c=a[1],p=a[2],d=a[3],m=a[4],B=a[5],f=a[6],k=a[7],g=a[8],E=a[9],y=Fe(A,j+0),F=Fe(A,j+2),S=Fe(A,j+4),$=Fe(A,j+6),M=Fe(A,j+8),O=Fe(A,j+10),G=Fe(A,j+12),z=Fe(A,j+14),D=o[0]+(y&8191),h=o[1]+((y>>>13|F<<3)&8191),q=o[2]+((F>>>10|S<<6)&8191),C=o[3]+((S>>>7|$<<9)&8191),R=o[4]+(($>>>4|M<<12)&8191),N=o[5]+(M>>>1&8191),_=o[6]+((M>>>14|O<<2)&8191),L=o[7]+((O>>>11|G<<5)&8191),V=o[8]+((G>>>8|z<<8)&8191),U=o[9]+(z>>>5|r),K=0,IA=K+D*i+h*(5*E)+q*(5*g)+C*(5*k)+R*(5*f);K=IA>>>13,IA&=8191,IA+=N*(5*B)+_*(5*m)+L*(5*d)+V*(5*p)+U*(5*c),K+=IA>>>13,IA&=8191;let mA=K+D*c+h*i+q*(5*E)+C*(5*g)+R*(5*k);K=mA>>>13,mA&=8191,mA+=N*(5*f)+_*(5*B)+L*(5*m)+V*(5*d)+U*(5*p),K+=mA>>>13,mA&=8191;let xA=K+D*p+h*c+q*i+C*(5*E)+R*(5*g);K=xA>>>13,xA&=8191,xA+=N*(5*k)+_*(5*f)+L*(5*B)+V*(5*m)+U*(5*d),K+=xA>>>13,xA&=8191;let we=K+D*d+h*p+q*c+C*i+R*(5*E);K=we>>>13,we&=8191,we+=N*(5*g)+_*(5*k)+L*(5*f)+V*(5*B)+U*(5*m),K+=we>>>13,we&=8191;let KA=K+D*m+h*d+q*p+C*c+R*i;K=KA>>>13,KA&=8191,KA+=N*(5*E)+_*(5*g)+L*(5*k)+V*(5*f)+U*(5*B),K+=KA>>>13,KA&=8191;let qe=K+D*B+h*m+q*d+C*p+R*c;K=qe>>>13,qe&=8191,qe+=N*i+_*(5*E)+L*(5*g)+V*(5*k)+U*(5*f),K+=qe>>>13,qe&=8191;let uA=K+D*f+h*B+q*m+C*d+R*p;K=uA>>>13,uA&=8191,uA+=N*c+_*i+L*(5*E)+V*(5*g)+U*(5*k),K+=uA>>>13,uA&=8191;let te=K+D*k+h*f+q*B+C*m+R*d;K=te>>>13,te&=8191,te+=N*p+_*c+L*i+V*(5*E)+U*(5*g),K+=te>>>13,te&=8191;let Oe=K+D*g+h*k+q*f+C*B+R*m;K=Oe>>>13,Oe&=8191,Oe+=N*d+_*p+L*c+V*i+U*(5*E),K+=Oe>>>13,Oe&=8191;let sj=K+D*E+h*g+q*k+C*f+R*B;K=sj>>>13,sj&=8191,sj+=N*m+_*d+L*p+V*c+U*i,K+=sj>>>13,sj&=8191,K=(K<<2)+K|0,K=K+IA|0,IA=K&8191,K=K>>>13,mA+=K,o[0]=IA,o[1]=mA,o[2]=xA,o[3]=we,o[4]=KA,o[5]=qe,o[6]=uA,o[7]=te,o[8]=Oe,o[9]=sj}finalize(){let{h:A,pad:j}=this,t=new Uint16Array(10),r=A[1]>>>13;A[1]&=8191;for(let i=2;i<10;i++)A[i]+=r,r=A[i]>>>13,A[i]&=8191;A[0]+=r*5,r=A[0]>>>13,A[0]&=8191,A[1]+=r,r=A[1]>>>13,A[1]&=8191,A[2]+=r,t[0]=A[0]+5,r=t[0]>>>13,t[0]&=8191;for(let i=1;i<10;i++)t[i]=A[i]+r,r=t[i]>>>13,t[i]&=8191;t[9]-=8192;let o=(r^1)-1;for(let i=0;i<10;i++)t[i]&=o;o=~o;for(let i=0;i<10;i++)A[i]=A[i]&o|t[i];A[0]=(A[0]|A[1]<<13)&65535,A[1]=(A[1]>>>3|A[2]<<10)&65535,A[2]=(A[2]>>>6|A[3]<<7)&65535,A[3]=(A[3]>>>9|A[4]<<4)&65535,A[4]=(A[4]>>>12|A[5]<<1|A[6]<<14)&65535,A[5]=(A[6]>>>2|A[7]<<11)&65535,A[6]=(A[7]>>>5|A[8]<<8)&65535,A[7]=(A[8]>>>8|A[9]<<5)&65535;let a=A[0]+j[0];A[0]=a&65535;for(let i=1;i<8;i++)a=(A[i]+j[i]|0)+(a>>>16)|0,A[i]=a&65535}update(A){kl(this);let{buffer:j,blockLen:t}=this;A=j6(A);let r=A.length;for(let o=0;o<r;){let a=Math.min(t-this.pos,r-o);if(a===t){for(;t<=r-o;o+=t)this.process(A,o);continue}j.set(A.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===t&&(this.process(j,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(A){kl(this),Jf(A,this),this.finished=!0;let{buffer:j,h:t}=this,{pos:r}=this;if(r){for(j[r++]=1;r<16;r++)j[r]=0;this.process(j,0,!0)}this.finalize();let o=0;for(let a=0;a<8;a++)A[o++]=t[a]>>>0,A[o++]=t[a]>>>8;return A}digest(){let{buffer:A,outputLen:j}=this;this.digestInto(A);let t=A.slice(0,j);return this.destroy(),t}};function mb(e){let A=(t,r)=>e(r).update(j6(t)).digest(),j=e(new Uint8Array(32));return A.outputLen=j.outputLen,A.blockLen=j.blockLen,A.create=t=>e(t),A}var jE=mb(e=>new gl(e));n();s();var rE=e=>Uint8Array.from(e.split("").map(A=>A.charCodeAt(0))),kb=rE("expand 16-byte k"),Bb=rE("expand 32-byte k"),fb=kt(kb),oE=kt(Bb),Z9=oE.slice();function oA(e,A){return e<<A|e>>>32-A}function yl(e){return e.byteOffset%4===0}var t6=64,Eb=16,nE=2**32-1,tE=new Uint32Array;function gb(e,A,j,t,r,o,a,i){let c=r.length,p=new Uint8Array(t6),d=kt(p),m=yl(r)&&yl(o),B=m?kt(r):tE,f=m?kt(o):tE;for(let k=0;k<c;a++){if(e(A,j,t,d,a,i),a>=nE)throw new Error("arx: counter overflow");let g=Math.min(t6,c-k);if(m&&g===t6){let E=k/4;if(k%4!==0)throw new Error("arx: invalid block position");for(let y=0,F;y<Eb;y++)F=E+y,f[F]=B[F]^d[y];k+=t6;continue}for(let E=0,y;E<g;E++)y=k+E,o[y]=r[y]^p[E];k+=g}}function Fl(e,A){let{allowShortKeys:j,extendNonceFn:t,counterLength:r,counterRight:o,rounds:a}=AE({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},A);if(typeof e!="function")throw new Error("core must be a function");return an(r),an(a),dl(o),dl(j),(i,c,p,d,m=0)=>{ne(i),ne(c),ne(p);let B=p.length;if(d||(d=new Uint8Array(B)),ne(d),an(m),m<0||m>=nE)throw new Error("arx: counter overflow");if(d.length<B)throw new Error(`arx: output (${d.length}) is shorter than data (${B})`);let f=[],k=i.length,g,E;if(k===32)g=i.slice(),f.push(g),E=oE;else if(k===16&&j)g=new Uint8Array(32),g.set(i),g.set(i,16),E=fb,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${k}`);yl(c)||(c=c.slice(),f.push(c));let y=kt(g);if(t){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");t(E,y,kt(c.subarray(0,16)),y),c=c.subarray(16)}let F=16-r;if(F!==c.length)throw new Error(`arx: nonce must be ${F} or 16 bytes`);if(F!==12){let $=new Uint8Array(12);$.set(c,o?0:12-c.length),c=$,f.push(c)}let S=kt(c);for(gb(e,E,y,S,p,d,m,a);f.length>0;)f.pop().fill(0);return d}}function iE(e,A,j,t,r,o=20){let a=e[0],i=e[1],c=e[2],p=e[3],d=A[0],m=A[1],B=A[2],f=A[3],k=A[4],g=A[5],E=A[6],y=A[7],F=r,S=j[0],$=j[1],M=j[2],O=a,G=i,z=c,D=p,h=d,q=m,C=B,R=f,N=k,_=g,L=E,V=y,U=F,K=S,IA=$,mA=M;for(let we=0;we<o;we+=2)O=O+h|0,U=oA(U^O,16),N=N+U|0,h=oA(h^N,12),O=O+h|0,U=oA(U^O,8),N=N+U|0,h=oA(h^N,7),G=G+q|0,K=oA(K^G,16),_=_+K|0,q=oA(q^_,12),G=G+q|0,K=oA(K^G,8),_=_+K|0,q=oA(q^_,7),z=z+C|0,IA=oA(IA^z,16),L=L+IA|0,C=oA(C^L,12),z=z+C|0,IA=oA(IA^z,8),L=L+IA|0,C=oA(C^L,7),D=D+R|0,mA=oA(mA^D,16),V=V+mA|0,R=oA(R^V,12),D=D+R|0,mA=oA(mA^D,8),V=V+mA|0,R=oA(R^V,7),O=O+q|0,mA=oA(mA^O,16),L=L+mA|0,q=oA(q^L,12),O=O+q|0,mA=oA(mA^O,8),L=L+mA|0,q=oA(q^L,7),G=G+C|0,U=oA(U^G,16),V=V+U|0,C=oA(C^V,12),G=G+C|0,U=oA(U^G,8),V=V+U|0,C=oA(C^V,7),z=z+R|0,K=oA(K^z,16),N=N+K|0,R=oA(R^N,12),z=z+R|0,K=oA(K^z,8),N=N+K|0,R=oA(R^N,7),D=D+h|0,IA=oA(IA^D,16),_=_+IA|0,h=oA(h^_,12),D=D+h|0,IA=oA(IA^D,8),_=_+IA|0,h=oA(h^_,7);let xA=0;t[xA++]=a+O|0,t[xA++]=i+G|0,t[xA++]=c+z|0,t[xA++]=p+D|0,t[xA++]=d+h|0,t[xA++]=m+q|0,t[xA++]=B+C|0,t[xA++]=f+R|0,t[xA++]=k+N|0,t[xA++]=g+_|0,t[xA++]=E+L|0,t[xA++]=y+V|0,t[xA++]=F+U|0,t[xA++]=S+K|0,t[xA++]=$+IA|0,t[xA++]=M+mA|0}function yb(e,A,j,t){let r=e[0],o=e[1],a=e[2],i=e[3],c=A[0],p=A[1],d=A[2],m=A[3],B=A[4],f=A[5],k=A[6],g=A[7],E=j[0],y=j[1],F=j[2],S=j[3];for(let M=0;M<20;M+=2)r=r+c|0,E=oA(E^r,16),B=B+E|0,c=oA(c^B,12),r=r+c|0,E=oA(E^r,8),B=B+E|0,c=oA(c^B,7),o=o+p|0,y=oA(y^o,16),f=f+y|0,p=oA(p^f,12),o=o+p|0,y=oA(y^o,8),f=f+y|0,p=oA(p^f,7),a=a+d|0,F=oA(F^a,16),k=k+F|0,d=oA(d^k,12),a=a+d|0,F=oA(F^a,8),k=k+F|0,d=oA(d^k,7),i=i+m|0,S=oA(S^i,16),g=g+S|0,m=oA(m^g,12),i=i+m|0,S=oA(S^i,8),g=g+S|0,m=oA(m^g,7),r=r+p|0,S=oA(S^r,16),k=k+S|0,p=oA(p^k,12),r=r+p|0,S=oA(S^r,8),k=k+S|0,p=oA(p^k,7),o=o+d|0,E=oA(E^o,16),g=g+E|0,d=oA(d^g,12),o=o+d|0,E=oA(E^o,8),g=g+E|0,d=oA(d^g,7),a=a+m|0,y=oA(y^a,16),B=B+y|0,m=oA(m^B,12),a=a+m|0,y=oA(y^a,8),B=B+y|0,m=oA(m^B,7),i=i+c|0,F=oA(F^i,16),f=f+F|0,c=oA(c^f,12),i=i+c|0,F=oA(F^i,8),f=f+F|0,c=oA(c^f,7);let $=0;t[$++]=r,t[$++]=o,t[$++]=a,t[$++]=i,t[$++]=E,t[$++]=y,t[$++]=F,t[$++]=S}var Fb=Fl(iE,{counterRight:!1,counterLength:4,allowShortKeys:!1}),hb=Fl(iE,{counterRight:!1,counterLength:8,extendNonceFn:yb,allowShortKeys:!1});var Sb=new Uint8Array(16),sE=(e,A)=>{e.update(A);let j=A.length%16;j&&e.update(Sb.subarray(j))},wb=new Uint8Array(32);function aE(e,A,j,t,r){let o=e(A,j,wb),a=jE.create(o);r&&sE(a,r),sE(a,t);let i=new Uint8Array(16),c=Yf(i);El(c,0,BigInt(r?r.length:0),!0),El(c,8,BigInt(t.length),!0),a.update(i);let p=a.digest();return o.fill(0),p}var cE=e=>(A,j,t)=>(ne(A,32),ne(j),{encrypt:(o,a)=>{let i=o.length,c=i+16;a?ne(a,c):a=new Uint8Array(c),e(A,j,o,a,1);let p=aE(e,A,j,a.subarray(0,-16),t);return a.set(p,i),a},decrypt:(o,a)=>{let i=o.length,c=i-16;if(i<16)throw new Error("encrypted data must be at least 16 bytes");a?ne(a,c):a=new Uint8Array(c);let p=o.subarray(0,-16),d=o.subarray(-16),m=aE(e,A,j,p,t);if(!eE(d,m))throw new Error("invalid tag");return e(A,j,p,a,1),a}}),sV=fl({blockSize:64,nonceLength:12,tagLength:16},cE(Fb)),hl=fl({blockSize:64,nonceLength:24,tagLength:16},cE(hb));n();s();n();s();var Qr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function pE(e=32){if(Qr&&typeof Qr.getRandomValues=="function")return Qr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Sl(){if(Qr&&typeof Qr.subtle=="object"&&Qr.subtle!=null)return Qr.subtle;throw new Error("crypto.subtle must be defined")}function wl(e){return an(e.nonceLength),(A,...j)=>({encrypt:(t,...r)=>{let{nonceLength:o}=e,a=pE(o),i=e(A,a,...j).encrypt(t,...r),c=Zf(a,i);return i.fill(0),c},decrypt:(t,...r)=>{let{nonceLength:o}=e,a=t.subarray(0,o),i=t.subarray(o);return e(A,a,...j).decrypt(i,...r)}})}var uE={async encrypt(e,A,j,t){let r=Sl(),o=await r.importKey("raw",e,A,!0,["encrypt"]),a=await r.encrypt(j,o,t);return new Uint8Array(a)},async decrypt(e,A,j,t){let r=Sl(),o=await r.importKey("raw",e,A,!0,["decrypt"]),a=await r.decrypt(j,o,t);return new Uint8Array(a)}},Uj={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function Ib(e,A,j){if(e===Uj.CBC)return{name:Uj.CBC,iv:A};if(e===Uj.CTR)return{name:Uj.CTR,counter:A,length:64};if(e===Uj.GCM)return j?{name:Uj.GCM,iv:A,additionalData:j}:{name:Uj.GCM,iv:A};throw new Error("unknown aes block mode")}function Il(e){return(A,j,t)=>{ne(A),ne(j);let r={name:e,length:A.length*8},o=Ib(e,j,t);return{encrypt(a){return ne(a),uE.encrypt(A,r,o,a)},decrypt(a){return ne(a),uE.decrypt(A,r,o,a)}}}}var BV=Il(Uj.CBC),fV=Il(Uj.CTR),EV=Il(Uj.GCM);n();s();n();s();function $l(e){return self.crypto.getRandomValues(new Uint8Array(e))}var o6=new Uint8Array([0,255,200,8,145,16,208,54,90,62,216,67,153,119,254,24,35,32,7,112,161,108,12,127,98,139,64,70,199,75,224,14,235,22,232,173,207,205,57,83,106,39,53,147,212,78,72,195,43,121,84,40,9,120,15,33,144,135,20,42,169,156,214,116,180,124,222,237,177,134,118,164,152,226,150,143,2,50,28,193,51,238,239,129,253,48,92,19,157,41,23,196,17,68,140,128,243,115,66,30,29,181,240,18,209,91,65,162,215,44,233,213,89,203,80,168,220,252,242,86,114,166,101,47,159,155,61,186,125,194,69,130,167,87,182,163,122,117,79,174,63,55,109,71,97,190,171,211,95,176,88,175,202,94,250,133,228,77,138,5,251,96,183,123,184,38,74,103,198,26,248,105,37,179,219,189,102,221,241,210,223,3,141,52,217,146,13,99,85,170,73,236,188,149,60,132,11,245,230,231,229,172,126,110,185,249,218,142,154,201,36,225,10,21,107,58,160,81,244,234,178,151,158,93,34,136,148,206,25,1,113,76,165,227,197,49,187,204,31,45,59,82,111,246,46,137,247,192,104,27,100,4,6,191,131,56]),lE=new Uint8Array([1,229,76,181,251,159,252,18,3,52,212,196,22,186,31,54,5,92,103,87,58,213,33,90,15,228,169,249,78,100,99,238,17,55,224,16,210,172,165,41,51,89,59,48,109,239,244,123,85,235,77,80,183,42,7,141,255,38,215,240,194,126,9,140,26,106,98,11,93,130,27,143,46,190,166,29,231,157,45,138,114,217,241,39,50,188,119,133,150,112,8,105,86,223,153,148,161,144,24,187,250,122,176,167,248,171,40,214,21,142,203,242,19,230,120,97,63,137,70,13,53,49,136,163,65,128,202,23,95,83,131,254,195,155,69,57,225,245,158,25,94,182,207,75,56,4,185,43,226,193,74,221,72,12,208,125,61,88,222,124,216,20,107,135,71,232,121,132,115,60,189,146,201,35,139,151,149,68,220,173,64,101,134,162,164,204,127,236,192,175,145,253,247,79,129,47,91,234,168,28,2,209,152,113,237,37,227,36,6,104,179,147,44,111,62,108,10,184,206,174,116,177,66,180,30,211,73,233,156,200,198,199,34,110,219,32,191,67,81,82,102,178,118,96,218,197,243,246,170,205,154,160,117,84,14,1]);function r6(e,A){if(!Number.isInteger(e)||e<0||e>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");return e^A}function $b(e,A){if(!Number.isInteger(e)||e<0||e>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");if(A===0)throw new Error("cannot divide by zero");let j=o6[e],t=o6[A],r=(j-t+255)%255,o=lE[r];return e===0?0:o}function vl(e,A){if(!Number.isInteger(e)||e<0||e>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");let j=o6[e],t=o6[A],r=(j+t)%255,o=lE[r];return e===0||A===0?0:o}function vb(e,A,j){if(e.length!==A.length)throw new Error("sample length mistmatch");let t=e.length,r=0,o=0;for(let a=0;a<t;a++){r=1;for(let i=0;i<t;++i){if(a===i)continue;let c=r6(j,e[i]),p=r6(e[a],e[i]),d=$b(c,p);r=vl(r,d)}o=r6(o,vl(A[a],r))}return o}function bb(e,A,j){if(A===0)throw new Error("cannot evaluate secret polynomial at zero");let t=e[j];for(let r=j-1;r>=0;r--){let o=e[r];t=r6(vl(t,A),o)}return t}function dE(){return $l(1)[0]}function qb(){for(;;){let e=dE();if(e>0)return e}}function xb(e,A){let j=new Uint8Array(A+1);j[0]=e;for(let t=1;t<=A;t++){let r=t===A;j[t]=r?qb():dE()}return j}function Gb(){let e=new Uint8Array(255);for(let j=0;j<255;j++)e[j]=j+1;let A=$l(255);for(let j=0;j<255;j++){let t=A[j]%255,r=e[j];e[j]=e[t],e[t]=r}return e}var ze={instanceOf(e,A,j){if(e.constructor!==A)throw new TypeError(j)},inRange(e,A,j,t){if(!(A<j&&e>=A&&e<j))throw new RangeError(t)},greaterThanOrEqualTo(e,A,j){if(e<A)throw new Error(j)},equalTo(e,A,j){if(e!==A)throw new Error(j)}};async function mE(e,A,j){ze.instanceOf(e,Uint8Array,"secret must be a Uint8Array"),ze.greaterThanOrEqualTo(e.byteLength,1,"secret cannot be empty"),ze.instanceOf(A,Number,"shares must be a number"),ze.inRange(A,2,256,"shares must be at least 2 and at most 255"),ze.instanceOf(j,Number,"threshold must be a number"),ze.inRange(j,2,256,"threshold must be at least 2 and at most 255"),ze.greaterThanOrEqualTo(A,j,"shares cannot be less than threshold");let t=[],r=e.byteLength,o=Gb();for(let i=0;i<A;i++){let c=new Uint8Array(r+1);c[r]=o[i],t.push(c)}let a=j-1;for(let i=0;i<r;i++){let c=e[i],p=xb(c,a);for(let d=0;d<A;++d){let m=o[d],B=bb(p,m,a);t[d][i]=B}}return t}async function kE(e){ze.instanceOf(e,Array,"shares must be an Array"),ze.inRange(e.length,2,256,"shares must have at least 2 and at most 255 elements");let A=e[0];ze.instanceOf(A,Uint8Array,"each share must be a Uint8Array");for(let p of e)ze.instanceOf(p,Uint8Array,"each share must be a Uint8Array"),ze.greaterThanOrEqualTo(p.byteLength,2,"each share must be at least 2 bytes"),ze.equalTo(p.byteLength,A.byteLength,"all shares must have the same byte length");let j=e.length,t=A.byteLength,r=t-1,o=new Uint8Array(r),a=new Uint8Array(j),i=new Uint8Array(j),c=new Set;for(let p=0;p<j;p++){let m=e[p][t-1];if(c.has(m))throw new Error("shares must contain unique values but a duplicate was found");c.add(m),a[p]=m}for(let p=0;p<r;p++){for(let d=0;d<j;++d)i[d]=e[d][p];o[p]=vb(a,i,0)}return o}var BE=async(e,A)=>{if(e.length!==32)throw new Error("encryption key must be 32 bytes");Pb(e);let j={seeds:[]};for(let p of A){let d="unused",m=p.fold(B=>new Uint8Array(B));j.seeds.push([d,m])}let t=wl(hl)(e),r=Bl(JSON.stringify(j)),o=t.encrypt(r),[a,i]=await mE(e,2,2);return{encryptedAccounts:Vi(o),decryptionKeySharePhantom:yj.from(a),decryptionKeyShareExternal:yj.from(i),encryptionKey:"unused"}},or=class extends Error{reason;constructor(A){super(`Unable to decrypt seedless bundle: ${A}`),this.reason=A}},fE=async e=>{let A;try{A=await Tb(e.decryptionKeySharePhantom,e.decryptionKeyShareExternal)}catch{throw new or("incompatible-shares")}let j;try{j=wl(hl)(A).decrypt(Qf(e.encryptedAccounts))}catch{throw new or("incorrect-decryption-key")}let t;try{t=JSON.parse(Buffer.from(j).toString())}catch{throw new or("invalid-json")}let r=Pf.safeParse(t);if(!r.success)throw new or("invalid-format");return r.data.seeds.map(i=>{let c=i[1],p=Of(c);return yj.from(p)})},Tb=async(e,A)=>{let j=e.fold(o=>new Uint8Array(o)),t=A.fold(o=>new Uint8Array(o));return await kE([j,t])},Pb=e=>{if(e.every(A=>A===0))throw new Error("encryption key must not be all zeros")};n();s();var EE={realms:[{id:"a4caa86247c60f61b2454d8cbdb1ba2a",address:"https://production-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var gE={realms:[{id:"a4caa86247c60f61b2454d8cbdb1ba2a",address:"https://production-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var yE={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var FE={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev/"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var hE={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"f76005fd-80e5-483e-9d84-c09ef7c60ba3",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var SE={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"153ebe7b-400c-4d27-be76-139248bb3acd",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var wE={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"f577175c-3f1e-4f4a-91d1-cb30aaa0d5d4",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var IE=[EE,gE],Kb=IE.reduce((e,A)=>(e[tr(A)]=A,e),{}),$E=[yE,FE,hE,SE,wE],Lb=$E.reduce((e,A)=>(e[tr(A)]=A,e),{});function n6(){return ij()?Kb:Lb}function cn(){let e=ij()?IE:$E;return e[e.length-1]}var vj={success:{type:"success",didBackup:!0},unauthorized:{type:"unauthorized",didBackup:!1},bundleAlreadyExists:{type:"bundle-already-exists",didBackup:!1},errorBackendCheck:{type:"error-backend-check",didBackup:!1},invalidPin:{type:"invalid-pin-format",didBackup:!1},errorEncryptionFailed:{type:"error-encryption-failed",didBackup:!1},errorBackendUpload:{type:"error-backend-upload",didBackup:!1},errorJuiceboxUpload:{type:"error-juicebox-upload",didBackup:!1},recoveredFromJuiceboxError:{type:"recovered-juicebox-error",didBackup:!1},errorBackendDelete:{type:"error-backend-delete",didBackup:!1}},pn=async(e,{pin:A,entropy:j})=>{if(!Lj(A))return vj.invalidPin;let t;try{if(t=await e.authRepository.getUser(),!t)return vj.unauthorized}catch{return vj.unauthorized}let r=cn(),o=tr(r);try{if(await A6(o,t.accessToken))return vj.bundleAlreadyExists}catch{return vj.errorBackendCheck}let a;try{let d=Xi(32);a=await BE(d,[j])}catch{return vj.errorEncryptionFailed}try{if(!await Xf(a,o,t.accessToken))return vj.errorBackendUpload}catch{return vj.errorBackendUpload}let i=a.decryptionKeyShareExternal.fold(d=>new Uint8Array(d)),c=await e.juiceboxClient(),p=!0;try{p=await c.sendJuiceboxShare(cn(),i,A,t.accessToken)}catch{p=!1}if(!p)try{return await e6(o,t.accessToken),vj.recoveredFromJuiceboxError}catch{return vj.errorBackendDelete}return vj.success};n();s();var bE="seedlessJuiceboxPinCooldownTimer",bl=".phantom.seedless.juiceboxPinCooldownTimer",Js=async e=>{let A=await e.get(bE),j=await e.get(bl),t=j?.timeRemaining||A,r=j?.guessesRemaining;return!t||t<0?{timeRemaining:0,guessesRemaining:r}:{timeRemaining:t-Date.now(),guessesRemaining:r}},qE=async(e,A)=>{let j=Qb(e);if(!j)return;let t=Date.now()+j*1e3;A.set(bl,{version:2,timeRemaining:t,guessesRemaining:e})},xE=async e=>{await e.remove(bE),await e.remove(bl)},Qb=e=>Hb[e],Hb={[7]:0,[6]:0,[5]:30,[4]:60,[3]:120,[2]:300,[1]:300};n();s();var Vb=e=>{let A="unknown";return e instanceof Error&&(e.message.includes("bundle not found")?A="bundle-not-found":e.message.includes("Got invalid response from seedless backend")?A="non-ok-response":e.message.includes("Did not receive share from seedless backend")?A="no-share-in-bundle":e.message.includes("Unable to parse bundle. Incorrect format.")&&(A="incorrect-format")),{type:"error-backend-recover",reason:A}},TE=async(e,A,{pin:j,ignoreCooldown:t=!1})=>{let{authRepository:r,juiceboxClient:o,storage:a}=e,{timeRemaining:i,guessesRemaining:c}=await Js(a);if(i>0&&!t)return{type:"cooldown",timeRemaining:i,guessesRemaining:c};if(!Lj(j))return{type:"invalid-pin-format"};let p=await r.getUser();if(!p)return{type:"unauthorized"};let{accessToken:d}=p,m;try{m=await Zi("latest",d)}catch(F){return Vb(F)}let B=n6()[m.id];if(!B)return{type:"upgrade-required"};let f=await o(),k;try{k=new Uint8Array(await f.getJuiceboxShare(B,j,d)),await xE(a)}catch(F){let S=F?.reasonCode,$=F?.guessesRemaining;if(Ls(F))if(!t&&$&&$<=5){await qE($,a);let{timeRemaining:O}=await Js(a);return{type:"cooldown",timeRemaining:O,guessesRemaining:$}}else return{type:"error-juicebox-recover",reason:S,guessesRemaining:$};else return{type:"error-juicebox-recover",reason:S||"unknown"}}if(k.every(F=>F===0))return{type:"error-juicebox-share-zero"};let E;try{E=await fE({encryptedAccounts:m.encryptedAccounts,encryptionKey:m.encryptionKey,decryptionKeySharePhantom:m.decryptionKeyShare1,decryptionKeyShareExternal:yj.from(k)})}catch(F){let S;return F instanceof or?S=F.reason:S="unknown",{type:"error-decrypt-accounts",reason:S}}if(E.length===0)return{type:"error-no-entropies"};let y=await pn(e,{entropy:E[0],pin:j});return A.emitRotationResult(y),{type:"success",entropy:E[0]}};n();s();var s6=class extends nB{emitRotationResult(A){this.emitEvent("seedlessRotationResult",{type:A.type,didRotate:A.didBackup})}emitRecoverResult(A){let j=A.type,t;"reason"in A&&(typeof A.reason=="string"?t=A.reason:t=Ar[A.reason]),this.emitEvent("seedlessRecoverResult",{type:j,reason:t})}emitBackupResult(A){this.emitEvent("seedlessBackupResult",{type:A.type,didBackup:A.didBackup})}};var Wb=e=>{let A=new s6,j=new Ws,t={backup:(a,i)=>j.runExclusive(async()=>await Yb(e,a,i,A)),recover:a=>j.runExclusive(async()=>await PE(e,a,!1,A)),verifyPin:a=>j.runExclusive(async()=>await Zb(e,a,!0,A)),resetBundleFromDevice:(a,i)=>j.runExclusive(async()=>await Jb(e,a,i))},r=new Ws;return{...t,hasSeedlessBundle:a=>eq(e,a),deleteBundle:()=>OE(e),needsBundleUpdate:()=>Aq(e),timeLeftCooldown:()=>jq(e),getPinVerificationTimer:({pinVerificationExpiryInMs:a})=>tq({...e,pinVerificationExpiryInMs:a}),setPinVerificationTimer:a=>rq(e,a),...{getDeviceEncryptionKey:()=>r.runExclusive(async()=>await oq(e))},generateDeviceEncryptionKey:CE,setDeviceEncryptionKey:a=>RE(e,a),deleteDeviceEncryptionKey:()=>nq(e),getOrCreateSeedlessDeviceID:()=>_E(e),subscribe:(a,i)=>A.subscribe(a,i)}},ql={},Jb=async(e,A,j)=>{if(!Lj(A))throw new Error("Invalid PIN provided. Only numbers are accepted.");await OE(e);let t=await pn(e,{pin:A,entropy:j[0]});if(t.type!=="success"&&t.type!=="bundle-already-exists")throw new Error(`Failed to backup bundle: ${t.type}`);return{entropy:j[0]}},Yb=async(e,A,j,t)=>{let r=await pn(e,{pin:j,entropy:A});if(t.emitBackupResult(r),r.type!=="success")throw new Ji(r)},PE=async(e,A,j=!1,t)=>{let r=await TE(e,t,{pin:A,ignoreCooldown:j});if(t.emitRecoverResult(r),r.type!=="success")throw new sn(r);return{entropy:r.entropy}},Zb=async(e,A,j=!0,t)=>{await PE(e,A,j,t)},Aq=async({authRepository:e})=>{let A=await e.getUser();if(!A)throw new Error("User is not logged in, cannot check for seedless bundle update");let{accessToken:j}=A,t,r=tr(cn());try{t=await Zi("latest",j)}catch(a){if(a instanceof Error&&a.message==="bundle not found")return!1;throw a}return!!n6()[t.id]&&t.id!==r},eq=async(e,A="latest")=>{let j=await e.authRepository.getUser();if(!j)throw new Error("User is not logged in, cannot check for se*dless bundle");let{accessToken:t}=j;return await A6(A,t)},OE=async({authRepository:e})=>{let A=await e.getUser();if(!A)throw new Error("User is not logged in, cannot delete se*dless bundle");let{accessToken:j}=A,t=tr(cn());return await e6(t,j)},jq=async({storage:e})=>{let{timeRemaining:A}=await Js(e);return A},tq=async({storage:e,pinVerificationExpiryInMs:A})=>{let j=Date.now(),t=await e.get("seedlessPinVerificationLockTimerInMs")??Date.now();return{expired:j>=t+(A??2592e6),timestampInMs:t}},rq=async({storage:e},A)=>{await e.set("seedlessPinVerificationLockTimerInMs",A)},xl=async e=>(await e.get("seedlessDeviceID"))?.deviceID??null,ME=async(e,A)=>{await e.set("seedlessDeviceID",{version:1,deviceID:A})},CE=()=>{let e=Xi(32);try{return Promise.resolve(yj.from(e))}finally{e.fill(0)}},_E=async({storage:e})=>{let A=await xl(e);return A||(A=Yi(),await ME(e,A)),A},oq=async e=>{let{authRepository:A}=e,j=await A.getUser();if(!j)throw new Error("User not logged in, cannot retrieve device encryption key.");let t=await _E(e),r=ql[t];if(r)return r;let o=await ll(j.accessToken,t);return o||(o=await CE(),await RE(e,o)),ql[t]=o,o},RE=async({authRepository:e,storage:A},j)=>{let t=await e.getUser();if(!t)throw new Error("User not logged in, cannot set device encryption key.");let r=await xl(A);return r||(r=Yi(),await ME(A,r)),await zf(t.accessToken,r,j),ql[r]=j,j},nq=async({authRepository:e,storage:A})=>{let j=await e.getUser();if(!j)throw new Error("User not logged in, cannot delete device encryption key.");let t=await xl(A);if(!t)return null;let r=await ll(j.accessToken,t);return r?(await Wf(j.accessToken,t),r):null};n();s();n();s();var Gl={};cv(Gl,{default:()=>Tl});var Tl="./juicebox-sdk_bg-LUYFYBUJ.wasm";qB(Gl);var DE=!1,aq=async()=>{if(DE)return;let e=await import("./juicebox-sdk_bg-R7JKJPGJ.js"),A=await WebAssembly.instantiateStreaming(fetch(Tl),{"./juicebox-sdk_bg.js":e});e.__wbg_set_wasm(A.instance.exports),DE=!0};function NE(e){globalThis.JuiceboxTokens=e}NE({});var Pl=class{setJuiceboxTokens(A){NE(A)}async backupShare(A,j,t,r,o){await(await this.client(A)).register(t,j,r,o)}async recoverShare(A,j,t){return await(await this.client(A)).recover(j,t)}async deleteShare(A){await(await this.client(A)).delete()}async client(A){return await aq(),new xB(new GB(A),[])}};n();s();n();s();n();s();var iq=l.object({balance:l.boolean(),history:l.boolean()}),Nz=l.record(l.string(),iq),Ys=class extends Error{constructor(A){super(A),this.name="SetTermsAcknowledgementError"}};var KE=async(e,A)=>{try{return await e.set("termsHaveBeenAcknowledgedLastSeenVersion",A)}catch{throw new Ys("Error Setting Terms Acknowledgement")}},LE=async e=>{try{return await e.remove("termsHaveBeenAcknowledgedLastSeenVersion")}catch{throw new Ys("Error Clearing Terms Acknowledgement")}};async function cq(e){return(await e.get("onboardedAt"))?.onboardedAt}async function UE(e,A=Date.now()){A&&!await cq(e)?await e.set("onboardedAt",{onboardedAt:A}):A||await e.remove("onboardedAt")}n();s();n();s();var ZE=v(VE(),1),Ag=v(YE(),1),Rl=v(pv(),1),ln=(e=>(e.BLOCK="BLOCK",e.NONE="NONE",e))(ln||{});function pq(e,A){for(let j=0;j<e.k;j++){let t=(0,Ag.default)(`${e.salt}_${A}_${j}`,{asBytes:!0}),o=Rl.Buffer.from(t).subarray(0,4).readUInt32BE(0)%e.bits,a=Math.floor(o/24),i=Rl.Buffer.from(e.bitVector.slice(a*4,a*4+4),"base64"),c=o%24,p=Math.floor(c/8),d=c%8;if(!(i[p]&1<<7-d))return!1}return!0}var pW=typeof self<"u"&&self.fetch?self.fetch:ZE.default;function Dl(e,A,j,t){let o=new URL(t).hostname.toLowerCase().split(".");for(let a=0;a<o.length-1;a++){let i=o.slice(a).join(".");if(A.includes(i)||pq(e,i)&&!j.includes(i))return"BLOCK"}return"NONE"}var i6=v(tg());var pg=v(ng());n();s();var sg="https://blocklist.phantom.app/multichain.json",Ll="https://blowfish-blocklist-proxy.phantom.app",yq="https://github.com/phantom-labs/blocklist",Ul=(e=3)=>({retry:e,retryDelay:A=>Math.min(1e3*2**A,3e4)}),Qj={SLIPPAGE_EXCEEDED:"SLIPPAGE_EXCEEDED",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",INSUFFICIENT_GAS:"INSUFFICIENT_GAS",UNKNOWN_ERROR:"UNKNOWN_ERROR",SIMULATION_FAILED:"SIMULATION_FAILED",TRANSACTION_EXPIRED:"TRANSACTION_EXPIRED",ACCOUNT_FROZEN:"ACCOUNT_FROZEN",SIMULATION_TIMEOUT:"SIMULATION_TIMEOUT",STALE_QUOTE:"STALE_QUOTE"};function Fq(e){return{1:"1-critical-alert",2:"2-alert",3:"3-critical-error",4:"4-error",5:"5-information"}[e]}var hq=3,Xl=6e5,Sq=6e4,OW=l.object({type:l.union([l.literal("all"),l.literal("blocklist"),l.literal("whitelist"),l.literal("error"),l.literal("fuzzy"),l.literal("blowfishBloomFilter")]),result:l.boolean(),source:l.optional(l.string()),match:l.string().optional(),isSubdomainDomainWhitelisted:l.boolean().optional()}),MW=l.object({localHash:l.any(),cursor:l.any()}),zl=l.object({bitVector:l.string(),k:l.number(),hash:l.string(),bits:l.number(),salt:l.string()}),ug=l.union([l.object({bloomFilter:zl,bloomFilterHash:l.string(),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()}),l.object({bloomFilter:zl.optional(),bloomFilterHash:l.optional(l.string()),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()})]),lg=l.object({bloomFilter:zl,lastUpdated:l.number()}).nullish(),dg=l.object({recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),lastUpdated:l.number().optional()}).nullish(),Aa=class{blocklist;whitelist;fuzzylist;tolerance;constructor(A,j,t,r){this.blocklist=Ql(A),this.whitelist=Ql(j),this.fuzzylist=Ql(t),this.tolerance=r||hq}check(A,j){if(!A)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=c6(A),r=Wl(t);if(Iq(r,this.whitelist)){let c=new URL(A).hostname;if(Hl(Wl(c),this.blocklist)){let d={type:"blocklist",result:!0,source:c,isSubdomainDomainWhitelisted:!0};return j.capture("blockedDomain",{data:d}),d}else return{type:"whitelist",result:!1,source:c,isSubdomainDomainWhitelisted:!0}}if(Hl(r,this.whitelist))return{type:"whitelist",result:!1,source:t,isSubdomainDomainWhitelisted:!1};if(Hl(r,this.blocklist)){let c={type:"blocklist",result:!0,source:t,isSubdomainDomainWhitelisted:!1};return j.capture("blockedDomain",{data:c}),c}if(this.tolerance>0){let c=ag(r);c=c.replace("www.","");let p=this.fuzzylist.find(d=>{let m=ag(d);return pg.default.get(c,m)<=this.tolerance});if(p)return{type:"fuzzy",result:!0,match:wq(p),source:t,isSubdomainDomainWhitelisted:!1}}return{type:"all",result:!1,source:t,isSubdomainDomainWhitelisted:!1}}},c6=e=>{let A=new URL(e).hostname.split(".");return A.slice(0).slice(-(A.length===4?3:2)).join(".")},Ql=e=>e.map(Wl),Wl=e=>e.split(".").reverse(),wq=e=>e.slice().reverse().join("."),ag=e=>e.slice(1).reverse().join("."),Hl=(e,A)=>A.some(j=>j.length>e.length?!1:j.every((t,r)=>e[r]===t)),Iq=(e,A)=>A.some(j=>j[0]===e[0]&&j[1]===e[1]&&j[2]==="*"),$q=async e=>{let A=(0,i6.getBlocklist)(),j=await e.get("cachedBlocklistDiff"),t=null;try{t=JSON.parse(`${j}`)}catch(r){b.captureError(new Error(`Error parsing blocklist diff: ${r?.message}`),"generic")}if(t&&t.expiresAt&&t.expiresAt>Date.now())return new Aa(A.blocklist.concat(t.blocklist),A.whitelist.concat(t.whitelist),A.fuzzylist.concat(t.fuzzylist));{let r={},o=(0,i6.getVersion)();t&&(r.lastContentHash=`${t.contentHash}`),o&&(r.localBlocklistVersion=`${o}`);let a=await H.headers(r).get(sg);if(a.status===200){let i=a.data;return i.expiresAt=Date.now()+Xl,e.set("cachedBlocklistDiff",JSON.stringify(i)),new Aa(A.blocklist.concat(i.blocklist),A.whitelist.concat(i.whitelist),A.fuzzylist.concat(i.fuzzylist))}else{if(a.status===304)return t.expiresAt=Date.now()+Xl,e.set("cachedBlocklistDiff",JSON.stringify(t)),new Aa(A.blocklist.concat(t.blocklist),A.whitelist.concat(t.whitelist),A.fuzzylist.concat(t.fuzzylist));throw new Error("Invalid response from blocklist")}}},Jl=async(e,A,j)=>{let t,r;try{let a=await yi(A.getFeatureFlags(),1e3);t=!!a["kill-blowfish-blocklist-cursor"],r=!!a["kill-previous-blocklist"]}catch{t=!1,r=!1}let o;try{if(r)return t?cg(j,e,A):ig(j,e,A);{o=await $q(e);let a=o.check(j,A);return a.type==="all"?t?cg(j,e,A):ig(j,e,A):a}}catch{return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}}},ig=async(e,A,j)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=c6(e),r=await A.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"]),o=r.cachedBloomFilter??null,a=r.cachedBloomFilterHash??null,i=r.cachedScanDataCursor??null,c=r.cachedScanDataRecents??null,p=null,d={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0},m=null;if(o){let f=lg.safeParse(o);f.success?p=f.data:await Vl(A)}if(c){let f=dg.safeParse(c);f.success?d=f.data:await Vl(A)}if(i){let k=l.string().safeParse(i);k.success?m=k.data:await Vl(A)}if(!d||d.lastUpdated==null||Date.now()>d.lastUpdated+Sq){let f={localHash:a,cursor:m},k=await H.post(Ll,f);if(k.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let g=k.data,E,y=ug.safeParse(g);if(y.success)E=y.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let F=[],S=[],$=typeof a=="string"&&E.bloomFilterHash?a!==E.bloomFilterHash:!1;d!=null&&!$&&(F=d.recentlyAdded,S=d.recentlyRemoved),F=F.concat(E.recentlyAdded),S=S.concat(E.recentlyRemoved),F=F.filter(O=>E.recentlyRemoved.indexOf(O)<0),S=S.filter(O=>E.recentlyAdded.indexOf(O)<0);let M={recentlyAdded:F,recentlyRemoved:S,lastUpdated:Date.now()};if(await A.set("cachedScanDataRecents",M),d=M,E.nextCursor!==m&&await A.set("cachedScanDataCursor",E.nextCursor),E.bloomFilter!=null){let O={bloomFilter:E.bloomFilter,lastUpdated:Date.now()};await Promise.all([A.set("cachedBloomFilter",O),A.set("cachedBloomFilterHash",E.bloomFilterHash)]),p=O}}if(!p)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let B=Dl(p.bloomFilter,d.recentlyAdded,d.recentlyRemoved,e);if(B===ln.BLOCK){let f={result:!0,source:t,type:"blowfishBloomFilter"};return j.capture("blockedDomain",{data:f}),f}else if(B===ln.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};async function Vl(e){await e.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"])}var cg=async(e,A,j)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=c6(e),r=await A.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"]),o=r.cachedBloomFilter??null,a=r.cachedBloomFilterHash??null,i=r.cachedScanDataRecents??null,c=null,p={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0};if(o){let m=lg.safeParse(o);m.success?c=m.data:await A.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(i){let m=dg.safeParse(i);m.success?p=m.data:await A.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(!p||p.lastUpdated==null||Date.now()>p.lastUpdated+Xl){let m={localHash:a},B=await H.post(Ll,m);if(B.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let f=B.data,k,g=ug.safeParse(f);if(g.success)k=g.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let E={recentlyAdded:k.recentlyAdded,recentlyRemoved:k.recentlyRemoved,lastUpdated:Date.now()};if(await A.set("cachedScanDataRecents",E),p=E,k.bloomFilter!=null){let y={bloomFilter:k.bloomFilter,lastUpdated:Date.now()};await Promise.all([A.set("cachedBloomFilter",y),A.set("cachedBloomFilterHash",k.bloomFilterHash)]),c=y}}if(!c)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let d=Dl(c.bloomFilter,p.recentlyAdded,p.recentlyRemoved,e);if(d===ln.BLOCK){let m={result:!0,source:t,type:"blowfishBloomFilter"};return j.capture("blockedDomain",{data:m}),m}else if(d===ln.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};n();s();n();s();var vq=e=>e/1e8;n();s();n();s();var p6={GREEN:"accentSuccess",RED:"accentAlert",WHITE:"textPrimary"};function qq(e){switch(e){case"PLUS":return p6.GREEN;case"MINUS":return p6.RED;case"EQUAL":return p6.WHITE;default:return p6.WHITE}}function xq(e){let A=e?.advancedDetails&&"safeguard"in e.advancedDetails?e?.advancedDetails?.safeguard:void 0;if(A?.recommended&&!A?.shouldBundle&&!A.error&&!A.verifyError&&A?.transactions&&A.transactions.length>0)return A.transactions}function mg(e,A){if(e.params&&"safeguard"in e.params&&e.params.safeguard&&A?.advancedDetails&&"safeguard"in A.advancedDetails&&A.advancedDetails.safeguard?.transactions){let j=A.advancedDetails.safeguard;if(j.error)return j.error;let t=e.params.transactions,r=j.transactions;if(r){let o;try{WB(t,r)}catch(a){a instanceof An?o=a:a instanceof Error?o=An.createUnknownError(a.message):o=An.createUnknownError("Non error type",a)}if(o)return A.advancedDetails.safeguard.verifyError=o,o}}}function kg(e){if(e.advancedDetails&&"requestId"in e.advancedDetails)return e.advancedDetails.requestId}n();s();n();s();var Yl=async(e,A,j)=>{let t=`/simulation/v1?language=${e}`,r=await H.api().post(t,{...j,chainId:j.networkID,appVersion:$A,platform:se,deviceId:A});if(!tA(r))throw new Error("Failed to scan message");return r.data},ea=async(e,A,j)=>{let t=`/simulation/v1?language=${e}`,r={...j.params,...j.params&&"safeguard"in j.params?{safeguard:{...j.params.safeguard,lighthouseProgramId:zB}}:{}},o=await H.api().post(t,{...j,chainId:j.networkID,params:r,metadata:j.metadata,appVersion:$A,platform:se,deviceId:A});if(!tA(o))throw new Error("Failed to scan transaction");let a=o.data,i=mg(j,a);if(i instanceof An){let c=kg(a);b.captureMessage(`Verify error ${c??""}: ${i.message}`,"safeguard")}return a};var dJ=l.union([l.literal("signTransaction"),l.literal("signAllTransactions"),l.literal("signAndSendTransaction"),l.literal("signAndSendAllTransactions")]);n();s();var Bg=l.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),Et=l.object({id:l.string(),displayName:l.string().optional(),logoURI:l.union([l.string(),l.null()]).optional(),tokenType:Bg,decimals:l.number().optional(),symbol:l.string().optional(),isSpam:l.boolean().optional()}),fg=l.object({id:it,displayName:l.string(),logoURI:l.union([l.string(),l.null()]).optional()}),u6=l.object({token:Et,amount:l.string(),to:it,from:it}),Zl=l.literal("UNCLASSIFIED_APP_INTERACTION"),A7=l.literal("TOKEN_SEND"),e7=l.literal("TOKEN_BURN"),j7=l.literal("TOKEN_SWAP"),t7=l.literal("TOKEN_UNWRAP"),r7=l.literal("WITHDRAW_STAKE"),o7=l.literal("DEACTIVATE_STAKE"),n7=l.literal("STAKE"),s7=l.literal("COLLECTIBLE_LIST"),a7=l.literal("COLLECTIBLE_BUY_ITEM"),i7=l.literal("COLLECTIBLE_CANCEL_BID"),c7=l.literal("COLLECTIBLE_BID_ITEM"),p7=l.literal("COLLECTIBLE_UNLIST"),u7=l.literal("COLLECTIBLE_SELL_ITEM"),l7=l.literal("CANCEL_TX"),d7=l.literal("TOKEN_APPROVAL"),m7=l.literal("CANCEL_ORDER"),k7=l.literal("COLLECTION_APPROVAL"),B7=l.literal("BRIDGE_INIT"),Gq=l.union([Zl,A7,e7,j7,t7,r7,o7,n7,s7,a7,i7,c7,p7,u7,l7,d7,m7,k7,B7]),Eg=l.object({transactionType:Zl,balanceChanges:l.array(u6),dapp:l.union([_j,l.null()]).optional()}),gg=l.object({transactionType:A7,balanceChanges:l.array(u6).nonempty(),dapp:l.union([_j,l.null()]).optional()}),yg=l.object({transactionType:e7,dapp:l.union([_j,l.null()]).optional(),token:Et,amount:l.string()}),Fg=l.object({transactionType:j7,dapp:l.union([_j,l.null()]).optional(),receiveToken:Et,sendToken:Et,receiveAmount:l.string(),sendAmount:l.string()}),hg=l.object({transactionType:t7,token:Et,amount:l.string()}),Sg=l.object({transactionType:r7,stakeAccount:it,amount:l.string()}),wg=l.object({transactionType:o7,stakeAccount:it,amount:l.string()}),Ig=l.object({transactionType:n7,stakeAccount:it,amount:l.string(),validatorName:l.string().optional(),validatorWebsite:l.string().optional(),keybaseUsername:l.string().optional()}),$g=l.object({transactionType:l7}),mn=l.object({dapp:l.union([_j,l.null()]),itemAmount:l.string().optional(),item:Et,forAmount:l.string(),forAsset:Et,listingUrl:l.string().optional()}),vg=mn.merge(l.object({transactionType:s7})),bg=mn.merge(l.object({transactionType:a7})),qg=mn.merge(l.object({transactionType:i7})),xg=mn.merge(l.object({transactionType:c7})),Gg=mn.merge(l.object({transactionType:p7})),Tg=mn.merge(l.object({transactionType:u7})),Pg=l.object({transactionType:d7,dapp:l.union([_j,l.null()]).optional(),token:Et,value:l.string().optional(),isApproved:l.boolean()}),Og=l.object({transactionType:m7,dapp:l.union([_j,l.null()]).optional(),orderId:l.string()}),Mg=l.object({transactionType:k7,collection:fg,dapp:l.union([_j,l.null()]).optional(),isApproved:l.boolean()}),Cg=l.object({transactionType:B7,dapp:l.union([_j,l.null()]).optional(),balanceChanges:l.array(u6).nonempty(),explorerUrl:l.string().optional()}),_g=l.enum(["success","failed"]),Rg=l.object({networkFee:l.string().optional(),networkFeePayer:l.string().optional(),status:_g,errorMessage:l.union([l.string(),l.null()]),blockNumber:l.string(),chainId:Fj,transactionId:l.string()}),l6=l.object({timestamp:l.number(),owner:it,id:it,interactionData:l.union([Eg,gg,yg,Fg,hg,Sg,wg,Ig,vg,bg,qg,xg,Gg,Tg,$g,Pg,Og,Mg,Cg]),chainMeta:Rg}),$e=e=>e.split("/")[1]?.split(":").slice(1).join(":");n();s();var Hr=e=>{switch(e){case"SemiFungible":case"NonFungible":return!0;default:return!1}},f7=(e,A)=>{let j=$e(e.to),t=$e(e.from),r=A.some(a=>a.address.toLowerCase()===j.toLowerCase()),o=A.some(a=>a.address.toLowerCase()===t.toLowerCase());return r&&!o};n();s();var E7=v(x());n();s();var Dg=({interactionData:e,isError:A,selectedAccountAddresses:j,getKnownAddressLabel:t,start:r,networkID:o})=>{let i=e.balanceChanges[0],{token:{symbol:c,displayName:p,tokenType:d,decimals:m},amount:B}=i,f=f7(i,j),k=Hr(d),E=Tq({isCollectible:k,sign:f?"+":"-",amount:B,decimals:m,tokenSymbol:c,tokenType:d,isError:A});if(f){let S=$e(i.from),$=Su(S,void 0,t(S,o));return{topLeft:{text:`${T.t("transactionsReceived")} ${k?p||T.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${E}`,color:"accentSuccess"},bottomLeft:{text:T.t("transactionsFromParagraphInterpolated",{from:$,defaultValue:`From ${$}`})},start:r}}let y=$e(i.to),F=Su(y,void 0,t(y,o));return{topLeft:{text:A?T.t("transactionsSendFailed"):`${T.t("transactionsSent")} ${k?p||T.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${E}`,color:"textPrimary"},bottomLeft:{text:T.t("transactionsToParagraphInterpolated",{to:F,defaultValue:`To ${F}`})},start:r}};function Tq({isCollectible:e,sign:A,amount:j,decimals:t,tokenSymbol:r,tokenType:o,isError:a}){return a||t===void 0||o==="NonFungible"?"":e?`${A}${Ce(j,t)}`:`${A}${Ce(j,t)}${r?` ${Mj(r,6)}`:""}`}var Pq=["So11111111111111111111111111111111111111112","501"],Oq=(e,A,j,t,r)=>{let{interactionData:o,chainMeta:a}=e,{transactionType:i}=o,c=a.status==="failed",p=a.chainId,d=I.getTokenSymbol(p),m=I.getTokenDecimals(p),B=A("historyUnknownDappName"),f=E7.default.createElement(j,{activityItem:e,size:"small",isDetailViewOrSvg:!1});switch(i){case"TOKEN_SEND":return Dg({interactionData:o,isError:c,selectedAccountAddresses:r,getKnownAddressLabel:t,start:f,networkID:p});case"TOKEN_BURN":{let{amount:k,token:g}=o,E="";return g.displayName?k==="1"?E=g.displayName:E=`${g.displayName} (${k})`:E=A("richTransactionDetailUnknownNFT"),{topLeft:{text:c?`${A("transactionsFailedBurn")}`:`${A("transactionsBurned")}`},bottomLeft:{text:E},start:f}}case"TOKEN_UNWRAP":{let{amount:k,token:g}=o;return{topLeft:{text:c?`${A("transactionsUnwrappedFailed")}`:`${A("transactionsUnwrapped")}`},topRight:{text:c?"":`${Ce(k,g.decimals??0)} ${g.symbol}`,color:"textPrimary"},start:f}}case"TOKEN_SWAP":{let{receiveAmount:k,receiveToken:g,sendAmount:E,sendToken:y,dapp:F}=o,S=F?F.displayName:A("historyUnknownDappName"),$=Gs($e(y.id)||""),M=Gs($e(g.id)||""),O="";!c&&g.decimals!==void 0&&(O=`+${Ce(k,g.decimals)} ${Mj(g.symbol||M,6)}`);let G="";return!c&&y.decimals!==void 0&&(G=`-${Ce(E,y.decimals)} ${Mj(y.symbol||$,6)}`),{topLeft:{text:A(c?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:O,color:"accentSuccess"},bottomLeft:{text:S},bottomRight:{text:G,color:"textPrimary"},start:f}}case"BRIDGE_INIT":{let k=o.dapp?o.dapp.displayName:B,E=o.balanceChanges[0],{token:{symbol:y,decimals:F},amount:S}=E,$=y?` ${Mj(y,6)}`:"";if(!c&&F!==void 0){let M=`-${Ce(S,F)}${$}`;return{topLeft:{text:c?A("transactionBridgeInitiatedFailed"):`${A("transactionBridgeInitiated")}`},bottomLeft:{text:k},topRight:{text:`${M}`,color:"textPrimary"},start:f}}return{topLeft:{text:c?A("transactionBridgeInitiatedFailed"):`${A("transactionBridgeInitiated")}`},bottomLeft:{text:k},start:f}}case"WITHDRAW_STAKE":{let{amount:k,stakeAccount:g}=o,E=$e(g),y=I.getTokenSymbol(p);return{topLeft:{text:A(c?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:c?"":`${Ce(k,m)} ${Mj(y,6)}`,color:"textPrimary"},bottomLeft:{text:wi(E,4)},start:f}}case"DEACTIVATE_STAKE":{let{stakeAccount:k}=o,g=$e(k);return{topLeft:{text:A(c?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:wi(g,4)},start:f}}case"STAKE":{let{amount:k,stakeAccount:g,validatorName:E}=o,y=$e(g);return{topLeft:{text:A(c?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:c?"":`${Ce(k,m)} ${Mj(d,6)}`,color:"textPrimary"},bottomLeft:{text:E||wi(y,4)},start:f}}case"COLLECTIBLE_LIST":{let{dapp:k,item:g}=o,E=k?k.displayName:A("historyUnknownDappName"),y=g.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsListedFailed"):A("transactionsListedInterpolated",{name:y})},bottomLeft:{text:E},start:f}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:k,itemAmount:g,item:E,forAsset:y,forAmount:F}=o,S=k?k.displayName:A("historyUnknownDappName"),$=Ng(F,y.decimals,Mj(y.symbol||"",6)),M=E.symbol||Gs($e(E.id)),O=g&&E.tokenType==="SemiFungible"?`+${g} ${M}`:`+${M}`;return{topLeft:{text:A(c?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:c?"":O,color:"accentSuccess"},bottomRight:{text:c?"":`${$}`,color:"textPrimary"},bottomLeft:{text:S},start:f}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:k,item:g}=o,E=k?k.displayName:A("historyUnknownDappName"),y=g.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsCancelBidOnFailed"):A("transactionsCancelBidOnInterpolated",{name:y})},bottomLeft:{text:E},start:f}}case"COLLECTIBLE_BID_ITEM":{let{dapp:k,item:g}=o,E=k?k.displayName:A("historyUnknownDappName"),y=g.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsBidFailed"):A("transactionsBidOnInterpolated",{name:y})},bottomLeft:{text:E},start:f}}case"COLLECTIBLE_UNLIST":{let{dapp:k,item:g}=o,E=k?k.displayName:A("historyUnknownDappName"),y=g.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsUnlistedFailed"):A("transactionsUnlistedInterpolated",{name:y})},bottomLeft:{text:E},start:f}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:k,itemAmount:g,item:E,forAsset:y,forAmount:F}=o,S=k?k.displayName:A("historyUnknownDappName"),$=y.decimals!==void 0?`+${Ce(F,y.decimals)} ${Mj(y.symbol||"",6)}`:A("transactionsUnknownAmount"),M=E.symbol||Gs($e(E.id)),O=g&&E.tokenType==="SemiFungible"?`-${g} ${M}`:`-${M}`;return{topLeft:{text:A(c?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:c?"":`${$}`,color:"accentSuccess"},bottomRight:{text:c?"":O,color:"textPrimary"},bottomLeft:{text:S},start:f}}case"CANCEL_TX":return{topLeft:{text:A(c?"transactionCancelledFailed":"transactionCancelled")},start:f};case"TOKEN_APPROVAL":{let{dapp:k,token:g,isApproved:E}=o,y=Hr(g.tokenType)?g.displayName:g.symbol,F;return c?E?Hr(g.tokenType)?F=A("transactionApproveTokenFailed",{tokenSymbol:y}):F=A("transactionApprovalFailed"):Hr(g.tokenType)?F=A("transactionRevokeApproveTokenFailed",{tokenSymbol:y}):F=A("transactionRevokeFailed"):E?F=A("transactionApproveToken",{tokenSymbol:y}):F=A("transactionRevokeApproveToken",{tokenSymbol:y}),{topLeft:{text:F},bottomLeft:{text:k?k.displayName:B,color:"textTertiary"},start:f}}case"COLLECTION_APPROVAL":{let{collection:k,isApproved:g,dapp:E}=o,y=k.displayName,F;return c?g?F=A("transactionApproveTokenFailed",{tokenSymbol:y}):F=A("transactionRevokeApproveTokenFailed",{tokenSymbol:y}):g?F=A("transactionApproveToken",{tokenSymbol:y}):F=A("transactionRevokeApproveToken",{tokenSymbol:y}),{topLeft:{text:F},bottomLeft:{text:E?E.displayName:B,color:"textTertiary"},start:f}}case"CANCEL_ORDER":{let{dapp:k}=o;return{topLeft:{text:A(c?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:k?.displayName||A("historyUnknownDappName"),color:"textTertiary"},start:f}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:k}=o,g=k?k.displayName:B;return{topLeft:{text:A(c?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:g},start:f}}}},Mq=(e,A)=>{let{display:j,type:t}=e,{topLeft:r,topRight:o,bottomLeft:a,bottomRight:i}=j.summary,c=E7.default.createElement(A,{logoUri:j.summary.logoUri,pendingTransactionType:t,size:"small"});return{topLeft:r,topRight:o,bottomLeft:a,bottomRight:i,start:c}},g7=(e,A,j)=>{let t=(e??[]).map(LB);if(A){let r=t.find(o=>o.chainId===A)?.address;if(r){let o={chainId:A,address:r};j&&(o.filters=[{type:"token",value:j}]),t=[o]}}return t},y7=e=>{if(!e)return;let A=W(e);if(A.resourceType!=="nativeToken")return e.type==="SPL"?e.data.splTokenAccountPubkey:A.address},Cq=(e,A)=>{let j=$e(e.id);return Pq.includes(j)&&(e.tokenType="Native"),e.tokenType==="Native"?{chainId:A,slip44:I.getSlip44(A),resourceType:"nativeToken"}:{chainId:A,address:j,resourceType:"address"}},Ng=(e,A,j)=>{if(!e||!A)return T.t("transactionsUnknownAmount");let t=SA(e,A),r=t.abs(),o=t.isZero()?"":t.isPositive()?"-":"+",a=Xe(r);return`${o}${a} ${j}`};n();s();var ja=v(x());var _q=l.object({orderIds:l.array(l.object({bytesValue:l.string(),bytesArrayValue:l.string(),stringValue:l.string()}))}),Rq=async(e,A)=>{if(A==="LI.FI")return{label:T.t("transactionBridgeStatusLink",{dappName:"LI.FI"}),value:`https://explorer.li.fi/tx/${e}`};if(A==="deBridge")try{let j=await H.get(`https://stats-api.dln.trade/api/Transaction/${e}/orderIds`),t=_q.safeParse(j.data);if(!t.success){b.captureError(new Error("Failed to parse deBridge response"),"history");return}let r=t.data.orderIds[0]?.stringValue;if(!r){b.captureError(new Error("No orderId found in deBridge response"),"history");return}return{label:T.t("transactionBridgeStatusLink",{dappName:"DeBridge"}),value:`https://app.debridge.finance/order?orderId=${r}`}}catch(j){b.captureError(new Error(`Could not fetch bridge explorer url: ${j}`),"history");return}},Dq=(e,A)=>{let[j,t]=(0,ja.useState)(),[r,o]=(0,ja.useState)(!1);return(0,ja.useEffect)(()=>{e&&A&&(async()=>{o(!0);try{let i=await Rq(e,A);t(i)}finally{o(!1)}})()},[e,A]),{bridgeUrl:j,isLoading:r}};n();s();n();s();n();s();var Hj={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var Kg={...Hj};n();s();var Lg={...Hj};n();s();var Ug={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};n();s();var Qg={...Hj,showTimeToMineRowInPendingTransactionDetail:!0};n();s();var Hg={...Hj};n();s();var Vg={...Hj};n();s();var Xg={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};n();s();var zg={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var Nq=new zo({solana:Xg,ethereum:Qg,polygon:Vg,monad:Hg,base:Lg,arbitrum:Kg,bitcoin:Ug,sui:zg}),Wg=Xo(Nq);n();s();n();s();n();s();n();s();var Yg=v(x(),1);var Jg=new WeakMap;function Zg(e,A){let j=ZB(A),t=Kq(j);for(let[r,o]of e)(!t.has(r)||A?.dangerouslyForceHydrate)&&(t.add(r),j.set(r,o))}var Kq=e=>{let A=Jg.get(e);return A||(A=new WeakSet,Jg.set(e,A)),A};var oy=v(x());n();s();var ty=v(x());n();s();var Lq=10,Uq="/history/v2",kn=class extends Error{message="406: Cache bust!"},ta=class extends Error{message="Server response malformed."},d6=class extends Error{},m6=class extends Error{},F7=l.object({next:l.union([l.null(),l.string()]),results:l.array(l6)}),Ay=async e=>{let A=await H.api().retry(3,2e3).post(`${Uq}`,e);if(A.status===406)throw new kn;if(A.status>=400&&A.status<500)throw new m6(`FetchActivityItem: Status code: ${A.status}`);if(A.status>=500)throw new d6(`FetchActivityItem: Status code: ${A.status}`);return A.data},ey=e=>!Array.isArray(e.results)||typeof e.next!="string"&&e.next!==null,k6=async e=>{let A=await Ay(e);if(ey(A))throw new ta;for(;A.results?.length<Lq&&A.next;){if(ey(A))throw new ta;let j=await Ay({next:A.next,isSpam:e.isSpam});A.next=j.next,A.results=[...A.results,...j.results]}try{return F7.parse(A)}catch(j){let t=j,r=[],o=t.issues;for(let c=0;c<o.length;++c){let p=o[c].path;if(p[0]!=="results")throw b.captureError(t,"history"),t;let d=p[1];if(typeof d!="number")throw b.captureError(t,"history"),t;r.push(d)}r.sort(function(c,p){return p-c});let a=r.map(c=>A.results[c]).map(c=>c.interactionData?.transactionType||""),i=[];for(let c=0;c<r.length;++c){let p=r[c],d=A.results[p],m={timestamp:d?.timestamp,owner:d?.owner,id:d?.id,chainMeta:d?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{l6.parse(m),A.results[p]=m,i.push(p)}catch{}}for(let c=0;c<r.length;++c){let p=r[c];i.indexOf(p)===-1&&A.results.splice(p,1)}r.length&&console.error(`Removed history items, ${a.join(",")}`);try{return F7.parse(A)}catch(c){let p=c;throw b.captureError(p,"history"),p}}};var Qq=3e5,ra="fetch-infinite-activity-items",ry=({accounts:e,isSpam:A})=>[ra,e,A],Hq=(e,A)=>{e.removeQueries({queryKey:A})},h7=({accounts:e,isSpam:A})=>{let j=Z();(0,ty.useEffect)(()=>()=>{j.cancelQueries({queryKey:[ra],exact:!1})},[j]);let t=ry({accounts:e,isSpam:A});return cj({queryKey:t,queryFn:async({pageParam:a})=>{try{let i;a&&a!==""?i=await k6({next:a,isSpam:A}):i=await k6({accounts:e||[],isSpam:A});let c=i.results.map(p=>(p.interactionData.transactionType==="TOKEN_SEND"&&p.interactionData.balanceChanges.sort(Vq(e)),p));return{...i,results:c}}catch(i){i instanceof kn&&Hq(j,t),b.captureError(i,"history")}},getNextPageParam:a=>a?.next,staleTime:Qq,retry:!1,enabled:!!e?.length&&e.every(a=>!I.isLocalNetworkID(a.chainId)),initialPageParam:""})};function Vq(e){return(A,j)=>{let t=jy(A,e),r=jy(j,e);return t?-1:r?1:0}}function jy(e,A){let j=e.to.split("/address:")[1],t=e.from.split("/address:")[1];return A.some(r=>r.address.toLowerCase()===j.toLowerCase()||r.address.toLowerCase()===t.toLowerCase())}var Xq=({fungible:e,isSpam:A=!1})=>{let{data:j=tB,status:t}=fB(),r=j.isDeveloperMode,o=y7(e),{data:a}=_r({address:e?.data.walletAddress,networkID:e?.data.chain.id}),i=(0,oy.useMemo)(()=>g7(a?[a]:[],e?.data.chain.id,o),[a,e?.data.chain.id,o]),c=h7({accounts:i,isSpam:A}),p=c.isPending||t==="pending";return{activityItemsData:c,isLoadingHistory:p,isDeveloperMode:r}};n();s();var N6=v(x());n();s();var $F=v(Dy()),vF=v(gF());var kP=l.object({domain:l.string(),url:l.string(),name:l.string(),category:l.string(),imageUrl:l.string(),slug:l.string()}),bF=l.object({uuid:l.string(),data:l.array(kP)}),BP=l.object({chainId:Fj,address:l.string(),name:l.string(),symbol:l.string(),logoUrl:l.string(),marketCap:l.number(),price:l.number(),priceChange:l.number(),volume:l.number(),volumeChange:l.number()}),qF=l.object({items:l.array(BP)}),fP=l.object({paymentTokenId:l.string(),name:l.string(),symbol:l.string(),decimals:l.number()}),EP=l.object({verified:l.boolean(),collectionUrl:l.string(),marketplaceId:l.string(),marketplaceName:l.string(),marketplaceCollectionId:l.string()}),gP=l.object({marketplaceId:l.string(),paymentToken:fP,value:l.string()}),yP=l.object({id:l.string(),name:l.string(),volume:l.string().optional(),volumePercentChange:l.number(),marketplacePages:l.array(EP),floorPrices:l.array(gP),imageUrl:l.string()}),xF=l.object({uuid:l.string(),data:l.array(yP)}),FP=["tokens","sites","collections","learn","suggested-users-to-follow","token-categories"],cr=l.enum(["shortcuts","carousel",...FP]),hP=l.object({type:l.literal(cr.enum.shortcuts)}),SP=l.object({type:l.literal(cr.enum.carousel)}),wP=l.object({type:l.literal(cr.enum["suggested-users-to-follow"]),limit:l.number()}),da="all_networks",In=l.union([Fj,l.literal(da)]),IP=["asc","desc"],$P=l.enum(IP),vP=["rank","volume","price","price-change","market-cap"],yF=l.enum(vP),bP=["1h","24h","7d","30d"],FF=l.enum(bP),qP=l.object({type:l.literal(cr.enum.tokens),sortBy:l.array(yF).refine(e=>new Set(e).size===e.length),sortByDefault:yF,sortDirectionDefault:$P,network:l.array(In).refine(e=>new Set(e).size===e.length),networkDefault:In,timeFrame:l.array(FF).refine(e=>new Set(e).size===e.length),timeFrameDefault:FF,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),xP=l.object({type:l.literal(cr.enum["token-categories"])}),GP=["top","rank"],hF=l.enum(GP),TP=["24h","7d","30d"],SF=l.enum(TP),PP=l.object({type:l.literal(cr.enum.sites),sortBy:l.array(hF).refine(e=>new Set(e).size===e.length),sortByDefault:hF,network:l.array(In).refine(e=>new Set(e).size===e.length),networkDefault:In,timeFrame:l.array(SF).refine(e=>new Set(e).size===e.length),timeFrameDefault:SF,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),OP=["top","rank"],wF=l.enum(OP),MP=["24h","7d","30d"],IF=l.enum(MP),CP=l.object({type:l.literal(cr.enum.collections),sortBy:l.array(wF).refine(e=>new Set(e).size===e.length),sortByDefault:wF,network:l.array(In).refine(e=>new Set(e).size===e.length),networkDefault:In,timeFrame:l.array(IF).refine(e=>new Set(e).size===e.length),timeFrameDefault:IF,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),_P=l.object({type:l.literal(cr.enum.learn),limit:l.number()}),RP=l.discriminatedUnion("type",[hP,SP,wP,qP,PP,CP,_P,xP]),J7=l.object({sections:l.array(RP).refine(e=>(0,$F.default)(e,(0,vF.default)(e,"type")))}),WZ=l.object({uuid:l.string(),data:l.array(Ck)});var DP=J7.parse({sections:[{type:"shortcuts"},{type:"carousel"},{type:"tokens",sortBy:["rank","volume","price","price-change","market-cap"],sortByDefault:"rank",sortDirectionDefault:"asc",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["1h","24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:100},{type:"token-categories"},{type:"suggested-users-to-follow",limit:3,listLimit:100},{type:"sites",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"collections",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"learn",limit:3}]}),Y7=()=>{let e=LA.getMultivariateAssignment("explore-config"),A=ge,{data:[j]}=fA(["enable-fungible-categories"]);return(0,N6.useMemo)(()=>{let t;try{t=J7.parse(JSON.parse(e??""))}catch{t=DP}return A||(t={...t,sections:t.sections.filter(r=>r.type!=="suggested-users-to-follow")}),j||(t={...t,sections:t.sections.filter(r=>r.type!=="token-categories")}),t},[e,A,j])},Z7=()=>{let e=Y7();return(0,N6.useMemo)(()=>{let A=[];for(let j of e.sections)(j.type==="collections"||j.type==="tokens"||j.type==="sites"||j.type==="learn"||j.type==="suggested-users-to-follow")&&A.push(j);return A},[e.sections])},Ad=e=>{let A=Y7();return(0,N6.useMemo)(()=>A.sections.find(t=>t.type===e)??null,[A.sections,e])};n();s();n();s();n();s();n();s();n();s();var NP=l.object({type:l.literal("fungible"),data:tf}),GF=l.object({results:l.array(l.any()).transform(e=>e.reduce((A,j)=>{let t=NP.safeParse(j);return t.success&&A.push(t.data),A},[])),prevCursor:l.string().nullish().default(null),nextCursor:l.string().nullish().default(null),hasMore:l.boolean()});async function TF(e){let{query:A,networkIds:j,searchContext:t,supportedNetworkIds:r,pageSize:o=50}=e,a=await H.api().headers({"Content-Type":"application/json"}).get("/search/v1",{params:{query:A.trim(),chainIds:j.join(","),platform:se,pageSize:o.toString(),searchTypes:"fungible",searchContext:t,...r&&{supportedNetworkIds:r.join(",")}}});if(!tA(a))throw new VA({key:"UnknownError"});let i=GF.safeParse(a.data);if(i.success)return i.data;throw new VA({key:"UnknownError"})}n();s();var ed=e=>{let A=e.data,j=bu(A)??void 0;return{type:A.type,data:{...A.data,tokenAddress:bu(A)??void 0,key:j}}};n();s();var KP="search",PF={searchResults:(e,A,j,t)=>[KP,{query:e,networkIds:A,supportedNetworkIds:t,chainAddresses:j}]};n();s();var jd=(o=>(o[o.Always=1/0]="Always",o[o.Short=X({minutes:5})]="Short",o[o.Medium=X({minutes:30})]="Medium",o[o.Long=X({hours:1})]="Long",o[o.Never=0]="Never",o))(jd||{}),td=(r=>(r[r.Immediate=0]="Immediate",r[r.Short=X({minutes:5})]="Short",r[r.Medium=X({minutes:30})]="Medium",r[r.Long=X({hours:1})]="Long",r))(td||{});var LP=async e=>(await TF(e)).results.map(j=>ed(j)),Ao=({query:e,networkIds:A,enableQuery:j=!0,keepPreviousData:t=!1,searchContext:r,supportedNetworkIds:o,chainAddresses:a,pageSize:i})=>{let c=PF.searchResults(e,A,a,o);return eA({queryKey:c,gcTime:jd.Short,staleTime:td.Short,enabled:j,placeholderData:t?Dk:void 0,queryFn:()=>LP({query:e,networkIds:A,searchContext:r,supportedNetworkIds:o,pageSize:i})})};n();s();n();s();n();s();var Ke=X({days:1}),bj=X({seconds:5}),OF=X({seconds:30});n();s();n();s();var PA=({name:e,response:A,current:j,target:t})=>{let r=`Failed to ${e}: 
`,o=[j!==void 0?`Current: ${j}`:null,t!==void 0?`Target: ${t}`:null].filter(Boolean);return o.length>0&&(r+=`${o.join(" | ")} 
`),r+=`${A.status} ${A.statusText} 
`,r+=`${JSON.stringify(A.data)}`,r},lj=({name:e,error:A,current:j,target:t})=>{let r=`Failed to parse ${e}: 
`,o=[j!==void 0?`Current: ${j}`:null,t!==void 0?`Target: ${t}`:null].filter(Boolean);return o.length>0&&(r+=`${o.join(" | ")} 
`),r+=`${JSON.stringify(A)}`,r};async function MF(e){let A=await H.api().bearer(!0).headers({Accept:"application/activity+json"}).get(`/v1/actors/${e}`);if(!tA(A)){let t=new Error(PA({name:"getActor",response:A,target:e}));throw b.captureError(t,"profiles"),t}let j=ct.safeParse(A.data);if(j.success)return j.data;{let t=new Error(lj({name:"getActor",error:j.error,target:e}));throw b.captureError(t,"profiles"),t}}n();s();var ZA="social",Ae="@phantom/social",wA={actor(e){return[ZA,`${Ae}:actor`,{profileId:e}]},actorAndFollowers(e){return[ZA,`${Ae}:actor-and-followers`,{profileId:e}]},actorAndFollowing(e){return[ZA,`${Ae}:actor-and-following`,{profileId:e}]},userProfileByUsernameOrUserProfileId(e){return[ZA,`${Ae}:user-profile-by-username-or-user-profile-id`,{usernameOrUserProfileId:e}]},followUser(e,A){return[ZA,`${Ae}:follow-user`,{currentId:e,targetId:A}]},feed(e,A){return[ZA,`${Ae}:feed`,{profileId:e,viewFeedAsUsername:A}]},feedStory(e){return[ZA,`${Ae}:feed-story`,{storyId:e}]},notifications(e){return[ZA,`${Ae}:notifications`,{profileId:e}]},searchForActorBase(){return[ZA,`${Ae}:search`]},searchForActor(e){return[ZA,`${Ae}:search`,{query:e}]},followRequests(e){return[ZA,`${Ae}:follow-requests`,{profileId:e}]},suggestedActors(e,A){return[ZA,`${Ae}:suggested-follows`,{profileId:A,source:e}]},blocking(e){return[ZA,`${Ae}:blocking`,{profileId:e}]},pendingFollowRequests(e,A){return[ZA,`${Ae}:pending-follow-requests`,{profileId:e,targetId:A}]},reaction(e){return e?[ZA,`${Ae}:reaction`,{targetId:e}]:[ZA,`${Ae}:reaction`]},reactionDetails(e){return e.targetId?[ZA,`${Ae}:reaction-details`,e]:[ZA,`${Ae}:reaction-details`,{content:e.content}]},followingHolders(e,A){return[ZA,`${Ae}:following-holders`,{profileId:e,caip19:A}]},tokenFollows(e,A){return[ZA,`${Ae}:token-follows`,{profileId:e,caip19:A}]},reportedFeedTokens(){return[ZA,`${Ae}:reported-feed-tokens`]}};function rd(e){let A=async()=>{if(!e)throw new Error("No profile ID or access token");return MF(e)};return Cr({queryKey:wA.actor(e),queryFn:A,enabled:!!e,gcTime:Ke,staleTime:OF})}n();s();n();s();n();s();function pr(e){let A=e.match(/\/v1\/actors\/([^/]+)/)?.[1];return A?OA.parse(A):void 0}n();s();function DA(e){return pr(e)??OA.parse(e)}var ur=(e,A)=>{let j=DA(A.id);j&&e.setQueryData(wA.actor(j),A)};function UP({usernameOrUserProfileId:e}){let A=e?.startsWith("@")?e.slice(1):e,j=Ii(),t=wA.userProfileByUsernameOrUserProfileId(e);return eA({enabled:!!A,queryKey:t,queryFn:async()=>{if(!A)throw new Error("No sanitized username or user profile id");let o=await j.getUserProfileByUsernameOrUserProfileId(A);if(!o)throw new Error("No user profile");return o},gcTime:Ke,staleTime:bj})}function od({query:e}){let A=Z(),{data:j}=xe(),{data:t}=UA(),r=j?.accessToken,o=e?.startsWith("@")?e.slice(1).trim():e.trim(),a=Ii(),i=wA.searchForActor(o),c=async()=>{if(!o||!r||!t?.id)return{actors:[]};let{actors:m}=await a.searchForActor(o,r,t.id);for(let B of m)ur(A,B);return m.sort((B,f)=>B.isFollowing?-1:f.isFollowing?1:0),{actors:m}},p=!!r;return{...eA({enabled:p,queryKey:i,queryFn:c,gcTime:Ke,staleTime:bj}),enabled:p}}n();s();n();s();n();s();var ma=(c=>(c.Buy="Buy",c.Sell="Sell",c.Reaction="Reaction",c.WhaleBuy="WhaleBuy",c.WhaleSell="WhaleSell",c.TrendingToken="TrendingToken",c.TokenFollow="TokenFollow",c.SuggestedFollow="SuggestedFollow",c))(ma||{}),QP=l.object({type:l.literal("followers")}),HP=l.object({type:l.literal("actor"),id:l.string()}),VP=l.union([QP,HP]),ka=l.object({actorId:l.string(),id:l.string(),published:l.coerce.string(),storyType:l.nativeEnum(ma),destinations:l.array(VP)}),CF=ka.extend({chainId:Fj,senderAddress:l.string(),senderTokenAccount:l.string(),signer:l.string(),toAddress:l.string(),toTokenAccount:l.string(),transactionId:l.string()}),_F=CF.extend({storyType:l.literal("Buy"),tokenBoughtAmountRaw:l.string(),tokenBoughtAmount:l.string(),tokenBoughtUsdValue:l.string().nullish(),tokenBoughtPrice:l.string().nullish(),tokenBoughtAddress:l.string()}),RF=CF.extend({storyType:l.literal("Sell"),tokenSoldAmountRaw:l.string(),tokenSoldAmount:l.string(),tokenSoldUsdValue:l.string().nullish(),tokenSoldPrice:l.string().nullish(),tokenSoldAddress:l.string()}),XP=["activity","token"],zP=l.enum(XP),WP=ka.extend({storyType:l.literal("Reaction"),targetId:l.string(),targetType:zP,type:l.literal("emoji"),content:l.string()}),JP=WP.transform((e,A)=>{let j=e.content;return $n.includes(j)?{...e,content:j}:(A.addIssue({code:l.ZodIssueCode.custom,message:"Not a supported reaction"}),l.NEVER)}),YP=_F.extend({storyType:l.literal("WhaleBuy")}),ZP=RF.extend({storyType:l.literal("WhaleSell")}),A1=ka.extend({storyType:l.literal("TrendingToken"),chainId:Fj,tokenAddress:l.string(),tokenLogoUrl:l.string(),tokenMarketCap:l.string(),tokenName:l.string(),tokenPrice:l.string(),tokenPriceChange:l.string(),tokenRank:l.string(),tokenSymbol:l.string(),tokenVolume:l.string(),tokenVolumeChange:l.string()}),e1=ka.extend({storyType:l.literal("SuggestedFollow"),suggestedActorId:l.string(),mutualFollowsCount:l.number(),mutualFollowsIds:l.array(l.string())}),j1=ka.extend({storyType:l.literal("TokenFollow"),tokenId:l.string(),otherTokenFollowers:l.array(l.string())}),DF=l.union([_F,RF,JP,YP,ZP,A1,j1,e1]);var t1=l.object({id:l.string(),type:l.string()}),NeA=t1.extend({type:l.literal("TokenMetadata"),attributes:l.object({data:jf})});var r1=l.object({orderedItems:ct.array().default([]),next:l.string().optional()}),o1=l.object({orderedItems:ct.array().default([]),next:l.string().optional()}),n1=l.object({orderedItems:ct.array().default([]),next:l.string().optional()});var NF=l.object({orderedItems:ct.array().default([]),next:l.string().optional()}),s1=l.object({orderedItems:ct.array().default([]),next:l.string().optional()}),a1=l.object({id:l.string(),username:l.string(),icon:l.string().nullish()}),i1=l.object({followingHolders:a1.array().default([])}),c1=l.object({targetId:l.string(),actorId:l.string(),type:l.string(),content:l.string()}),p1=l.object({targetId:l.string(),content:l.string(),type:l.string(),count:l.number({coerce:!0})});function u1(e,A){return e==="emoji"&&$n.includes(A)}var l1=c1.transform(e=>({...e,content:$n.includes(e.content)?e.content:"\u{1F440}"})),KF=l.object({reactions:l.array(l1),counts:l.array(p1).transform(e=>e.filter(A=>u1(A.type,A.content))).optional()}),d1=l.object({actors:ct.array().default([]),nextCursor:l.string().optional()});var $n=["\u{1F680}","\u{1F49C}","\u{1F402}","\u{1F440}","\u{1F43B}","\u{1F4A9}","\u{1F480}","\u{1F602}","\u{1F438}"];var nd=(j=>(j.Circle="circle",j.Square="square",j))(nd||{}),m1=l.object({type:l.literal("image"),imageUrl:l.string(),shape:l.nativeEnum(nd)}),k1=l.object({type:l.literal("emoji"),unicode:l.string()}),B1=l.discriminatedUnion("type",[m1,k1]);var f1=l.object({type:l.literal("reaction"),content:l.string()}).transform((e,A)=>{let j=e.content;return $n.includes(j)?{...e,content:j}:(A.addIssue({code:l.ZodIssueCode.custom,message:"Not a supported reaction"}),l.NEVER)}),E1=l.object({type:l.literal("icon"),icon:l.string(),size:l.number(),backgroundColor:l.string(),foregroundColor:l.string()}),g1=l.union([f1,E1]),y1=l.object({start:l.number(),length:l.number()});var F1=l.object({type:l.literal("profile"),profileId:l.string()}),h1=l.object({type:l.literal("story"),storyId:l.string()}),S1=l.object({type:l.literal("token"),tokenId:AB}),w1=l.object({type:l.literal("dapp"),dappId:l.string()}),I1=l.discriminatedUnion("type",[F1,h1,S1,w1]),$1=l.object({data:l.record(l.string(),l.any()),event:l.string()}),v1=l.object({id:l.string(),startImage:B1.array(),startImageBadge:g1,text:l.string(),highlight:y1.array(),action:I1,isRead:l.boolean(),published:l.coerce.string(),onActionAnalytics:$1}),b1=l.object({isFollowing:l.boolean()});var vn=e=>["Buy","WhaleBuy","Sell","WhaleSell","Reaction","TokenFollow","TrendingToken"].includes(e.storyType);n();s();n();s();var sd=e=>{let A=e.split("/tokens/")[1]?.split("#")[0];if(!A)return"";let[j,t]=A.split("/");if(!j)return"";let[r]=j.split("-");return Ds.getCaip19FromUrlPath({chainName:r,address:t})};var bn=e=>{let{storyType:A}=e;switch(A){case"Buy":case"WhaleBuy":{let{chainId:j,tokenBoughtAddress:t}=e;return Ds.getCaip19FromUrlPath({chainName:I.getChainID(j),address:t})}case"Sell":case"WhaleSell":{let{chainId:j,tokenSoldAddress:t}=e;return Ds.getCaip19FromUrlPath({chainName:I.getChainID(j),address:t})}case"Reaction":{let{targetId:j}=e;return sd(j)}case"TokenFollow":{let{tokenId:j}=e;return j}case"TrendingToken":{let{chainId:j,tokenAddress:t}=e;return J({chainId:j,address:t,resourceType:"address"})}}};n();s();n();s();n();s();var _jA=X({minutes:10}),RjA=X({seconds:60});n();s();n();s();var ttA=X({minutes:10}),rtA=X({seconds:60});n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();var grA=X({minutes:5}),yrA=X({days:1});n();s();n();s();n();s();n();s();var roA=X({minutes:5});n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();var CnA=X({days:1}),_nA=X({hours:1});n();s();n();s();n();s();n();s();var eo=Xt(Y,e=>new ad(e)),ad=class{#A;constructor(A){this.#A=A}profileFollowRequestAcceptedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileFollowRequestAcceptedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"followRequestAccepted"}})}profileFollowRequestDeniedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileFollowRequestDeniedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"followRequestDenied"}})}profileUnfollowedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileUnfollowedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"unfollow"}})}profileFollowedByUser({targetId:A,actorId:j,isRequest:t}){let r=DA(A),o=DA(j);this.#A.capture("profileFollowedByUser",{data:{targetId:A,targetProfileId:r,actorId:j,actorProfileId:o,type:t?"followRequest":"follow"}})}profileReportedByUser({targetId:A,actorId:j,additionalData:t}){let r=DA(A),o=DA(j);this.#A.capture("profileReportedByUser",{data:{targetId:A,targetProfileId:r,actorId:j,actorProfileId:o,type:"report",...t}})}profileUnblockedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileUnblockedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"unblock"}})}profileBlockedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileBlockedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"block"}})}profileViewedByUser({targetId:A,actorId:j,isFollowing:t}){let r=DA(A),o=DA(j);this.#A.capture("profileViewedByUser",{data:{targetId:A,targetProfileId:r,actorId:j,actorProfileId:o,isFollowing:t,type:"view"}})}profileFollowersViewedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileFollowersViewedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"viewFollowers"}})}profileFollowingViewedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileFollowingViewedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"viewFollowing"}})}profileSharedByUser({targetId:A,actorId:j}){let t=DA(A),r=DA(j);this.#A.capture("profileSharedByUser",{data:{targetId:A,targetProfileId:t,actorId:j,actorProfileId:r,type:"share"}})}};n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();var ZF=v(YF(),1),A0=ZF.default;var K1=A0.bind({concatArrays:!0,ignoreUndefined:!0});function L1(e,A){let j=self.localStorage.getItem(e);if(j){let t=JSON.parse(j),r=JSON.parse(A),o=JSON.stringify(K1(t,r));self.localStorage.setItem(e,o)}else self.localStorage.setItem(e,A)}function Gn(e,A){return new Promise((j,t)=>{try{let r=e();A?.(null,r),j(r)}catch(r){A?.(r),t(r)}})}function U6(e,A,j){return Promise.all(e).then(t=>{let r=j?.(t)??null;return A?.(null,r),Promise.resolve(r)},t=>(A?.(t),Promise.reject(t)))}var fa={getItem:(e,A)=>Gn(()=>self.localStorage.getItem(e),A),setItem:(e,A,j)=>Gn(()=>self.localStorage.setItem(e,A),j),removeItem:(e,A)=>Gn(()=>self.localStorage.removeItem(e),A),mergeItem:(e,A,j)=>Gn(()=>L1(e,A),j),clear:e=>Gn(()=>self.localStorage.clear(),e),getAllKeys:e=>Gn(()=>{let A=self.localStorage.length,j=[];for(let t=0;t<A;t+=1){let r=self.localStorage.key(t)||"";j.push(r)}return j},e),flushGetRequests:()=>{},multiGet:(e,A)=>{let j=e.map(r=>fa.getItem(r));return U6(j,A,r=>r.map((o,a)=>[e[a],o]))},multiSet:(e,A)=>{let j=e.map(t=>fa.setItem(t[0],t[1]));return U6(j,A)},multiRemove:(e,A)=>{let j=e.map(t=>fa.removeItem(t));return U6(j,A)},multiMerge:(e,A)=>{let j=e.map(t=>fa.mergeItem(t[0],t[1]));return U6(j,A)}},cd=fa;n();s();var Q6=cd;n();s();var U1=Object.defineProperty,e0=Object.getOwnPropertySymbols,Q1=Object.prototype.hasOwnProperty,H1=Object.prototype.propertyIsEnumerable,j0=(e,A,j)=>A in e?U1(e,A,{enumerable:!0,configurable:!0,writable:!0,value:j}):e[A]=j,Tn=(e,A)=>{for(var j in A||(A={}))Q1.call(A,j)&&j0(e,j,A[j]);if(e0)for(var j of e0(A))H1.call(A,j)&&j0(e,j,A[j]);return e},H6=e=>A=>{try{let j=e(A);return j instanceof Promise?j:{then(t){return H6(t)(j)},catch(t){return this}}}catch(j){return{then(t){return this},catch(t){return H6(t)(j)}}}},V6=(e,A)=>(j,t,r)=>{let o=Tn({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,y)=>Tn(Tn({},y),E)},A);(o.blacklist||o.whitelist)&&console.warn(`The ${o.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let a=!1,i=new Set,c=new Set,p;try{p=o.getStorage()}catch{}if(p)p.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${o.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return e((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),j(...E)},t,r);let d=H6(o.serialize),m=()=>{let E=o.partialize(Tn({},t()));o.whitelist&&Object.keys(E).forEach(S=>{var $;!(($=o.whitelist)!=null&&$.includes(S))&&delete E[S]}),o.blacklist&&o.blacklist.forEach(S=>delete E[S]);let y,F=d({state:E,version:o.version}).then(S=>p.setItem(o.name,S)).catch(S=>{y=S});if(y)throw y;return F},B=r.setState;r.setState=(E,y)=>{B(E,y),m()};let f=e((...E)=>{j(...E),m()},t,r),k,g=()=>{var E;if(!p)return;a=!1,i.forEach(F=>F(t()));let y=((E=o.onRehydrateStorage)==null?void 0:E.call(o,t()))||void 0;return H6(p.getItem.bind(p))(o.name).then(F=>{if(F)return o.deserialize(F)}).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==o.version){if(o.migrate)return o.migrate(F.state,F.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return F.state}).then(F=>{var S;return k=o.merge(F,(S=t())!=null?S:f),j(k,!0),m()}).then(()=>{y?.(k,void 0),a=!0,c.forEach(F=>F(k))}).catch(F=>{y?.(void 0,F)})};return r.persist={setOptions:E=>{o=Tn(Tn({},o),E),E.getStorage&&(p=E.getStorage())},clearStorage:()=>{var E;(E=p?.removeItem)==null||E.call(p,o.name)},rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:E=>(i.add(E),()=>{i.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},g(),k||f};var t0=TA(V6((e,A)=>({username:void 0,setUsername:j=>e({username:j})}),{name:"view-feed-as",getStorage:()=>Q6}));n();s();n();s();n();s();n();s();n();s();var ppA=new Set([wA.feed(OA.parse(""))[1]]);n();s();var V1=TA(V6((e,A)=>({enabled:!1,setEnabled:j=>e({enabled:j})}),{name:"enable-recommendations",getStorage:()=>Q6}));n();s();var r0={uiContext:void 0,fungibleDetails:void 0,story:void 0},X1=TA(e=>({...r0,setUiContext:A=>e({uiContext:A}),setFungibleDetails:A=>e({fungibleDetails:A}),setStory:A=>e({story:A}),reset:()=>e(r0)}));n();s();n();s();var Ea="en-US",z1=()=>Os(Ea,{maximumFractionDigits:0}),W1=()=>Os(Ea,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),J1=()=>Os(Ea,{notation:"compact",compactDisplay:"short",maximumFractionDigits:0,minimumFractionDigits:0}),Y1=()=>Os(Ea,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),X6=e=>{if(e<1e3)return z1().format(e);if(e<1e5){let j=Math.floor(e/100)*100;return W1().format(j).replace(".0K","K")}if(e<1e6){let j=Math.floor(e/1e3)*1e3;return J1().format(j)}let A=Math.floor(e/1e5)*1e5;return Y1().format(A).replace(".0M","M")};n();s();n();s();n();s();var Z1=e=>{let{data:A}=rd(e);return o0(A)},o0=e=>{let A={followers:e?.followers&&typeof e.followers=="object"&&e?.followers?.totalItems||0,following:e?.following&&typeof e.following=="object"&&e?.following?.totalItems||0};return{...A,formattedFollowers:X6(A.followers||0),formattedFollowing:X6(A.following||0)}};n();s();n();s();n();s();var eO=Xt(Y,e=>new pd(e)),pd=class{#A;constructor(A){this.#A=A}feedStorySeenByUser(A){let{actorId:j,storyType:t,id:r}=A,o=vn(A)?bn(A):void 0;this.#A.capture("feedStorySeenByUser",{data:{storyId:r,storyType:t,actor:j,...o?{caip19:o}:{}}})}feedClickedByUser(A,j){let{actorId:t,storyType:r,id:o}=A,a=vn(A)?bn(A):void 0;this.#A.capture("feedStoryClickedByUser",{data:{...j,storyId:o,storyType:r,actor:t,...a?{caip19:a}:{}}})}reactionAddedByUser(A){this.#A.capture("reactionAddedByUser",{data:A})}reactionRemovedByUser(A){this.#A.capture("reactionRemovedByUser",{data:A})}feedRefreshedManuallyByUser(){this.#A.capture("feedRefreshedManuallyByUser")}};var ke=v(x());n();s();n();s();n();s();var n0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!1};n();s();var s0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var a0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!1};n();s();var i0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var c0={tokenSearchEnabled:()=>LA.isFeatureEnabled("enable-monad-explore-search"),trendingTokensEnabled:()=>!1};n();s();var p0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var u0={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var l0={tokenSearchEnabled:()=>LA.isFeatureEnabled("enable-sui-explore-search"),trendingTokensEnabled:()=>!1};var jO=new zo({solana:u0,ethereum:i0,polygon:p0,base:s0,arbitrum:n0,bitcoin:a0,monad:c0,sui:l0}),ud=Xo(jO);n();s();var z6=e=>["explore-dapp",e];var ld=e=>e.addresses.map(A=>I.getMainnetNetworkID(A.networkID))??[];function d0(e){try{return Dj.get(e).nonNativeFungibleTokenType}catch{return"SolanaNative"}}n();s();n();s();var Xj="@phantom/explore",me={RecentlyViewedSearchItems:[Xj,"RecentlyViewedSearchItems"],sitesV2({sortBy:e,timeFrame:A,networkIDs:j,limit:t,locale:r,rankAlgo:o}){return[Xj,"sitesV2",$A,r,{sortBy:e,timeFrame:A,networkIDs:j,rankAlgo:o,limit:t}]},recommendedSites(e,A){return[Xj,"sites","recommended",$A,A,e]},tokensV2({sortBy:e,sortDirection:A,timeFrame:j,networkIDs:t,limit:r,rankAlgo:o}){return[Xj,"tokensV2",{sortBy:e,sortDirection:A,timeFrame:j,networkIDs:t,rankAlgo:o,limit:r}]},collectionsV2({sortBy:e,timeFrame:A,networkIDs:j,limit:t,locale:r,rankAlgo:o}){return[Xj,"collectionsV2",$A,r,{sortBy:e,timeFrame:A,networkIDs:j,rankAlgo:o,limit:t}]},featuredTransactions(e,A){return[Xj,"transactions","featured",$A,A,e]},learn(e,A){return[Xj,"learn",$A,A,e]}};var tO=10,k0="RecentlyViewedSearchItems";async function rO(e){return await e.get(k0)??[]}async function B0(e,A){await e.set(k0,A)}function dd(e){return eA({queryKey:me.RecentlyViewedSearchItems,queryFn:async()=>rO(e),staleTime:0,enabled:!0})}function oO(e){let A=Z();return dA({mutationFn:async t=>{let r=m0(t),a=(A.getQueryData(me.RecentlyViewedSearchItems)??[]).filter(i=>m0(i)!==r);a.unshift(t),a=a.slice(0,tO),await B0(e,a),A.setQueryData(me.RecentlyViewedSearchItems,a),await A.refetchQueries({queryKey:me.RecentlyViewedSearchItems})}})}function nO(e){let A=Z();return dA({mutationFn:async()=>{await B0(e,[]),A.setQueryData(me.RecentlyViewedSearchItems,[]),await A.refetchQueries({queryKey:me.RecentlyViewedSearchItems})}})}function m0(e){return e.type==="token"?J(W(e.data)):e.data.id}n();s();var Y0=v(W0()),qd=v(x());n();s();var J0={fields:["domain","name","category","tags"],storeFields:["domain","name","category","tags","imageUrl"],searchOptions:{boost:{name:2},prefix:!0,fuzzy:e=>e.length>3?.2:!1}};var Z8=e=>{let A={isRecommended:"true"};return e.networkIds&&(A.chainIds=e.networkIds.join(",")),`/dapps/v1?${new URLSearchParams(A).toString()}`},AM=async e=>{let A=await H.api().get(Z8(e));if(!tA(A))throw new Error("Error fetching recommended dapps from registry");if(!A?.data||!A?.data?.data)throw new Error("No data returned from registry");return A.data.data},Z0=e=>{let A=Z();return eA({queryKey:["dapps","recommended",e],queryFn:async()=>{try{let t=await AM(e);return gi.batch(()=>{for(let r of t??[]){let o=z6(r.domain),a=A.getQueryState(o);A.setQueryData(o,()=>r??a?.data??null)}}),t}catch(t){throw b.captureError(t,"dappRegistry"),t}},gcTime:X({days:1}),staleTime:X({days:1})})},xd=(e,A)=>{let{searchQuery:j,networkIds:t}=e,{data:r=[],isPending:o}=Z0({networkIds:t}),a=(0,qd.useMemo)(()=>{let d=[...r||[],...A||[]],m=(0,Y0.default)(d,B=>hu(B.domain));return Object.values(m)},[r,A]),i=hu(j),c=Hk(a,i,J0);return{data:(0,qd.useMemo)(()=>c.map(d=>a.find(m=>m.id===d.id)).filter(Boolean),[c,a]),isPending:o}};n();s();n();s();var Ah=async({sortBy:e,sortDirection:A,timeFrame:j,networkIDs:t,limit:r,rankAlgo:o,anonymousId:a})=>{let i=new URLSearchParams({timeFrame:j,sortBy:e,sortDirection:A,limit:r.toString(),rankAlgo:o,...a?{anonymousId:a}:{}});t.forEach(d=>{i.append("chainIds[]",d)});let c=await H.api().get("/explore/v2/trending-tokens",{params:i});if(!tA(c))throw new Error("Failed to fetch tokens");let p=qF.safeParse(c.data);if(!p.success)throw new Error("Failed to parse tokens");return p.data};n();s();var Rn=(e,A)=>{let j=$i(),r=Z7().find(a=>a.type===A),o=[];return r&&"network"in r?r.network.forEach(a=>{a!==da&&j.includes(a)&&o.push(a)}):o=j,e!==da&&!o.includes(e)?[]:e===da?o:[e]};var eM=X({minutes:1}),jM=X({minutes:1}),tM=100,Gd=({sortBy:e,sortDirection:A,timeFrame:j,network:t,limit:r,rankAlgo:o,enableQuery:a=!0})=>{let{data:i}=EA(),c=Y(),p=Rn(t,"tokens"),d=tM,m=re(T.language)??"en";return eA({queryKey:me.tokensV2({sortBy:e,sortDirection:A,timeFrame:j,networkIDs:p,limit:d,rankAlgo:o}),enabled:!!i&&a,async queryFn(){if(!i)throw new Error("No account found");let B=await c.getDeviceId();return Ah({sortBy:e,sortDirection:A,timeFrame:j,networkIDs:p,locale:m,limit:d,rankAlgo:o,anonymousId:B})},gcTime:jM,staleTime:eM,retry:3,select:B=>r>=d?B:{...B,items:B.items.slice(0,r)}})};var ha=3,rM=15,Td=50,eh={VERIFIED:1,NOT_VERIFIED:2,POSSIBLE_SPAM:3,SPAM:4},oM=(e,A=100)=>{let[j,t]=(0,ke.useState)(!1);return(0,ke.useEffect)(()=>{let r;return e?r=setTimeout(()=>t(!0),A):t(!1),()=>clearTimeout(r)},[e,A]),j},nM=e=>{let A=d0(e.chainId),j=I.getChainDefinition(e.chainId),t={name:e.name,symbol:e.symbol,logoUri:e.logoUrl,chain:{id:e.chainId,symbol:j.tokenSymbol,name:j.name,imageUrl:j.iconUrl}};switch(A){case"SPL":return{type:A,data:{...t,mintAddress:e.address}};case"ERC20":return{type:A,data:{...t,contractAddress:e.address}};case"BRC20":return{type:A,data:{...t,firstCreatedInscriptionId:e.address}};default:return null}},sM=e=>e.reduce((A,j)=>{let t=nM(j);return t&&A.push(t),A},[]),aM=({searchQuery:e,networkIds:A,minSearchResults:j,excludePlaceholderTokens:t=!1,extraDapps:r=[]})=>{let[o,a]=(0,ke.useState)(!1),[i,c]=(0,ke.useState)(!1),[p,d]=(0,ke.useState)(!1),m=(0,ke.useMemo)(()=>A.filter(uA=>ud.get(uA).tokenSearchEnabled()),[A]);(0,ke.useEffect)(()=>{a(!1),c(!1),d(!1)},[e]);let{data:B=[],isPending:f}=Ao({query:e,networkIds:m,searchContext:"explore",enableQuery:!!e}),k=Ad("tokens"),{data:g}=Gd({sortBy:k?.sortByDefault??"rank",sortDirection:k?.sortDirectionDefault??"asc",timeFrame:k?.timeFrameDefault??"24h",network:k?.networkDefault??"solana:101",limit:10,rankAlgo:k?.rankAlgo??"default",enableQuery:!e&&!t}),E=(0,ke.useMemo)(()=>B.sort((uA,te)=>eh[uA.data.spamStatus??"NOT_VERIFIED"]-eh[te.data.spamStatus??"NOT_VERIFIED"]),[B]),y=(0,ke.useMemo)(()=>g?.items?sM(g.items):[],[g?.items]),F=j??(e.length===0?rM:ha),S=(0,ke.useMemo)(()=>E.slice(0,i?Td:F),[i,E,F]),$=(0,ke.useMemo)(()=>[...E.map(uA=>J(W(uA))),...y.map(uA=>J(W(uA)))],[E,y]),{data:M={},isPending:O}=pt({query:{data:$},enabled:$.length>0}),{data:G=[],isPending:z}=xd({networkIds:m,searchQuery:e},r),D=G.slice(0,o?Td:ha),{data:h,isPending:q,enabled:C}=od({query:e}),R=C&&q,N=!!e,_=z||f||R,L=N&&!_,V=kA(),{data:U}=dd(V),{actorsAll:K,actors:IA}=(0,ke.useMemo)(()=>{let uA=h?.actors??[],te=uA.slice(0,p?Td:ha);return{actorsAll:uA,actors:te}},[p,h?.actors]),mA=(0,ke.useMemo)(()=>({actors:IA,dapps:G,searchedDapps:D,renderShowMoreDappsButton:N&&G.length>ha,isLoading:_,tokens:S,trendingTokens:y,renderShowMoreTokensButton:N&&E.length>F,renderShowMoreUsersButton:N&&K.length>ha,priceMap:M,isPriceMapLoading:O,showSearchResults:L,showMoreTokens:i,setShowMoreTokens:c,showMoreDapps:o,setShowMoreDapps:a,showMoreUsers:p,setShowMoreUsers:d,recentlyViewedSearchItems:U}),[IA,G,D,N,_,S,y,E.length,F,K.length,M,O,L,i,o,p,U]),[xA,we]=(0,ke.useState)(null),KA=oM(_);return(0,ke.useEffect)(()=>{mA.isLoading||we(e?mA:null)},[mA.isLoading,e]),{...mA.isLoading&&xA?xA:mA,showSpinner:KA&&N}};n();s();n();s();var iM=e=>`/dapps/v1?domains=${e.join(",")}`,cM=async e=>{let A=await H.api().get(iM(e));if(!tA(A))throw new Error("Error fetching recommended dapps from registry");if(!A.data||!A.data.data)throw new Error("No data returned from registry");return A.data.data},pM=e=>{let A=Z(),j=e!=null&&Array.isArray(e)&&e.length>0&&e.filter(r=>r!=null&&r!="").length>0;return eA({queryKey:["dapps",e],enabled:j,queryFn:async()=>{try{let r=await cM(e);return gi.batch(()=>{for(let o of r??[]){let a=z6(o.domain),i=A.getQueryState(a);A.setQueryData(a,()=>o??i?.data??null)}}),r}catch(r){throw b.captureError(r,"dappRegistry"),r}},gcTime:X({days:1}),staleTime:X({days:1})})};n();s();var rh=v(x());n();s();var th=async(e,A)=>{let j=new URLSearchParams({appVersion:$A,limit:"6",locale:A,platform:se,timeframe:"24h"});e.forEach(o=>{j.append("chainIds[]",o)});let t=await H.api().get("/explore/v1/featured-dapps",{params:j});if(!tA(t))throw new Error("Failed to fetch sites");return await t.data};var uM=X({minutes:10}),lM=X({minutes:10}),dM=()=>{let{data:e}=EA(),A=(0,rh.useMemo)(()=>e?ld(e):[],[e]),j=re(T.language)??"en",t=async()=>{if(!e)throw new Error("No account found");return th(A,j)};return eA({queryKey:me.recommendedSites(A,j),enabled:!!e,queryFn:t,gcTime:uM,staleTime:lM})};n();s();var mM=v(x());n();s();var LmA=X({minutes:10}),UmA=X({minutes:10});n();s();n();s();var kM={rank:"trending",top:"top"},oh=async({sortBy:e,timeFrame:A,networkIDs:j,limit:t,locale:r,rankAlgo:o})=>{let a=new URLSearchParams({appVersion:$A,limit:t.toString(),locale:r,platform:se,rankAlgo:o,rankBy:kM[e],timeframe:A});j.forEach(p=>{a.append("chainIds[]",p)});let i=await H.api().get("/explore/v1/trending-dapps",{params:a});if(!tA(i))throw new Error("Failed to fetch sites");let c=bF.safeParse(i.data);if(!c.success)throw new Error("Failed to parse sites");return c.data};var BM=X({minutes:10}),fM=X({minutes:10}),EM=({sortBy:e,timeFrame:A,network:j,limit:t,rankAlgo:r})=>{let{data:o}=EA(),a=Rn(j,"sites"),i=re(T.language)??"en";return eA({queryKey:me.sitesV2({sortBy:e,timeFrame:A,networkIDs:a,locale:i,limit:t,rankAlgo:r}),enabled:!!o,async queryFn(){if(!o)throw new Error("No account found");return oh({sortBy:e,timeFrame:A,networkIDs:a,locale:i,limit:t,rankAlgo:r})},gcTime:fM,staleTime:BM,retry:3})};n();s();n();s();var gM={rank:"trending",top:"volume"},yM=e=>e.floorPrices.length>0&&e.marketplacePages.length>0,nh=async({sortBy:e,timeFrame:A,networkIDs:j,limit:t,locale:r,rankAlgo:o})=>{let a=new URLSearchParams({appVersion:$A,limit:t.toString(),locale:r,platform:se,rankAlgo:o,rankBy:gM[e],timeframe:A});j.forEach(p=>{a.append("chainIds[]",p.toString())});let i=await H.api().get("/explore/v1/trending-collections",{params:a});if(!tA(i))throw new Error("Failed to fetch collections");let c=xF.safeParse(i.data);if(!c.success)throw new Error("Failed to parse collections");return{...c.data,data:c.data.data.filter(yM)}};var FM=X({minutes:10}),hM=X({minutes:10}),SM=({sortBy:e,timeFrame:A,network:j,limit:t,rankAlgo:r})=>{let{data:o}=EA(),a=Rn(j,"collections"),i=re(T.language)??"en";return eA({queryKey:me.collectionsV2({sortBy:e,timeFrame:A,networkIDs:a,locale:i,limit:t,rankAlgo:r}),enabled:!!o,async queryFn(){if(!o)throw new Error("No account found");return nh({sortBy:e,timeFrame:A,networkIDs:a,locale:i,limit:t,rankAlgo:r})},gcTime:hM,staleTime:FM,retry:3})};n();s();n();s();var sh=async(e,A)=>{let j=new URLSearchParams({appVersion:$A,locale:A,platform:se});e.forEach(o=>{j.append("chainIds[]",o)});let t=await H.api().get("/explore/v1/learn-grid",{params:j});if(!tA(t))throw new Error("Failed to fetch learn grid");return t.data};var wM=X({minutes:10}),IM=X({minutes:10}),$M=()=>{let e=$i(),A=re(T.language)??"en";return eA({queryKey:me.learn(e,A),enabled:e.length>0,async queryFn(){return sh(e,A)},gcTime:IM,staleTime:wM})};n();s();n();s();n();s();var We="Auto";var MA={buyFungible:void 0,buyUsdValue:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmountCryptoInput:"",amountType:"sell",quoteResponse:void 0,selectedProviderIndex:0,selectedBaseProvider:We,gasEstimation:{isFetching:!1,estimate:void 0,estimateWithBuffer:void 0},hasNoRoutes:!1,isFetchingQuote:!1,error:null,searchQuery:"",numSearchResults:0,primaryCurrency:"crypto",uiSellAmountLocalFiatInput:"",uiBuyAmountCryptoInput:"",uiBuyAmountLocalFiatInput:"",canInputFiatSellAmount:!1,swapFilter:void 0},w=TA(e=>({...MA,resetQuote:()=>e({quoteResponse:MA.quoteResponse,isFetchingQuote:MA.isFetchingQuote,hasNoRoutes:MA.hasNoRoutes,selectedProviderIndex:MA.selectedProviderIndex,error:MA.error,uiSellAmountLocalFiatInput:MA.uiSellAmountLocalFiatInput,selectedBaseProvider:MA.selectedBaseProvider}),resetSwapper:()=>e({quoteResponse:MA.quoteResponse,gasEstimation:MA.gasEstimation,error:MA.error,sellAmount:"",uiSellAmountCryptoInput:"",uiBuyAmountCryptoInput:MA.uiBuyAmountCryptoInput,swapFilter:MA.swapFilter,selectedBaseProvider:MA.selectedBaseProvider,selectedProviderIndex:MA.selectedProviderIndex}),setBuyFungible:A=>e({buyFungible:A}),setBuyUsdValue:A=>e({buyUsdValue:A}),setHasNoRoutes:A=>e({hasNoRoutes:A}),setIsFetchingQuote:A=>e({isFetchingQuote:A}),setQuoteResponse:A=>e({quoteResponse:A,hasNoRoutes:!1}),setSelectedProviderIndex:A=>e({selectedProviderIndex:A}),setSelectedBaseProvider:A=>e({selectedBaseProvider:A}),setGasEstimation:({estimate:A,estimateWithBuffer:j,isFetching:t})=>e(r=>({gasEstimation:{...r.gasEstimation,...A!==void 0&&{estimate:A},...j!==void 0&&{estimateWithBuffer:j},...t!==void 0&&{isFetching:t}}})),setSellAmount:A=>e({sellAmount:A}),setAmountType:A=>e({amountType:A}),setSellUsdValue:A=>e({sellUsdValue:A}),setSellFungible:A=>e({sellFungible:A}),setUiSellAmountCryptoInput:A=>e({uiSellAmountCryptoInput:A}),setError:A=>e({error:A}),setSearchQuery:A=>e({searchQuery:A}),setNumSearchResults:A=>e({numSearchResults:A}),setPrimaryCurrency:A=>e({primaryCurrency:A}),setUiSellAmountLocalFiatInput:A=>e({uiSellAmountLocalFiatInput:A}),setUiBuyAmountCryptoInput:A=>e({uiBuyAmountCryptoInput:A}),setUiBuyAmountLocalFiatInput:A=>e({uiBuyAmountLocalFiatInput:A}),setCanInputFiatSellAmount:A=>e({canInputFiatSellAmount:A}),setSwapFilter:A=>e({swapFilter:A}),switchTokensForSell:()=>{e(A=>{let j=A.sellFungible??A.buyFungible,t=A.buyFungible??A.sellFungible,r=A.uiBuyAmountCryptoInput,o=A.uiBuyAmountLocalFiatInput;return{sellFungible:t,buyFungible:j,uiSellAmountCryptoInput:r,uiSellAmountLocalFiatInput:o,uiBuyAmountCryptoInput:MA.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:MA.uiBuyAmountLocalFiatInput,sellAmount:r,swapFilter:void 0,selectedBaseProvider:A.selectedBaseProvider}})},switchTokensForBuy:()=>{e(A=>{let j=A.sellFungible??A.buyFungible,t=A.buyFungible??A.sellFungible,r=A.uiSellAmountCryptoInput,o=A.uiSellAmountLocalFiatInput;return{sellFungible:t,buyFungible:j,uiSellAmountCryptoInput:MA.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:MA.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:r,uiBuyAmountLocalFiatInput:o,sellAmount:r,swapFilter:void 0,selectedBaseProvider:A.selectedBaseProvider}})},resetUiAmounts:()=>e({uiSellAmountCryptoInput:MA.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:MA.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:MA.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:MA.uiBuyAmountLocalFiatInput,sellAmount:MA.sellAmount,selectedBaseProvider:MA.selectedBaseProvider}),setPairAndAmount:({sell:A,buy:j,swapAmount:t})=>e(r=>{let o="uiSellAmountCryptoInput";return t.perspective==="sell"?r.primaryCurrency==="crypto"?o="uiSellAmountCryptoInput":o="uiSellAmountLocalFiatInput":r.primaryCurrency==="crypto"?o="uiBuyAmountCryptoInput":o="uiBuyAmountLocalFiatInput",{...r,sellFungible:A,buyFungible:j,[o]:t.amount,sellAmount:t.amount}})}));n();s();var ih=v(x());n();s();var Sa=v(x());var ah=()=>{let[e,A]=(0,Sa.useState)(!1),{data:[j]}=fA(["enable-quote-streaming"]),t=w(p=>p.selectedProviderIndex),r=w(p=>p.selectedBaseProvider),o=w(p=>p.quoteResponse),a=(0,Sa.useMemo)(()=>o?o.quotes:[],[o]),i=(0,Sa.useMemo)(()=>{if(j){if(!o||o.quotes.length===0)return 0;let p=vM(o,r);return p===-1?(A(r!==We),0):(A(!1),p)}return t},[j,o,r,t]),c=a.length>0?a[i]:void 0;return{selectedQuoteIndex:i,selectedBaseProvider:j?r:"",currentQuote:c,hasDefaultedToBestQuote:e}},vM=(e,A)=>e.quotes.findIndex(j=>j.baseProvider.id===A);function iA(){let e=w(p=>p.quoteResponse),A=w(p=>p.hasNoRoutes),j=w(p=>p.isFetchingQuote),t=(0,ih.useMemo)(()=>e?e.quotes:[],[e]),r=t[0]?.buyAmount??"",{selectedQuoteIndex:o,selectedBaseProvider:a,currentQuote:i,hasDefaultedToBestQuote:c}=ah();return{bestBuyAmount:r,currentQuote:i,hasNoRoutes:A,quoteResponse:e,quotes:t,selectedProviderIndex:o,selectedBaseProvider:a,isFetchingQuote:j,hasDefaultedToBestQuote:c}}n();s();var bh=v(x());n();s();var Rd=v(x());n();s();var vh=v(x());n();s();n();s();n();s();n();s();var Od=5,Md=5,ch={id:I.solana.mainnetID,imageUrl:I.solana.iconUrl,name:I.solana.name,symbol:I.solana.tokenSymbol},pc={type:"SolanaNative",data:{amount:"0",balance:new AA(0),chain:ch,decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"VERIFIED"}},Cd={type:"SPL",data:{amount:"0",balance:new AA(0),chain:ch,decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",spamStatus:"VERIFIED"}},ph={type:"SuiNative",data:{chain:{id:I.sui.mainnetID,name:I.sui.name,symbol:I.sui.tokenSymbol,imageUrl:I.sui.iconUrl},walletAddress:"",decimals:18,amount:"0",logoUri:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/sui/info/logo.png",name:"Sui",symbol:"SUI",balance:new AA(0),key:"SuiNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},uh={type:"SuiCoin",data:{chain:{id:I.sui.mainnetID,name:I.sui.name,symbol:I.sui.tokenSymbol,imageUrl:I.sui.iconUrl},walletAddress:"",contractAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",decimals:6,amount:"0",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new AA(0),key:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",tokenAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},lh={type:"PolygonNative",data:{chain:{id:I.polygon.mainnetID,name:I.polygon.name,symbol:I.polygon.tokenSymbol,imageUrl:I.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:I.polygon.tokenSymbol,balance:new AA(0),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},dh={type:"BaseNative",data:{chain:{id:I.base.mainnetID,name:I.base.name,symbol:I.base.tokenSymbol,imageUrl:I.base.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Base",symbol:I.base.tokenSymbol,balance:new AA(0),key:"BaseNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},mh={type:"ArbitrumNative",data:{chain:{id:I.arbitrum.mainnetID,name:I.arbitrum.name,symbol:I.arbitrum.tokenSymbol,imageUrl:I.arbitrum.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new AA(0),key:"ArbitrumNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},kh={type:"ERC20",data:{amount:"0",balance:new AA(0),decimals:6,key:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",walletAddress:"",chain:{id:I.polygon.mainnetID,imageUrl:I.polygon.iconUrl,name:I.polygon.name,symbol:I.polygon.tokenSymbol},contractAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",spamStatus:"VERIFIED"}},Bh={type:"ERC20",data:{amount:"0",balance:new AA(0),decimals:6,key:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",walletAddress:"",chain:{id:I.base.mainnetID,imageUrl:I.base.iconUrl,name:I.base.name,symbol:I.base.tokenSymbol},contractAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",spamStatus:"VERIFIED"}},fh={type:"ERC20",data:{amount:"0",balance:new AA(0),decimals:6,key:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",walletAddress:"",chain:{id:I.arbitrum.mainnetID,imageUrl:I.arbitrum.iconUrl,name:I.arbitrum.name,symbol:I.arbitrum.tokenSymbol},contractAddress:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",spamStatus:"VERIFIED"}},Eh={type:"EthereumNative",data:{chain:{id:I.ethereum.mainnetID,name:I.ethereum.name,symbol:I.ethereum.tokenSymbol,imageUrl:I.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new AA(0),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},gh={type:"ERC20",data:{chain:{id:I.ethereum.mainnetID,name:I.ethereum.name,symbol:I.ethereum.tokenSymbol,imageUrl:I.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new AA(0),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},wa=Cd,_d=pc;var uc="https://help.phantom.com/hc/en-us/articles/5985106844435",yh="https://help.phantom.com/hc/en-us/articles/29763090277139";var ro=18;var Dn=500,kr={amount:new AA(0),amountUsd:null,pct:0};n();s();var Br={};var Fh={...Br,bridgeMinimumUsdAmounts:0,swapDefaultFee:new AA(15e-5*10**18),bridgeDefaultFee:new AA(.025*10**18),averageNetworkFee:new AA(15e-5*10**18),nativeFungible:mh,usdcFungible:fh};n();s();var hh={...Br,bridgeMinimumUsdAmounts:0,swapDefaultFee:new AA(15e-5*10**18),bridgeDefaultFee:new AA(.025*10**18),averageNetworkFee:new AA(15e-5*10**18),nativeFungible:dh,usdcFungible:Bh};n();s();var Sh={...Br,bridgeMinimumUsdAmounts:20,swapDefaultFee:new AA(2.5*10**16),bridgeDefaultFee:new AA(3.75*10**16),averageNetworkFee:new AA(0),nativeFungible:Eh,usdcFungible:gh};n();s();var wh={...Br,bridgeMinimumUsdAmounts:2,swapDefaultFee:new AA(6*10**16),bridgeDefaultFee:new AA(6*10**16),averageNetworkFee:new AA(.0015*10**18),nativeFungible:lh,usdcFungible:kh};n();s();var Ih={bridgeMinimumUsdAmounts:1,swapDefaultFee:new AA(3*10**6),bridgeDefaultFee:new AA(30*10**6),averageNetworkFee:new AA(15e3),nativeFungible:pc,usdcFungible:Cd};n();s();var $h={bridgeMinimumUsdAmounts:1,swapDefaultFee:new AA(50*10**6),bridgeDefaultFee:new AA(50*10**6),averageNetworkFee:new AA(50*10**6),nativeFungible:ph,usdcFungible:uh};var IfA=["solana","ethereum","polygon","base","sui","arbitrum"],bM=new zo({solana:Ih,ethereum:Sh,polygon:wh,base:hh,sui:$h,arbitrum:Fh}),ee=Xo(bM);function fr(){let e=LA.isFeatureEnabled("enable-sui-swapper");return(0,vh.useMemo)(()=>ee.supportedChains.filter(A=>A==="sui"?e:!0),[e])}var Er=()=>{let{data:e}=EA(),A=fr(),j=(0,Rd.useMemo)(()=>A.map(t=>I.getMainnetNetworkID(t)),[A]);return(0,Rd.useMemo)(()=>qM(e,j),[e,j])},qM=(e,A)=>[...new Set((e?.addresses??[]).map(j=>j.networkID).filter(j=>A.includes(j)))];var Dd=()=>{let e=Er();return(0,bh.useCallback)(A=>!!A&&e.includes(A),[e])};n();s();var Wh=v(x());n();s();var xh=v(x());n();s();n();s();var Nd=(r=>(r[r.Always=1/0]="Always",r[r.Short=X({days:1})]="Short",r[r.Medium=X({days:3})]="Medium",r[r.Long=X({days:7})]="Long",r))(Nd||{}),qh=(o=>(o[o.Immediate=0]="Immediate",o[o.Short=X({minutes:1})]="Short",o[o.Medium=X({minutes:2.5})]="Medium",o[o.Long=X({minutes:60})]="Long",o[o.Never=1/0]="Never",o))(qh||{}),Ia=(t=>(t[t.Short=X({seconds:20})]="Short",t[t.Medium=X({minutes:2.5})]="Medium",t[t.Long=X({minutes:5})]="Long",t))(Ia||{});var xM=l.object({swapper:l.number(),review:l.number().nullish().default(null)}),lc={swapper:Ia.Short,review:null},Kd=()=>{let e=LA.getMultivariateAssignment("swapper-poll-interval-json");if(!e)return lc;try{let A=JSON.parse(e);return xM.parse(A)}catch{return lc}};var qj=()=>{let e=$a(r=>r.intervalMs),A=$a(r=>r.state),j=$a(r=>r.setState),t=(0,xh.useCallback)(r=>{j("resumed",r??Gh())},[j]);return{state:A,pause:()=>j("paused"),resume:t,intervalMs:e}},Nn=e=>{$a.getState().setState("resumed",e??Gh())},dc=()=>{$a.getState().setState("paused")},Gh=()=>Kd().swapper,$a=TA(e=>({state:"resumed",intervalMs:lc.swapper,setState(A,j){e(j?{state:A,intervalMs:j}:{state:A})}}));n();s();n();s();n();s();n();s();var GM=e=>{let A=kA(),j=Y(),{data:t,isPending:r}=eA({gcTime:0,queryKey:["originIsBlocklisted",e],queryFn:async()=>{let{result:o}=await Jl(A,j,e);return o}});return e===void 0?{isLoading:!1,originIsBlocklisted:!1}:{isLoading:r,originIsBlocklisted:t??!1}};n();s();var Ld=v(x());n();s();var oo=class{#A;constructor(A){this.#A=A}onScannedMessageByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"message",status:"success"}}})};onFailedScannedMessageByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"message",status:"error"}}})};onScannedTransactionByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"transaction",status:"success"}}})};onFailedScannedTransactionByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"transaction",status:"error"}}})}};function TM(e,A){let{data:j}=EA(),{params:t,networkID:r}=e,[o,a]=(0,Ld.useState)(null),i=["scan-message",{url:e.url,message:t.message}],c=j?.addresses.find(k=>k.networkID===r)?.address,p=re(T.language)??"en",d=Y(),m=new oo(d),B=Ph(),f=eA({queryKey:i,queryFn:async()=>{try{let k=await Yl(p,await d.getDeviceId(),{...e,userAccount:c});return a(null),m.onScannedMessageByUser({networkId:r,warnings:k.warnings.map(g=>g.severity),shouldBlock:!!k.block,errorCode:k.error??""}),k}catch(k){a(k),m.onFailedScannedMessageByUser({networkId:r,url:e.url}),b.addBreadcrumb("simulation",`networkID: ${r}, url: ${e.url}, type: message`,"info"),b.captureError(f.error,"simulation")}},enabled:!!c&&!!e.url&&!!t.message&&!A?.disabled,refetchInterval:A?.disableRefetch?!1:B,staleTime:1e3*10,...Ul()});return{isFetched:f.isFetched,isFetching:f.isFetching,data:f.data,isLoading:f.isPending&&!A?.disabled,isError:f.isError||!!o,error:f.error||o}}function va(e,A){let{params:j}=e,[t,r]=(0,Ld.useState)(null),o=Y(),a=["scan-transaction",e.networkID,e.url,j?j.transactions??j.transaction:""],i=Ph(),c=!1;I.isEVMNetworkID(e.networkID)||I.isSolanaNetworkID(e.networkID)?c=!!j&&j.transactions.length>0&&!!e.userAccount:I.isBitcoinNetworkID(e.networkID)?c=!!j&&!!j.transaction&&!!j.userAddresses&&j.userAddresses.length>0:I.isSuiNetworkID(e.networkID)&&(c=!!j&&!!e.userAccount);let p=re(T.language)??"en",d=new oo(o),m=eA({queryKey:a,queryFn:async()=>{try{let B=await ea(p,await o.getDeviceId(),e);return d.onScannedTransactionByUser({networkId:e.networkID,warnings:B.warnings.map(f=>f.severity),shouldBlock:!!B.block,errorCode:B.error??""}),r(null),A?.onSettled?.(B,void 0),B}catch(B){d.onFailedScannedTransactionByUser({networkId:e.networkID,url:e.url}),b.addBreadcrumb("simulation",`networkID: ${e.networkID}, url: ${e.url}, type: transaction`,"info"),r(B),A?.onSettled?.(void 0,B),b.captureError(B,"simulation")}},enabled:c&&!A?.disabled,refetchInterval:A?.disableRefetch?!1:i,staleTime:1e3*10,...Ul()});return{isFetched:m.isFetched,isFetching:m.isFetching,data:m.data,isLoading:m.isPending&&!A?.disabled,isError:m.isError||!!t,error:m.error||t}}var Th=5e3;function Ph(){let e=LA.getMultivariateAssignment("transactions-simulation-interval-ms");if(!e)return Th;let A=parseInt(e,10);return Number.isNaN(A)?Th:A}var Ra=v(x());n();s();n();s();n();s();var mc=l.object({name:l.string(),message:l.string()}),Mh=l.object({chainId:Fj,name:l.string(),symbol:l.string(),decimals:l.number(),logoURI:l.optional(l.string()),includesBridge:l.optional(l.boolean())}),PM=Mh.extend({address:l.string(),resourceType:l.literal("address")}),OM=Mh.extend({slip44:l.string(),resourceType:l.literal("nativeToken")}),VEA=l.union([PM,OM]),Ch=l.object({id:l.string(),name:l.string(),logoUri:l.string()}),MM=l.union([l.enum(["network","phantom","gasless","ata","gasless_network","tips","priority_fee"]),l.string()]),CM=l.object({name:l.string(),percentage:l.number(),amount:l.number(),type:MM}),_M=l.object({name:l.string(),proportion:l.string()}),_h=l.object({sellAmount:l.string(),buyAmount:l.string(),rfqProps:l.optional(l.object({expireAt:l.number(),quoteId:l.string()})),analyticsContext:l.optional(l.string())}),Ud=_h.extend({priceImpact:l.number(),sources:l.array(_M),fees:l.array(CM),slippageTolerance:l.optional(l.number()),baseProvider:Ch}),RM=l.object({success:l.boolean(),error:l.string().optional()}),Qd=Ud.extend({transactionData:l.array(l.string()),gaslessSignature:l.optional(l.string()),gaslessSwapFeeResult:l.optional(RM)}),Hd=Ud.extend({allowanceTarget:l.string(),exchangeAddress:l.string(),gas:l.number(),value:l.string(),transactionData:l.string()}),Vd=Ud.extend({transactionData:l.array(l.string())}),Oh=l.object({name:l.string(),amount:l.string(),token:He,percentage:l.string(),included:l.boolean(),amountUSD:l.optional(l.string())}),DM=l.object({name:l.string(),key:l.string(),logoURI:l.string()}),Rh=l.object({name:l.string(),symbol:l.string()}),NM=l.object({transactionData:l.string(),buyToken:He,sellToken:He,nonIncludedNonGasFees:l.string(),feeCosts:l.array(Oh),chainId:Fj,tool:DM,value:l.optional(l.string()),allowanceTarget:l.optional(l.string()),approvalMetadata:l.optional(Rh),approvalExactAmount:l.optional(l.string()),exchangeAddress:l.optional(l.string()),gasCosts:l.optional(l.array(l.number())),includedFeeCosts:l.optional(l.array(Oh))}),Xd=_h.extend({baseProvider:Ch,executionDuration:l.number(),tags:l.array(l.string()),steps:l.array(NM)}),KM=l.union([Qd,Hd,Vd,Xd]),ba=l.enum(["solana","eip155","sui","xchain"]),qa=l.object({type:ba,taker:He,buyToken:He,sellToken:He,slippageTolerance:l.number(),simulationTolerance:l.optional(l.number()),gasBuffer:l.optional(l.number()),quotes:l.array(KM),tradeFee:l.optional(l.array(l.number())),estimateGasFee:l.optional(l.array(l.number())),includesAllProviders:l.optional(l.boolean())}),LM=l.enum(["swap-approval","swap","bridge-approval","bridge"]),UM=l.enum(["swap","bridge"]),QM=l.enum(["swap","bridge"]),zd=l.object({sellToken:He,buyToken:He,approvalMetadata:l.optional(Rh)}),HM=l.object({type:l.literal("solana"),transactions:l.array(l.string()),transactionTypes:l.array(UM),transactionPairs:l.optional(l.array(zd))}),VM=l.object({type:l.literal("evm"),transactions:l.array(Qo),transactionTypes:l.array(LM),transactionPairs:l.optional(l.array(zd))}),XM=l.object({type:l.literal("sui"),transactions:l.array(l.string()),transactionTypes:l.array(QM),transactionPairs:l.optional(l.array(zd))}),XEA=l.union([HM,VM,XM]);var Wd=l.object({name:l.string(),amount:l.string()}).strict(),kc=l.object({name:l.string(),feeUsd:l.number().nullish(),amount:l.string(),time:l.object({text:l.string(),isFast:l.boolean()}),logoURI:l.string()}),zEA=l.union([Wd,kc]);function FA(e){return Xd.safeParse(e).success}function zj(e){return Qd.safeParse(e).success}function Je(e){return Hd.safeParse(e).success}function xt(e){return Vd.safeParse(e).success}function Dh(e){return e?"gaslessSignature"in e:!1}function Wj(e){return zj(e)||Je(e)||xt(e)}n();s();var Ye="swapper";var Nh=[Ye,"quotes"],hA={quotesScope:()=>Nh,quotes:({sellTokenCaip19:e,buyTokenCaip19:A,taker:j,amountValue:t,amountType:r,slippageTolerance:o,priorityFee:a,tipAmount:i,takerDestination:c,enableAutoSlippage:p})=>[...Nh,{sellToken:e,buyToken:A,taker:j,takerDestination:c,amountValue:t,amountType:r,slippageTolerance:o,priorityFee:a,tipAmount:i,enableAutoSlippage:p}],transactions:e=>[Ye,"transactions",e],slippageTolerance:()=>[Ye,"slippageTolerance"],priorityFee:()=>[Ye,"priorityFee"],tipAmount:()=>[Ye,"tipAmount"],lastSubmittedPairs:()=>[Ye,"lastSubmittedPairsV2"],lastSelectedTokens:()=>[Ye,"lastSelectedTokens"],slippageSettings:()=>[Ye,"slippageSettings"],priorityFeeSettings:()=>[Ye,"priorityFeeSettings"],tipSettings:()=>[Ye,"tipSettings"],hasViewedAutoSlippageOptIn:()=>[Ye,"hasViewedAutoSlippageOptIn"],optimisticUpdates:()=>[Ye,"optimisticUpdates"],autoSlippageMigrationVersion:()=>[Ye,"autoSlippageMigrationVersion"]};var Lh=async({callerAddress:e,contractAddress:A,networkId:j,sellAmount:t,allowanceTarget:r,approvalExactAmount:o,exchangeAddress:a,value:i,transactionData:c,type:p})=>{let d=[],m=[];if(A&&(await UB({callerAddress:e,spender:r,networkId:j,contractAddress:A})).lt(o??t.toString())){let k=await QB({callerAddress:e,spender:r,networkId:j,contractAddress:A,exactAmount:o});d.push(k),m.push(`${p}-approval`)}let B=Qo.parse({type:"0x2",from:e,data:c,chainId:I.getEVMNetworkIDValue(j),to:a,...i==="0"?{}:{value:`0x${new AA(i).toString(16)}`}});return d.push(B),m.push(p),{transactions:d,transactionTypes:m}},xa=async({networkId:e,callerAddress:A,quote:j})=>{let{sellAmount:t,steps:r}=j,o=[],a=[],i=[];for(let c of r){let{allowanceTarget:p,exchangeAddress:d,value:m,transactionData:B,sellToken:f,buyToken:k,approvalMetadata:g}=c,E=f.resourceType==="address"?f.address:null,y=I.compareNetworkID(f.chainId,k.chainId)===0?"swap":"bridge";if(!p||!d||!B||!m)throw new Error("Missing bridge step data for EVM bridge quote.");let F=await Lh({callerAddress:A,contractAddress:E,networkId:e,sellAmount:t,allowanceTarget:p,approvalExactAmount:c.approvalExactAmount,exchangeAddress:d,value:m,transactionData:B,type:y});o.push(...F.transactions),a.push(...F.transactionTypes),i.push({sellToken:f,buyToken:k,approvalMetadata:g}),F.transactionTypes.length==2&&F.transactionTypes.find(S=>S.includes("approval"))&&i.push({sellToken:f,buyToken:k,approvalMetadata:g})}return{type:"evm",transactions:o,transactionTypes:a,transactionPairs:i}},Ga=async({quote:e,connection:A})=>{let j=[],t=[],r=[];for(let o of e.steps){let{transactionData:a,sellToken:i,buyToken:c}=o,p=I.compareNetworkID(i.chainId,c.chainId)===0?"swap":"bridge",d=await Uh(a,A);j.push(vu.serialize(d).transaction),t.push(p),r.push({sellToken:i,buyToken:c})}return{type:"solana",transactions:j,transactionTypes:t,transactionPairs:r}},Ta=async({networkId:e,callerAddress:A,quote:j,sellFungible:t})=>{let r=t.type==="ERC20"&&t?.data.tokenAddress?t.data.tokenAddress:null,{allowanceTarget:o,exchangeAddress:a,sellAmount:i,value:c}=j;return{type:"evm",...await Lh({callerAddress:A,contractAddress:r,networkId:e,sellAmount:i,allowanceTarget:o,exchangeAddress:a,value:c,transactionData:j.transactionData,type:"swap"})}},Pa=async({quote:e})=>{let A=[],j=[],t=[];for(let r of e.steps){let{transactionData:o,sellToken:a,buyToken:i}=r,c=I.compareNetworkID(a.chainId,i.chainId)===0?"swap":"bridge";A.push(o),j.push(c),t.push({sellToken:a,buyToken:i})}return{type:"sui",transactions:A,transactionTypes:j,transactionPairs:t}},Uh=async(e,A)=>{let j=aj(e,"bs58");return await KB(j,{connection:A,transactionType:"Swap"})},Oa=async({quote:e,connection:A})=>{let j=e.transactionData.map(a=>Uh(a,A)),r=(await Promise.all(j)).map(a=>vu.serialize(a).transaction);return{type:"solana",transactionTypes:r.map(()=>"swap"),transactions:r}},Ma=async({quote:e})=>({type:"sui",transactionTypes:Array(e.transactionData.length).fill("swap"),transactions:e.transactionData}),Jj=({callerAddress:e,sellFungible:A,quote:j})=>{let{connection:t}=Rj(),r=hA.transactions(j);return eA({queryKey:r,enabled:!!j&&!!A,gcTime:0,staleTime:0,refetchInterval:Ia.Short,async queryFn(){try{if(!j)throw new Error("Missing quote");if(!A)throw new Error("Missing sell token");let o=A.data.chain.id;if(Wj(j)){if(I.isEVMNetworkID(o)&&Je(j))return await Ta({networkId:o,callerAddress:e,quote:j,sellFungible:A});if(I.isSolanaNetworkID(o)&&zj(j))return Oa({quote:j,connection:t});if(I.isSuiNetworkID(o)&&xt(j))return Ma({quote:j});throw new Error(`Single network swap quote not supported for network ID ${o}`)}if(FA(j)){if(I.isEVMNetworkID(o))return await xa({networkId:o,callerAddress:e,quote:j});if(I.isSolanaNetworkID(o))return await Ga({quote:j,connection:t});if(I.isSuiNetworkID(o))return await Pa({quote:j});throw new Error(`Bridge quote not supported for network ID ${o}`)}throw new Error("Swap quote type not supported")}catch(o){throw o instanceof Error&&b.captureError(o,"swapper"),o}}})};n();s();n();s();n();s();n();s();n();s();n();s();n();s();var Kn=e=>e.steps.map(A=>A.tool);var je=e=>e?FA(e)?Kn(e):e?.sources??[]:[];n();s();function QA(e){let A=e.reduce((j,t)=>j.add(t.name),new Set);return Array.from(A).join(" + ")}var zM=10,WM=TA(e=>({transitions:[],addTransition:(A,j)=>e(t=>{let r=JM(j,A);return r?{transitions:[r,...t.transitions].slice(0,zM)}:t})}));function fc(e,A){WM.getState().addTransition(e,A)}function JM(e,A){switch(A.type){case"idle":return;case"fetchingQuote":return;case"quote":return{sell:Yj(A.response,A.sell,"sell"),buy:Yj(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:Ca(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:e.type,timestamp:Date.now()};case"simulationRequestErrored":return{sell:Yj(A.response,A.sell,"sell"),buy:Yj(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:Ca(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:e.type,error:A.error,quoteTransactionData:Bc(A.quote),timestamp:Date.now()};case"simulated":return;case"simulationFailed":return{sell:Yj(A.response,A.sell,"sell"),buy:Yj(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:Ca(A.quote),slippage:A.response.slippageTolerance,simulationError:A.simulationError,stateType:A.type,eventType:e.type,simulationWarning:A.scannedTransactionResult?.warnings,quoteTransactionData:Bc(A.quote),simulationHumanReadableError:A.scannedTransactionResult?.simulationError?.humanReadableError,simulationRequestId:A.scannedTransactionResult?.advancedDetails?.requestId,timestamp:Date.now()};case"transactionSubmissionFailed":return{sell:Yj(A.response,A.sell,"sell"),buy:Yj(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:Ca(A.quote),slippage:A.response.slippageTolerance,error:A.error,stateType:A.type,eventType:e.type,quoteTransactionData:Bc(A.quote),timestamp:Date.now()};case"transactionNotConfirmed":return{sell:Yj(A.response,A.sell,"sell"),buy:Yj(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:Ca(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:e.type,quoteTransactionData:Bc(A.quote),timestamp:Date.now(),error:A.error};default:return}}var Ca=e=>{let A=je(e);return QA(A)},Yj=(e,A,j)=>{switch(j){case"sell":return{caip19:e.sellToken,symbol:A.data.symbol??void 0};case"buy":return{caip19:e.buyToken,symbol:A.data.symbol??void 0}}},Bc=e=>{if(!FA(e))return e.transactionData};var Ec=class{onStateChange(A,j,t){fc(t,A)}};n();s();var gc=class{constructor(A){this.listeners=A}transition(A,j){try{let t=this.detectNextState(A,j);return this.listeners.forEach(r=>r.onStateChange(j,A,t)),t}catch{return A}}detectNextState(A,j){switch(j.type){case"quoteRequestStarted":return{type:"fetchingQuote",buy:j.buy,sell:j.sell,amount:j.amount};case"quoteResponseReceived":switch(A.type){case"fetchingQuote":case"quote":case"simulated":case"simulationRequestErrored":case"transactionSubmissionFailed":case"transactionNotConfirmed":let t=j.response.quotes[j.quoteIndex];if(!t)throw new Error("Quote index out of bounds");return{type:"quote",response:j.response,buy:A.buy,sell:A.sell,quote:t};default:throw new Error("Can't transition from this state")}case"quoteSelected":switch(A.type){case"quote":let t=A.response.quotes[j.quoteIndex];if(!t)throw new Error("Quote index out of bounds");return{type:"quote",quote:t,buy:A.buy,sell:A.sell,response:A.response};default:throw new Error("Can only transition to QuoteChanged from Quote")}case"simulationResponseReceived":switch(A.type){case"quote":return j.scannedTransactionResult.error?{type:"simulationFailed",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:j.scannedTransactionResult,simulationError:j.scannedTransactionResult.error}:{type:"simulated",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:j.scannedTransactionResult};default:throw new Error("Can only transition to Simulated from Simulating")}case"simulationRequestError":switch(A.type){case"quote":return{type:"simulationRequestErrored",buy:A.buy,sell:A.sell,quote:A.quote,response:A.response,error:j.error};default:throw new Error("Can only transition to SimulationRequestErrored from Simulating")}case"transactionSubmissionFailed":switch(A.type){case"simulated":case"simulationFailed":return{type:"transactionSubmissionFailed",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:A.scannedTransactionResult,error:j.error};default:throw new Error("Can only transition to SwapSubmitFailed from SubmittingSwap")}case"transactionConfirmationFailed":switch(A.type){case"simulated":return{type:"transactionNotConfirmed",quote:A.quote,buy:A.buy,sell:A.sell,txReceipt:j.txReceipt,response:A.response,scannedTransactionResult:A.scannedTransactionResult,error:j.error};default:throw new Error("Can only transition to TransactionNotConfirmed from ConfirmingTransaction")}}}};var YM=new gc(new Set([new Ec])),Qh=TA(e=>({state:{type:"idle"},transition:A=>{e(j=>{let t=j.state;return{state:YM.transition(t,A)}})}}));var Gt=()=>{let e=Qh(j=>j.state),A=Qh(j=>j.transition);return{state:e,transition:A}};n();s();var ZM="swap-priority-fee",AC=async(e,A,j)=>{let t=aj(e,"bs58");return await fi(t,j),{networkFeeEstimation:await Pi(A,[t.message])}};function Hh({swapTransactions:e,chainId:A,solanaConnection:j,enabled:t=!0}){return eA({queryKey:[ZM],queryFn:async()=>{if(!e)throw new Error("No swap transactions");if(e.type!=="solana")throw new Error("Trying to estimate network fee for non-solana txs");if(!A)throw new Error("Trying to execute swap with no chain id.");try{let r=e.transactions.map(i=>AC(i,A,j));return(await Promise.all(r)).map(i=>i.networkFeeEstimation.value)}catch{return[0]}},staleTime:0,enabled:t&&!!e&&e.transactions.length>0&&e.type==="solana"&&!!A})}n();s();var eC="swap-priority-fee";function Vh({swapTransactions:e,chainId:A,estimatedFee:j,enabled:t=!0}){return eA({queryKey:[eC,e],queryFn:async()=>{if(!e)throw new Error("No swap transactions");if(e.type!=="sui")throw new Error("Trying to estimate network fee for non-sui txs");if(!A)throw new Error("Trying to execute swap with no chain id.");if(j&&j.length===e.transactions.length)return j;try{return(await Promise.all(e.transactions.map(o=>Gi({networkID:A,transaction:Zo.deserializeTransactionString(o)})))).map(o=>o.gasBudget.toNumber())}catch{return[0]}},enabled:t&&!!e&&e.transactions.length>0&&e.type==="sui"&&!!A})}n();s();var jC=1.3,tC=e=>{switch(e){case aA.Ethereum.Mainnet:case aA.Ethereum.Sepolia:return 8e5;case aA.Polygon.Mainnet:case aA.Polygon.Amoy:return 5e5;case aA.Base.Mainnet:case aA.Base.Sepolia:return 5e5;case aA.Arbitrum.Mainnet:case aA.Arbitrum.Sepolia:return 5e5;default:return 0}},rC=e=>{switch(e){case aA.Ethereum.Mainnet:case aA.Ethereum.Sepolia:return 6e4;case aA.Polygon.Mainnet:case aA.Polygon.Amoy:return 6e4;case aA.Base.Mainnet:case aA.Base.Sepolia:return 6e4;case aA.Arbitrum.Mainnet:case aA.Arbitrum.Sepolia:return 6e4;default:return 0}},oC=(e,A)=>e.steps.flatMap(t=>t.gasCosts??[tC(A)]),nC=(e,A,j)=>{let t=Je(A)?[A.gas]:oC(A,j);return e?e.transactionTypes.map(r=>r.includes("approval")?rC(j):t.shift()??0):t},gr={estimateGas:({swapTransactions:e,evmGasEstimation:A,currentQuote:j,scanResult:t,networkID:r,includeGasBuffer:o,gasBuffer:a})=>{let{maxFeePerGas:i,maxPriorityFeePerGas:c}=A,p=nC(e,j,r),d=t?.advancedDetails?.gas;return t?.advancedDetails?.gasLimit>0&&(p=d),p.map(B=>({maxFeePerGas:i,maxPriorityFeePerGas:c,networkID:r,gasLimit:new P(B).multipliedBy(o?a??jC:1).integerValue(P.ROUND_CEIL)}))}};n();s();var Xh={estimateGas:({solanaNetworkFees:e,networkID:A})=>e.map(j=>({networkID:A,value:j}))};n();s();var zh={estimateGas:({suiGasBudget:e,networkID:A})=>e.map(j=>({networkID:A,gasBudget:new P(j)}))};var sC=2e4,Jd=({includeGasBuffer:e=!1}={})=>{let{currentQuote:A,quoteResponse:j}=iA(),t=w(h=>h.sellFungible),r=t?.data.chain.id??aA.Solana.Mainnet,{data:o}=_r(t?{address:t.data.walletAddress,networkID:t.data.chain.id}:void 0),a=o?.address??"",i=I.isEVMNetworkID(r),c=I.isSolanaNetworkID(r),p=I.isSuiNetworkID(r),d=w(h=>h.isFetchingQuote),{data:m,isFetching:B}=Jj({callerAddress:a,sellFungible:t,quote:A}),f={type:"transaction",userAccount:a,params:void 0,url:"https://phantom.com",networkID:r};m?.type==="evm"&&i&&(f.params={transactions:m.transactions});let{transition:k}=Gt(),g=(0,Ra.useCallback)((h,q)=>{q&&k({type:"simulationRequestError",error:q}),h&&k({type:"simulationResponseReceived",scannedTransactionResult:h})},[k]),{data:E,isFetching:y}=va(f,{disabled:c,onSettled:g}),{connection:F}=Rj(),{data:S}=nf({networkID:i?r:aA.Ethereum.Mainnet,transactionSpeed:"standard",gasLimit:new AA(1),refetchInterval:sC,enabled:i}),{data:$,isLoading:M}=Hh({swapTransactions:m,chainId:c?r:aA.Solana.Mainnet,solanaConnection:F,enabled:c}),{data:O,isFetching:G}=Vh({swapTransactions:m,chainId:p?r:aA.Sui.Mainnet,estimatedFee:j?.estimateGasFee,enabled:p}),z=(0,Ra.useMemo)(()=>{if(!(d||!A)){if(i&&(Je(A)||FA(A))&&S&&m)return gr.estimateGas({swapTransactions:m,evmGasEstimation:S,currentQuote:A,scanResult:E,includeGasBuffer:e,networkID:r,gasBuffer:j?.gasBuffer});if(c&&$!==void 0)return Xh.estimateGas({solanaNetworkFees:$,networkID:r});if(p&&O!==void 0)return zh.estimateGas({suiGasBudget:O,networkID:r})}},[d,A,S,r,$,E,e,j?.gasBuffer,i,c,p,O,m]),D=!1;return c?D=M:p?D=B||y||G:i&&(D=B||y),(0,Ra.useMemo)(()=>({gasEstimation:z,isFetching:D,isError:S===void 0}),[z,D,S])};function aC(){let e=w(o=>o.setGasEstimation),{state:A}=qj(),{gasEstimation:j}=Jd(),{gasEstimation:t,isFetching:r}=Jd({includeGasBuffer:!0});(0,Wh.useEffect)(()=>{if(A==="paused"){e({isFetching:!1});return}e({isFetching:r,estimate:j,estimateWithBuffer:t})},[A,e,j,t,r])}n();s();var eS=v(x());n();s();var iC="swap",Jh=e=>new YB(e,iC),no=Xt(Y,e=>Jh(e));n();s();n();s();var Yh=v(x());n();s();function ce({key:e,queryKey:A,defaultValue:j=null}){let t=kA();return eA({enabled:!0,queryKey:A,gcTime:Nd.Long,staleTime:1/0,async queryFn(){try{return await t.get(e)}catch(r){return r instanceof Error&&b.captureError(r,"swapper"),j}}})}function Be({key:e,queryKey:A}){let j=kA(),t=Z();return dA({async mutationFn(r){try{return await j.set(e,r)}catch(o){o instanceof Error&&b.captureError(o,"swapper");return}},async onMutate(r){await t.cancelQueries({queryKey:A});let o=t.getQueryData(A);return t.setQueryData(A,r),{previousValue:o}},onError(r,o,a){t.setQueryData(A,a?.previousValue)}})}var cC={type:"fixed"},pC={type:"auto"},zA=()=>{let{data:[e]}=fA(["enable-swapper-default-auto"]),{slippageSetting:A,isFetched:j,save:t}=uC();return{isFetched:j,selectedSetting:A??(e?pC:cC),setSlippageSetting:t}},uC=()=>{let{data:e,isFetched:A}=ce({key:"slippageSettings",queryKey:hA.slippageSettings()}),{mutateAsync:j}=Be({key:"slippageSettings",queryKey:hA.slippageSettings()}),t=(0,Yh.useCallback)(async r=>{await j(r)},[j]);return{isFetched:A,slippageSetting:e,save:t}};function yr(e,A,j){if(!j)return;if(A==="fixed")return j.slippageTolerance;let t=j.quotes[e];if(t)return FA(t)?j.slippageTolerance:Wj(t)?t.slippageTolerance:j.slippageTolerance}n();s();var Fc=(e,A,j)=>{if(j)return SA(e,A).times(P(j)).toNumber()},Zh=(e,A)=>A&&e?A>e?A:e:A??e;function AS({buyAssetUsdValue:e,buyToken:A,sellAssetUsdValue:j,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:a,priceImpact:i,provider:c,baseProvider:p,slippageTolerance:d,slippageType:m,sellSwapFilter:B,isRetry:f,analyticsContext:k}){if(A&&t){let g=Fc(r,A.data.decimals,e),E=Fc(o,t.data.decimals,j),y=Zh(g,E);return{networkId:t.data.chain.id,chainId:I.getChainID(t.data.chain.id),toNetworkId:A.data.chain.id,toChainId:I.getChainID(A.data.chain.id),isBridge:t.data.chain.id!==A.data.chain.id,marketName:`${t.data.symbol}/${A.data.symbol}`,tradeDirection:"sell",swapSource:c,baseProvider:p,priceImpact:i,fromAssetSymbol:t.data.symbol??"",fromAssetAddress:t.data.tokenAddress,fromAssetAmount:SA(o,t.data.decimals),fromAssetUsdPrice:j,fromAssetUsdVolume:E,toAssetSymbol:A.data.symbol??"",toAssetAddress:A.data.tokenAddress,toAssetAmount:SA(r,A.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:g,totalUsdVolume:y,feeUsd:a,slippageTolerance:d,slippageType:m,sellSwapFilter:B,isRetry:f,analyticsContext:k}}return null}function Da({buyAssetUsdValue:e,buyToken:A,sellAssetUsdValue:j,sellToken:t,quote:r,slippageTolerance:o,slippageType:a,sellSwapFilter:i,isRetry:c,analyticsContext:p,baseProvider:d}){if(A&&t){let{buyAmount:m,sellAmount:B}=r,f="priceImpact"in r?r.priceImpact:0,k="sources"in r?QA(r.sources):"",g=("fees"in r?r.fees.find(S=>S.type==="phantom")?.amount.toString():"")??"",E=Fc(m,A.data.decimals,e),y=Fc(B,t.data.decimals,j),F=Zh(E,y);return{chainId:t.data.chain.id??A.data.chain.id,swap:{marketName:`${t.data.symbol}/${A.data.symbol}`,tradeDirection:"sell",swapSource:k,priceImpact:f,fromAssetSymbol:t.data.symbol??"",fromAssetAddress:t.data.tokenAddress??"",fromAssetAmount:SA(B,t.data.decimals),fromAssetUsdPrice:j??0,fromAssetUsdVolume:y??0,toAssetSymbol:A.data.symbol??"",toAssetAddress:A.data.tokenAddress??"",toAssetAmount:SA(m,A.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:E,totalUsdVolume:F??0,feeUsd:Number(g),slippageTolerance:o,slippageType:a,sellSwapFilter:i,isRetry:c,analyticsContext:p,baseProvider:d}}}return null}n();s();var hc=v(x());var dj=()=>{let{data:e,isFetching:A}=ce({key:"lastSubmittedPairsV2",queryKey:hA.lastSubmittedPairs()}),j=(0,hc.useMemo)(()=>e??null,[e]),{mutateAsync:t}=Be({key:"lastSubmittedPairsV2",queryKey:hA.lastSubmittedPairs()}),r=(0,hc.useCallback)(async(o,a)=>{await t({sellFungible:o,buyFungible:a})},[t]);return{pairs:j,isLoading:A,storePairs:r}};var Sc=({goToConfirmation:e})=>{let A=w(E=>E.sellUsdValue),j=w(E=>E.buyUsdValue),{currentQuote:t,quoteResponse:r,selectedProviderIndex:o,selectedBaseProvider:a}=iA(),i=w(E=>E.sellFungible),c=w(E=>E.buyFungible),p=w(E=>E.swapFilter),{selectedSetting:d}=zA(),{storePairs:m}=dj(),B=Y(),f=no(),{pause:k}=qj();return(0,eS.useCallback)(()=>{if(!t||!i||!c)return;let E=yr(o,d.type,r);B.capture("swapperSwap");let y=Da({buyToken:c,sellToken:i,sellAssetUsdValue:A,buyAssetUsdValue:j,quote:t,slippageTolerance:E,slippageType:d.type,sellSwapFilter:p,baseProvider:a});y&&(b.addBreadcrumb("swapper","approved","info",zt(y.swap)),f.approved(y)),k(),e(),I.compareNetworkID(i.data.chain.id,c.data.chain.id)===0&&m(i,c)},[t,i,c,o,d.type,r,B,A,j,k,e,f,m,p,a])};n();s();var mj=v(x());n();s();n();s();function jS(e,A){if(!e||A.length===0)return null;let j=new Set(A),t=1/0,r=null;for(let o of e){let a=new P(o.data.amount??0).gt(0);if(!j.has(o.data.chain.id)||!a)continue;let i=A.indexOf(o.data.chain.id);if(i<t&&(t=i,r=o.data.chain.id,i===0))break}return r}var tS=(e,A,j)=>{let t=A.length?jS(e,A):null;return!t||!j.includes(t)?_d:ee.get(t).nativeFungible},rS=e=>e?ee.get(e).usdcFungible:wa,Na=(e,A)=>{let j=ut(A);return e.find(t=>{if(le(j)&&j===t.type)return!0;if(A.resourceType==="address"){let r=pf(t);return Mr(A)?Fu(A.address,r):A.address===r}})},wc=(e,A,j)=>{let t=Na(j,e);if(!t){if(le(ut(e)))t=ee.get(e.chainId).nativeFungible;else if(A&&A.chainId===e.chainId){let r=le(ut(A)),{usdcFungible:o,nativeFungible:a}=ee.get(A.chainId);t=r?o:a}}return t},Yd=(e,A=!1)=>{let{usdcFungible:j,nativeFungible:t}=ee.get(e.chainId),r=J(e),o=J(W(j));return le(ut(e))?j:Fu(r,o)?t:A?j:t};n();s();var oS=v(x());n();s();var Zd=v(x());n();s();function so(e,A){return e.data.key===A.data.key}function ao({enablePrices:e,enableSorting:A}){let{fungibles:j,isLoadingTokens:t,tokensError:r,refetch:o}=wj({enablePrices:e,enableSorting:A}),a=Dd(),i=w(d=>d.sellFungible),c=j.filter(d=>a(d.data.chain.id)&&d.type!=="CompressedSPL"),p=(0,Zd.useMemo)(()=>{if(i){let d=c.findIndex(B=>so(B,i)),m=c[d];m&&m.data.amount!==i.data.amount&&(c[d]=i)}return c.filter(d=>d.data.amount!=="0")},[c,i]);return(0,Zd.useMemo)(()=>({assets:p,isLoading:t,error:r,refetchTokens:o}),[p,t,r,o])}var nS=e=>{let A=Ts(),{pairs:j}=dj(),{assets:t}=ao({enablePrices:!1,enableSorting:!1});return(0,oS.useMemo)(()=>{let r=rS(e?.data.chain.id),i=((j?A.includes(j.buyFungible.data.chain.id):!1)?j?.buyFungible:void 0)??r;return i?Na(t,W(i))??i:void 0},[e,j,A,t])};n();s();var sS=v(x());var Ic=()=>{let e=Ts(),A=Er(),{pairs:j}=dj(),{assets:t}=ao({enablePrices:!1,enableSorting:!1}),{fungibles:r}=wj();return(0,sS.useMemo)(()=>{let o=tS(r,e,A),a=j?W(j?.sellFungible):void 0,i=j?W(j?.buyFungible):void 0;return((a?e.includes(a.chainId):!1)&&a&&i?wc(a,i,t):void 0)??o},[e,j,t,A,r])};var aS=e=>{if(e)try{return _e(e)}catch{return}},iS=e=>Rr(e)??[];function lC({paramsSellFungible:e,paramsSellAmount:A,paramsBuyFungible:j,navRef:t}){let{data:[r]}=fA(["enable-swapper-default-usdc"]),{isLoading:o}=dj(),a=(0,mj.useMemo)(()=>aS(e),[e]),i=(0,mj.useMemo)(()=>aS(j),[j]),c=A,[p,d]=(0,mj.useState)(!1),[m,B]=(0,mj.useState)(!1),{data:f}=EA(),{assets:k,isLoading:g}=ao({enablePrices:!1,enableSorting:!1}),{data:E,isPending:y}=Ao({query:i?.resourceType==="address"?i.address:i?.slip44??"",enableQuery:!!i,networkIds:[i?.chainId??I.solana.mainnetID],searchContext:"swapper"}),F=(0,mj.useMemo)(()=>{let L=[];return a&&L.push(...iS(a)),i&&L.push(...iS(i)),L},[a,i]),{fungibles:S,isLoadingTokens:$,isRefetchingTokens:M,tokensError:O}=wj({keys:F,enablePrices:!1,enableSorting:!1}),G=Ic(),z=w(L=>L.sellFungible),D=nS(z),h=w(L=>L.setBuyFungible),q=w(L=>L.setSellFungible),C=w(L=>L.setUiSellAmountCryptoInput),R=w(L=>L.setSellAmount),N=w(L=>L.setSwapFilter);return(0,mj.useEffect)(()=>{q(void 0),d(!1),h(void 0),B(!1)},[a,i,q,h,f?.identifier,o,t]),(0,mj.useEffect)(()=>{if(p)return;let L;if(a){if(g)return;L=wc(a,i,k)}else!a&&i?L=Yd(i):L=G;d(!0),q(L)},[a,i,G,k,q,g,p]),(0,mj.useEffect)(()=>{if(m)return;let L;if(i){if(y)return;if(L=Na(E??[],i),!L){let{usdcFungible:V,nativeFungible:U}=ee.get(i.chainId);L=le(ut(i))?U:V}}else!i&&a?L=Yd(a,r):L=D;if(!$&&!M&&!O&&S&&L){let V=J(W(L)),U=S.find(K=>J(W(K))===V);U&&(L=U)}B(!0),h(L)},[i,a,E,y,h,m,D,S,$,M,O,r]),(0,mj.useEffect)(()=>{c?(R(c),C(c)):(R(""),C("")),N(void 0)},[c,t,C,R,N]),{isLoading:(!!a||!!i)&&(!m||!p)||o}}n();s();var et=v(x()),kS=v(Un());n();s();var pS=({sellToken:e,buyToken:A,taker:j,takerDestination:t,amount:r,slippageTolerance:o,pollInterval:a,pollerState:i,enableAutoSlippage:c,priorityFee:p,tipAmount:d,getSwapQuotesStrategy:m})=>{let B=Y(),f=e?W(e):void 0,k=A?W(A):void 0,g=e?uf(e,r.value).toString():r.value,E=!!r.value&&!!A&&!!e&&!!j&&i==="resumed";E||m.stopFetching();let y=hA.quotes({sellTokenCaip19:f,buyTokenCaip19:k,taker:j,amountValue:g,amountType:r.type,takerDestination:t,slippageTolerance:o,enableAutoSlippage:c,priorityFee:p,tipAmount:d}),F=m.getFetchInterval(a);return eA({queryKey:y,enabled:E,gcTime:0,staleTime:0,refetchInterval:F,async queryFn({signal:S}){if(!r||!k||!f||!A||!e||!j)throw new Error("missing necessary args");let $=await m.fetch({sellTokenCaip19:f,buyTokenCaip19:k,taker:j,takerDestination:t,sellAmount:g,exactOut:r.type==="buy",slippageTolerance:o,signal:S,enableAutoSlippage:c,priorityFee:p,tipAmount:d,sell:e,buy:A,amount:{value:g,type:r.type},sellAmountUsd:P(g).times(e.data.price??0).toString()},y);return B.capture("swapperQuotesResult",{data:{numQuotes:$.quotes.length,sellToken:e,buyToken:A,fromNetworkId:f.chainId,toNetworkId:k.chainId}}),$}})};n();s();var uS=v(x());var lS=()=>{let e=w(r=>r.sellAmount),A=w(r=>r.sellFungible),j=w(r=>r.buyFungible),t=w(r=>r.setSelectedBaseProvider);(0,uS.useEffect)(()=>{t(We)},[e,A,j,t])};n();s();var XA=(e,A)=>!!e&&!!A&&I.compareNetworkID(e,A)!==0;n();s();var Qn=()=>{let e=w(m=>m.sellFungible),A=w(m=>m.buyFungible),j=w(m=>m.sellAmount),t=e?W(e):null,{data:r}=Ie({query:t?{data:t}:void 0}),o=e?.data.chain.id,a=A?.data.chain.id,i=r?.usd;if(!o||!a||!j||!i||I.compareNetworkID(o,a)===0)return!0;let c=oe(Number(j),i),p=ee.get(o).bridgeMinimumUsdAmounts,d=ee.get(a).bridgeMinimumUsdAmounts;return p<=c&&d<=c};n();s();var Zj=()=>ce({key:"priorityFee",queryKey:hA.priorityFee()}),dS=()=>Be({key:"priorityFee",queryKey:hA.priorityFee()});n();s();var Fr=()=>ce({key:"slippageTolerance",queryKey:hA.slippageTolerance()}),$c=()=>Be({key:"slippageTolerance",queryKey:hA.slippageTolerance()});n();s();var At=()=>ce({key:"tipAmount",queryKey:hA.tipAmount()}),mS=()=>Be({key:"tipAmount",queryKey:hA.tipAmount()});function mC({skipInitialBuyFungible:e,getSwapQuotesStrategy:A}){let j=w(K=>K.sellAmount),t=w(K=>K.amountType),o=w(K=>K.buyFungible)??(e?void 0:wa),a=w(K=>K.sellFungible),{data:i}=Zj(),{data:c}=At(),{state:p,intervalMs:d}=qj(),m=w(K=>K.resetQuote),B=w(K=>K.setHasNoRoutes),f=w(K=>K.setError),k=w(K=>K.setIsFetchingQuote),g=w(K=>K.setQuoteResponse),E=w(K=>K.setSelectedProviderIndex),{data:[y]}=fA(["enable-auto-slippage"]),{data:F}=Fr(),{mutateAsync:S}=$c(),{selectedSetting:$}=zA(),M=y&&$.type==="auto",O=Qn(),G=(0,kS.default)(O),z=(0,et.useMemo)(()=>{let K=t==="sell"?{amount:j,fungible:a}:{amount:j,fungible:o};return new AA(K.amount).isGreaterThan(0)&&K.fungible?Vk(K.amount,K.fungible.data.decimals).toString():(m(),"")},[t,o,m,j,a]),D=XA(a?.data?.chain.id,o?.data.chain.id),{data:h}=_r(a?.data?.chain.id),{data:q}=_r(o?.data.chain.id),C=(0,et.useMemo)(()=>{if(h)return{chainId:h.networkID,address:h.address,resourceType:"address"}},[h]),R=(0,et.useMemo)(()=>{if(D)return{chainId:q?.networkID,address:q?.address,resourceType:"address"}},[D,q?.address,q?.networkID]),{data:N,error:_,isLoading:L}=pS({sellToken:a,buyToken:o,taker:C,takerDestination:R,amount:{value:O?z:"",type:t},slippageTolerance:M?void 0:F??void 0,enableAutoSlippage:M,priorityFee:i??void 0,tipAmount:c??void 0,pollInterval:d,pollerState:p,getSwapQuotesStrategy:A}),V=(0,et.useCallback)(K=>{f(null),E(0),k(!1),B(!1),g(K);let IA=yr(0,$.type,K);IA&&F!==IA&&S(IA)},[f,B,k,g,E,S,F,$.type]),U=(0,et.useCallback)(K=>{m(),k(!1),B(!0),f(K)},[m,f,B,k]);(0,et.useEffect)(()=>{p!=="paused"&&(L?k(!0):N?V(N):_&&U(_))},[_,N,L,V,U,k,p,O]),(0,et.useEffect)(()=>{O?G===!1&&O&&(f(null),B(!1)):(f(new VA({key:"InsufficientSellAmount"})),B(!0))},[O,G,f,B]),lS()}n();s();var bc=v(x());n();s();n();s();var kj=e=>{let A=Math.floor(e/3600),j=Math.floor((e-A*3600)/60),t=e%60;if(A>0)return T.t("swapProviderEstimatedTimeHM",{hours:A,minutes:j});if(j>0){let r=t>0?j+1:j;return T.t("swapProviderEstimatedTimeM",{minutes:r})}return T.t("swapProviderEstimatedTimeS",{seconds:t})};n();s();var vc=e=>e.steps.reduce((A,j)=>A.plus(new AA(j.nonIncludedNonGasFees)),new AA(0)),Ka=e=>e.steps.flatMap(t=>t.feeCosts).reduce((t,r)=>t.plus(r.amountUSD??0),new AA(0));n();s();function Ze(e,A,j){if(A.lte(0))return null;let t=J({chainId:e,resourceType:"nativeToken",slip44:I.getSlip44(e)}),r=I.getTokenDecimals(e),o=I.getTokenSymbol(e);if(!t||!r||!o)return null;let a=A.div(qs(r)),i=j[t];return i?.usd?a.times(i.usd).toNumber():null}var kC=5*60,BS=e=>{if(FA(e))return QA(Kn(e));let{sources:A}=e;return QA(A)},fS=({quotes:e,buyTokenNetworkId:A,buyTokenDecimals:j,buyTokenSymbol:t})=>e.map(r=>{let{buyAmount:o}=r,a=Dj.get(A).formDisplayPrecision;return{name:BS(r),amount:`${Xe(SA(o,j),a)} ${t}`}}),ES=({quotes:e,buyTokenNetworkId:A,buyTokenDecimals:j,buyTokenSymbol:t,networkIDForFees:r,networkFee:o,priceMap:a})=>e.filter(FA).map(i=>{let{buyAmount:c,executionDuration:p,steps:d}=i,B=vc(i).plus(o),f=d.find(g=>!!g.tool.logoURI),k=Dj.get(A).formDisplayPrecision;return{name:BS(i),feeUsd:r&&a?Ze(r,B,a):null,amount:`${Xe(SA(c,j),k)} ${t}`,time:{text:kj(p),isFast:p<=kC},logoURI:f?.tool.logoURI??""}});n();s();var BC={aggregate(e){return e.reduce((A,j)=>({...A,gasLimit:A.gasLimit.plus(j.gasLimit)}),{networkID:I.ethereum.mainnetID,gasLimit:new AA(0),maxFeePerGas:e[0].maxFeePerGas,maxPriorityFeePerGas:e[0].maxPriorityFeePerGas})}},fC={aggregate(e){return e.reduce((A,j)=>({...A,value:A.value+j.value}),{networkID:I.solana.mainnetID,value:0})}},EC={aggregate(e){return e.reduce((A,j)=>({...A,gasBudget:A.gasBudget.plus(j.gasBudget)}),{networkID:I.sui.mainnetID,gasBudget:new AA(0)})}},La=e=>{if(!(!e||e.length===0)){if(qi(e[0]))return BC.aggregate(e);if(_B(e[0]))return fC.aggregate(e);if(RB(e[0]))return EC.aggregate(e)}};function gC({selectQuote:e}){let{quoteResponse:A,isFetchingQuote:j,quotes:t,selectedProviderIndex:r}=iA(),o=w(S=>S.setSelectedProviderIndex),a=w(S=>S.gasEstimation.estimateWithBuffer),i=w(S=>S.sellFungible),c=w(S=>S.buyFungible),p=i?.data.chain.id,{data:d}=Cs(p,La(a)),B=fr().map(S=>Re(S)),{data:f={}}=pt({query:{data:B}}),k=A?.type==="xchain",g=(0,bc.useMemo)(()=>c?k?ES({quotes:t,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol,networkIDForFees:p,networkFee:d?.gasEstimationAmount??new AA(0),priceMap:f}):fS({quotes:t,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol}):[],[c,k,t,p,d?.gasEstimationAmount,f]),E=Y(),{transition:y}=Gt(),F=(0,bc.useCallback)(S=>{let $=g[S];E.capture("swapperProviderSelected",{data:{provider:$.name}}),o(S),e(t,S),y({type:"quoteSelected",quoteIndex:S})},[o,g,E,y,t,e]);return{rows:g,selectedProviderIndex:r,isLoadingProviders:j,setSelectedProviderIndex:F}}n();s();var gS=v(x());var Pt=()=>{let{resume:e}=qj(),A=w(j=>j.resetSwapper);return(0,gS.useCallback)(()=>{e(),A()},[A,e])};n();s();var Io=v(x());n();s();var vA;(function(e){e.assertEqual=r=>r;function A(r){}e.assertIs=A;function j(r){throw new Error}e.assertNever=j,e.arrayToEnum=r=>{let o={};for(let a of r)o[a]=a;return o},e.getValidEnumValues=r=>{let o=e.objectKeys(r).filter(i=>typeof r[r[i]]!="number"),a={};for(let i of o)a[i]=r[i];return e.objectValues(a)},e.objectValues=r=>e.objectKeys(r).map(function(o){return r[o]}),e.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let o=[];for(let a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.push(a);return o},e.find=(r,o)=>{for(let a of r)if(o(a))return a},e.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function t(r,o=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}e.joinValues=t,e.jsonStringifyReplacer=(r,o)=>typeof o=="bigint"?o.toString():o})(vA||(vA={}));var jm;(function(e){e.mergeShapes=(A,j)=>({...A,...j})})(jm||(jm={}));var rA=vA.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mt=e=>{switch(typeof e){case"undefined":return rA.undefined;case"string":return rA.string;case"number":return isNaN(e)?rA.nan:rA.number;case"boolean":return rA.boolean;case"function":return rA.function;case"bigint":return rA.bigint;case"symbol":return rA.symbol;case"object":return Array.isArray(e)?rA.array:e===null?rA.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rA.promise:typeof Map<"u"&&e instanceof Map?rA.map:typeof Set<"u"&&e instanceof Set?rA.set:typeof Date<"u"&&e instanceof Date?rA.date:rA.object;default:return rA.unknown}},Q=vA.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yC=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Aj=class e extends Error{get errors(){return this.issues}constructor(A){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};let j=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,j):this.__proto__=j,this.name="ZodError",this.issues=A}format(A){let j=A||function(o){return o.message},t={_errors:[]},r=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)t._errors.push(j(a));else{let i=t,c=0;for(;c<a.path.length;){let p=a.path[c];c===a.path.length-1?(i[p]=i[p]||{_errors:[]},i[p]._errors.push(j(a))):i[p]=i[p]||{_errors:[]},i=i[p],c++}}};return r(this),t}static assert(A){if(!(A instanceof e))throw new Error(`Not a ZodError: ${A}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vA.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(A=j=>j.message){let j={},t=[];for(let r of this.issues)r.path.length>0?(j[r.path[0]]=j[r.path[0]]||[],j[r.path[0]].push(A(r))):t.push(A(r));return{formErrors:t,fieldErrors:j}}get formErrors(){return this.flatten()}};Aj.create=e=>new Aj(e);var Xn=(e,A)=>{let j;switch(e.code){case Q.invalid_type:e.received===rA.undefined?j="Required":j=`Expected ${e.expected}, received ${e.received}`;break;case Q.invalid_literal:j=`Invalid literal value, expected ${JSON.stringify(e.expected,vA.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:j=`Unrecognized key(s) in object: ${vA.joinValues(e.keys,", ")}`;break;case Q.invalid_union:j="Invalid input";break;case Q.invalid_union_discriminator:j=`Invalid discriminator value. Expected ${vA.joinValues(e.options)}`;break;case Q.invalid_enum_value:j=`Invalid enum value. Expected ${vA.joinValues(e.options)}, received '${e.received}'`;break;case Q.invalid_arguments:j="Invalid function arguments";break;case Q.invalid_return_type:j="Invalid function return type";break;case Q.invalid_date:j="Invalid date";break;case Q.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(j=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(j=`${j} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?j=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?j=`Invalid input: must end with "${e.validation.endsWith}"`:vA.assertNever(e.validation):e.validation!=="regex"?j=`Invalid ${e.validation}`:j="Invalid";break;case Q.too_small:e.type==="array"?j=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?j=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?j=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?j=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:j="Invalid input";break;case Q.too_big:e.type==="array"?j=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?j=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?j=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?j=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?j=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:j="Invalid input";break;case Q.custom:j="Invalid input";break;case Q.invalid_intersection_types:j="Intersection results could not be merged";break;case Q.not_multiple_of:j=`Number must be a multiple of ${e.multipleOf}`;break;case Q.not_finite:j="Number must be finite";break;default:j=A.defaultError,vA.assertNever(e)}return{message:j}},SS=Xn;function FC(e){SS=e}function qc(){return SS}var xc=e=>{let{data:A,path:j,errorMaps:t,issueData:r}=e,o=[...j,...r.path||[]],a={...r,path:o};if(r.message!==void 0)return{...r,path:o,message:r.message};let i="",c=t.filter(p=>!!p).slice().reverse();for(let p of c)i=p(a,{data:A,defaultError:i}).message;return{...r,path:o,message:i}},hC=[];function jA(e,A){let j=qc(),t=xc({issueData:A,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,j,j===Xn?void 0:Xn].filter(r=>!!r)});e.common.issues.push(t)}var ve=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(A,j){let t=[];for(let r of j){if(r.status==="aborted")return lA;r.status==="dirty"&&A.dirty(),t.push(r.value)}return{status:A.value,value:t}}static async mergeObjectAsync(A,j){let t=[];for(let r of j){let o=await r.key,a=await r.value;t.push({key:o,value:a})}return e.mergeObjectSync(A,t)}static mergeObjectSync(A,j){let t={};for(let r of j){let{key:o,value:a}=r;if(o.status==="aborted"||a.status==="aborted")return lA;o.status==="dirty"&&A.dirty(),a.status==="dirty"&&A.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||r.alwaysSet)&&(t[o.value]=a.value)}return{status:A.value,value:t}}},lA=Object.freeze({status:"aborted"}),Vn=e=>({status:"dirty",value:e}),Te=e=>({status:"valid",value:e}),tm=e=>e.status==="aborted",rm=e=>e.status==="dirty",io=e=>e.status==="valid",Ha=e=>typeof Promise<"u"&&e instanceof Promise;function Gc(e,A,j,t){if(j==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof A=="function"?e!==A||!t:!A.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return j==="m"?t:j==="a"?t.call(e):t?t.value:A.get(e)}function wS(e,A,j,t,r){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof A=="function"?e!==A||!r:!A.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?r.call(e,j):r?r.value=j:A.set(e,j),j}var sA;(function(e){e.errToObj=A=>typeof A=="string"?{message:A}:A||{},e.toString=A=>typeof A=="string"?A:A?.message})(sA||(sA={}));var Ua,Qa,fj=class{constructor(A,j,t,r){this._cachedPath=[],this.parent=A,this.data=j,this._path=t,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},yS=(e,A)=>{if(io(A))return{success:!0,data:A.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let j=new Aj(e.common.issues);return this._error=j,this._error}}};function gA(e){if(!e)return{};let{errorMap:A,invalid_type_error:j,required_error:t,description:r}=e;if(A&&(j||t))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return A?{errorMap:A,description:r}:{errorMap:(a,i)=>{var c,p;let{message:d}=e;return a.code==="invalid_enum_value"?{message:d??i.defaultError}:typeof i.data>"u"?{message:(c=d??t)!==null&&c!==void 0?c:i.defaultError}:a.code!=="invalid_type"?{message:i.defaultError}:{message:(p=d??j)!==null&&p!==void 0?p:i.defaultError}},description:r}}var yA=class{get description(){return this._def.description}_getType(A){return Mt(A.data)}_getOrReturnCtx(A,j){return j||{common:A.parent.common,data:A.data,parsedType:Mt(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}_processInputParams(A){return{status:new ve,ctx:{common:A.parent.common,data:A.data,parsedType:Mt(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}}_parseSync(A){let j=this._parse(A);if(Ha(j))throw new Error("Synchronous parse encountered promise.");return j}_parseAsync(A){let j=this._parse(A);return Promise.resolve(j)}parse(A,j){let t=this.safeParse(A,j);if(t.success)return t.data;throw t.error}safeParse(A,j){var t;let r={common:{issues:[],async:(t=j?.async)!==null&&t!==void 0?t:!1,contextualErrorMap:j?.errorMap},path:j?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:Mt(A)},o=this._parseSync({data:A,path:r.path,parent:r});return yS(r,o)}"~validate"(A){var j,t;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:Mt(A)};if(!this["~standard"].async)try{let o=this._parseSync({data:A,path:[],parent:r});return io(o)?{value:o.value}:{issues:r.common.issues}}catch(o){!((t=(j=o?.message)===null||j===void 0?void 0:j.toLowerCase())===null||t===void 0)&&t.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:A,path:[],parent:r}).then(o=>io(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(A,j){let t=await this.safeParseAsync(A,j);if(t.success)return t.data;throw t.error}async safeParseAsync(A,j){let t={common:{issues:[],contextualErrorMap:j?.errorMap,async:!0},path:j?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:Mt(A)},r=this._parse({data:A,path:t.path,parent:t}),o=await(Ha(r)?r:Promise.resolve(r));return yS(t,o)}refine(A,j){let t=r=>typeof j=="string"||typeof j>"u"?{message:j}:typeof j=="function"?j(r):j;return this._refinement((r,o)=>{let a=A(r),i=()=>o.addIssue({code:Q.custom,...t(r)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(A,j){return this._refinement((t,r)=>A(t)?!0:(r.addIssue(typeof j=="function"?j(t,r):j),!1))}_refinement(A){return new ej({schema:this,typeName:pA.ZodEffects,effect:{type:"refinement",refinement:A}})}superRefine(A){return this._refinement(A)}constructor(A){this.spa=this.safeParseAsync,this._def=A,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:j=>this["~validate"](j)}}optional(){return Bj.create(this,this._def)}nullable(){return tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _t.create(this)}promise(){return wr.create(this,this._def)}or(A){return Bo.create([this,A],this._def)}and(A){return fo.create(this,A,this._def)}transform(A){return new ej({...gA(this._def),schema:this,typeName:pA.ZodEffects,effect:{type:"transform",transform:A}})}default(A){let j=typeof A=="function"?A:()=>A;return new ho({...gA(this._def),innerType:this,defaultValue:j,typeName:pA.ZodDefault})}brand(){return new Va({typeName:pA.ZodBranded,type:this,...gA(this._def)})}catch(A){let j=typeof A=="function"?A:()=>A;return new So({...gA(this._def),innerType:this,catchValue:j,typeName:pA.ZodCatch})}describe(A){let j=this.constructor;return new j({...this._def,description:A})}pipe(A){return Xa.create(this,A)}readonly(){return wo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},SC=/^c[^\s-]{8,}$/i,wC=/^[0-9a-z]+$/,IC=/^[0-9A-HJKMNP-TV-Z]{26}$/i,$C=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vC=/^[a-z0-9_-]{21}$/i,bC=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qC=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xC=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",em,TC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,OC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CC=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,_C=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RC=new RegExp(`^${IS}$`);function $S(e){let A="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?A=`${A}\\.\\d{${e.precision}}`:e.precision==null&&(A=`${A}(\\.\\d+)?`),A}function DC(e){return new RegExp(`^${$S(e)}$`)}function vS(e){let A=`${IS}T${$S(e)}`,j=[];return j.push(e.local?"Z?":"Z"),e.offset&&j.push("([+-]\\d{2}:?\\d{2})"),A=`${A}(${j.join("|")})`,new RegExp(`^${A}$`)}function NC(e,A){return!!((A==="v4"||!A)&&TC.test(e)||(A==="v6"||!A)&&OC.test(e))}function KC(e,A){if(!bC.test(e))return!1;try{let[j]=e.split("."),t=j.replace(/-/g,"+").replace(/_/g,"/").padEnd(j.length+(4-j.length%4)%4,"="),r=JSON.parse(atob(t));return!(typeof r!="object"||r===null||!r.typ||!r.alg||A&&r.alg!==A)}catch{return!1}}function LC(e,A){return!!((A==="v4"||!A)&&PC.test(e)||(A==="v6"||!A)&&MC.test(e))}var hr=class e extends yA{_parse(A){if(this._def.coerce&&(A.data=String(A.data)),this._getType(A)!==rA.string){let o=this._getOrReturnCtx(A);return jA(o,{code:Q.invalid_type,expected:rA.string,received:o.parsedType}),lA}let t=new ve,r;for(let o of this._def.checks)if(o.kind==="min")A.data.length<o.value&&(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="max")A.data.length>o.value&&(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="length"){let a=A.data.length>o.value,i=A.data.length<o.value;(a||i)&&(r=this._getOrReturnCtx(A,r),a?jA(r,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&jA(r,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if(o.kind==="email")xC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"email",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="emoji")em||(em=new RegExp(GC,"u")),em.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"emoji",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="uuid")$C.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"uuid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="nanoid")vC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"nanoid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid")SC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"cuid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid2")wC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"cuid2",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="ulid")IC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"ulid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="url")try{new URL(A.data)}catch{r=this._getOrReturnCtx(A,r),jA(r,{validation:"url",code:Q.invalid_string,message:o.message}),t.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"regex",code:Q.invalid_string,message:o.message}),t.dirty())):o.kind==="trim"?A.data=A.data.trim():o.kind==="includes"?A.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty()):o.kind==="toLowerCase"?A.data=A.data.toLowerCase():o.kind==="toUpperCase"?A.data=A.data.toUpperCase():o.kind==="startsWith"?A.data.startsWith(o.value)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):o.kind==="endsWith"?A.data.endsWith(o.value)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):o.kind==="datetime"?vS(o).test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:"datetime",message:o.message}),t.dirty()):o.kind==="date"?RC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:"date",message:o.message}),t.dirty()):o.kind==="time"?DC(o).test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.invalid_string,validation:"time",message:o.message}),t.dirty()):o.kind==="duration"?qC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"duration",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="ip"?NC(A.data,o.version)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"ip",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="jwt"?KC(A.data,o.alg)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"jwt",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="cidr"?LC(A.data,o.version)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"cidr",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="base64"?CC.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"base64",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="base64url"?_C.test(A.data)||(r=this._getOrReturnCtx(A,r),jA(r,{validation:"base64url",code:Q.invalid_string,message:o.message}),t.dirty()):vA.assertNever(o);return{status:t.value,value:A.data}}_regex(A,j,t){return this.refinement(r=>A.test(r),{validation:j,code:Q.invalid_string,...sA.errToObj(t)})}_addCheck(A){return new e({...this._def,checks:[...this._def.checks,A]})}email(A){return this._addCheck({kind:"email",...sA.errToObj(A)})}url(A){return this._addCheck({kind:"url",...sA.errToObj(A)})}emoji(A){return this._addCheck({kind:"emoji",...sA.errToObj(A)})}uuid(A){return this._addCheck({kind:"uuid",...sA.errToObj(A)})}nanoid(A){return this._addCheck({kind:"nanoid",...sA.errToObj(A)})}cuid(A){return this._addCheck({kind:"cuid",...sA.errToObj(A)})}cuid2(A){return this._addCheck({kind:"cuid2",...sA.errToObj(A)})}ulid(A){return this._addCheck({kind:"ulid",...sA.errToObj(A)})}base64(A){return this._addCheck({kind:"base64",...sA.errToObj(A)})}base64url(A){return this._addCheck({kind:"base64url",...sA.errToObj(A)})}jwt(A){return this._addCheck({kind:"jwt",...sA.errToObj(A)})}ip(A){return this._addCheck({kind:"ip",...sA.errToObj(A)})}cidr(A){return this._addCheck({kind:"cidr",...sA.errToObj(A)})}datetime(A){var j,t;return typeof A=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:A}):this._addCheck({kind:"datetime",precision:typeof A?.precision>"u"?null:A?.precision,offset:(j=A?.offset)!==null&&j!==void 0?j:!1,local:(t=A?.local)!==null&&t!==void 0?t:!1,...sA.errToObj(A?.message)})}date(A){return this._addCheck({kind:"date",message:A})}time(A){return typeof A=="string"?this._addCheck({kind:"time",precision:null,message:A}):this._addCheck({kind:"time",precision:typeof A?.precision>"u"?null:A?.precision,...sA.errToObj(A?.message)})}duration(A){return this._addCheck({kind:"duration",...sA.errToObj(A)})}regex(A,j){return this._addCheck({kind:"regex",regex:A,...sA.errToObj(j)})}includes(A,j){return this._addCheck({kind:"includes",value:A,position:j?.position,...sA.errToObj(j?.message)})}startsWith(A,j){return this._addCheck({kind:"startsWith",value:A,...sA.errToObj(j)})}endsWith(A,j){return this._addCheck({kind:"endsWith",value:A,...sA.errToObj(j)})}min(A,j){return this._addCheck({kind:"min",value:A,...sA.errToObj(j)})}max(A,j){return this._addCheck({kind:"max",value:A,...sA.errToObj(j)})}length(A,j){return this._addCheck({kind:"length",value:A,...sA.errToObj(j)})}nonempty(A){return this.min(1,sA.errToObj(A))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(A=>A.kind==="datetime")}get isDate(){return!!this._def.checks.find(A=>A.kind==="date")}get isTime(){return!!this._def.checks.find(A=>A.kind==="time")}get isDuration(){return!!this._def.checks.find(A=>A.kind==="duration")}get isEmail(){return!!this._def.checks.find(A=>A.kind==="email")}get isURL(){return!!this._def.checks.find(A=>A.kind==="url")}get isEmoji(){return!!this._def.checks.find(A=>A.kind==="emoji")}get isUUID(){return!!this._def.checks.find(A=>A.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(A=>A.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(A=>A.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(A=>A.kind==="cuid2")}get isULID(){return!!this._def.checks.find(A=>A.kind==="ulid")}get isIP(){return!!this._def.checks.find(A=>A.kind==="ip")}get isCIDR(){return!!this._def.checks.find(A=>A.kind==="cidr")}get isBase64(){return!!this._def.checks.find(A=>A.kind==="base64")}get isBase64url(){return!!this._def.checks.find(A=>A.kind==="base64url")}get minLength(){let A=null;for(let j of this._def.checks)j.kind==="min"&&(A===null||j.value>A)&&(A=j.value);return A}get maxLength(){let A=null;for(let j of this._def.checks)j.kind==="max"&&(A===null||j.value<A)&&(A=j.value);return A}};hr.create=e=>{var A;return new hr({checks:[],typeName:pA.ZodString,coerce:(A=e?.coerce)!==null&&A!==void 0?A:!1,...gA(e)})};function UC(e,A){let j=(e.toString().split(".")[1]||"").length,t=(A.toString().split(".")[1]||"").length,r=j>t?j:t,o=parseInt(e.toFixed(r).replace(".","")),a=parseInt(A.toFixed(r).replace(".",""));return o%a/Math.pow(10,r)}var co=class e extends yA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(A){if(this._def.coerce&&(A.data=Number(A.data)),this._getType(A)!==rA.number){let o=this._getOrReturnCtx(A);return jA(o,{code:Q.invalid_type,expected:rA.number,received:o.parsedType}),lA}let t,r=new ve;for(let o of this._def.checks)o.kind==="int"?vA.isInteger(A.data)||(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):o.kind==="min"?(o.inclusive?A.data<o.value:A.data<=o.value)&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?A.data>o.value:A.data>=o.value)&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="multipleOf"?UC(A.data,o.value)!==0&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):o.kind==="finite"?Number.isFinite(A.data)||(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.not_finite,message:o.message}),r.dirty()):vA.assertNever(o);return{status:r.value,value:A.data}}gte(A,j){return this.setLimit("min",A,!0,sA.toString(j))}gt(A,j){return this.setLimit("min",A,!1,sA.toString(j))}lte(A,j){return this.setLimit("max",A,!0,sA.toString(j))}lt(A,j){return this.setLimit("max",A,!1,sA.toString(j))}setLimit(A,j,t,r){return new e({...this._def,checks:[...this._def.checks,{kind:A,value:j,inclusive:t,message:sA.toString(r)}]})}_addCheck(A){return new e({...this._def,checks:[...this._def.checks,A]})}int(A){return this._addCheck({kind:"int",message:sA.toString(A)})}positive(A){return this._addCheck({kind:"min",value:0,inclusive:!1,message:sA.toString(A)})}negative(A){return this._addCheck({kind:"max",value:0,inclusive:!1,message:sA.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:0,inclusive:!0,message:sA.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:0,inclusive:!0,message:sA.toString(A)})}multipleOf(A,j){return this._addCheck({kind:"multipleOf",value:A,message:sA.toString(j)})}finite(A){return this._addCheck({kind:"finite",message:sA.toString(A)})}safe(A){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:sA.toString(A)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:sA.toString(A)})}get minValue(){let A=null;for(let j of this._def.checks)j.kind==="min"&&(A===null||j.value>A)&&(A=j.value);return A}get maxValue(){let A=null;for(let j of this._def.checks)j.kind==="max"&&(A===null||j.value<A)&&(A=j.value);return A}get isInt(){return!!this._def.checks.find(A=>A.kind==="int"||A.kind==="multipleOf"&&vA.isInteger(A.value))}get isFinite(){let A=null,j=null;for(let t of this._def.checks){if(t.kind==="finite"||t.kind==="int"||t.kind==="multipleOf")return!0;t.kind==="min"?(j===null||t.value>j)&&(j=t.value):t.kind==="max"&&(A===null||t.value<A)&&(A=t.value)}return Number.isFinite(j)&&Number.isFinite(A)}};co.create=e=>new co({checks:[],typeName:pA.ZodNumber,coerce:e?.coerce||!1,...gA(e)});var po=class e extends yA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(A){if(this._def.coerce)try{A.data=BigInt(A.data)}catch{return this._getInvalidInput(A)}if(this._getType(A)!==rA.bigint)return this._getInvalidInput(A);let t,r=new ve;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?A.data<o.value:A.data<=o.value)&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?A.data>o.value:A.data>=o.value)&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="multipleOf"?A.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(A,t),jA(t,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):vA.assertNever(o);return{status:r.value,value:A.data}}_getInvalidInput(A){let j=this._getOrReturnCtx(A);return jA(j,{code:Q.invalid_type,expected:rA.bigint,received:j.parsedType}),lA}gte(A,j){return this.setLimit("min",A,!0,sA.toString(j))}gt(A,j){return this.setLimit("min",A,!1,sA.toString(j))}lte(A,j){return this.setLimit("max",A,!0,sA.toString(j))}lt(A,j){return this.setLimit("max",A,!1,sA.toString(j))}setLimit(A,j,t,r){return new e({...this._def,checks:[...this._def.checks,{kind:A,value:j,inclusive:t,message:sA.toString(r)}]})}_addCheck(A){return new e({...this._def,checks:[...this._def.checks,A]})}positive(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:sA.toString(A)})}negative(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:sA.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:sA.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:sA.toString(A)})}multipleOf(A,j){return this._addCheck({kind:"multipleOf",value:A,message:sA.toString(j)})}get minValue(){let A=null;for(let j of this._def.checks)j.kind==="min"&&(A===null||j.value>A)&&(A=j.value);return A}get maxValue(){let A=null;for(let j of this._def.checks)j.kind==="max"&&(A===null||j.value<A)&&(A=j.value);return A}};po.create=e=>{var A;return new po({checks:[],typeName:pA.ZodBigInt,coerce:(A=e?.coerce)!==null&&A!==void 0?A:!1,...gA(e)})};var uo=class extends yA{_parse(A){if(this._def.coerce&&(A.data=!!A.data),this._getType(A)!==rA.boolean){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.boolean,received:t.parsedType}),lA}return Te(A.data)}};uo.create=e=>new uo({typeName:pA.ZodBoolean,coerce:e?.coerce||!1,...gA(e)});var lo=class e extends yA{_parse(A){if(this._def.coerce&&(A.data=new Date(A.data)),this._getType(A)!==rA.date){let o=this._getOrReturnCtx(A);return jA(o,{code:Q.invalid_type,expected:rA.date,received:o.parsedType}),lA}if(isNaN(A.data.getTime())){let o=this._getOrReturnCtx(A);return jA(o,{code:Q.invalid_date}),lA}let t=new ve,r;for(let o of this._def.checks)o.kind==="min"?A.data.getTime()<o.value&&(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),t.dirty()):o.kind==="max"?A.data.getTime()>o.value&&(r=this._getOrReturnCtx(A,r),jA(r,{code:Q.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),t.dirty()):vA.assertNever(o);return{status:t.value,value:new Date(A.data.getTime())}}_addCheck(A){return new e({...this._def,checks:[...this._def.checks,A]})}min(A,j){return this._addCheck({kind:"min",value:A.getTime(),message:sA.toString(j)})}max(A,j){return this._addCheck({kind:"max",value:A.getTime(),message:sA.toString(j)})}get minDate(){let A=null;for(let j of this._def.checks)j.kind==="min"&&(A===null||j.value>A)&&(A=j.value);return A!=null?new Date(A):null}get maxDate(){let A=null;for(let j of this._def.checks)j.kind==="max"&&(A===null||j.value<A)&&(A=j.value);return A!=null?new Date(A):null}};lo.create=e=>new lo({checks:[],coerce:e?.coerce||!1,typeName:pA.ZodDate,...gA(e)});var zn=class extends yA{_parse(A){if(this._getType(A)!==rA.symbol){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.symbol,received:t.parsedType}),lA}return Te(A.data)}};zn.create=e=>new zn({typeName:pA.ZodSymbol,...gA(e)});var mo=class extends yA{_parse(A){if(this._getType(A)!==rA.undefined){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.undefined,received:t.parsedType}),lA}return Te(A.data)}};mo.create=e=>new mo({typeName:pA.ZodUndefined,...gA(e)});var ko=class extends yA{_parse(A){if(this._getType(A)!==rA.null){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.null,received:t.parsedType}),lA}return Te(A.data)}};ko.create=e=>new ko({typeName:pA.ZodNull,...gA(e)});var Sr=class extends yA{constructor(){super(...arguments),this._any=!0}_parse(A){return Te(A.data)}};Sr.create=e=>new Sr({typeName:pA.ZodAny,...gA(e)});var Ct=class extends yA{constructor(){super(...arguments),this._unknown=!0}_parse(A){return Te(A.data)}};Ct.create=e=>new Ct({typeName:pA.ZodUnknown,...gA(e)});var xj=class extends yA{_parse(A){let j=this._getOrReturnCtx(A);return jA(j,{code:Q.invalid_type,expected:rA.never,received:j.parsedType}),lA}};xj.create=e=>new xj({typeName:pA.ZodNever,...gA(e)});var Wn=class extends yA{_parse(A){if(this._getType(A)!==rA.undefined){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.void,received:t.parsedType}),lA}return Te(A.data)}};Wn.create=e=>new Wn({typeName:pA.ZodVoid,...gA(e)});var _t=class e extends yA{_parse(A){let{ctx:j,status:t}=this._processInputParams(A),r=this._def;if(j.parsedType!==rA.array)return jA(j,{code:Q.invalid_type,expected:rA.array,received:j.parsedType}),lA;if(r.exactLength!==null){let a=j.data.length>r.exactLength.value,i=j.data.length<r.exactLength.value;(a||i)&&(jA(j,{code:a?Q.too_big:Q.too_small,minimum:i?r.exactLength.value:void 0,maximum:a?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),t.dirty())}if(r.minLength!==null&&j.data.length<r.minLength.value&&(jA(j,{code:Q.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),t.dirty()),r.maxLength!==null&&j.data.length>r.maxLength.value&&(jA(j,{code:Q.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),t.dirty()),j.common.async)return Promise.all([...j.data].map((a,i)=>r.type._parseAsync(new fj(j,a,j.path,i)))).then(a=>ve.mergeArray(t,a));let o=[...j.data].map((a,i)=>r.type._parseSync(new fj(j,a,j.path,i)));return ve.mergeArray(t,o)}get element(){return this._def.type}min(A,j){return new e({...this._def,minLength:{value:A,message:sA.toString(j)}})}max(A,j){return new e({...this._def,maxLength:{value:A,message:sA.toString(j)}})}length(A,j){return new e({...this._def,exactLength:{value:A,message:sA.toString(j)}})}nonempty(A){return this.min(1,A)}};_t.create=(e,A)=>new _t({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pA.ZodArray,...gA(A)});function Hn(e){if(e instanceof Le){let A={};for(let j in e.shape){let t=e.shape[j];A[j]=Bj.create(Hn(t))}return new Le({...e._def,shape:()=>A})}else return e instanceof _t?new _t({...e._def,type:Hn(e.element)}):e instanceof Bj?Bj.create(Hn(e.unwrap())):e instanceof tt?tt.create(Hn(e.unwrap())):e instanceof jt?jt.create(e.items.map(A=>Hn(A))):e}var Le=class e extends yA{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let A=this._def.shape(),j=vA.objectKeys(A);return this._cached={shape:A,keys:j}}_parse(A){if(this._getType(A)!==rA.object){let p=this._getOrReturnCtx(A);return jA(p,{code:Q.invalid_type,expected:rA.object,received:p.parsedType}),lA}let{status:t,ctx:r}=this._processInputParams(A),{shape:o,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof xj&&this._def.unknownKeys==="strip"))for(let p in r.data)a.includes(p)||i.push(p);let c=[];for(let p of a){let d=o[p],m=r.data[p];c.push({key:{status:"valid",value:p},value:d._parse(new fj(r,m,r.path,p)),alwaysSet:p in r.data})}if(this._def.catchall instanceof xj){let p=this._def.unknownKeys;if(p==="passthrough")for(let d of i)c.push({key:{status:"valid",value:d},value:{status:"valid",value:r.data[d]}});else if(p==="strict")i.length>0&&(jA(r,{code:Q.unrecognized_keys,keys:i}),t.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let d of i){let m=r.data[d];c.push({key:{status:"valid",value:d},value:p._parse(new fj(r,m,r.path,d)),alwaysSet:d in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let p=[];for(let d of c){let m=await d.key,B=await d.value;p.push({key:m,value:B,alwaysSet:d.alwaysSet})}return p}).then(p=>ve.mergeObjectSync(t,p)):ve.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(A){return sA.errToObj,new e({...this._def,unknownKeys:"strict",...A!==void 0?{errorMap:(j,t)=>{var r,o,a,i;let c=(a=(o=(r=this._def).errorMap)===null||o===void 0?void 0:o.call(r,j,t).message)!==null&&a!==void 0?a:t.defaultError;return j.code==="unrecognized_keys"?{message:(i=sA.errToObj(A).message)!==null&&i!==void 0?i:c}:{message:c}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(A){return new e({...this._def,shape:()=>({...this._def.shape(),...A})})}merge(A){return new e({unknownKeys:A._def.unknownKeys,catchall:A._def.catchall,shape:()=>({...this._def.shape(),...A._def.shape()}),typeName:pA.ZodObject})}setKey(A,j){return this.augment({[A]:j})}catchall(A){return new e({...this._def,catchall:A})}pick(A){let j={};return vA.objectKeys(A).forEach(t=>{A[t]&&this.shape[t]&&(j[t]=this.shape[t])}),new e({...this._def,shape:()=>j})}omit(A){let j={};return vA.objectKeys(this.shape).forEach(t=>{A[t]||(j[t]=this.shape[t])}),new e({...this._def,shape:()=>j})}deepPartial(){return Hn(this)}partial(A){let j={};return vA.objectKeys(this.shape).forEach(t=>{let r=this.shape[t];A&&!A[t]?j[t]=r:j[t]=r.optional()}),new e({...this._def,shape:()=>j})}required(A){let j={};return vA.objectKeys(this.shape).forEach(t=>{if(A&&!A[t])j[t]=this.shape[t];else{let o=this.shape[t];for(;o instanceof Bj;)o=o._def.innerType;j[t]=o}}),new e({...this._def,shape:()=>j})}keyof(){return bS(vA.objectKeys(this.shape))}};Le.create=(e,A)=>new Le({shape:()=>e,unknownKeys:"strip",catchall:xj.create(),typeName:pA.ZodObject,...gA(A)});Le.strictCreate=(e,A)=>new Le({shape:()=>e,unknownKeys:"strict",catchall:xj.create(),typeName:pA.ZodObject,...gA(A)});Le.lazycreate=(e,A)=>new Le({shape:e,unknownKeys:"strip",catchall:xj.create(),typeName:pA.ZodObject,...gA(A)});var Bo=class extends yA{_parse(A){let{ctx:j}=this._processInputParams(A),t=this._def.options;function r(o){for(let i of o)if(i.result.status==="valid")return i.result;for(let i of o)if(i.result.status==="dirty")return j.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(i=>new Aj(i.ctx.common.issues));return jA(j,{code:Q.invalid_union,unionErrors:a}),lA}if(j.common.async)return Promise.all(t.map(async o=>{let a={...j,common:{...j.common,issues:[]},parent:null};return{result:await o._parseAsync({data:j.data,path:j.path,parent:a}),ctx:a}})).then(r);{let o,a=[];for(let c of t){let p={...j,common:{...j.common,issues:[]},parent:null},d=c._parseSync({data:j.data,path:j.path,parent:p});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:p}),p.common.issues.length&&a.push(p.common.issues)}if(o)return j.common.issues.push(...o.ctx.common.issues),o.result;let i=a.map(c=>new Aj(c));return jA(j,{code:Q.invalid_union,unionErrors:i}),lA}}get options(){return this._def.options}};Bo.create=(e,A)=>new Bo({options:e,typeName:pA.ZodUnion,...gA(A)});var Ot=e=>e instanceof Eo?Ot(e.schema):e instanceof ej?Ot(e.innerType()):e instanceof go?[e.value]:e instanceof yo?e.options:e instanceof Fo?vA.objectValues(e.enum):e instanceof ho?Ot(e._def.innerType):e instanceof mo?[void 0]:e instanceof ko?[null]:e instanceof Bj?[void 0,...Ot(e.unwrap())]:e instanceof tt?[null,...Ot(e.unwrap())]:e instanceof Va||e instanceof wo?Ot(e.unwrap()):e instanceof So?Ot(e._def.innerType):[],Tc=class e extends yA{_parse(A){let{ctx:j}=this._processInputParams(A);if(j.parsedType!==rA.object)return jA(j,{code:Q.invalid_type,expected:rA.object,received:j.parsedType}),lA;let t=this.discriminator,r=j.data[t],o=this.optionsMap.get(r);return o?j.common.async?o._parseAsync({data:j.data,path:j.path,parent:j}):o._parseSync({data:j.data,path:j.path,parent:j}):(jA(j,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),lA)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(A,j,t){let r=new Map;for(let o of j){let a=Ot(o.shape[A]);if(!a.length)throw new Error(`A discriminator value for key \`${A}\` could not be extracted from all schema options`);for(let i of a){if(r.has(i))throw new Error(`Discriminator property ${String(A)} has duplicate value ${String(i)}`);r.set(i,o)}}return new e({typeName:pA.ZodDiscriminatedUnion,discriminator:A,options:j,optionsMap:r,...gA(t)})}};function om(e,A){let j=Mt(e),t=Mt(A);if(e===A)return{valid:!0,data:e};if(j===rA.object&&t===rA.object){let r=vA.objectKeys(A),o=vA.objectKeys(e).filter(i=>r.indexOf(i)!==-1),a={...e,...A};for(let i of o){let c=om(e[i],A[i]);if(!c.valid)return{valid:!1};a[i]=c.data}return{valid:!0,data:a}}else if(j===rA.array&&t===rA.array){if(e.length!==A.length)return{valid:!1};let r=[];for(let o=0;o<e.length;o++){let a=e[o],i=A[o],c=om(a,i);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return j===rA.date&&t===rA.date&&+e==+A?{valid:!0,data:e}:{valid:!1}}var fo=class extends yA{_parse(A){let{status:j,ctx:t}=this._processInputParams(A),r=(o,a)=>{if(tm(o)||tm(a))return lA;let i=om(o.value,a.value);return i.valid?((rm(o)||rm(a))&&j.dirty(),{status:j.value,value:i.data}):(jA(t,{code:Q.invalid_intersection_types}),lA)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([o,a])=>r(o,a)):r(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};fo.create=(e,A,j)=>new fo({left:e,right:A,typeName:pA.ZodIntersection,...gA(j)});var jt=class e extends yA{_parse(A){let{status:j,ctx:t}=this._processInputParams(A);if(t.parsedType!==rA.array)return jA(t,{code:Q.invalid_type,expected:rA.array,received:t.parsedType}),lA;if(t.data.length<this._def.items.length)return jA(t,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),lA;!this._def.rest&&t.data.length>this._def.items.length&&(jA(t,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),j.dirty());let o=[...t.data].map((a,i)=>{let c=this._def.items[i]||this._def.rest;return c?c._parse(new fj(t,a,t.path,i)):null}).filter(a=>!!a);return t.common.async?Promise.all(o).then(a=>ve.mergeArray(j,a)):ve.mergeArray(j,o)}get items(){return this._def.items}rest(A){return new e({...this._def,rest:A})}};jt.create=(e,A)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jt({items:e,typeName:pA.ZodTuple,rest:null,...gA(A)})};var Pc=class e extends yA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:j,ctx:t}=this._processInputParams(A);if(t.parsedType!==rA.object)return jA(t,{code:Q.invalid_type,expected:rA.object,received:t.parsedType}),lA;let r=[],o=this._def.keyType,a=this._def.valueType;for(let i in t.data)r.push({key:o._parse(new fj(t,i,t.path,i)),value:a._parse(new fj(t,t.data[i],t.path,i)),alwaysSet:i in t.data});return t.common.async?ve.mergeObjectAsync(j,r):ve.mergeObjectSync(j,r)}get element(){return this._def.valueType}static create(A,j,t){return j instanceof yA?new e({keyType:A,valueType:j,typeName:pA.ZodRecord,...gA(t)}):new e({keyType:hr.create(),valueType:A,typeName:pA.ZodRecord,...gA(j)})}},Jn=class extends yA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:j,ctx:t}=this._processInputParams(A);if(t.parsedType!==rA.map)return jA(t,{code:Q.invalid_type,expected:rA.map,received:t.parsedType}),lA;let r=this._def.keyType,o=this._def.valueType,a=[...t.data.entries()].map(([i,c],p)=>({key:r._parse(new fj(t,i,t.path,[p,"key"])),value:o._parse(new fj(t,c,t.path,[p,"value"]))}));if(t.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let c of a){let p=await c.key,d=await c.value;if(p.status==="aborted"||d.status==="aborted")return lA;(p.status==="dirty"||d.status==="dirty")&&j.dirty(),i.set(p.value,d.value)}return{status:j.value,value:i}})}else{let i=new Map;for(let c of a){let p=c.key,d=c.value;if(p.status==="aborted"||d.status==="aborted")return lA;(p.status==="dirty"||d.status==="dirty")&&j.dirty(),i.set(p.value,d.value)}return{status:j.value,value:i}}}};Jn.create=(e,A,j)=>new Jn({valueType:A,keyType:e,typeName:pA.ZodMap,...gA(j)});var Yn=class e extends yA{_parse(A){let{status:j,ctx:t}=this._processInputParams(A);if(t.parsedType!==rA.set)return jA(t,{code:Q.invalid_type,expected:rA.set,received:t.parsedType}),lA;let r=this._def;r.minSize!==null&&t.data.size<r.minSize.value&&(jA(t,{code:Q.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),j.dirty()),r.maxSize!==null&&t.data.size>r.maxSize.value&&(jA(t,{code:Q.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),j.dirty());let o=this._def.valueType;function a(c){let p=new Set;for(let d of c){if(d.status==="aborted")return lA;d.status==="dirty"&&j.dirty(),p.add(d.value)}return{status:j.value,value:p}}let i=[...t.data.values()].map((c,p)=>o._parse(new fj(t,c,t.path,p)));return t.common.async?Promise.all(i).then(c=>a(c)):a(i)}min(A,j){return new e({...this._def,minSize:{value:A,message:sA.toString(j)}})}max(A,j){return new e({...this._def,maxSize:{value:A,message:sA.toString(j)}})}size(A,j){return this.min(A,j).max(A,j)}nonempty(A){return this.min(1,A)}};Yn.create=(e,A)=>new Yn({valueType:e,minSize:null,maxSize:null,typeName:pA.ZodSet,...gA(A)});var Oc=class e extends yA{constructor(){super(...arguments),this.validate=this.implement}_parse(A){let{ctx:j}=this._processInputParams(A);if(j.parsedType!==rA.function)return jA(j,{code:Q.invalid_type,expected:rA.function,received:j.parsedType}),lA;function t(i,c){return xc({data:i,path:j.path,errorMaps:[j.common.contextualErrorMap,j.schemaErrorMap,qc(),Xn].filter(p=>!!p),issueData:{code:Q.invalid_arguments,argumentsError:c}})}function r(i,c){return xc({data:i,path:j.path,errorMaps:[j.common.contextualErrorMap,j.schemaErrorMap,qc(),Xn].filter(p=>!!p),issueData:{code:Q.invalid_return_type,returnTypeError:c}})}let o={errorMap:j.common.contextualErrorMap},a=j.data;if(this._def.returns instanceof wr){let i=this;return Te(async function(...c){let p=new Aj([]),d=await i._def.args.parseAsync(c,o).catch(f=>{throw p.addIssue(t(c,f)),p}),m=await Reflect.apply(a,this,d);return await i._def.returns._def.type.parseAsync(m,o).catch(f=>{throw p.addIssue(r(m,f)),p})})}else{let i=this;return Te(function(...c){let p=i._def.args.safeParse(c,o);if(!p.success)throw new Aj([t(c,p.error)]);let d=Reflect.apply(a,this,p.data),m=i._def.returns.safeParse(d,o);if(!m.success)throw new Aj([r(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...A){return new e({...this._def,args:jt.create(A).rest(Ct.create())})}returns(A){return new e({...this._def,returns:A})}implement(A){return this.parse(A)}strictImplement(A){return this.parse(A)}static create(A,j,t){return new e({args:A||jt.create([]).rest(Ct.create()),returns:j||Ct.create(),typeName:pA.ZodFunction,...gA(t)})}},Eo=class extends yA{get schema(){return this._def.getter()}_parse(A){let{ctx:j}=this._processInputParams(A);return this._def.getter()._parse({data:j.data,path:j.path,parent:j})}};Eo.create=(e,A)=>new Eo({getter:e,typeName:pA.ZodLazy,...gA(A)});var go=class extends yA{_parse(A){if(A.data!==this._def.value){let j=this._getOrReturnCtx(A);return jA(j,{received:j.data,code:Q.invalid_literal,expected:this._def.value}),lA}return{status:"valid",value:A.data}}get value(){return this._def.value}};go.create=(e,A)=>new go({value:e,typeName:pA.ZodLiteral,...gA(A)});function bS(e,A){return new yo({values:e,typeName:pA.ZodEnum,...gA(A)})}var yo=class e extends yA{constructor(){super(...arguments),Ua.set(this,void 0)}_parse(A){if(typeof A.data!="string"){let j=this._getOrReturnCtx(A),t=this._def.values;return jA(j,{expected:vA.joinValues(t),received:j.parsedType,code:Q.invalid_type}),lA}if(Gc(this,Ua,"f")||wS(this,Ua,new Set(this._def.values),"f"),!Gc(this,Ua,"f").has(A.data)){let j=this._getOrReturnCtx(A),t=this._def.values;return jA(j,{received:j.data,code:Q.invalid_enum_value,options:t}),lA}return Te(A.data)}get options(){return this._def.values}get enum(){let A={};for(let j of this._def.values)A[j]=j;return A}get Values(){let A={};for(let j of this._def.values)A[j]=j;return A}get Enum(){let A={};for(let j of this._def.values)A[j]=j;return A}extract(A,j=this._def){return e.create(A,{...this._def,...j})}exclude(A,j=this._def){return e.create(this.options.filter(t=>!A.includes(t)),{...this._def,...j})}};Ua=new WeakMap;yo.create=bS;var Fo=class extends yA{constructor(){super(...arguments),Qa.set(this,void 0)}_parse(A){let j=vA.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(A);if(t.parsedType!==rA.string&&t.parsedType!==rA.number){let r=vA.objectValues(j);return jA(t,{expected:vA.joinValues(r),received:t.parsedType,code:Q.invalid_type}),lA}if(Gc(this,Qa,"f")||wS(this,Qa,new Set(vA.getValidEnumValues(this._def.values)),"f"),!Gc(this,Qa,"f").has(A.data)){let r=vA.objectValues(j);return jA(t,{received:t.data,code:Q.invalid_enum_value,options:r}),lA}return Te(A.data)}get enum(){return this._def.values}};Qa=new WeakMap;Fo.create=(e,A)=>new Fo({values:e,typeName:pA.ZodNativeEnum,...gA(A)});var wr=class extends yA{unwrap(){return this._def.type}_parse(A){let{ctx:j}=this._processInputParams(A);if(j.parsedType!==rA.promise&&j.common.async===!1)return jA(j,{code:Q.invalid_type,expected:rA.promise,received:j.parsedType}),lA;let t=j.parsedType===rA.promise?j.data:Promise.resolve(j.data);return Te(t.then(r=>this._def.type.parseAsync(r,{path:j.path,errorMap:j.common.contextualErrorMap})))}};wr.create=(e,A)=>new wr({type:e,typeName:pA.ZodPromise,...gA(A)});var ej=class extends yA{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pA.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(A){let{status:j,ctx:t}=this._processInputParams(A),r=this._def.effect||null,o={addIssue:a=>{jA(t,a),a.fatal?j.abort():j.dirty()},get path(){return t.path}};if(o.addIssue=o.addIssue.bind(o),r.type==="preprocess"){let a=r.transform(t.data,o);if(t.common.async)return Promise.resolve(a).then(async i=>{if(j.value==="aborted")return lA;let c=await this._def.schema._parseAsync({data:i,path:t.path,parent:t});return c.status==="aborted"?lA:c.status==="dirty"||j.value==="dirty"?Vn(c.value):c});{if(j.value==="aborted")return lA;let i=this._def.schema._parseSync({data:a,path:t.path,parent:t});return i.status==="aborted"?lA:i.status==="dirty"||j.value==="dirty"?Vn(i.value):i}}if(r.type==="refinement"){let a=i=>{let c=r.refinement(i,o);if(t.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(t.common.async===!1){let i=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return i.status==="aborted"?lA:(i.status==="dirty"&&j.dirty(),a(i.value),{status:j.value,value:i.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(i=>i.status==="aborted"?lA:(i.status==="dirty"&&j.dirty(),a(i.value).then(()=>({status:j.value,value:i.value}))))}if(r.type==="transform")if(t.common.async===!1){let a=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!io(a))return a;let i=r.transform(a.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:j.value,value:i}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(a=>io(a)?Promise.resolve(r.transform(a.value,o)).then(i=>({status:j.value,value:i})):a);vA.assertNever(r)}};ej.create=(e,A,j)=>new ej({schema:e,typeName:pA.ZodEffects,effect:A,...gA(j)});ej.createWithPreprocess=(e,A,j)=>new ej({schema:A,effect:{type:"preprocess",transform:e},typeName:pA.ZodEffects,...gA(j)});var Bj=class extends yA{_parse(A){return this._getType(A)===rA.undefined?Te(void 0):this._def.innerType._parse(A)}unwrap(){return this._def.innerType}};Bj.create=(e,A)=>new Bj({innerType:e,typeName:pA.ZodOptional,...gA(A)});var tt=class extends yA{_parse(A){return this._getType(A)===rA.null?Te(null):this._def.innerType._parse(A)}unwrap(){return this._def.innerType}};tt.create=(e,A)=>new tt({innerType:e,typeName:pA.ZodNullable,...gA(A)});var ho=class extends yA{_parse(A){let{ctx:j}=this._processInputParams(A),t=j.data;return j.parsedType===rA.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:j.path,parent:j})}removeDefault(){return this._def.innerType}};ho.create=(e,A)=>new ho({innerType:e,typeName:pA.ZodDefault,defaultValue:typeof A.default=="function"?A.default:()=>A.default,...gA(A)});var So=class extends yA{_parse(A){let{ctx:j}=this._processInputParams(A),t={...j,common:{...j.common,issues:[]}},r=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return Ha(r)?r.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Aj(t.common.issues)},input:t.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Aj(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};So.create=(e,A)=>new So({innerType:e,typeName:pA.ZodCatch,catchValue:typeof A.catch=="function"?A.catch:()=>A.catch,...gA(A)});var Zn=class extends yA{_parse(A){if(this._getType(A)!==rA.nan){let t=this._getOrReturnCtx(A);return jA(t,{code:Q.invalid_type,expected:rA.nan,received:t.parsedType}),lA}return{status:"valid",value:A.data}}};Zn.create=e=>new Zn({typeName:pA.ZodNaN,...gA(e)});var QC=Symbol("zod_brand"),Va=class extends yA{_parse(A){let{ctx:j}=this._processInputParams(A),t=j.data;return this._def.type._parse({data:t,path:j.path,parent:j})}unwrap(){return this._def.type}},Xa=class e extends yA{_parse(A){let{status:j,ctx:t}=this._processInputParams(A);if(t.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:t.data,path:t.path,parent:t});return o.status==="aborted"?lA:o.status==="dirty"?(j.dirty(),Vn(o.value)):this._def.out._parseAsync({data:o.value,path:t.path,parent:t})})();{let r=this._def.in._parseSync({data:t.data,path:t.path,parent:t});return r.status==="aborted"?lA:r.status==="dirty"?(j.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:t.path,parent:t})}}static create(A,j){return new e({in:A,out:j,typeName:pA.ZodPipeline})}},wo=class extends yA{_parse(A){let j=this._def.innerType._parse(A),t=r=>(io(r)&&(r.value=Object.freeze(r.value)),r);return Ha(j)?j.then(r=>t(r)):t(j)}unwrap(){return this._def.innerType}};wo.create=(e,A)=>new wo({innerType:e,typeName:pA.ZodReadonly,...gA(A)});function FS(e,A){let j=typeof e=="function"?e(A):typeof e=="string"?{message:e}:e;return typeof j=="string"?{message:j}:j}function qS(e,A={},j){return e?Sr.create().superRefine((t,r)=>{var o,a;let i=e(t);if(i instanceof Promise)return i.then(c=>{var p,d;if(!c){let m=FS(A,t),B=(d=(p=m.fatal)!==null&&p!==void 0?p:j)!==null&&d!==void 0?d:!0;r.addIssue({code:"custom",...m,fatal:B})}});if(!i){let c=FS(A,t),p=(a=(o=c.fatal)!==null&&o!==void 0?o:j)!==null&&a!==void 0?a:!0;r.addIssue({code:"custom",...c,fatal:p})}}):Sr.create()}var HC={object:Le.lazycreate},pA;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(pA||(pA={}));var VC=(e,A={message:`Input not instance of ${e.name}`})=>qS(j=>j instanceof e,A),xS=hr.create,GS=co.create,XC=Zn.create,zC=po.create,TS=uo.create,WC=lo.create,JC=zn.create,YC=mo.create,ZC=ko.create,A_=Sr.create,e_=Ct.create,j_=xj.create,t_=Wn.create,r_=_t.create,o_=Le.create,n_=Le.strictCreate,s_=Bo.create,a_=Tc.create,i_=fo.create,c_=jt.create,p_=Pc.create,u_=Jn.create,l_=Yn.create,d_=Oc.create,m_=Eo.create,k_=go.create,B_=yo.create,f_=Fo.create,E_=wr.create,hS=ej.create,g_=Bj.create,y_=tt.create,F_=ej.createWithPreprocess,h_=Xa.create,S_=()=>xS().optional(),w_=()=>GS().optional(),I_=()=>TS().optional(),$_={string:e=>hr.create({...e,coerce:!0}),number:e=>co.create({...e,coerce:!0}),boolean:e=>uo.create({...e,coerce:!0}),bigint:e=>po.create({...e,coerce:!0}),date:e=>lo.create({...e,coerce:!0})},v_=lA,be=Object.freeze({__proto__:null,defaultErrorMap:Xn,setErrorMap:FC,getErrorMap:qc,makeIssue:xc,EMPTY_PATH:hC,addIssueToContext:jA,ParseStatus:ve,INVALID:lA,DIRTY:Vn,OK:Te,isAborted:tm,isDirty:rm,isValid:io,isAsync:Ha,get util(){return vA},get objectUtil(){return jm},ZodParsedType:rA,getParsedType:Mt,ZodType:yA,datetimeRegex:vS,ZodString:hr,ZodNumber:co,ZodBigInt:po,ZodBoolean:uo,ZodDate:lo,ZodSymbol:zn,ZodUndefined:mo,ZodNull:ko,ZodAny:Sr,ZodUnknown:Ct,ZodNever:xj,ZodVoid:Wn,ZodArray:_t,ZodObject:Le,ZodUnion:Bo,ZodDiscriminatedUnion:Tc,ZodIntersection:fo,ZodTuple:jt,ZodRecord:Pc,ZodMap:Jn,ZodSet:Yn,ZodFunction:Oc,ZodLazy:Eo,ZodLiteral:go,ZodEnum:yo,ZodNativeEnum:Fo,ZodPromise:wr,ZodEffects:ej,ZodTransformer:ej,ZodOptional:Bj,ZodNullable:tt,ZodDefault:ho,ZodCatch:So,ZodNaN:Zn,BRAND:QC,ZodBranded:Va,ZodPipeline:Xa,ZodReadonly:wo,custom:qS,Schema:yA,ZodSchema:yA,late:HC,get ZodFirstPartyTypeKind(){return pA},coerce:$_,any:A_,array:r_,bigint:zC,boolean:TS,date:WC,discriminatedUnion:a_,effect:hS,enum:B_,function:d_,instanceof:VC,intersection:i_,lazy:m_,literal:k_,map:u_,nan:XC,nativeEnum:f_,never:j_,null:ZC,nullable:y_,number:GS,object:o_,oboolean:I_,onumber:w_,optional:g_,ostring:S_,pipeline:h_,preprocess:F_,promise:E_,record:p_,set:l_,strictObject:n_,string:xS,symbol:JC,transformer:hS,tuple:c_,undefined:YC,union:s_,unknown:e_,void:t_,NEVER:v_,ZodIssueCode:Q,quotelessJson:yC,ZodError:Aj});n();s();n();s();var b_=be.enum(["pumpFun","moonshot"]),q_=be.object({type:b_,programId:be.string(),name:be.string(),iconUrl:be.string()}),x_=be.object({programs:be.array(q_)}),PS=e=>{try{return x_.parse(e)}catch{return}};var G_={type:"pumpFun",programId:"6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P",name:"Pump.fun",iconUrl:"https://dhc7eusqrdwa0.cloudfront.net/assets/pumpfun.svg"},nm=[],Rt=()=>{try{let e=LA.getMultivariateAssignment("enabled-ugc-programs");if(!e)return LA.isFeatureEnabled("enabled-ugc-programs")?[G_]:nm;let A=JSON.parse(e);return PS(A)?.programs??nm}catch{return nm}};var T_=be.object({programId:be.string(),complete:be.boolean(),progress:be.string()}),P_=be.object({bondingCurves:be.record(be.string(),T_)});function O_(e){let A=OS(e),t=Z().getQueryData(A.queryKey),{data:r,isFetching:o,isError:a}=eA({...A,initialData:t,staleTime:0}),i=(0,Io.useMemo)(()=>Rt(),[]);return(0,Io.useMemo)(()=>{let c=t===r;if(o&&!c)return{type:"Loading"};if(a)return{type:"Error"};let p=P_.safeParse(r);if(!p.success)return{type:"Error"};let d=p.data.bondingCurves[e];if(!d)return{type:"NoBondingCurve"};let m=i.find(f=>f.programId===d.programId);if(!m)return{type:"NoBondingCurve"};let B=__(d.progress);return B?d.complete?{type:"Graduated",ugcProgram:m}:{type:c&&o?"BondingCurveRefreshing":"BondingCurve",progressPercentage:B,ugcProgram:m}:{type:"Error"}},[t,e,r,a,o,i])}var M_=e=>{let A=Z(),j=OS(e);return(0,Io.useCallback)(async()=>{await A.refetchQueries({queryKey:j.queryKey,type:"active"})},[A,j.queryKey])},OS=e=>{let A=(0,Io.useMemo)(()=>Rt(),[]),j=(0,Io.useMemo)(()=>A.map(r=>r.programId),[A]);return{queryKey:["bonding-curve",e,j],queryFn:()=>C_(e,j)}},C_=async(e,A)=>{let j=encodeURIComponent(e),t=encodeURIComponent(A.join(","));return(await H.api().get(`/ugc/v1/bonding-curve/${j}/${t}`)).data},__=e=>{let A=Number(e);if(!isNaN(A))return Math.round(A*100)};n();s();var R_="https://help.phantom.com/hc/en-us/articles/33745013398675";n();s();n();s();var Cc=v(x());n();s();var CS=v(x());n();s();var MS=v(x());var Mc=()=>{let e=Z();return{cancelQuotes:(0,MS.useCallback)(async()=>{await e.cancelQueries({queryKey:hA.quotesScope()}),await Lk(1)},[e])}};n();s();function $o(e){return{chain:"solana",type:"fungible",address:e.type==="SPL"?e.data.mintAddress:void 0,symbol:e.data.symbol??""}}function sm(){let e=Y(),A=w(r=>r.setBuyFungible),j=w(r=>r.buyFungible),{cancelQuotes:t}=Mc();return(0,CS.useCallback)(async r=>{if(j&&so(r,j))return;await t();let o=$o(r);e.capture("swapperUpdateToAsset",{data:o}),A(r)},[e,j,t,A])}n();s();var _S=e=>{am.getState().setAsset(e)},am=TA(e=>({asset:void 0,setAsset(A){e({asset:A})}}));var D_=({onClose:e})=>{let A=sm(),j=am(o=>o.asset),t=(0,Cc.useMemo)(()=>Rt().find(a=>a.programId===j?.data?.ugcTokenMeta?.programId),[j]),r=(0,Cc.useCallback)(async()=>{j&&(await A(j),e())},[A,j,e]);return{asset:j,program:t,handleConfirmPress:r}};n();s();n();s();var im=()=>{let e=Z(),A=w();return{clearQuotes:async()=>{A.resetQuote(),await e.invalidateQueries({queryKey:hA.quotesScope()})}}};n();s();n();s();var N_=({networkID:e,unsignedTransaction:A,pendingActivityRows:j,accountIdentifier:t,accountSigner:r,storage:o,includeCallPayload:a})=>({accountSigner:r,accountIdentifier:t,networkID:e,unsignedTransaction:A,...a&&{callPayload:{from:A.from,to:A.to,data:A.data,value:A.value}},pendingTransactionInput:{ownerAddress:A.from,networkID:e,data:{nonce:"",unsignedTransaction:A,hash:""},type:"swap",display:{summary:j}},storage:o}),Rc=async({transactions:e,transactionTypes:A,networkID:j,gasEstimation:t,pendingApprovalActivityRows:r,pendingSwapActivityRows:o,accountIdentifier:a,accountSigner:i,storage:c})=>{let p=!0,d="";for(let[m,B]of e.entries()){let f=t[m],k={gas:`0x${f.gasLimit.toString(16)}`,maxFeePerGas:`0x${f.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${f.maxPriorityFeePerGas.toString(16)}`},g=Qo.parse({...B,...k}),y=A[m].includes("approval")?r:o,F=N_({networkID:j,accountIdentifier:a,pendingActivityRows:y.shift(),accountSigner:i,storage:c,unsignedTransaction:g,includeCallPayload:p});try{d="",d=await HB(F)}catch(S){return{signature:d,error:S instanceof Error?S:new Error("Failed to process EVM swap transaction")}}p&&(p=!1)}return{signature:d}};n();s();var K_=({networkID:e,transaction:A,feePayer:j,connection:t,pendingActivityRows:r,accountIdentifier:o,accountSigner:a,storage:i})=>({accountSigner:a,accountIdentifier:o,transaction:A,feePayer:j,connection:t,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:j.toBase58(),networkID:e,data:{signature:""},type:"swap",display:{summary:r}},storage:i}),Dc=async({callerAddress:e,connection:A,networkID:j,transactions:t,pendingSwapActivityRows:r,accountIdentifier:o,accountSigner:a,storage:i})=>{let c=new JA.PublicKey(e),p="";for(let[d,m]of t.entries()){let B=aj(m,"bs58"),f=K_({networkID:j,transaction:B,feePayer:c,connection:A,pendingActivityRows:r[d],accountIdentifier:o,accountSigner:a,storage:i});try{p="",p=await XB(f),d!==t.length-1&&await Oi({connection:A,signature:p})}catch(k){return{signature:p??"",error:k instanceof Error?k:new Error("Failed to process solana swap transaction")}}}return{signature:p??""}};n();s();var L_=({networkID:e,transaction:A,feePayer:j,pendingActivityRows:t,accountIdentifier:r,accountSigner:o,storage:a})=>({accountSigner:o,accountIdentifier:r,transaction:A,pendingTransactionInput:{ownerAddress:j,networkID:e,data:{digest:""},type:"swap",display:{summary:t}},storage:a}),Nc=async({callerAddress:e,networkID:A,transactions:j,pendingSwapActivityRows:t,accountIdentifier:r,accountSigner:o,storage:a})=>{let i="";for(let[c,p]of j.entries()){let d=L_({networkID:A,transaction:Zo.deserializeTransactionString(p),feePayer:e,pendingActivityRows:t[c],accountIdentifier:r,accountSigner:o,storage:a});try{i=(await VB(d)).digest,c!==j.length-1&&await Ti(A,i)}catch(m){return{signature:i??"",error:m instanceof Error?m:new Error("Failed to process sui swap transaction")}}}return{signature:i??""}};var cm=({accountIdentifier:e,networkID:A})=>{let j=kA(),t=Wo();return dA({mutationFn:async o=>{let{swapTransactions:a,type:i}=o;if(a.type==="evm"&&i==="eip155"){let{gasEstimation:c,pendingApprovalActivityRows:p,pendingSwapActivityRows:d}=o,{signature:m,error:B}=await b.startSpan("Process EVM Swap Txns",()=>Rc({transactions:a.transactions,transactionTypes:a.transactionTypes,networkID:A,gasEstimation:c,pendingSwapActivityRows:d,pendingApprovalActivityRows:p,accountIdentifier:e,accountSigner:t,storage:j}));return{networkID:A,chainType:i,id:m,error:B}}else if(a.type==="solana"&&i==="solana"){let{callerAddress:c,connection:p,pendingSwapActivityRows:d}=o;if(!p)throw new Error("missing connection");let{signature:m,error:B}=await b.startSpan("Process Solana Swap Txns",()=>Dc({callerAddress:c,connection:p,networkID:A,transactions:a.transactions,pendingSwapActivityRows:d,accountIdentifier:e,accountSigner:t,storage:j}));return{networkID:A,chainType:i,id:m,error:B}}else if(a.type==="sui"&&i==="sui"){let{callerAddress:c,pendingSwapActivityRows:p}=o,{signature:d,error:m}=await b.startSpan("Process Sui Swap Txns",()=>Nc({callerAddress:c,networkID:A,transactions:a.transactions,pendingSwapActivityRows:p,accountIdentifier:e,accountSigner:t,storage:j}));return{networkID:A,chainType:i,id:d,error:m}}throw new Error("unsupported")}})};n();s();n();s();var As=v(x());n();s();var RS=v(x());function DS(){let e=w(r=>r.setUiBuyAmountCryptoInput),A=w(r=>r.setUiBuyAmountLocalFiatInput),j=w(r=>r.primaryCurrency),{fromUsd:t}=GA();return(0,RS.useCallback)(({amount:r,decimals:o,usdPrice:a})=>{if(j==="crypto")if(r===void 0)e("");else{let i=SA(r,o).toString(),c=Me(i);e(c)}else if(j==="fiat"&&a)if(r===void 0)A("");else{let i=SA(r,o).toString(),c=oe(Number(i),a),p=t(c);A(p.toString())}},[t,j,A,e])}n();s();var NS=v(x());function KS(){let e=w(i=>i.setAmountType),A=w(i=>i.setSellAmount),j=w(i=>i.sellAmount),t=w(i=>i.setUiBuyAmountCryptoInput),r=Y(),[o,a]=Ho(j,A,Dn);return(0,NS.useCallback)(async({fungibleValue:i,shouldUpdateQuote:c,decimals:p})=>{let d=Qe(i.substring(0,ro)),m=Me(d,p);e("buy"),t(m),await r.capture("swapperChangeReceiveCryptoAmount",{data:{amount:m}}),c&&a(m)},[r,e,t,a])}n();s();var LS=v(x());function Lc(e){return(0,LS.useMemo)(()=>e===void 0?void 0:W(e),[e])}n();s();var vo=v(x());var US=()=>{let e=Y(),A=w(F=>F.primaryCurrency),j=w(F=>F.sellFungible),t=w(F=>F.buyFungible),r=w(F=>F.uiSellAmountLocalFiatInput),o=w(F=>F.uiBuyAmountLocalFiatInput),a=w(F=>F.amountType),i=w(F=>F.setUiSellAmountCryptoInput),c=w(F=>F.setUiBuyAmountCryptoInput),p=w(F=>F.switchTokensForBuy),d=w(F=>F.switchTokensForSell),{data:m}=Ie({query:j?{data:W(j)}:void 0}),{data:B}=Ie({query:t?{data:W(t)}:void 0}),{toUsd:f}=GA(),k=(0,vo.useMemo)(()=>({localFiatValue:r,decimals:j?.data.decimals??0,usdPrice:m?.usd}),[j?.data.decimals,r,m?.usd]),g=(0,vo.useMemo)(()=>({localFiatValue:o,decimals:t?.data.decimals??0,usdPrice:B?.usd}),[t?.data.decimals,B?.usd,o]),E=(0,vo.useCallback)(({localFiatValue:F,decimals:S,usdPrice:$})=>{let M=F?"":Xe(0,S);if($&&F){let O=f(F);M=Sj(Number(O),$,S).toString()}return M},[f]),y=(0,vo.useCallback)(()=>{e.capture("swapperSwitchTokensClicked",{data:{sell:j?J(W(j)):"",buy:t?J(W(t)):""}})},[e,j,t]);return(0,vo.useCallback)(()=>{if(A==="fiat"){let F=E(k);i(F);let S=E(g);c(S)}a==="sell"?d():p(),y()},[a,g,A,k,c,i,p,d,E,y])};var Q_={chainId:aA.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"};function pm(){let e=w(M=>M.buyFungible),A=Lc(e),j=w(M=>M.sellFungible),t=w(M=>M.primaryCurrency),r=w(M=>M.uiBuyAmountCryptoInput),o=w(M=>M.uiBuyAmountLocalFiatInput),a=w(M=>M.amountType),i=w(M=>M.setAmountType),c=w(M=>M.setSellAmount),p=w(M=>M.uiSellAmountCryptoInput),d=w(M=>M.uiSellAmountLocalFiatInput),m=e?.data.decimals??0,{currentQuote:B}=iA(),f=e?W(e):Q_,{data:k}=Ie({query:{data:f}}),g=US(),E=DS(),y=KS(),{toUsd:F}=GA();(0,As.useEffect)(()=>{a==="sell"&&A&&E({amount:B?.buyAmount,decimals:m,usdPrice:k?.usd})},[a,A,B?.buyAmount,m,k?.usd,E]),(0,As.useEffect)(()=>{if(XA(j?.data.chain.id,e?.data.chain.id)&&a==="buy"){if(i("sell"),t==="crypto")c(p);else if(k?.usd){let M=F(d),O=Sj(M,k.usd,m);c(O.toString())}}},[a,e,m,k,t,j,i,c,F,p,d]);let S=(0,As.useCallback)(M=>{y({fungibleValue:M,decimals:m,shouldUpdateQuote:!0})},[m,y]),$=(0,As.useCallback)(()=>{g()},[g]);return{cryptoAmountInputValue:r,handleCryptoAmountInputChange:S,localFiatAmountInputValue:o,handleSwitchTokensClick:$}}n();s();var Tj=v(x());n();s();function bo(e){return new P(e??0).multipliedBy(10**Zk.tokenDecimals)}n();s();var H_=3,V_=new AA(356190),X_=e=>ee.get(e).averageNetworkFee.times(H_);function za({sellFungible:e,totalFees:A,transactionSpeedsToUnitCost:j,minRequiredBalance:t,customPriorityFee:r,customTip:o,isBridge:a=!1}){let{decimals:i,amount:c,balance:p,chain:d}=e.data,m=c?new AA(c):p?new AA(p).multipliedBy(qs(i)):new AA(0),B=le(e.type),{source:f,destination:k}=t,E=z_({isNativeToken:B,network:d,totalFees:A,isBridge:a,transactionSpeedsToUnitCost:j,customPriorityFee:r,customTip:o}).plus(k),y=B?W_(m,E,f):m.toString();return Xk(y,i)}function z_({isNativeToken:e,network:A,totalFees:j,isBridge:t,transactionSpeedsToUnitCost:r,customPriorityFee:o,customTip:a}){if(!e)return j;let i=ee.get(A.id),c=t?i.bridgeDefaultFee:i.swapDefaultFee,p=r?.standard;return DB(p)&&(c=V_.multipliedBy(p.maxFeePerGas.plus(p.maxPriorityFeePerGas))),I.isSolanaNetworkID(A.id)&&o&&(c=c.plus(o)),I.isSolanaNetworkID(A.id)&&a&&(c=c.plus(a)),c.plus(X_(A.id))}function W_(e,A,j){let t=j.plus(A);return e.gt(t)?e.minus(t).toString():e.toString()}n();s();var QS=v(x());function HS(){let e=w(p=>p.primaryCurrency),A=w(p=>p.setUiSellAmountLocalFiatInput),j=w(p=>p.setUiBuyAmountLocalFiatInput),t=w(p=>p.setAmountType),r=w(p=>p.setPrimaryCurrency),o=w(p=>p.setUiSellAmountCryptoInput),a=w(p=>p.setSellAmount),i=w(p=>p.setUiBuyAmountCryptoInput),{fromUsd:c}=GA();return(0,QS.useCallback)(({buyAmountFromQuote:p,buyFungibleDecimals:d,buyFungibleUsdPrice:m,sellAmountFromQuote:B,sellFungibleUsdPrice:f})=>{if(e==="crypto"){if(t("sell"),f&&B){let k=oe(Number(B),f),g=c(k);A(g.toString()),a(B.toString())}if(m&&p){let k=SA(p,d).toString(),g=oe(Number(k),m),E=c(g);j(E.toString())}r("fiat")}if(e==="fiat"){if(B&&o(B),m&&p){let k=SA(p,d).toString();i(k)}r("crypto")}},[c,e,a,t,i,j,r,o,A])}n();s();var VS=v(x());function XS(){let e=w(r=>r.primaryCurrency),A=w(r=>r.setUiSellAmountCryptoInput),j=w(r=>r.setUiSellAmountLocalFiatInput),{fromUsd:t}=GA();return(0,VS.useCallback)(({amount:r,decimals:o,usdPrice:a})=>{if(e==="crypto")if(r===void 0)A("0");else{let i=SA(r,o).toString();A(i)}else if(e==="fiat"&&a)if(r===void 0)j("0");else{let i=SA(r,o).toString(),c=oe(Number(i),a),p=t(c);j(p.toString())}},[t,e,A,j])}n();s();var zS=v(x());function WS(){let e=w(a=>a.setAmountType),A=w(a=>a.setUiSellAmountCryptoInput),j=w(a=>a.setSellAmount),t=w(a=>a.sellAmount),[r,o]=Ho(t,j,Dn);return(0,zS.useCallback)(({fungibleValue:a,decimals:i,shouldUpdateQuote:c,shouldTrimLength:p=!0})=>{let d=Qe(p?a.substring(0,ro):a),m=Me(d,i);e("sell"),A(m),c&&o(m)},[e,A,o])}n();s();var JS=v(x());function YS(){let e=w(i=>i.setAmountType),A=w(i=>i.setSellAmount),j=w(i=>i.sellAmount),t=w(i=>i.setUiSellAmountLocalFiatInput),{toUsd:r}=GA(),[o,a]=Ho(j,A,Dn);return(0,JS.useCallback)(({localFiatValue:i,shouldUpdateQuote:c,decimals:p,priceData:d})=>{let m=Qe(i.substring(0,ro)),B=Me(m,2);if(e("sell"),t(B),c&&d?.usd){let f=r(i),k=Sj(f,d.usd,p);a(k.toString())}},[e,t,a,r])}n();s();var uw=v(x());n();s();var ZS=v(x());var J_={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"},Aw=()=>{let{currentQuote:e}=iA(),{destinationNetworkFee:A,liquidityFee:j}=(0,ZS.useMemo)(()=>{function t(o){return o?{amount:new P(o.amount??0),amountUsd:o.amountUSD?parseFloat(o.amountUSD):null,pct:parseFloat(o.percentage??"0")}:kr}let r=new Map([]);return e&&FA(e)&&(r=e.steps.flatMap(o=>o.includedFeeCosts).reduce((o,a)=>{if(!a)return o;let i=J_[a.name];return i&&o.set(i,a),o},r)),{destinationNetworkFee:t(r.get("destinationNetwork")),liquidityFee:t(r.get("liquidityProvider"))}},[e]);return{destinationNetworkFee:A,liquidityFee:j}};n();s();var ew=v(x());var Y_={calculate({currentQuote:e,gasEstimationPriceData:A}){return{amount:(e&&A?.gasEstimationAmount)??new P(0),amountUsd:(e&&A?.gasEstimationPriceUSDNumber)??null,pct:0}}},Z_={calculate({currentQuote:e,gasEstimationPriceData:A,priceMap:j,networkID:t}){let r=(e?.fees??[]).find(i=>i.type==="tips"||i.type==="network"&&i.name!=="Token account deposits"),o=(e&&A?.gasEstimationAmount)??new P(0),a=(e&&A?.gasEstimationPriceUSDNumber)??null;if(r&&r.amount&&(o=o.plus(new P(r.amount)),a)){let i=Ze(t,new P(r.amount),j);i&&(a+=i)}return{amount:o,amountUsd:a,pct:0}}},AR={calculate({currentQuote:e,gasEstimationPriceData:A,maxGasEstimationPriceData:j}){return{amount:(e&&A?.gasEstimationAmount)??new P(0),amountUsd:(e&&A?.gasEstimationPriceUSDNumber)??null,maxAmount:(e&&j?.gasEstimationAmount)??new P(0),maxAmountUsd:(e&&j?.gasEstimationPriceUSDNumber)??null,pct:0}}},jw=({priceMap:e})=>{let{currentQuote:A}=iA(),j=w(p=>p.sellFungible),t=w(p=>p.gasEstimation),r=j?.data.chain.id??aA.Solana.Mainnet,{data:o,isLoading:a}=Cs(r,La(t.estimate)),{data:i}=Cs(r,La(t.estimateWithBuffer));return{networkFee:(0,ew.useMemo)(()=>I.isEVMNetworkID(r)?AR.calculate({currentQuote:A,gasEstimationPriceData:o,maxGasEstimationPriceData:i}):I.isSolanaNetworkID(r)?Z_.calculate({currentQuote:A,gasEstimationPriceData:o,networkID:r,priceMap:e}):Y_.calculate({currentQuote:A,gasEstimationPriceData:o}),[A,o,i,r,e]),isFetchingGasEstimationPrice:a}};n();s();var tw=v(x());var eR={calculate(){return kr}},jR={calculate({currentQuote:e,networkID:A,priceMap:j}){let t=vc(e);return{amount:t,amountUsd:Ze(A,t,j),pct:0}}},rw=({priceMap:e})=>{let{currentQuote:A}=iA(),t=w(o=>o.sellFungible)?.data.chain.id??aA.Solana.Mainnet;return{nonIncludedFees:(0,tw.useMemo)(()=>A&&FA(A)?jR.calculate({currentQuote:A,networkID:t,priceMap:e}):eR.calculate(),[t,A,e])}};n();s();var ow=v(x());var tR={calculate(e){let A=(e?.fees??[]).find(j=>j.type==="phantom");return{amount:new P(A?.amount??0),amountUsd:null,pct:A?.percentage??0}}},rR={calculate(e){let A=e.steps.flatMap(j=>j.feeCosts).find(j=>j.name==="phantom");return{amount:new P(A?.amount??0),amountUsd:null,pct:parseFloat(A?.percentage??"0")}}},nw=()=>{let{currentQuote:e}=iA();return{phantomFee:(0,ow.useMemo)(()=>um(e),[e])}};function um(e){return Wj(e)?tR.calculate(e):FA(e)?rR.calculate(e):kr}n();s();var sw=v(x());var oR={calculate({currentQuote:e,networkID:A,priceMap:j}){let t=(e?.fees??[]).find(r=>r.name==="Token account deposits");return{amount:new P(t?.amount??0),amountUsd:t?.amount?Ze(A,new P(t.amount),j):null,pct:t?.percentage??0}}},nR={calculate(){return kr}},aw=({priceMap:e})=>{let{currentQuote:A}=iA(),t=w(o=>o.sellFungible)?.data.chain.id??aA.Solana.Mainnet;return{tokenAccountFee:(0,sw.useMemo)(()=>Wj(A)?oR.calculate({currentQuote:A,networkID:t,priceMap:e}):nR.calculate(),[A,t,e])}};n();s();var iw=v(x());var cw={calculate:({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,networkID:t,priceMap:r})=>{let o=e.amount.plus(A.amount).plus(j.amount);return{amount:o,amountUsd:Ze(t,o,r),pct:0}}},sR={calculate:({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,networkID:t,priceMap:r})=>{let o=cw.calculate({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,networkID:t,priceMap:r}),a=e.amount.plus(A.maxAmount??0).plus(j.amount);return{...o,maxAmount:a,maxAmountUsd:Ze(t,a,r)}}},pw=({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,priceMap:t})=>{let o=w(i=>i.sellFungible)?.data.chain.id??aA.Solana.Mainnet;return{totalFees:(0,iw.useMemo)(()=>I.isEVMNetworkID(o)?sR.calculate({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,networkID:o,priceMap:t}):cw.calculate({tokenAccountFee:e,networkFee:A,nonIncludedFees:j,networkID:o,priceMap:t}),[A,o,j,t,e])}};var Gj=()=>{let e=w(B=>B.gasEstimation.isFetching),A=fr(),{data:j={}}=pt({query:{data:A.map(B=>Re(B))}}),{networkFee:t,isFetchingGasEstimationPrice:r}=jw({priceMap:j}),o=e||r,{phantomFee:a}=nw(),{tokenAccountFee:i}=aw({priceMap:j}),{nonIncludedFees:c}=rw({priceMap:j}),{totalFees:p}=pw({tokenAccountFee:i,networkFee:t,nonIncludedFees:c,priceMap:j}),{destinationNetworkFee:d,liquidityFee:m}=Aw();return(0,uw.useMemo)(()=>({phantomFee:a,networkFee:t,tokenAccountFee:i,totalFees:p,nonIncludedFees:c,destinationNetworkFee:d,liquidityFee:m,isFetchingFees:o}),[a,t,i,p,c,d,m,o])};n();s();var aR=20;function Uc(e,A){let j=hA.optimisticUpdates(),t=e.getQueryData(j)??[];e.setQueryData(j,[...t.filter(r=>r.id!==A.id),A])}function lw(e,A){let j=hA.optimisticUpdates(),t=e.getQueryState(j);if(t){let r=A??Date.now(),o=t.dataUpdatedAt,a=X({seconds:aR});return r-o>a?(e.removeQueries({queryKey:j}),[]):t?.data??[]}else return[]}function es(e){return`${e.type}-${e.data.key}`}n();s();var lm=v(x());var iR=.05,cR=({sellNetworkId:e,buyNetworkId:A,destinationMinRequiredBalance:j,priceMap:t})=>{if(!e||!A||!t)return new P(0);let r=J(Re(I.getChainID(e))),o=J(Re(I.getChainID(A))),a=t[r]?.usd,i=t[o]?.usd;if(!a||!i)return new P(0);let c=SA(j.toNumber(),I.getTokenDecimals(A)),p=oe(c.toNumber(),i),d=Sj(p,a,I.getTokenDecimals(e));return new P(d).times(1+iR)},qo=({sellFungible:e,buyFungible:A})=>{let j=e?.data.chain.id,t=A?.data.chain.id,r=t??j,o=XA(j,t),{fungible:a}=Nj({key:A?.data.key}),{data:i}=EA(),c=(0,lm.useMemo)(()=>i?.addresses.find(f=>f.networkID===r),[i,r]),d=fr().map(f=>Re(f)),{data:m}=pt({query:{data:d},queryOptions:{refetchInterval:!1}}),{data:B=0}=_s(c);return(0,lm.useMemo)(()=>{if(a)return new P(0);let f=new P(B);return o?cR({sellNetworkId:j,buyNetworkId:t,destinationMinRequiredBalance:f,priceMap:m}):f},[a,B,o,j,t,m])};n();s();var dm=v(x()),xo=e=>{let A=e?.data.chain.id,{data:j}=EA(),t=(0,dm.useMemo)(()=>j?.addresses.find(o=>o.networkID===A),[j,A]),{data:r=0}=_s(t);return(0,dm.useMemo)(()=>new P(r),[r])};function mm(){let e=Z(),A=Ic(),j=w(uA=>uA.sellFungible)??A,t=w(uA=>uA.buyFungible),r=w(uA=>uA.primaryCurrency),o=w(uA=>uA.isFetchingQuote),a=w(uA=>uA.sellAmount),i=w(uA=>uA.uiSellAmountCryptoInput),c=w(uA=>uA.setSellFungible),p=w(uA=>uA.uiSellAmountLocalFiatInput),d=w(uA=>uA.amountType),m=w(uA=>uA.setSwapFilter),{data:B}=Zj(),{data:f}=At(),k=Lc(j),g=j?.data.key,{fungible:E}=Nj({key:g}),y=j?.data.chain.id,F=t?.data.chain.id,{totalFees:S}=Gj(),{data:$}=Ms({networkID:y}),M=XA(y,F),O=xo(j),G=qo({sellFungible:j,buyFungible:t}),z=j?.data.amount,D=j?j.data.decimals:0,h=(0,Tj.useMemo)(()=>za({sellFungible:j,totalFees:S.amount,transactionSpeedsToUnitCost:I.isEVMNetworkID(j.data.chain.id)?$:void 0,isBridge:M,minRequiredBalance:{source:O,destination:G},customPriorityFee:bo(B??0),customTip:bo(f??0)}),[j,S.amount,$,M,G,O,B,f]),q=(0,Tj.useMemo)(()=>d==="buy"?new P(i).isLessThanOrEqualTo(new P(h)):a===""?!0:new P(a).isLessThanOrEqualTo(new P(h)),[d,h,a,i]),{currentQuote:C}=iA(),{data:R}=Ie({query:{data:W(j)}}),N=R?.usd,{data:_}=Ie({query:t?{data:W(t)}:void 0}),L=HS(),V=WS(),U=YS(),K=XS(),IA=(0,Tj.useCallback)(()=>{let uA=C?.sellAmount?SA(C?.sellAmount,D).toString():a,te=C?.buyAmount,Oe=t?.data.decimals??0,sj=_?.usd;L({buyAmountFromQuote:te,buyFungibleDecimals:Oe,buyFungibleUsdPrice:sj,sellAmountFromQuote:uA,sellFungibleUsdPrice:N})},[C?.sellAmount,C?.buyAmount,D,a,t?.data.decimals,_?.usd,L,N]),mA=(0,Tj.useCallback)(uA=>{V({fungibleValue:uA,decimals:D,shouldUpdateQuote:!0})},[D,V]),xA=(0,Tj.useCallback)(uA=>{U({priceData:R,localFiatValue:uA,decimals:D,shouldUpdateQuote:!0})},[D,R,U]),{fromUsd:we}=GA(),KA=(0,Tj.useCallback)(uA=>{m(uA);let te=P(h).multipliedBy(uA);if(r==="crypto")V({fungibleValue:te.toString(),decimals:D,shouldUpdateQuote:!0,shouldTrimLength:!1});else if(N){let Oe=oe(Number(te),N),sj=we(Oe).toString();U({priceData:R,localFiatValue:sj,decimals:D,shouldUpdateQuote:!0})}},[m,h,r,N,V,D,U,R,we]);(0,Tj.useEffect)(()=>{let uA=lw(e);if(E){let te={...E},Oe=uA.find(sj=>sj.id===es(E));Oe&&E.data.amount!==Oe.amount&&(te.data={...te.data,amount:Oe.amount}),te.data.amount!==z&&c(te)}},[E,z,c,e]),(0,Tj.useEffect)(()=>{d==="buy"&&k&&K({amount:C?.sellAmount,decimals:D,usdPrice:N})},[d,C?.sellAmount,D,R?.usd,k,N,K]);let qe=Qn();return{maxSellAmount:h,sellFungible:j,notEnoughAssets:!q,uiSellAmountCryptoInput:i,uiSellAmountLocalFiatInput:p,hasMinimumSellAmount:qe,isFetchingQuote:o,handleToggleCurrencyClick:IA,handleFiatAmountInputChange:xA,handleCryptoAmountInputChange:mA,handleSwapFilterClick:KA}}n();s();var dR=v(x());n();s();n();s();var pR=v(dv());var AxA={network:{id:I.solana.mainnetID,name:I.solana.name,symbol:I.solana.tokenSymbol,imageUrl:I.solana.iconUrl},tokenType:"SolanaNative",symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:0};n();s();n();s();n();s();n();s();function km(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function mR(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function dw(e,...A){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length>0&&!A.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${A}, not of length=${e.length}`)}function kR(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");km(e.outputLen),km(e.blockLen)}function BR(e,A=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(A&&e.finished)throw new Error("Hash#digest() has already been called")}function fR(e,A){dw(e);let j=A.outputLen;if(e.length<j)throw new Error(`digestInto() expects output buffer of length at least ${j}`)}var ER={number:km,bool:mR,bytes:dw,hash:kR,exists:BR,output:fR},Qc=ER;n();s();n();s();var gR={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Vc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Pj=(e,A)=>e<<32-A|e>>>A,yR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yR)throw new Error("Non little-endian hardware is not supported");var FR=Array.from({length:256},(e,A)=>A.toString(16).padStart(2,"0"));function mw(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let j=0;j<e.length;j++)A+=FR[e[j]];return A}function Bm(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function fm(e){if(typeof e=="string"&&(e=Bm(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Hc=class{clone(){return this._cloneInto()}};function Em(e){let A=t=>e().update(fm(t)).digest(),j=e();return A.outputLen=j.outputLen,A.blockLen=j.blockLen,A.create=()=>e(),A}function hR(e,A,j,t){if(typeof e.setBigUint64=="function")return e.setBigUint64(A,j,t);let r=BigInt(32),o=BigInt(4294967295),a=Number(j>>r&o),i=Number(j&o),c=t?4:0,p=t?0:4;e.setUint32(A+c,a,t),e.setUint32(A+p,i,t)}var Xc=class extends Hc{constructor(A,j,t,r){super(),this.blockLen=A,this.outputLen=j,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(A),this.view=Vc(this.buffer)}update(A){Qc.exists(this);let{view:j,buffer:t,blockLen:r}=this;A=fm(A);let o=A.length;for(let a=0;a<o;){let i=Math.min(r-this.pos,o-a);if(i===r){let c=Vc(A);for(;r<=o-a;a+=r)this.process(c,a);continue}t.set(A.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===r&&(this.process(j,0),this.pos=0)}return this.length+=A.length,this.roundClean(),this}digestInto(A){Qc.exists(this),Qc.output(A,this),this.finished=!0;let{buffer:j,view:t,blockLen:r,isLE:o}=this,{pos:a}=this;j[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(t,0),a=0);for(let m=a;m<r;m++)j[m]=0;hR(t,r-8,BigInt(this.length*8),o),this.process(t,0);let i=Vc(A),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=c/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<p;m++)i.setUint32(4*m,d[m],o)}digest(){let{buffer:A,outputLen:j}=this;this.digestInto(A);let t=A.slice(0,j);return this.destroy(),t}_cloneInto(A){A||(A=new this.constructor),A.set(...this.get());let{blockLen:j,buffer:t,length:r,finished:o,destroyed:a,pos:i}=this;return A.length=r,A.pos=i,A.finished=o,A.destroyed=a,r%j&&A.buffer.set(t),A}};var SR=(e,A,j)=>e&A^~e&j,wR=(e,A,j)=>e&A^e&j^A&j,IR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ir=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$r=new Uint32Array(64),zc=class extends Xc{constructor(){super(64,32,8,!1),this.A=Ir[0]|0,this.B=Ir[1]|0,this.C=Ir[2]|0,this.D=Ir[3]|0,this.E=Ir[4]|0,this.F=Ir[5]|0,this.G=Ir[6]|0,this.H=Ir[7]|0}get(){let{A,B:j,C:t,D:r,E:o,F:a,G:i,H:c}=this;return[A,j,t,r,o,a,i,c]}set(A,j,t,r,o,a,i,c){this.A=A|0,this.B=j|0,this.C=t|0,this.D=r|0,this.E=o|0,this.F=a|0,this.G=i|0,this.H=c|0}process(A,j){for(let m=0;m<16;m++,j+=4)$r[m]=A.getUint32(j,!1);for(let m=16;m<64;m++){let B=$r[m-15],f=$r[m-2],k=Pj(B,7)^Pj(B,18)^B>>>3,g=Pj(f,17)^Pj(f,19)^f>>>10;$r[m]=g+$r[m-7]+k+$r[m-16]|0}let{A:t,B:r,C:o,D:a,E:i,F:c,G:p,H:d}=this;for(let m=0;m<64;m++){let B=Pj(i,6)^Pj(i,11)^Pj(i,25),f=d+B+SR(i,c,p)+IR[m]+$r[m]|0,g=(Pj(t,2)^Pj(t,13)^Pj(t,22))+wR(t,r,o)|0;d=p,p=c,c=i,i=a+f|0,a=o,o=r,r=t,t=f+g|0}t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,a=a+this.D|0,i=i+this.E|0,c=c+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(t,r,o,a,i,c,p,d)}roundClean(){$r.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},gm=class extends zc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},kw=Em(()=>new zc),yxA=Em(()=>new gm);var jj=v(x());n();s();n();s();var he=[];for(let e=0;e<256;++e)he.push((e+256).toString(16).slice(1));function Bw(e,A=0){return(he[e[A+0]]+he[e[A+1]]+he[e[A+2]]+he[e[A+3]]+"-"+he[e[A+4]]+he[e[A+5]]+"-"+he[e[A+6]]+he[e[A+7]]+"-"+he[e[A+8]]+he[e[A+9]]+"-"+he[e[A+10]]+he[e[A+11]]+he[e[A+12]]+he[e[A+13]]+he[e[A+14]]+he[e[A+15]]).toLowerCase()}n();s();var ym,$R=new Uint8Array(16);function Fm(){if(!ym){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ym=self.crypto.getRandomValues.bind(self.crypto)}return ym($R)}n();s();n();s();var vR=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),hm={randomUUID:vR};function bR(e,A,j){if(hm.randomUUID&&!A&&!e)return hm.randomUUID();e=e||{};let t=e.random??e.rng?.()??Fm();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,A){if(j=j||0,j<0||j+16>A.length)throw new RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let r=0;r<16;++r)A[j+r]=t[r];return A}return Bw(t)}var Ej=bR;n();s();var qR=50,fw=({includeOwnedAssets:e,sellAsset:A,sellCaip19:j,ownedAssets:t,searchAssets:r})=>{if(!e||!A)return r;let o=B=>J(W(B)),a=o(A)??j,i=A.data.chain.id??(j&&_e(j).chainId),c=t.filter(B=>o(B)!==a&&I.compareNetworkID(i,B.data.chain.id)===0&&B.type!=="CompressedSPL").slice(0,qR-1),p=c.map(B=>[o(B),B]),d=new Map(p),m=r.filter(B=>!d.has(o(B)));return[...c,...m]};function xR({enableQuery:e=!0,chainFilter:A,sellCaip19:j}={}){let t=(0,jj.useMemo)(()=>j?_e(j):void 0,[j]),{sellFungible:r,searchQuery:o,setSearchQuery:a,setNumSearchResults:i}=w(),c=Fi(o,150),{fungibles:p,isLoadingTokens:d,isRefetchingTokens:m,tokensError:B}=wj(),f=Er(),[k,g]=(0,jj.useState)(""),{data:E}=EA(),y=(0,jj.useMemo)(()=>E?.addresses??[],[E]),{data:F,isSuccess:S,isFetching:$,error:M}=Ao({query:c,networkIds:A?[A]:[t?.chainId??r?.data.chain.id??I.solana.mainnetID],enableQuery:e,keepPreviousData:!0,searchContext:"swapper",supportedNetworkIds:f,chainAddresses:y}),O=!S&&$,G=(0,jj.useMemo)(()=>p.filter(R=>R.type!=="CompressedSPL").map(R=>[J(W(R)),R]),[p]),z=(0,jj.useMemo)(()=>{let R=Bm(G.map(([_])=>_).join("~")),N=kw(R);return mw(N)},[G]),D=(0,jj.useMemo)(()=>new Map(G),[z]),h=(0,jj.useMemo)(()=>{if(!F||F.length===0)return[];g(Ej());let R=F.reduce((N,_)=>{let L="";if(le(_.type)){if(r&&le(r.type)&&_.data.chain.id===r.data.chain.id||t&&t.chainId===_.data.chain.id&&t.resourceType==="nativeToken")return N;L=J(Re(I.getChainID(_.data.chain.id)))}else{if(r&&_.data.tokenAddress===r.data.tokenAddress&&!A||t&&t.chainId===_.data.chain.id&&t.resourceType==="address"&&t.address===_.data.tokenAddress)return N;L=J(W(_))}let V,U=D.get(L);return U&&U.data.balance?V=U:V=_,V&&N.push(V),N},[]);return i(R.length),R},[D,F,r,i,A,t]),q=Y();(0,jj.useEffect)(()=>{S&&h.length===0&&q.capture("swapperNullSearchResult",{data:{searchQuery:c}})},[S,h,c,q]);let C=(0,jj.useMemo)(()=>fw({includeOwnedAssets:!c,sellAsset:r,sellCaip19:j,ownedAssets:p,searchAssets:h}),[c,p,h,r,j]);return(0,jj.useMemo)(()=>({assets:C,initialFilterKey:A??r?.data.chain.id??t?.chainId,isLoading:d||O,isFetching:d||O||m,error:B??M,searchRef:k,setSearchQuery:a}),[C,d,O,m,B,M,r,k,a,t?.chainId,A])}n();s();var fe=v(x()),gw=v(Un());n();s();var Wc="https://help.phantom.com/hc/en-us/articles/27085326202515";var js=[.3,.5,1],GR=js.map(e=>`${e}%`),yw=[...GR,"custom"],ts=[.5,1,2],TR=ts.map(e=>`${e}%`),PR=[...TR,"custom"],OR="enable-higher-slippage-options",Sm=yw.length-1,MR=5,CR=2,wm=.1,Im=30,_R=2,Ew=(e,A)=>{if(!e)return;let j=parseFloat(e);if(isNaN(j))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(j>Im)return{message:A("swapSlippageSettingsCustomMaxError",{maxSlippage:Im}),severity:"critical"};if(j>_R)return{message:A("swapSlippageSettingsHighSlippageWarning"),severity:"warning"};if(j<wm)return{message:A("swapSlippageSettingsCustomMinError",{minSlippage:wm}),severity:"critical"}},RR=(e,A)=>A?e&&ts.indexOf(e)!==-1?ts.indexOf(e):e?Sm:1:e&&js.indexOf(e)!==-1?js.indexOf(e):e?Sm:0,DR=(e,A)=>A?e&&ts.indexOf(e)===-1?`${e}`:"":e&&js.indexOf(e)===-1?`${e}`:"",NR=({onDismiss:e})=>{let{t:A}=BA(),j=Y(),{data:[t]}=fA([OR]),{data:r,isFetched:o}=Fr(),{mutateAsync:a}=$c(),{selectedSetting:i,isFetched:c,setSlippageSetting:p}=zA(),[d,m]=(0,fe.useState)(i.type),B=(0,gw.default)(c),[f,k]=(0,fe.useState)(!1),[g,E]=(0,fe.useState)(0),[y,F]=(0,fe.useState)(),[S,$]=(0,fe.useState)(""),[M,O]=(0,fe.useState)(),G=d==="auto",z=g===Sm,D=G?!1:M?.severity==="critical"||z&&!S;(0,fe.useEffect)(()=>{B!==c&&d!==i.type&&m(i.type)},[B,c,i.type,d]);let h=(0,fe.useCallback)(L=>{if(g===L)return;O(void 0),E(L);let V=t?ts:js;V[L]?(F(V[L]),$("")):F(void 0)},[g,t]),q=(0,fe.useCallback)(L=>{let V=Qe(L.substring(0,MR)),U=Me(V,CR),K=parseFloat(U);if(isNaN(K)){O(void 0),$("");return}$(U),O(Ew(U,A))},[A]),C=(0,fe.useCallback)(()=>{if(G)j.capture("slippageChanged",{data:{slippageType:"auto"}});else if(z){let L=parseFloat(S??"");a(L),j.capture("slippageChanged",{data:{slippageValue:L,slippageType:"custom"}}),F(void 0)}else y&&(a(y),j.capture("slippageChanged",{data:{slippageValue:y,slippageType:"preset"}}),$(""));p({type:d}),e()},[G,p,d,e,z,y,S,a,j]),R=(0,fe.useCallback)(()=>{let L=RR(r,t),V=DR(r,t),U=t?ts:js;E(L),F(U[L]),$(V),O(Ew(V,A)),m(i.type)},[r,A,i.type,t]),N=(0,fe.useCallback)(()=>{m(d==="auto"?"fixed":"auto")},[d,m]),_=(0,fe.useMemo)(()=>({title:A("swapSlippageSettingsTitle"),subtitle:A("swapSlippageSettingsSubtitle",{minSlippage:wm,maxSlippage:Im}),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapSlippageSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,fe.useEffect)(()=>{!f&&o&&(R(),k(!0))},[o,f,R]),{options:t?PR:yw,selectedIndex:g,customSlippageValue:S,i18nStrings:_,error:M,submitDisabled:D,isAutoEnabled:G,autoLearnMoreUrl:Wc,onConfirm:C,onDismiss:e,onSelectOption:h,onChangeCustomSlippage:q,onResetToDefault:R,onToggleAutoSlippage:N}};n();s();var pe=v(x()),Sw=v(Un());n();s();var Fw=v(x());var KR={type:"auto"},$m=()=>{let{priorityFeeSetting:e,isFetched:A,save:j}=LR();return{isFetched:A,selectedSetting:e,setPriorityFeeSetting:j}},LR=()=>{let{data:e,isFetched:A}=ce({key:"priorityFeeSettings",queryKey:hA.priorityFeeSettings()}),{mutateAsync:j}=Be({key:"priorityFeeSettings",queryKey:hA.priorityFeeSettings()}),t=(0,Fw.useCallback)(async r=>{await j(r)},[j]);return{isFetched:A,priorityFeeSetting:e??KR,save:t}};var vm={input:{maxLength:10,maxDecimals:6},bounds:{min:1e-6,low:5e-6,high:1,max:5}},hw=(e,A,j)=>{let t=parseFloat(e);if(isNaN(t))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(t>j.max)return{message:A("swapPriorityFeeSettingsCustomMaxError",{maxPriorityFee:j.max}),severity:"critical"};if(t<j.min)return{message:A("swapPriorityFeeSettingsCustomMinError",{minPriorityFee:j.min}),severity:"critical"};if(t>j.high)return{message:A("swapPriorityFeeSettingsHighFeeWarning"),severity:"warning"};if(t<j.low)return{message:A("swapPriorityFeeSettingsLowFeeWarning"),severity:"warning"}},QR=()=>{let[e,A]=(0,pe.useState)(vm.bounds);return(0,pe.useEffect)(()=>{(async()=>{try{let t=await xi({accounts:[],transactionType:"Swap"});A({min:t.min,low:t.low,high:t.high,max:t.max})}catch(t){b.captureError(t instanceof Error?t:new Error("Unable to fetch priority fee bounds."),"swapper")}})()},[]),e},HR=({onDismiss:e})=>{let{t:A}=BA(),j=Y(),{data:t,isFetched:r}=Zj(),{mutateAsync:o}=dS(),{selectedSetting:a,isFetched:i,setPriorityFeeSetting:c}=$m(),[p,d]=(0,pe.useState)(a.type),m=(0,Sw.default)(i),[B,f]=(0,pe.useState)(!1),[k,g]=(0,pe.useState)(""),[E,y]=(0,pe.useState)("$0"),[F,S]=(0,pe.useState)(),$=p==="auto",M=$?!1:F?.severity==="critical"||!k,O=QR(),G=Re("solana"),{data:z}=Ie({query:{data:G}}),D=z?.usd;(0,pe.useEffect)(()=>{if(!D)return;let _=oe(Number(k),D);y(`$${_.toString()}`)},[k,D]),(0,pe.useEffect)(()=>{m!==i&&p!==a.type&&d(a.type)},[m,i,a.type,p]);let h=(0,pe.useCallback)(_=>{let L=Qe(_.substring(0,vm.input.maxLength)),V=Me(L,vm.input.maxDecimals);if(isNaN(parseFloat(V))){S(void 0),g("");return}g(V),S(hw(V,A,O))},[A,O]),q=(0,pe.useCallback)(()=>{if($)o(null),b.addBreadcrumb("swapper","Priority fee setting changed to auto.","info"),j.capture("swapperPriorityFeeChanged",{data:{priorityFeeType:"auto"}});else if(k){let _=parseFloat(k??"");o(_),b.addBreadcrumb("swapper",`Priority fee setting changed to custom: ${_} SOL`,"info"),j.capture("swapperPriorityFeeChanged",{data:{priorityFeeValue:_,priorityFeeType:"custom"}})}c({type:p}),e()},[$,c,p,e,k,o,j]),C=(0,pe.useCallback)(()=>{let _=t?`${t}`:"";g(_),S(hw(_,A,O)),d(a.type)},[t,A,a.type,O]),R=(0,pe.useCallback)(()=>{d(p==="auto"?"fixed":"auto"),g("")},[p,d]),N=(0,pe.useMemo)(()=>({title:A("swapPriorityFeeSettingsTitle"),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapPriorityFeeSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,pe.useEffect)(()=>{!B&&r&&(C(),f(!0))},[r,B,C]),{customPriorityFeeValue:k,customPriorityFeeValueInDollars:E,i18nStrings:N,error:F,submitDisabled:M,isAutoEnabled:$,onConfirm:q,onDismiss:e,onChangeCustomPriorityFee:h,onResetToDefault:C,onToggleAutoPriorityFee:R}};n();s();var ue=v(x()),vw=v(Un());n();s();var ww=v(x());var VR={type:"auto"},Iw=()=>{let{tipSetting:e,isFetched:A,save:j}=XR();return{isFetched:A,selectedSetting:e,setTipSetting:j}},XR=()=>{let{data:e,isFetched:A}=ce({key:"tipSettings",queryKey:hA.tipSettings()}),{mutateAsync:j}=Be({key:"tipSettings",queryKey:hA.tipSettings()}),t=(0,ww.useCallback)(async r=>{await j(r)},[j]);return{isFetched:A,tipSetting:e??VR,save:t}};var bm={input:{maxLength:10,maxDecimals:6},bounds:{min:1e-6,low:5e-6,high:1,max:5}},$w=(e,A,j)=>{let t=parseFloat(e);if(isNaN(t))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(t>j.max)return{message:A("swapTipSettingsCustomMaxError",{maxTip:j.max}),severity:"critical"};if(t<j.min)return{message:A("swapTipSettingsCustomMinError",{minTip:j.min}),severity:"critical"};if(t>j.high)return{message:A("swapTipSettingsHighFeeWarning"),severity:"warning"};if(t<j.low)return{message:A("swapTipSettingsLowFeeWarning"),severity:"warning"}},zR=()=>{let[e,A]=(0,ue.useState)(bm.bounds);return(0,ue.useEffect)(()=>{(async()=>{try{let t=await xi({accounts:[],transactionType:"Swap"});A({min:t.min,low:t.low,high:t.high,max:t.max})}catch(t){b.captureError(t instanceof Error?t:new Error("Unable to fetch tip bounds."),"swapper")}})()},[]),e},WR=({onDismiss:e})=>{let{t:A}=BA(),j=Y(),{data:t,isFetched:r}=At(),{mutateAsync:o}=mS(),{selectedSetting:a,isFetched:i,setTipSetting:c}=Iw(),[p,d]=(0,ue.useState)(a.type),m=(0,vw.default)(i),[B,f]=(0,ue.useState)(!1),[k,g]=(0,ue.useState)(""),[E,y]=(0,ue.useState)("$0"),[F,S]=(0,ue.useState)(),$=p==="auto",M=$?!1:F?.severity==="critical"||!k,O=zR(),G=Re("solana"),{data:z}=Ie({query:{data:G}}),D=z?.usd;(0,ue.useEffect)(()=>{if(!D)return;let _=oe(Number(k),D);y(`$${_.toString()}`)},[k,D]),(0,ue.useEffect)(()=>{m!==i&&p!==a.type&&d(a.type)},[m,i,a.type,p]);let h=(0,ue.useCallback)(_=>{let L=Qe(_.substring(0,bm.input.maxLength)),V=Me(L,bm.input.maxDecimals);if(isNaN(parseFloat(V))){S(void 0),g("");return}g(V),S($w(V,A,O))},[A,O]),q=(0,ue.useCallback)(()=>{if($)o(null),b.addBreadcrumb("swapper","Tip setting changed to auto.","info"),j.capture("swapperTipChanged",{data:{tipType:"auto"}});else if(k){let _=parseFloat(k??"");o(_),b.addBreadcrumb("swapper",`Tip setting changed to custom: ${_} SOL`,"info"),j.capture("swapperTipChanged",{data:{tipValue:_,tipType:"custom"}})}c({type:p}),e()},[$,c,p,e,k,o,j]),C=(0,ue.useCallback)(()=>{let _=t?`${t}`:"";g(_),S($w(_,A,O)),d(a.type)},[t,A,a.type,O]),R=(0,ue.useCallback)(()=>{d(p==="auto"?"fixed":"auto"),g("")},[p,d]),N=(0,ue.useMemo)(()=>({title:A("swapTipSettingsTitle"),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapTipSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,ue.useEffect)(()=>{!B&&r&&(C(),f(!0))},[r,B,C]),{customTipValue:k,customTipValueInDollars:E,i18nStrings:N,error:F,submitDisabled:M,isAutoEnabled:$,onConfirm:q,onDismiss:e,onChangeCustomTip:h,onResetToDefault:C,onToggleAutoTip:R}};n();s();var Po=v(x());n();s();n();s();var bw=()=>[{chainId:"solana:101",address:"2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo",resourceType:"address"}];var Go=(e,A)=>{let j=[];if(YR(e)&&!ZR(e)&&j.push({type:"permanentDelegate",level:"warn",titleKey:"swapAssetWarningPermanentDelegate"}),(e.data.spamStatus==="NOT_VERIFIED"||e.data.spamStatus==="SPAM"||e.data.spamStatus==="POSSIBLE_SPAM")&&j.push({type:"unverified",level:"info",titleKey:"swapAssetWarningUnverified"}),!le(e.type)&&A&&AD(A)){let t=ee.get(e.data.chain.id).nativeFungible;j.push({type:"lowBalance",level:"info",titleKey:"swapAssetWarningLowTokenBalance",options:{token:t.data.symbol??"",network:t.data.chain.name}})}return j};function YR(e){let A=e.data;return A?.mintExtensions?A.mintExtensions.some(j=>j.extension==="permanentDelegate"):!1}function ZR(e){let A=W(e),j=bw();return A.resourceType==="address"?j.some(t=>t.resourceType===A.resourceType&&t.address===A.address&&t.chainId===A.chainId):!1}function AD(e){let A=ee.get(e.data.chain.id);return new P(e.data.amount?e.data.amount:0).lt(A.swapDefaultFee)}n();s();var xw=v(x());n();s();function qw(){return[new Tm,new qm,new Gm,new xm]}var qm=class{isEditable({sellAsset:A}){return!!A&&I.isSolanaNetworkID(A.data.chain.id)}},xm=class{isEditable({currencyDenomination:A}){return A==="crypto"}},Gm=class{isEditable({sellAsset:A,buyAsset:j}){return!XA(A?.data.chain.id,j?.data.chain.id)}},Tm=class{isEditable(){return LA.isFeatureEnabled("enable-swapper-exact-out")}};var Jc=({sellAsset:e,buyAsset:A,currencyDenomination:j})=>{let t=(0,xw.useMemo)(()=>qw(),[]);return A?t.every(r=>r.isEditable({sellAsset:e,buyAsset:A,currencyDenomination:j})):!1};n();s();var Gw=v(x());n();s();var Pm=class{isSupported(A,j,t,r,o){switch(A){case"sell":return!!(t&&o);case"buy":return!1}}},Om=class{isSupported(A){return A!=="buy"}};function Mm(){return[new Pm,new Om]}var Yc=(e,A,j,t,r)=>(0,Gw.useMemo)(()=>Mm(),[]).every(a=>a.isSupported(e,A,j,t,r));n();s();var Cm=class{format(A,j){return`${Xe(A)} ${j}`}},_m=class{format(A,j){return`${hi(A,{compact:!0})} ${j}`}},Rm=class{format(A){return hi(A,{compact:!0})}};function To(e){switch(e){case"full":return new Cm;case"compact":return new _m;case"compactNoSymbol":return new Rm}}var Dm=class{format(A,j,t){return`${Xe(Sj(Number(A),t,j.data?.decimals??0))} ${j.data.symbol??""}`}},Zc=class{format(A,j,t){return hi(Sj(Number(A),t,j.data?.decimals??0),{compact:!0})}},Nm=class{noSymbolDisplayStrategy;constructor(A){this.noSymbolDisplayStrategy=A}format(A,j,t){return`${this.noSymbolDisplayStrategy.format(A,j,t)} ${j.data?.symbol??""}`}};function Km(e){switch(e){case"full":return new Dm;case"compact":return new Nm(new Zc);case"compactNoSymbol":return new Zc}}var eD=ge?[.25,.5,1]:[.5,1],Tw=ge?To("full"):To("compactNoSymbol"),Pw=ge?Km("full"):Km("compact"),jD={chainId:aA.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"},tD=()=>{let A=w(KA=>KA.amountType)==="sell"?"sell":"buy",j=w(KA=>KA.primaryCurrency),{currencySymbol:t,toUsd:r}=GA(),o=j==="fiat"?t:void 0,a=w(KA=>KA.swapFilter),i=w(KA=>KA.setSwapFilter),c=$u(),{handleCryptoAmountInputChange:p,handleFiatAmountInputChange:d,sellFungible:m,uiSellAmountCryptoInput:B,isFetchingQuote:f,notEnoughAssets:k,hasMinimumSellAmount:g,handleToggleCurrencyClick:E,uiSellAmountLocalFiatInput:y,handleSwapFilterClick:F,maxSellAmount:S}=mm(),$=w(KA=>KA.buyFungible),M=$?W($):jD,O=Cw(M),G=Cw(W(m)),z=Yc("sell",m,G,$,O),D=(0,Po.useMemo)(()=>({fungible:m,perspective:"sell",amount:j==="crypto"?B:y,secondaryCryptoSubtitle:j==="fiat"?Ow(r(y),m,Pw,G):void 0,balance:Mw(m,Tw,c,S),isAmountLoading:f&&A!=="sell",isSecondaryCryptoSubtitleLoading:f,isWarning:k||!g,isAmountEditable:!0,supportsCurrencyDenominationSwitching:z,amountPrefix:o,filters:eD,selectedFilter:a,warnings:[],usdAmount:G?oe(Number(B),G):0}),[m,j,B,y,G,c,S,f,A,k,g,z,o,a,r]),{handleSwitchTokensClick:h,cryptoAmountInputValue:q,localFiatAmountInputValue:C,handleCryptoAmountInputChange:R}=pm(),N=Yc("buy",m,G,$,O),_=Jc({sellAsset:m,buyAsset:$,currencyDenomination:j}),L=XA(m?.data.chain.id,$?.data.chain.id),V=$?.data.chain.id,{fungible:U}=Nj({key:V?Rs(V,void 0):void 0}),K=(0,Po.useMemo)(()=>{if($)return{fungible:$,perspective:"buy",balance:Mw($,Tw,c),amount:j==="crypto"?q:C,secondaryCryptoSubtitle:j==="fiat"?Ow(r(C),$,Pw,O):void 0,isAmountLoading:f&&A!=="buy",isSecondaryCryptoSubtitleLoading:f,isWarning:!1,isAmountEditable:_,supportsCurrencyDenominationSwitching:N,amountPrefix:o,filters:[],selectedFilter:void 0,warnings:Go($,L?U:void 0),usdAmount:O?oe(Number(q),O):0}},[$,c,j,q,C,O,f,A,_,N,o,r,L,U]),IA=(0,Po.useCallback)((KA,qe)=>{switch(i(void 0),KA){case"sell":j==="crypto"?p(qe):d(qe);break;case"buy":if(j==="fiat")return;R(qe);break}},[i,j,p,d,R]),mA=Y(),xA=(0,Po.useCallback)(async()=>{A==="sell"&&(E(),await mA.capture("swapperToggleQuoteCurrency",{data:{value:j==="fiat"?"native":"fiat"}}))},[A,mA,j,E]),we=(0,Po.useCallback)((KA,qe)=>{qe==="sell"&&F(KA)},[F]);return{switchPerspective:h,sell:D,buy:K,setAmount:IA,switchCurrencyDenomination:xA,setFilter:we,currencyDenomination:j}};function Ow(e,A,j,t){let r=A.data?.symbol??"",o=Number(e);return t?j.format(o,A,t):`0 ${r}`}function Mw(e,A,j,t){let r=t?P(t):e.data?.balance;if(!(!r||j))return A.format(r,e.data?.symbol??"")}var Cw=e=>{let{data:A}=Ie({query:{data:e}});return A?.usd};n();s();var rD=["lastSubmittedPairsV2","slippageTolerance"],Lm=e=>{let A=String(e.queryKey[1]);return rD.includes(A)};n();s();var _w=v(x());function Um(e){let{t:A}=BA();return(0,_w.useMemo)(()=>{let{networkFee:j,phantomFee:t,tokenAccountFee:r,nonIncludedFees:o,destinationNetworkFee:a,liquidityFee:i}=e;return{networkFee:{label:A("swapQuoteNetwork"),valueUsd:j.amountUsd,maxValueUsd:j.maxAmountUsd},bridgeFee:{label:A("swapQuoteBridgeFee"),valueUsd:o.amountUsd,maxValueUsd:o.maxAmountUsd},tokenAccountFee:{label:A("swapQuoteOneTimeTokenAccount"),valueUsd:r.amountUsd},phantomFeePercent:{label:t.pct?A("swapQuoteFeeDisclaimer",{feePercentage:bs(t.pct)}):"",value:t.pct?`${t.pct}`:""},destinationNetworkFee:{label:A("swapQuoteDestinationNetwork"),valueUsd:a.amountUsd},liquidityProviderFee:{label:A("swapQuoteLiquidityProvider"),valueUsd:i.amountUsd}}},[e,A])}n();s();var Rw=v(x());function oD(){let e=Y(),A=w(m=>m.buyFungible),j=w(m=>m.sellFungible),t=w(m=>m.setBuyFungible),r=w(m=>m.setSellFungible),o=w(m=>m.setSellAmount),a=w(m=>m.setUiSellAmountCryptoInput),i=w(m=>m.resetQuote),c=w(m=>m.setSwapFilter),p=j?.data.amount,{cancelQuotes:d}=Mc();return(0,Rw.useCallback)(async m=>{if(j&&so(m,j)){m&&m.data.amount!==p&&(r(m),c(void 0));return}await d();let B=$o(m);e.capture("swapperUpdateFromAsset",{data:B}),r(m),c(void 0),A&&j&&so(m,A)&&t(j),m&&j?.data.chain.id!==m.data.chain.id&&(i(),t(void 0),o(""),a(""))},[e,A,d,p,i,j,t,o,r,c,a])}n();s();var Qw=v(x());n();s();var vr=v(x());n();s();n();s();n();s();var Ap=class{sections(A){let j=Rt().map(o=>o.programId),t=A.reduce((o,a)=>{if(a.data.spamStatus==="VERIFIED")return o.verified.push(a),o;if(a.type!=="SPL"||!a.data.ugcTokenMeta||a.data.ugcTokenMeta.status==="graduated"||!j.includes(a.data.ugcTokenMeta.programId))return o.unverified.push(a),o;let i=a.data.ugcTokenMeta.programId,c=o[i]??[];return c.push(a),o[i]=c,o},{verified:[],unverified:[]}),r=Rt().map(o=>{let a=t[o.programId]??[];return{id:o.programId,header:{title:T.t("swapSectionTitleTokens",{section:o.name}),iconUrl:o.iconUrl},data:a,behavior:"collapsible"}});return[{id:"verified",data:t.verified,behavior:"static"},{id:"unverified",header:{title:T.t("swapUnverifiedTokens")},data:t.unverified,behavior:"collapsible"},...r]}};function Dw(){return new Ap}n();s();var Kw=v(x());n();s();var ep=v(x());var Nw=()=>{let{data:e}=ce({key:"lastSelectedTokens",queryKey:hA.lastSelectedTokens()}),A=(0,ep.useMemo)(()=>e?JSON.parse(e):{},[e]),{mutateAsync:j}=Be({key:"lastSelectedTokens",queryKey:hA.lastSelectedTokens()}),t=(0,ep.useCallback)(async r=>{let o={...A,[r]:!0};await j(JSON.stringify(o))},[A,j]);return{lastSelectedTokens:A,storeSelectedToken:t}};n();s();var jp=class{constructor(A,j){this.lastSelectedTokens=A;this.storeSelectedToken=j}intercept(A){let j=J(W(A));return this.lastSelectedTokens[j]||this.storeSelectedToken(j),"continue"}};n();s();n();s();var tp=class{constructor(A){this.lastSelectedTokens=A}intercept(A,j){switch(A.type){case"SPL":{let t=J(W(A)),r=this.lastSelectedTokens[t];return A.data.ugcTokenMeta?.status==="preDeploy"&&!r?(_S(A),j("ugcWarning"),"interrupt"):"continue"}default:return"continue"}}};function iD({lastSelectedTokens:e,storeSelectedToken:A}){return[new jp(e,A),new tp(e)]}function Lw(){let{lastSelectedTokens:e,storeSelectedToken:A}=Nw();return(0,Kw.useMemo)(()=>iD({lastSelectedTokens:e,storeSelectedToken:A}),[e,A])}var Uw=(0,vr.createContext)(void 0),cD=({children:e})=>{let A=(0,vr.useMemo)(()=>Dw(),[]),j=Lw();return vr.default.createElement(Uw.Provider,{value:{buyAssetSectionAdapter:A,interceptors:j}},e)},Wa=()=>{let e=(0,vr.useContext)(Uw);if(!e)throw new Error("useSwapAssetSelect must be used within a SwapAssetSelectProvider");return e};var pD=()=>{let{interceptors:e}=Wa();return{executeInterceptors:(0,Qw.useCallback)((j,t)=>{for(let r of e)if(r.intercept(j,t)==="interrupt")return"interrupt";return"continue"},[e])}};n();s();var Oo=v(x());var Hw=3;function Qm(e){return{id:e.id,data:e.data,...e.header?{header:e.header}:{}}}var uD=e=>{let[A,j]=(0,Oo.useState)({}),t=(0,Oo.useCallback)((a,i)=>j(c=>({...c,[a]:i})),[]),{buyAssetSectionAdapter:r}=Wa(),o=(0,Oo.useMemo)(()=>r.sections(e),[r,e]);return(0,Oo.useMemo)(()=>o.map(a=>{switch(a.behavior){case"static":return Qm(a);case"collapsible":{if(a.data.length<=Hw)return Qm(a);let i=A[a.id],c=i?a.data:a.data.slice(0,Hw),p=()=>t(a.id,!i),d=Qm(a);return{...d,header:{...d.header,button:{label:i?T.t("commandShowLess"):T.t("commandShowMore"),onClick:p}},data:c}}}}),[o,A,t])};n();s();n();s();n();s();var Vw=3,rp=()=>{let e=LA.getMultivariateAssignment("latest-terms-of-service-version-number");return e&&l.number().safeParse(Number(e)).success?Number(e):Vw};var Hm=()=>{let e=kA(),A=Z();return dA({mutationFn:async t=>{if(!t)await LE(e);else{let r=rp();if(!r)return null;await KE(e,r)}A.setQueryData(["termsHaveBeenAcknowledgedLastSeenVersion"],t)}})};n();s();n();s();var Xw=async e=>await e.get("termsHaveBeenAcknowledgedLastSeenVersion");var Ja=()=>{let e=kA(),A=async()=>{let j=rp();if(!j)return!1;let t=await Xw(e);return!(t===null||t<j)};return eA({queryKey:["termsHaveBeenAcknowledgedLastSeenVersion"],queryFn:A})};n();s();var zw=v(x());n();s();var br=v(x());n();s();var WOA=["firstTimeOnboarding","isResettingApp"],Vm=["seed","seedless","privateKey"];var Xm=({onSuccess:e,onError:A}={})=>{let{t:j}=BA(),{data:[t]}=fA(["enable-onboarding-claim-username"]),{mutateAsync:r,isIdle:o,isPending:a,error:i}=aB(),c=EB(h=>h.username),p=sB(),{error:d}=xe(),{data:m,error:B,refetch:f}=UA(),{data:k,refetch:g}=EA(),{data:E}=kB(),y=(0,br.useMemo)(()=>{if(k)switch(k.type){case"seedless":case"seed":return k.seedIdentifier;case"privateKey":return k.privateKeyIdentifier;default:return}},[k]),F=(0,br.useMemo)(()=>{let h={};return k?.addresses.forEach(q=>{h[q.networkID]=q.address}),h},[k?.addresses]),S=k&&Vm.includes(k.type),$=!m||B instanceof iB,M=y&&E&&F,O=d===null&&S&&$&&!!M&&t&&!st(),G=(0,br.useCallback)(async()=>{if(!t||st())return!1;let h=await g();if(!(h&&h.data&&Vm.includes(h.data.type)))return!1;try{let C=await p.getUser(),R=await f(),N=R&&R.data;return!C||C&&!N}catch{return!1}},[p,t,g,f]),z=(0,br.useMemo)(()=>i instanceof Error&&i.message!=="Unknown error"?i.message:j("settingsClaimUsernameError"),[i,j]),D=(0,br.useCallback)(async()=>{M&&r({username:c,icon:lD(),addresses:F,accountIdentifiers:E.map(h=>h.identifier),secretIdentifiers:[y]}).then(()=>e?.()).catch(()=>A?.())},[E,r,M,A,e,F,y,c]);return(0,br.useMemo)(()=>({handleClaimUsername:D,shouldNavigateToQuickClaimUsername:G,quickClaimUsernameAvailable:O,claimUsernameErrorMessage:z,isClaimingUsernamePending:a,isClaimUsernameIdle:o}),[z,D,o,a,O,G])},lD=()=>`https://assets.phantom.app/assets/phemojis/variant${dD(1,337)}.png`,dD=(e,A)=>(e=Math.ceil(e),A=Math.floor(A),Math.floor(Math.random()*(A-e)+e));var mD=()=>{let e=Y(),{data:[A]}=fA(["enable-onboarding-claim-username-dropoff"]),{data:j}=Ku("QuickClaimUsername"),{quickClaimUsernameAvailable:t}=Xm();return(0,zw.useMemo)(()=>({shouldShow:A&&j?.length&&t,showFlow:r=>{e.capture("onboardingUsernameClaimDropoff"),r?.()}}),[e,A,t,j?.length])};n();s();var kD=()=>{let{data:e,isLoading:A}=Ja(),{mutate:j}=Hm(),{data:[t]}=fA(["enable-terms-of-service-update-interstitial"]);return{shouldShowTermsOfServiceUpdateInterstitial:!A&&!e&&t,setTermsAcknowledgement:j}};n();s();n();s();var gD=v(x());n();s();var Ww=Xt(Y,e=>new zm(e)),zm=class{#A;constructor(A){this.#A=A}onOpen=()=>this.#A.capture("connectHardwareOpen");onSelectedChains=A=>{let j=new Set(A),t=[];for(let o of I.getAllChainIDs())j.has(o)&&t.push(o);let r={numChains:t.length,selectedChains:t.map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(", ")};this.#A.capture("connectHardwareSelectedChains",{data:r})};onDerivedAccounts=A=>{let j={};for(let[t,r]of Object.entries(A.derivedAddresses)){if(!BD(t))continue;let o={numberOfDerivedAccounts:r.addresses.length};r.duration!==void 0&&(o.derivationDuration=r.duration),j[t]=o}this.#A.capture("connectHardwareAccountsDerived",{data:{...j}})};onDiscoveredAccounts=A=>{let{discoveredAccounts:j}=A,t={};for(let r of j){if(r.status==="undiscovered")continue;let o=r.accounts.reduce((a,{derivationPathType:i,hasAccountActivity:c})=>{let p=Or.getAddressType(i);return a[p]={derivationPathType:i,hasAccountActivity:c},a},{});for(let{hasAccountActivity:a,derivationPathType:i}of Object.values(o)){if(!a)continue;let c=t[i]??0;t[i]=c+1}}this.#A.capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:t}})};onConnectedAccounts=A=>{let j={};for(let t of A.accounts){let r=[...t.addresses,...t.publicKeys].reduce((o,a)=>{let i=Or.getAddressType(a.pathType);return o[i]=a.pathType,o},{});for(let o of Object.values(r)){let a=j[o]??0;j[o]=a+1}}this.#A.capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:A.accounts.length,numberOfAccountsImportedByDerivationPath:j}})}};function BD(e){return typeof e!="string"?!1:Object.keys(Iu).includes(e)}n();s();n();s();n();s();var op="@phantom/onboarding",Dt={firstTimeOnboarding:[`${op}:first-time-onboarding`],isResettingApp:[`${op}:is-resetting-app`],deriveLedgerAccounts:[`${op}:derive-ledger-accounts`],discoverLedgerAccounts:[`${op}:discover-ledger-accounts`]};n();s();n();s();n();s();n();s();var yD="/discover/v1",FD={Accept:"application/json"},hD=e=>{if(!e||!Array.isArray(e.accounts))return!1;for(let A of e.accounts)if(!(typeof A.address=="string"&&typeof A.amount=="string"&&(!A.lastActivityTimestamp||typeof A.lastActivityTimestamp=="number")&&A.chain&&typeof A.chain.id=="string"&&new Set(I.getAllNetworkIDs()).has(A.chain.id)&&typeof A.chain.name=="string"&&typeof A.chain.symbol=="string"&&typeof A.chain.imageUrl=="string"))return!1;return!0},SD=e=>!!e&&typeof e.message=="string",Wm=async e=>{if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");let A=await H.api().headers(FD).post(yD,e),j=A.data;if(!tA(A))throw SD(j)?new Error(j.message):new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`);if(hD(j))return j;throw new Error(`Invalid discover accounts response: ${JSON.stringify(j)}`)};var wD="fetch-multi-chain-accounts-by-seed",ID=()=>["bitcoinTaproot","bitcoinNativeSegwit"],$D=()=>["bip44Change","bip44","deprecated"],vD=()=>["bip44Ethereum","bip44EthereumSecondary","bip44EthereumTertiary"],bD=()=>["bip44Sui"],qD=(e,A)=>ID().map(j=>{let t={pathType:j,index:e},{publicKey:r}=A.derivePathType(j,e),o=Or.getAddressType(j),a=xs({publicKey:r,addressType:o});return{chainType:o,chainId:aA.Bitcoin.Mainnet,address:a,publicKey:Buffer.from(r).toString("hex"),pathParams:t}}),xD=(e,A)=>vD().map(j=>{let t={pathType:j,index:e},{publicKey:r}=A.derivePathType(j,e),o=Or.getAddressType(j),a=xs({publicKey:r,addressType:"eip155"});return{chainType:o,pathType:j,address:a,publicKey:Buffer.from(r).toString("hex"),pathParams:t}}),GD=(e,A)=>$D().map(j=>{let t={pathType:j,index:e},r=A.derivePathType(j,e),o;switch(j){case"bip44Root":case"bip44":case"bip44Change":o=r.publicKey;break;case"deprecated":o=Yk(r.secretKey).publicKey;break}let a=xs({publicKey:o,addressType:"solana"});return{chainType:"solana",chainId:aA.Solana.Mainnet,address:a,publicKey:Buffer.from(o).toString("hex"),pathParams:t}}),TD=(e,A)=>bD().map(j=>{let t={pathType:j,index:e},{publicKey:r}=A.derivePathType(j,e),o=xs({publicKey:r,addressType:"sui"});return{chainType:"sui",chainId:aA.Sui.Mainnet,address:o,publicKey:Wk(r),pathParams:t}}),PD=1e4,Jw=async(e,A=!0)=>{let j=Object.assign({},...e);try{let t=Object.values(j).map(({account:m})=>({address:m.address,chainId:m.chainId})),r;A?r=(await Uk(async()=>yi(Wm({accounts:t}),PD),()=>!0,2)).accounts:r=(await Wm({accounts:t})).accounts;let o={};for(let m of r){let{account:B}=j[`${m.chain.id}-${m.address}`],f=B.publicKey,k=B.chainType,g=Si(B.pathParams),E={...m,publicKey:f,chainType:k,derivationPathType:B.pathParams.pathType,hasAccountActivity:!!m.lastActivityTimestamp||parseFloat(m.amount)>0};o[g]=[...o[g]||[],E]}Object.keys(o).forEach(m=>{o[m]=o[m].sort((B,f)=>I.compareNetworkID(B.chain.id,f.chain.id))});let a=Object.values(o),i=a.filter(m=>m.some(B=>B.hasAccountActivity)),c=!!i.length;return(c?i:a).map(m=>{let B=m[0];return{status:"discovered",seedIndex:j[`${B.chain.id}-${B.address}`].account.pathParams.index??-1,isSelectedByDefault:c,accounts:m}})}catch{let t=Object.values(j).map(({account:i})=>i),r={};for(let i of t){let{account:c}=j[`${i.chainId}-${i.address}`],p=Si(c.pathParams),d={...i,chain:{id:i.chainId,name:I.getNetworkName(i.chainId),symbol:I.getTokenSymbol(i.chainId)},chainType:Or.getAddressType(c.pathParams.pathType),derivationPathType:c.pathParams.pathType,hasAccountActivity:!1};r[p]=[...r[p]||[],d]}return Object.keys(r).forEach(i=>{r[i]=r[i].sort((c,p)=>I.compareNetworkID(c.chain.id,p.chain.id))}),Object.values(r).map(i=>{let c=i[0];return{status:"undiscovered",seedIndex:j[`${c.chain.id}-${c.address}`].account.pathParams.index??-1,accounts:i,isSelectedByDefault:!1}})}},OD=async({hdWallet:e,startIndex:A,endIndex:j,enabledAddressTypes:t,enabledChains:r})=>{let o=[];for(let a=A;a<=j;++a){let i={};if(t.includes("bip122_p2wpkh"))for(let c of qD(a,e))i[`${aA.Bitcoin.Mainnet}-${c.address}`]={account:c};if(t.includes("eip155")){let c=xD(a,e),p=r.filter(d=>I.isEVMNetworkID(I[d].mainnetID));for(let d of p){let m=I[d];for(let{address:B,publicKey:f,chainType:k,pathParams:g}of c)i[`${m.mainnetID}-${B}`]={account:{chainType:k,chainId:m.mainnetID,address:B,publicKey:f,pathParams:g}}}}if(t.includes("solana"))for(let c of GD(a,e))i[`${c.chainId}-${c.address}`]={account:c};if(t.includes("sui"))for(let c of TD(a,e))i[`${c.chainId}-${c.address}`]={account:c};o.push(i)}return Jw(o)};function wMA({batchSize:e,hdWallet:A,enabledAddressTypes:j,enabledChains:t}){let r=!!A&&j.length!=0;return cj({enabled:r,queryKey:[wD,e],queryFn:async({pageParam:c=0})=>{try{if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!A)throw new Error("Missing HDWallet");let p=[],d=[],m=c===0,B=c,f=!0;for(;f;){let k=B,g=B+e-1,y=(await OD({hdWallet:A,startIndex:k,endIndex:g,enabledAddressTypes:j,enabledChains:t})).flat(1);B+=e,f=!1;for(let F of y)p.push(F),(F.status==="undiscovered"||F.isSelectedByDefault)&&d.push(F),m&&F.status==="discovered"&&F.isSelectedByDefault&&(f=!0)}if(m&&d.length===0&&p.length>1){let k=p[0],g=k.accounts.map(y=>({...y,hasAccountActivity:!1})),E={status:"undiscovered",seedIndex:k.seedIndex,accounts:g,isSelectedByDefault:!1};d.push(E)}return d}catch(p){throw p instanceof Error&&b.captureError(p,"account"),p}},getNextPageParam:(c,p)=>{let d=p.length,m=d?p[0]:[],B=m.length?MD(m[m.length-1].seedIndex,e):0;return d===1?B:B+e*(d-1)},gcTime:0,staleTime:0,initialPageParam:0})}var MD=(e,A)=>Math.ceil(e/A)*A+A;n();s();n();s();var CD=()=>{let e=kA(),A=async()=>{let t=await e.get("firstTimeOnboarding");return t===null?!0:t.isFirstTimeOnboarding},{data:j}=eA({queryKey:Dt.firstTimeOnboarding,queryFn:A});return j},_D=()=>{let e=kA(),A=Z();return dA({mutationFn:async t=>{await e.set("firstTimeOnboarding",{isFirstTimeOnboarding:t}),UE(e,t?void 0:Date.now()),A.setQueryData(Dt.firstTimeOnboarding,t)}})};n();s();var RD=()=>{let e=kA(),A=async()=>{let t=await e.get("isResettingApp");return t===null?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t},{data:j}=eA({queryKey:Dt.isResettingApp,queryFn:A});return j},DD=()=>{let e=kA(),A=Z();return dA({mutationFn:async t=>{let o=(await e.get("isResettingApp"))?.isFirstTimeResettingApp??!1;await e.set("isResettingApp",{isResettingApp:t,isFirstTimeResettingApp:o}),A.setQueryData(Dt.isResettingApp,{isResettingApp:t,isFirstTimeResettingApp:o})}})},ND=()=>{let e=kA(),A=Z();return dA({mutationFn:async t=>{let o=(await e.get("isResettingApp"))?.isResettingApp??!1;await e.set("isResettingApp",{isResettingApp:o,isFirstTimeResettingApp:t}),A.setQueryData(Dt.isResettingApp,{isResettingApp:o,isFirstTimeResettingApp:t})}})};n();s();var KD=v(uv()),LD=v(x());n();s();var UD=()=>{let{data:[e]}=fA(["enable-zero-balance-nux"]),{data:A}=EA(),{data:j}=mB(A?.identifier),t=A?.isReadOnly;return j?.value===0&&!t&&e};n();s();var QD=()=>{let{data:e}=Ju(),{data:A}=Hu({enabled:!!e?.expired}),{data:j=[]}=BB("recoverable-only");return{shouldShowVerifyPinPrompt:Nr("SeedlessPinVerification","enable-seedless-pin-verification-interstitial",()=>!!A&&!!e&&e.expired&&j.length>0&&!st())}};n();s();n();s();var nt=v(x());n();s();n();s();n();s();var HD=["SwapperNoQuotes","UnsupportedCountry","UnknownError"],Yw=(e,A,j,t)=>{e instanceof VA&&HD.includes(e.code)||(!A||A>=400&&A<500)&&b.addBreadcrumb(j,JSON.stringify(t),"info")};n();s();var Zw=async(e,A,j=void 0)=>{if(tA(e))return Promise.resolve();let t;try{t=e.data}catch{throw new VA({key:j})}let r=mc.safeParse(t);throw r.success?(b.addBreadcrumb(A,JSON.stringify(r.data),"info"),new VA({key:r.data.name})):new VA({key:j})};n();s();var AI=e=>{let A=new VA({key:"SwapperNoQuotes"});if(ba.safeParse(e?.type).success===!1)throw b.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let j=qa.safeParse(e);if(!j.success)throw b.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),A;if(j.data.quotes.length===0)throw A;return j.data};var eI="swap-quotes";async function np({sellTokenCaip19:e,buyTokenCaip19:A,taker:j,takerDestination:t,exactOut:r,sellAmount:o,sellAmountUsd:a,slippageTolerance:i,signal:c,enableAutoSlippage:p,priorityFee:d,tipAmount:m}){let B;try{Mr(j)&&(j.address=j.address.toLowerCase()),t&&Mr(t)&&(t.address=t.address.toLowerCase()),Mr(A)&&(A.address=A.address.toLowerCase()),Mr(e)&&(e.address=e.address.toLowerCase());let f="/swap/v2/quotes",k={sellToken:e,buyToken:A,taker:j,takerDestination:t,exactOut:r,sellAmount:o,sellAmountUsd:a,slippageTolerance:i,autoSlippage:p,priorityFee:d,tipAmount:m},g=await H.api().post(f,k,{signal:c});return B=g.status,await Zw(g,eI,"SwapperNoQuotes"),AI(g.data)}catch(f){let k=f instanceof VA?f:new VA;throw Yw(k,B,eI,{sellToken:e,buyToken:A,sellAmount:o,sellAmountUsd:a,slippageTolerance:i}),k}}var sp=class{getQuotes(A){return np({sellTokenCaip19:A.sell,buyTokenCaip19:A.buy,taker:A.taker,takerDestination:A.takerDestination,sellAmount:A.amount,sellAmountUsd:A.amountUsd,slippageTolerance:A.slippageTolerance,signal:A.signal,exactOut:A.exactOutEnabled,priorityFee:A.priorityFee,tipAmount:A.tipAmount,enableAutoSlippage:A.autoSlippageEnabled})}};n();s();n();s();var ap=class{constructor(A,j,t,r,o,a){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o;this.evmSwapCommand=a}createTransaction(){return xa({networkId:this.networkId,callerAddress:this.takerAddress,quote:this.quote})}async swap(A,j,t,r,o){return this.evmSwapCommand.swap(A,j,t,r,o)}async waitForConfirmation(A){return this.evmSwapCommand.waitForConfirmation(A)}};n();s();n();s();var rI=v(x());n();s();var jI=v(x());function rs(e){return(0,jI.useMemo)(()=>QA(e),[e])}function oI({sender:e}){let{t:A}=BA(),{currentQuote:j}=iA(),t=w(m=>m.buyFungible),r=w(m=>m.sellFungible),o=rs(je(j)),{data:a}=Jj({callerAddress:e,quote:j,sellFungible:r}),i=a?.transactionPairs?.flatMap(m=>[...Rr(m.sellToken)??[],...Rr(m.buyToken)??[]])??[],c=[...new Set(i)],{fungibles:p}=wj({keys:c});return{pendingActivityRows:(0,rI.useMemo)(()=>Mo({swapTransactions:a,sellFungible:r,buyFungible:t,fungibles:p,t:A,currentQuote:j,provider:o}),[a,r,t,p,A,j,o])}}function Mo({swapTransactions:e,sellFungible:A,buyFungible:j,fungibles:t,currentQuote:r,provider:o,t:a}){let i={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return e?e.type==="evm"?e.transactionTypes.reduce((c,p,d)=>{let m=A,B=j,f,k=e.transactionPairs;if(k&&k[d]){let g=k[d];m=ip(g.sellToken,t)??A,B=ip(g.buyToken,t)??j,f=g.approvalMetadata}if(p.includes("approval")){let g=m?.data.symbol??"";c.pendingApprovalActivityRows.push({topLeft:f?{text:`${a("transactionsPendingApproving")} ${f.symbol}`}:{text:`${a("transactionsPendingApproving")} ${g}`}})}else m&&B&&c.pendingSwapActivityRows.push(tI({sellFungible:m,buyFungible:B,sellAmount:r?.sellAmount,buyAmount:r?.buyAmount,provider:o,isBridge:p.includes("bridge"),t:a}));return c},i):e.transactionTypes.reduce((c,p,d)=>{let m=A,B=j,f=e.transactionPairs;if(f&&f[d]){let k=f[d];m=ip(k.sellToken,t)??A,B=ip(k.buyToken,t)??j}return m&&B&&c.pendingSwapActivityRows.push(tI({sellFungible:m,buyFungible:B,sellAmount:r?.sellAmount,buyAmount:r?.buyAmount,provider:o,isBridge:p.includes("bridge"),t:a})),c},i):i}var tI=({sellFungible:e,buyFungible:A,sellAmount:j,buyAmount:t,provider:r,isBridge:o,t:a})=>{let i=e.data.symbol,c=A.data.symbol,p=SA(j??0,e.data.decimals??0),d=SA(t??0,A.data.decimals??0);return{topLeft:{text:`${a(o?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${r}`},topRight:{text:`${d} ${c}`,color:"accentSuccess"},bottomLeft:{text:`${i} \u2192 ${c}`},bottomRight:{text:`${p} ${i}`}}},ip=(e,A)=>A.find(j=>(Rr(e)??[]).includes(j.data.key));var nI="standard",cp=class{constructor(A,j,t,r,o,a){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o;this.gasEstimation=a}createTransaction(){return Ta({quote:this.quote,callerAddress:this.takerAddress,networkId:this.networkId,sellFungible:this.executingQuote.sell})}async swap(A,j,t,r,o){let a=this.gasEstimation??await this.estimateGas(this.quote,this.executingQuote.response,nI,j,t);if(!a)throw new Error(`No gas estimation found for ${nI}`);let i=this.parsePendingActivity(this.executingQuote,j),{signature:c,error:p}=await b.startSpan("Process EVM Swap Txns",()=>Rc({transactions:j.transactions,transactionTypes:j.transactionTypes,networkID:this.networkId,gasEstimation:a,pendingSwapActivityRows:i.pendingSwapActivityRows,pendingApprovalActivityRows:i.pendingApprovalActivityRows,accountIdentifier:A,accountSigner:r,storage:o}));if(p)throw p;return{networkID:this.networkId,id:c}}async waitForConfirmation(A){await CB(A.networkID,A.id)}async estimateGas(A,j,t,r,o){let a=await Yo(this.networkId,!0);if(!a)return;let i=a[t];if(!i)return;let c={networkID:this.networkId,gasLimit:new AA(1),maxFeePerGas:i.maxFeePerGas,maxPriorityFeePerGas:i.maxPriorityFeePerGas};return gr.estimateGas({swapTransactions:r,evmGasEstimation:c,currentQuote:A,scanResult:o,includeGasBuffer:!0,networkID:this.networkId,gasBuffer:j.gasBuffer})}parsePendingActivity(A,j){let t=QA(je(A.quote));return Mo({swapTransactions:j,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:T.t})}};n();s();var sI=v(lv());n();s();var rt=class{constructor(A,j,t,r,o,a){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o;this.connection=a}async createTransaction(){return Oa({quote:this.quote,connection:this.connection})}async swap(A,j,t,r,o){let a=this.parsePendingActivity(this.executingQuote,j),{signature:i,error:c}=await Dc({callerAddress:this.takerAddress,connection:this.connection,networkID:this.networkId,transactions:j.transactions,pendingSwapActivityRows:a.pendingSwapActivityRows,accountIdentifier:A,accountSigner:r,storage:o});if(c)throw c;return{networkID:this.networkId,id:i}}async waitForConfirmation(A){let j=NB(A.networkID);await Oi({connection:j,signature:A.id})}parsePendingActivity(A,j){let t=QA(je(A.quote));return Mo({swapTransactions:j,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:T.t})}};var VD=l.object({signature:l.string()}),pp=class extends rt{constructor(j,t,r,o,a,i,c){super(j,t,r,o,a,i);this.executingQuote=j;this.takerAddress=t;this.networkId=r;this.quote=o;this.executionId=a;this.connection=i;this.gaslessSignature=c}async swap(j,t,r,o,a){let i=this.quote.transactionData[0];if(!i)throw new Error("No transaction data found in quote");let c=new JA.PublicKey(this.takerAddress),d=this.parsePendingActivity(this.executingQuote,t).pendingSwapActivityRows[0];if(!d)throw new Error("Unable to create pending activity for gasless");let m=await Mi({accountIdentifier:j,feePayer:c,connection:this.connection,accountSigner:o,transaction:aj(i,"bs58"),pendingTransactionInput:{ownerAddress:c.toBase58(),networkID:this.networkId,data:{signature:this.gaslessSignature},type:"swap",display:{summary:d}},storage:a,opts:{}});return{id:(await this.submitGaslessSwap(this.gaslessSignature,m)).signature,networkID:this.networkId}}async submitGaslessSwap(j,t){let r=await H.api().post("/gasless-swap/v1/submit",{quoteSignature:j,encoding:"bs58",chainId:this.networkId,transaction:sI.default.encode(t.serialize())}),o=VD.safeParse(r.data);if(!o.success)throw new Error("Failed to submit gasless swap");return o.data}};n();s();var XD="https://tp-rfq-api-staging.phantom.dev",zD=l.object({quoteId:l.string(),transactionId:l.string()}),up=class extends rt{constructor(j,t,r,o,a,i){super(j,t,r,o,a,i);this.executingQuote=j;this.takerAddress=t;this.networkId=r;this.quote=o;this.executionId=a;this.connection=i}async swap(j,t,r,o,a){let i=this.quote.transactionData[0];if(!i)throw new Error("No transaction data found in quote");let c=new JA.PublicKey(this.takerAddress),d=this.parsePendingActivity(this.executingQuote,t).pendingSwapActivityRows[0];if(!d)throw new Error("Unable to create pending activity for rfq");let m=await Mi({accountIdentifier:j,feePayer:c,connection:this.connection,accountSigner:o,transaction:aj(i,"bs58"),pendingTransactionInput:{ownerAddress:c.toBase58(),networkID:this.networkId,data:{signature:""},type:"swap",display:{summary:d}},storage:a,opts:{}});return{id:(await this.submitRFQSwap(m)).transactionId,networkID:this.networkId}}async submitRFQSwap(j){let t=Buffer.from(j.serialize()).toString("base64"),r=await H.post(`${XD}/v0/rfq/swap`,{chainId:this.networkId,quoteId:this.quote.rfqProps?.quoteId,signedPayload:t},{headers:{"X-Request-Id":this.executionId}}),o=zD.safeParse(r.data);if(!o.success)throw new Error("Failed to submit rfq swap");return o.data}};n();s();var lp=class{constructor(A,j,t,r,o,a){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o;this.connection=a;this.solanaSwapCommand=new rt(A,j,t,A.quote,o,a)}solanaSwapCommand;createTransaction(){return Ga({quote:this.quote,connection:this.connection})}async swap(A,j,t,r,o){return this.solanaSwapCommand.swap(A,j,t,r,o)}async waitForConfirmation(A){return this.solanaSwapCommand.waitForConfirmation(A)}};n();s();n();s();var os=class{constructor(A,j,t,r,o){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o}async createTransaction(){return Ma({quote:this.quote})}async swap(A,j,t,r,o){let a=this.parsePendingActivity(this.executingQuote,j),{signature:i,error:c}=await Nc({callerAddress:this.takerAddress,networkID:this.networkId,transactions:j.transactions,pendingSwapActivityRows:a.pendingSwapActivityRows,accountIdentifier:A,accountSigner:r,storage:o});if(c)throw c;return{networkID:this.networkId,id:i}}async waitForConfirmation(A){await Ti(this.networkId,A.id)}parsePendingActivity(A,j){let t=QA(je(A.quote));return Mo({swapTransactions:j,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:T.t})}};var dp=class{constructor(A,j,t,r,o){this.executingQuote=A;this.takerAddress=j;this.networkId=t;this.quote=r;this.executionId=o;this.suiSwapCommand=new os(A,j,t,A.quote,o)}suiSwapCommand;async createTransaction(){return Pa({quote:this.quote})}async swap(A,j,t,r,o){return this.suiSwapCommand.swap(A,j,t,r,o)}async waitForConfirmation(A){return this.suiSwapCommand.waitForConfirmation(A)}};var mp=class{create(A,j,t,r,o){if(I.isSolanaNetworkID(t)&&zj(A.quote)){let a=new rt(A,j,t,A.quote,Ej(),r);return A.quote.rfqProps?new up(A,j,t,A.quote,Ej(),r):A.quote.gaslessSignature?new pp(A,j,t,A.quote,Ej(),r,A.quote.gaslessSignature):a}else{if(I.isEVMNetworkID(t)&&Je(A.quote))return this.createEvmSwapCommand(A,j,t,o);if(I.isSuiNetworkID(t)&&xt(A.quote))return new os(A,j,t,A.quote,Ej());if(FA(A.quote)){if(I.isSolanaNetworkID(t))return new lp(A,j,t,A.quote,Ej(),r);if(I.isEVMNetworkID(t)){let a=this.createEvmSwapCommand(A,j,t,o);return new ap(A,j,t,A.quote,Ej(),a)}else if(I.isSuiNetworkID(t))return new dp(A,j,t,A.quote,Ej())}}throw new Error("Unsupported SwapQuote}")}createEvmSwapCommand(A,j,t,r){let o=r?r.filter(qi):void 0;return o&&o.length===0&&(o=void 0),new cp(A,j,t,A.quote,Ej(),o)}};n();s();n();s();var WD=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],Jm=class{ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(A,j={}){if(!A||typeof A!="string"&&typeof A.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof A.toString=="function"?A.toString():A,this.method=j.method||"GET",this.timeout=j.timeout??0,this.timeoutBeforeConnection=j.timeoutBeforeConnection??500,this.withCredentials=j.withCredentials||!1,this.headers=j.headers||{},this.body=j.body||void 0,this.debug=j.debug||!1,this.interval=j.pollingInterval??5e3,this.lineEndingCharacter=j.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(A,j){(A>0||j)&&(this._logDebug(`[EventSource] Will open new connection in ${A} ms.`),this._pollTimer=setTimeout(()=>{this.open()},A))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[A,j]of Object.entries(this.headers))this._xhr.setRequestHeader(A,j);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let A=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${WD[A.readyState]||"Unknown"}(${A.readyState}), status: ${A.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(A.readyState)&&(A.status>=200&&A.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(A.responseText||""),A.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):A.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:A.responseText,xhrStatus:A.status,xhrState:A.readyState}),A.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(A){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:A.message,error:A})}}_logDebug(...A){this.debug&&console.debug(...A)}_handleEvent(A){if(this.lineEndingCharacter===null){let p=this._detectNewlineChar(A);if(p!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(p).slice(1,-1)}`),this.lineEndingCharacter=p;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let j=this._getLastDoubleNewlineIndex(A);if(j<=this._lastIndexProcessed)return;let t=A.substring(this._lastIndexProcessed,j).split(this.lineEndingCharacter);this._lastIndexProcessed=j;let r,o=null,a=[],i=0,c="";for(let p=0;p<t.length;p++)if(c=t[p].trim(),c.startsWith("event"))r=c.replace(/event:?\s*/,"");else if(c.startsWith("retry"))i=parseInt(c.replace(/retry:?\s*/,""),10),isNaN(i)||(this.interval=i);else if(c.startsWith("data"))a.push(c.replace(/data:?\s*/,""));else if(c.startsWith("id"))o=c.replace(/id:?\s*/,""),o!==""?this.lastEventId=o:this.lastEventId=null;else if(c===""&&a.length>0){let d=r||"message",m={type:d,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(d,m),a=[],r=void 0}}_detectNewlineChar(A){let j=[this.CRLF,this.LF,this.CR];for(let t of j)if(A.includes(t))return t;return null}_getLastDoubleNewlineIndex(A){let j=this.lineEndingCharacter+this.lineEndingCharacter,t=A.lastIndexOf(j);return t===-1?-1:t+j.length}addEventListener(A,j){this.eventHandlers[A]===void 0&&(this.eventHandlers[A]=[]),this.eventHandlers[A].push(j)}removeEventListener(A,j){this.eventHandlers[A]!==void 0&&(this.eventHandlers[A]=this.eventHandlers[A].filter(t=>t!==j))}removeAllEventListeners(A){let j=Object.keys(this.eventHandlers);if(A===void 0)for(let t of j)this.eventHandlers[t]=[];else{if(!j.includes(A))throw Error(`[EventSource] '${A}' type is not supported event type.`);this.eventHandlers[A]=[]}}dispatch(A,j){if(Object.keys(this.eventHandlers).includes(A))for(let r of Object.values(this.eventHandlers[A]))r(j)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},kp=Jm;n();s();var JD=()=>{let e={"X-Phantom-Version":$A,"X-Phantom-Platform":se},A=_k();return A&&(e["X-Phantom-AnonymousId"]=A),e},Ym={name:"SwapperNoQuotes",message:"No quotes found"},ns=class{getOptions(A={}){return{...A,headers:{...JD(),...A.headers}}}createStreamUrl({amount:A,amountUsd:j,buy:t,sell:r,taker:o,takerDestination:a,slippageTolerance:i,exactOut:c,autoSlippage:p,priorityFee:d,tipAmount:m,clientEnableGaslessSwap:B,gaslessSwapMinAmount:f,isLedger:k}){let g=new URLSearchParams({taker:o,takerDestination:a,buyToken:J(W(t)),sellToken:J(W(r)),sellAmount:A,sellAmountUsd:j??"",exactOut:c?"true":"false",autoSlippage:p?"true":"false",clientEnableGaslessSwap:B?"true":"false"});return i&&g.set("slippageTolerance",String(i)),d&&g.set("priorityFee",String(d)),m&&g.set("tipAmount",String(m)),k!==void 0&&g.set("isLedger",String(k)),f&&g.set("gaslessSwapMinAmount",String(f)),`${Vt()}/swap/v2/stream/quotes?${g.toString()}`}handleNewQuoteResponse(A,j){try{if(!A)throw new Error("No data in new-quote-response");let t=JSON.parse(A),r=this.parseSwapQuotesResponse(t);j({type:"newQuoteResponse",quoteResponse:r})}catch{j({type:"error",errorResponse:Ym})}}handleErrorQuoteResponse(A,j){try{if(!A)throw new Error("No data in error-quote-response");let t=mc.safeParse(JSON.parse(A));j({type:"error",errorResponse:t.success?t.data:Ym})}catch{j({type:"error",errorResponse:Ym})}}parseSwapQuotesResponse(A){let j=new VA({key:"SwapperNoQuotes"});if(ba.safeParse(A?.type).success===!1)throw b.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let t=qa.safeParse(A);if(!t.success)throw b.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),j;if(t.data.includesAllProviders&&t.data.quotes.length===0)throw j;return t.data}};var Bp=class extends ns{eventSource;open(A,j){this.close(),this.eventSource=new kp(this.createStreamUrl(A),this.getOptions());let t=r=>{switch(r.type){case"new-quote-response":this.handleNewQuoteResponse(r.data,j);break;case"error-quote-response":this.handleErrorQuoteResponse(r.data,j);break;case"open":j({type:"open"});break;case"error":j({type:"error",errorResponse:{name:"UnknownError",message:r.message}});break;case"close":j({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",t),this.eventSource.addEventListener("error-quote-response",t),this.eventSource.addEventListener("open",t),this.eventSource.addEventListener("error",t),this.eventSource.addEventListener("close",t)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};n();s();var fp=class extends ns{eventSource;open(A,j){this.close(),this.eventSource=new kp(this.createStreamUrl(A),this.getOptions());let t=r=>{switch(r.type){case"new-quote-response":this.handleNewQuoteResponse(r.data,j);break;case"error-quote-response":this.handleErrorQuoteResponse(r.data,j);break;case"open":j({type:"open"});break;case"error":j({type:"error",errorResponse:{name:"UnknownError",message:r.message}});break;case"close":j({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",t),this.eventSource.addEventListener("error-quote-response",t),this.eventSource.addEventListener("open",t),this.eventSource.addEventListener("error",t),this.eventSource.addEventListener("close",t)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};n();s();var Ep=class{constructor(A){this.producer=A}listeners=new Set;openStream(A){this.listeners.forEach(j=>j.onEvent({type:"openRequested"})),this.producer.close(),this.producer.open(A,j=>{this.listeners.forEach(t=>t.onEvent(j)),j.type==="error"&&this.closeStream()})}closeStream(){this.producer.close()}subscribe(A){this.listeners.add(A)}unsubscribe(A){this.listeners.delete(A)}};n();s();n();s();n();s();async function ss({transactions:e,locale:A,url:j,deviceId:t,takerAddress:r,networkId:o,slippageType:a,quote:i,quoteResponse:c}){return await ea(A,t,{type:"transaction",userAccount:r,params:YD(e),url:j,networkID:o,context:FA(i)?"bridge":Dh(i)?"gaslessSwap":"swap",provider:ZD(i),slippageType:a,metadata:{swapper:{quoteOutputAmount:i.buyAmount,quoteOutputToken:J(c.buyToken),quoteInputAmount:i.sellAmount,quoteInputToken:J(c.sellToken)}}})}var YD=e=>{switch(e.type){case"evm":return{transactions:e.transactions};case"solana":return{transactions:e.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}};case"sui":return{transactions:e.transactions,method:"signAndSendTransaction"}}},ZD=e=>{let A=FA(e)?Kn(e):e?.sources??[];return QA(A)};n();s();var A2={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"};function e2(e,A){return{type:e,amountUsd:new P(A.amountUSD??0),amount:new P(A.amount??0)}}function as(e){return e.steps.flatMap(j=>j.includedFeeCosts).reduce((j,t)=>{if(!t)return j;let r=A2[t.name];return r&&new P(t.amount).gt(0)&&j.push(e2(r,t)),j},[])}function is(e,A,j){let t=e.steps.reduce((r,o)=>r.plus(o.nonIncludedNonGasFees),new P(0));return t.isZero()?[]:[{type:"nonIncludedNonGas",amountUsd:new P(Ze(A,t,j)??0),amount:t}]}var gp=class{constructor(A,j,t,r,o){this.networkID=A;this.account=j;this.priceClient=t;this.quoteInput=r;this.quoteResponse=o}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(A){let j=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.calculateNetworkFee(j,A,t),o=this.appendBridgeFees([r],A,t),a=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(a),fees:a},swapTransactions:j}}createSwapTransactions(A){return xa({networkId:this.networkID,callerAddress:this.checkChainAddress().address,quote:A})}appendPhantomFee(A,j){let t=j.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new P(t.percentage),amountUsd:new P(0),amount:new P(0)}]:A}appendBridgeFees(A,j,t){let r={[this.getNativeTokenCaip19()]:t},o=is(j,this.networkID,r),a=as(j);return[...A,...a,...o]}async calculateNetworkFee(A,j,t){let r=await this.estimateGas(j,A);if(!r)throw new Error("Unable to estimate gas");if(!t.usd)throw new Error("Price data not found");let o=r[0],a=I.getTokenDecimals(this.networkID),i=o.gasLimit.times(o.maxFeePerGas);return{type:"evmGas",amountUsd:new P(i).shiftedBy(-a).times(t.usd),amount:i}}async estimateGas(A,j){let t=await Yo(this.networkID,!0);if(!t)return;let r=t.standard;if(!r)return;let o={networkID:this.networkID,gasLimit:new P(1),maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas},a=await ss({transactions:j,locale:"en-us",url:"https://phantom.app",deviceId:"123",takerAddress:this.checkChainAddress().address,networkId:this.networkID,slippageType:this.quoteInput.autoSlippage?"auto":"fixed",quote:A,quoteResponse:this.quoteResponse});return gr.estimateGas({swapTransactions:j,evmGasEstimation:o,currentQuote:A,scanResult:a,includeGasBuffer:!0,networkID:this.networkID,gasBuffer:this.quoteResponse.gasBuffer})}checkChainAddress(){let A=this.account.addresses.find(j=>j.networkID===this.networkID);if(!A)throw new Error(`No address found for chain ${this.networkID}`);return Vo(A)&&(A.address=A.address.toLowerCase()),A}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};n();s();var yp=class{constructor(A,j,t,r,o){this.networkID=A;this.account=j;this.priceClient=t;this.quoteInput=r;this.quoteResponse=o}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(A){let j=await this.createSwapTransactions(A),t=await this.calculateNetworkFee(j,A),r=this.appendPhantomFee([t],A);return{quote:A,fees:{totalFees:this.sumFees(r),fees:r},swapTransactions:j}}createSwapTransactions(A){return Ta({networkId:this.networkID,callerAddress:this.checkChainAddress().address,quote:A,sellFungible:this.quoteInput.sell})}appendPhantomFee(A,j){let t=j.fees.find(r=>r.type==="phantom");return t?[...A,{type:"phantom",percentage:new P(t.percentage),amountUsd:new P(0),amount:new P(0)}]:A}async calculateNetworkFee(A,j){let t=await this.estimateGas(j,A);if(!t)throw new Error("Unable to estimate gas");let r=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!r.usd)throw new Error("Price data not found");let o=t[0],a=I.getTokenDecimals(this.networkID),i=o.gasLimit.times(o.maxFeePerGas);return{type:"evmGas",amountUsd:new P(i).shiftedBy(-a).times(r.usd),amount:i}}async estimateGas(A,j){let t=await Yo(this.networkID,!0);if(!t)return;let r=t.standard;if(!r)return;let o={networkID:this.networkID,gasLimit:new P(1),maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas},a=await ss({transactions:j,locale:"en-us",url:"https://phantom.app",deviceId:"123",takerAddress:this.checkChainAddress().address,networkId:this.networkID,slippageType:this.quoteInput.autoSlippage?"auto":"fixed",quote:A,quoteResponse:this.quoteResponse});return gr.estimateGas({swapTransactions:j,evmGasEstimation:o,currentQuote:A,scanResult:a,includeGasBuffer:!0,networkID:this.networkID,gasBuffer:this.quoteResponse.gasBuffer})}checkChainAddress(){let A=this.account.addresses.find(j=>j.networkID===this.networkID);if(!A)throw new Error(`No address found for chain ${this.networkID}`);return Vo(A)&&(A.address=A.address.toLowerCase()),A}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};n();s();var Fp=class{constructor(A,j,t){this.networkID=A;this.priceClient=j;this.connection=t}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(A){let j=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.calculateNetworkFee(j,t),o=this.appendBridgeFees([r],A,t),a=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(a),fees:a},swapTransactions:j}}createSwapTransactions(A){return Ga({quote:A,connection:this.connection})}appendPhantomFee(A,j){let t=j.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new P(t.percentage),amountUsd:new P(0),amount:new P(0)}]:A}appendBridgeFees(A,j,t){let r={[this.getNativeTokenCaip19()]:t},o=is(j,this.networkID,r),a=as(j);return[...A,...a,...o]}async calculateNetworkFee(A,j){if(!j.usd)throw new Error("Price data not found");let t=A.transactions.map(p=>this.processEncodedTx(p,this.networkID,this.connection)),o=(await Promise.all(t)).map(p=>p.networkFeeEstimation.value),a=new P(o[0]);return{type:"solanaNetwork",amountUsd:a.div(new P(JA.LAMPORTS_PER_SOL)).times(j.usd),amount:a}}async processEncodedTx(A,j,t){let r=aj(A,"bs58");return await fi(r,t),{networkFeeEstimation:await Pi(j,[r.message])}}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};n();s();n();s();function aI(e,A){return j2(e.fees,j=>{switch(j.type){case"gasless":return{type:"gasless",amountUsd:new P(0),amount:new P(0),percentage:new P(j.percentage)};case"phantom":return{type:"phantom",percentage:new P(j.percentage),amountUsd:new P(0),amount:new P(0)};case"ata":return new P(j.amount).isZero()?void 0:{type:"ata",amountUsd:new P(j.amount),amount:new P(0)};case"gasless_network":return{type:"solanaGaslessNetwork",amountUsd:new P(j.amount),amount:new P(0)};case"network":{let{amountUsd:t,amount:r}=Zm(j,A);return{type:"solanaNetwork",amountUsd:t,amount:r}}case"tips":{let{amountUsd:t,amount:r}=Zm(j,A);return{type:"tips",amountUsd:t,amount:r}}case"priority_fee":{let{amountUsd:t,amount:r}=Zm(j,A);return{type:"priorityFee",amountUsd:t,amount:r}}default:return}})}function Zm(e,A){let j=new P(e.amount);return{amountUsd:j.div(new P(JA.LAMPORTS_PER_SOL)).times(A),amount:j}}function j2(e,A){return e.reduce((j,t,r)=>{let o=A(t,r,e);return o!=null&&j.push(o),j},[])}var iI=["solanaNetwork","tips","priorityFee"],hp=class{constructor(A,j,t){this.networkID=A;this.priceClient=j;this.connection=t}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(A){let t=(await this.priceClient.getPrice(this.getNativeTokenCaip19())).usd;if(!t)throw new Error(`Price data not found for native token ${this.getNativeTokenCaip19()}`);let r=await this.createSwapTransactions(A),o=aI(A,t),a=await this.processParsedFees(o,t);return{quote:A,fees:{totalFees:this.sumFees(a),fees:a},swapTransactions:r}}async processParsedFees(A,j){if(A.find(c=>c.type==="solanaGaslessNetwork"))return A;let t=A.filter(c=>!iI.includes(c.type)),r=A.filter(c=>iI.includes(c.type)),o=A.find(c=>c.type==="priorityFee"),a=await this.calculateNetworkFee(o,j),i=this.sumNetworkFees(a,r);return[...t,i]}sumNetworkFees(A,j){return j.reduce((t,r)=>({...t,amount:t.amount.plus(r.amount),amountUsd:t.amountUsd.plus(r.amountUsd)}),A)}createSwapTransactions(A){return Oa({quote:A,connection:this.connection})}getAmountsFromNativeAmount(A,j){let t=new P(A.amount);return{amountUsd:t.div(new P(JA.LAMPORTS_PER_SOL)).times(j),amount:t}}async calculateNetworkFee(A,j){let t=new P(A?.amount??0);return{type:"solanaNetwork",amountUsd:t.div(new P(JA.LAMPORTS_PER_SOL)).times(j),amount:t}}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};n();s();n();s();var cs=class{constructor(A,j){this.networkID=A;this.priceClient=j}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(A){let j=await this.createSwapTransactions(A),t=await this.calculateNetworkFee(j),r=this.appendPhantomFee([t],A);return{quote:A,fees:{totalFees:this.sumFees(r),fees:r},swapTransactions:j}}createSwapTransactions(A){return Ma({quote:A})}appendPhantomFee(A,j){let t=j.fees.find(r=>r.type==="phantom");return t?[...A,{type:"phantom",percentage:new P(t.percentage),amountUsd:new P(0),amount:new P(0)}]:A}async calculateNetworkFee(A){let j=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!j.usd)throw new Error("Price data not found");let t=new P(0),r=new P(0);try{let o=await Promise.all(A.transactions.map(a=>Gi({networkID:this.networkID,transaction:Zo.deserializeTransactionString(a)})));r=new P(o.reduce((a,i)=>a+i.gasBudget.toNumber(),0)),t=r.dividedBy(1e9).multipliedBy(j.usd)}catch{return{type:"suiNetwork",amountUsd:new P(0),amount:new P(0)}}return{type:"suiNetwork",amountUsd:t,amount:r}}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};var Sp=class{constructor(A,j){this.networkID=A;this.priceClient=j;this.suiProcessQuoteCommand=new cs(A,j)}suiProcessQuoteCommand;getNativeTokenCaip19(){return this.suiProcessQuoteCommand.getNativeTokenCaip19()}async processQuote(A){let j=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.suiProcessQuoteCommand.calculateNetworkFee(j),o=this.appendBridgeFees([r],A,t),a=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(a),fees:a},swapTransactions:j}}appendBridgeFees(A,j,t){let r={[this.getNativeTokenCaip19()]:t},o=is(j,this.networkID,r),a=as(j);return[...A,...a,...o]}appendPhantomFee(A,j){let t=j.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new P(t.percentage),amountUsd:new P(0),amount:new P(0)}]:A}createSwapTransactions(A){return Pa({quote:A})}sumFees(A){return A.reduce((j,t)=>j.plus(t.amountUsd),new P(0))}};var wp=class{create(A,j,t){let r=j.sell.data.chain.id,o=j.buy.data.chain.id,a=XA(r,o);if(I.isSolanaNetworkID(r)){let i=af(A).connection;return a?new Fp(r,this.priceClient,i):new hp(r,this.priceClient,i)}else{if(I.isEVMNetworkID(r))return a?new gp(r,A,this.priceClient,j,t):new yp(r,A,this.priceClient,j,t);if(I.isSuiNetworkID(r))return a?new Sp(r,this.priceClient):new cs(r,this.priceClient)}throw new Error(`Unsupported network ID: ${r}`)}priceClient={getPrice:async A=>(await Ci({tokens:[_e(A)]}))[A]};isSupportedNetwork(A){return I.isSolanaNetworkID(A)||I.isEVMNetworkID(A)}},Ip=class{create(A,j,t){return{processQuote:async r=>({quote:r,fees:{totalFees:new P(0),fees:[]}})}}};n();s();n();s();n();s();var ps=e=>e.reduce((A,j)=>{if(!j||j.type!=="SPL")return A;let t;return j.type==="SPL"&&(t=t2(j)),t?{fees:[...A.fees,t],totalPercentFees:A.totalPercentFees+t.percentFee}:A},{fees:[],totalPercentFees:0}),t2=e=>{if(e.type!=="SPL")return;let j=(e.data.mintExtensions??[]).find(t=>t.extension==="transferFeeConfig");if(j)return{caip19:J(W(e)),fungibleKey:e.data.key,symbol:e.data.symbol??"",name:e.data.name??"",percentFee:j.state.newerTransferFee.transferFeeBasisPoints/100}};n();s();var r2=e=>e.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",Co=e=>{let A=P(e);return zk(e,r2(A))};var o2=.05,n2=5,s2=.5;function Ak(e,A,j,t){let{priceImpact:r,quoteSlippageTolerance:o}=a2(e),a=A.autoSlippage?o??j.slippageTolerance:j.slippageTolerance,i={type:"slippage",slippage:a,slippageType:A.autoSlippage?"auto":"fixed",alert:a&&a>=n2?"highSlippage":void 0},c={type:"priceImpact",priceImpactPercentage:bs(r.toNumber()),alert:r&&r.gte(o2)?"highPriceImpact":void 0,warning:r&&r.gte(s2)?"veryHighPriceImpact":void 0},d=[cI(e,A.buy,A.sell),i,c],m=ps([A.sell,A.buy]);return m.fees.length>0&&d.push({type:"transferFees",transferFees:m.totalPercentFees,transferTokenSymbol:A.sell.data.symbol??"",alert:"transferFees"}),t&&d.push({type:"fees",quoteFees:t}),d}function a2(e){return zj(e)?{priceImpact:e.priceImpact?P(e.priceImpact):P(0),quoteSlippageTolerance:e.slippageTolerance}:Je(e)?{priceImpact:e.priceImpact?P(e.priceImpact):P(0),quoteSlippageTolerance:e.slippageTolerance}:xt(e)?{priceImpact:e.priceImpact?P(e.priceImpact):P(0),quoteSlippageTolerance:e.slippageTolerance}:{priceImpact:P(0),quoteSlippageTolerance:void 0}}function cI(e,A,j){let{buyAmount:t,sellAmount:r}=e,o=new P(t).shiftedBy(-A.data.decimals).dividedBy(new P(r).shiftedBy(-j.data.decimals));return{type:"pricing",ratio:o,exchangeRate:`1 ${j.data.symbol} \u2248 ${Co(o)} ${A.data.symbol}`,exchangeRateFlipped:`1 ${A.data.symbol} \u2248 ${Co(P(1).dividedBy(o))} ${j.data.symbol}`}}n();s();var $p=class{queue=[];processing=!1;enqueue(A){this.queue.push(A),this.processNext()}clearQueue(){this.queue=[],this.processing=!1}async processNext(){if(this.processing||this.queue.length===0)return;this.processing=!0;let A=this.queue.shift();if(A)try{await A()}catch(j){console.error("Error processing task:",j)}this.processing=!1,this.processNext()}};n();s();var Ya=class{constructor(A){this.entries=A;for(let j of A)j.alert&&this.alerts.push(j.alert),j.warning&&this.warnings.push(j.warning)}alerts=[];warnings=[]};n();s();var pI=(d=>(d.SwapperNoQuotes="SwapperNoQuotes",d.InsufficientSellAmount="InsufficientSellAmount",d.CrossChainUnavailable="CrossChainUnavailable",d.TokenNotTradable="TokenNotTradable",d.NotEnoughSuiObjects="NotEnoughSuiObjects",d.FromTokenIsHoneyPotToken="FromTokenIsHoneyPotToken",d.ToTokenIsHoneyPotToken="ToTokenIsHoneyPotToken",d.InsufficientLiquidity="InsufficientLiquidity",d.SwapInitializationFailed="SwapInitializationFailed",d.pSolHighImpactError="pSolHighImpactError",d))(pI||{}),Za=class e extends Error{name;type;constructor(A,j,t){super(j),this.name=A,this.type=t}static fromErrorResponse(A,j){return(r=>Object.values(pI).includes(r))(A)?new e(A,j,A):new e(A,j)}};var i2="swap-quotes",vp=class{constructor(A,j){this.quoteStreamer=A;this.commandFactory=j}state={type:"idle"};listeners=[];swapTransactionQueue=new $p;start(A,j){this.setState({type:"starting",input:A,account:j}),this.quoteStreamer.subscribe(this.quoteStreamListener),this.quoteStreamer.openStream(A)}stop(){this.swapTransactionQueue.clearQueue(),this.setState({type:"idle"}),this.quoteStreamer.closeStream(),this.quoteStreamer.unsubscribe(this.quoteStreamListener)}quoteStreamListener={onEvent:A=>{switch(A.type){case"newQuoteResponse":switch(this.state.type){case"starting":let r=this.findPreferredQuote(this.state.input,A.quoteResponse);this.setState({type:"firstQuoteReceived",input:this.state.input,quote:r,response:A.quoteResponse,account:this.state.account,quoteDetails:new Ya(Ak(r,this.state.input,A.quoteResponse))}),this.enqueueQuoteToProcess(this.state.input,A.quoteResponse,this.state.account);break;case"quoteProcessed":this.enqueueQuoteToProcess(this.state.input,A.quoteResponse,this.state.account,this.state.prevProcessedQuote);break}break;case"error":let j=Za.fromErrorResponse(A.errorResponse.name,A.errorResponse.message),t=new VA({key:j.name});switch(b.addBreadcrumb(i2,JSON.stringify(j.name),"info"),this.state.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"error",error:t,quoteError:j,account:this.state.account,input:this.state.input});break}break;case"openRequested":break;case"close":this.setState({type:"idle"});break}}};enqueueQuoteToProcess(A,j,t,r){this.swapTransactionQueue.enqueue(()=>this.processQuote(j,A,t,r))}async processQuote(A,j,t,r){try{let o=this.findPreferredQuote(j,A),i=await this.commandFactory.create(t,j,A).processQuote(o);switch(this.state.type){case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"quoteProcessed",input:j,response:A,quote:o,prevProcessedQuote:r,nextProcessedQuote:i,account:t,quoteDetails:new Ya(Ak(o,j,A,i.fees))});break}return i}catch(o){throw b.captureError(o,"swapper"),o}}subscribe(A){this.listeners.push(A)}unsubscribe(A){this.listeners=this.listeners.filter(j=>j!==A)}getState(){return this.state}findPreferredQuote(A,j){let t=A.preferredProvider;return t&&j.quotes.find(r=>r.baseProvider.id===t)||j.quotes[0]}setState(A){let j=this.state;this.state=A,this.listeners.forEach(t=>t.onStateChange(j,A))}};n();s();n();s();n();s();n();s();var qA=class extends Error{code;detailMessage;constructor(A,j){super(A),this.code=A,this.detailMessage=j}};var c2="slippageToleranceExceeded",p2="INSUFFICIENT_FUNDS",u2=MB,l2="insufficient lamports",d2="lower balance than rent-exempt minimum",m2=OB,k2="Transaction confirmation failed",B2=["Ledger App not open","Ledger not connected","Unable to connect to Ledger","Unable to connect to Ledger device","Need permission to connect to Ledger"],f2="Ledger user rejected action",E2="Ledger Sign Error";function g2(e){try{return Number(e.split('"Custom":')[1].split("}")[0])}catch{return null}}function y2(e){switch(g2(e.message)){case 301:return"slippageToleranceExceeded";case 6e3:return"EmptyRoute";case 6001:return"slippageToleranceExceeded";case 6002:return"InvalidCalculation";case 6003:return"MissingPlatformFeeAccount";case 6004:return"InvalidSlippage";case 6005:return"NotEnoughPercent";case 6006:return"InvalidInputIndex";case 6007:return"InvalidOutputIndex";case 6008:return"NotEnoughAccountKeys";case 6009:return"NonZeroMinimumOutAmountNotSupported";case 6010:return"InvalidRoutePlan";case 6011:return"InvalidReferralAuthority";case 6012:return"LedgerTokenAccountDoesNotMatch";case 6013:return"InvalidTokenLedger";case 6014:return"IncorrectTokenProgramID";case 6015:return"TokenProgramNotProvided";case 6016:return"SwapNotSupported";case 6017:return"ExactOutAmountNotMatched";case 6018:return"SourceAndDstinationMintCannotBeTheSame";default:return null}}function F2(e){return B2.some(j=>e.message.includes(j))?"LedgerConnectionError":e.message.includes(f2)?"LedgerRejectAction":e.message.includes(E2)?"LedgerUnknownSignError":e.message.toLowerCase().includes("ledger")?"LedgerUnknownError":null}function qr(e){if(e===void 0)return new qA("UnknownError","No error provided");if(e instanceof qA)return e;let A=h2(e);if(A.message.includes(p2))return new qA("INSUFFICIENT_FUNDS");if(S2(A.message))return new qA("slippageToleranceExceeded");if(A.message==="Scan results are not valid")return new qA("Scan results are not valid");if([u2,l2,m2,d2].some(c=>A.message.includes(c)))return new qA("NotEnoughSol");let o=y2(A);if(o!==null)return new qA(o);if(A.message.includes(k2))return new qA("Transaction confirmation failed");let i=F2(A);return i!==null?new qA(i):new qA("UnknownError",A.message)}function h2(e){return typeof e=="string"?new Error(e):typeof e=="object"&&"logs"in e&&e.logs?.length?new Error(e.logs.join(`
`)):e}function S2(e){return e.includes(c2)}n();s();n();s();var uI=3;function bp(){try{let e=LA.getMultivariateAssignment("swapper-high-slippage-threshold"),A=Number(e);return!e||isNaN(A)?uI:A}catch{return uI}}var lI=({currentQuote:e,quoteResponse:A,gasEstimation:j,swapTransactions:t,scanResults:r,isSwapSimulationDisabled:o,slippageTolerance:a})=>{if(!e)throw new qA("Trying to execute swap with no current quote");if(!A)throw new qA("Trying to execute swap with no quote response");if(I.isEVMNetworkID(A.sellToken.chainId)&&(!j||j?.length===0||j?.length<(t?.transactions.length??1)))throw new qA("No gas estimation available");if(!t)throw new qA("No swap transactions available");if(r.state!=="valid"&&(b.addBreadcrumb("swapper","swapSimulationNotValid","info",zt({scanResults:r.state})),!o)){let c=["Scan results are not valid","AccountFrozen","INSUFFICIENT_FUNDS","INSUFFICIENT_GAS","slippageToleranceExceeded","SIMULATION_TIMEOUT","MissingArgument","STALE_QUOTE","SimulationUnknownError"];if(I2(r.state)&&c.includes(r.state.code)){if(w2(r.state,a))return;throw r.state}else throw new qA("Scan results are not valid")}};function w2(e,A){return e.code==="slippageToleranceExceeded"&&A&&A>=bp()}function I2(e){return e instanceof qA}var $2={swap:{solana:"executeSolanaSwap",evm:"executeEvmSwap",sui:"executeSuiSwap"},bridge:{solana:"executeSolanaBridge",evm:"executeEvmBridge",sui:"executeSuiBridge"}},ek=(e,A)=>$2[e?"bridge":"swap"][A??"solana"],dI=async({isBridge:e,addressType:A,isSwapSimulationDisabled:j,sender:t,currentQuote:r,quoteResponse:o,gasEstimation:a,swapTransactions:i,scanResults:c,pendingActivityRows:p,connection:d,logSwapFailureNoSignature:m,logTransactionSubmitted:B,onTransactionReceiptReceived:f,onTransactionSubmissionError:k,resetToInitialState:g,slippageTolerance:E,swapFungibles:y})=>{await b.startSpan(ek(e,i?.type),async()=>{g();let F;try{lI({currentQuote:r,quoteResponse:o,gasEstimation:a,swapTransactions:i,scanResults:c,isSwapSimulationDisabled:j,slippageTolerance:E});let S=await y({type:A,callerAddress:t,swapTransactions:i,pendingSwapActivityRows:p.pendingSwapActivityRows,pendingApprovalActivityRows:p.pendingApprovalActivityRows,gasEstimation:a,connection:d});if(f(S),S.error)throw S.id||m(),F=S.id,S.error;B(S)}catch(S){let $=qr(S);k($,F)}})};n();s();n();s();n();s();n();s();var Nt=(c=>(c.SlippageExceeded="SLIPPAGE_EXCEEDED",c.InsufficientFunds="INSUFFICIENT_FUNDS",c.InsufficientGas="INSUFFICIENT_GAS",c.AccountFrozen="ACCOUNT_FROZEN",c.SimulationTimeout="SIMULATION_TIMEOUT",c.StaleQuote="STALE_QUOTE",c.UnknownError="UNKNOWN_ERROR",c.SimulationFailed="SIMULATION_FAILED",c))(Nt||{}),us=class e extends Error{constructor(j,t,r){super(j);this.scannedTransactionResult=t;this.type=r;t&&(this.detailMessage=t.simulationError?.humanReadableError??(t.warnings.length>0?t.warnings[0].message:void 0)),this.type=r}detailMessage;static fromError(j){return j instanceof e?j:new e(j.message)}static fromScannedTransactionResult(j,t){return(o=>Object.values(Nt).includes(o))(j)?new e(j,t,j):new e(j,t)}};n();s();var _o=class e extends Error{constructor(j,t){super(j);this.type=t}static fromError(j){return new e(j.message)}static fromType(j){return new e(j,j)}};var mI="https://phantom.com",qp=class{constructor(A,j,t){this.swapCommand=A;this.send=j;this.executingQuote=t;this.takerAddress=A.takerAddress,this.networkId=A.networkId,this.quote=A.quote,this.executionId=A.executionId}takerAddress;networkId;quote;executionId;createTransaction(){return this.send({type:"executeSwapStarted",executionId:this.executionId,executingQuote:this.executingQuote}),this.swapCommand.createTransaction()}async simulate(A,j,t){try{this.send({type:"simulationRequestStarted",executionId:this.executionId,executingQuote:this.executingQuote,networkId:this.networkId});let r,o=re(T.language)??"en";switch(I.isSuiNetworkID(this.networkId)?r={type:"transaction",expectedChanges:[],warnings:[],advancedDetails:void 0,error:void 0,simulationError:void 0,block:void 0}:r=await ss({transactions:A,locale:o,url:mI,deviceId:t,takerAddress:this.takerAddress,networkId:this.networkId,slippageType:this.executingQuote.slippageType,quote:this.quote,quoteResponse:this.executingQuote.response}),r.error){case void 0:break;case"SIMULATION_FAILED":break;case"SLIPPAGE_EXCEEDED":if(this.executingQuote.response.slippageTolerance>=bp())break;default:throw us.fromScannedTransactionResult(r.error,r)}return this.send({type:"simulationPassed",scannedTransactionResult:r,executionId:this.executionId,networkId:this.networkId}),r}catch(r){throw this.send({type:"simulationFailed",error:us.fromError(r),executionId:this.executionId,networkId:this.networkId,url:mI}),r}}async swap(A,j,t,r,o){this.send({type:"transactionSubmissionStarted",executionId:this.executionId});try{let a=await this.swapCommand.swap(A,j,t,r,o);if(!a.id)throw _o.fromType("noSignature");return this.send({type:"transactionSubmissionSuccess",txReceipt:a,executionId:this.executionId}),a}catch(a){let i=a instanceof _o?a:_o.fromError(a);throw this.send({type:"transactionSubmissionFailed",error:i,executionId:this.executionId}),i}}async waitForConfirmation(A){this.send({type:"transactionConfirmationStarted",executionId:this.executionId,txReceipt:A});try{let j=await this.swapCommand.waitForConfirmation(A);return this.send({type:"transactionConfirmed",executionId:this.executionId,txReceipt:A}),j}catch(j){throw this.send({type:"transactionConfirmationFailed",error:j,txReceipt:A,executionId:this.executionId}),j}}};n();s();n();s();var jk=class extends Error{constructor(A,j){super(`Can't transition to ${j} from ${A.type}`)}},xp=class{state=new Map;listeners=new Set;send(A){A.type==="executeSwapStarted"&&this.state.set(A.executionId,{type:"idle",executingQuote:A.executingQuote});let j=this.state.get(A.executionId);if(!j)throw new Error(`No previous state found for execution id: ${A.executionId}`);let t=j;try{return t=this.detectNextState(j,A),t.type==="transactionConfirmed"?this.state.delete(A.executionId):this.state.set(A.executionId,t),t}catch{return j}finally{this.notifyListeners(A,j,t,this.state)}}notifyListeners(A,j,t,r){try{this.listeners.forEach(o=>o.onStateChange(A,j,t,r))}catch{}}getState(){return this.state}addListener(A){this.listeners.add(A)}removeListener(A){this.listeners.delete(A)}detectNextState(A,j){switch(j.type){case"executeSwapStarted":return ot(A,"idle"),{type:"started",executingQuote:j.executingQuote};case"simulationRequestStarted":return ot(A,"started"),{type:"simulating",executingQuote:A.executingQuote};case"simulationPassed":return ot(A,"simulating"),{type:"simulated",scannedTransactionResult:j.scannedTransactionResult,executingQuote:A.executingQuote};case"simulationFailed":return ot(A,"simulating"),{type:"simulationFailed",error:j.error,executingQuote:A.executingQuote};case"transactionSubmissionStarted":return ot(A,"simulated"),{type:"submittingTransaction",executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionSubmissionFailed":return ot(A,"submittingTransaction"),{type:"transactionSubmissionFailed",error:j.error,executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionSubmissionSuccess":return ot(A,"submittingTransaction"),{type:"transactionSubmitted",txReceipt:j.txReceipt,executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionConfirmationStarted":return ot(A,"transactionSubmitted"),{type:"confirmingTransaction",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,executingQuote:A.executingQuote};case"transactionConfirmationFailed":return ot(A,"transactionSubmitted"),{type:"transactionNotConfirmed",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,error:j.error,executingQuote:A.executingQuote};case"transactionConfirmed":return ot(A,"confirmingTransaction"),{type:"transactionConfirmed",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,executingQuote:A.executingQuote}}}};function ot(e,A){if(e.type!==A)throw new jk(e,A)}n();s();function kI(e){return e.type==="quote"}n();s();n();s();var b2={"Could not find any routes":"noRoute"},Gp=class e extends Error{type;constructor(A,j){super(j??A),this.type=A}static fromMessage(A){let j=A?b2[A]??"undefinedError":"undefinedError";return new e(j,A)}};var Ro=class extends Error{constructor(A,j){super(`Can't transition to ${j} from ${A.type}`)}},Tp=class{state;listeners=new Set;constructor(A){this.state=A??{type:"idle"}}send(A){let j=this.state;try{return j=this.detectNextState(this.state,A),this.state=j,j}catch{return this.state}finally{this.notifyListeners(A,this.state,j)}}getState(){return this.state}addListener(A){this.listeners.add(A)}removeListener(A){this.listeners.delete(A)}notifyListeners(A,j,t){try{this.listeners.forEach(r=>r.onStateChange(A,j,t))}catch{}}detectNextState(A,j){switch(j.type){case"setPair":return{type:"pair",buy:j.buy,sell:j.sell,amount:j.amount};case"quoteRequestStarted":switch(A.type){case"pair":case"quote":case"quoteError":return{type:"fetchingQuote",buy:A.buy,sell:A.sell,amount:j.amount,slippageType:j.slippageType};default:throw new Ro(A,j.type)}case"quoteRequestError":if(A.type!=="fetchingQuote")throw new Ro(A,j.type);return{type:"quoteError",buy:A.buy,sell:A.sell,amount:A.amount,error:j.error,slippageType:A.slippageType};case"quoteResponseReceived":if(A.type!=="fetchingQuote")throw new Ro(A,j.type);let t=j.response.quotes[0];return t?{type:"quote",response:j.response,buy:A.buy,sell:A.sell,quote:t,amount:A.amount,slippageType:A.slippageType}:{type:"quoteError",buy:A.buy,sell:A.sell,amount:A.amount,error:new Gp("noRoute"),slippageType:A.slippageType};case"quoteResponseStreamed":switch(A.type){case"pair":case"fetchingQuote":case"quote":case"quoteError":return{type:"quote",response:j.response,buy:A.buy,sell:A.sell,quote:j.quote,amount:{amount:j.quoteInput.amount,perspective:j.quoteInput.exactOut?"buy":"sell"},slippageType:j.quoteInput.autoSlippage?"auto":"fixed"};default:throw new Ro(A,j.type)}case"userSelectedQuote":if(A.type!=="quote")throw new Ro(A,j.type);return{type:"quote",quote:j.quote,buy:A.buy,sell:A.sell,response:A.response,amount:A.amount,slippageType:A.slippageType}}}};n();s();n();s();var fI=l.object({buyToken:l.custom(),sellToken:l.custom(),buyTokenPrice:l.custom().optional(),sellTokenPrice:l.custom().optional()}),ei=class e extends Error{constructor(j,t){super(t??j.name);this.type=j}static fromError(j){return new e({name:"unknown"},j.message)}};var Pp=class{async initialize(A,j){let t=j.reduce((a,i)=>(a[i.networkID]=i.address,a),{}),r=await H.api().headers({"Content-Type":"application/json"}).timeout(X({seconds:20})).post("/swap/v2/initialize",{...A,addresses:t});if(r.status!==200)throw new VA({key:"SwapInitializationFailed"});let o=fI.safeParse(r.data);if(!o.success)throw new VA({key:"SwapInitializationFailed"});return o.data}};n();s();var Op=class{state={type:"idle"};eventListeners=[];send(A){let j=this.state,t=j;try{return t=this.detectNextState(A),this.state=t,t}catch{return j}finally{this.eventListeners.forEach(r=>r.onStateChange(A,j,t))}}detectNextState(A){switch(A.type){case"initializeStarted":return{type:"initializing",mode:A.mode};case"initializeCompleted":if(this.state.type==="initializing")return{type:"pair",mode:this.state.mode,sellToken:A.result.sellToken,buyToken:A.result.buyToken,sellTokenPrice:A.result.sellTokenPrice,buyTokenPrice:A.result.buyTokenPrice,warnings:Go(A.result.buyToken)};throw new Error("Invalid state");case"initializeFailed":if(this.state.type!=="initializing")throw new Error("Invalid state");return{type:"error",error:A.error};case"switchTokens":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:this.state.buyToken,buyToken:this.state.sellToken,sellTokenPrice:this.state.buyTokenPrice,buyTokenPrice:this.state.sellTokenPrice,warnings:Go(this.state.sellToken)};case"changeToken":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:A.perspective==="sell"?A.token:this.state.sellToken,buyToken:A.perspective==="buy"?A.token:this.state.buyToken,sellTokenPrice:A.sellTokenPrice??this.state.buyTokenPrice,buyTokenPrice:A.buyTokenPrice??this.state.sellTokenPrice,warnings:Go(A.perspective==="buy"?A.token:this.state.buyToken)};case"updateBalances":if(this.state.type!=="pair")throw new Error("Invalid state");if(J(W(this.state.sellToken))!==A.sellTokenCaip19)throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:{...this.state.sellToken,data:{...this.state.sellToken.data,balance:A.sellTokenBalance}},buyToken:this.state.buyToken,sellTokenPrice:this.state.sellTokenPrice,buyTokenPrice:this.state.buyTokenPrice,warnings:Go(this.state.buyToken)}}}getState(){return this.state}subscribe(A){this.eventListeners.push(A)}unsubscribe(A){this.eventListeners=this.eventListeners.filter(j=>j!==A)}};var ji=class{constructor(A,j,t,r){this.apiClient=A;this.swapCommandFactory=j;this.quoteProcessor=t;this.account=r,this.quoteProcessor.subscribe(this.quoteProcessorListener),this.tokenStateMachine.subscribe(this.tokenStateListener)}stateMachine=new Tp;executeSwapStateMachine=new xp;account;config={slippageType:"auto",slippageTolerance:1.3};swapInitializer=new Pp;tokenStateMachine=new Op;accountChangeListeners=[];tokenStateListener={onStateChange:(A,j,t)=>{t.type==="pair"&&(this.setPair(t.buyToken,t.sellToken,{amount:"0",perspective:"sell"}),A.type==="changeToken"&&this.refreshQuoteProcessor())}};initializeSwap(A){let j=this.checkAccount();this.tokenStateMachine.send({type:"initializeStarted",mode:A}),this.swapInitializer.initialize(A,j.addresses).then(t=>{this.tokenStateMachine.send({type:"initializeCompleted",result:t})}).catch(t=>{b.captureError(t,"swapper"),t instanceof ei?this.tokenStateMachine.send({type:"initializeFailed",error:t}):this.tokenStateMachine.send({type:"initializeFailed",error:ei.fromError(t)})})}updateBalances({sellTokenBalance:A,sellTokenCaip19:j}){this.getTokenState().type==="pair"&&this.tokenStateMachine.send({type:"updateBalances",sellTokenBalance:A,sellTokenCaip19:j})}getTokenState(){return this.tokenStateMachine.getState()}subscribeToken(A){return this.tokenStateMachine.subscribe(A),()=>this.unsubscribeToken(A)}unsubscribeToken(A){this.tokenStateMachine.unsubscribe(A)}quoteProcessorListener={onStateChange:(A,j)=>{(j.type==="firstQuoteReceived"||j.type==="quoteProcessed")&&this.send({type:"quoteResponseStreamed",response:j.response,quoteInput:j.input,quote:j.quote})}};isValidAmount(A){try{let j=new P(A);return j.isFinite()?!j.isNegative():!1}catch{return!1}}setAmount(A,j){let{amount:t}=A;if(t===""&&(t="0"),!this.isValidAmount(t))return;this.quoteProcessor.stop();let r=this.checkAccount(),o=this.getState(),a={...this.config,...j};switch(o.type){case"pair":case"quote":case"quoteError":if(t==="0"||t===""){this.send({type:"setPair",buy:o.buy,sell:o.sell,amount:A});return}let i=this.checkChainAddress(o.sell.data.chain.id),c=this.checkChainAddress(o.buy.data.chain.id),p={chainId:i.networkID,resourceType:"address",address:i.address},d={chainId:c.networkID,resourceType:"address",address:c.address};try{let m={amount:new P(A.amount).shiftedBy(A.perspective==="buy"?o.buy.data.decimals:o.sell.data.decimals).toString(),amountUsd:P(A.amount).times(A.perspective==="buy"?o.buy.data.price??0:o.sell.data.price??0).toString(),buy:o.buy,sell:o.sell,taker:J(p),takerDestination:J(d),slippageTolerance:a.slippageTolerance,autoSlippage:a.slippageType==="auto",exactOut:A.perspective==="buy",priorityFee:a.priorityFee,tipAmount:a.tipAmount,preferredProvider:a.preferredProvider,clientEnableGaslessSwap:a.gasslessEnabled,gaslessSwapMinAmount:a.gaslessMinAmount,isLedger:r.type==="ledger"};this.quoteProcessor.start(m,r)}catch(m){console.error("Error when streaming quotes",m)}break}}setPair(A,j,t){this.send({type:"setPair",buy:A,sell:j,amount:t})}switchTokens(){this.tokenStateMachine.send({type:"switchTokens"})}setAccount(A){this.account=A,this.accountChangeListeners.forEach(j=>j.onAccountChange(A))}getAccount(){return this.account}async fetchQuotes({amount:A,amountUsd:j,buy:t,sell:r,slippageTolerance:o,autoSlippageEnabled:a,priorityFee:i,tipAmount:c,signal:p}){let d=W(r),m=W(t),B=A.perspective==="buy",f=new P(A.amount).shiftedBy(A.perspective==="buy"?t.data.decimals:r.data.decimals).toString();this.send({type:"quoteRequestStarted",amount:A,slippageType:a?"auto":"fixed"});let k=this.checkChainAddress(r.data.chain.id),g={chainId:k.networkID,resourceType:"address",address:k.address},E;if(XA(r.data.chain.id,t.data.chain.id)){let y=this.checkChainAddress(t.data.chain.id);E={chainId:y.networkID,resourceType:"address",address:y.address}}try{let y=await this.apiClient.getQuotes({sell:d,buy:m,amount:f,amountUsd:j,taker:g,takerDestination:E,slippageTolerance:o??0,autoSlippageEnabled:a,exactOutEnabled:B,priorityFee:i,tipAmount:c,signal:p});return this.send({type:"quoteResponseReceived",response:y}),y}catch(y){throw this.send({type:"quoteRequestError",error:y}),y}}async swap(A,j,t,r,o,a){let i=this.getState();if(!kI(i))throw new Error(`Can't swap from ${i.type}`);this.quoteProcessor.stop();let c=this.checkAccount(),p=this.checkChainAddress(i.sell.data.chain.id),d={account:c,buy:i.buy,sell:i.sell,amount:i.amount,quote:i.quote,response:i.response,slippageType:i.slippageType},m=this.swapCommandFactory.create(d,p.address,p.networkID,o,a),B=new qp(m,k=>this.executeSwapStateMachine.send(k),d),f=await B.createTransaction();await b.startSpan(ek(FA(i.quote),f.type),async()=>{let k=await B.simulate(f,t,r),g=await B.swap(c.identifier,f,k,A,j);await B.waitForConfirmation(g)})}changeToken(A,j){let t=this.getTokenState();if(t.type!=="pair")return;let r=j==="buy"?A:t.buyToken,o=j==="sell"?A:t.sellToken;Ci({tokens:[W(r),W(o)]}).then(a=>{let i=a[J(W(r))],c=a[J(W(o))];this.tokenStateMachine.send({type:"changeToken",token:A,perspective:j,buyTokenPrice:i,sellTokenPrice:c})})}selectQuote(A){this.send({type:"userSelectedQuote",quote:A})}setQuoteConfig(A){this.config={...this.config,...A},this.refreshQuoteProcessor()}refreshQuoteProcessor(){let A=this.getLastQuoteProcessorSwapAmount();A&&this.setAmount(A)}getLastQuoteProcessorSwapAmount(){let A=this.getQuoteProcessorState();switch(A.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":let j=A.input;return{amount:new P(j.amount).shiftedBy(-1*(j.exactOut?j.buy.data.decimals:j.sell.data.decimals)).toString(),perspective:j.exactOut?"buy":"sell"};default:return}}getState(){return this.stateMachine.getState()}getExecuteState(){return this.executeSwapStateMachine.getState()}stopProcessingQuotes(){this.quoteProcessor.stop()}subscribeExecution(A){return this.executeSwapStateMachine.addListener(A),()=>this.unsubscribeExecution(A)}unsubscribeExecution(A){this.executeSwapStateMachine.removeListener(A)}getQuoteProcessorState(){return this.quoteProcessor.getState()}subscribeQuoteProcessor(A){return this.quoteProcessor.subscribe(A),()=>this.unsubscribeQuoteProcessor(A)}unsubscribeQuoteProcessor(A){this.quoteProcessor.unsubscribe(A)}stopQuoteProcessor(){this.quoteProcessor.stop()}subscribeAccountChange(A){return this.accountChangeListeners.push(A),()=>this.unsubscribeAccountChange(A)}unsubscribeAccountChange(A){this.accountChangeListeners=this.accountChangeListeners.filter(j=>j!==A)}send(A){return this.stateMachine.send(A)}checkAccount(){if(!this.account)throw new Error("Must set a MultiChainAccount");return this.account}checkChainAddress(A){let t=this.checkAccount().addresses.find(r=>r.networkID===A);if(!t)throw new Error(`No address found for chain ${A}`);return Vo(t)&&(t.address=t.address.toLowerCase()),t}};var EI=(0,nt.createContext)(null);function x2({children:e,processorMode:A="noOp"}){let{data:j}=EA(),t=(0,nt.useMemo)(()=>G2(A),[A]);return(0,nt.useEffect)(()=>{j&&t.setAccount(j)},[j,t]),nt.default.createElement(EI.Provider,{value:t},e)}function Pe(){let e=(0,nt.useContext)(EI);if(!e)throw new Error("useSwapper must be used within a SwapperProvider");return e}function G2(e){return new ji(new sp,new mp,new vp(new Ep(ge?new fp:new Bp),e==="noOp"?new Ip:new wp))}n();s();n();s();var Mp=v(x());n();s();n();s();n();s();n();s();var P2=v(x());n();s();var T2=v(x());n();s();var tk=TA(e=>({preferredProvider:void 0,setPreferredProvider:A=>e({preferredProvider:A})}));n();s();var M2=v(x());n();s();var O2=v(x());n();s();var yI=v(x());n();s();n();s();var rk=v(x());n();s();var Kt=e=>e&&FA(e)?e.executionDuration:0;n();s();var gj=v(x());n();s();n();s();n();s();n();s();function Cp({buyAssetUsdValue:e,buyToken:A,sellAssetUsdValue:j,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:a,priceImpact:i,provider:c,baseProvider:p,slippageTolerance:d,transactionId:m,slippageType:B,sellSwapFilter:f,isRetry:k,analyticsContext:g}){let E=AS({buyAssetUsdValue:e,buyToken:A,sellAssetUsdValue:j,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:a,priceImpact:i,provider:c,baseProvider:p,slippageTolerance:d,slippageType:B,sellSwapFilter:f,isRetry:k,analyticsContext:g});return E?{data:{...E,id:m}}:{}}n();s();var _p=({txReceipt:e,networkID:A,amountType:j,swapAnalytics:t})=>{let r=Jt(A);b.addBreadcrumb("swapper","submittedTransaction","info",{...r,txReceipt:e.id,method:r.chainType==="solana"?"signAndSendTransaction":r.chainType==="eip155"?"eth_sendRawTransaction":r.chainType==="sui"?"signAndExecuteTransaction":"UNKNOWN"}),r.chainType==="solana"?t.submittedTransaction(e.id,{...r,method:"signAndSendTransaction",swapType:j==="sell"?"exactIn":"exactOut"}):r.chainType==="eip155"?t.submittedTransaction(e.id,{...r,method:"eth_sendRawTransaction",swapType:j==="sell"?"exactIn":"exactOut"}):r.chainType==="sui"&&t.submittedTransaction(e.id,{...r,method:"signAndExecuteTransaction",swapType:j==="sell"?"exactIn":"exactOut"})};n();s();var Gr=e=>e?FA(e)?void 0:e.priceImpact:0;n();s();var FI=TA(e=>({lastFailedSwap:void 0,setLastFailedSwap:A=>{e({lastFailedSwap:A})}}));function hI(){return FI.getState().lastFailedSwap}function ok(e){FI.getState().setLastFailedSwap(e)}var ti=class{constructor(A,j,t="swapperClassic"){this.swapAnalytics=A;this.analytics=j;this.uiContext=t}onStateChange(A,j,t,r){switch(A.type){case"executeSwapStarted":this.analytics.capture("swapperSwap",{data:{...this.createAnalyticsPayload(t.executingQuote).data,uiContext:this.uiContext}});let o=Da({buyAssetUsdValue:t.executingQuote.buy.data.usd,buyToken:t.executingQuote.buy,sellAssetUsdValue:t.executingQuote.sell.data.usd,sellToken:t.executingQuote.sell,quote:t.executingQuote.quote,slippageTolerance:this.parseSlippageTolerance(t.executingQuote.slippageType,t.executingQuote.quote,t.executingQuote.response),slippageType:t.executingQuote.slippageType,sellSwapFilter:w.getState().swapFilter,isRetry:this.isRetry(t.executingQuote),analyticsContext:t.executingQuote.quote.analyticsContext,baseProvider:t.executingQuote.quote.baseProvider?.id??""});o&&(b.addBreadcrumb("swapper","approved","info",zt(o.swap)),this.swapAnalytics.approved(o));break;case"simulationFailed":A.error.type!=="SLIPPAGE_EXCEEDED"&&b.captureError(A.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:_2(A.error)}});break;case"transactionSubmissionFailed":b.captureError(A.error,"swapper"),A.error.type==="noSignature"&&this.analytics.capture("swapperSwapFailureNoSignature"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:A.error.message,uiContext:this.uiContext}});break;case"transactionSubmissionSuccess":_p({txReceipt:A.txReceipt,networkID:A.txReceipt.networkID,amountType:t.executingQuote.amount.perspective==="buy"?"buy":"sell",swapAnalytics:this.swapAnalytics});break;case"transactionConfirmationFailed":let a=qr(A.error);b.captureError(A.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:a.message,uiContext:this.uiContext}});let i=Jt(A.txReceipt.networkID),c={chainId:I.getChainID(A.txReceipt.networkID),networkId:A.txReceipt.networkID},p=A.txReceipt;switch(this.analytics.capture("waitForTransactionConfirmationError",{data:{...c,errorMessage:a.message}}),i.chainType){case"eip155":case"solana":case"sui":b.addBreadcrumb("swapper","transactionStatus","error",{...i,txReceipt:p.id}),this.swapAnalytics.transactionStatus(p.id,{...i,status:{type:"error"}});break}break;case"transactionConfirmed":this.analytics.capture("swapperSwapSuccess",{data:{...this.createAnalyticsPayload(t.executingQuote,A.txReceipt).data,uiContext:this.uiContext}});let d=Jt(A.txReceipt.networkID);switch(b.addBreadcrumb("swapper","transactionStatus","info",{...d,txReceipt:A.txReceipt.id}),d.chainType){case"eip155":case"solana":case"sui":this.swapAnalytics.transactionStatus(A.txReceipt.id,{...d,status:{type:"confirmed"}});break}break}this.isFailureEvent(A)?ok(t.executingQuote):A.type==="transactionSubmissionSuccess"&&ok(void 0)}createAnalyticsPayload(A,j){let t=A.quote,r=w.getState();return Cp({buyToken:A.buy,sellToken:A.sell,buyAmount:t.buyAmount.toString(),sellAmount:t.sellAmount.toString(),phantomFeeUiAmount:um(t).amountUsd?.toString()??"",priceImpact:Gr(t),provider:QA(je(t)),buyAssetUsdValue:r.buyUsdValue,sellAssetUsdValue:r.sellUsdValue,slippageTolerance:this.parseSlippageTolerance(A.slippageType,t,A.response),transactionId:j?.id??"",slippageType:A.slippageType,sellSwapFilter:r.swapFilter,isRetry:this.isRetry(A),analyticsContext:A.quote.analyticsContext,baseProvider:A.quote.baseProvider?.id??""})}parseSlippageTolerance(A,j,t){switch(A){case"fixed":return t.slippageTolerance;case"auto":return Wj(j)?j.slippageTolerance:t.slippageTolerance}}isRetry(A){let j=hI();if(!j)return!1;let t=J(W(j.buy)),r=J(W(j.sell)),o=J(W(A.buy)),a=J(W(A.sell));return t===o&&r===a}isFailureEvent(A){switch(A.type){case"simulationFailed":case"transactionSubmissionFailed":case"transactionConfirmationFailed":return!0;default:return!1}}};function _2(e){switch(e.type){case"SLIPPAGE_EXCEEDED":return"slippageToleranceExceeded";case"INSUFFICIENT_FUNDS":return"INSUFFICIENT_FUNDS";case"INSUFFICIENT_GAS":return"INSUFFICIENT_GAS";case"ACCOUNT_FROZEN":return"AccountFrozen";case"STALE_QUOTE":return"STALE_QUOTE";case"SIMULATION_TIMEOUT":return"SIMULATION_TIMEOUT";case"UNKNOWN_ERROR":return"SimulationUnknownError";case"SIMULATION_FAILED":return"SIMULATION_FAILED";default:return"Scan results are not valid"}}n();s();var ri=class{constructor(A){this.queryClient=A}onStateChange(A,j,t,r){let{sell:o,quote:a,account:i}=t.executingQuote;if(A.type==="transactionConfirmed"){let c=new AA(o.data.amount),p=new AA(a.sellAmount),d=c.minus(p).toString();Uc(this.queryClient,{id:es(o),amount:d}),this.queryClient.invalidateQueries({queryKey:rf.tokens(i.addresses)}),this.queryClient.invalidateQueries({queryKey:of.tokenBalance({wallets:i.addresses,encodedCaip19:J(W(o))})})}}};n();s();var R2="swap-validation",oi=class{simulationAnalytics;constructor(A){this.simulationAnalytics=new oo(A)}onStateChange(A,j,t){switch(A.type){case"simulationPassed":let r=A.scannedTransactionResult;this.simulationAnalytics.onScannedTransactionByUser({networkId:A.networkId,warnings:r.warnings.map(a=>a.severity),shouldBlock:!!r.block,errorCode:r.error??""});break;case"simulationFailed":let o=A.error.scannedTransactionResult;if(o){this.simulationAnalytics.onScannedTransactionByUser({networkId:A.networkId,warnings:o.warnings.map(a=>a.severity),shouldBlock:!!o.block,errorCode:o.error??""}),o?.error&&b.addBreadcrumb(R2,`Simulation error: ${JSON.stringify({error:o.error})}`,"info");return}this.simulationAnalytics.onFailedScannedTransactionByUser({networkId:A.networkId,url:A.url}),b.addBreadcrumb("simulation",`networkID: ${A.networkId}, url: ${A.url}, type: transaction`,"info");break}}};n();s();var ni=class{onStateChange(A,j,t,r){let o=this.toLegacyTransition(A,t);o&&fc(o.nextState,o.event)}toLegacyTransition(A,j){let{buy:t,sell:r,quote:o,response:a}=j.executingQuote;switch(A.type){case"simulationFailed":return{event:{type:"simulationRequestError",error:A.error},nextState:{type:"simulationFailed",buy:t,sell:r,response:a,quote:o,scannedTransactionResult:A.error.scannedTransactionResult,simulationError:A.error.message}};case"transactionSubmissionFailed":return{event:{type:"transactionSubmissionFailed",error:A.error},nextState:{type:"transactionSubmissionFailed",buy:t,sell:r,response:a,quote:o,error:A.error}};case"transactionConfirmationFailed":return{event:{type:"transactionConfirmationFailed",error:A.error,txReceipt:A.txReceipt},nextState:{type:"transactionNotConfirmed",buy:t,sell:r,response:a,quote:o,error:A.error,txReceipt:A.txReceipt}};default:return}}};n();s();n();s();n();s();n();s();n();s();var SI=e=>{let A,j=new Set,t=(d,m)=>{let B=typeof d=="function"?d(A):d;if(!Object.is(B,A)){let f=A;A=m??(typeof B!="object"||B===null)?B:Object.assign({},A,B),j.forEach(k=>k(A,f))}},r=()=>A,c={setState:t,getState:r,getInitialState:()=>p,subscribe:d=>(j.add(d),()=>j.delete(d)),destroy:()=>{(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),j.clear()}},p=A=e(t,r,c);return c},wI=e=>e?SI(e):SI;var CI=v(x(),1),_I=v(PI(),1),{useDebugValue:tN}=CI.default,{useSyncExternalStoreWithSelector:rN}=_I.default,OI=!1,oN=e=>e;function nN(e,A=oN,j){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&j&&!OI&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),OI=!0);let t=rN(e.subscribe,e.getState,e.getServerState||e.getInitialState,A,j);return tN(t),t}var MI=e=>{(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let A=typeof e=="function"?wI(e):e,j=(t,r)=>nN(A,t,r);return Object.assign(j,A),j},sN=e=>e?MI(e):MI,RI=e=>((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),sN(e));n();s();var iN=3e3,Ue=RI(e=>({toast:void 0,toastId:void 0,visible:!1,currentTimer:null,hideToast(A){e(j=>A&&j.toastId!==A?j:(j.currentTimer&&clearTimeout(j.currentTimer),{visible:!1,currentTimer:null}))},removeToast(){e(A=>(A.currentTimer&&clearTimeout(A.currentTimer),{toast:void 0,toastId:void 0,visible:!1,currentTimer:null}))},success(A){e(j=>{j.currentTimer&&clearTimeout(j.currentTimer);let t=setTimeout(()=>{e({visible:!1,currentTimer:null})},iN);return{toast:{type:"Success",...A},toastId:A.id??Ps(),visible:!0,currentTimer:t}})},failed(A){e(j=>(j.currentTimer&&clearTimeout(j.currentTimer),{toast:{type:"Failed",...A},toastId:A.id??Ps(),visible:!0,currentTimer:null}))},progress(A){e(j=>(j.currentTimer&&clearTimeout(j.currentTimer),{toast:{type:"Progress",...A},toastId:A.id??Ps(),visible:!0,currentTimer:null}))},message(A){e(j=>(j.currentTimer&&clearTimeout(j.currentTimer),{toast:{type:"Default",...A},toastId:A.id??Ps(),visible:!0,currentTimer:null}))}}));n();s();var si=e=>{let A=Kt(e);return kj(A)};n();s();n();s();function DI({sell:e,buy:A,onBuyFungiblePress:j}){let t=`${T.t("swapTxConfirmationSwapFailed")} ${e.data.symbol} \u2192 ${A.data.symbol}`,r=I.getChainDefinition(e.data.chain.id).tokenSymbol,o=T.t("buyAssetInterpolated",{tokenSymbol:r});return{title:t,message:T.t("swapTabInsufficientFunds"),onPress:j,buttonText:o}}n();s();function NI(e){switch(e.type){case"SLIPPAGE_EXCEEDED":return T.t("swapTxConfirmationSwapFailedSlippageLimit");case"INSUFFICIENT_FUNDS":return T.t("swapTxConfirmationSwapFailedInsufficientBalance");case"INSUFFICIENT_GAS":return T.t("swapTxConfirmationSwapFailedInsufficientGas");case"ACCOUNT_FROZEN":return T.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return T.t("swapTxConfirmationSwapFailedSimulationTimeout");case"STALE_QUOTE":return T.t("swapTxConfirmationSwapFailedStaleQuote");case"UNKNOWN_ERROR":return T.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return T.t("swapTxConfirmationSwapFailedTryAgain")}}function KI(e,A,j,t,r,o){let{sell:a,buy:i}=A,c=cN(e,a,i,r,t,j,o);return c||{title:`${T.t("swapTxConfirmationSwapFailed")} ${a.data.symbol} \u2192 ${i.data.symbol}`,message:NI(e),onPress:()=>{Ue.getState().hideToast(),t()},buttonText:T.t("commandRetry")}}function cN(e,A,j,t,r,o,a){if(!(e.type&&!a.includes(e.type)))switch(e.type){case"INSUFFICIENT_FUNDS":return DI({sell:A,buy:j,onBuyFungiblePress:()=>{Ue.getState().hideToast(),o()}});case"SLIPPAGE_EXCEEDED":return t.selectedSetting.type==="auto"?void 0:{title:T.t("swapEnableAutoSlippageTitleToast",{sellSymbol:A.data.symbol,buySymbol:j.data.symbol}),buttonText:T.t("swapEnableAutoSlippageButtonToast"),message:"",onPress:()=>{t.setSlippageSetting({type:"auto"}),r(),Ue.getState().hideToast()}}}}var ai=class{constructor(A,j,t,r,o,a=lN){this.showFungibleDetails=A;this.showBuyFungibleScreen=j;this.slippageSettings=t;this.supportedCustomSimulationToastErrorTypes=r;this.retryAndNavigateToSwapper=o;this.toastMessageParser=a}onStateChange(A,j,t,r){let{sell:o,buy:a,quote:i}=t.executingQuote;switch(A.type){case"executeSwapStarted":pN(FA(i)?T.t("swapInitiatingBridgeToast",{sellSymbol:o.data.symbol,sellChain:o.data.chain.name,buySymbol:a.data.symbol,buyChain:a.data.chain.name}):T.t("swapSwappingToast",{sellSymbol:o.data.symbol,buySymbol:a.data.symbol}));break;case"transactionConfirmed":uN(this.toastMessageParser.parseTransactionConfirmed(o,a,i),()=>this.showFungibleDetails(a));break;case"simulationFailed":LI(KI(A.error,t.executingQuote,this.showBuyFungibleScreen,()=>this.handleRetryPress(t.executingQuote),this.slippageSettings,this.supportedCustomSimulationToastErrorTypes));break;case"transactionSubmissionFailed":case"transactionConfirmationFailed":LI({title:`${T.t("swapTxConfirmationSwapFailed")} ${o.data.symbol} \u2192 ${a.data.symbol}`,message:T.t("swapTxConfirmationSwapFailedUnknownError"),onPress:()=>{this.handleRetryPress(t.executingQuote)},buttonText:T.t("commandRetry")});break}}handleRetryPress(A){Ue.getState().hideToast(),this.retryAndNavigateToSwapper(A)}};function pN(e){Ue.getState().progress({message:e,onPress:()=>{Ue.getState().hideToast()}})}function uN(e,A){Ue.getState().success({id:"swap-success",message:e,onPress:()=>{Ue.getState().hideToast(),A()}})}function LI(e){Ue.getState().failed(e)}var lN={parseTransactionConfirmed(e,A,j){return FA(j)?T.t("swapBridgeInitiatedToast",{sellSymbol:e.data.symbol,sellChain:e.data.chain.name,buySymbol:A.data.symbol,buyChain:A.data.chain.name,estimatedTime:si(j)}):T.t("swapSwappedToast",{sellSymbol:e.data.symbol,buySymbol:A.data.symbol})}};var Dp=class{intercept(A){let{swapper:j,connection:t,storage:r,vaultProxy:o,locale:a,analytics:i,resetSwapper:c,queryClient:p,showFungibleDetails:d,showBuyFungibleScreen:m,swapAnalytics:B,gasEstimation:f,slippageSettings:k,supportedCustomSimulationToastErrorTypes:g,navigateToSwapper:E,storePairs:y,isMobile:F}=A;if(!F||j.getAccount()?.type==="ledger")return"continue";let $=j.getState();if($.type!=="quote")return"continue";let{quote:M,sell:O,buy:G}=$;return this.isSupportedQuote(M)?((async()=>{y(O,G);let z=await i.getDeviceId(),D=new ai(d,m,k,g,N=>{E(N)}),h=new ri(p),q=new ti(B,i),C=new oi(i),R=new ni;try{j.subscribeExecution(h),j.subscribeExecution(C),j.subscribeExecution(q),j.subscribeExecution(D),j.subscribeExecution(R),await Promise.all([j.swap(o,r,a,z,t,f),c()])}catch{}finally{j.unsubscribeExecution(h),j.unsubscribeExecution(C),j.unsubscribeExecution(q),j.unsubscribeExecution(D),j.unsubscribeExecution(R)}})(),"interrupt"):"continue"}isSupportedQuote(A){return zj(A)||Je(A)||xt(A)||FA(A)}};n();s();n();s();var Np=class{intercept({hasViewedAutoSlippageOptIn:A,selectedSetting:j,setHasViewedAutoSlippageOptIn:t,showOverlay:r}){return!A&&j!=="auto"?(r("autoSlippageOptIn"),t(!0),"interrupt"):"continue"}};function UI(e,A){let j=[];return e&&j.push(new Np),A&&j.push(new Dp),j}n();s();var Kp=class{async fetch(A){return await np(A)}stopFetching(){}getFetchInterval(A){return A}};n();s();var Lp=class{constructor(A){this.swapper=A}async fetch(A){let j=mN(A.amount,A.sell,A.buy);return this.swapper.setPair(A.buy,A.sell,j),await this.swapper.fetchQuotes({buy:A.buy,sell:A.sell,amount:j,amountUsd:A.sellAmountUsd,slippageTolerance:A.slippageTolerance,autoSlippageEnabled:A.enableAutoSlippage,priorityFee:A.priorityFee,tipAmount:A.tipAmount})}stopFetching(){this.swapper.stopProcessingQuotes()}getFetchInterval(A){return A}};function mN(e,A,j){let t=e.type==="sell"?A:j;return{amount:new P(e.value).shiftedBy(-t.data.decimals).toString(),perspective:e.type}}n();s();var Up=class{constructor(A,j){this.swapper=A;this.queryClient=j}queryKey;quoteProcessorListener={onStateChange:(A,j)=>{if(!this.queryKey){console.error("queryKey is not set");return}j.type==="quoteProcessed"&&this.queryClient.setQueryData(this.queryKey,j.response)}};async fetch(A,j){return this.queryKey=j,this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener),new Promise((t,r)=>{let o=kN(A.amount,A.sell,A.buy),a={onStateChange:(i,c)=>{switch(c.type){case"firstQuoteReceived":t(c.response),this.swapper.unsubscribeQuoteProcessor(a);break;case"error":r(c.error),this.swapper.unsubscribeQuoteProcessor(a),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener);break}}};this.swapper.subscribeQuoteProcessor(this.quoteProcessorListener),this.swapper.subscribeQuoteProcessor(a),this.swapper.setPair(A.buy,A.sell,o),this.swapper.setAmount(o,{slippageTolerance:A.slippageTolerance,slippageType:A.enableAutoSlippage?"auto":"fixed",priorityFee:A.priorityFee,tipAmount:A.tipAmount})})}stopFetching(){this.swapper.getQuoteProcessorState().type!=="idle"&&(this.swapper.stopProcessingQuotes(),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener))}getFetchInterval(A){return!1}};function kN(e,A,j){let t=e.type==="sell"?A:j;return{amount:new P(e.value).shiftedBy(-t.data.decimals).toString(),perspective:e.type}}n();s();var ck=v(x());var QI=()=>{let e=(0,ck.useCallback)(()=>{Nn()},[]),A=(0,ck.useCallback)(()=>{dc()},[]);return{onSwapTabEnter:e,onSwapTabExit:A}};var HI=(0,gj.createContext)(void 0),BN=({children:e})=>{let{data:[A,j,t,r,o]}=fA(["enable-auto-slippage","enable-swapper-toasts","enable-swapper-toasts-auto-slippage","enable-swapper-keypad-swap","enable-quote-streaming"]),a=(0,gj.useMemo)(()=>A?["auto","fixed"]:["fixed"],[A]),i=(0,gj.useMemo)(()=>t?["SLIPPAGE_EXCEEDED"]:[],[t]),c=(0,gj.useMemo)(()=>UI(A,j),[A,j]),p=!0,d=Pe(),m=Z(),B=(0,gj.useMemo)(()=>o?new Up(d,m):j&&ge?new Lp(d):new Kp,[d,j,o,m]),{onSwapTabEnter:f,onSwapTabExit:k}=QI(),g=(0,gj.useMemo)(()=>ge?To("full"):To("compactNoSymbol"),[]);return gj.default.createElement(HI.Provider,{value:{slippageSettingTypes:a,reviewInterceptors:c,showStickyCTAButton:p,getSwapQuotesStrategy:B,supportedCustomSimulationToastErrorTypes:i,showKeypadSwapButton:r,onSwapTabEnter:f,onSwapTabExit:k,balanceDisplayStrategy:g}},e)},Qp=()=>{let e=(0,gj.useContext)(HI);if(!e)throw new Error("useSwapTab must be used within a SwapTabProvider");return e};n();s();var fN=e=>kc.safeParse(e).success;n();s();var tj=v(x());n();s();n();s();var Lt=v(x());n();s();var VI=({networkID:e,txReceipt:A,preferredExplorers:j})=>{let t=A?.id??"";if(!t)return;let r=j?.explorers[e];return gB({networkID:e,endpoint:"transaction",explorerType:r,param:t})};n();s();function XI(e,A){if(A){let j=EN(e),t=yN(e,A),r=FN(e,A);return{notEnoughSol:A.message==="NotEnoughSol",txErrorTitle:j,txErrorMessage:t,txErrorHelpButtonLink:r}}return{notEnoughSol:!1,txErrorTitle:"",txErrorMessage:"",txErrorHelpButtonLink:""}}var EN=e=>e?T.t("swapTxBridgeFailed"):T.t("swapTxConfirmationSwapFailed"),gN=e=>{switch(e.message){case"LedgerConnectionError":return T.t("swapTxConfirmationSwapFailedLedgerConnectionError");case"LedgerRejectAction":return T.t("swapTxConfirmationSwapFailedLedgerReject");case"LedgerUnknownSignError":return T.t("swapTxConfirmationSwapFailedLedgerSignError");case"LedgerUnknownError":return T.t("swapTxConfirmationSwapFailedLedgerError");default:return null}},yN=(e,A)=>{let j=gN(A);if(j!==null)return j;if(e)switch(A.message){case"slippageToleranceExceeded":return T.t("swapTxConfirmationSwapFailedSlippageLimit");default:return T.t("swapTxBridgeFailedDescription")}else switch(A.message){case"INSUFFICIENT_FUNDS":return T.t("swapTxConfirmationSwapFailedInsufficientBalance");case"slippageToleranceExceeded":return T.t("swapTxConfirmationSwapFailedSlippageLimit");case"EmptyRoute":return T.t("swapTxConfirmationSwapFailedEmptyRoute");case"AccountFrozen":return T.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return T.t("swapTxConfirmationSwapFailedSimulationTimeout");case"INSUFFICIENT_GAS":return T.t("swapTxConfirmationSwapFailedInsufficientGas");case"Scan results are not valid":return T.t("swapTxConfirmationSwapFailedUnknownError");case"STALE_QUOTE":return T.t("swapTxConfirmationSwapFailedStaleQuote");case"SimulationUnknownError":return T.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return T.t("swapTxConfirmationSwapFailedTryAgain")}},FN=(e,A)=>e?uc:A.message==="AccountFrozen"?yh:uc;n();s();var zI=({sellAmount:e,sellFungible:A,buyAmount:j,buyFungible:t,txStatus:r,txReceipt:o,swapTransactions:a,isReadyToExecute:i,uiEstimatedTime:c,isBridge:p,isLedger:d,notEnoughSol:m,txError:B,txErrorTitle:f,txErrorMessage:k,explorerUrl:g,txErrorHelpButtonLink:E,addressType:y})=>{let F=SA(e,A?.data.decimals??0).toNumber(),S=SA(j,t?.data.decimals??0).toNumber(),$=r==="success",M=r==="error",O=!!o,G=a?.transactions.length||0;return{sellAsset:{amount:F,symbol:A?.data.symbol??"",networkID:A?.data.chain.id??aA.Solana.Mainnet},buyAsset:{amount:S,symbol:t?.data.symbol??"",networkID:t?.data.chain.id??aA.Solana.Mainnet},estimatedTime:c,isBridge:p,isSuccess:$,isFailure:M,isLedger:d,isClosable:O,notEnoughSol:m,txError:B,txErrorTitle:f,txErrorMessage:B?.detailMessage?`${k}

${B?.detailMessage}`:k,txLink:g??"",txErrorHelpButtonLink:E,numberOfTransactions:G,isReadyToExecute:i,addressType:y}};var pk=({sellFungible:e,txReceipt:A,swapTransactions:j,isBridge:t,txError:r,txStatus:o,isReadyToExecute:a,isLedger:i})=>{let c=e?.data.chain.id??aA.Solana.Mainnet,{notEnoughSol:p,txErrorTitle:d,txErrorMessage:m,txErrorHelpButtonLink:B}=(0,Lt.useMemo)(()=>XI(t,r),[t,r]),f=(0,Lt.useMemo)(()=>I.getAddressType(c),[c]),{currentQuote:k}=iA(),[g]=(0,Lt.useState)(k),{buyAmount:E,sellAmount:y}=g??{buyAmount:"0",sellAmount:"0"},F=w(G=>G.buyFungible),{data:S}=TB(),$=(0,Lt.useMemo)(()=>VI({txReceipt:A,networkID:c,preferredExplorers:S}),[A,c,S]),M=(0,Lt.useMemo)(()=>si(g),[g]);return(0,Lt.useCallback)(()=>zI({sellFungible:e,txReceipt:A,addressType:f,swapTransactions:j,isBridge:t,txError:r,sellAmount:y,buyAmount:E,buyFungible:F,txStatus:o,isReadyToExecute:a,uiEstimatedTime:M,isLedger:i,notEnoughSol:p,txErrorTitle:d,txErrorMessage:m,explorerUrl:$,txErrorHelpButtonLink:B}),[e,A,f,j,t,r,y,E,F,o,a,M,i,p,d,m,$,B])()};n();s();var ds=v(x());var Do=()=>{let e=Y(),A=no(),{currentQuote:j,quoteResponse:t,selectedProviderIndex:r,selectedBaseProvider:o}=iA(),{analyticsContext:a}=j??{analyticsContext:void 0},i=w(G=>G.buyFungible),c=w(G=>G.sellFungible),p=w(G=>G.buyUsdValue),d=w(G=>G.sellUsdValue),m=w(G=>G.swapFilter),{selectedSetting:B}=zA(),f=w.getState().amountType,k=c?.data.chain.id??aA.Solana.Mainnet,g=Gj(),{transition:E}=Gt(),y=(0,ds.useCallback)(G=>{let z=yr(r,B.type,t);return Cp({buyToken:i,sellToken:c,buyAmount:j?.buyAmount.toString()??"",sellAmount:j?.sellAmount.toString()??"",phantomFeeUiAmount:g.phantomFee.amountUsd?.toString()??"",priceImpact:Gr(j),provider:QA(je(j)),baseProvider:o,buyAssetUsdValue:p,sellAssetUsdValue:d,slippageTolerance:z,transactionId:G??"",slippageType:B.type,sellSwapFilter:m,analyticsContext:a})},[i,c,j,g.phantomFee.amountUsd,p,d,t,r,B.type,m,a,o]),F=(0,ds.useCallback)(G=>{_p({txReceipt:G,networkID:k,amountType:f,swapAnalytics:A})},[k,f,A]),S=(0,ds.useCallback)((G,z)=>{E({type:"transactionSubmissionFailed",error:G}),G.message!=="Scan results are not valid"&&G.message!=="slippageToleranceExceeded"&&b.captureError(G,"swapper");let D=y(z);e.capture("swapperSwapFailure",{data:{...D.data,error:G.message}})},[e,y,E]),$=()=>{e.capture("swapperSwapFailureNoSignature")},M=(0,ds.useCallback)(G=>{let z=y(G.id);e.capture("swapperSwapSuccess",z);let D=Jt(G.networkID);b.addBreadcrumb("swapper","transactionStatus","info",{...D,txReceipt:G.id}),(D.chainType==="eip155"||D.chainType==="solana"||D.chainType==="sui")&&A.transactionStatus(G.id,{...D,status:{type:"confirmed"}})},[e,y,A]),O=(0,ds.useCallback)((G,z)=>{let D=G?.networkID?Jt(G.networkID):null;(D?.chainType==="eip155"||D?.chainType==="solana"||D?.chainType==="sui")&&G?.id&&(b.addBreadcrumb("swapper","transactionStatus","error",{...D,txReceipt:G.id}),A.transactionStatus(G.id,{...D,status:{type:"error"}}),E({type:"transactionConfirmationFailed",error:z,txReceipt:G}))},[A,E]);return{logTransactionSubmitted:F,logTransactionSubmissionError:S,logSwapFailureNoSignature:$,logTransactionConfirmed:M,logTransactionConfirmationFailed:O}};n();s();var YI=v(x());n();s();var ii=()=>{let{selectedSetting:e}=zA(),{selectedProviderIndex:A,quoteResponse:j}=iA(),t=yr(A,e.type,j),{data:r}=Fr();return{slippageSetting:e,slippageTolerance:t??r??void 0}};n();s();n();s();var Hp=v(x());n();s();var uk="swap-validation",WI=({scanResult:e,scanResultError:A,quote:j,sellToken:t,buyToken:r})=>{if(A)return"valid";if(!j||!t||!r)return b.addBreadcrumb(uk,`Missing necessary args: ${JSON.stringify({quote:!!j,scanResult:!!e,sellToken:t,buyToken:r})}`,"info"),new qA("MissingArgument");if(e?.error===Qj.SIMULATION_FAILED)return"valid";if(e?.error){if(b.addBreadcrumb(uk,`Simulation error: ${JSON.stringify({error:e.error})}`,"info"),e.error===Qj.SLIPPAGE_EXCEEDED)return new qA("slippageToleranceExceeded");if(e.error===Qj.INSUFFICIENT_FUNDS)return new qA("INSUFFICIENT_FUNDS");if(e.error===Qj.INSUFFICIENT_GAS)return new qA("INSUFFICIENT_GAS");if(e.error===Qj.ACCOUNT_FROZEN)return new qA("AccountFrozen");if(e.error===Qj.SIMULATION_TIMEOUT)return new qA("SIMULATION_TIMEOUT");if(e.error===Qj.STALE_QUOTE)return new qA("STALE_QUOTE");if(e.error===Qj.UNKNOWN_ERROR){let o=hN(e);return new qA("SimulationUnknownError",o)}return new qA("Scan results are not valid")}return e?"valid":(b.addBreadcrumb(uk,`Missing necessary args: ${JSON.stringify({quote:!!j,scanResult:!1,sellToken:t,buyToken:r})}`,"info"),new qA("MissingArgument"))};function hN(e){return e.simulationError?e.simulationError.humanReadableError:e.warnings[0]?.message}var JI=({swapTransactions:e})=>{let A=w(g=>g.sellFungible),j=w(g=>g.buyFungible),t=A?.data.chain.id??aA.Solana.Mainnet,{selectedSetting:r}=zA(),{currentQuote:o,quoteResponse:a}=iA(),i=QA(je(o)),c=XA(A?.data.chain.id,j?.data.chain.id),p=a?.buyToken?J(a?.buyToken):void 0,d=a?.sellToken?J(a?.sellToken):void 0,m={type:"transaction",userAccount:A?.data.walletAddress??"",params:void 0,url:"https://phantom.com",networkID:t,context:c?"bridge":"swap",provider:i,slippageType:r.type,metadata:{swapper:{quoteOutputAmount:o?.buyAmount,quoteOutputToken:p,quoteInputAmount:o?.sellAmount,quoteInputToken:d}}};e?.type==="evm"&&I.isEVMNetworkID(t)&&(m.params={transactions:e.transactions}),e?.type==="solana"&&I.isSolanaNetworkID(t)&&(m.params={transactions:e.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}});let{transition:B}=Gt(),f=(0,Hp.useCallback)((g,E)=>{E&&B({type:"simulationRequestError",error:E}),g&&B({type:"simulationResponseReceived",scannedTransactionResult:g})},[B]),k=va(m,{disableRefetch:!0,onSettled:f,disabled:e?.type==="sui"});return(0,Hp.useMemo)(()=>{if(k.isLoading)return{isLoading:!0,state:"loading"};if(e?.type==="sui")return{isLoading:!1,state:"valid"};let g=WI({scanResult:k.data,scanResultError:k.isError,quote:o,sellToken:a?.sellToken,buyToken:a?.buyToken,simulationTolerance:a?.simulationTolerance});return{isLoading:k.isLoading,state:g}},[k,o,a,e?.type])};function ZI({isBridge:e,addressType:A,isSwapSimulationDisabled:j,onTransactionReceiptReceived:t,onTransactionSubmissionError:r,resetToInitialState:o,sender:a}){let{logTransactionSubmitted:i,logSwapFailureNoSignature:c}=Do(),{connection:p}=Rj(),{data:d}=EA(),{currentQuote:m,quoteResponse:B}=iA(),{slippageTolerance:f}=ii(),k=w(h=>h.gasEstimation.estimateWithBuffer),g=w(h=>h.sellFungible),E=g?.data.chain.id??aA.Solana.Mainnet,{data:y,isSuccess:F}=Jj({callerAddress:a,quote:m,sellFungible:g}),S=JI({swapTransactions:y}),{pendingActivityRows:$}=oI({sender:a}),{mutateAsync:M}=cm({accountIdentifier:d?.identifier??"",networkID:E}),[O,G]=(0,YI.useState)(!1),z=async()=>(G(!0),dI({isBridge:e,addressType:A,isSwapSimulationDisabled:j,sender:a,currentQuote:m,quoteResponse:B,gasEstimation:k,swapTransactions:y,scanResults:S,pendingActivityRows:$,connection:p,slippageTolerance:f,logSwapFailureNoSignature:c,logTransactionSubmitted:i,swapFungibles:M,onTransactionSubmissionError:r,onTransactionReceiptReceived:t,resetToInitialState:o}));return{isReadyToExecute:O||(!S.isLoading||j)&&F,executeSwap:z}}n();s();var Vp=v(x());var A$=({goToSwapTab:e,goToActivityTab:A})=>{let{resume:j}=qj(),{clearQuotes:t}=im(),r=Pt(),o=(0,Vp.useCallback)(()=>{j(),t(),e()},[e,j,t]),a=(0,Vp.useCallback)(()=>{j()},[j]),i=(0,Vp.useCallback)(()=>{r(),A()},[A,r]);return{onClose:o,onRetry:a,onSwapSuccess:i}};n();s();function e$(){let{data:[e]}=fA(["kill-swapper-simulation"]);return e}n();s();var ms=v(x());var j$=({onTransactionConfirmationSuccess:e,onTransactionConfirmationError:A,txReceipt:j})=>{let t=Z(),{data:r}=EA(),o=(0,ms.useMemo)(()=>r?.addresses??[],[r]),a=df(o),i=Pt(),{logTransactionConfirmed:c,logTransactionConfirmationFailed:p,logTransactionSubmissionError:d}=Do(),m=w(S=>S.sellFungible),{currentQuote:B}=iA(),{sellAmount:f}=B??{sellAmount:"0"},k=lf({wallets:o,encodedCaip19:m?J(W(m)):""}),g=(0,ms.useCallback)(async S=>{if(c(S),i(),m){let $=new AA(m.data.amount),M=new AA(f),O=$.minus(M).toString();Uc(t,{id:es(m),amount:O})}a(),k()},[c,i,f,m,a,k,t]),{isSuccess:E,isError:y,error:F}=cf(g,j);(0,ms.useEffect)(()=>{if(E)e();else if(y){let S=qr(F);A(S),p(j,S),d(S,j?.id)}},[E,y,F,j,p,e,A,d])};function t$({isLedger:e,goToSwapTab:A,goToActivityTab:j}){let{currentQuote:t}=iA(),r=w(V=>V.buyFungible),o=w(V=>V.sellFungible),a=Pt(),i=e$(),{logTransactionSubmissionError:c}=Do(),[p]=(0,tj.useState)(XA(o?.data.chain.id,r?.data.chain.id)),d=o?.data.chain.id??aA.Solana.Mainnet,{data:m}=EA(),B=(0,tj.useMemo)(()=>m?.addresses??[],[m]),f=(0,tj.useMemo)(()=>B.find(V=>V.networkID===o?.data.chain.id)?.address??"",[B,o]),k=(0,tj.useMemo)(()=>I.getAddressType(d),[d]),{data:g}=Jj({callerAddress:f,quote:t,sellFungible:o}),[E,y]=(0,tj.useState)(),[F,S]=(0,tj.useState)("loading"),[$,M]=(0,tj.useState)(),O=()=>{S("loading"),M(void 0),y(void 0)},G=V=>{y(V)},z=(0,tj.useCallback)((V,U)=>{S("error"),M(V),c(V,U)},[c]),D=(0,tj.useCallback)(()=>{S("success")},[]),h=(0,tj.useCallback)(V=>{S("error"),M(qr(V))},[]);j$({onTransactionConfirmationSuccess:D,onTransactionConfirmationError:h,txReceipt:F==="error"?void 0:E});let{executeSwap:q,isReadyToExecute:C}=ZI({isBridge:p,addressType:k,isSwapSimulationDisabled:i,onTransactionSubmissionError:z,onTransactionReceiptReceived:G,resetToInitialState:O,sender:f}),{onClose:R,onRetry:N,onSwapSuccess:_}=A$({goToSwapTab:A,goToActivityTab:j});return{...pk({sellFungible:o,txReceipt:E,swapTransactions:g,isBridge:p,txStatus:F,isReadyToExecute:C,isLedger:e,txError:$}),executeSwap:q,resetSwapper:a,onClose:R,onRetry:N,onSwapSuccess:_}}n();s();n();s();var r$=v(x()),o$=()=>{let{data:[e,A,j]}=fA(["enable-auto-slippage","enable-swapper-priority-fee-settings","enable-custom-tips"]);return(0,r$.useMemo)(()=>e?A?j?"autoWithPriorityFeesAndTips":"autoWithPriorityFees":"auto":"fixed",[e,A,j])};n();s();n();s();var n$=v(x());var SN=()=>{let{data:[e]}=fA(["enable-swapper-toasts"]),A=Pe();return{selectQuote:(0,n$.useCallback)((t,r)=>{if(e){let o=t[r];o&&A.selectQuote(o)}},[e,A])}};n();s();n();s();n();s();n();s();var ks=class e{constructor(A,j){this.tracer=j;this.name=A.name,this.context=A.context,this.marks=e.makeMarks(A.marks),this.derivedMarks=A.derivedMarks||[],this.onlyDev=A.onlyDev||!1}name;context;marks;derivedMarks;onlyDev;get markCount(){return this.marks.length+this.derivedMarks.length}getMark(A){return this.marks.find(j=>j.name===A)}qualify(A){return`${this.id}_${A}`}static makeMarks(A){return A.map(j=>typeof j=="string"?{name:j}:{name:j.name,metric:j.metric})}};n();s();var ci=class extends ks{get id(){return`${this.context}_${this.name}`}startTrace(){ij()||this.tracer.startTrace(this,"start")}mark(A){ij()||this.tracer.mark(this,A)}};n();s();n();s();n();s();var Xp=class{nativeTimestamp;constructor(A){this.nativeTimestamp=A.nativeEvent.timeStamp}};var zp=class extends ks{triggers;constructor(A,j){super(A,j),this.triggers=A.triggers}get id(){return`user_${this.context}_${this.name}`}startTrace(A,j){if(ij())return;let t=new Xp(j);this.tracer.startTrace(this,A,t.nativeTimestamp)}mark(A){ij()||this.tracer.mark(this,A)}markFrame(A){ij()||requestAnimationFrame(()=>{this.tracer.mark(this,A)})}};n();s();n();s();n();s();var Wp=class{constructor(A){this.cleanupOptions=A}cleanupInterval=null;lastActivityTimestamp=0;signalActive(){this.lastActivityTimestamp=performance.now(),this.ensureCleanup()}ensureCleanup(){this.cleanupInterval||(this.cleanupInterval=setInterval(()=>this.cleanupCycle(),this.cleanupOptions.cleanupIntervalMs))}cleanupCycle(){let{itemsRemaining:A}=this.runCleanup(),j=performance.now()-this.lastActivityTimestamp;A===0&&j>=this.cleanupOptions.maxAgeMs&&this.stopCleanup()}stopCleanup(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}};var Jp=class extends Wp{constructor(j){super({cleanupIntervalMs:10*60*1e3,maxAgeMs:4*60*1e3});this.perf=j}activeTraces=new Map;startTrace(j,t,r=this.perf.now()){let o=new lk(j,t,r);this.activeTraces.set(j.id,o),this.perf.mark(o.startMarkName,{timestamp:r}),this.signalActive()}mark(j,t){let r=this.activeTraces.get(j.id);if(!r||r.hasMark(t))return;let o=j.getMark(t);this.processMark(r,o),this.processDerivedMarks(r),r.numAddedMarks===j.markCount&&this.activeTraces.delete(j.id)}processMark(j,t){j.addMark(t.name);let r=j.operation.qualify(t.name);if(this.perf.mark(r),t.metric){let o=j.operation.qualify(t.metric),a=this.perf.measure(o,j.startMarkName,r);if(a===void 0){b.captureMessage(`[OperationTracer] Unexpected measure duration 'undefined' for mark ${r}, ignoring`,"performance","error");return}console.log(`[OperationTracer] Metric '${o}': ${a}ms (trigger: ${j.trigger})`)}}processDerivedMarks(j){j.operation.derivedMarks.forEach(t=>{if(j.hasMark(t.name))return;t.dependsOn.every(o=>j.hasMark(o))&&this.processMark(j,t)})}runCleanup(){let j=this.perf.now();for(let[t,r]of this.activeTraces)r&&j-r.startTime>this.cleanupOptions.maxAgeMs&&this.activeTraces.delete(t);return{itemsRemaining:this.activeTraces.size}}},lk=class{constructor(A,j,t){this.operation=A;this.trigger=j;this.startTime=t}marks=new Set;get numAddedMarks(){return this.marks.size}get startMarkName(){return this.operation.qualify(this.trigger)}addMark(A){this.marks.add(A)}hasMark(A){return this.marks.has(A)}};n();s();var Yp=class{now(){return performance.now()}mark(A,j={timestamp:performance.now()}){performance.mark(A,{startTime:j.timestamp})}measure(A,j,t){try{let r=performance.measure(A,j,t).duration;return Math.round(r)}catch{return}}};var wN=new Yp,dk=new Jp(wN),Zp=class e{static createOperation(A){return new ci(A,dk)}static createUserOperation(A){return new zp(A,dk)}static measureFunc(A,j,t={onlyDev:!1}){if(ij())return j();let r=new ci({name:A,context:"func",marks:[{name:"done",metric:"time"}]},dk);r.startTrace();let o=j();return o&&typeof o.then=="function"?o.then(a=>(r.mark("done"),a)):(r.mark("done"),o)}static wrapFunc(A,j,t={onlyDev:!1}){return function(...r){return e.measureFunc(A,()=>j(...r),t)}}};var IN=Zp.createUserOperation({name:"switchTokens",context:"swapTab",triggers:["switchButtonClick"],marks:["sellTokenUpdated","buyTokenUpdated"],derivedMarks:[{name:"tokensSwitched",dependsOn:["sellTokenUpdated","buyTokenUpdated"],metric:"switchTime"}],onlyDev:!0});n();s();n();s();var aWA=TA(e=>({quoteSpan:void 0,previousBuyAmount:void 0,previousSellAmount:void 0,setQuoteSpan(A){e({quoteSpan:A})},setPreviousBuyAmount(A){e({previousBuyAmount:A})},setPreviousSellAmount(A){e({previousSellAmount:A})}}));n();s();var dWA=TA(e=>({initialLoadSpan:void 0,setInitialLoadSpan(A){e({initialLoadSpan:A})}}));n();s();var vN=v(x());var gWA=["simulationRequestErrored","simulationFailed","transactionSubmissionFailed","transactionNotConfirmed"];n();s();var bN=v(x());n();s();n();s();var Bs=class{constructor(A){this.analytics=A}swapperOpen(A){this.analytics.capture("swapperOpen",{data:{uiContext:"swapperInterstitial",swapMode:A.type}})}swapperClose(A){this.analytics.capture("swapperClose",{data:{uiContext:"swapperInterstitial",reason:A}})}swapperUpdateAsset(A,j){switch(A.type){case"sell":this.analytics.capture("swapperUpdateToAsset",{data:$o(j)});break;case"buy":this.analytics.capture("swapperUpdateFromAsset",{data:$o(j)});break}}swapperSwapDefaultQuoteSelected(A){this.analytics.capture("swapperSwapDefaultQuoteSelected",{data:{quotePercentageValue:A}})}swapperDetailPanelClicked(){this.analytics.capture("swapperDetailPanelClicked",{data:{uiContext:"swapperInterstitial"}})}swapperToggleQuoteCurrency(){this.analytics.capture("swapperToggleQuoteCurrency",{data:{uiContext:"swapperInterstitial"}})}};var mk=class{getNavigationParams({initiatingSwapMode:A,selectedToken:j,initialSwapAmount:t}){return{swapMode:{type:A.type,buyCaip19:A.type==="buy"?A.buyCaip19:J(W(j)),sellCaip19:A.type==="sell"?A.sellCaip19:J(W(j))},initialSwapAmount:t}}captureAnalytics(A,j,t){new Bs(A).swapperUpdateAsset(t,j)}},kk=class{selectToken({swapper:A,selectedToken:j,currentTokens:t,perspective:r,navigateToSwapper:o,dismiss:a}){let i=r==="sell"?t.buyCaip19:t.sellCaip19;if(this.isSameSelectedToken(i,j))return this.handleTokenSwitch(A,a);if(this.shouldNavigateToNewChain(r,t.sellCaip19,j))return o({sellFungible:j});A.changeToken(j,r),a()}shouldNavigateToNewChain(A,j,t){return A!=="sell"?!1:_e(j).chainId!==t.data.chain.id}handleTokenSwitch(A,j){A.switchTokens(),j()}isSameSelectedToken(A,j){let t=J(W(j));return A===t}},qN=new mk,xN=new kk;n();s();var pi=v(x());var AJA=(0,pi.createContext)(void 0);n();s();n();s();var Au=v(x());var TN=["enable","reject"],PN=({continueSwap:e,dismiss:A})=>{let j=Y(),{setSlippageSetting:t}=zA(),r=(0,Au.useCallback)(a=>{switch(A(),a){case"enable":j.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),t({type:"auto"}),Nn();break;case"reject":j.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),t({type:"fixed"}),e();break}},[e,A,t,j]),o=(0,Au.useMemo)(()=>TN.map(a=>({label:T.t(a==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:a==="enable"?"primary":"secondary",onPress:()=>r(a)})),[r]);return{title:T.t("swapSlippageOptInTitle"),description:T.t("swapSlippageOptInSubtitle"),learnMoreText:T.t("commandLearnMore"),learnMoreUrl:Wc,options:o}};n();s();var a$=v(x());var ON=({goToAssetSelect:e})=>{let{setSearchQuery:A}=w();return(0,a$.useCallback)(j=>{j==="buy"&&A(""),e(j)},[e,A])};n();s();var ui=v(x());var i$="auto-provider-defaulted-to-toast",MN=({showDefaultAutoProvider:e})=>{let{hasDefaultedToBestQuote:A}=iA(),{message:j,hideToast:t}=Ue(),r=w(a=>a.setSelectedBaseProvider),o=(0,ui.useRef)(A);(0,ui.useEffect)(()=>{o.current=A},[A]),(0,ui.useEffect)(()=>{A&&setTimeout(()=>{o.current&&(r(We),j({id:i$,message:T.t("swapProviderAutoUpdateTitle"),icon:"info",onPress:()=>{t(i$),e()}}))},2e3)},[A,j,t,e,r])};n();s();var c$=v(x());n();s();var fs=v(x());var CN=AA(1);function eu(e,A,j){let t=Y(),[r,o]=(0,fs.useState)(!1),a=(0,fs.useCallback)(async()=>{await t.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:r?"buy token":"sell token"}}),o(!r)},[t,r]),i=w(p=>p.sellFungible),c=w(p=>p.buyFungible);return(0,fs.useMemo)(()=>{let p=!1,d="";if(A&&j){let m=c?.data,B=i?.data;if(m&&B){let{buyAmount:f,sellAmount:k}=j,g=SA(f,m.decimals),E=SA(k,B.decimals),y=g.dividedBy(E),F=`1 ${B.symbol} \u2248 ${Co(y)} ${m.symbol}`,S=`1 ${m.symbol} \u2248 ${Co(CN.dividedBy(y))} ${B.symbol}`;p=new AA(j.buyAmount).isEqualTo(e),d=r?S:F}}return{isBestRate:p,rate:d,flip:a}},[e,j,r,A,i,c,a])}var _N=({selectProvider:e})=>{let{currentQuote:A,quoteResponse:j}=iA(),{currencySymbol:t,fromUsd:r}=GA(),o=A?.buyAmount??"",a=eu(o,j,A),i=rs(je(A)),c=A?.baseProvider.name??"";return{details:(0,c$.useMemo)(()=>A?FA(A)?DN({quote:A,selectProvider:e,exchangeRate:a,currencySymbol:t,fromUsd:r}):RN({provider:c,sources:i,exchangeRate:a,selectProvider:e}):[],[A,c,i,a,e,t,r]),footnote:T.t("swapProviderPricingFootnote")}},RN=({provider:e,sources:A,exchangeRate:j,selectProvider:t})=>[{label:T.t("swapProviderPricingProvider"),value:e,icon:"chevron-right",onPress:t},{label:T.t("swapProviderPricingMarket"),value:A},{label:T.t("swapProviderPricingPrice"),value:j.rate,icon:"swap",onPress:j.flip}],DN=({quote:e,selectProvider:A,exchangeRate:j,currencySymbol:t,fromUsd:r})=>{let o=e.baseProvider.name,a=Ka(e).toString(),i=kj(Kt(e));return[{label:T.t("swapProviderPricingProvider"),value:o,icon:"chevron-right",onPress:A},{label:T.t("swapProviderPricingPrice"),value:j.rate,icon:"swap",onPress:j.flip},{label:T.t("swapProviderPricingFees"),value:`${t}${r(Number(a),2)} ${T.t("swapProvidersFee")}`},{label:T.t("swapProviderPricingTime"),value:i}]};n();s();n();s();n();s();var Es=v(x());n();s();var l$=v(x());n();s();var p$=v(x());var NN={status:!1,timestamp:""},u$=()=>{let{data:e}=ce({key:"hasViewedAutoSlippageOptIn",queryKey:hA.hasViewedAutoSlippageOptIn()}),{mutateAsync:A}=Be({key:"hasViewedAutoSlippageOptIn",queryKey:hA.hasViewedAutoSlippageOptIn()}),j=(0,p$.useCallback)(t=>void A({status:t,timestamp:new Date().toISOString()}),[A]);return{viewedOptInState:e??NN,setViewedOptInState:j}};var d$=()=>{let{viewedOptInState:e,setViewedOptInState:A}=u$(),{selectedSetting:j}=zA(),{reviewInterceptors:t,supportedCustomSimulationToastErrorTypes:r}=Qp(),o=Pe(),{connection:a}=Rj(),i=kA(),c=Wo(),p=T.language,d=Y(),m=Pt(),B=Z(),f=no(),k=w(F=>F.gasEstimation.estimateWithBuffer),g=zA(),{storePairs:E}=dj();return{executeInterceptors:(0,l$.useCallback)((F,S,$,M)=>{for(let O of t)if(O.intercept({hasViewedAutoSlippageOptIn:e.status,selectedSetting:j.type,setHasViewedAutoSlippageOptIn:A,showOverlay:F,swapper:o,connection:a,storage:i,vaultProxy:c,locale:p,analytics:d,resetSwapper:m,queryClient:B,showFungibleDetails:S,showBuyFungibleScreen:$,swapAnalytics:f,gasEstimation:k,slippageSettings:g,navigateToSwapper:M,supportedCustomSimulationToastErrorTypes:r,storePairs:E,isMobile:ge})==="interrupt")return"interrupt";return"continue"},[t,e.status,j.type,A,o,a,i,c,p,d,m,B,f,k,g,r,E])}};n();s();var Bk=v(x());n();s();var B$=v(x());n();s();function m$(e){if(e===void 0)return Ve.colors.legacy.textSecondary;let A=parseFloat(e.toFixed(2));switch(!0){case A>=5:return Ve.colors.legacy.accentAlert;case(A>=1&&e<5):return Ve.colors.legacy.accentWarning;case(e>=0&&e<1):return Ve.colors.legacy.accentSuccess;default:return Ve.colors.legacy.textSecondary}}n();s();function k$(e){if(e===void 0)return"-";switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}function ju(e){return(0,B$.useMemo)(()=>{let A="",j="";if(e===void 0)return;let t=e*100;return A=m$(t),j=k$(t),{color:A,text:j,percentage:t}},[e])}n();s();var tu=({priceImpact:e,slippage:A,transferFees:j,shouldShowFees:t,shouldShowPriceImpact:r,shouldShowSlippage:o,isQuoteStreaming:a})=>{let i=a?UN:LN;return[...KN({priceImpact:e,slippage:A,transferFees:j}),...i({shouldShowSlippage:o,shouldShowFees:t,shouldShowPriceImpact:r})]},KN=({priceImpact:e,slippage:A,transferFees:j})=>{let t=[];return e&&e.percentage>Od&&t.push("highPriceImpact"),A&&A.percentage>=Md&&t.push("highSlippage"),(j?.totalPercentFees??0)>0&&t.push("transferFees"),t},LN=({shouldShowSlippage:e,shouldShowFees:A,shouldShowPriceImpact:j})=>{let t=[];return t.push("providerPressable"),t.push("exchangeRate"),e&&t.push("slippagePressable"),A&&t.push("fees"),j&&t.push("priceImpact"),t},UN=({shouldShowSlippage:e,shouldShowFees:A,shouldShowPriceImpact:j})=>{let t=[];return t.push("pricing"),A&&t.push("fees"),j&&t.push("priceImpact"),e&&t.push("slippagePressable"),t};n();s();function ru(e,A){let j="",t="";if(e===void 0)return;j=QN(e);let r=A==="auto"?`${T.t("swapSettingsAuto")} \u2022 `:"";return t=HN(e),{color:j,text:t,percentage:e,prefix:r}}function QN(e){let A=parseFloat(e.toFixed(2));switch(!0){case A>2:return Ve.colors.legacy.accentAlert;case(A>=1&&e<=2):return Ve.colors.legacy.accentWarning;default:return Ve.colors.legacy.textSecondary}}function HN(e){switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}var f$=()=>{let{currentQuote:e,quoteResponse:A}=iA(),j=ju(Gr(e)),{selectedSetting:t}=zA(),r=(0,Bk.useMemo)(()=>ru(A?.slippageTolerance,t.type),[A?.slippageTolerance,t.type]),o=w(d=>d.sellFungible),a=w(d=>d.buyFungible),i=(0,Bk.useMemo)(()=>ps([o,a]),[o,a]),{data:[c]}=fA(["enable-quote-streaming"]);return{logSwapHomeState:()=>{let d=tu({priceImpact:j,slippage:r,transferFees:i,shouldShowFees:!0,shouldShowPriceImpact:!!j,shouldShowSlippage:!!r,isQuoteStreaming:c}),m={slippage:JSON.stringify(r),priceImpact:JSON.stringify(j),rows:d};b.addBreadcrumb("swapper","swap-home","info",zt(m))}}};n();s();var E$=v(x());n();s();function fk({sellFungible:e,totalFees:A,minRequiredBalance:j,currentQuote:t}){let r=e?.type?le(e?.type):!1,{source:o,destination:a}=j;if(r){let i=new P(t?.sellAmount??0);return A.plus(i)}else{let i=o.plus(a);return A.plus(i)}}var g$=()=>{let{currentQuote:e}=iA(),{totalFees:A}=Gj(),j=w(i=>i.sellFungible),t=w(i=>i.buyFungible),r=xo(j),o=qo({sellFungible:j,buyFungible:t});return(0,E$.useMemo)(()=>fk({sellFungible:j,totalFees:A.maxAmount??A.amount,minRequiredBalance:{source:r,destination:o},currentQuote:e}),[j,A,r,o,e])};n();s();function Ek({sellFungible:e,sellNativeFungible:A,totalNativeRequirement:j}){let t=e?.data.chain.id,r=A?Ce(A.data.amount,A.data.decimals):"-",o=A?Ce(j,A.data.decimals):"-";return{networkId:t,balance:r,required:o}}n();s();function y$({quoteResponse:e,hasInsufficientBalance:A,insufficientBalanceArgs:j,isTermsAcknowledged:t,logSwapHomeState:r,goToInsufficientBalance:o,goToSwapTermsOfService:a,onSwap:i,executeInterceptors:c}){if(e)A?o(j):(r(),t?c()==="continue"&&i():a());else return}var gk=({goToSwapTermsOfService:e,goToInsufficientBalance:A,goToConfirmation:j,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:a})=>{let{quoteResponse:i}=iA(),c=w($=>$.sellFungible),p=c?.data.chain.id,{data:d}=Ja(),{logSwapHomeState:m}=f$(),{fungible:B}=Nj({key:p?Rs(p,void 0):void 0}),f=g$(),k=(0,Es.useMemo)(()=>new P(B?.data.amount??0).lt(f),[B,f]),g=(0,Es.useMemo)(()=>Ek({sellFungible:c,sellNativeFungible:B,totalNativeRequirement:f}),[c,B,f]),E=Sc({goToConfirmation:j}),{executeInterceptors:y}=d$(),F=(0,Es.useCallback)(()=>y(t,r,o,a),[y,t,r,o,a]);return{onClick:(0,Es.useCallback)(()=>y$({quoteResponse:i,hasInsufficientBalance:k,insufficientBalanceArgs:g,isTermsAcknowledged:d,logSwapHomeState:m,goToInsufficientBalance:A,goToSwapTermsOfService:e,onSwap:E,executeInterceptors:F}),[i,k,g,d,m,A,e,E,F])}};n();s();var li=v(x()),yk=v(Un());n();s();n();s();var F$=({sellFungible:e,totalFees:A,transactionSpeedsToUnitCost:j,currentQuote:t,isBridge:r,minRequiredBalance:o,customPriorityFee:a,customTip:i})=>{let c=e?za({sellFungible:e,totalFees:A.amount,transactionSpeedsToUnitCost:I.isEVMNetworkID(e.data.chain.id)?j:void 0,isBridge:r,minRequiredBalance:o,customPriorityFee:a,customTip:i}):"0",p=e?.data.decimals;return t?.sellAmount?new AA(SA(t.sellAmount,p??0)).isLessThanOrEqualTo(new AA(c)):!0};var h$=({sellFungible:e,isFetchingQuote:A,quoteResponse:j,currentQuote:t,gasEstimation:r,maxGasEstimation:o,hasNoRoutes:a,totalFees:i,transactionSpeedsToUnitCost:c,isBridge:p,minRequiredBalance:d,shouldSkipSwapReview:m,numTransactions:B,customPriorityFee:f,customTip:k})=>{let g=F$({sellFungible:e,totalFees:i,transactionSpeedsToUnitCost:c,currentQuote:t,isBridge:p,minRequiredBalance:d,customPriorityFee:f,customTip:k});switch(XN({quoteResponse:j,sellFungible:e,currentQuote:t,hasNoRoutes:a,hasEnoughAssets:g,isFetchingQuote:A,gasEstimation:r,maxGasEstimation:o,shouldSkipSwapReview:m,numTransactions:B})){case"notSwappable":return{title:T.t("swapReviewFlowActionButtonPrimary"),type:"secondary",disabled:!0};case"swappable":return{title:T.t("swapReviewFlowActionButtonPrimary"),type:"primary",disabled:!1};case"reviewable":return{title:T.t("swapFlowActionButtonText"),type:"primary",disabled:!1};case"notReviewable":return{title:T.t("swapFlowActionButtonText"),type:"secondary",disabled:!0};case"insufficientBalance":return{title:T.t("swapReviewInsufficientBalance"),type:"alert",disabled:!0};case"noRoutes":return{title:T.t("swapNoQuotesFound"),type:"secondary",disabled:!0}}},VN=({sellFungible:e})=>{let A=e?.data.chain.id??aA.Solana.Mainnet;return I.isEVMNetworkID(A)};function XN({quoteResponse:e,sellFungible:A,currentQuote:j,hasNoRoutes:t,hasEnoughAssets:r,isFetchingQuote:o,gasEstimation:a,maxGasEstimation:i,shouldSkipSwapReview:c,numTransactions:p}){if(!r)return"insufficientBalance";if(t)return"noRoutes";let d=VN({sellFungible:A}),m=!!(a&&(a??[]).length>=p&&(i??[]).length>=p);return!e||!A||!j||d&&!m||o?c?"notSwappable":"notReviewable":c?"swappable":"reviewable"}function zN({goToInsufficientBalance:e,goToSwapTermsOfService:A,goToConfirmation:j,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:a}){let{currentQuote:i,isFetchingQuote:c,quoteResponse:p}=iA(),d=w(mA=>mA.hasNoRoutes),m=w(mA=>mA.sellFungible),B=m?.data.chain.id,{estimate:f,estimateWithBuffer:k}=w(mA=>mA.gasEstimation),g=w(mA=>mA.buyFungible),E=g?.data.chain.id,y=XA(B,E),{totalFees:F}=Gj(),{data:S}=Ms({networkID:B}),$=xo(m),M=qo({sellFungible:m,buyFungible:g}),O=w(mA=>mA.sellAmount),G=w(mA=>mA.setIsFetchingQuote),z=Qn(),D=(0,yk.default)(z),h=(0,yk.default)(O);(0,li.useEffect)(()=>{O!==h&&O&&z&&D&&G(!0)},[O,h,G,z,D]);let{data:q}=EA(),C=(0,li.useMemo)(()=>q?.addresses??[],[q]),R=(0,li.useMemo)(()=>C.find(mA=>mA.networkID===m?.data.chain.id)?.address??"",[C,m]),{data:N}=Jj({callerAddress:R,quote:i,sellFungible:m}),{data:_}=Zj(),{data:L}=At(),{title:V,type:U,disabled:K}=h$({sellFungible:m,currentQuote:i,quoteResponse:p,isFetchingQuote:c,isBridge:y,gasEstimation:f,maxGasEstimation:k,hasNoRoutes:d,totalFees:F,transactionSpeedsToUnitCost:S,minRequiredBalance:{source:$,destination:M},shouldSkipSwapReview:!0,numTransactions:N?.transactions?.length??0,customPriorityFee:bo(_??0),customTip:bo(L??0)}),{onClick:IA}=gk({goToInsufficientBalance:e,goToSwapTermsOfService:A,goToConfirmation:j,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:a});return{disabled:K,title:V,type:U,onClick:IA}}n();s();n();s();var di=v(x());n();s();var S$=({buyNetwork:e,sellNetwork:A,executionDuration:j,priceImpact:t,slippage:r})=>{let o=[];return o.push("provider"),o.push("exchangeRate"),e&&A&&e!==A&&o.push("network"),r&&o.push("slippage"),o.push("fees"),j>0&&o.push("executionDuration"),t&&o.push("priceImpact"),o};function WN({isSwapReview:e,showProviders:A,showSwapSettings:j,showSwapPricing:t}){let{bestBuyAmount:r,currentQuote:o,hasNoRoutes:a,quoteResponse:i,quotes:c,isFetchingQuote:p}=iA(),d=eu(r,i,o),m=ju(Gr(o)),{slippageSetting:B,slippageTolerance:f}=ii(),k=(0,di.useMemo)(()=>ru(f,B.type),[f,B.type]),g=rs(je(o)),E=Kt(o),y=kj(E),[F]=(0,di.useState)(y),S=i?.sellToken?.chainId?I.getChainName(i.sellToken.chainId):void 0,$=i?.buyToken?.chainId?I.getChainName(i.buyToken.chainId):void 0,M=Gj(),O=Um(M),G=w(_=>_.sellFungible),z=w(_=>_.buyFungible),D=(0,di.useMemo)(()=>ps([G,z]),[G,z]),{data:[h]}=fA(["enable-quote-streaming"]),q=!!M.phantomFee.pct,R={exchangeRate:d,priceImpact:m,slippage:k,provider:g,fees:M,executionDuration:E,uiEstimatedTime:F,isFetchingQuote:p,sellNetwork:S,buyNetwork:$,feeBreakdown:O,selectProviderEnabled:!e&&!!g,isSwapReview:e,showProviders:A,showSwapSettings:j,showSwapPricing:t,transferFees:D},N=e?S$({exchangeRate:d,priceImpact:m,slippage:k,buyNetwork:$,sellNetwork:S,executionDuration:E}):tu({priceImpact:m,slippage:k,transferFees:D,shouldShowFees:!0,shouldShowPriceImpact:!!m,shouldShowSlippage:!!k,isQuoteStreaming:h});return{exchangeRate:d,hasNoRoutes:a,priceImpact:m,slippage:k,provider:g,fees:M,nrOfQuotes:c.length,executionDuration:E,isFetchingQuote:p,sellNetwork:S,buyNetwork:$,rows:N,sharedRowProps:R,displayPhantomFeeRow:q}}n();s();var No=v(x());n();s();n();s();var ou=class{getRow({quote:A,buyToken:j}){let t=`${Xe(SA(A.buyAmount,j.decimals),Dj.get(j.networkId).formDisplayPrecision)} ${j.symbol}`;return{type:"standard",key:A.baseProvider.id,logoUri:A.baseProvider.logoUri,topLeft:{text:A.baseProvider.name,color:"textPrimary",font:"body"},topRight:{text:t,color:"textSecondary",font:"body"}}}getAutoRow(){return{type:"standard",key:We,topLeft:{text:T.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:T.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"}}}},Fk=class extends ou{getRow(A){let{quote:j,currencySymbol:t,fromUsd:r}=A;if(!FA(j))throw new Error("Quote is not a bridge quote");let o=super.getRow(A),a=kj(Kt(j)),i=Ka(j).toString();return{...o,type:"bridge",bottomLeft:{text:a,color:"textSecondary",font:"caption"},bottomRight:{text:`${t}${r(Number(i),2)} ${T.t("swapProvidersFee")}`,color:"textSecondary",font:"caption"}}}getAutoRow(){return{type:"bridge",key:We,topLeft:{text:T.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:T.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"},bottomLeft:{text:T.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"},bottomRight:{text:T.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"}}}},hk=new ou,Sk=new Fk;var wk=({quoteResponse:e,buyToken:A,currencySymbol:j,setSelectedProvider:t,fromUsd:r})=>{let o=e.type==="xchain",a=o?Sk.getAutoRow():hk.getAutoRow(),i={...a,onPress:()=>t(a.key)},c=e.quotes.reduce((p,d)=>{let B=(o?Sk:hk).getRow({quote:d,buyToken:A,currencySymbol:j,fromUsd:r});return[...p,{...B,onPress:()=>t(d.baseProvider.id)}]},[]);return[i,...c]};var JN=({dismiss:e})=>{let{fromUsd:A,currencySymbol:j}=GA(),t=Y(),r=w(f=>f.quoteResponse),o=w(f=>f.buyFungible),a=w(f=>f.selectedBaseProvider),i=w(f=>f.setSelectedBaseProvider),[c,p]=(0,No.useState)(a),d=(0,No.useMemo)(()=>!r||!o?[]:wk({quoteResponse:r,buyToken:{networkId:o.data.chain.id,decimals:o.data.decimals,symbol:o.data.symbol??""},currencySymbol:j,setSelectedProvider:p,fromUsd:A}),[r,o,j,A,p]),m=(0,No.useCallback)(()=>{i(c),t.capture("swapperProviderSelected",{data:{provider:c}}),e()},[c,i,e,t]),B=(0,No.useMemo)(()=>[{theme:"secondary",disabled:!1,label:T.t("commandCancel"),onPress:e},{theme:"primary",disabled:c===a,label:T.t("commandApply"),onPress:m}],[m,e,c,a]);return{selectedProvider:c,rows:d,buttons:B}};n();s();var nu=v(x());n();s();var mi=v(x());n();s();n();s();var jK=v(x());n();s();var AK=v(x());n();s();var w$=v(x());n();s();n();s();n();s();n();s();var ZN=v(x());n();s();var I$=v(x());var tK=TA(e=>({isInitializeComplete:!0,swapMode:void 0,setSwapMode:A=>e({swapMode:A,isInitializeComplete:!1}),setIsInitializeComplete:A=>e({isInitializeComplete:A})})),rK=tK.getState().setSwapMode;n();s();var gu=v(x());n();s();n();s();n();s();var Ik={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]};var Tr=30,oK=6,$k=3e4,vk=5,bk=["100","500","1000"];n();s();var $$=l.object({name:l.string().nullish().default(null),symbol:l.string().nullish().default(null),decimals:l.number(),caip19:He,logoURI:l.string().nullish().default(null)}),v$=l.object({token:$$,addressType:Jk.optional()}),su=l.object({id:l.string(),name:l.string(),tag:l.string(),logo:l.string(),quote:l.object({displaySourceAmount:l.string(),displayDestinationAmount:l.string(),displayFee:l.string()}).optional()}),b$=(o=>(o.CARD="CARD",o.MOBILE_WALLET="MOBILE_WALLET",o.BANK_TRANSFER="BANK_TRANSFER",o.EXCHANGE="EXCHANGE",o.LOCAL="LOCAL",o))(b$||{}),au=l.object({id:l.string(),type:l.nativeEnum(b$),name:l.string(),estimatedArrival:l.string(),assets:l.object({icon:l.string(),roundIcon:l.string()}),description:l.string().optional()}),nK=l.object({groups:l.array(l.object({groupName:l.string(),tokens:l.array(v$)}))}),sK=l.object({paymentMethods:l.array(au),provider:su.optional()}),aK=l.object({providers:l.array(su),paymentMethod:au,token:He}),iK=l.object({provider:su,paymentMethod:au,location:l.object({countryCode:l.string(),subdivision:l.string().optional()}).optional(),token:He.optional(),tokenAmount:l.string().optional(),fiatAmount:l.string().optional(),fiatCurrencyCode:l.string().optional(),minPurchaseAmount:l.string().optional(),maxPurchaseAmount:l.string().optional(),quickSelectDenominations:l.array(l.string()).optional()}),cK=l.object({url:l.string(),sessionId:l.string()}),qk=(t=>(t.PENDING="PENDING",t.COMPLETED="COMPLETED",t.FAILED="FAILED",t))(qk||{}),Gre=l.object({status:l.nativeEnum(qk),tokenAmount:l.number().optional(),fiatCurrencyCode:l.string().optional(),usdFiatAmount:l.number().optional(),usdFiatFeeAmount:l.number().optional(),fiatFeeAmount:l.number().optional(),cryptoTransactionId:l.string().optional(),createdAt:l.date().optional(),updatedAt:l.date().optional()}),Se=class extends Error{constructor(A){super(A),this.name="FiatRampError"}};n();s();n();s();var Ut={onClose:()=>{},context:"modal",fungible:void 0,purchaseAmount:"0",purchaseType:"currency",isPurchaseAmountValid:!1,error:void 0,redirectErrorMessage:void 0,ownerPublicKey:"",price:0,minPurchaseAmountUsd:vk,maxPurchaseAmountUsd:$k,quickSelectDenominations:bk,paymentMethod:void 0,provider:void 0,checkoutQuoteType:"recommended",redirectURL:void 0},Ee=TA(e=>({...Ut,setState:A=>e(j=>({...j,...A})),reset:()=>{e(Ut)}}));n();s();var hs=v(x());n();s();var cu=v(x());n();s();n();s();n();s();var iu=e=>e.sort((A,j)=>I.compareNetworkID(A.token.caip19.chainId,j.token.caip19.chainId));var xk=e=>{let A=e?.groups.flatMap(j=>j.tokens)??[];return iu(A)};n();s();n();s();var q$=new Se("Failed to get FiatRampTokens"),Gk=async(e,A,j)=>{try{let t=await H.api().headers(e).bearer(j).post("/fiat_ramp/v2/onramp/tokens",A);if(!tA(t))throw q$;return t.data}catch{throw q$}};n();s();var gs="@phantom/fiat-ramp",ki=`${gs}:fungibles`,pK=`${gs}:payment-methods`,Tk=`${gs}:providers`,uK=`${gs}:recommended-quote`,lK=`${gs}:status`,dK=`${gs}:completed`,Qt={fiatRampTokens(e,A,j){return[ki,e,A,j]},fiatRampPaymentMethods(e,A,j){return[pK,e,A,j]},fiatRampProviders(e,A,j){return[Tk,e,A,j]},fiatRampRecommendedQuote(e,A,j){return[uK,e,A,j]},fiatRampStatus(e,A,j){return[lK,e,A,j]},fiatRampCompleted(e,A,j){return[dK,e,A,j]}};var mK=X({days:7}),kK=X({hours:1}),ys=(e,A,j,t=!0,r)=>{let{data:o}=EA(),a=Array.from(new Set(o?.addresses?.map(f=>f.networkID))),i=Array.from(new Set(o?.addresses?.map(f=>f.addressType))),c={chainIDs:a},p={"x-client-platform":e,"x-client-app-version":A,"x-client-locale":j},{data:d}=xe(),m=d?.userID,B=d?.accessToken;return eA({queryKey:Qt.fiatRampTokens(p,c,m),queryFn:()=>Gk(p,c,B),gcTime:mK,staleTime:kK,enabled:t&&a.length>0,select:f=>{let k={...f,groups:f.groups.map(g=>({...g,tokens:iu(g.tokens.filter(E=>E.addressType?i.includes(E.addressType):!0))}))};return r?r(k):k}})};var Fs=(e,A,j,t=!0)=>ys(e,A,j,t,xk);var pu=({clientPlatform:e,appVersion:A,locale:j,caip19:t,addressType:r,enabled:o=!0})=>{let{data:a,isLoading:i,isError:c,isFetched:p}=EA(),{data:d=[],isLoading:m,isError:B,isFetched:f}=Fs(e,A,j,o),k=(0,cu.useMemo)(()=>d.find(E=>r&&I.getChainName(_e(t).chainId)===I.bitcoin.name?J(E.token.caip19)===t&&"addressType"in E&&E.addressType===r:J(E.token.caip19)===t),[r,t,d]),g=(0,cu.useMemo)(()=>{if(!k)return"";let E=a?.addresses.find(y=>k?.addressType?y.addressType===k.addressType&&y.networkID===k?.token.caip19.chainId:y.networkID===k?.token.caip19.chainId)?.address??"";return k?.token.caip19.chainId&&I.isEVMNetworkID(k.token.caip19.chainId)&&(E=E.toLowerCase()),E},[a?.addresses,k]);return(0,cu.useMemo)(()=>({tokenToBuy:k,destinationAddress:g,isLoading:i||m,isError:c||B,isFetched:p&&f}),[g,B,c,f,p,m,i,k])};var x$=({caip19:e,amount:A,clientPlatform:j,redirectURL:t,addressType:r,navigateToFiatRampForm:o,onClose:a,captureAnalyticsEvent:i})=>{let{setState:c}=Ee(),{tokenToBuy:p,destinationAddress:d,isLoading:m,isError:B,isFetched:f}=pu({clientPlatform:j,appVersion:$A,locale:T.language,caip19:e,addressType:r}),k=(0,hs.useMemo)(()=>!!p&&!!d,[d,p]),g=(0,hs.useCallback)(()=>{!p||!d||c({...Ut,onClose:a??(()=>{}),ownerPublicKey:d,fungible:p?.token,purchaseAmount:A??Ut.purchaseAmount,redirectURL:t})},[A,d,a,t,c,p]),E=(0,hs.useCallback)(()=>{!p||!d||(g(),i?.(),o?.(p.token,d))},[i,d,o,g,p]);return(0,hs.useMemo)(()=>({canBuy:k,openBuy:E,saturateState:g,destinationAddress:d,token:p,isLoading:m,isError:B,isFetched:f}),[k,d,B,f,m,E,g,p])};n();s();n();s();n();s();var G$=new Se("Failed to get FiatRampPaymentMethods"),T$=async(e,A,j)=>{try{let t=await H.api().headers(e).bearer(j).post("/fiat_ramp/v2/onramp/payment_methods",A);if(!tA(t))throw G$;return t.data}catch{throw G$}};var BK=X({days:7}),fK=X({hours:1}),uu=(e,A,j,t)=>{let r={"x-client-platform":e,"x-client-app-version":A,"x-client-locale":j},{data:o}=xe(),a=o?.userID,i=o?.accessToken;return eA({queryKey:Qt.fiatRampPaymentMethods(r,t,a),queryFn:()=>T$(r,t,i),gcTime:BK,staleTime:fK})};n();s();n();s();var P$=new Se("Failed to get FiatRampProviders"),O$=async(e,A,j)=>{try{let t=await H.api().headers(e).bearer(j).post("/fiat_ramp/v2/onramp/providers",A);if(!tA(t))throw P$;return t.data}catch{throw P$}};var EK=X({seconds:Tr}),gK=X({hours:1}),lu=(e,A,j,t)=>{let r={"x-client-platform":e,"x-client-app-version":A,"x-client-locale":j},{data:o}=xe(),a=o?.userID,i=o?.accessToken;return eA({queryKey:Qt.fiatRampProviders(r,t,a),queryFn:()=>O$(r,t,i),gcTime:gK,staleTime:EK,enabled:!!t.destinationAddress})};n();s();n();s();var M$=new Se("Failed to get FiatRampRecommendedQuote"),C$=async(e,A,j)=>{try{let t=await H.api().headers(e).bearer(j).post("/fiat_ramp/v2/onramp/recommended_quote",A);if(!tA(t))throw M$;return t.data}catch{throw M$}};var yK=X({days:7}),FK=X({hours:1}),_$=(e,A,j,t,r=!0)=>{let o={"x-client-platform":e,"x-client-app-version":A,"x-client-locale":j},{data:a}=xe(),i=a?.userID,c=a?.accessToken;return eA({queryKey:Qt.fiatRampRecommendedQuote(o,t,i),queryFn:()=>C$(o,t,c),gcTime:yK,staleTime:FK,enabled:r})};n();s();n();s();var wne=new Se("Failed to get ramp status");var Mne=X({seconds:Tr}),Cne=X({hours:1});n();s();n();s();var Lo=v(x());n();s();var Ss=v(x());var R$=({platform:e,version:A,onClosePress:j,onNextPress:t})=>{let r=Y(),{i18n:o}=BA(),a=o.language,{setState:i}=Ee(),{data:c}=EA(),p=Array.from(new Set(c?.addresses?.map(G=>G.addressType))),{data:d=[]}=Fs(e,A,a),{data:m,isPending:B,isFetching:f,isError:k}=ys(e,A,a),g=m?.groups??[],E=B||f||k,[y,F]=(0,Ss.useState)(""),S=Fi(y)??"",$=y.length>0,M=Qk(d,S,Ik),O=(0,Ss.useCallback)(({tokenWithMetadata:G,ownerPublicKey:z})=>{let{token:D}=G,{name:h,symbol:q,caip19:C}=D,{chainId:R}=C;r.capture("fiatOnrampFungibleSelected",{data:{networkId:R,chainId:I.getChainID(R),asset:{name:h,symbol:q,type:"fungible"}}}),i({...Ut,onClose:j,ownerPublicKey:z,fungible:G.token}),t()},[r,j,t,i]);return(0,Ss.useEffect)(()=>{r.capture("fiatOnrampInitiated")},[r]),{enabledAddressTypes:p,groupedTokens:g,isLoading:E,isSearching:$,searchedTokens:M,searchTerm:y,selectedAccount:c,onClosePress:j,onTokenPress:O,setSearchTerm:F}};n();s();var oj=v(x());n();s();var Is=v(x());n();s();var Pk=v(x()),du=({marginBottom:e=0})=>{let{t:A}=BA(),{data:[j]}=fA(["enable-buy-flow-warning"]);return j?Pk.default.createElement(cA,{marginBottom:e},Pk.default.createElement($B,{level:"4-error"},A("buyFlowHealthWarning"))):null};n();s();var Ko=v(x());n();s();n();s();var D$=v(x()),N$=({networkID:e,address:A})=>{let j=SK({networkID:e,address:A});return j?D$.default.createElement(wB,{children:j,size:"small"}):null},SK=({networkID:e,address:A})=>{let j=lB();return rB.get(e).badge?.(e,j,A)??null};var rj=v(x());n();s();var Oj=v(x()),mu=48,Ok=Oj.default.memo(({networkId:e,logoURI:A,type:j})=>{let t=wK({disableBadge:!1,tokenType:j,chain:I.getChainID(e)});return Oj.default.createElement(cA,{size:mu,position:"relative"},A?Oj.default.createElement(Cj,{src:A,height:mu,width:mu,borderRadius:"circle",fallback:Oj.default.createElement(K$,null)}):Oj.default.createElement(K$,null),t?Oj.default.createElement(IK,{networkId:e}):null)}),K$=()=>Oj.default.createElement(cA,{alignItems:"center",justifyContent:"center",size:mu,backgroundColor:"bgWallet",borderRadius:"circle"},Oj.default.createElement(Wt.Coin,{size:"50%",color:"borderPrimary"})),wK=({disableBadge:e,tokenType:A,chain:j})=>e?!1:Dj.get(j).alwaysShowNetworkBadge?!0:!le(A),IK=({networkId:e})=>Oj.default.createElement(cA,{right:"-2",bottom:"-2",position:"absolute",borderColor:"bgRow",borderStyle:"solid",borderWidth:2,style:{borderRadius:9}},Oj.default.createElement(kf,{networkID:e,size:18}));n();s();var ws=v(x()),L$=({image:e,name:A,symbol:j,onPress:t})=>ws.default.createElement(cA,{backgroundColor:"bgRow",borderRadius:"row",padding:16,onPress:t},ws.default.createElement(cA,{gap:12},e,ws.default.createElement(cA,{gap:4,alignItems:"flex-start"},ws.default.createElement(bA,null,A),ws.default.createElement(bA,{color:"textSecondary"},j))));var Bi=rj.default.memo(({enabledAddressTypes:e,selectedAccount:A,tokenWithMetadata:j,type:t,onPress:r})=>{let{token:o,addressType:a}=j,{caip19:i,logoURI:c,name:p,symbol:d}=o,{chainId:m}=i,B=ut(i),{t:f}=BA(),k=p??f("assetDetailUnknownToken"),g=(0,rj.useMemo)(()=>{let y=A?.addresses.find(F=>a?F.addressType===a&&F.networkID===m:F.networkID===m)?.address??"";return I.isEVMNetworkID(m)?y.toLowerCase():y},[A,a,m]),E=(0,rj.useCallback)(()=>{r({tokenWithMetadata:j,ownerPublicKey:g})},[r,j,g]);return a&&!e.includes(a)?rj.default.createElement(rj.default.Fragment,null):t==="card"?rj.default.createElement(L$,{onPress:E,image:rj.default.createElement(Ok,{logoURI:c,networkId:i.chainId,type:B}),name:k,symbol:d}):rj.default.createElement(vi,{onPress:E,start:rj.default.createElement(Ok,{logoURI:c,networkId:i.chainId,type:B}),topLeft:{text:k,after:rj.default.createElement(N$,{networkID:i.chainId,address:g})},bottomLeft:d})});var U$=({enabledAddressTypes:e,group:A,groupIndex:j,selectedAccount:t,onTokenPress:r})=>{let o=j===0;return Ko.default.createElement(cA,{key:A.groupName,marginTop:o?8:24},Ko.default.createElement(bA,{font:at?"bodyMedium":"title3Semibold",color:"textSecondary",marginBottom:8},A.groupName),Ko.default.createElement(cA,{flexWrap:"wrap",direction:"row",gap:o?0:"list"},A.tokens.map((a,i)=>{let{token:c,addressType:p}=a,d=`${c.symbol}-${c.caip19.chainId}-${i}`;return p&&!e.includes(p)?null:o?Ko.default.createElement(cA,{key:d,flexBasis:"50%",paddingLeft:i%2===0?0:4,paddingRight:i%2===0?4:0,paddingBottom:i>=A.tokens.length-2?0:8},Ko.default.createElement(Bi,{enabledAddressTypes:e,selectedAccount:t,tokenWithMetadata:A.tokens[i],type:"card",onPress:r})):Ko.default.createElement(Bi,{key:d,tokenWithMetadata:A.tokens[i],enabledAddressTypes:e,selectedAccount:t,type:"row",onPress:r})})))};var Q$=Is.default.memo(({groupedTokens:e,enabledAddressTypes:A,selectedAccount:j,onTokenPress:t})=>Is.default.createElement(Is.default.Fragment,null,Is.default.createElement(du,{marginBottom:16}),e.map((r,o)=>Is.default.createElement(U$,{enabledAddressTypes:A,group:r,groupIndex:o,key:r.groupName,onTokenPress:t,selectedAccount:j}))));n();s();var $s=v(x());var H$=$s.default.memo(({enabledAddressTypes:e,searchedTokens:A,selectedAccount:j,onTokenPress:t})=>$s.default.createElement($s.default.Fragment,null,A.map((r,o)=>$s.default.createElement(cA,{key:`${r.token.symbol}-${r.token.caip19.chainId}-${o}`,marginBottom:8},$s.default.createElement(Bi,{enabledAddressTypes:e,selectedAccount:j,tokenWithMetadata:r,type:"row",onPress:t})))));var V$=e=>{let{isLoading:A,isSearching:j,searchedTokens:t,selectedAccount:r,enabledAddressTypes:o,onTokenPress:a,groupedTokens:i}=e;return oj.default.createElement(oj.default.Fragment,null,A?oj.default.createElement($K,null):j?oj.default.createElement(oj.default.Fragment,null,t.length>0?oj.default.createElement(H$,{searchedTokens:t,selectedAccount:r,enabledAddressTypes:o,onTokenPress:a}):oj.default.createElement(vK,null)):oj.default.createElement(Q$,{enabledAddressTypes:o,groupedTokens:i,selectedAccount:r,onTokenPress:a}))},$K=()=>oj.default.createElement(cA,{gap:"list",paddingTop:"screen"},[...Array(3)].map((e,A)=>oj.default.createElement(Jo,{key:A,topRight:!1,bottomRight:!1}))),vK=()=>{let{t:e}=BA();return oj.default.createElement(cA,{flex:1,alignItems:"center",justifyContent:"center"},oj.default.createElement(bA,{font:"body",color:"textSecondary",align:"center"},e("noBuyOptionsAvailableInCountry")))};var X$=({platform:e,navigateToForm:A,onBackPress:j})=>{let{t}=BA(),r=R$({platform:e,version:$A,onClosePress:j,onNextPress:A});return Lo.default.createElement(cA,{flex:1},Lo.default.createElement(IB,{id:"search",label:"Search",showLabel:!1,placeholder:t("assetListSearch"),setValue:r.setSearchTerm,value:r.searchTerm||""},Lo.default.createElement(Wt.Search,{size:16,color:"textSecondary"})),Lo.default.createElement(cA,{flex:1,key:r.searchTerm},Lo.default.createElement(vB.ScrollView,{contentContainerStyle:{marginTop:Ve.paddingScreen,marginBottom:Ve.paddingScreen,minHeight:"100%"}},Lo.default.createElement(V$,{...r}))))};n();s();var W$=v(x());n();s();var HA=v(x());n();s();var ku=v(x()),Bu=({assets:e,name:A,onClick:j,isSelected:t,estimatedArrival:r})=>ku.default.createElement(bi,{rows:[{type:"radio",active:t??!1,start:e.roundIcon?ku.default.createElement(Cj,{width:44,height:44,borderRadius:"circle",src:e.roundIcon}):void 0,topLeft:A,bottomLeft:{before:ku.default.createElement(Wt.Clock,{color:"textSecondary",size:14}),text:r},onPress:j}]});var z$=({platform:e,navigateToAllProviders:A,navigateToForm:j})=>{let{t}=BA(),r=Y(),o=Ee(),a=Ee(S=>S.setState),{provider:i,paymentMethod:c,fungible:p}=o,{currencyCode:d}=GA(),{data:m,isFetching:B,isPending:f}=uu(e,$A,T.language,{token:p?.caip19,fiatCurrencyCode:d,providerId:i?.id,enableFiatRampEnhancements:!0}),{provider:k,paymentMethods:g}=m??{},E=k||i,y=(0,HA.useCallback)(S=>{a({paymentMethod:S,provider:E,checkoutQuoteType:"selected"}),r.capture("fiatOnrampPaymentMethodSelected",{data:{paymentMethodId:S.id}}),j()},[r,j,E,a]),F=(0,HA.useMemo)(()=>B||f?HA.default.createElement(HA.default.Fragment,null,[...Array(3)].map((S,$)=>HA.default.createElement(Jo,{key:$,topRight:!1,bottomRight:!1}))):g?.length===0?HA.default.createElement(bK,null):HA.default.createElement(HA.default.Fragment,null,g?.map(S=>HA.default.createElement(Bu,{key:S.id,isSelected:c?.id===S.id,onClick:()=>y(S),...S}))),[B,f,y,c?.id,g]);return HA.default.createElement(cA,{gap:32},HA.default.createElement(cA,{gap:12},HA.default.createElement(bA,{font:"title2Semibold",color:"textPrimary",children:t("swapFeesProvider")}),HA.default.createElement(bi,{rows:[{type:"drawer",id:"selected-provider",onPress:A,start:E?.logo?HA.default.createElement(Cj,{width:24,height:24,src:E.logo}):void 0,topLeft:E?.name||t("selectSwapProviderTitle"),topRight:!i&&E?{text:"Default"}:void 0}]})),HA.default.createElement(cA,{gap:12},HA.default.createElement(cA,{gap:4},HA.default.createElement(bA,{font:"title2Semibold",color:"textPrimary",children:t("buyThirdPartyScreenPaymentMethodTitle")}),HA.default.createElement(bA,{font:"label",color:"textSecondary",children:t("buyThirdPartyScreenPaymentMethodDescription")}),HA.default.createElement(cA,{marginTop:8,gap:8},F))))},bK=()=>{let{t:e}=BA();return HA.default.createElement(cA,{flex:1,alignItems:"center",justifyContent:"center"},HA.default.createElement(bA,{font:"body",color:"textSecondary",align:"center"},e("buyThirdPartyScreenPaymentMethodEmptyState")))};var J$=({platform:e,navigateToAllProviders:A,navigateToForm:j})=>W$.default.createElement(z$,{platform:e,navigateToAllProviders:A,navigateToForm:j});n();s();var Z$=v(x());n();s();var CA=v(x());n();s();var vs=v(x()),fu=vs.default.memo(e=>{let{name:A,tag:j,logo:t,quote:r,onClick:o,index:a}=e,i={start:vs.default.createElement(Cj,{width:44,height:44,borderRadius:"circle",src:t}),topLeft:A,bottomLeft:j&&{text:j,color:a===0?"accentSuccess":"textSecondary"},onPress:()=>o(e)},c=r?{...i,topRight:r.displayDestinationAmount,bottomRight:`\u2248 ${r.displaySourceAmount}`}:{...i,end:vs.default.createElement(cA,{direction:"row",alignItems:"center",gap:4},vs.default.createElement(Wt.ChevronRight,{color:"textSecondary",size:16}))};return vs.default.createElement(vi,{...c})});var Y$=({platform:e,navigateToPaymentMethods:A,onQuoteExpiry:j})=>{let{t}=BA(),r=Y(),o=Z(),a=Ee(),i=Ee(R=>R.setState),{paymentMethod:c,purchaseType:p,purchaseAmount:d,fungible:m,ownerPublicKey:B}=a,{currencyCode:f}=GA(),{data:[k,g,E]}=fA(["enable-fiat-ramp-optimize-defaults","enable-fiat-ramp-optimize-default-payment-method","enable-fiat-ramp-enhancements"]),{data:y,isFetching:F,isPending:S}=lu(e,$A,T.language,{...p==="currency"?{fiatAmount:d}:{tokenAmount:d},token:m?.caip19,fiatCurrencyCode:f,destinationAddress:B&&m?{address:B,chainId:m?.caip19.chainId,resourceType:"address"}:void 0,optimizeDefaults:k,optimizeDefaultPaymentMethod:g,enableFiatRampEnhancements:E}),$=y?.paymentMethod||c,M=(0,CA.useCallback)(R=>{r.capture("fiatOnrampProviderSelected",{data:{chainId:y?.token?.chainId,providerId:R.id,paymentMethodId:$?.id,destinationAmount:R.quote?.displayDestinationAmount,sourceAmount:R.quote?.displaySourceAmount,asset:y?.token,tag:R.tag}}),i({provider:R,paymentMethod:$,checkoutQuoteType:"selected"}),A()},[r,y?.token,i,$,A]),O=parseFloat(d)>0,[G,z]=(0,CA.useState)(Tr);(0,CA.useEffect)(()=>{let R=setInterval(()=>{S||y?.providers.length===0||!O||(G===0?(z(Tr),o.invalidateQueries({queryKey:[Tk],refetchType:"active"}),j?.()):z(G-1))},1e3);return()=>clearInterval(R)},[S,j,y?.providers.length,o,G,O]);let D=G<10?`0:0${G}`:`0:${G}`,h=G<=10?"accentWarning":"textPrimary",q=(0,CA.useMemo)(()=>F||S?CA.default.createElement(CA.default.Fragment,null,[...Array(3)].map((R,N)=>CA.default.createElement(Jo,{key:N,topRight:!1,bottomRight:!1}))):y?.providers.length===0?CA.default.createElement(qK,null):CA.default.createElement(CA.default.Fragment,null,y?.providers.map((R,N)=>CA.default.createElement(fu,{key:`${R.id}-${N}`,index:N,onClick:M,...R}))),[F,S,M,y?.providers]),C=CA.default.createElement(cA,{direction:"row",gap:4},CA.default.createElement(bA,{font:"captionMedium",color:"textSecondary",children:`${t("fiatRampNewQuote")}:`}),CA.default.createElement(bA,{className:FB({width:36}),font:"captionMedium",color:h,children:D}));return CA.default.createElement(cA,{gap:32},CA.default.createElement(bA,{font:"label",color:"textSecondary",children:t("buyThirdPartyScreenProvidersDescription")}),CA.default.createElement(cA,{gap:12},CA.default.createElement(cA,{direction:"row",justifyContent:"space-between"},CA.default.createElement(bA,{font:"title2Semibold",color:"textPrimary",children:t("buyThirdPartyScreenProviders")}),O&&C),q))},qK=()=>{let{t:e}=BA();return CA.default.createElement(cA,{flex:1,alignItems:"center",justifyContent:"center"},CA.default.createElement(bA,{font:"body",color:"textSecondary",align:"center"},e("buyThirdPartyScreenProvidersEmptyState")))};var Av=({platform:e,navigateToPaymentMethods:A,onQuoteExpiry:j})=>Z$.default.createElement(Y$,{platform:e,navigateToPaymentMethods:A,onQuoteExpiry:j});n();s();var Eu=v(x());n();s();var nj=v(x());n();s();var Uo=v(x());n();s();var xK=new Se("Failed to get FiatRampProviderUrl"),Mk=async(e,A,j,t,r)=>{try{let o={"x-client-platform":e,"x-client-app-version":A,"x-client-locale":j},a=await H.api().headers(o).bearer(r).post("/fiat_ramp/v2/onramp/provider_url",t);if(!tA(a))throw new Se(a.data.message);return a.data}catch(o){throw o instanceof Se?o:xK}};var ev=({platform:e,openProviderUrl:A,onError:j})=>{let t=Y(),r=hj(),{i18n:o}=BA(),{currencyCode:a}=GA(),{provider:i,paymentMethod:c,ownerPublicKey:p,fungible:d,purchaseAmount:m,purchaseType:B,setState:f}=Ee(),{data:[k]}=fA(["enable-fiat-ramp-enhancements"]),[g,E]=(0,Uo.useState)(!1),y=(0,Uo.useMemo)(()=>({...B==="currency"?{fiatAmount:m}:{tokenAmount:m},token:d?.caip19,fiatCurrencyCode:a,destinationAddress:d?{address:p,chainId:d?.caip19?.chainId,resourceType:"address"}:void 0,paymentMethodId:c?.id||"",providerId:i?.id||"",redirectURL:e==="ios"||e==="android"?"phantom://fiatramp/success":void 0,enableFiatRampEnhancements:k}),[a,d,p,c?.id,e,i?.id,m,B,k]),F=(0,Uo.useCallback)(async()=>{t.capture("fiatOnrampBuyClickedByUser",{data:{...y}}),E(!0);try{let{url:S}=await Mk(e,$A,o.language,y,r);E(!1),A(S)}catch(S){b.addBreadcrumb("onRamp",`Error getting provider url: ${JSON.stringify(y)}`,"error"),b.captureError(S,"onRamp"),E(!1),f({redirectErrorMessage:S.message}),j()}},[r,t,o.language,A,e,y,j,f]);return(0,Uo.useMemo)(()=>({isLoading:g,onPress:F}),[g,F])};var jv=({platform:e,openProviderUrl:A,onError:j})=>{let{t}=BA(),{provider:r}=Ee(),{isLoading:o,onPress:a}=ev({platform:e,openProviderUrl:A,onError:j});return nj.default.createElement(cA,{flex:1,justifyContent:"space-between",alignItems:"stretch",marginTop:32},nj.default.createElement(cA,{gap:32},nj.default.createElement(cA,{direction:"row",justifyContent:"center",alignItems:"center",gap:4},nj.default.createElement(De,{icon:"LogoFill",shape:"square",size:80,color:"textPrimary"}),nj.default.createElement(hB,{autoPlay:!0,size:32}),nj.default.createElement(Cj,{src:r?r.logo:"",width:80,height:80,borderRadius:20,fallback:nj.default.createElement(De,{icon:"Image",shape:"square",size:80,backgroundColor:"bgRow",color:"bgWallet"})})),nj.default.createElement(cA,{gap:16,alignItems:"center",justifyContent:"center"},nj.default.createElement(bA,{align:"center",font:at?"title1Semibold":"heading4Bold"},t("fiatRampTransferringToProvider",{provider:r?.name})),nj.default.createElement(bA,{align:"center",font:"body",color:"textSecondary",maxWidth:320},t("fiatRampLeavingPhantomApp",{provider:r?.name})))),nj.default.createElement(cA,{direction:"row"},nj.default.createElement(SB,{theme:"primary",onClick:async({start:i,stop:c})=>{i();try{await a?.()}finally{c()}},disabled:o},t("fiatRampOpen",{provider:r?.name}))))};var tv=({onError:e})=>{let A=(0,Eu.useCallback)(async j=>{(await import("./browser-polyfill-GLPLHQ3C.js")).default.tabs.create({url:j})},[]);return Eu.default.createElement(jv,{platform:"web",openProviderUrl:A,onError:e})};n();s();var ov=v(x());n();s();var Ht=v(x());var rv=({onTryAgain:e})=>{let{t:A}=BA(),{provider:j,redirectErrorMessage:t,setState:r}=Ee();return Ht.default.createElement(cA,{flex:1,justifyContent:"space-between",alignItems:"stretch",marginTop:32},Ht.default.createElement(cA,{gap:32,alignItems:"center",justifyContent:"center"},Ht.default.createElement(De,{icon:"X",shape:"circle",backgroundColor:"accentAlert",color:"bgWallet",size:80}),Ht.default.createElement(cA,{gap:16},Ht.default.createElement(bA,{align:"center",font:at?"title1Semibold":"heading4Bold"},A("fiatRampRedirectErrorTitle")),Ht.default.createElement(bA,{align:"center",font:"body",color:"textSecondary",maxWidth:360},A("fiatRampRedirectErrorDescription",{provider:j?.name})),t&&Ht.default.createElement(bA,{align:"center",font:"body",color:"textSecondary"},t))),Ht.default.createElement(wu,{theme:"primary",onPress:()=>{r({redirectErrorMessage:void 0}),e()}},A("fiatRampRedirectErrorTryAgain")))};var nv=({onTryAgain:e})=>ov.default.createElement(rv,{onTryAgain:e});n();s();var TK=v(x());n();s();var GK=v(x());var Pr=()=>!0,sv={tokens:Pr,prices:sf,collectibles:mf,currency:yB,staking:Bf,swapper:Lm,transferFungibleLoggingContext:Pr,user:oB,[PB]:Pr,[Yt]:Pr,[ki]:Pr,[ff]:Pr,[ra]:Pr,[Xj]:Pr,"test-debug-query":Ei},av=e=>{if(e.queryKey.length===0)return!1;let A=String(e.queryKey[0]);return e.state.status!=="success"?!1:sv[A]?sv[A](e):!1};var iv=new Nk({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),OK=Rk({underlyingStorage:new JB,throttleMs:1e3,enableDebugLogs:Ei()}),MK=({children:e})=>(Zg([[ef,iv]]),e),Y6e=e=>gu.default.createElement(Kk,{client:iv,persistOptions:{persister:OK,dehydrateOptions:{shouldDehydrateQuery:av},buster:CK,maxAge:1/0}},gu.default.createElement(Af,null,gu.default.createElement(MK,null,e.children))),CK="25.2.0";n();s();var _K=(U=>(U.HasOnboarded="hasOnboarded",U.ResetHasOnboarded="resetHasOnboarded",U.LockExtension="lockExtension",U.UnlockExtension="unlockExtension",U.IsExtensionUnlocked="IsExtensionUnlocked",U.SetPassword="setPassword",U.VerifyPassword="verifyPassword",U.UpdatePassword="updatePassword",U.ImportPrivateKeyAccount="importPrivateKeyAccount",U.ImportReadOnlyAccount="importReadOnlyAccount",U.ImportSeedAccount="importSeedAccount",U.ImportSeedlessAccount="importSocialSeedAccount",U.IsExistingSeed="isExistingSeed",U.AddAccountForSeed="addAccountForSeed",U.AddAccountForSeedless="addAccountForSeedless",U.AddLedgerAccounts="addLedgerAccounts",U.DeriveAddresses="deriveAddresses",U.ExportPrivateKey="exportPrivateKey",U.ExportEntropy="exportEntropy",U.SetAccountIcon="setAccountIcon",U.RemoveAccount="removeAccount",U.ReorderAccount="reorderAccount",U.GetAllAccounts="getAllAccounts",U.GetAllSeeds="getAllSeeds",U.GetAllSeedless="getAllSeedlessSeeds",U.GetAuthenticationPublicKey="getAuthenticationPublicKey",U.Sign="sign",U.SyncAccounts="syncAccounts",U.CheckVaultIntegrity="checkVaultIntegrity",U.LogMessage="logMessage",U.DownloadLogs="downloadLogs",U.ProviderInjectionOptions="providerInjectionOptions",U.ServiceWorkerMutexAcquire="serviceWorkerMutexAcquire",U.ServiceWorkerMutexRelease="serviceWorkerMutexRelease",U))(_K||{});export{WOA as a,Jw as b,wMA as c,lt as d,Gu as e,Bv as f,fv as g,qv as h,xv as i,Ev as j,Pu as k,Gv as l,hf as m,Dr as n,Tv as o,Fv as p,hv as q,Du as r,$v as s,Dv as t,Nv as u,Rf as v,Uu as w,Pv as x,Hu as y,Kv as z,Vu as A,Nf as B,Lv as C,Kf as D,Xu as E,Hs as F,Lj as G,tl as H,zs as I,nb as J,nl as K,sl as L,al as M,sb as N,Ws as O,Wb as P,Pl as Q,QD as R,cq as S,vq as T,yq as U,Qj as V,Fq as W,c6 as X,Jl as Y,qq as Z,xq as _,Yl as $,ea as aa,$e as ba,h7 as ca,Hr as da,f7 as ea,Oq as fa,Mq as ga,Cq as ha,Ng as ia,Xq as ja,Dq as ka,Wg as la,pM as ma,dM as na,rd as oa,UP as pa,Z1 as qa,Dy as ra,da as sa,Y7 as ta,Z7 as ua,Ad as va,oO as wa,nO as xa,Gd as ya,aM as za,EM as Aa,SM as Ba,$M as Ca,Ik as Da,Tr as Ea,oK as Fa,$k as Ga,vk as Ha,bk as Ia,Ut as Ja,Ee as Ka,ys as La,Fs as Ma,x$ as Na,uu as Oa,lu as Pa,_$ as Qa,du as Ra,X$ as Sa,J$ as Ta,Av as Ua,Mk as Va,tv as Wa,nv as Xa,We as Ya,w as Za,im as _a,iA as $a,Er as ab,Dd as bb,ao as cb,GM as db,TM as eb,va as fb,aC as gb,Sc as hb,lC as ib,xR as jb,NR as kb,HR as lb,WR as mb,mC as nb,tD as ob,gC as pb,Um as qb,Pt as rb,sm as sb,oD as tb,O_ as ub,M_ as vb,R_ as wb,cD as xb,pD as yb,D_ as zb,uD as Ab,CD as Bb,_D as Cb,RD as Db,DD as Eb,ND as Fb,Hm as Gb,Ja as Hb,Xm as Ib,mD as Jb,UD as Kb,kD as Lb,x2 as Mb,Ue as Nb,BN as Ob,Qp as Pb,zN as Qb,fN as Rb,IN as Sb,t$ as Tb,o$ as Ub,SN as Vb,WN as Wb,PN as Xb,ON as Yb,MN as Zb,JN as _b,_N as $b,av as ac,iv as bc,Y6e as cc,_K as dc};
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-KRVIHM5V.js.map
