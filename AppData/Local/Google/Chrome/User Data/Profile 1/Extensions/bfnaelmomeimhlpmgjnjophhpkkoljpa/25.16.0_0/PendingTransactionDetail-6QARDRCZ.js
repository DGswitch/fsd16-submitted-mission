import{Da as R,Fa as Ve,Ka as He,m as Z,o as Ge,q as Ne}from"./chunk-IWELHSHA.js";import"./chunk-GQXAN4MD.js";import"./chunk-QSCY46GS.js";import"./chunk-MDZMKEZM.js";import{a as D}from"./chunk-RXCJQWLX.js";import"./chunk-YQCQ4MB2.js";import"./chunk-OHAHQ6TH.js";import"./chunk-N7HMUOOL.js";import"./chunk-CQVRVBRD.js";import"./chunk-ZOT2E2W3.js";import"./chunk-ZQGFKLTM.js";import"./chunk-6CJ7SBO7.js";import"./chunk-BFYHQRJ5.js";import"./chunk-FOWWPYB2.js";import"./chunk-YN56PGWE.js";import"./chunk-P6A2XCI3.js";import"./chunk-ACPUL5BT.js";import"./chunk-4OJLPFQL.js";import{g as O}from"./chunk-3UM3SKCA.js";import"./chunk-XCXTYR6X.js";import{a as Fe}from"./chunk-HYWTTNE6.js";import{g as Me}from"./chunk-F2XESPWP.js";import"./chunk-AWXKHRGR.js";import{c as Ae}from"./chunk-CUH334XZ.js";import"./chunk-Z2TWY6BT.js";import"./chunk-CLYKGO52.js";import"./chunk-QVBWEOIX.js";import"./chunk-7YL3G7GY.js";import"./chunk-AU2X2JVL.js";import"./chunk-MI4RUDWH.js";import{a as Y,c as $,d as L}from"./chunk-FRKRTBHN.js";import{C as pe,V as Be,ib as E,p as f,q as me,r as de}from"./chunk-FIPJHJBF.js";import{la as ge}from"./chunk-KRVIHM5V.js";import"./chunk-UCBZOSRF.js";import"./chunk-KFAB2DSY.js";import"./chunk-7ZN6LOJ6.js";import"./chunk-HCIXRSEY.js";import"./chunk-FU7K6O6V.js";import{s as Ie}from"./chunk-TQFGOCJD.js";import"./chunk-3R4YQLLG.js";import"./chunk-MWXM4F4N.js";import{a as we,c as X}from"./chunk-CQI745PK.js";import"./chunk-WOJPTGRH.js";import{Ac as ke,Bc as De,Jc as be,Qc as le,Tc as ve,Vc as W,Wa as Se,ab as z,mc as Ee,pd as Ue,wc as Q,x as Pe,za as re}from"./chunk-P6FNF3PO.js";import"./chunk-WFPABEAU.js";import{U as H,a as G,c as N,j as V}from"./chunk-ISLSTDN4.js";import{Hc as it,Nd as A,Ya as P}from"./chunk-7EAYY6PT.js";import{p as se}from"./chunk-VPAI5YFM.js";import"./chunk-TB3UVYOQ.js";import{j as M,s}from"./chunk-E25H5Y2I.js";import"./chunk-5CNB4EIU.js";import{D as J}from"./chunk-IW23UAMS.js";import{D as Ce,Q as ce,b as q}from"./chunk-27NXJJ7L.js";import{a as ae}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-O2N6PUOM.js";import"./chunk-UNDMYLJW.js";import"./chunk-ICCUGV36.js";import{f as oe,h as B,n as F}from"./chunk-3KENBVE7.js";B();F();var a=oe(ae());B();F();var T=oe(ae());var st=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,ct=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,lt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,mt=f(E)`
  margin-top: 16px;
`,dt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Le=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,T.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,d=P.getAddressType(t),I=e.data.transactions[e.data.transactions.length-1],{data:c}=A(),{data:n,status:b}=le(e,()=>u(),c),{data:h}=Q(t,n),S=h?.gasEstimationPriceUSD??"",{data:k}=H(),U=[];if(k){let x=k.explorers[t]??G.get(t).defaultExplorer,p=V({networkID:t,endpoint:"transaction",explorerType:x,param:I.hash});p!==""&&U.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[x]}),value:p,type:"link"})}let{data:v,status:_}=W(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),y=z(o,_,v),w=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):T.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:y!==""?y:T.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...U],{mutateAsync:C}=Ie(),ee=(0,T.useCallback)(async()=>{if(!c||!n)return;let x=c.addresses.find(p=>p.networkID===t);if(x){e.type==="cancel"?X.capture("transactionPrioritizeCancelConfirmClicked",{data:{chainID:t,chainType:d}}):X.capture("transactionCancelConfirmClicked",{data:{chainID:t,chainType:d}});try{r("inflight");let p=Ue({ethereumNetworkID:t,sender:x.address,destination:x.address,value:new q("0",10),nonce:e.data.nonce});await C({multichainTransaction:{networkID:t,unsignedTransaction:p},pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:se.parse({from:e.ownerAddress})},senderAddress:x,gasEstimation:n}),u(),i(),r(void 0)}catch(p){J.captureError(p,"transaction"),r("error")}}},[c,t,d,e,n,C,u,i]);return T.default.createElement(st,null,T.default.createElement(ct,null,T.default.createElement(Ge,{image:{type:"icon",preset:"x-bold"},size:64}),T.default.createElement(lt,{size:28,weight:600},e.type==="cancel"?o("transactionPrioritizeCancel"):o("transactionCancel")),T.default.createElement(R,{rows:w}),g!=="error"&&T.default.createElement(mt,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionCancelHelperText")),g==="error"&&T.default.createElement(dt,null,T.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:T.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),T.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:ee,primaryTheme:"warning",primaryText:g==="inflight"?T.default.createElement(Y,{trackColor:s.colors.legacy.accentAlert,color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||b==="error",secondaryText:o("commandClose")}))};B();F();var Oe=oe(it()),l=oe(ae());var ft=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,ut=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,gt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,Tt=f(E)`
  margin-top: 16px;
`,xt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,yt=({size:e})=>l.default.createElement(de,{size:e},l.default.createElement(me,{shape:"circle",color:ce(s.colors.legacy.accentSuccess,.1)},l.default.createElement(pe,{width:32}))),_e=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,l.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,{data:d}=A(),{data:I,status:c}=Ee({networkID:t}),n=I?.fast,b=re.get(t).transactionSpeedSeconds("fast"),{data:h}=H(),S=[];if(h){let y=h.explorers[t]??G.get(t).defaultExplorer,w=V({networkID:t,endpoint:"transaction",explorerType:y,param:e.data.txID});w!==""&&S.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[y]}),value:w,type:"link"})}let k=z(o,c,b?{timeToMineSeconds:b}:void 0),U=[{label:o("richTransactionDetailNetworkFee"),value:n?`${Pe(n.btcPerKilobyte)} sats/vB`:l.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:k!==""?k:l.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...S],v=be(),_=(0,l.useCallback)(async()=>{if(!d||!n?.btcPerKilobyte)return;let y=d.addresses.filter(C=>C.networkID===t),w=y[0];y.length>1&&(w=y.find(C=>C.addressType==="bip122_p2wpkh")),X.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t}});try{r("inflight"),await Se(Me(),{addressType:w.addressType,accountIdentifier:d.identifier,pendingTransaction:e,pendingTransactionInput:{...(0,Oe.default)(e)},desiredFeeRateInBtcPerKilobyte:n.btcPerKilobyte,safeToSendUtxos:await v.getSafeToSendUtxos(w.address),utxoManager:v},new we),u(),i(),r(void 0)}catch(C){J.captureError(C,"transaction"),r("error")}},[d,t,e,n?.btcPerKilobyte,u,i,v]);return l.default.createElement(ft,null,l.default.createElement(ut,null,l.default.createElement(yt,{size:64}),l.default.createElement(gt,{size:28,weight:600},o("transactionSpeedUp")),l.default.createElement(R,{rows:U}),g!=="error"&&l.default.createElement(Tt,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionSpeedUplHelperText")),g==="error"&&l.default.createElement(xt,null,l.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:l.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),l.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:_,primaryText:g==="inflight"?l.default.createElement(Y,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:c==="error"&&!n?.btcPerKilobyte,secondaryText:o("commandClose")}))};B();F();var m=oe(ae());var ht=f.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Ct=f.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Pt=f(E)`
  margin-top: 20px;
  margin-bottom: 20px;
`,St=f(E)`
  margin-top: 16px;
`,wt=f.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Et=({size:e})=>m.default.createElement(de,{size:e},m.default.createElement(me,{shape:"circle",color:ce(s.colors.legacy.accentSuccess,.1)},m.default.createElement(pe,{width:32}))),Ke=({pendingTransaction:e,onSuccess:i})=>{let{t:o}=M(),[g,r]=(0,m.useState)(void 0),{popDetailView:u}=O(),t=e.networkID,d=P.getAddressType(t),I=e.data.transactions[e.data.transactions.length-1],{data:c}=A(),{data:n,status:b}=le(e,()=>u(),c),{data:h}=Q(t,n),S=h?.gasEstimationPriceUSD??"",{data:k}=H(),U=[];if(k){let x=k.explorers[t]??G.get(t).defaultExplorer,p=V({networkID:t,endpoint:"transaction",explorerType:x,param:I.hash});p!==""&&U.push({label:o("richTransactionDetailViewOnExplorer",{explorer:N[x]}),value:p,type:"link"})}let{data:v,status:_}=W(t,n?.maxFeePerGas,n?.maxPriorityFeePerGas),y=z(o,_,v),w=[{label:o("richTransactionDetailNetworkFee"),value:S.length>0?o("gasUpTo",{amount:S}):m.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},{label:o("transactionEstimatedTime"),value:y!==""?y:m.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary})},...U],{mutateAsync:C}=ve(),ee=(0,m.useCallback)(async()=>{if(!(!c||!n||!c.addresses.find(p=>p.networkID===t))){X.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t,chainType:d}});try{r("inflight"),await C({chainType:"eip155",accountIdentifier:c.identifier,pendingTransaction:e,pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:se.parse({from:e.ownerAddress})},gasEstimation:n,nonce:e.data.nonce}),u(),i(),r(void 0)}catch(p){J.captureError(p,"transaction"),r("error")}}},[c,t,d,e,n,C,i,u]);return m.default.createElement(ht,null,m.default.createElement(Ct,null,m.default.createElement(Et,{size:64}),m.default.createElement(Pt,{size:28,weight:600},o("transactionSpeedUp")),m.default.createElement(R,{rows:w}),g!=="error"&&m.default.createElement(St,{lineHeight:16,color:s.colors.legacy.textSecondary,size:14},o("transactionSpeedUplHelperText")),g==="error"&&m.default.createElement(wt,null,m.default.createElement(Z,{color:s.colors.legacy.accentAlert,title:m.default.createElement(E,{color:s.colors.legacy.accentAlert,lineHeight:16,size:14,weight:400},o("transactionReplaceError"))}))),m.default.createElement(L,{onSecondaryClicked:()=>u(),onPrimaryClicked:ee,primaryText:g==="inflight"?m.default.createElement(Y,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!n?.maxFeePerGas||b==="error",secondaryText:o("commandClose")}))};var kt=e=>{let{networkID:i}=e,[o,g]=(0,a.useState)(Date.now());(0,a.useEffect)(()=>{let K=setInterval(()=>g(Date.now()),5e3);return()=>clearInterval(K)},[g]);let{t:r}=M(),{pushDetailView:u}=O(),{handleHideModalVisibility:t}=He(),d=(0,a.useCallback)(()=>t("pendingTransaction"),[t]),{data:I}=A(),{data:c}=De(I?.addresses||[]),n=c?.pendingTransaction.filter(K=>e.networkID===K.networkID),b=n?n[n.length-1]?.id:void 0,h=re.get(e.networkID).isPendingTransactionConfirmed(e),S=!1,k=e.type??"dappInteraction",U=Ce(e.timestamp??0,r("richTransactionDetailAt")),{header:v,assetSymbol:_,tokenUSDPrice:y,uiRecipient:w,logoUri:C}=(0,a.useMemo)(()=>({header:e.display.detail?.header??"",assetSymbol:e.display.detail?.assetSymbol??"",tokenUSDPrice:e.display.detail?.tokenUSDPrice??"",uiRecipient:e.display.detail?.uiRecipient??"",logoUri:e.display.detail?.logoUri??""}),[e]),ee=P.getNetworkName(i),x="",p=s.colors.legacy.textSecondary;h?S?(x=r("transactionsFailed"),p=s.colors.legacy.accentAlert):(x=r("transactionsSuccess"),p=s.colors.legacy.accentSuccess):e.type==="cancel"?(x=r("pendingTransactionCancelling"),p=s.colors.legacy.accentAlert):x=r("pendingTransactionPending");let te;if("transactions"in e.data&&P.isEVMNetworkID(i)){let j=e.data.transactions[e.data.transactions.length-1].unsignedTransaction,ie=new q(j.maxFeePerGas??"0"),nt=new q(j.maxPriorityFeePerGas??"0");te={networkID:i,gasLimit:new q(j.gas??"0"),maxFeePerGas:ie,maxPriorityFeePerGas:nt},S=!!e.data?.transactions?.[e.data?.transactions?.length-1]?.error}let{data:je}=Q(i,te),Xe=r("gasUpTo",{amount:je?.gasEstimationPriceUSD}),{data:$e,status:qe}=W(i,te?.maxFeePerGas,te?.maxPriorityFeePerGas),xe=z(r,qe,$e),{data:ye}=H(),he=[];if(ye){let K=ye.explorers[i]??G.get(i).defaultExplorer,j="";P.isEVMNetworkID(e.networkID)&&"transactions"in e.data&&(j=e.data.transactions[e.data.transactions.length-1].hash),P.isBitcoinNetworkID(e.networkID)&&(j=e.data.txID);let ie=V({networkID:i,endpoint:"transaction",explorerType:K,param:j});ie!==""&&he.push({label:r("richTransactionDetailViewOnExplorer",{explorer:N[K]}),value:ie,type:"link"})}let Je=P.getNetworkName(i),Qe={label:r("pendingTransactionDate"),value:U},We={label:r("pendingTransactionStatus"),value:x,color:p},Ye={label:r("transactionsTo"),value:w??""},Ze={label:r("historyNetwork"),value:ee},Re={label:r("pendingTransactionNetworkFee"),value:Xe,tooltipContent:r("networkFeesTooltipDescription",{chainName:Je})},et={label:r("pendingTransactionEstimatedTime"),value:xe!==""?xe:a.default.createElement(D,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:s.colors.legacy.borderSecondary}),tooltipContent:r("sendFungibleSummaryEstimatedTimeDescription")},fe=a.default.createElement(Ne,{pendingTransactionType:k,isError:S,isConfirmed:h,logoUri:C,size:"medium"}),ne,tt=!h&&ge.get(i).showFeeRowInPendingTransactionDetail,ot=ge.get(i).showTimeToMineRowInPendingTransactionDetail&&!h,rt=e.display.detail?.secondaryHeader,ue=[Qe,We,Ye,Ze,...tt?[Re]:[],...ot?[et]:[],...he];switch(k){case"send":{ne={sections:[{rows:ue}],title:h?r("richTransactionDetailSent"):r("pendingTransactionsSendingTitle",{assetSymbol:_}),primaryText:{value:v},secondaryText:{value:y},image:fe};break}case"cancel":{ne={sections:[{rows:ue}],title:r(h?"transactionCancelled":"pendingTransactionCancelling"),primaryText:{value:v},secondaryText:{value:y},image:fe};break}case"dappInteraction":default:{ne={sections:[{rows:ue}],title:r(h?"richTransactionDetailAppInteraction":"pendingTransactionPendingInteraction"),primaryText:{value:""},secondaryText:{value:rt??r("pendingTransactionUnknownApp")},image:fe};break}}return{detailsProps:ne,pendingTransaction:e,isOldestPendingTx:b===e.id,leftButton:a.default.createElement(Dt,{onClick:d},a.default.createElement(Be,null)),showCancelEvmTransactionModal:()=>{u(a.default.createElement(Le,{onSuccess:d,pendingTransaction:e}))},showSpeedUpEvmTransactionModal:()=>{u(a.default.createElement(Ke,{onSuccess:d,pendingTransaction:e}))},showSpeedUpBitcoinTransactionModal:()=>{u(a.default.createElement(_e,{onSuccess:d,pendingTransaction:e}))},hidePendingTransactionModal:d,now:o}},Dt=f(Ae)`
  position: absolute;
  left: 5px;
`,bt=({pendingTransaction:e})=>{let i=kt(e);return a.default.createElement(It,{...i})},vt=({pendingTransactionId:e})=>{let{data:i}=ke(e),[o,g]=(0,a.useState)();return(0,a.useEffect)(()=>{i&&g(i)},[i]),o?a.default.createElement(bt,{pendingTransaction:o}):null},kr=vt,It=a.default.memo(({detailsProps:e,showCancelEvmTransactionModal:i,showSpeedUpEvmTransactionModal:o,showSpeedUpBitcoinTransactionModal:g,hidePendingTransactionModal:r,leftButton:u,pendingTransaction:t,isOldestPendingTx:d,now:I})=>{let{t:c}=M(),n=a.default.createElement($,{onClick:r},c("commandClose"));if(t&&(d||t.type!=="cancel")&&!re.get(t.networkID).isPendingTransactionMined(t)){if(P.isPolygonNetworkID(t.networkID)){t=t;let b=t.data.transactions[t.data.transactions.length-1];I-b.timestamp>6e4&&(t.type==="cancel"?n=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):n=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel")))}P.isEthereumNetworkID(t.networkID)&&(t.type==="cancel"?n=a.default.createElement($,{theme:"warning",onClick:i},c("transactionPrioritizeCancel")):d?n=a.default.createElement(L,{primaryText:c("pendingTransactionSpeedUp"),secondaryText:c("pendingTransactionCancel"),onPrimaryClicked:o,onSecondaryClicked:i,primaryTheme:"default",secondaryTheme:"warning"}):n=a.default.createElement($,{theme:"warning",onClick:i},c("pendingTransactionCancel"))),P.isBitcoinNetworkID(t.networkID)&&(n=a.default.createElement($,{theme:"default",onClick:g},c("pendingTransactionSpeedUp")))}return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ve,{...e,leftButton:u}),a.default.createElement(Fe,null,n))});export{vt as PendingTransactionDetail,kr as default};
//# sourceMappingURL=PendingTransactionDetail-6QARDRCZ.js.map
