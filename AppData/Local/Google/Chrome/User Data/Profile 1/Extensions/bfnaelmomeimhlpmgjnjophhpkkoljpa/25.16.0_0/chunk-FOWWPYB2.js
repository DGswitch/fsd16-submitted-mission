import{D as Zn,E as eo,F as _e,G as pn,H as to,I as no,J as At,e as Jn,h as Yn,i as ot,j as rt,l as de,m as Ae,n as Ut,o as Fe,p as b,r as $n,s as dn,u as ur,v as Xn,x as Rt}from"./chunk-FU7K6O6V.js";import{G as Qn,X as Hn,da as Ft}from"./chunk-TQFGOCJD.js";import{Ab as Be,Ba as qt,Db as Kn,Dc as le,Ec as Ue,Ed as Ot,Gd as Bt,Ha as Lt,Hb as kt,Ia as Nt,Id as Re,Jb as et,Ka as ae,Uc as yt,ld as tt,n as ie,o as Ze,od as W,pc as Vn,qc as Gn,wd as zn,xd as nt}from"./chunk-P6FNF3PO.js";import{ia as gt}from"./chunk-ISLSTDN4.js";import{C as Un,H as Rn,K as Y,L as P,Nd as He,Ya as A,_a as Xe,db as jn,eb as It,id as Wn,ke as U,oc as ft,r as ke}from"./chunk-7EAYY6PT.js";import{h as Fn}from"./chunk-TB3UVYOQ.js";import{d as v,j as Oe}from"./chunk-E25H5Y2I.js";import{L as xn,b as sr,w as St}from"./chunk-5CNB4EIU.js";import{D as ne,u as $,w as re,z as ye}from"./chunk-IW23UAMS.js";import{Y as Me,Z as Ct,a as ge,b as T,ba as Mt,ca as X,da as _t,w as En}from"./chunk-27NXJJ7L.js";import{a as _,h as Dt}from"./chunk-UA6ADLWZ.js";import{c as L,f as C,h as i,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var So=L(Yt=>{"use strict";i();a();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.deserialize=Fr;Yt.serialize=Er;var mo=$t();function Fr(t,e=0){return mo.depositReceiptBeet.deserialize(t,e+8)}function Er(t){return mo.depositReceiptBeet.serialize(t)}});var $t=L(R=>{"use strict";i();a();var xr=R&&R.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),jr=R&&R.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Zt=R&&R.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&xr(o,e,n[r]);return jr(o,e),o}}();Object.defineProperty(R,"__esModule",{value:!0});R.depositReceiptBeet=R.DepositReceipt=void 0;var Wr=Zt(ke()),xe=Zt(ie()),ht=Zt(Ze()),Kr=Zt(So()),Xt=class t{constructor(e,o,n,r,c,l,s,u,d,p){this.base=e,this.owner=o,this.stakePool=n,this.stakePoolDepositStakeAuthority=r,this.depositTime=c,this.lstAmount=l,this.coolDownSeconds=s,this.initialFeeBps=u,this.bumpSeed=d,this.reserved=p}static fromArgs(e){return new t(e.base,e.owner,e.stakePool,e.stakePoolDepositStakeAuthority,e.depositTime,e.lstAmount,e.coolDownSeconds,e.initialFeeBps,e.bumpSeed,e.reserved)}static fromAccountInfo(e,o=0){return t.deserialize(e.data,o)}static async fromAccountAddress(e,o,n){let r=await e.getAccountInfo(o,n);if(r==null)throw new Error(`Unable to find DepositReceipt account at ${o}`);return t.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new Wr.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return ht.GpaBuilder.fromStruct(e,R.depositReceiptBeet)}static deserialize(e,o=0){return Gr(e,o)}serialize(){return Vr(this)}static get byteSize(){return R.depositReceiptBeet.byteSize}static async getMinimumBalanceForRentExemption(e,o){return e.getMinimumBalanceForRentExemption(t.byteSize,o)}static hasCorrectByteSize(e,o=0){return e.byteLength-o===t.byteSize}pretty(){return{base:this.base.toBase58(),owner:this.owner.toBase58(),stakePool:this.stakePool.toBase58(),stakePoolDepositStakeAuthority:this.stakePoolDepositStakeAuthority.toBase58(),depositTime:this.depositTime,lstAmount:this.lstAmount,coolDownSeconds:this.coolDownSeconds,initialFeeBps:this.initialFeeBps,bumpSeed:this.bumpSeed,reserved:this.reserved}}};R.DepositReceipt=Xt;R.depositReceiptBeet=new xe.BeetStruct([["base",ht.publicKey],["owner",ht.publicKey],["stakePool",ht.publicKey],["stakePoolDepositStakeAuthority",ht.publicKey],["depositTime",xe.u64],["lstAmount",xe.u64],["coolDownSeconds",xe.u64],["initialFeeBps",xe.u32],["bumpSeed",xe.u8],["reserved",xe.uniformFixedSizeArray(xe.u8,256)]],Xt.fromArgs,"DepositReceipt");var ct=Kr,Vr=typeof ct.serialize=="function"?ct.serialize.bind(ct):R.depositReceiptBeet.serialize.bind(R.depositReceiptBeet),Gr=typeof ct.deserialize=="function"?ct.deserialize.bind(ct):R.depositReceiptBeet.deserialize.bind(R.depositReceiptBeet)});var ko=L(en=>{"use strict";i();a();Object.defineProperty(en,"__esModule",{value:!0});en.deserialize=zr;en.serialize=Qr;var fo=tn();function zr(t,e=0){return fo.stakePoolDepositStakeAuthorityBeet.deserialize(t,e+8)}function Qr(t){return fo.stakePoolDepositStakeAuthorityBeet.serialize(t)}});var tn=L(F=>{"use strict";i();a();var Hr=F&&F.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Jr=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),on=F&&F.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Hr(o,e,n[r]);return Jr(o,e),o}}();Object.defineProperty(F,"__esModule",{value:!0});F.stakePoolDepositStakeAuthorityBeet=F.StakePoolDepositStakeAuthority=void 0;var Yr=on(ke()),lt=on(ie()),je=on(Ze()),$r=on(ko()),nn=class t{constructor(e,o,n,r,c,l,s,u,d,p,f){this.base=e,this.stakePool=o,this.poolMint=n,this.authority=r,this.vault=c,this.stakePoolProgramId=l,this.coolDownSeconds=s,this.initalFeeBps=u,this.feeWallet=d,this.bumpSeed=p,this.reserved=f}static fromArgs(e){return new t(e.base,e.stakePool,e.poolMint,e.authority,e.vault,e.stakePoolProgramId,e.coolDownSeconds,e.initalFeeBps,e.feeWallet,e.bumpSeed,e.reserved)}static fromAccountInfo(e,o=0){return t.deserialize(e.data,o)}static async fromAccountAddress(e,o,n){let r=await e.getAccountInfo(o,n);if(r==null)throw new Error(`Unable to find StakePoolDepositStakeAuthority account at ${o}`);return t.fromAccountInfo(r,0)[0]}static gpaBuilder(e=new Yr.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return je.GpaBuilder.fromStruct(e,F.stakePoolDepositStakeAuthorityBeet)}static deserialize(e,o=0){return Zr(e,o)}serialize(){return Xr(this)}static get byteSize(){return F.stakePoolDepositStakeAuthorityBeet.byteSize}static async getMinimumBalanceForRentExemption(e,o){return e.getMinimumBalanceForRentExemption(t.byteSize,o)}static hasCorrectByteSize(e,o=0){return e.byteLength-o===t.byteSize}pretty(){return{base:this.base.toBase58(),stakePool:this.stakePool.toBase58(),poolMint:this.poolMint.toBase58(),authority:this.authority.toBase58(),vault:this.vault.toBase58(),stakePoolProgramId:this.stakePoolProgramId.toBase58(),coolDownSeconds:this.coolDownSeconds,initalFeeBps:this.initalFeeBps,feeWallet:this.feeWallet.toBase58(),bumpSeed:this.bumpSeed,reserved:this.reserved}}};F.StakePoolDepositStakeAuthority=nn;F.stakePoolDepositStakeAuthorityBeet=new lt.BeetStruct([["base",je.publicKey],["stakePool",je.publicKey],["poolMint",je.publicKey],["authority",je.publicKey],["vault",je.publicKey],["stakePoolProgramId",je.publicKey],["coolDownSeconds",lt.u64],["initalFeeBps",lt.u32],["feeWallet",je.publicKey],["bumpSeed",lt.u8],["reserved",lt.uniformFixedSizeArray(lt.u8,256)]],nn.fromArgs,"StakePoolDepositStakeAuthority");var dt=$r,Xr=typeof dt.serialize=="function"?dt.serialize.bind(dt):F.stakePoolDepositStakeAuthorityBeet.serialize.bind(F.stakePoolDepositStakeAuthorityBeet),Zr=typeof dt.deserialize=="function"?dt.deserialize.bind(dt):F.stakePoolDepositStakeAuthorityBeet.deserialize.bind(F.stakePoolDepositStakeAuthorityBeet)});var yo=L(be=>{"use strict";i();a();var ei=be&&be.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),go=be&&be.__exportStar||function(t,e){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&ei(e,t,o)};Object.defineProperty(be,"__esModule",{value:!0});be.accountProviders=void 0;go($t(),be);go(tn(),be);var ti=tn(),ni=$t();be.accountProviders={StakePoolDepositStakeAuthority:ti.StakePoolDepositStakeAuthority,DepositReceipt:ni.DepositReceipt}});var vo=L(V=>{"use strict";i();a();var oi=V&&V.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),ri=V&&V.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Po=V&&V.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&oi(o,e,n[r]);return ri(o,e),o}}();Object.defineProperty(V,"__esModule",{value:!0});V.changeDepositReceiptOwnerInstructionDiscriminator=V.ChangeDepositReceiptOwnerStruct=void 0;V.createChangeDepositReceiptOwnerInstruction=ii;var Ao=Po(ie()),bo=Po(ke());V.ChangeDepositReceiptOwnerStruct=new Ao.BeetArgsStruct([["instructionDiscriminator",Ao.u8]],"ChangeDepositReceiptOwnerInstructionArgs");V.changeDepositReceiptOwnerInstructionDiscriminator=4;function ii(t,e=new bo.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[o]=V.ChangeDepositReceiptOwnerStruct.serialize({instructionDiscriminator:V.changeDepositReceiptOwnerInstructionDiscriminator}),n=[{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.currentOwner,isWritable:!1,isSigner:!0},{pubkey:t.newOwner,isWritable:!1,isSigner:!1}];return new bo.TransactionInstruction({programId:e,keys:n,data:o})}});var wo=L(G=>{"use strict";i();a();var ai=G&&G.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),si=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kn=G&&G.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&ai(o,e,n[r]);return si(o,e),o}}();Object.defineProperty(G,"__esModule",{value:!0});G.claimPoolTokensInstructionDiscriminator=G.ClaimPoolTokensStruct=void 0;G.createClaimPoolTokensInstruction=ci;var ui=kn(kt()),ho=kn(ie()),fn=kn(ke());G.ClaimPoolTokensStruct=new ho.BeetArgsStruct([["instructionDiscriminator",ho.u8]],"ClaimPoolTokensInstructionArgs");G.claimPoolTokensInstructionDiscriminator=5;function ci(t,e=new fn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[o]=G.ClaimPoolTokensStruct.serialize({instructionDiscriminator:G.claimPoolTokensInstructionDiscriminator}),n=[{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.owner,isWritable:!0,isSigner:!0},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.destination,isWritable:!0,isSigner:!1},{pubkey:t.feeWallet,isWritable:!0,isSigner:!1},{pubkey:t.depositAuthority,isWritable:!1,isSigner:!1},{pubkey:t.poolMint,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??ui.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??fn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new fn.TransactionInstruction({programId:e,keys:n,data:o})}});var gn=L(Pe=>{"use strict";i();a();var li=Pe&&Pe.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),di=Pe&&Pe.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),To=Pe&&Pe.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&li(o,e,n[r]);return di(o,e),o}}();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.depositStakeArgsBeet=void 0;var pi=To(Ze()),mi=To(ie());Pe.depositStakeArgsBeet=new mi.BeetArgsStruct([["owner",pi.publicKey]],"DepositStakeArgs")});var Co=L(z=>{"use strict";i();a();var Si=z&&z.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),fi=z&&z.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),An=z&&z.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Si(o,e,n[r]);return fi(o,e),o}}();Object.defineProperty(z,"__esModule",{value:!0});z.depositStakeInstructionDiscriminator=z.DepositStakeStruct=void 0;z.createDepositStakeInstruction=yi;var ki=An(kt()),Do=An(ie()),yn=An(ke()),gi=gn();z.DepositStakeStruct=new Do.BeetArgsStruct([["instructionDiscriminator",Do.u8],["depositStakeArgs",gi.depositStakeArgsBeet]],"DepositStakeInstructionArgs");z.depositStakeInstructionDiscriminator=2;function yi(t,e,o=new yn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=z.DepositStakeStruct.serialize({instructionDiscriminator:z.depositStakeInstructionDiscriminator,...e}),r=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.stakePool,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:t.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:t.stake,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:t.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:t.poolMint,isWritable:!0,isSigner:!1},{pubkey:t.clock,isWritable:!1,isSigner:!1},{pubkey:t.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??ki.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??yn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new yn.TransactionInstruction({programId:o,keys:r,data:n})}});var bn=L(ve=>{"use strict";i();a();var Ai=ve&&ve.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),bi=ve&&ve.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_o=ve&&ve.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Ai(o,e,n[r]);return bi(o,e),o}}();Object.defineProperty(ve,"__esModule",{value:!0});ve.depositStakeWithSlippageArgsBeet=void 0;var Mo=_o(ie()),Pi=_o(Ze());ve.depositStakeWithSlippageArgsBeet=new Mo.BeetArgsStruct([["owner",Pi.publicKey],["minimumPoolTokensOut",Mo.u64]],"DepositStakeWithSlippageArgs")});var qo=L(Q=>{"use strict";i();a();var vi=Q&&Q.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),hi=Q&&Q.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vn=Q&&Q.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&vi(o,e,n[r]);return hi(o,e),o}}();Object.defineProperty(Q,"__esModule",{value:!0});Q.depositStakeWithSlippageInstructionDiscriminator=Q.DepositStakeWithSlippageStruct=void 0;Q.createDepositStakeWithSlippageInstruction=Di;var wi=vn(kt()),Io=vn(ie()),Pn=vn(ke()),Ti=bn();Q.DepositStakeWithSlippageStruct=new Io.BeetArgsStruct([["instructionDiscriminator",Io.u8],["depositStakeWithSlippageArgs",Ti.depositStakeWithSlippageArgsBeet]],"DepositStakeWithSlippageInstructionArgs");Q.depositStakeWithSlippageInstructionDiscriminator=3;function Di(t,e,o=new Pn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=Q.DepositStakeWithSlippageStruct.serialize({instructionDiscriminator:Q.depositStakeWithSlippageInstructionDiscriminator,...e}),r=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:t.stakePool,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:t.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:t.stake,isWritable:!0,isSigner:!1},{pubkey:t.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:t.vault,isWritable:!0,isSigner:!1},{pubkey:t.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:t.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:t.poolMint,isWritable:!0,isSigner:!1},{pubkey:t.clock,isWritable:!1,isSigner:!1},{pubkey:t.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??wi.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??Pn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Pn.TransactionInstruction({programId:o,keys:r,data:n})}});var wn=L(he=>{"use strict";i();a();var Ci=he&&he.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Mi=he&&he.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Lo=he&&he.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Ci(o,e,n[r]);return Mi(o,e),o}}();Object.defineProperty(he,"__esModule",{value:!0});he.initStakePoolDepositStakeAuthorityArgsBeet=void 0;var hn=Lo(ie()),_i=Lo(Ze());he.initStakePoolDepositStakeAuthorityArgsBeet=new hn.BeetArgsStruct([["feeWallet",_i.publicKey],["coolDownSeconds",hn.u64],["initialFeeBps",hn.u32]],"InitStakePoolDepositStakeAuthorityArgs")});var Oo=L(H=>{"use strict";i();a();var Ii=H&&H.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),qi=H&&H.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Dn=H&&H.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Ii(o,e,n[r]);return qi(o,e),o}}();Object.defineProperty(H,"__esModule",{value:!0});H.initStakePoolDepositStakeAuthorityInstructionDiscriminator=H.InitStakePoolDepositStakeAuthorityStruct=void 0;H.createInitStakePoolDepositStakeAuthorityInstruction=Oi;var Li=Dn(kt()),No=Dn(ie()),Tn=Dn(ke()),Ni=wn();H.InitStakePoolDepositStakeAuthorityStruct=new No.BeetArgsStruct([["instructionDiscriminator",No.u8],["initStakePoolDepositStakeAuthorityArgs",Ni.initStakePoolDepositStakeAuthorityArgsBeet]],"InitStakePoolDepositStakeAuthorityInstructionArgs");H.initStakePoolDepositStakeAuthorityInstructionDiscriminator=0;function Oi(t,e,o=new Tn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=H.InitStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:H.initStakePoolDepositStakeAuthorityInstructionDiscriminator,...e}),r=[{pubkey:t.payer,isWritable:!0,isSigner:!0},{pubkey:t.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:t.vaultAta,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!1},{pubkey:t.base,isWritable:!1,isSigner:!0},{pubkey:t.stakePool,isWritable:!1,isSigner:!1},{pubkey:t.stakePoolMint,isWritable:!1,isSigner:!1},{pubkey:t.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:t.tokenProgram??Li.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:t.associatedTokenProgram,isWritable:!1,isSigner:!1},{pubkey:t.systemProgram??Tn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Tn.TransactionInstruction({programId:o,keys:r,data:n})}});var Cn=L(we=>{"use strict";i();a();var Bi=we&&we.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Ui=we&&we.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Bo=we&&we.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Bi(o,e,n[r]);return Ui(o,e),o}}();Object.defineProperty(we,"__esModule",{value:!0});we.updateStakePoolDepositStakeAuthorityArgsBeet=void 0;var pt=Bo(ie()),Ri=Bo(Ze());we.updateStakePoolDepositStakeAuthorityArgsBeet=new pt.FixableBeetArgsStruct([["feeWallet",pt.coption(Ri.publicKey)],["coolDownSeconds",pt.coption(pt.u64)],["initialFeeBps",pt.coption(pt.u32)]],"UpdateStakePoolDepositStakeAuthorityArgs")});var Eo=L(J=>{"use strict";i();a();var Fi=J&&J.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Ei=J&&J.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Fo=J&&J.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var n=t(e),r=0;r<n.length;r++)n[r]!=="default"&&Fi(o,e,n[r]);return Ei(o,e),o}}();Object.defineProperty(J,"__esModule",{value:!0});J.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=J.UpdateStakePoolDepositStakeAuthorityStruct=void 0;J.createUpdateStakePoolDepositStakeAuthorityInstruction=ji;var Uo=Fo(ie()),Ro=Fo(ke()),xi=Cn();J.UpdateStakePoolDepositStakeAuthorityStruct=new Uo.FixableBeetArgsStruct([["instructionDiscriminator",Uo.u8],["updateStakePoolDepositStakeAuthorityArgs",xi.updateStakePoolDepositStakeAuthorityArgsBeet]],"UpdateStakePoolDepositStakeAuthorityInstructionArgs");J.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=1;function ji(t,e,o=new Ro.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=J.UpdateStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:J.updateStakePoolDepositStakeAuthorityInstructionDiscriminator,...e}),r=[{pubkey:t.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.newAuthority??o,isWritable:!1,isSigner:!1}];return new Ro.TransactionInstruction({programId:o,keys:r,data:n})}});var xo=L(ue=>{"use strict";i();a();var Wi=ue&&ue.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),mt=ue&&ue.__exportStar||function(t,e){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&Wi(e,t,o)};Object.defineProperty(ue,"__esModule",{value:!0});mt(vo(),ue);mt(wo(),ue);mt(Co(),ue);mt(qo(),ue);mt(Oo(),ue);mt(Eo(),ue)});var jo=L(Te=>{"use strict";i();a();var Ki=Te&&Te.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),rn=Te&&Te.__exportStar||function(t,e){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&Ki(e,t,o)};Object.defineProperty(Te,"__esModule",{value:!0});rn(gn(),Te);rn(bn(),Te);rn(wn(),Te);rn(Cn(),Te)});var _n=L(ee=>{"use strict";i();a();var Vi=ee&&ee.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Mn=ee&&ee.__exportStar||function(t,e){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&Vi(e,t,o)};Object.defineProperty(ee,"__esModule",{value:!0});ee.PROGRAM_ID=ee.PROGRAM_ADDRESS=void 0;var Gi=ke();Mn(yo(),ee);Mn(xo(),ee);Mn(jo(),ee);ee.PROGRAM_ADDRESS="5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV";ee.PROGRAM_ID=new Gi.PublicKey(ee.PROGRAM_ADDRESS)});var Wo=L(an=>{"use strict";i();a();Object.defineProperty(an,"__esModule",{value:!0});an.depositStake=void 0;var oe=ke(),In=_n(),qn=kt(),te=ur(),Ln=new oe.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy"),zi=(0,te.struct)([(0,te.u8)("accountType"),(0,te.publicKey)("manager"),(0,te.publicKey)("staker"),(0,te.publicKey)("stakeDepositAuthority"),(0,te.u8)("stakeWithdrawBumpSeed"),(0,te.publicKey)("validatorList"),(0,te.publicKey)("reserveStake"),(0,te.publicKey)("poolMint"),(0,te.publicKey)("managerFeeAccount"),(0,te.publicKey)("tokenProgramId"),(0,te.u64)("totalLamports"),(0,te.u64)("poolTokenSupply"),(0,te.u64)("lastUpdateEpoch")]),Qi=async(t,e)=>{let o=await t.getAccountInfo(e);if(!o)throw new Error("Stake pool account not found");let n=zi.decode(o.data);return{pubkey:e,account:{data:n}}},Hi=async(t,e,o,n,r,c,l,s)=>{let u=await Qi(t,o),d=await In.StakePoolDepositStakeAuthority.fromAccountAddress(t,u.account.data.stakeDepositAuthority),p=await Ji(Ln,o),f=await Yi(Ln,r,o),S=[],m=[],y=oe.Keypair.generate(),k=u.account.data.poolMint;if(m.push(y),!l){let E=(0,qn.getAssociatedTokenAddressSync)(k,n);S.push((0,qn.createAssociatedTokenAccountIdempotentInstruction)(n,E,n,k)),l=E}S.push(...oe.StakeProgram.authorize({stakePubkey:c,authorizedPubkey:n,newAuthorizedPubkey:u.account.data.stakeDepositAuthority,stakeAuthorizationType:oe.StakeAuthorizationLayout.Staker}).instructions),S.push(...oe.StakeProgram.authorize({stakePubkey:c,authorizedPubkey:n,newAuthorizedPubkey:u.account.data.stakeDepositAuthority,stakeAuthorizationType:oe.StakeAuthorizationLayout.Withdrawer}).instructions);let[w]=oe.PublicKey.findProgramAddressSync([Buffer.from("deposit_receipt"),o.toBuffer(),y.publicKey.toBuffer()],In.PROGRAM_ID),h={depositStakeArgs:{owner:n}},D={payer:e,stakePoolProgram:Ln,depositReceipt:w,stakePool:o,validatorStakeList:u.account.data.validatorList,depositStakeAuthority:u.account.data.stakeDepositAuthority,base:y.publicKey,stakePoolWithdrawAuthority:p,stake:c,validatorStakeAccount:f,reserveStakeAccount:u.account.data.reserveStake,vault:d.vault,managerFeeAccount:u.account.data.managerFeeAccount,referrerPoolTokensAccount:l,poolMint:k,clock:oe.SYSVAR_CLOCK_PUBKEY,stakeHistory:oe.SYSVAR_STAKE_HISTORY_PUBKEY,tokenProgram:qn.TOKEN_PROGRAM_ID,stakeProgram:oe.StakeProgram.programId,systemProgram:oe.SystemProgram.programId},I=(0,In.createDepositStakeInstruction)(D,h);return s?.length&&I.keys.push(...s),S.push(I),{instructions:S,signers:m}};an.depositStake=Hi;var Ji=(t,e)=>{let[o]=oe.PublicKey.findProgramAddressSync([e.toBuffer(),Buffer.from("withdraw")],t);return o},Yi=(t,e,o)=>{let[n]=oe.PublicKey.findProgramAddressSync([e.toBuffer(),o.toBuffer(),Buffer.alloc(0)],t);return n}});var Vo=L(We=>{"use strict";i();a();var $i=We&&We.__createBinding||(Object.create?function(t,e,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(e,o);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,n,r)}:function(t,e,o,n){n===void 0&&(n=o),t[n]=e[o]}),Ko=We&&We.__exportStar||function(t,e){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&$i(e,t,o)};Object.defineProperty(We,"__esModule",{value:!0});Ko(_n(),We);Ko(Wo(),We)});i();a();i();a();var Ee=new Error("Missing sender address for staking fungibles."),oo=new Error("Missing signature from waiting for staking transaction confirmation."),ro=new Error("PublicKey is required");var Je=class extends Error{constructor(e){super(e)}};function cr({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,transaction:n=new Y.Transaction}){return e.equals(o)||n.add(P.StakeProgram.authorize({authorizedPubkey:o,newAuthorizedPubkey:o,stakeAuthorizationType:P.StakeAuthorizationLayout.Staker,stakePubkey:t})),n.add(P.StakeProgram.deactivate({stakePubkey:t,authorizedPubkey:o})),n}var lr=t=>{let{t:e}=Oe(),o=$(),n=Fe(),{mutateAsync:r}=Ue(t);return re({mutationFn:async({accountIdentifier:s,senderAddress:u,stakePubkey:d,stakeAuthorityPubkey:p,authorizedPubkey:f})=>{if(!u)throw Ee;let{networkID:S,address:m}=u,y=cr({stakePubkey:d,stakeAuthorityPubkey:p,authorizedPubkey:f}),k=await ae(y,{connection:t}),w={ownerAddress:m??"",networkID:S,data:{signature:""},type:"deactivateState",display:{summary:{topLeft:{text:e("transactionsPendingDeactivatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),type:"undelegate"});let h=await r({accountIdentifier:s,feePayer:new P.PublicKey(m),transaction:k,pendingTransactionInput:w});return n.submittedTransaction(h,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),n.deactivateStake(),{networkID:S,id:h??""}},onSuccess:s=>{Be({connection:t,signature:s.id}).then(()=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"confirmed"}}),Ae(o)()}).catch(u=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"error"}}),ne.captureError(u,"staking")})}})};i();a();function mn({stakePubkey:t,authorizedPubkey:e,votePubkey:o}){return P.StakeProgram.delegate({stakePubkey:t,authorizedPubkey:e,votePubkey:o})}var dr=t=>{let{t:e}=Oe(),o=$(),n=Fe(),{mutateAsync:r}=Ue(t);return re({mutationFn:async({accountIdentifier:s,senderAddress:u,stakePubkey:d,authorizedPubkey:p,votePubkey:f})=>{if(!u)throw Ee;let{networkID:S,address:m}=u,y=mn({stakePubkey:d,authorizedPubkey:p,votePubkey:f}),k=await ae(y,{connection:t}),w={ownerAddress:m??"",networkID:S,data:{signature:""},type:"delegateStake",display:{summary:{topLeft:{text:e("transactionsPendingDelegatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),type:"delegate"});let h=await r({accountIdentifier:s,feePayer:new P.PublicKey(m),transaction:k,pendingTransactionInput:w});return n.submittedTransaction(h,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),{networkID:S,id:h??""}},onSuccess:s=>{Be({connection:t,signature:s.id}).then(()=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"confirmed"}}),Ae(o)()}).catch(u=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"error"}}),ne.captureError(u,"staking")})}})};i();a();var pr=async(t,e)=>await t.getSignatureStatuses([e],{searchTransactionHistory:!0});function mr(t,e,o){let n=$(),r=de.signatureStatus(o),c=async()=>{if(!o)throw oo;let d=await pr(t,o);return{...d,value:d.value[0]}},s=n.getQueryData(r)?.value?.confirmationStatus;return ye({queryKey:r,queryFn:c,enabled:!!o&&s!=="finalized",refetchInterval:e,staleTime:1/0})}i();a();function Sr(t,e){let o=de.stakeActivationData(e);return ye({queryKey:o,queryFn:async()=>{if(!e)throw ro;return await to(t,new P.PublicKey(e))},enabled:!!e,staleTime:1/0})}i();a();function fr({stakePubkey:t,authorizedPubkey:e,amount:o,transaction:n=new Y.Transaction}){return n.add(P.StakeProgram.withdraw({stakePubkey:t,authorizedPubkey:e,toPubkey:e,lamports:o})),n}var kr=t=>{let{t:e}=Oe(),o=$(),n=Fe(),{mutateAsync:r}=Ue(t);return re({mutationFn:async({accountIdentifier:s,senderAddress:u,stakePubkey:d,authorizedPubkey:p,amount:f})=>{if(!u)throw Ee;let{networkID:S,address:m}=u,y=fr({stakePubkey:d,authorizedPubkey:p,amount:f}),k=await ae(y,{connection:t}),w={ownerAddress:m??"",networkID:S,data:{signature:""},type:"withdrawStake",display:{summary:{topLeft:{text:e("transactionsPendingWithdrawingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),type:"withdraw"});let h=await r({accountIdentifier:s,feePayer:new P.PublicKey(m),transaction:k,pendingTransactionInput:w});return n.submittedTransaction(h,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(S),method:"signAndSendTransaction"}),{networkID:S,id:h??""}},onSuccess:s=>{Be({connection:t,signature:s.id}).then(()=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"confirmed"}}),Ae(o)()}).catch(u=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"error"}}),ne.captureError(u,"staking")})}})};i();a();function gr({ownerPublicKey:t,lamports:e,transaction:o=new Y.Transaction}){let n=P.Keypair.generate();return o.add(P.StakeProgram.createAccount({fromPubkey:t,stakePubkey:n.publicKey,authorized:new P.Authorized(t,t),lamports:e})),[o,n]}function yr({lamports:t,votePubkey:e,authorizedPubkey:o}){let[n,r]=gr({ownerPublicKey:o,lamports:t});return n.add(mn({stakePubkey:r.publicKey,authorizedPubkey:o,votePubkey:e})),[n,r]}var Ar=t=>{let{t:e}=Oe(),o=$(),n=Fe(),{mutateAsync:r}=Ue(t);return re({mutationFn:async({accountIdentifier:s,senderAddress:u,lamports:d,votePubkey:p,authorizedPubkey:f,usdPerSol:S})=>{if(!u)throw Ee;let{networkID:m,address:y}=u,[k,w]=yr({accountIdentifier:s,senderAddress:u,lamports:d,votePubkey:p,authorizedPubkey:f}),h=await ae(k,{connection:t}),D={ownerAddress:y??"",networkID:m,data:{signature:""},type:"createAccountAndDelegateStake",display:{summary:{topLeft:{text:e("transactionsPendingCreatingAndDelegatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(m),type:"delegate"});let I=await r({accountIdentifier:s,feePayer:new P.PublicKey(y),transaction:h,pendingTransactionInput:D,opts:{additionalSignerAccounts:[w]}});n.submittedTransaction(I,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(m),method:"signAndSendTransaction"});let E=Rn(d),ce=S?E.times(S):void 0;return n.createStakeAccountAndDelegateStake({sol:E.toNumber(),usd:ce?.toNumber(),voteAccountPubkey:p}),{networkID:m,id:I??""}},onSuccess:s=>{Be({connection:t,signature:s.id}).then(()=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"confirmed"}}),Ae(o)()}).catch(u=>{n.transactionStatus(s.id,{chainType:"solana",chainName:"solana",networkId:A.getSolanaNetworkIDValue(s.networkID),status:{type:"error"}}),ne.captureError(u,"staking")})}})};i();a();var Pt=C(_());i();a();var se=C(_()),jt=null,br=t=>{if(!jt&&t){let e="liquidStake";jt=new gt(t,e)}if(!jt)throw new Error("liquidStakeAnalytics was not properly configured");return jt},pe=()=>{let t=ft(),e=br(t),o=(0,se.useCallback)((m,y)=>{t.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:m,stakeAccountBalance:y}}})},[t]),n=(0,se.useCallback)(m=>{t.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:m}}})},[t]),r=(0,se.useCallback)(()=>{t.capture("liquidStakingConvertBannerClicked")},[t]),c=(0,se.useCallback)(()=>{t.capture("liquidStakingConvertBannerSeen")},[t]),l=(0,se.useCallback)(()=>{t.capture("liquidStakingConvertModalContinue")},[t]),s=(0,se.useCallback)(()=>{t.capture("liquidStakingConvertModalNotNow")},[t]),u=(0,se.useCallback)(({provider:m,convertDetails:y,amount:k,fromAmount:w,toAmount:h,fromAmountUSD:D,toAmountUSD:I})=>{t.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,fromAmount:w,toAmount:h,fromAmountUSD:D,toAmountUSD:I,apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,validatorName:y?.validatorName,stakeAccountBalance:k}}})},[t]),d=(0,se.useCallback)(m=>{e.submittedTransaction(m,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[e]),p=(0,se.useCallback)(({amount:m,convertDetails:y,provider:k})=>{t.capture("liquidStakingConvertSuccess",{data:{stake:{apy:k?.apy,convertRatio:k?.convertRatio,caip19:k?.stakePoolTokenMetadata.caip19,stakePoolAddress:k?.stakePoolAddress,token:k?.stakePoolTokenMetadata.metadata.name,totalAmount:m,validatorName:y?.validatorName}}})},[t]),f=(0,se.useCallback)(({amount:m,convertDetails:y})=>{t.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:y?.validatorName,stakeAccountBalance:m}}})},[t]),S=(0,se.useCallback)(()=>{t.capture("liquidStakingConvertMoreClicked")},[t]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:n,trackConvertBannerClicked:r,trackConvertBannerSeen:c,trackConvertModalContinue:l,trackConvertModalNotNow:s,trackConvertApprovedByUser:u,trackConvertFailed:f,trackConvertSubmitted:d,trackConvertSuccess:p,trackConvertMoreClicked:S}};var Pr=t=>{let{connection:e}=le(),{data:o}=U("solana"),n=b(p=>p.setSkipDismissRouting),{trackConvertModalContinue:r,trackConvertModalNotNow:c}=pe(),{results:l,isFetched:s}=dn(e),u=(0,Pt.useMemo)(()=>new Map(l.map(p=>[p.voteAccountPubkey,p])),[l]),d=no(e,o?.address??"",u,s);return(0,Pt.useEffect)(()=>{d()},[d]),(0,Pt.useEffect)(()=>{n(t)},[t,n]),{trackConvertModalContinue:r,trackConvertModalNotNow:c}};i();a();var at=C(_());var vr=t=>{let e=b(k=>k.setConvertStakeAccount),o=b(k=>k.setAmount),n=b(k=>k.fungibleToStake),r=b(k=>k.provider),{initLiquidStake:c}=_e(A.solana.mainnetID);(0,at.useEffect)(()=>{c()},[c]);let{trackConvertStakeAccountClicked:l,trackConvertStakeAccountListSeen:s}=pe(),{error:u,refetch:d,isLoadingList:p,eligibleStakeAccounts:f,inelegibleStakeAccounts:S}=At(r);(0,at.useEffect)(()=>{p||s([...f,...S].map(k=>({title:k.title,amount:k.amount,eligible:k.eligible})))},[s,f,S,p]);let m=(0,at.useCallback)(k=>{let w=k?.info?.stake?.delegation?.voter??"",h=`${k?.lamports??"0"}`,D=k?.title??"";e({validatorVote:w,stakeAccount:k.pubkey,validatorName:D,eligibleAccountsCount:f.length}),o(h),l(D,h),t()},[l,f.length,t,e,o]),y=(0,at.useCallback)(()=>{d()},[d]);return{isLoading:p,error:u,eligibleStakeAccounts:f,inelegibleStakeAccounts:S,onReload:y,onSelectStakeAccount:m,tokenSymbol:n?.data.symbol??"",tokenDecimals:n?.data.decimals??0}};i();a();var j=C(_());i();a();function Wt(t){return t instanceof Je?t:new Je("UnknownError")}i();a();var io=C(_());var Kt=({txReceipt:t,isTxError:e,poolTokenFungible:o,invalidateQueries:n,dismissLiquidStaking:r})=>{let c=b(d=>d.resetStaking),l=b(d=>d.setNavigateTo),s=b(d=>d.setSkipDismissRouting),u=b(d=>d.skipDismissRouting);return(0,io.useCallback)(()=>{if(c(),!t||e)return r();if(n(),u)return s(void 0),r();l(o?{screen:"FungibleDetail",fungible:o}:{screen:"Activity"}),r()},[t,e,o,n,r,l,c,u,s])};i();a();var Vt=C(_());i();a();var ao=({connection:t})=>{let e=St(),o=Wn();return re({mutationFn:async({accountIdentifier:r,ownerAddress:c,pendingActivityRow:l,activityType:s,transactionData:{networkID:u,transaction:d,signers:p}})=>{if(A.isSolanaNetworkID(u)){await Un(d,t);let f={ownerAddress:c,networkID:u,data:{signature:""},type:s,display:{summary:l}};return{id:await Kn({accountIdentifier:r,feePayer:new P.PublicKey(c),connection:t,accountSigner:o,transaction:d,pendingTransactionInput:f,storage:e,opts:{additionalSignerAccounts:p}}),networkID:u}}throw new Error(`Unsupported network for liquid staking: ${u}`)}})};function Gt({isLoadingPoolToken:t,pendingActivityRow:e,onTransactionSubmitted:o,onTransactionFailed:n}){let{connection:r}=le(),c=b(k=>k.transactionData),l=b(k=>k.fungibleToStake),{data:s,isLoading:u}=He(),{mutateAsync:d}=ao({connection:r}),f=(0,Vt.useMemo)(()=>(s?.addresses??[]).find(k=>k.networkID===l?.data.chain.id),[l?.data.chain.id,s?.addresses])?.address??"",S=s?.identifier??"";return{executeLiquidStake:(0,Vt.useCallback)(async()=>{try{if(!c)throw new Je("MissingTransactionData");let k=await d({accountIdentifier:S,ownerAddress:f,pendingActivityRow:e,activityType:"convertStake",transactionData:c});o(k)}catch(k){n(k)}},[S,f,e,c,d,o,n]),isReadyToExecute:!u&&!t}}i();a();var so=C(_());var zt=()=>{let t=$();return(0,so.useCallback)(()=>Ae(t)(),[t])};i();a();var Qt=C(_());i();a();function uo({key:t,queryKey:e,defaultValue:o=null}){let n=St();return ye({enabled:!0,queryKey:e,gcTime:$n.Long,staleTime:1/0,async queryFn(){try{return await n.get(t)}catch(r){return r instanceof Error&&ne.captureError(r,"staking"),o}}})}function co({key:t,queryKey:e}){let o=St(),n=$();return re({async mutationFn(r){try{return await o.set(t,r)}catch(c){c instanceof Error&&ne.captureError(c,"staking");return}},async onMutate(r){await n.cancelQueries({queryKey:e});let c=n.getQueryData(e);return n.setQueryData(e,r),{previousValue:c}},onError(r,c,l){n.setQueryData(e,l?.previousValue)}})}var wr=Dt.object({convert:Dt.boolean(),mint:Dt.boolean()}),Sn={convert:!1,mint:!1},Tr=JSON.stringify(Sn),st=()=>{let{data:t}=uo({key:"featureUsed",queryKey:de.featureUsed(),defaultValue:Tr}),e=(0,Qt.useMemo)(()=>{if(!t)return Sn;let r=wr.safeParse(JSON.parse(t));return r.success?r.data:Sn},[t]),{mutateAsync:o}=co({key:"featureUsed",queryKey:de.featureUsed()}),n=(0,Qt.useCallback)(async r=>{let c={...e,...r};await o(JSON.stringify(c))},[o,e]);return{usageState:e,setUsageState:n}};var Cr="https://www.jito.network/defi/";function Mr({stakedTokenSymbol:t,poolTokenSymbol:e,txHash:o,txError:n,confirmationStatus:r,eligibleAccountsCount:c,onDismiss:l,onConvertMore:s}){let u={title:v.t("commandClose"),onPress:l},d={title:v.t("convertStakeStatusConvertMore"),onPress:s},p={txHash:o,txHashTitle:v.t("commandViewTransaction")};return n?{type:"error",title:v.t("convertStakeStatusErrorTitle"),message:v.t("convertStakeStatusErrorMessage",{poolTokenSymbol:e}),...p,primaryButton:u}:r==="confirmed"?{type:"success",title:v.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...p,...c>1?{primaryButton:d,secondaryButton:u}:{primaryButton:u}}:{type:"loading",title:v.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:v.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:t,poolTokenSymbol:e}),...p,primaryButton:u}}var _r=({dismissConvertFlow:t,goToConvertAccountList:e})=>{let o=zt(),[n,r]=(0,j.useState)("loading"),[c,l]=(0,j.useState)(),[s,u]=(0,j.useState)(),{trackConvertSubmitted:d,trackConvertSuccess:p,trackConvertFailed:f,trackConvertMoreClicked:S}=pe(),{usageState:m,setUsageState:y}=st(),k=b(B=>B.fungibleToStake),w=b(B=>B.provider),h=b(B=>B.convert),D=b(B=>B.amount),[I]=(0,j.useState)(h?.eligibleAccountsCount??0),E=b(B=>B.setConvertStakeAccount),ce=b(B=>B.setTransactionData),q=k?.data.symbol??"",x=w?.stakePoolTokenMetadata.metadata.symbol??"",Ke=w?.stakePoolTokenMetadata.metadata.address??"",{data:De}=He(),Ve=De?.type==="ledger",Ie=(0,j.useMemo)(()=>(De?.addresses??[]).find(B=>B.networkID===k?.data.chain.id),[k?.data.chain.id,De?.addresses])?.addressType??"solana",{fungible:ze,isLoadingTokens:Qe}=W({key:Ke}),qe=(0,j.useCallback)(B=>{d(B.id),l(B),m.convert||y({convert:!0})},[y,d,m.convert]),Ce=(0,j.useCallback)(B=>{f({amount:D,convertDetails:h});let ar=Wt(B);u(ar)},[f,D,h]),Le=(0,j.useMemo)(()=>({topLeft:{text:v.t("convertStakePendingTitle",{symbol:x})}}),[x]),{executeLiquidStake:N,isReadyToExecute:O}=Gt({isLoadingPoolToken:Qe,pendingActivityRow:Le,onTransactionSubmitted:qe,onTransactionFailed:Ce}),M=(0,j.useCallback)(()=>{p({amount:D,convertDetails:h,provider:w}),E(void 0),ce(void 0),o()},[D,p,E,ce,o,w,h]),{isSuccess:fe,isError:Ne,error:Ye}=yt(M,c);(0,j.useEffect)(()=>{fe?r("confirmed"):Ne&&(r("error"),u(Ye),f({amount:D,convertDetails:h}))},[D,h,fe,Ne,f,Ye,c]);let $e=Kt({txReceipt:c,isTxError:Ne,poolTokenFungible:ze,invalidateQueries:o,dismissLiquidStaking:t}),Tt=(0,j.useCallback)(()=>{S(),e()},[S,e]),ir=(0,j.useMemo)(()=>Mr({stakedTokenSymbol:q,poolTokenSymbol:x,txHash:c?.id,txError:s,confirmationStatus:n,eligibleAccountsCount:I,onDismiss:$e,onConvertMore:Tt}),[q,x,c?.id,s,n,I,$e,Tt]);return{addressType:Ie,isLedger:Ve,isReadyToExecute:O,statusPageProps:ir,txError:s,executeLiquidStake:N,learnMoreLink:Cr,isJitoSOL:!0,isPSOL:!1}};i();a();var ut=C(_()),Ht=null,Ir=t=>{if(!Ht&&t){let e="liquidStake";Ht=new gt(t,e)}if(!Ht)throw new Error("liquidStakeAnalytics was not properly configured");return Ht},vt=()=>{let t=ft(),e=Ir(t),o=(0,ut.useCallback)(()=>{t.capture("liquidStakingMintModalContinueClicked")},[t]),n=(0,ut.useCallback)(({provider:s,payAmount:u,receiveAmount:d,payAmountUSD:p,receiveAmountUSD:f,payAssetTitle:S,providerName:m,receiveAssetTitle:y})=>{t.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:s?.stakePoolAddress,token:s?.stakePoolTokenMetadata.metadata.name,apy:s?.apy,convertRatio:s?.convertRatio,caip19:s?.stakePoolTokenMetadata.caip19,payAmount:u,receiveAmount:d,payAmountUSD:p,receiveAmountUSD:f,payAssetTitle:S,receiveAssetTitle:y,providerName:m}}})},[t]),r=(0,ut.useCallback)(s=>{e.submittedTransaction(s,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[e]),c=(0,ut.useCallback)(({provider:s,amount:u})=>{t.capture("liquidStakingMintSuccess",{data:{stake:{apy:s?.apy,convertRatio:s?.convertRatio,caip19:s?.stakePoolTokenMetadata.caip19,stakePoolAddress:s?.stakePoolAddress,token:s?.stakePoolTokenMetadata.metadata.name,totalAmount:u}}})},[t]),l=(0,ut.useCallback)(s=>{t.capture("liquidStakingMintFailed",{data:{stake:{amount:s}}})},[t]);return{trackMintModalContinue:o,trackMintSubmitted:r,trackMintSuccess:c,trackMintFailed:l,trackMintApprovedByUser:n}};i();a();var me=C(_());i();a();var qr=2,lo=({networkID:t,poolTokenMintAddress:e})=>{let o=A.getAddressType(t),{data:n}=U(t),{fungible:r}=W({key:e}),c=Ot(t,o),{fungible:l}=W({key:c}),s=T(l?.data.amount??""),{data:u=0}=nt(n),d=T(rt).plus(T(et).multipliedBy(ot)),p=T(u),f=T(u),S=T(qr).plus(d),m=r?T(S).plus(p):T(f).plus(S).plus(p),y=T(s).minus(m),k=T.max(y,0);return{minAmount:m,maxAmount:k,balance:s}};var Nr=({goBack:t,goToReviewPage:e,showInfoPage:o,lstCaip19:n})=>{let r=b(N=>N.fungibleToStake),c=b(N=>N.provider),l=b(N=>N.amount),s=b(N=>N.setAmount),u=r?.data.symbol??"",d=r?.data.chain.id??A.solana.mainnetID,p=r?.data.decimals??0,f=c?.stakePoolTokenMetadata.metadata.address??"",[S,m]=(0,me.useState)(l?_t(l,p):""),{data:y}=U("solana"),{initLiquidStake:k}=_e(A.solana.mainnetID);(0,me.useEffect)(()=>{k(void 0,n)},[k,n]),Ft(y,"STAKE_FUNGIBLE");let{minAmount:w,maxAmount:h,balance:D}=lo({networkID:d,poolTokenMintAddress:f}),I=X(h,p),E=X(w,p),ce=X(D,p),q=Mt(S,p).toString(),x=T(q),Ke=x.isLessThan(w),De=x.isGreaterThan(h),Ve=x.isFinite(),Ge=q&&Ke?v.t("mintLiquidStakeAmountMinRequired",{symbol:u,amount:E}):q&&De?v.t("mintLiquidStakeAmountInsufficientBalance"):void 0,Ie=Ve&&!Ge,ze=(0,me.useMemo)(()=>{if(!c)return;let N=Me(Number.parseFloat(c.apy)),{address:O,name:M,symbol:fe,logoURI:Ne}=c.stakePoolTokenMetadata.metadata,Ye=T(1).dividedBy(T(c.convertRatio)),$e=`1 ${u} \u2248 ${Re(Ye)} ${fe}`;return{identifier:O,apy:N,name:M,symbol:fe,rate:$e,logoURI:Ne}},[c,u]),Qe=(0,me.useCallback)(()=>{m(String(I))},[I]),qe=(0,me.useCallback)(N=>{let O=Ct(N);Ut(O,p??9)&&m(O)},[p]),Ce=(0,me.useCallback)(()=>{s(q),e()},[q,e,s]),Le=(0,me.useCallback)(()=>{s(""),t()},[s,t]);return{amount:S,amountError:Ge,balance:ce,symbol:u,poolToken:ze,canSubmit:Ie,onBack:Le,onContinue:Ce,onChangeAmount:qe,onSetMax:Qe,onInfoPress:o}};i();a();var Z=C(_());i();a();function Jt(t){return t?t.stakePoolTokenMetadata.caip19===Yn:!1}var Or="https://www.jito.network/defi/";function Br({poolTokenSymbol:t,txHash:e,txError:o,confirmationStatus:n,onDismiss:r}){let c={title:v.t("commandClose"),onPress:r},l={txHash:e,txHashTitle:v.t("commandViewTransaction")};return o?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:t}),...l,primaryButton:c}:n==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle",{poolTokenSymbol:t}),message:"",...l,primaryButton:c}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:v.t("mintStakeStatusLoadingMessage",{poolTokenSymbol:t}),...l,primaryButton:c}}var Ur=t=>{let e=zt(),[o,n]=(0,Z.useState)("loading"),[r,c]=(0,Z.useState)(),[l,s]=(0,Z.useState)(),{trackMintSubmitted:u,trackMintSuccess:d,trackMintFailed:p}=vt(),{usageState:f,setUsageState:S}=st(),m=b(M=>M.fungibleToStake),y=b(M=>M.provider),k=b(M=>M.setTransactionData),w=b(M=>M.amount),h=y?.stakePoolTokenMetadata.metadata.symbol??"",D=y?.stakePoolTokenMetadata.metadata.address??"",{data:I}=He(),E=I?.type==="ledger",q=(0,Z.useMemo)(()=>(I?.addresses??[]).find(M=>M.networkID===m?.data.chain.id),[m?.data.chain.id,I?.addresses])?.addressType??"solana",{fungible:x,isLoadingTokens:Ke}=W({key:D}),De=(0,Z.useCallback)(M=>{u(M.id),c(M),f.mint||S({mint:!0})},[S,u,f.mint]),Ve=(0,Z.useCallback)(M=>{p(w);let fe=Wt(M);s(fe)},[p,w]),Ge=(0,Z.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle",{symbol:h})}}),[h]),{executeLiquidStake:Ie,isReadyToExecute:ze}=Gt({isLoadingPoolToken:Ke,pendingActivityRow:Ge,onTransactionSubmitted:De,onTransactionFailed:Ve}),Qe=(0,Z.useCallback)(()=>{d({amount:w,provider:y}),k(void 0),e()},[d,w,y,k,e]),{isSuccess:qe,isError:Ce,error:Le}=yt(Qe,r);(0,Z.useEffect)(()=>{qe?n("confirmed"):Ce&&(n("error"),s(Le),p(w))},[qe,p,w,Ce,Le,r]);let N=Kt({txReceipt:r,isTxError:Ce,poolTokenFungible:x,invalidateQueries:e,dismissLiquidStaking:t}),O=(0,Z.useMemo)(()=>Br({poolTokenSymbol:h,txHash:r?.id,txError:l,confirmationStatus:o,onDismiss:N}),[h,r?.id,l,o,N]);return{addressType:q,isLedger:E,isReadyToExecute:ze,statusPageProps:O,learnMoreLink:Or,txError:l,executeLiquidStake:Ie,isJitoSOL:Jt(y),isPSOL:Rt(y)}};i();a();var po=C(_());var Rr=({onLiquidStake:t,onNativeStake:e})=>{let o=Jn,{avgValidatorApy:n,activeProvider:r}=_e(Xe.Solana.Mainnet);return{options:(0,po.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:v.t("stakeMethodSelectionLiquidStakingTitle"),description:v.t("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:r?.stakePoolTokenMetadata?.metadata?.symbol}),apy:r?v.t("stakeMethodEstApy",{apy:Me(parseFloat(r.apy))}):null,onClick:t??(()=>{})},{type:"native",isRecommended:!1,title:v.t("stakeMethodSelectionNativeStakingTitle"),description:v.t("stakeMethodSelectionNativeStakingDescription"),apy:n?v.t("stakeMethodEstApy",{apy:Me(n)}):null,onClick:e}],[n,r,t,e]),learnMoreLink:o}};i();a();i();a();var Zo=C(_());i();a();i();a();i();a();var zo=C(Vo());i();a();var Go=C(sr()),Xi=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],sn=t=>{let e=`${String.fromCharCode(...Xi)}||${t}`,o=Fn(Buffer.from(e));return Go.default.encode(o)};var Nn=async({connection:t,stakePoolAddress:e,ownerAddress:o,validatorVoteAddress:n,stakeAccountAddress:r,poolTokenAccountAddress:c})=>{let l=new P.PublicKey(e),s=new P.PublicKey(o),u=new P.PublicKey(n),d=new P.PublicKey(r),p=c?new P.PublicKey(c):void 0,f=new P.PublicKey(sn(o)),{instructions:S,signers:m}=await(0,zo.depositStake)(t,s,l,s,u,d,p,[{pubkey:f,isSigner:!1,isWritable:!1}]),y=(await t.getLatestBlockhash("confirmed")).blockhash,k=new Y.VersionedTransaction(new Y.TransactionMessage({instructions:S,payerKey:s,recentBlockhash:y}).compileToV0Message());return{transaction:await ae(k,{connection:qt(Xe.Solana.Mainnet),calculators:{cost:Nt,budget:new Lt(2e5,2e5)}}),signers:m}};i();a();var On=async({connection:t,stakePoolAddress:e,ownerAddress:o,amount:n,poolTokenAccountAddress:r})=>{let c=new P.PublicKey(e),l=new P.PublicKey(o),s=r?new P.PublicKey(r):void 0,u=new P.PublicKey(sn(o)),{instructions:d,signers:p}=await Xn(t,c,l,n,s,u),f=(await t.getLatestBlockhash("confirmed")).blockhash,S=new Y.VersionedTransaction(new Y.TransactionMessage({instructions:d,payerKey:l,recentBlockhash:f}).compileToV0Message());return{transaction:await ae(S,{connection:qt(Xe.Solana.Mainnet),calculators:{cost:Nt,budget:new Lt(2e5,2e5)}}),signers:p}};var Qo=t=>{let e=de.getConvertStakeTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,validatorVoteAddress:t.validatorVoteAddress,stakeAccountAddress:t.stakeAccountAddress,poolTokenAccountAddress:t.poolTokenAccountAddress}),o=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.validatorVoteAddress&&!!t.stakeAccountAddress;return ye({enabled:o,queryKey:e,staleTime:1/0,async queryFn(){if(A.isSolanaNetworkID(t.networkId)){let{transaction:n,signers:r}=await Nn(t);return{networkID:t.networkId,transaction:n,signers:r}}throw new Error(`Unsupported networkId: ${t.networkId}`)}})};i();a();var Xo=C(_());i();a();var Ho=(t,e)=>{let o=[],n=t?tt(t):void 0,r=jn(e?.stakePoolTokenMetadata.caip19??"");return n&&r&&(o.push(n),o.push(r)),{query:{data:o}}};i();a();var Bn=C(_());var Zi=(t,e)=>{if(e===void 0)return;let o=tt(t),n=It(o);return e[n]},ea=(t,e)=>{if(!e)return T(0);let o=new T(e.convertRatio);return X(t,e.stakePoolTokenMetadata.metadata.decimals).div(o)},ta=(t,e,o)=>{if(!t)return null;let n=X(e,t.data.decimals),r=Zi(t,o),c=r?.usd?n.multipliedBy(r.usd):null;return{amount:Re(n),amountUsd:c?c.toNumber():null,border:!1,logoUri:t.data.logoUri??null,network:{id:t.data.chain.id,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},symbol:t.data.symbol,tokenAddress:t.data.tokenAddress,tokenType:t.type??"SolanaNative",title:v.t("liquidStakeReviewYouPay")}},na=(t,e,o,n)=>{if(!e||!t)return null;let r=ea(o,e),c=n?n[e.stakePoolTokenMetadata.caip19]:void 0,l=c?.usd?r.multipliedBy(c.usd):null;return{amount:Re(r),amountUsd:l?l.toNumber():null,border:!1,network:{id:e.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},logoUri:e.stakePoolTokenMetadata.metadata.logoURI??null,symbol:e.stakePoolTokenMetadata.metadata.symbol,title:v.t("liquidStakeReviewYouReceive"),tokenAddress:e.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}},Jo=({process:t,fungibleToStake:e,amount:o,provider:n,selectedChainAddress:r,transactionFees:c,isLoading:l,canSubmit:s,priceMap:u,networkFeeErrorMsg:d})=>{let p=(0,Bn.useMemo)(()=>ta(e,o,u),[e,o,u]),f=(0,Bn.useMemo)(()=>na(e,n,o,u),[e,n,o,u]),S=n?.name??"",m=r?.address??"",y=n?.apy!==void 0?Me(Number.parseFloat(n.apy)):"",k=`${Re(X(c,e?.data.decimals??0))} ${e?.data.symbol}`,w=Jt(n),h=Rt(n),D=v.t("stakeReviewAccount"),I=v.t("liquidStakeReviewProvider"),E=v.t("stakeReviewAPY"),ce=v.t("stakeReviewAPYTooltip"),q=v.t("liquidStakeReviewNetworkFee"),x=v.t(t==="convert"?"commandConvert":"commandStake");return{process:t,payAsset:p,receiveAsset:f,account:m,providerName:S,apy:y,networkFee:k,accountLabelText:D,providerLabelText:I,apyLabelText:E,apyLabelTextTooltip:ce,networkFeeLabelText:q,primaryButtonText:x,isLoading:l,canSubmit:s,networkFeeErrorMsg:d,isJitoSOL:w,isPSOL:h}};i();a();var Yo=C(_());var oa=En({seconds:10}),$o=({hasPoolTokenAccount:t,chainAddress:e,transactionData:o})=>{let{data:n,isPending:r,isFetched:c,isSuccess:l}=Vn({networkID:o?.networkID??A.solana.mainnetID,multichainTransaction:ia(o),queryOptions:{refetchInterval:oa}}),{data:s=0}=nt(e),u=ge(rt).plus(ge(et).multipliedBy(ot)),d=t?ge(u):ge(s).plus(u),{hasSufficientFunds:p,isLoading:f,nativeTokenSymbol:S}=Hn({networkID:o?.networkID??A.solana.mainnetID,addressType:e?.addressType,gasEstimation:n,transactionValue:d}),m=aa({hasSufficientFunds:p,hasGasEstimationFailed:c&&!l,nativeTokenSymbol:S}),y=ra(n),k=d.plus(y),w=r||f;return(0,Yo.useMemo)(()=>({isLoading:w,hasSufficientFunds:p,transactionFees:k,networkFeeErrorMsg:m,nativeTokenSymbol:S}),[w,p,k,m,S])},ra=t=>t?A.isSolanaNetworkID(t.networkID)?new ge(t.value):new ge(0):new ge(0),ia=t=>{if(t&&A.isSolanaNetworkID(t.networkID)){let{networkID:e,transaction:o}=t;return{networkID:e,transaction:[o]}}},aa=({hasSufficientFunds:t,hasGasEstimationFailed:e,nativeTokenSymbol:o})=>e?v.t("transactionGasEstimationError"):t==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0;var un=({process:t,transactionData:e,isLoadingTransactionData:o})=>{let n=b(D=>D.provider),r=b(D=>D.fungibleToStake),c=b(D=>D.amount),{data:l}=U("solana"),{fungible:s,isLoadingTokens:u}=W({key:n?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:d,hasSufficientFunds:p,transactionFees:f,networkFeeErrorMsg:S}=$o({hasPoolTokenAccount:!!s,chainAddress:l,transactionData:e}),m=(0,Xo.useMemo)(()=>Ho(r,n),[r,n]),{data:y}=Gn(m),k=o||d||u;return Jo({process:t,fungibleToStake:r,amount:c,provider:n,selectedChainAddress:l,transactionFees:f,isLoading:k,canSubmit:!k&&!!e&&p!=="insufficient"&&!S,priceMap:y,networkFeeErrorMsg:S})};var sa=t=>{let{data:e}=U("solana"),{trackConvertApprovedByUser:o}=pe(),n=b(y=>y.convert),r=b(y=>y.provider),c=b(y=>y.amount),l=b(y=>y.setTransactionData),{connection:s}=le(),{fungible:u}=W({key:r?.stakePoolTokenMetadata.metadata.address||""}),d=u?Bt(u):void 0,{data:p,isLoading:f}=Qo({connection:s,networkId:r?.chainId??A.solana.mainnetID,stakePoolAddress:r?.stakePoolAddress??"",ownerAddress:e?.address??"",validatorVoteAddress:n?.validatorVote??"",stakeAccountAddress:n?.stakeAccount??"",poolTokenAccountAddress:d}),S=un({process:"convert",transactionData:p,isLoadingTransactionData:f}),m=(0,Zo.useCallback)(()=>{o({provider:r,convertDetails:n,amount:c,fromAmount:S.payAsset?.amount,toAmount:S.receiveAsset?.amount,fromAmountUSD:S.payAsset?.amountUsd,toAmountUSD:S.receiveAsset?.amountUsd}),l(p),t()},[t,l,p,o,n,r,S,c]);return{...S,onPrimaryButtonPress:m}};i();a();var cn=C(_());var ua=({fungible:t,goToConvertStake:e})=>{let{connection:o}=le(),{data:n}=U("solana"),{isLoading:r}=pn(o,n?.address??""),{trackConvertBannerClicked:c,trackConvertBannerSeen:l}=pe(),{isLoading:s,isSupported:u,initLiquidStake:d,activeProvider:p}=eo(t),{hasConvertibleStakeAccounts:f}=At(p),m=!(r||s)&&u&&f,y=(0,cn.useCallback)(()=>{if(!m)throw new Error("Not eligible to convert stake");c(),d(),e()},[m,c,d,e]);return(0,cn.useEffect)(()=>{m&&l()},[m]),{title:v.t("convertStakeBannerTitle"),canConvertStake:m,onPress:y}};i();a();var tr=C(_());i();a();var er=t=>{let e=de.getMintTokenTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,amount:t.amount,poolTokenAccountAddress:t.poolTokenAccountAddress}),o=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.amount;return ye({enabled:o,queryKey:e,staleTime:1/0,async queryFn(){if(A.isSolanaNetworkID(t.networkId))try{let{transaction:n,signers:r}=await On(t);return{networkID:t.networkId,transaction:n,signers:r}}catch(n){throw ne.captureError(n,"staking"),n}throw new Error(`Unsupported networkId: ${t.networkId}`)}})};var ca=t=>{let e=b(m=>m.provider),o=b(m=>m.amount),n=b(m=>m.setTransactionData),{data:r}=U("solana"),{connection:c}=le(),{fungible:l}=W({key:e?.stakePoolTokenMetadata.metadata.address||""}),s=l?Bt(l):void 0,{trackMintApprovedByUser:u}=vt(),{data:d,isPending:p}=er({amount:ge(o).toNumber(),connection:c,networkId:e?.chainId??A.solana.mainnetID,stakePoolAddress:e?.stakePoolAddress??"",ownerAddress:r?.address??"",poolTokenAccountAddress:s}),f=un({process:"mint",transactionData:d,isLoadingTransactionData:p}),S=(0,tr.useCallback)(()=>{u({provider:e,payAmount:f.payAsset?.amount,receiveAmount:f.receiveAsset?.amount,payAmountUSD:f.payAsset?.amountUsd,receiveAmountUSD:f.receiveAsset?.amountUsd,payAssetTitle:f.payAsset?.title,receiveAssetTitle:f.receiveAsset?.title,providerName:f.providerName}),n(d),t()},[u,e,f.payAsset?.amount,f.payAsset?.amountUsd,f.payAsset?.title,f.receiveAsset?.amount,f.receiveAsset?.amountUsd,f.receiveAsset?.title,f.providerName,n,d,t]);return{...f,onPrimaryButtonPress:S}};i();a();var nr=C(_());function la(t){return typeof t=="string"?t:t?It(tt(t)):""}var da=t=>{let e=la(t),{data:[o]}=xn(["enable-psol-staking"]),{data:n={}}=Zn(),r=(0,nr.useMemo)(()=>!!Object.values(n).flat().find(l=>l.stakePoolTokenMetadata.caip19===e),[e,n]);return e===zn?o&&r:r};i();a();var or=C(_());var pa=({method:t,goToInfoPage:e,goToInitFlowPage:o})=>{let{usageState:n}=st();return(0,or.useCallback)(()=>{n[t]?o():e()},[e,o,t,n])};i();a();var Se=C(_());i();a();var ma=1,rr=({caip19:t,networkID:e})=>{let{data:o}=Qn({encodedCaip19:t,legacyKey:null}),{data:n}=U(e),{data:r=0}=nt(n),c=A.getAddressType(e),l=Ot(e,c),{fungible:s}=W({key:l}),u=T(o?.totalQuantityString??""),d=T(ma),p=T(u),f=T.max(p,0),S=T(rt).plus(T(et).multipliedBy(ot)),m=T(r),y=T(m).plus(S),k=T(s?.data.amount??"");return{minAmount:d,maxAmount:f,balance:u,minNativeBalance:y,nativeBalance:k}};var Sa=({goBack:t,goToStatusPage:e,lstCaip19:o})=>{let n=b(O=>O.provider),r=b(O=>O.amount),c=b(O=>O.setAmount),l=n?.stakePoolTokenMetadata.metadata,s=l?.symbol??"",u=l?.decimals??0,[d,p]=(0,Se.useState)(r?_t(r,u):""),{data:f}=U("solana"),{initLiquidStake:S}=_e(A.solana.mainnetID);(0,Se.useEffect)(()=>{S(void 0,o)},[S,o]),Ft(f,"STAKE_FUNGIBLE");let{minAmount:m,maxAmount:y,balance:k,nativeBalance:w,minNativeBalance:h}=rr({caip19:o??"",networkID:A.solana.mainnetID}),D=X(y,u),I=X(m,u),E=X(k,u),ce=X(h,A.getTokenDecimals(A.solana.mainnetID)),q=Mt(d,u).toString(),x=T(q),Ke=x.isLessThan(m),De=x.isGreaterThan(y),Ve=x.isFinite(),Ge=w.isLessThan(h),Ie=q&&Ke?v.t("unstakeLiquidStakeAmountMinRequired",{symbol:s,amount:I}):q&&De?v.t("unstakeLiquidStakeAmountInsufficientBalance"):q&&Ge?v.t("unstakeLiquidStakeAmountInsufficientNativeBalance",{symbol:A.getTokenSymbol(A.solana.mainnetID),amount:ce}):void 0,ze=Ve&&!Ie,Qe=(0,Se.useMemo)(()=>{if(!n)return;let O=Me(Number.parseFloat(n.apy)),{address:M,name:fe,symbol:Ne,logoURI:Ye}=n.stakePoolTokenMetadata.metadata,$e=T(1).dividedBy(T(n.convertRatio)),Tt=`1 ${s} \u2248 ${Re($e)} ${Ne}`;return{identifier:M,apy:O,name:fe,symbol:Ne,rate:Tt,logoURI:Ye}},[n,s]),qe=(0,Se.useCallback)(()=>{p(String(D))},[D]),Ce=(0,Se.useCallback)(O=>{let M=Ct(O);Ut(M,u??9)&&p(M)},[u]),Le=(0,Se.useCallback)(()=>{c(q),e(q)},[q,e,c]),N=(0,Se.useCallback)(()=>{c(""),t()},[c,t]);return{amount:d,amountError:Ie,balance:E,symbol:s,poolToken:Qe,canSubmit:ze,onBack:N,onContinue:Le,onChangeAmount:Ce,onSetMax:qe}};i();a();var ln=C(_());i();a();i();a();var fa=C(_());i();a();export{lr as a,dr as b,mr as c,Sr as d,kr as e,Ar as f,pe as g,Pr as h,vr as i,sa as j,_r as k,ua as l,vt as m,Nr as n,ca as o,Ur as p,da as q,pa as r,Rr as s,Sa as t};
//# sourceMappingURL=chunk-FOWWPYB2.js.map
