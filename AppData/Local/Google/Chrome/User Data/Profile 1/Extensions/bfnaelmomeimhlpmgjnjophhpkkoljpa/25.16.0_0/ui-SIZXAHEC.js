import{B as h,i as D}from"./chunk-TB3UVYOQ.js";import{P as x,V as I,ba as _,q as N,w as m,x as p}from"./chunk-E25H5Y2I.js";import{o as U,z as L}from"./chunk-IW23UAMS.js";import{w as k}from"./chunk-27NXJJ7L.js";import{a as f,h as o}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as g,h as e,n}from"./chunk-3KENBVE7.js";e();n();e();n();var d=g(f());e();n();e();n();e();n();var S=(s=>(s.PENDING="pending",s.ACCEPTED="accepted",s))(S||{}),C=(a=>(a.NOT_SUBMITTED="not_submitted",a.PENDING_REVIEW="pending",a.APPROVED="approved",a.REJECTED="rejected",a))(C||{}),v=["accepted"],B=["approved","rejected","pending"],O=["not_submitted"];e();n();var E="cash",R={account:t=>[E,"account",{user:t}],addressBook:t=>[E,"address-book",t?.userID],cashAddress:t=>[E,"cash-address",{accountIdentifier:t}],enrollment:t=>[E,"enrollment",t?.userID],transfers:(t,r)=>[E,"transfers",{user:t,params:r}]};var W=o.object({id:o.string(),balance:o.string(),addressDetails:o.object({address:o.string()}),enrollmentDetails:o.object({kycStatus:o.nativeEnum(C),kycUrl:o.string(),tosStatus:o.nativeEnum(S),tosUrl:o.string()}),bankDetails:o.object({sourceCurrency:o.string(),destinationCurrency:o.string(),destinationBlockchain:o.string(),destinationAddress:o.string(),accountNumber:o.string(),routingNumber:o.string(),bankName:o.string().optional(),bankAddress:o.string().optional(),bankBeneficiaryName:o.string().optional(),bankBeneficiaryAddress:o.string().optional()}).optional()}),T=(t,r)=>{let{accessToken:s,userID:c}=t??{};return L({...r,queryKey:R.account(t),queryFn:c?async()=>{let a=await D.api().bearer(s).get(`/cash/v1/users/${c}/cash-account`),l=W.safeParse(a.data);if(l.success)return l.data;throw new A("Failed to parse cash account data")}:U})},A=class extends Error{constructor(r){super(r),this.name="CashAccountError"}};e();n();var K=t=>{if(!t)return!1;let{kycStatus:r,tosStatus:s}=t;return B.includes(r)&&v.includes(s)},w=t=>{if(!t)return!1;let{kycStatus:r}=t;return O.includes(r)};var F=()=>{let{data:t,isLoading:r}=h(),{data:s,isLoading:c}=T(t);return r||c?"loading":s?w(s.enrollmentDetails)?"enrolling":K(s.enrollmentDetails)?"enrolled":"not-enrolled":"not-enrolled"};e();n();var z=()=>{throw new Error("Not yet implemented")},j=z;e();n();var y=g(f());e();n();var u=g(f());e();n();var b=g(f());e();n();var Y=k({seconds:5});var V=t=>{let{data:r}=h(),{data:s}=T(r,{refetchInterval:Y}),{tosStatus:c,tosUrl:a="",kycStatus:l,kycUrl:P=""}=s?.enrollmentDetails||{},J=(0,b.useMemo)(()=>({text:H(c),url:a,disabled:c==="accepted",onPress:()=>t(a)}),[c,a,t]),Q=(0,b.useMemo)(()=>({text:X(l),url:P,disabled:l!=="not_submitted",onPress:()=>t(P)}),[l,P,t]);return{tosButton:J,kycButton:Q,title:"Complete enrollment",description:"To start using Cash on Phantom, just accept the terms of service and complete KYC verification.",imageProps:{src:"https://assets.phantom.app/assets/nux-illustration-gm.webp",width:249,height:96}}},H=t=>{switch(t){case"accepted":return"TOS Accepted";case"pending":return"Accept TOS";default:return"TOS Unavailable"}},X=t=>{switch(t){case"not_submitted":return"Start KYC";case"approved":return"KYC Approved";case"pending":return"KYC Under Review";case"rejected":return"KYC Rejected"}};var $=({openUrl:t})=>{let{tosButton:r,kycButton:s,title:c,description:a,imageProps:l}=V(t);return u.default.createElement(m,{className:N({display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",padding:16})},u.default.createElement(m,{className:N({flex:1,justifyContent:"center",alignItems:"center",paddingX:"screen",gap:16})},u.default.createElement(_,{...l}),u.default.createElement(p,{align:"center",font:"heading3"},c),u.default.createElement(p,{font:"body",color:"textSecondary",align:"center",style:{marginBottom:24}},a)),u.default.createElement(I,null,r&&u.default.createElement(x,{disabled:r.disabled,onPress:r.onPress},r.text),s&&u.default.createElement(x,{theme:"primary",disabled:s.disabled,onPress:s.onPress},s.text)))},G=$;var Z=()=>{let t=(0,y.useCallback)(r=>self.open(r,"_blank"),[]);return y.default.createElement(G,{openUrl:t})},M=Z;e();n();var tt=()=>{throw new Error("Not yet implemented")},q=tt;var et=()=>{let t=F(),r=(()=>{switch(t){case"loading":return d.default.createElement(p,null,"Loading...");case"not-enrolled":return d.default.createElement(q,null);case"enrolling":return d.default.createElement(M,null);case"enrolled":return d.default.createElement(j,null)}})();return d.default.createElement(m,null,r)};export{et as CashTabPage};
//# sourceMappingURL=ui-SIZXAHEC.js.map
